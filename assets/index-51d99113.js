var d3=Object.defineProperty;var h3=(r,e,t)=>e in r?d3(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;var je=(r,e,t)=>(h3(r,typeof e!="symbol"?e+"":e,t),t),Lv=(r,e,t)=>{if(!e.has(r))throw TypeError("Cannot "+t)};var Wi=(r,e,t)=>(Lv(r,e,"read from private field"),t?t.call(r):e.get(r)),Bc=(r,e,t)=>{if(e.has(r))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(r):e.set(r,t)},Wv=(r,e,t,n)=>(Lv(r,e,"write to private field"),n?n.call(r,t):e.set(r,t),t);var yQ=(r,e,t)=>(Lv(r,e,"access private method"),t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function t(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(i){if(i.ep)return;i.ep=!0;const s=t(i);fetch(i.href,s)}})();var ZM=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function PM(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}function p3(r){if(r.__esModule)return r;var e=r.default;if(typeof e=="function"){var t=function n(){if(this instanceof n){var i=[null];i.push.apply(i,arguments);var s=Function.bind.apply(e,i);return new s}return e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(r).forEach(function(n){var i=Object.getOwnPropertyDescriptor(r,n);Object.defineProperty(t,n,i.get?i:{enumerable:!0,get:function(){return r[n]}})}),t}var ie={},g3={get exports(){return ie},set exports(r){ie=r}},TB={},Ie={},m3={get exports(){return Ie},set exports(r){Ie=r}},Ct={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vp=Symbol.for("react.element"),B3=Symbol.for("react.portal"),v3=Symbol.for("react.fragment"),y3=Symbol.for("react.strict_mode"),C3=Symbol.for("react.profiler"),w3=Symbol.for("react.provider"),F3=Symbol.for("react.context"),I3=Symbol.for("react.forward_ref"),U3=Symbol.for("react.suspense"),x3=Symbol.for("react.memo"),Q3=Symbol.for("react.lazy"),CQ=Symbol.iterator;function b3(r){return r===null||typeof r!="object"?null:(r=CQ&&r[CQ]||r["@@iterator"],typeof r=="function"?r:null)}var JM={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},GM=Object.assign,OM={};function Mf(r,e,t){this.props=r,this.context=e,this.refs=OM,this.updater=t||JM}Mf.prototype.isReactComponent={};Mf.prototype.setState=function(r,e){if(typeof r!="object"&&typeof r!="function"&&r!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,r,e,"setState")};Mf.prototype.forceUpdate=function(r){this.updater.enqueueForceUpdate(this,r,"forceUpdate")};function HM(){}HM.prototype=Mf.prototype;function uU(r,e,t){this.props=r,this.context=e,this.refs=OM,this.updater=t||JM}var fU=uU.prototype=new HM;fU.constructor=uU;GM(fU,Mf.prototype);fU.isPureReactComponent=!0;var wQ=Array.isArray,zM=Object.prototype.hasOwnProperty,dU={current:null},XM={key:!0,ref:!0,__self:!0,__source:!0};function YM(r,e,t){var n,i={},s=null,o=null;if(e!=null)for(n in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)zM.call(e,n)&&!XM.hasOwnProperty(n)&&(i[n]=e[n]);var a=arguments.length-2;if(a===1)i.children=t;else if(1<a){for(var A=Array(a),l=0;l<a;l++)A[l]=arguments[l+2];i.children=A}if(r&&r.defaultProps)for(n in a=r.defaultProps,a)i[n]===void 0&&(i[n]=a[n]);return{$$typeof:vp,type:r,key:s,ref:o,props:i,_owner:dU.current}}function E3(r,e){return{$$typeof:vp,type:r.type,key:e,ref:r.ref,props:r.props,_owner:r._owner}}function hU(r){return typeof r=="object"&&r!==null&&r.$$typeof===vp}function S3(r){var e={"=":"=0",":":"=2"};return"$"+r.replace(/[=:]/g,function(t){return e[t]})}var FQ=/\/+/g;function Zv(r,e){return typeof r=="object"&&r!==null&&r.key!=null?S3(""+r.key):e.toString(36)}function Um(r,e,t,n,i){var s=typeof r;(s==="undefined"||s==="boolean")&&(r=null);var o=!1;if(r===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(r.$$typeof){case vp:case B3:o=!0}}if(o)return o=r,i=i(o),r=n===""?"."+Zv(o,0):n,wQ(i)?(t="",r!=null&&(t=r.replace(FQ,"$&/")+"/"),Um(i,e,t,"",function(l){return l})):i!=null&&(hU(i)&&(i=E3(i,t+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(FQ,"$&/")+"/")+r)),e.push(i)),1;if(o=0,n=n===""?".":n+":",wQ(r))for(var a=0;a<r.length;a++){s=r[a];var A=n+Zv(s,a);o+=Um(s,e,t,A,i)}else if(A=b3(r),typeof A=="function")for(r=A.call(r),a=0;!(s=r.next()).done;)s=s.value,A=n+Zv(s,a++),o+=Um(s,e,t,A,i);else if(s==="object")throw e=String(r),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Pp(r,e,t){if(r==null)return r;var n=[],i=0;return Um(r,n,"","",function(s){return e.call(t,s,i++)}),n}function _3(r){if(r._status===-1){var e=r._result;e=e(),e.then(function(t){(r._status===0||r._status===-1)&&(r._status=1,r._result=t)},function(t){(r._status===0||r._status===-1)&&(r._status=2,r._result=t)}),r._status===-1&&(r._status=0,r._result=e)}if(r._status===1)return r._result.default;throw r._result}var Hr={current:null},xm={transition:null},R3={ReactCurrentDispatcher:Hr,ReactCurrentBatchConfig:xm,ReactCurrentOwner:dU};Ct.Children={map:Pp,forEach:function(r,e,t){Pp(r,function(){e.apply(this,arguments)},t)},count:function(r){var e=0;return Pp(r,function(){e++}),e},toArray:function(r){return Pp(r,function(e){return e})||[]},only:function(r){if(!hU(r))throw Error("React.Children.only expected to receive a single React element child.");return r}};Ct.Component=Mf;Ct.Fragment=v3;Ct.Profiler=C3;Ct.PureComponent=uU;Ct.StrictMode=y3;Ct.Suspense=U3;Ct.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=R3;Ct.cloneElement=function(r,e,t){if(r==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+r+".");var n=GM({},r.props),i=r.key,s=r.ref,o=r._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=dU.current),e.key!==void 0&&(i=""+e.key),r.type&&r.type.defaultProps)var a=r.type.defaultProps;for(A in e)zM.call(e,A)&&!XM.hasOwnProperty(A)&&(n[A]=e[A]===void 0&&a!==void 0?a[A]:e[A])}var A=arguments.length-2;if(A===1)n.children=t;else if(1<A){a=Array(A);for(var l=0;l<A;l++)a[l]=arguments[l+2];n.children=a}return{$$typeof:vp,type:r.type,key:i,ref:s,props:n,_owner:o}};Ct.createContext=function(r){return r={$$typeof:F3,_currentValue:r,_currentValue2:r,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},r.Provider={$$typeof:w3,_context:r},r.Consumer=r};Ct.createElement=YM;Ct.createFactory=function(r){var e=YM.bind(null,r);return e.type=r,e};Ct.createRef=function(){return{current:null}};Ct.forwardRef=function(r){return{$$typeof:I3,render:r}};Ct.isValidElement=hU;Ct.lazy=function(r){return{$$typeof:Q3,_payload:{_status:-1,_result:r},_init:_3}};Ct.memo=function(r,e){return{$$typeof:x3,type:r,compare:e===void 0?null:e}};Ct.startTransition=function(r){var e=xm.transition;xm.transition={};try{r()}finally{xm.transition=e}};Ct.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};Ct.useCallback=function(r,e){return Hr.current.useCallback(r,e)};Ct.useContext=function(r){return Hr.current.useContext(r)};Ct.useDebugValue=function(){};Ct.useDeferredValue=function(r){return Hr.current.useDeferredValue(r)};Ct.useEffect=function(r,e){return Hr.current.useEffect(r,e)};Ct.useId=function(){return Hr.current.useId()};Ct.useImperativeHandle=function(r,e,t){return Hr.current.useImperativeHandle(r,e,t)};Ct.useInsertionEffect=function(r,e){return Hr.current.useInsertionEffect(r,e)};Ct.useLayoutEffect=function(r,e){return Hr.current.useLayoutEffect(r,e)};Ct.useMemo=function(r,e){return Hr.current.useMemo(r,e)};Ct.useReducer=function(r,e,t){return Hr.current.useReducer(r,e,t)};Ct.useRef=function(r){return Hr.current.useRef(r)};Ct.useState=function(r){return Hr.current.useState(r)};Ct.useSyncExternalStore=function(r,e,t){return Hr.current.useSyncExternalStore(r,e,t)};Ct.useTransition=function(){return Hr.current.useTransition()};Ct.version="18.2.0";(function(r){r.exports=Ct})(m3);const et=PM(Ie);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var M3=Ie,T3=Symbol.for("react.element"),N3=Symbol.for("react.fragment"),V3=Object.prototype.hasOwnProperty,D3=M3.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,k3={key:!0,ref:!0,__self:!0,__source:!0};function KM(r,e,t){var n,i={},s=null,o=null;t!==void 0&&(s=""+t),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(n in e)V3.call(e,n)&&!k3.hasOwnProperty(n)&&(i[n]=e[n]);if(r&&r.defaultProps)for(n in e=r.defaultProps,e)i[n]===void 0&&(i[n]=e[n]);return{$$typeof:T3,type:r,key:s,ref:o,props:i,_owner:D3.current}}TB.Fragment=N3;TB.jsx=KM;TB.jsxs=KM;(function(r){r.exports=TB})(g3);var kw={},L3={get exports(){return kw},set exports(r){kw=r}};const W3={},Z3=Object.freeze(Object.defineProperty({__proto__:null,default:W3},Symbol.toStringTag,{value:"Module"})),P3=p3(Z3);(function(r){(function(e,t){function n(R,y){if(!R)throw new Error(y||"Assertion failed")}function i(R,y){R.super_=y;var Q=function(){};Q.prototype=y.prototype,R.prototype=new Q,R.prototype.constructor=R}function s(R,y,Q){if(s.isBN(R))return R;this.negative=0,this.words=null,this.length=0,this.red=null,R!==null&&((y==="le"||y==="be")&&(Q=y,y=10),this._init(R||0,y||10,Q||"be"))}typeof e=="object"?e.exports=s:t.BN=s,s.BN=s,s.wordSize=26;var o;try{typeof window<"u"&&typeof window.Buffer<"u"?o=window.Buffer:o=P3.Buffer}catch{}s.isBN=function(y){return y instanceof s?!0:y!==null&&typeof y=="object"&&y.constructor.wordSize===s.wordSize&&Array.isArray(y.words)},s.max=function(y,Q){return y.cmp(Q)>0?y:Q},s.min=function(y,Q){return y.cmp(Q)<0?y:Q},s.prototype._init=function(y,Q,_){if(typeof y=="number")return this._initNumber(y,Q,_);if(typeof y=="object")return this._initArray(y,Q,_);Q==="hex"&&(Q=16),n(Q===(Q|0)&&Q>=2&&Q<=36),y=y.toString().replace(/\s+/g,"");var L=0;y[0]==="-"&&(L++,this.negative=1),L<y.length&&(Q===16?this._parseHex(y,L,_):(this._parseBase(y,Q,L),_==="le"&&this._initArray(this.toArray(),Q,_)))},s.prototype._initNumber=function(y,Q,_){y<0&&(this.negative=1,y=-y),y<67108864?(this.words=[y&67108863],this.length=1):y<4503599627370496?(this.words=[y&67108863,y/67108864&67108863],this.length=2):(n(y<9007199254740992),this.words=[y&67108863,y/67108864&67108863,1],this.length=3),_==="le"&&this._initArray(this.toArray(),Q,_)},s.prototype._initArray=function(y,Q,_){if(n(typeof y.length=="number"),y.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(y.length/3),this.words=new Array(this.length);for(var L=0;L<this.length;L++)this.words[L]=0;var T,Z,G=0;if(_==="be")for(L=y.length-1,T=0;L>=0;L-=3)Z=y[L]|y[L-1]<<8|y[L-2]<<16,this.words[T]|=Z<<G&67108863,this.words[T+1]=Z>>>26-G&67108863,G+=24,G>=26&&(G-=26,T++);else if(_==="le")for(L=0,T=0;L<y.length;L+=3)Z=y[L]|y[L+1]<<8|y[L+2]<<16,this.words[T]|=Z<<G&67108863,this.words[T+1]=Z>>>26-G&67108863,G+=24,G>=26&&(G-=26,T++);return this._strip()};function a(R,y){var Q=R.charCodeAt(y);if(Q>=48&&Q<=57)return Q-48;if(Q>=65&&Q<=70)return Q-55;if(Q>=97&&Q<=102)return Q-87;n(!1,"Invalid character in "+R)}function A(R,y,Q){var _=a(R,Q);return Q-1>=y&&(_|=a(R,Q-1)<<4),_}s.prototype._parseHex=function(y,Q,_){this.length=Math.ceil((y.length-Q)/6),this.words=new Array(this.length);for(var L=0;L<this.length;L++)this.words[L]=0;var T=0,Z=0,G;if(_==="be")for(L=y.length-1;L>=Q;L-=2)G=A(y,Q,L)<<T,this.words[Z]|=G&67108863,T>=18?(T-=18,Z+=1,this.words[Z]|=G>>>26):T+=8;else{var D=y.length-Q;for(L=D%2===0?Q+1:Q;L<y.length;L+=2)G=A(y,Q,L)<<T,this.words[Z]|=G&67108863,T>=18?(T-=18,Z+=1,this.words[Z]|=G>>>26):T+=8}this._strip()};function l(R,y,Q,_){for(var L=0,T=0,Z=Math.min(R.length,Q),G=y;G<Z;G++){var D=R.charCodeAt(G)-48;L*=_,D>=49?T=D-49+10:D>=17?T=D-17+10:T=D,n(D>=0&&T<_,"Invalid character"),L+=T}return L}s.prototype._parseBase=function(y,Q,_){this.words=[0],this.length=1;for(var L=0,T=1;T<=67108863;T*=Q)L++;L--,T=T/Q|0;for(var Z=y.length-_,G=Z%L,D=Math.min(Z,Z-G)+_,x=0,P=_;P<D;P+=L)x=l(y,P,P+L,Q),this.imuln(T),this.words[0]+x<67108864?this.words[0]+=x:this._iaddn(x);if(G!==0){var oe=1;for(x=l(y,P,y.length,Q),P=0;P<G;P++)oe*=Q;this.imuln(oe),this.words[0]+x<67108864?this.words[0]+=x:this._iaddn(x)}this._strip()},s.prototype.copy=function(y){y.words=new Array(this.length);for(var Q=0;Q<this.length;Q++)y.words[Q]=this.words[Q];y.length=this.length,y.negative=this.negative,y.red=this.red};function c(R,y){R.words=y.words,R.length=y.length,R.negative=y.negative,R.red=y.red}if(s.prototype._move=function(y){c(y,this)},s.prototype.clone=function(){var y=new s(null);return this.copy(y),y},s.prototype._expand=function(y){for(;this.length<y;)this.words[this.length++]=0;return this},s.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},s.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{s.prototype[Symbol.for("nodejs.util.inspect.custom")]=u}catch{s.prototype.inspect=u}else s.prototype.inspect=u;function u(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var f=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],d=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],p=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];s.prototype.toString=function(y,Q){y=y||10,Q=Q|0||1;var _;if(y===16||y==="hex"){_="";for(var L=0,T=0,Z=0;Z<this.length;Z++){var G=this.words[Z],D=((G<<L|T)&16777215).toString(16);T=G>>>24-L&16777215,L+=2,L>=26&&(L-=26,Z--),T!==0||Z!==this.length-1?_=f[6-D.length]+D+_:_=D+_}for(T!==0&&(_=T.toString(16)+_);_.length%Q!==0;)_="0"+_;return this.negative!==0&&(_="-"+_),_}if(y===(y|0)&&y>=2&&y<=36){var x=d[y],P=p[y];_="";var oe=this.clone();for(oe.negative=0;!oe.isZero();){var M=oe.modrn(P).toString(y);oe=oe.idivn(P),oe.isZero()?_=M+_:_=f[x-M.length]+M+_}for(this.isZero()&&(_="0"+_);_.length%Q!==0;)_="0"+_;return this.negative!==0&&(_="-"+_),_}n(!1,"Base should be between 2 and 36")},s.prototype.toNumber=function(){var y=this.words[0];return this.length===2?y+=this.words[1]*67108864:this.length===3&&this.words[2]===1?y+=4503599627370496+this.words[1]*67108864:this.length>2&&n(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-y:y},s.prototype.toJSON=function(){return this.toString(16,2)},o&&(s.prototype.toBuffer=function(y,Q){return this.toArrayLike(o,y,Q)}),s.prototype.toArray=function(y,Q){return this.toArrayLike(Array,y,Q)};var h=function(y,Q){return y.allocUnsafe?y.allocUnsafe(Q):new y(Q)};s.prototype.toArrayLike=function(y,Q,_){this._strip();var L=this.byteLength(),T=_||Math.max(1,L);n(L<=T,"byte array longer than desired length"),n(T>0,"Requested array length <= 0");var Z=h(y,T),G=Q==="le"?"LE":"BE";return this["_toArrayLike"+G](Z,L),Z},s.prototype._toArrayLikeLE=function(y,Q){for(var _=0,L=0,T=0,Z=0;T<this.length;T++){var G=this.words[T]<<Z|L;y[_++]=G&255,_<y.length&&(y[_++]=G>>8&255),_<y.length&&(y[_++]=G>>16&255),Z===6?(_<y.length&&(y[_++]=G>>24&255),L=0,Z=0):(L=G>>>24,Z+=2)}if(_<y.length)for(y[_++]=L;_<y.length;)y[_++]=0},s.prototype._toArrayLikeBE=function(y,Q){for(var _=y.length-1,L=0,T=0,Z=0;T<this.length;T++){var G=this.words[T]<<Z|L;y[_--]=G&255,_>=0&&(y[_--]=G>>8&255),_>=0&&(y[_--]=G>>16&255),Z===6?(_>=0&&(y[_--]=G>>24&255),L=0,Z=0):(L=G>>>24,Z+=2)}if(_>=0)for(y[_--]=L;_>=0;)y[_--]=0},Math.clz32?s.prototype._countBits=function(y){return 32-Math.clz32(y)}:s.prototype._countBits=function(y){var Q=y,_=0;return Q>=4096&&(_+=13,Q>>>=13),Q>=64&&(_+=7,Q>>>=7),Q>=8&&(_+=4,Q>>>=4),Q>=2&&(_+=2,Q>>>=2),_+Q},s.prototype._zeroBits=function(y){if(y===0)return 26;var Q=y,_=0;return Q&8191||(_+=13,Q>>>=13),Q&127||(_+=7,Q>>>=7),Q&15||(_+=4,Q>>>=4),Q&3||(_+=2,Q>>>=2),Q&1||_++,_},s.prototype.bitLength=function(){var y=this.words[this.length-1],Q=this._countBits(y);return(this.length-1)*26+Q};function m(R){for(var y=new Array(R.bitLength()),Q=0;Q<y.length;Q++){var _=Q/26|0,L=Q%26;y[Q]=R.words[_]>>>L&1}return y}s.prototype.zeroBits=function(){if(this.isZero())return 0;for(var y=0,Q=0;Q<this.length;Q++){var _=this._zeroBits(this.words[Q]);if(y+=_,_!==26)break}return y},s.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},s.prototype.toTwos=function(y){return this.negative!==0?this.abs().inotn(y).iaddn(1):this.clone()},s.prototype.fromTwos=function(y){return this.testn(y-1)?this.notn(y).iaddn(1).ineg():this.clone()},s.prototype.isNeg=function(){return this.negative!==0},s.prototype.neg=function(){return this.clone().ineg()},s.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},s.prototype.iuor=function(y){for(;this.length<y.length;)this.words[this.length++]=0;for(var Q=0;Q<y.length;Q++)this.words[Q]=this.words[Q]|y.words[Q];return this._strip()},s.prototype.ior=function(y){return n((this.negative|y.negative)===0),this.iuor(y)},s.prototype.or=function(y){return this.length>y.length?this.clone().ior(y):y.clone().ior(this)},s.prototype.uor=function(y){return this.length>y.length?this.clone().iuor(y):y.clone().iuor(this)},s.prototype.iuand=function(y){var Q;this.length>y.length?Q=y:Q=this;for(var _=0;_<Q.length;_++)this.words[_]=this.words[_]&y.words[_];return this.length=Q.length,this._strip()},s.prototype.iand=function(y){return n((this.negative|y.negative)===0),this.iuand(y)},s.prototype.and=function(y){return this.length>y.length?this.clone().iand(y):y.clone().iand(this)},s.prototype.uand=function(y){return this.length>y.length?this.clone().iuand(y):y.clone().iuand(this)},s.prototype.iuxor=function(y){var Q,_;this.length>y.length?(Q=this,_=y):(Q=y,_=this);for(var L=0;L<_.length;L++)this.words[L]=Q.words[L]^_.words[L];if(this!==Q)for(;L<Q.length;L++)this.words[L]=Q.words[L];return this.length=Q.length,this._strip()},s.prototype.ixor=function(y){return n((this.negative|y.negative)===0),this.iuxor(y)},s.prototype.xor=function(y){return this.length>y.length?this.clone().ixor(y):y.clone().ixor(this)},s.prototype.uxor=function(y){return this.length>y.length?this.clone().iuxor(y):y.clone().iuxor(this)},s.prototype.inotn=function(y){n(typeof y=="number"&&y>=0);var Q=Math.ceil(y/26)|0,_=y%26;this._expand(Q),_>0&&Q--;for(var L=0;L<Q;L++)this.words[L]=~this.words[L]&67108863;return _>0&&(this.words[L]=~this.words[L]&67108863>>26-_),this._strip()},s.prototype.notn=function(y){return this.clone().inotn(y)},s.prototype.setn=function(y,Q){n(typeof y=="number"&&y>=0);var _=y/26|0,L=y%26;return this._expand(_+1),Q?this.words[_]=this.words[_]|1<<L:this.words[_]=this.words[_]&~(1<<L),this._strip()},s.prototype.iadd=function(y){var Q;if(this.negative!==0&&y.negative===0)return this.negative=0,Q=this.isub(y),this.negative^=1,this._normSign();if(this.negative===0&&y.negative!==0)return y.negative=0,Q=this.isub(y),y.negative=1,Q._normSign();var _,L;this.length>y.length?(_=this,L=y):(_=y,L=this);for(var T=0,Z=0;Z<L.length;Z++)Q=(_.words[Z]|0)+(L.words[Z]|0)+T,this.words[Z]=Q&67108863,T=Q>>>26;for(;T!==0&&Z<_.length;Z++)Q=(_.words[Z]|0)+T,this.words[Z]=Q&67108863,T=Q>>>26;if(this.length=_.length,T!==0)this.words[this.length]=T,this.length++;else if(_!==this)for(;Z<_.length;Z++)this.words[Z]=_.words[Z];return this},s.prototype.add=function(y){var Q;return y.negative!==0&&this.negative===0?(y.negative=0,Q=this.sub(y),y.negative^=1,Q):y.negative===0&&this.negative!==0?(this.negative=0,Q=y.sub(this),this.negative=1,Q):this.length>y.length?this.clone().iadd(y):y.clone().iadd(this)},s.prototype.isub=function(y){if(y.negative!==0){y.negative=0;var Q=this.iadd(y);return y.negative=1,Q._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(y),this.negative=1,this._normSign();var _=this.cmp(y);if(_===0)return this.negative=0,this.length=1,this.words[0]=0,this;var L,T;_>0?(L=this,T=y):(L=y,T=this);for(var Z=0,G=0;G<T.length;G++)Q=(L.words[G]|0)-(T.words[G]|0)+Z,Z=Q>>26,this.words[G]=Q&67108863;for(;Z!==0&&G<L.length;G++)Q=(L.words[G]|0)+Z,Z=Q>>26,this.words[G]=Q&67108863;if(Z===0&&G<L.length&&L!==this)for(;G<L.length;G++)this.words[G]=L.words[G];return this.length=Math.max(this.length,G),L!==this&&(this.negative=1),this._strip()},s.prototype.sub=function(y){return this.clone().isub(y)};function g(R,y,Q){Q.negative=y.negative^R.negative;var _=R.length+y.length|0;Q.length=_,_=_-1|0;var L=R.words[0]|0,T=y.words[0]|0,Z=L*T,G=Z&67108863,D=Z/67108864|0;Q.words[0]=G;for(var x=1;x<_;x++){for(var P=D>>>26,oe=D&67108863,M=Math.min(x,y.length-1),k=Math.max(0,x-R.length+1);k<=M;k++){var q=x-k|0;L=R.words[q]|0,T=y.words[k]|0,Z=L*T+oe,P+=Z/67108864|0,oe=Z&67108863}Q.words[x]=oe|0,D=P|0}return D!==0?Q.words[x]=D|0:Q.length--,Q._strip()}var B=function(y,Q,_){var L=y.words,T=Q.words,Z=_.words,G=0,D,x,P,oe=L[0]|0,M=oe&8191,k=oe>>>13,q=L[1]|0,ee=q&8191,X=q>>>13,$=L[2]|0,se=$&8191,ae=$>>>13,de=L[3]|0,fe=de&8191,ge=de>>>13,Qe=L[4]|0,Ue=Qe&8191,xe=Qe>>>13,Fe=L[5]|0,Ne=Fe&8191,Ze=Fe>>>13,j=L[6]|0,O=j&8191,le=j>>>13,ue=L[7]|0,Ce=ue&8191,W=ue>>>13,b=L[8]|0,F=b&8191,N=b>>>13,K=L[9]|0,te=K&8191,ne=K>>>13,we=T[0]|0,ye=we&8191,Se=we>>>13,We=T[1]|0,Re=We&8191,re=We>>>13,Be=T[2]|0,ve=Be&8191,be=Be>>>13,Ge=T[3]|0,Ye=Ge&8191,rt=Ge>>>13,Yt=T[4]|0,gt=Yt&8191,qe=Yt>>>13,Wn=T[5]|0,ct=Wn&8191,kt=Wn>>>13,Fs=T[6]|0,Tt=Fs&8191,Lt=Fs>>>13,Y=T[7]|0,Ae=Y&8191,he=Y>>>13,ce=T[8]|0,pe=ce&8191,Te=ce>>>13,tt=T[9]|0,He=tt&8191,ze=tt>>>13;_.negative=y.negative^Q.negative,_.length=19,D=Math.imul(M,ye),x=Math.imul(M,Se),x=x+Math.imul(k,ye)|0,P=Math.imul(k,Se);var At=(G+D|0)+((x&8191)<<13)|0;G=(P+(x>>>13)|0)+(At>>>26)|0,At&=67108863,D=Math.imul(ee,ye),x=Math.imul(ee,Se),x=x+Math.imul(X,ye)|0,P=Math.imul(X,Se),D=D+Math.imul(M,Re)|0,x=x+Math.imul(M,re)|0,x=x+Math.imul(k,Re)|0,P=P+Math.imul(k,re)|0;var st=(G+D|0)+((x&8191)<<13)|0;G=(P+(x>>>13)|0)+(st>>>26)|0,st&=67108863,D=Math.imul(se,ye),x=Math.imul(se,Se),x=x+Math.imul(ae,ye)|0,P=Math.imul(ae,Se),D=D+Math.imul(ee,Re)|0,x=x+Math.imul(ee,re)|0,x=x+Math.imul(X,Re)|0,P=P+Math.imul(X,re)|0,D=D+Math.imul(M,ve)|0,x=x+Math.imul(M,be)|0,x=x+Math.imul(k,ve)|0,P=P+Math.imul(k,be)|0;var ot=(G+D|0)+((x&8191)<<13)|0;G=(P+(x>>>13)|0)+(ot>>>26)|0,ot&=67108863,D=Math.imul(fe,ye),x=Math.imul(fe,Se),x=x+Math.imul(ge,ye)|0,P=Math.imul(ge,Se),D=D+Math.imul(se,Re)|0,x=x+Math.imul(se,re)|0,x=x+Math.imul(ae,Re)|0,P=P+Math.imul(ae,re)|0,D=D+Math.imul(ee,ve)|0,x=x+Math.imul(ee,be)|0,x=x+Math.imul(X,ve)|0,P=P+Math.imul(X,be)|0,D=D+Math.imul(M,Ye)|0,x=x+Math.imul(M,rt)|0,x=x+Math.imul(k,Ye)|0,P=P+Math.imul(k,rt)|0;var Wt=(G+D|0)+((x&8191)<<13)|0;G=(P+(x>>>13)|0)+(Wt>>>26)|0,Wt&=67108863,D=Math.imul(Ue,ye),x=Math.imul(Ue,Se),x=x+Math.imul(xe,ye)|0,P=Math.imul(xe,Se),D=D+Math.imul(fe,Re)|0,x=x+Math.imul(fe,re)|0,x=x+Math.imul(ge,Re)|0,P=P+Math.imul(ge,re)|0,D=D+Math.imul(se,ve)|0,x=x+Math.imul(se,be)|0,x=x+Math.imul(ae,ve)|0,P=P+Math.imul(ae,be)|0,D=D+Math.imul(ee,Ye)|0,x=x+Math.imul(ee,rt)|0,x=x+Math.imul(X,Ye)|0,P=P+Math.imul(X,rt)|0,D=D+Math.imul(M,gt)|0,x=x+Math.imul(M,qe)|0,x=x+Math.imul(k,gt)|0,P=P+Math.imul(k,qe)|0;var hn=(G+D|0)+((x&8191)<<13)|0;G=(P+(x>>>13)|0)+(hn>>>26)|0,hn&=67108863,D=Math.imul(Ne,ye),x=Math.imul(Ne,Se),x=x+Math.imul(Ze,ye)|0,P=Math.imul(Ze,Se),D=D+Math.imul(Ue,Re)|0,x=x+Math.imul(Ue,re)|0,x=x+Math.imul(xe,Re)|0,P=P+Math.imul(xe,re)|0,D=D+Math.imul(fe,ve)|0,x=x+Math.imul(fe,be)|0,x=x+Math.imul(ge,ve)|0,P=P+Math.imul(ge,be)|0,D=D+Math.imul(se,Ye)|0,x=x+Math.imul(se,rt)|0,x=x+Math.imul(ae,Ye)|0,P=P+Math.imul(ae,rt)|0,D=D+Math.imul(ee,gt)|0,x=x+Math.imul(ee,qe)|0,x=x+Math.imul(X,gt)|0,P=P+Math.imul(X,qe)|0,D=D+Math.imul(M,ct)|0,x=x+Math.imul(M,kt)|0,x=x+Math.imul(k,ct)|0,P=P+Math.imul(k,kt)|0;var fi=(G+D|0)+((x&8191)<<13)|0;G=(P+(x>>>13)|0)+(fi>>>26)|0,fi&=67108863,D=Math.imul(O,ye),x=Math.imul(O,Se),x=x+Math.imul(le,ye)|0,P=Math.imul(le,Se),D=D+Math.imul(Ne,Re)|0,x=x+Math.imul(Ne,re)|0,x=x+Math.imul(Ze,Re)|0,P=P+Math.imul(Ze,re)|0,D=D+Math.imul(Ue,ve)|0,x=x+Math.imul(Ue,be)|0,x=x+Math.imul(xe,ve)|0,P=P+Math.imul(xe,be)|0,D=D+Math.imul(fe,Ye)|0,x=x+Math.imul(fe,rt)|0,x=x+Math.imul(ge,Ye)|0,P=P+Math.imul(ge,rt)|0,D=D+Math.imul(se,gt)|0,x=x+Math.imul(se,qe)|0,x=x+Math.imul(ae,gt)|0,P=P+Math.imul(ae,qe)|0,D=D+Math.imul(ee,ct)|0,x=x+Math.imul(ee,kt)|0,x=x+Math.imul(X,ct)|0,P=P+Math.imul(X,kt)|0,D=D+Math.imul(M,Tt)|0,x=x+Math.imul(M,Lt)|0,x=x+Math.imul(k,Tt)|0,P=P+Math.imul(k,Lt)|0;var Is=(G+D|0)+((x&8191)<<13)|0;G=(P+(x>>>13)|0)+(Is>>>26)|0,Is&=67108863,D=Math.imul(Ce,ye),x=Math.imul(Ce,Se),x=x+Math.imul(W,ye)|0,P=Math.imul(W,Se),D=D+Math.imul(O,Re)|0,x=x+Math.imul(O,re)|0,x=x+Math.imul(le,Re)|0,P=P+Math.imul(le,re)|0,D=D+Math.imul(Ne,ve)|0,x=x+Math.imul(Ne,be)|0,x=x+Math.imul(Ze,ve)|0,P=P+Math.imul(Ze,be)|0,D=D+Math.imul(Ue,Ye)|0,x=x+Math.imul(Ue,rt)|0,x=x+Math.imul(xe,Ye)|0,P=P+Math.imul(xe,rt)|0,D=D+Math.imul(fe,gt)|0,x=x+Math.imul(fe,qe)|0,x=x+Math.imul(ge,gt)|0,P=P+Math.imul(ge,qe)|0,D=D+Math.imul(se,ct)|0,x=x+Math.imul(se,kt)|0,x=x+Math.imul(ae,ct)|0,P=P+Math.imul(ae,kt)|0,D=D+Math.imul(ee,Tt)|0,x=x+Math.imul(ee,Lt)|0,x=x+Math.imul(X,Tt)|0,P=P+Math.imul(X,Lt)|0,D=D+Math.imul(M,Ae)|0,x=x+Math.imul(M,he)|0,x=x+Math.imul(k,Ae)|0,P=P+Math.imul(k,he)|0;var tn=(G+D|0)+((x&8191)<<13)|0;G=(P+(x>>>13)|0)+(tn>>>26)|0,tn&=67108863,D=Math.imul(F,ye),x=Math.imul(F,Se),x=x+Math.imul(N,ye)|0,P=Math.imul(N,Se),D=D+Math.imul(Ce,Re)|0,x=x+Math.imul(Ce,re)|0,x=x+Math.imul(W,Re)|0,P=P+Math.imul(W,re)|0,D=D+Math.imul(O,ve)|0,x=x+Math.imul(O,be)|0,x=x+Math.imul(le,ve)|0,P=P+Math.imul(le,be)|0,D=D+Math.imul(Ne,Ye)|0,x=x+Math.imul(Ne,rt)|0,x=x+Math.imul(Ze,Ye)|0,P=P+Math.imul(Ze,rt)|0,D=D+Math.imul(Ue,gt)|0,x=x+Math.imul(Ue,qe)|0,x=x+Math.imul(xe,gt)|0,P=P+Math.imul(xe,qe)|0,D=D+Math.imul(fe,ct)|0,x=x+Math.imul(fe,kt)|0,x=x+Math.imul(ge,ct)|0,P=P+Math.imul(ge,kt)|0,D=D+Math.imul(se,Tt)|0,x=x+Math.imul(se,Lt)|0,x=x+Math.imul(ae,Tt)|0,P=P+Math.imul(ae,Lt)|0,D=D+Math.imul(ee,Ae)|0,x=x+Math.imul(ee,he)|0,x=x+Math.imul(X,Ae)|0,P=P+Math.imul(X,he)|0,D=D+Math.imul(M,pe)|0,x=x+Math.imul(M,Te)|0,x=x+Math.imul(k,pe)|0,P=P+Math.imul(k,Te)|0;var ft=(G+D|0)+((x&8191)<<13)|0;G=(P+(x>>>13)|0)+(ft>>>26)|0,ft&=67108863,D=Math.imul(te,ye),x=Math.imul(te,Se),x=x+Math.imul(ne,ye)|0,P=Math.imul(ne,Se),D=D+Math.imul(F,Re)|0,x=x+Math.imul(F,re)|0,x=x+Math.imul(N,Re)|0,P=P+Math.imul(N,re)|0,D=D+Math.imul(Ce,ve)|0,x=x+Math.imul(Ce,be)|0,x=x+Math.imul(W,ve)|0,P=P+Math.imul(W,be)|0,D=D+Math.imul(O,Ye)|0,x=x+Math.imul(O,rt)|0,x=x+Math.imul(le,Ye)|0,P=P+Math.imul(le,rt)|0,D=D+Math.imul(Ne,gt)|0,x=x+Math.imul(Ne,qe)|0,x=x+Math.imul(Ze,gt)|0,P=P+Math.imul(Ze,qe)|0,D=D+Math.imul(Ue,ct)|0,x=x+Math.imul(Ue,kt)|0,x=x+Math.imul(xe,ct)|0,P=P+Math.imul(xe,kt)|0,D=D+Math.imul(fe,Tt)|0,x=x+Math.imul(fe,Lt)|0,x=x+Math.imul(ge,Tt)|0,P=P+Math.imul(ge,Lt)|0,D=D+Math.imul(se,Ae)|0,x=x+Math.imul(se,he)|0,x=x+Math.imul(ae,Ae)|0,P=P+Math.imul(ae,he)|0,D=D+Math.imul(ee,pe)|0,x=x+Math.imul(ee,Te)|0,x=x+Math.imul(X,pe)|0,P=P+Math.imul(X,Te)|0,D=D+Math.imul(M,He)|0,x=x+Math.imul(M,ze)|0,x=x+Math.imul(k,He)|0,P=P+Math.imul(k,ze)|0;var ll=(G+D|0)+((x&8191)<<13)|0;G=(P+(x>>>13)|0)+(ll>>>26)|0,ll&=67108863,D=Math.imul(te,Re),x=Math.imul(te,re),x=x+Math.imul(ne,Re)|0,P=Math.imul(ne,re),D=D+Math.imul(F,ve)|0,x=x+Math.imul(F,be)|0,x=x+Math.imul(N,ve)|0,P=P+Math.imul(N,be)|0,D=D+Math.imul(Ce,Ye)|0,x=x+Math.imul(Ce,rt)|0,x=x+Math.imul(W,Ye)|0,P=P+Math.imul(W,rt)|0,D=D+Math.imul(O,gt)|0,x=x+Math.imul(O,qe)|0,x=x+Math.imul(le,gt)|0,P=P+Math.imul(le,qe)|0,D=D+Math.imul(Ne,ct)|0,x=x+Math.imul(Ne,kt)|0,x=x+Math.imul(Ze,ct)|0,P=P+Math.imul(Ze,kt)|0,D=D+Math.imul(Ue,Tt)|0,x=x+Math.imul(Ue,Lt)|0,x=x+Math.imul(xe,Tt)|0,P=P+Math.imul(xe,Lt)|0,D=D+Math.imul(fe,Ae)|0,x=x+Math.imul(fe,he)|0,x=x+Math.imul(ge,Ae)|0,P=P+Math.imul(ge,he)|0,D=D+Math.imul(se,pe)|0,x=x+Math.imul(se,Te)|0,x=x+Math.imul(ae,pe)|0,P=P+Math.imul(ae,Te)|0,D=D+Math.imul(ee,He)|0,x=x+Math.imul(ee,ze)|0,x=x+Math.imul(X,He)|0,P=P+Math.imul(X,ze)|0;var pn=(G+D|0)+((x&8191)<<13)|0;G=(P+(x>>>13)|0)+(pn>>>26)|0,pn&=67108863,D=Math.imul(te,ve),x=Math.imul(te,be),x=x+Math.imul(ne,ve)|0,P=Math.imul(ne,be),D=D+Math.imul(F,Ye)|0,x=x+Math.imul(F,rt)|0,x=x+Math.imul(N,Ye)|0,P=P+Math.imul(N,rt)|0,D=D+Math.imul(Ce,gt)|0,x=x+Math.imul(Ce,qe)|0,x=x+Math.imul(W,gt)|0,P=P+Math.imul(W,qe)|0,D=D+Math.imul(O,ct)|0,x=x+Math.imul(O,kt)|0,x=x+Math.imul(le,ct)|0,P=P+Math.imul(le,kt)|0,D=D+Math.imul(Ne,Tt)|0,x=x+Math.imul(Ne,Lt)|0,x=x+Math.imul(Ze,Tt)|0,P=P+Math.imul(Ze,Lt)|0,D=D+Math.imul(Ue,Ae)|0,x=x+Math.imul(Ue,he)|0,x=x+Math.imul(xe,Ae)|0,P=P+Math.imul(xe,he)|0,D=D+Math.imul(fe,pe)|0,x=x+Math.imul(fe,Te)|0,x=x+Math.imul(ge,pe)|0,P=P+Math.imul(ge,Te)|0,D=D+Math.imul(se,He)|0,x=x+Math.imul(se,ze)|0,x=x+Math.imul(ae,He)|0,P=P+Math.imul(ae,ze)|0;var Us=(G+D|0)+((x&8191)<<13)|0;G=(P+(x>>>13)|0)+(Us>>>26)|0,Us&=67108863,D=Math.imul(te,Ye),x=Math.imul(te,rt),x=x+Math.imul(ne,Ye)|0,P=Math.imul(ne,rt),D=D+Math.imul(F,gt)|0,x=x+Math.imul(F,qe)|0,x=x+Math.imul(N,gt)|0,P=P+Math.imul(N,qe)|0,D=D+Math.imul(Ce,ct)|0,x=x+Math.imul(Ce,kt)|0,x=x+Math.imul(W,ct)|0,P=P+Math.imul(W,kt)|0,D=D+Math.imul(O,Tt)|0,x=x+Math.imul(O,Lt)|0,x=x+Math.imul(le,Tt)|0,P=P+Math.imul(le,Lt)|0,D=D+Math.imul(Ne,Ae)|0,x=x+Math.imul(Ne,he)|0,x=x+Math.imul(Ze,Ae)|0,P=P+Math.imul(Ze,he)|0,D=D+Math.imul(Ue,pe)|0,x=x+Math.imul(Ue,Te)|0,x=x+Math.imul(xe,pe)|0,P=P+Math.imul(xe,Te)|0,D=D+Math.imul(fe,He)|0,x=x+Math.imul(fe,ze)|0,x=x+Math.imul(ge,He)|0,P=P+Math.imul(ge,ze)|0;var mc=(G+D|0)+((x&8191)<<13)|0;G=(P+(x>>>13)|0)+(mc>>>26)|0,mc&=67108863,D=Math.imul(te,gt),x=Math.imul(te,qe),x=x+Math.imul(ne,gt)|0,P=Math.imul(ne,qe),D=D+Math.imul(F,ct)|0,x=x+Math.imul(F,kt)|0,x=x+Math.imul(N,ct)|0,P=P+Math.imul(N,kt)|0,D=D+Math.imul(Ce,Tt)|0,x=x+Math.imul(Ce,Lt)|0,x=x+Math.imul(W,Tt)|0,P=P+Math.imul(W,Lt)|0,D=D+Math.imul(O,Ae)|0,x=x+Math.imul(O,he)|0,x=x+Math.imul(le,Ae)|0,P=P+Math.imul(le,he)|0,D=D+Math.imul(Ne,pe)|0,x=x+Math.imul(Ne,Te)|0,x=x+Math.imul(Ze,pe)|0,P=P+Math.imul(Ze,Te)|0,D=D+Math.imul(Ue,He)|0,x=x+Math.imul(Ue,ze)|0,x=x+Math.imul(xe,He)|0,P=P+Math.imul(xe,ze)|0;var Yo=(G+D|0)+((x&8191)<<13)|0;G=(P+(x>>>13)|0)+(Yo>>>26)|0,Yo&=67108863,D=Math.imul(te,ct),x=Math.imul(te,kt),x=x+Math.imul(ne,ct)|0,P=Math.imul(ne,kt),D=D+Math.imul(F,Tt)|0,x=x+Math.imul(F,Lt)|0,x=x+Math.imul(N,Tt)|0,P=P+Math.imul(N,Lt)|0,D=D+Math.imul(Ce,Ae)|0,x=x+Math.imul(Ce,he)|0,x=x+Math.imul(W,Ae)|0,P=P+Math.imul(W,he)|0,D=D+Math.imul(O,pe)|0,x=x+Math.imul(O,Te)|0,x=x+Math.imul(le,pe)|0,P=P+Math.imul(le,Te)|0,D=D+Math.imul(Ne,He)|0,x=x+Math.imul(Ne,ze)|0,x=x+Math.imul(Ze,He)|0,P=P+Math.imul(Ze,ze)|0;var cl=(G+D|0)+((x&8191)<<13)|0;G=(P+(x>>>13)|0)+(cl>>>26)|0,cl&=67108863,D=Math.imul(te,Tt),x=Math.imul(te,Lt),x=x+Math.imul(ne,Tt)|0,P=Math.imul(ne,Lt),D=D+Math.imul(F,Ae)|0,x=x+Math.imul(F,he)|0,x=x+Math.imul(N,Ae)|0,P=P+Math.imul(N,he)|0,D=D+Math.imul(Ce,pe)|0,x=x+Math.imul(Ce,Te)|0,x=x+Math.imul(W,pe)|0,P=P+Math.imul(W,Te)|0,D=D+Math.imul(O,He)|0,x=x+Math.imul(O,ze)|0,x=x+Math.imul(le,He)|0,P=P+Math.imul(le,ze)|0;var Zn=(G+D|0)+((x&8191)<<13)|0;G=(P+(x>>>13)|0)+(Zn>>>26)|0,Zn&=67108863,D=Math.imul(te,Ae),x=Math.imul(te,he),x=x+Math.imul(ne,Ae)|0,P=Math.imul(ne,he),D=D+Math.imul(F,pe)|0,x=x+Math.imul(F,Te)|0,x=x+Math.imul(N,pe)|0,P=P+Math.imul(N,Te)|0,D=D+Math.imul(Ce,He)|0,x=x+Math.imul(Ce,ze)|0,x=x+Math.imul(W,He)|0,P=P+Math.imul(W,ze)|0;var xs=(G+D|0)+((x&8191)<<13)|0;G=(P+(x>>>13)|0)+(xs>>>26)|0,xs&=67108863,D=Math.imul(te,pe),x=Math.imul(te,Te),x=x+Math.imul(ne,pe)|0,P=Math.imul(ne,Te),D=D+Math.imul(F,He)|0,x=x+Math.imul(F,ze)|0,x=x+Math.imul(N,He)|0,P=P+Math.imul(N,ze)|0;var ul=(G+D|0)+((x&8191)<<13)|0;G=(P+(x>>>13)|0)+(ul>>>26)|0,ul&=67108863,D=Math.imul(te,He),x=Math.imul(te,ze),x=x+Math.imul(ne,He)|0,P=Math.imul(ne,ze);var Ar=(G+D|0)+((x&8191)<<13)|0;return G=(P+(x>>>13)|0)+(Ar>>>26)|0,Ar&=67108863,Z[0]=At,Z[1]=st,Z[2]=ot,Z[3]=Wt,Z[4]=hn,Z[5]=fi,Z[6]=Is,Z[7]=tn,Z[8]=ft,Z[9]=ll,Z[10]=pn,Z[11]=Us,Z[12]=mc,Z[13]=Yo,Z[14]=cl,Z[15]=Zn,Z[16]=xs,Z[17]=ul,Z[18]=Ar,G!==0&&(Z[19]=G,_.length++),_};Math.imul||(B=g);function v(R,y,Q){Q.negative=y.negative^R.negative,Q.length=R.length+y.length;for(var _=0,L=0,T=0;T<Q.length-1;T++){var Z=L;L=0;for(var G=_&67108863,D=Math.min(T,y.length-1),x=Math.max(0,T-R.length+1);x<=D;x++){var P=T-x,oe=R.words[P]|0,M=y.words[x]|0,k=oe*M,q=k&67108863;Z=Z+(k/67108864|0)|0,q=q+G|0,G=q&67108863,Z=Z+(q>>>26)|0,L+=Z>>>26,Z&=67108863}Q.words[T]=G,_=Z,Z=L}return _!==0?Q.words[T]=_:Q.length--,Q._strip()}function w(R,y,Q){return v(R,y,Q)}s.prototype.mulTo=function(y,Q){var _,L=this.length+y.length;return this.length===10&&y.length===10?_=B(this,y,Q):L<63?_=g(this,y,Q):L<1024?_=v(this,y,Q):_=w(this,y,Q),_},s.prototype.mul=function(y){var Q=new s(null);return Q.words=new Array(this.length+y.length),this.mulTo(y,Q)},s.prototype.mulf=function(y){var Q=new s(null);return Q.words=new Array(this.length+y.length),w(this,y,Q)},s.prototype.imul=function(y){return this.clone().mulTo(y,this)},s.prototype.imuln=function(y){var Q=y<0;Q&&(y=-y),n(typeof y=="number"),n(y<67108864);for(var _=0,L=0;L<this.length;L++){var T=(this.words[L]|0)*y,Z=(T&67108863)+(_&67108863);_>>=26,_+=T/67108864|0,_+=Z>>>26,this.words[L]=Z&67108863}return _!==0&&(this.words[L]=_,this.length++),Q?this.ineg():this},s.prototype.muln=function(y){return this.clone().imuln(y)},s.prototype.sqr=function(){return this.mul(this)},s.prototype.isqr=function(){return this.imul(this.clone())},s.prototype.pow=function(y){var Q=m(y);if(Q.length===0)return new s(1);for(var _=this,L=0;L<Q.length&&Q[L]===0;L++,_=_.sqr());if(++L<Q.length)for(var T=_.sqr();L<Q.length;L++,T=T.sqr())Q[L]!==0&&(_=_.mul(T));return _},s.prototype.iushln=function(y){n(typeof y=="number"&&y>=0);var Q=y%26,_=(y-Q)/26,L=67108863>>>26-Q<<26-Q,T;if(Q!==0){var Z=0;for(T=0;T<this.length;T++){var G=this.words[T]&L,D=(this.words[T]|0)-G<<Q;this.words[T]=D|Z,Z=G>>>26-Q}Z&&(this.words[T]=Z,this.length++)}if(_!==0){for(T=this.length-1;T>=0;T--)this.words[T+_]=this.words[T];for(T=0;T<_;T++)this.words[T]=0;this.length+=_}return this._strip()},s.prototype.ishln=function(y){return n(this.negative===0),this.iushln(y)},s.prototype.iushrn=function(y,Q,_){n(typeof y=="number"&&y>=0);var L;Q?L=(Q-Q%26)/26:L=0;var T=y%26,Z=Math.min((y-T)/26,this.length),G=67108863^67108863>>>T<<T,D=_;if(L-=Z,L=Math.max(0,L),D){for(var x=0;x<Z;x++)D.words[x]=this.words[x];D.length=Z}if(Z!==0)if(this.length>Z)for(this.length-=Z,x=0;x<this.length;x++)this.words[x]=this.words[x+Z];else this.words[0]=0,this.length=1;var P=0;for(x=this.length-1;x>=0&&(P!==0||x>=L);x--){var oe=this.words[x]|0;this.words[x]=P<<26-T|oe>>>T,P=oe&G}return D&&P!==0&&(D.words[D.length++]=P),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},s.prototype.ishrn=function(y,Q,_){return n(this.negative===0),this.iushrn(y,Q,_)},s.prototype.shln=function(y){return this.clone().ishln(y)},s.prototype.ushln=function(y){return this.clone().iushln(y)},s.prototype.shrn=function(y){return this.clone().ishrn(y)},s.prototype.ushrn=function(y){return this.clone().iushrn(y)},s.prototype.testn=function(y){n(typeof y=="number"&&y>=0);var Q=y%26,_=(y-Q)/26,L=1<<Q;if(this.length<=_)return!1;var T=this.words[_];return!!(T&L)},s.prototype.imaskn=function(y){n(typeof y=="number"&&y>=0);var Q=y%26,_=(y-Q)/26;if(n(this.negative===0,"imaskn works only with positive numbers"),this.length<=_)return this;if(Q!==0&&_++,this.length=Math.min(_,this.length),Q!==0){var L=67108863^67108863>>>Q<<Q;this.words[this.length-1]&=L}return this._strip()},s.prototype.maskn=function(y){return this.clone().imaskn(y)},s.prototype.iaddn=function(y){return n(typeof y=="number"),n(y<67108864),y<0?this.isubn(-y):this.negative!==0?this.length===1&&(this.words[0]|0)<=y?(this.words[0]=y-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(y),this.negative=1,this):this._iaddn(y)},s.prototype._iaddn=function(y){this.words[0]+=y;for(var Q=0;Q<this.length&&this.words[Q]>=67108864;Q++)this.words[Q]-=67108864,Q===this.length-1?this.words[Q+1]=1:this.words[Q+1]++;return this.length=Math.max(this.length,Q+1),this},s.prototype.isubn=function(y){if(n(typeof y=="number"),n(y<67108864),y<0)return this.iaddn(-y);if(this.negative!==0)return this.negative=0,this.iaddn(y),this.negative=1,this;if(this.words[0]-=y,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var Q=0;Q<this.length&&this.words[Q]<0;Q++)this.words[Q]+=67108864,this.words[Q+1]-=1;return this._strip()},s.prototype.addn=function(y){return this.clone().iaddn(y)},s.prototype.subn=function(y){return this.clone().isubn(y)},s.prototype.iabs=function(){return this.negative=0,this},s.prototype.abs=function(){return this.clone().iabs()},s.prototype._ishlnsubmul=function(y,Q,_){var L=y.length+_,T;this._expand(L);var Z,G=0;for(T=0;T<y.length;T++){Z=(this.words[T+_]|0)+G;var D=(y.words[T]|0)*Q;Z-=D&67108863,G=(Z>>26)-(D/67108864|0),this.words[T+_]=Z&67108863}for(;T<this.length-_;T++)Z=(this.words[T+_]|0)+G,G=Z>>26,this.words[T+_]=Z&67108863;if(G===0)return this._strip();for(n(G===-1),G=0,T=0;T<this.length;T++)Z=-(this.words[T]|0)+G,G=Z>>26,this.words[T]=Z&67108863;return this.negative=1,this._strip()},s.prototype._wordDiv=function(y,Q){var _=this.length-y.length,L=this.clone(),T=y,Z=T.words[T.length-1]|0,G=this._countBits(Z);_=26-G,_!==0&&(T=T.ushln(_),L.iushln(_),Z=T.words[T.length-1]|0);var D=L.length-T.length,x;if(Q!=="mod"){x=new s(null),x.length=D+1,x.words=new Array(x.length);for(var P=0;P<x.length;P++)x.words[P]=0}var oe=L.clone()._ishlnsubmul(T,1,D);oe.negative===0&&(L=oe,x&&(x.words[D]=1));for(var M=D-1;M>=0;M--){var k=(L.words[T.length+M]|0)*67108864+(L.words[T.length+M-1]|0);for(k=Math.min(k/Z|0,67108863),L._ishlnsubmul(T,k,M);L.negative!==0;)k--,L.negative=0,L._ishlnsubmul(T,1,M),L.isZero()||(L.negative^=1);x&&(x.words[M]=k)}return x&&x._strip(),L._strip(),Q!=="div"&&_!==0&&L.iushrn(_),{div:x||null,mod:L}},s.prototype.divmod=function(y,Q,_){if(n(!y.isZero()),this.isZero())return{div:new s(0),mod:new s(0)};var L,T,Z;return this.negative!==0&&y.negative===0?(Z=this.neg().divmod(y,Q),Q!=="mod"&&(L=Z.div.neg()),Q!=="div"&&(T=Z.mod.neg(),_&&T.negative!==0&&T.iadd(y)),{div:L,mod:T}):this.negative===0&&y.negative!==0?(Z=this.divmod(y.neg(),Q),Q!=="mod"&&(L=Z.div.neg()),{div:L,mod:Z.mod}):this.negative&y.negative?(Z=this.neg().divmod(y.neg(),Q),Q!=="div"&&(T=Z.mod.neg(),_&&T.negative!==0&&T.isub(y)),{div:Z.div,mod:T}):y.length>this.length||this.cmp(y)<0?{div:new s(0),mod:this}:y.length===1?Q==="div"?{div:this.divn(y.words[0]),mod:null}:Q==="mod"?{div:null,mod:new s(this.modrn(y.words[0]))}:{div:this.divn(y.words[0]),mod:new s(this.modrn(y.words[0]))}:this._wordDiv(y,Q)},s.prototype.div=function(y){return this.divmod(y,"div",!1).div},s.prototype.mod=function(y){return this.divmod(y,"mod",!1).mod},s.prototype.umod=function(y){return this.divmod(y,"mod",!0).mod},s.prototype.divRound=function(y){var Q=this.divmod(y);if(Q.mod.isZero())return Q.div;var _=Q.div.negative!==0?Q.mod.isub(y):Q.mod,L=y.ushrn(1),T=y.andln(1),Z=_.cmp(L);return Z<0||T===1&&Z===0?Q.div:Q.div.negative!==0?Q.div.isubn(1):Q.div.iaddn(1)},s.prototype.modrn=function(y){var Q=y<0;Q&&(y=-y),n(y<=67108863);for(var _=(1<<26)%y,L=0,T=this.length-1;T>=0;T--)L=(_*L+(this.words[T]|0))%y;return Q?-L:L},s.prototype.modn=function(y){return this.modrn(y)},s.prototype.idivn=function(y){var Q=y<0;Q&&(y=-y),n(y<=67108863);for(var _=0,L=this.length-1;L>=0;L--){var T=(this.words[L]|0)+_*67108864;this.words[L]=T/y|0,_=T%y}return this._strip(),Q?this.ineg():this},s.prototype.divn=function(y){return this.clone().idivn(y)},s.prototype.egcd=function(y){n(y.negative===0),n(!y.isZero());var Q=this,_=y.clone();Q.negative!==0?Q=Q.umod(y):Q=Q.clone();for(var L=new s(1),T=new s(0),Z=new s(0),G=new s(1),D=0;Q.isEven()&&_.isEven();)Q.iushrn(1),_.iushrn(1),++D;for(var x=_.clone(),P=Q.clone();!Q.isZero();){for(var oe=0,M=1;!(Q.words[0]&M)&&oe<26;++oe,M<<=1);if(oe>0)for(Q.iushrn(oe);oe-- >0;)(L.isOdd()||T.isOdd())&&(L.iadd(x),T.isub(P)),L.iushrn(1),T.iushrn(1);for(var k=0,q=1;!(_.words[0]&q)&&k<26;++k,q<<=1);if(k>0)for(_.iushrn(k);k-- >0;)(Z.isOdd()||G.isOdd())&&(Z.iadd(x),G.isub(P)),Z.iushrn(1),G.iushrn(1);Q.cmp(_)>=0?(Q.isub(_),L.isub(Z),T.isub(G)):(_.isub(Q),Z.isub(L),G.isub(T))}return{a:Z,b:G,gcd:_.iushln(D)}},s.prototype._invmp=function(y){n(y.negative===0),n(!y.isZero());var Q=this,_=y.clone();Q.negative!==0?Q=Q.umod(y):Q=Q.clone();for(var L=new s(1),T=new s(0),Z=_.clone();Q.cmpn(1)>0&&_.cmpn(1)>0;){for(var G=0,D=1;!(Q.words[0]&D)&&G<26;++G,D<<=1);if(G>0)for(Q.iushrn(G);G-- >0;)L.isOdd()&&L.iadd(Z),L.iushrn(1);for(var x=0,P=1;!(_.words[0]&P)&&x<26;++x,P<<=1);if(x>0)for(_.iushrn(x);x-- >0;)T.isOdd()&&T.iadd(Z),T.iushrn(1);Q.cmp(_)>=0?(Q.isub(_),L.isub(T)):(_.isub(Q),T.isub(L))}var oe;return Q.cmpn(1)===0?oe=L:oe=T,oe.cmpn(0)<0&&oe.iadd(y),oe},s.prototype.gcd=function(y){if(this.isZero())return y.abs();if(y.isZero())return this.abs();var Q=this.clone(),_=y.clone();Q.negative=0,_.negative=0;for(var L=0;Q.isEven()&&_.isEven();L++)Q.iushrn(1),_.iushrn(1);do{for(;Q.isEven();)Q.iushrn(1);for(;_.isEven();)_.iushrn(1);var T=Q.cmp(_);if(T<0){var Z=Q;Q=_,_=Z}else if(T===0||_.cmpn(1)===0)break;Q.isub(_)}while(!0);return _.iushln(L)},s.prototype.invm=function(y){return this.egcd(y).a.umod(y)},s.prototype.isEven=function(){return(this.words[0]&1)===0},s.prototype.isOdd=function(){return(this.words[0]&1)===1},s.prototype.andln=function(y){return this.words[0]&y},s.prototype.bincn=function(y){n(typeof y=="number");var Q=y%26,_=(y-Q)/26,L=1<<Q;if(this.length<=_)return this._expand(_+1),this.words[_]|=L,this;for(var T=L,Z=_;T!==0&&Z<this.length;Z++){var G=this.words[Z]|0;G+=T,T=G>>>26,G&=67108863,this.words[Z]=G}return T!==0&&(this.words[Z]=T,this.length++),this},s.prototype.isZero=function(){return this.length===1&&this.words[0]===0},s.prototype.cmpn=function(y){var Q=y<0;if(this.negative!==0&&!Q)return-1;if(this.negative===0&&Q)return 1;this._strip();var _;if(this.length>1)_=1;else{Q&&(y=-y),n(y<=67108863,"Number is too big");var L=this.words[0]|0;_=L===y?0:L<y?-1:1}return this.negative!==0?-_|0:_},s.prototype.cmp=function(y){if(this.negative!==0&&y.negative===0)return-1;if(this.negative===0&&y.negative!==0)return 1;var Q=this.ucmp(y);return this.negative!==0?-Q|0:Q},s.prototype.ucmp=function(y){if(this.length>y.length)return 1;if(this.length<y.length)return-1;for(var Q=0,_=this.length-1;_>=0;_--){var L=this.words[_]|0,T=y.words[_]|0;if(L!==T){L<T?Q=-1:L>T&&(Q=1);break}}return Q},s.prototype.gtn=function(y){return this.cmpn(y)===1},s.prototype.gt=function(y){return this.cmp(y)===1},s.prototype.gten=function(y){return this.cmpn(y)>=0},s.prototype.gte=function(y){return this.cmp(y)>=0},s.prototype.ltn=function(y){return this.cmpn(y)===-1},s.prototype.lt=function(y){return this.cmp(y)===-1},s.prototype.lten=function(y){return this.cmpn(y)<=0},s.prototype.lte=function(y){return this.cmp(y)<=0},s.prototype.eqn=function(y){return this.cmpn(y)===0},s.prototype.eq=function(y){return this.cmp(y)===0},s.red=function(y){return new J(y)},s.prototype.toRed=function(y){return n(!this.red,"Already a number in reduction context"),n(this.negative===0,"red works only with positives"),y.convertTo(this)._forceRed(y)},s.prototype.fromRed=function(){return n(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},s.prototype._forceRed=function(y){return this.red=y,this},s.prototype.forceRed=function(y){return n(!this.red,"Already a number in reduction context"),this._forceRed(y)},s.prototype.redAdd=function(y){return n(this.red,"redAdd works only with red numbers"),this.red.add(this,y)},s.prototype.redIAdd=function(y){return n(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,y)},s.prototype.redSub=function(y){return n(this.red,"redSub works only with red numbers"),this.red.sub(this,y)},s.prototype.redISub=function(y){return n(this.red,"redISub works only with red numbers"),this.red.isub(this,y)},s.prototype.redShl=function(y){return n(this.red,"redShl works only with red numbers"),this.red.shl(this,y)},s.prototype.redMul=function(y){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,y),this.red.mul(this,y)},s.prototype.redIMul=function(y){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,y),this.red.imul(this,y)},s.prototype.redSqr=function(){return n(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},s.prototype.redISqr=function(){return n(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},s.prototype.redSqrt=function(){return n(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},s.prototype.redInvm=function(){return n(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},s.prototype.redNeg=function(){return n(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},s.prototype.redPow=function(y){return n(this.red&&!y.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,y)};var C={k256:null,p224:null,p192:null,p25519:null};function I(R,y){this.name=R,this.p=new s(y,16),this.n=this.p.bitLength(),this.k=new s(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}I.prototype._tmp=function(){var y=new s(null);return y.words=new Array(Math.ceil(this.n/13)),y},I.prototype.ireduce=function(y){var Q=y,_;do this.split(Q,this.tmp),Q=this.imulK(Q),Q=Q.iadd(this.tmp),_=Q.bitLength();while(_>this.n);var L=_<this.n?-1:Q.ucmp(this.p);return L===0?(Q.words[0]=0,Q.length=1):L>0?Q.isub(this.p):Q.strip!==void 0?Q.strip():Q._strip(),Q},I.prototype.split=function(y,Q){y.iushrn(this.n,0,Q)},I.prototype.imulK=function(y){return y.imul(this.k)};function E(){I.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}i(E,I),E.prototype.split=function(y,Q){for(var _=4194303,L=Math.min(y.length,9),T=0;T<L;T++)Q.words[T]=y.words[T];if(Q.length=L,y.length<=9){y.words[0]=0,y.length=1;return}var Z=y.words[9];for(Q.words[Q.length++]=Z&_,T=10;T<y.length;T++){var G=y.words[T]|0;y.words[T-10]=(G&_)<<4|Z>>>22,Z=G}Z>>>=22,y.words[T-10]=Z,Z===0&&y.length>10?y.length-=10:y.length-=9},E.prototype.imulK=function(y){y.words[y.length]=0,y.words[y.length+1]=0,y.length+=2;for(var Q=0,_=0;_<y.length;_++){var L=y.words[_]|0;Q+=L*977,y.words[_]=Q&67108863,Q=L*64+(Q/67108864|0)}return y.words[y.length-1]===0&&(y.length--,y.words[y.length-1]===0&&y.length--),y};function U(){I.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}i(U,I);function S(){I.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}i(S,I);function V(){I.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}i(V,I),V.prototype.imulK=function(y){for(var Q=0,_=0;_<y.length;_++){var L=(y.words[_]|0)*19+Q,T=L&67108863;L>>>=26,y.words[_]=T,Q=L}return Q!==0&&(y.words[y.length++]=Q),y},s._prime=function(y){if(C[y])return C[y];var Q;if(y==="k256")Q=new E;else if(y==="p224")Q=new U;else if(y==="p192")Q=new S;else if(y==="p25519")Q=new V;else throw new Error("Unknown prime "+y);return C[y]=Q,Q};function J(R){if(typeof R=="string"){var y=s._prime(R);this.m=y.p,this.prime=y}else n(R.gtn(1),"modulus must be greater than 1"),this.m=R,this.prime=null}J.prototype._verify1=function(y){n(y.negative===0,"red works only with positives"),n(y.red,"red works only with red numbers")},J.prototype._verify2=function(y,Q){n((y.negative|Q.negative)===0,"red works only with positives"),n(y.red&&y.red===Q.red,"red works only with red numbers")},J.prototype.imod=function(y){return this.prime?this.prime.ireduce(y)._forceRed(this):(c(y,y.umod(this.m)._forceRed(this)),y)},J.prototype.neg=function(y){return y.isZero()?y.clone():this.m.sub(y)._forceRed(this)},J.prototype.add=function(y,Q){this._verify2(y,Q);var _=y.add(Q);return _.cmp(this.m)>=0&&_.isub(this.m),_._forceRed(this)},J.prototype.iadd=function(y,Q){this._verify2(y,Q);var _=y.iadd(Q);return _.cmp(this.m)>=0&&_.isub(this.m),_},J.prototype.sub=function(y,Q){this._verify2(y,Q);var _=y.sub(Q);return _.cmpn(0)<0&&_.iadd(this.m),_._forceRed(this)},J.prototype.isub=function(y,Q){this._verify2(y,Q);var _=y.isub(Q);return _.cmpn(0)<0&&_.iadd(this.m),_},J.prototype.shl=function(y,Q){return this._verify1(y),this.imod(y.ushln(Q))},J.prototype.imul=function(y,Q){return this._verify2(y,Q),this.imod(y.imul(Q))},J.prototype.mul=function(y,Q){return this._verify2(y,Q),this.imod(y.mul(Q))},J.prototype.isqr=function(y){return this.imul(y,y.clone())},J.prototype.sqr=function(y){return this.mul(y,y)},J.prototype.sqrt=function(y){if(y.isZero())return y.clone();var Q=this.m.andln(3);if(n(Q%2===1),Q===3){var _=this.m.add(new s(1)).iushrn(2);return this.pow(y,_)}for(var L=this.m.subn(1),T=0;!L.isZero()&&L.andln(1)===0;)T++,L.iushrn(1);n(!L.isZero());var Z=new s(1).toRed(this),G=Z.redNeg(),D=this.m.subn(1).iushrn(1),x=this.m.bitLength();for(x=new s(2*x*x).toRed(this);this.pow(x,D).cmp(G)!==0;)x.redIAdd(G);for(var P=this.pow(x,L),oe=this.pow(y,L.addn(1).iushrn(1)),M=this.pow(y,L),k=T;M.cmp(Z)!==0;){for(var q=M,ee=0;q.cmp(Z)!==0;ee++)q=q.redSqr();n(ee<k);var X=this.pow(P,new s(1).iushln(k-ee-1));oe=oe.redMul(X),P=X.redSqr(),M=M.redMul(P),k=ee}return oe},J.prototype.invm=function(y){var Q=y._invmp(this.m);return Q.negative!==0?(Q.negative=0,this.imod(Q).redNeg()):this.imod(Q)},J.prototype.pow=function(y,Q){if(Q.isZero())return new s(1).toRed(this);if(Q.cmpn(1)===0)return y.clone();var _=4,L=new Array(1<<_);L[0]=new s(1).toRed(this),L[1]=y;for(var T=2;T<L.length;T++)L[T]=this.mul(L[T-1],y);var Z=L[0],G=0,D=0,x=Q.bitLength()%26;for(x===0&&(x=26),T=Q.length-1;T>=0;T--){for(var P=Q.words[T],oe=x-1;oe>=0;oe--){var M=P>>oe&1;if(Z!==L[0]&&(Z=this.sqr(Z)),M===0&&G===0){D=0;continue}G<<=1,G|=M,D++,!(D!==_&&(T!==0||oe!==0))&&(Z=this.mul(Z,L[G]),D=0,G=0)}x=26}return Z},J.prototype.convertTo=function(y){var Q=y.umod(this.m);return Q===y?Q.clone():Q},J.prototype.convertFrom=function(y){var Q=y.clone();return Q.red=null,Q},s.mont=function(y){return new z(y)};function z(R){J.call(this,R),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new s(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}i(z,J),z.prototype.convertTo=function(y){return this.imod(y.ushln(this.shift))},z.prototype.convertFrom=function(y){var Q=this.imod(y.mul(this.rinv));return Q.red=null,Q},z.prototype.imul=function(y,Q){if(y.isZero()||Q.isZero())return y.words[0]=0,y.length=1,y;var _=y.imul(Q),L=_.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),T=_.isub(L).iushrn(this.shift),Z=T;return T.cmp(this.m)>=0?Z=T.isub(this.m):T.cmpn(0)<0&&(Z=T.iadd(this.m)),Z._forceRed(this)},z.prototype.mul=function(y,Q){if(y.isZero()||Q.isZero())return new s(0)._forceRed(this);var _=y.mul(Q),L=_.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),T=_.isub(L).iushrn(this.shift),Z=T;return T.cmp(this.m)>=0?Z=T.isub(this.m):T.cmpn(0)<0&&(Z=T.iadd(this.m)),Z._forceRed(this)},z.prototype.invm=function(y){var Q=this.imod(y._invmp(this.m).mul(this.r2));return Q._forceRed(this)}})(r,ZM)})(L3);const at=kw,J3="logger/5.7.0";let IQ=!1,UQ=!1;const Qm={debug:1,default:2,info:2,warning:3,error:4,off:5};let xQ=Qm.default,Pv=null;function G3(){try{const r=[];if(["NFD","NFC","NFKD","NFKC"].forEach(e=>{try{if("test".normalize(e)!=="test")throw new Error("bad normalize")}catch{r.push(e)}}),r.length)throw new Error("missing "+r.join(", "));if(String.fromCharCode(233).normalize("NFD")!==String.fromCharCode(101,769))throw new Error("broken implementation")}catch(r){return r.message}return null}const QQ=G3();var Lw;(function(r){r.DEBUG="DEBUG",r.INFO="INFO",r.WARNING="WARNING",r.ERROR="ERROR",r.OFF="OFF"})(Lw||(Lw={}));var Ws;(function(r){r.UNKNOWN_ERROR="UNKNOWN_ERROR",r.NOT_IMPLEMENTED="NOT_IMPLEMENTED",r.UNSUPPORTED_OPERATION="UNSUPPORTED_OPERATION",r.NETWORK_ERROR="NETWORK_ERROR",r.SERVER_ERROR="SERVER_ERROR",r.TIMEOUT="TIMEOUT",r.BUFFER_OVERRUN="BUFFER_OVERRUN",r.NUMERIC_FAULT="NUMERIC_FAULT",r.MISSING_NEW="MISSING_NEW",r.INVALID_ARGUMENT="INVALID_ARGUMENT",r.MISSING_ARGUMENT="MISSING_ARGUMENT",r.UNEXPECTED_ARGUMENT="UNEXPECTED_ARGUMENT",r.CALL_EXCEPTION="CALL_EXCEPTION",r.INSUFFICIENT_FUNDS="INSUFFICIENT_FUNDS",r.NONCE_EXPIRED="NONCE_EXPIRED",r.REPLACEMENT_UNDERPRICED="REPLACEMENT_UNDERPRICED",r.UNPREDICTABLE_GAS_LIMIT="UNPREDICTABLE_GAS_LIMIT",r.TRANSACTION_REPLACED="TRANSACTION_REPLACED",r.ACTION_REJECTED="ACTION_REJECTED"})(Ws||(Ws={}));const bQ="0123456789abcdef";let me=class Jn{constructor(e){Object.defineProperty(this,"version",{enumerable:!0,value:e,writable:!1})}_log(e,t){const n=e.toLowerCase();Qm[n]==null&&this.throwArgumentError("invalid log level name","logLevel",e),!(xQ>Qm[n])&&console.log.apply(console,t)}debug(...e){this._log(Jn.levels.DEBUG,e)}info(...e){this._log(Jn.levels.INFO,e)}warn(...e){this._log(Jn.levels.WARNING,e)}makeError(e,t,n){if(UQ)return this.makeError("censored error",t,{});t||(t=Jn.errors.UNKNOWN_ERROR),n||(n={});const i=[];Object.keys(n).forEach(A=>{const l=n[A];try{if(l instanceof Uint8Array){let c="";for(let u=0;u<l.length;u++)c+=bQ[l[u]>>4],c+=bQ[l[u]&15];i.push(A+"=Uint8Array(0x"+c+")")}else i.push(A+"="+JSON.stringify(l))}catch{i.push(A+"="+JSON.stringify(n[A].toString()))}}),i.push(`code=${t}`),i.push(`version=${this.version}`);const s=e;let o="";switch(t){case Ws.NUMERIC_FAULT:{o="NUMERIC_FAULT";const A=e;switch(A){case"overflow":case"underflow":case"division-by-zero":o+="-"+A;break;case"negative-power":case"negative-width":o+="-unsupported";break;case"unbound-bitwise-result":o+="-unbound-result";break}break}case Ws.CALL_EXCEPTION:case Ws.INSUFFICIENT_FUNDS:case Ws.MISSING_NEW:case Ws.NONCE_EXPIRED:case Ws.REPLACEMENT_UNDERPRICED:case Ws.TRANSACTION_REPLACED:case Ws.UNPREDICTABLE_GAS_LIMIT:o=t;break}o&&(e+=" [ See: https://links.ethers.org/v5-errors-"+o+" ]"),i.length&&(e+=" ("+i.join(", ")+")");const a=new Error(e);return a.reason=s,a.code=t,Object.keys(n).forEach(function(A){a[A]=n[A]}),a}throwError(e,t,n){throw this.makeError(e,t,n)}throwArgumentError(e,t,n){return this.throwError(e,Jn.errors.INVALID_ARGUMENT,{argument:t,value:n})}assert(e,t,n,i){e||this.throwError(t,n,i)}assertArgument(e,t,n,i){e||this.throwArgumentError(t,n,i)}checkNormalize(e){QQ&&this.throwError("platform missing String.prototype.normalize",Jn.errors.UNSUPPORTED_OPERATION,{operation:"String.prototype.normalize",form:QQ})}checkSafeUint53(e,t){typeof e=="number"&&(t==null&&(t="value not safe"),(e<0||e>=9007199254740991)&&this.throwError(t,Jn.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"out-of-safe-range",value:e}),e%1&&this.throwError(t,Jn.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"non-integer",value:e}))}checkArgumentCount(e,t,n){n?n=": "+n:n="",e<t&&this.throwError("missing argument"+n,Jn.errors.MISSING_ARGUMENT,{count:e,expectedCount:t}),e>t&&this.throwError("too many arguments"+n,Jn.errors.UNEXPECTED_ARGUMENT,{count:e,expectedCount:t})}checkNew(e,t){(e===Object||e==null)&&this.throwError("missing new",Jn.errors.MISSING_NEW,{name:t.name})}checkAbstract(e,t){e===t?this.throwError("cannot instantiate abstract class "+JSON.stringify(t.name)+" directly; use a sub-class",Jn.errors.UNSUPPORTED_OPERATION,{name:e.name,operation:"new"}):(e===Object||e==null)&&this.throwError("missing new",Jn.errors.MISSING_NEW,{name:t.name})}static globalLogger(){return Pv||(Pv=new Jn(J3)),Pv}static setCensorship(e,t){if(!e&&t&&this.globalLogger().throwError("cannot permanently disable censorship",Jn.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"}),IQ){if(!e)return;this.globalLogger().throwError("error censorship permanent",Jn.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"})}UQ=!!e,IQ=!!t}static setLogLevel(e){const t=Qm[e.toLowerCase()];if(t==null){Jn.globalLogger().warn("invalid log level - "+e);return}xQ=t}static from(e){return new Jn(e)}};me.errors=Ws;me.levels=Lw;const O3="bytes/5.7.0",mn=new me(O3);function jM(r){return!!r.toHexString}function Tu(r){return r.slice||(r.slice=function(){const e=Array.prototype.slice.call(arguments);return Tu(new Uint8Array(Array.prototype.slice.apply(r,e)))}),r}function pU(r){return Mt(r)&&!(r.length%2)||NB(r)}function EQ(r){return typeof r=="number"&&r==r&&r%1===0}function NB(r){if(r==null)return!1;if(r.constructor===Uint8Array)return!0;if(typeof r=="string"||!EQ(r.length)||r.length<0)return!1;for(let e=0;e<r.length;e++){const t=r[e];if(!EQ(t)||t<0||t>=256)return!1}return!0}function nt(r,e){if(e||(e={}),typeof r=="number"){mn.checkSafeUint53(r,"invalid arrayify value");const t=[];for(;r;)t.unshift(r&255),r=parseInt(String(r/256));return t.length===0&&t.push(0),Tu(new Uint8Array(t))}if(e.allowMissingPrefix&&typeof r=="string"&&r.substring(0,2)!=="0x"&&(r="0x"+r),jM(r)&&(r=r.toHexString()),Mt(r)){let t=r.substring(2);t.length%2&&(e.hexPad==="left"?t="0"+t:e.hexPad==="right"?t+="0":mn.throwArgumentError("hex data is odd-length","value",r));const n=[];for(let i=0;i<t.length;i+=2)n.push(parseInt(t.substring(i,i+2),16));return Tu(new Uint8Array(n))}return NB(r)?Tu(new Uint8Array(r)):mn.throwArgumentError("invalid arrayify value","value",r)}function Qi(r){const e=r.map(i=>nt(i)),t=e.reduce((i,s)=>i+s.length,0),n=new Uint8Array(t);return e.reduce((i,s)=>(n.set(s,i),i+s.length),0),Tu(n)}function sf(r){let e=nt(r);if(e.length===0)return e;let t=0;for(;t<e.length&&e[t]===0;)t++;return t&&(e=e.slice(t)),e}function H3(r,e){r=nt(r),r.length>e&&mn.throwArgumentError("value out of range","value",arguments[0]);const t=new Uint8Array(e);return t.set(r,e-r.length),Tu(t)}function Mt(r,e){return!(typeof r!="string"||!r.match(/^0x[0-9A-Fa-f]*$/)||e&&r.length!==2+2*e)}const Jv="0123456789abcdef";function Ke(r,e){if(e||(e={}),typeof r=="number"){mn.checkSafeUint53(r,"invalid hexlify value");let t="";for(;r;)t=Jv[r&15]+t,r=Math.floor(r/16);return t.length?(t.length%2&&(t="0"+t),"0x"+t):"0x00"}if(typeof r=="bigint")return r=r.toString(16),r.length%2?"0x0"+r:"0x"+r;if(e.allowMissingPrefix&&typeof r=="string"&&r.substring(0,2)!=="0x"&&(r="0x"+r),jM(r))return r.toHexString();if(Mt(r))return r.length%2&&(e.hexPad==="left"?r="0x0"+r.substring(2):e.hexPad==="right"?r+="0":mn.throwArgumentError("hex data is odd-length","value",r)),r.toLowerCase();if(NB(r)){let t="0x";for(let n=0;n<r.length;n++){let i=r[n];t+=Jv[(i&240)>>4]+Jv[i&15]}return t}return mn.throwArgumentError("invalid hexlify value","value",r)}function Yl(r){if(typeof r!="string")r=Ke(r);else if(!Mt(r)||r.length%2)return null;return(r.length-2)/2}function yr(r,e,t){return typeof r!="string"?r=Ke(r):(!Mt(r)||r.length%2)&&mn.throwArgumentError("invalid hexData","value",r),e=2+2*e,t!=null?"0x"+r.substring(e,2+2*t):"0x"+r.substring(e)}function $r(r){let e="0x";return r.forEach(t=>{e+=Ke(t).substring(2)}),e}function gU(r){const e=z3(Ke(r,{hexPad:"left"}));return e==="0x"?"0x0":e}function z3(r){typeof r!="string"&&(r=Ke(r)),Mt(r)||mn.throwArgumentError("invalid hex string","value",r),r=r.substring(2);let e=0;for(;e<r.length&&r[e]==="0";)e++;return"0x"+r.substring(e)}function yn(r,e){for(typeof r!="string"?r=Ke(r):Mt(r)||mn.throwArgumentError("invalid hex string","value",r),r.length>2*e+2&&mn.throwArgumentError("value out of range","value",arguments[1]);r.length<2*e+2;)r="0x0"+r.substring(2);return r}function VB(r){const e={r:"0x",s:"0x",_vs:"0x",recoveryParam:0,v:0,yParityAndS:"0x",compact:"0x"};if(pU(r)){let t=nt(r);t.length===64?(e.v=27+(t[32]>>7),t[32]&=127,e.r=Ke(t.slice(0,32)),e.s=Ke(t.slice(32,64))):t.length===65?(e.r=Ke(t.slice(0,32)),e.s=Ke(t.slice(32,64)),e.v=t[64]):mn.throwArgumentError("invalid signature string","signature",r),e.v<27&&(e.v===0||e.v===1?e.v+=27:mn.throwArgumentError("signature invalid v byte","signature",r)),e.recoveryParam=1-e.v%2,e.recoveryParam&&(t[32]|=128),e._vs=Ke(t.slice(32,64))}else{if(e.r=r.r,e.s=r.s,e.v=r.v,e.recoveryParam=r.recoveryParam,e._vs=r._vs,e._vs!=null){const i=H3(nt(e._vs),32);e._vs=Ke(i);const s=i[0]>=128?1:0;e.recoveryParam==null?e.recoveryParam=s:e.recoveryParam!==s&&mn.throwArgumentError("signature recoveryParam mismatch _vs","signature",r),i[0]&=127;const o=Ke(i);e.s==null?e.s=o:e.s!==o&&mn.throwArgumentError("signature v mismatch _vs","signature",r)}if(e.recoveryParam==null)e.v==null?mn.throwArgumentError("signature missing v and recoveryParam","signature",r):e.v===0||e.v===1?e.recoveryParam=e.v:e.recoveryParam=1-e.v%2;else if(e.v==null)e.v=27+e.recoveryParam;else{const i=e.v===0||e.v===1?e.v:1-e.v%2;e.recoveryParam!==i&&mn.throwArgumentError("signature recoveryParam mismatch v","signature",r)}e.r==null||!Mt(e.r)?mn.throwArgumentError("signature missing or invalid r","signature",r):e.r=yn(e.r,32),e.s==null||!Mt(e.s)?mn.throwArgumentError("signature missing or invalid s","signature",r):e.s=yn(e.s,32);const t=nt(e.s);t[0]>=128&&mn.throwArgumentError("signature s out of range","signature",r),e.recoveryParam&&(t[0]|=128);const n=Ke(t);e._vs&&(Mt(e._vs)||mn.throwArgumentError("signature invalid _vs","signature",r),e._vs=yn(e._vs,32)),e._vs==null?e._vs=n:e._vs!==n&&mn.throwArgumentError("signature _vs mismatch v and s","signature",r)}return e.yParityAndS=e._vs,e.compact=e.r+e.yParityAndS.substring(2),e}const X3="bignumber/5.7.0";var A0=at.BN;const ca=new me(X3),Gv={},SQ=9007199254740991;let _Q=!1;class De{constructor(e,t){e!==Gv&&ca.throwError("cannot call constructor directly; use BigNumber.from",me.errors.UNSUPPORTED_OPERATION,{operation:"new (BigNumber)"}),this._hex=t,this._isBigNumber=!0,Object.freeze(this)}fromTwos(e){return Xr(Bt(this).fromTwos(e))}toTwos(e){return Xr(Bt(this).toTwos(e))}abs(){return this._hex[0]==="-"?De.from(this._hex.substring(1)):this}add(e){return Xr(Bt(this).add(Bt(e)))}sub(e){return Xr(Bt(this).sub(Bt(e)))}div(e){return De.from(e).isZero()&&Zi("division-by-zero","div"),Xr(Bt(this).div(Bt(e)))}mul(e){return Xr(Bt(this).mul(Bt(e)))}mod(e){const t=Bt(e);return t.isNeg()&&Zi("division-by-zero","mod"),Xr(Bt(this).umod(t))}pow(e){const t=Bt(e);return t.isNeg()&&Zi("negative-power","pow"),Xr(Bt(this).pow(t))}and(e){const t=Bt(e);return(this.isNegative()||t.isNeg())&&Zi("unbound-bitwise-result","and"),Xr(Bt(this).and(t))}or(e){const t=Bt(e);return(this.isNegative()||t.isNeg())&&Zi("unbound-bitwise-result","or"),Xr(Bt(this).or(t))}xor(e){const t=Bt(e);return(this.isNegative()||t.isNeg())&&Zi("unbound-bitwise-result","xor"),Xr(Bt(this).xor(t))}mask(e){return(this.isNegative()||e<0)&&Zi("negative-width","mask"),Xr(Bt(this).maskn(e))}shl(e){return(this.isNegative()||e<0)&&Zi("negative-width","shl"),Xr(Bt(this).shln(e))}shr(e){return(this.isNegative()||e<0)&&Zi("negative-width","shr"),Xr(Bt(this).shrn(e))}eq(e){return Bt(this).eq(Bt(e))}lt(e){return Bt(this).lt(Bt(e))}lte(e){return Bt(this).lte(Bt(e))}gt(e){return Bt(this).gt(Bt(e))}gte(e){return Bt(this).gte(Bt(e))}isNegative(){return this._hex[0]==="-"}isZero(){return Bt(this).isZero()}toNumber(){try{return Bt(this).toNumber()}catch{Zi("overflow","toNumber",this.toString())}return null}toBigInt(){try{return BigInt(this.toString())}catch{}return ca.throwError("this platform does not support BigInt",me.errors.UNSUPPORTED_OPERATION,{value:this.toString()})}toString(){return arguments.length>0&&(arguments[0]===10?_Q||(_Q=!0,ca.warn("BigNumber.toString does not accept any parameters; base-10 is assumed")):arguments[0]===16?ca.throwError("BigNumber.toString does not accept any parameters; use bigNumber.toHexString()",me.errors.UNEXPECTED_ARGUMENT,{}):ca.throwError("BigNumber.toString does not accept parameters",me.errors.UNEXPECTED_ARGUMENT,{})),Bt(this).toString(10)}toHexString(){return this._hex}toJSON(e){return{type:"BigNumber",hex:this.toHexString()}}static from(e){if(e instanceof De)return e;if(typeof e=="string")return e.match(/^-?0x[0-9a-f]+$/i)?new De(Gv,Qh(e)):e.match(/^-?[0-9]+$/)?new De(Gv,Qh(new A0(e))):ca.throwArgumentError("invalid BigNumber string","value",e);if(typeof e=="number")return e%1&&Zi("underflow","BigNumber.from",e),(e>=SQ||e<=-SQ)&&Zi("overflow","BigNumber.from",e),De.from(String(e));const t=e;if(typeof t=="bigint")return De.from(t.toString());if(NB(t))return De.from(Ke(t));if(t)if(t.toHexString){const n=t.toHexString();if(typeof n=="string")return De.from(n)}else{let n=t._hex;if(n==null&&t.type==="BigNumber"&&(n=t.hex),typeof n=="string"&&(Mt(n)||n[0]==="-"&&Mt(n.substring(1))))return De.from(n)}return ca.throwArgumentError("invalid BigNumber value","value",e)}static isBigNumber(e){return!!(e&&e._isBigNumber)}}function Qh(r){if(typeof r!="string")return Qh(r.toString(16));if(r[0]==="-")return r=r.substring(1),r[0]==="-"&&ca.throwArgumentError("invalid hex","value",r),r=Qh(r),r==="0x00"?r:"-"+r;if(r.substring(0,2)!=="0x"&&(r="0x"+r),r==="0x")return"0x00";for(r.length%2&&(r="0x0"+r.substring(2));r.length>4&&r.substring(0,4)==="0x00";)r="0x"+r.substring(4);return r}function Xr(r){return De.from(Qh(r))}function Bt(r){const e=De.from(r).toHexString();return e[0]==="-"?new A0("-"+e.substring(3),16):new A0(e.substring(2),16)}function Zi(r,e,t){const n={fault:r,operation:e};return t!=null&&(n.value=t),ca.throwError(r,me.errors.NUMERIC_FAULT,n)}function Y3(r){return new A0(r,36).toString(16)}const K3="properties/5.7.0";var j3=globalThis&&globalThis.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(c){try{l(n.next(c))}catch(u){o(u)}}function A(c){try{l(n.throw(c))}catch(u){o(u)}}function l(c){c.done?s(c.value):i(c.value).then(a,A)}l((n=n.apply(r,e||[])).next())})};const l0=new me(K3);function _e(r,e,t){Object.defineProperty(r,e,{enumerable:!0,value:t,writable:!1})}function Fo(r,e){for(let t=0;t<32;t++){if(r[e])return r[e];if(!r.prototype||typeof r.prototype!="object")break;r=Object.getPrototypeOf(r.prototype).constructor}return null}function Tn(r){return j3(this,void 0,void 0,function*(){const e=Object.keys(r).map(n=>{const i=r[n];return Promise.resolve(i).then(s=>({key:n,value:s}))});return(yield Promise.all(e)).reduce((n,i)=>(n[i.key]=i.value,n),{})})}function q3(r,e){(!r||typeof r!="object")&&l0.throwArgumentError("invalid object","object",r),Object.keys(r).forEach(t=>{e[t]||l0.throwArgumentError("invalid object key - "+t,"transaction:"+t,r)})}function Yn(r){const e={};for(const t in r)e[t]=r[t];return e}const $3={bigint:!0,boolean:!0,function:!0,number:!0,string:!0};function qM(r){if(r==null||$3[typeof r])return!0;if(Array.isArray(r)||typeof r=="object"){if(!Object.isFrozen(r))return!1;const e=Object.keys(r);for(let t=0;t<e.length;t++){let n=null;try{n=r[e[t]]}catch{continue}if(!qM(n))return!1}return!0}return l0.throwArgumentError(`Cannot deepCopy ${typeof r}`,"object",r)}function eW(r){if(qM(r))return r;if(Array.isArray(r))return Object.freeze(r.map(e=>Ea(e)));if(typeof r=="object"){const e={};for(const t in r){const n=r[t];n!==void 0&&_e(e,t,Ea(n))}return e}return l0.throwArgumentError(`Cannot deepCopy ${typeof r}`,"object",r)}function Ea(r){return eW(r)}class yp{constructor(e){for(const t in e)this[t]=Ea(e[t])}}const tW="abstract-provider/5.7.0";var nW=globalThis&&globalThis.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(c){try{l(n.next(c))}catch(u){o(u)}}function A(c){try{l(n.throw(c))}catch(u){o(u)}}function l(c){c.done?s(c.value):i(c.value).then(a,A)}l((n=n.apply(r,e||[])).next())})};const rW=new me(tW);class iW extends yp{static isForkEvent(e){return!!(e&&e._isForkEvent)}}class DB{constructor(){rW.checkAbstract(new.target,DB),_e(this,"_isProvider",!0)}getFeeData(){return nW(this,void 0,void 0,function*(){const{block:e,gasPrice:t}=yield Tn({block:this.getBlock("latest"),gasPrice:this.getGasPrice().catch(o=>null)});let n=null,i=null,s=null;return e&&e.baseFeePerGas&&(n=e.baseFeePerGas,s=De.from("1500000000"),i=e.baseFeePerGas.mul(2).add(s)),{lastBaseFeePerGas:n,maxFeePerGas:i,maxPriorityFeePerGas:s,gasPrice:t}})}addListener(e,t){return this.on(e,t)}removeListener(e,t){return this.off(e,t)}static isProvider(e){return!!(e&&e._isProvider)}}const sW="networks/5.7.1",RQ=new me(sW);function oW(r){return r&&typeof r.renetwork=="function"}function pa(r){const e=function(t,n){n==null&&(n={});const i=[];if(t.InfuraProvider&&n.infura!=="-")try{i.push(new t.InfuraProvider(r,n.infura))}catch{}if(t.EtherscanProvider&&n.etherscan!=="-")try{i.push(new t.EtherscanProvider(r,n.etherscan))}catch{}if(t.AlchemyProvider&&n.alchemy!=="-")try{i.push(new t.AlchemyProvider(r,n.alchemy))}catch{}if(t.PocketProvider&&n.pocket!=="-"){const s=["goerli","ropsten","rinkeby","sepolia"];try{const o=new t.PocketProvider(r,n.pocket);o.network&&s.indexOf(o.network.name)===-1&&i.push(o)}catch{}}if(t.CloudflareProvider&&n.cloudflare!=="-")try{i.push(new t.CloudflareProvider(r))}catch{}if(t.AnkrProvider&&n.ankr!=="-")try{const s=["ropsten"],o=new t.AnkrProvider(r,n.ankr);o.network&&s.indexOf(o.network.name)===-1&&i.push(o)}catch{}if(i.length===0)return null;if(t.FallbackProvider){let s=1;return n.quorum!=null?s=n.quorum:r==="homestead"&&(s=2),new t.FallbackProvider(i,s)}return i[0]};return e.renetwork=function(t){return pa(t)},e}function c0(r,e){const t=function(n,i){return n.JsonRpcProvider?new n.JsonRpcProvider(r,e):null};return t.renetwork=function(n){return c0(r,n)},t}const MQ={chainId:1,ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",name:"homestead",_defaultProvider:pa("homestead")},TQ={chainId:3,ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",name:"ropsten",_defaultProvider:pa("ropsten")},NQ={chainId:63,name:"classicMordor",_defaultProvider:c0("https://www.ethercluster.com/mordor","classicMordor")},Jp={unspecified:{chainId:0,name:"unspecified"},homestead:MQ,mainnet:MQ,morden:{chainId:2,name:"morden"},ropsten:TQ,testnet:TQ,rinkeby:{chainId:4,ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",name:"rinkeby",_defaultProvider:pa("rinkeby")},kovan:{chainId:42,name:"kovan",_defaultProvider:pa("kovan")},goerli:{chainId:5,ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",name:"goerli",_defaultProvider:pa("goerli")},kintsugi:{chainId:1337702,name:"kintsugi"},sepolia:{chainId:11155111,name:"sepolia",_defaultProvider:pa("sepolia")},classic:{chainId:61,name:"classic",_defaultProvider:c0("https://www.ethercluster.com/etc","classic")},classicMorden:{chainId:62,name:"classicMorden"},classicMordor:NQ,classicTestnet:NQ,classicKotti:{chainId:6,name:"classicKotti",_defaultProvider:c0("https://www.ethercluster.com/kotti","classicKotti")},xdai:{chainId:100,name:"xdai"},matic:{chainId:137,name:"matic",_defaultProvider:pa("matic")},maticmum:{chainId:80001,name:"maticmum"},optimism:{chainId:10,name:"optimism",_defaultProvider:pa("optimism")},"optimism-kovan":{chainId:69,name:"optimism-kovan"},"optimism-goerli":{chainId:420,name:"optimism-goerli"},arbitrum:{chainId:42161,name:"arbitrum"},"arbitrum-rinkeby":{chainId:421611,name:"arbitrum-rinkeby"},"arbitrum-goerli":{chainId:421613,name:"arbitrum-goerli"},bnb:{chainId:56,name:"bnb"},bnbt:{chainId:97,name:"bnbt"}};function aW(r){if(r==null)return null;if(typeof r=="number"){for(const n in Jp){const i=Jp[n];if(i.chainId===r)return{name:i.name,chainId:i.chainId,ensAddress:i.ensAddress||null,_defaultProvider:i._defaultProvider||null}}return{chainId:r,name:"unknown"}}if(typeof r=="string"){const n=Jp[r];return n==null?null:{name:n.name,chainId:n.chainId,ensAddress:n.ensAddress,_defaultProvider:n._defaultProvider||null}}const e=Jp[r.name];if(!e)return typeof r.chainId!="number"&&RQ.throwArgumentError("invalid network chainId","network",r),r;r.chainId!==0&&r.chainId!==e.chainId&&RQ.throwArgumentError("network chainId mismatch","network",r);let t=r._defaultProvider||null;return t==null&&e._defaultProvider&&(oW(e._defaultProvider)?t=e._defaultProvider.renetwork(r):t=e._defaultProvider),{name:r.name,chainId:e.chainId,ensAddress:r.ensAddress||e.ensAddress||null,_defaultProvider:t}}function $M(r){r=atob(r);const e=[];for(let t=0;t<r.length;t++)e.push(r.charCodeAt(t));return nt(e)}function e2(r){r=nt(r);let e="";for(let t=0;t<r.length;t++)e+=String.fromCharCode(r[t]);return btoa(e)}class t2{constructor(e){_e(this,"alphabet",e),_e(this,"base",e.length),_e(this,"_alphabetMap",{}),_e(this,"_leader",e.charAt(0));for(let t=0;t<e.length;t++)this._alphabetMap[e.charAt(t)]=t}encode(e){let t=nt(e);if(t.length===0)return"";let n=[0];for(let s=0;s<t.length;++s){let o=t[s];for(let a=0;a<n.length;++a)o+=n[a]<<8,n[a]=o%this.base,o=o/this.base|0;for(;o>0;)n.push(o%this.base),o=o/this.base|0}let i="";for(let s=0;t[s]===0&&s<t.length-1;++s)i+=this._leader;for(let s=n.length-1;s>=0;--s)i+=this.alphabet[n[s]];return i}decode(e){if(typeof e!="string")throw new TypeError("Expected String");let t=[];if(e.length===0)return new Uint8Array(t);t.push(0);for(let n=0;n<e.length;n++){let i=this._alphabetMap[e[n]];if(i===void 0)throw new Error("Non-base"+this.base+" character");let s=i;for(let o=0;o<t.length;++o)s+=t[o]*this.base,t[o]=s&255,s>>=8;for(;s>0;)t.push(s&255),s>>=8}for(let n=0;e[n]===this._leader&&n<e.length-1;++n)t.push(0);return nt(new Uint8Array(t.reverse()))}}new t2("abcdefghijklmnopqrstuvwxyz234567");const Ww=new t2("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"),AW="0x0000000000000000000000000000000000000000",lW=De.from(-1),n2=De.from(0),cW=De.from(1),uW=De.from("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),fW="0x0000000000000000000000000000000000000000000000000000000000000000";var Zw={},dW={get exports(){return Zw},set exports(r){Zw=r}};/**
 * [js-sha3]{@link https://github.com/emn178/js-sha3}
 *
 * @version 0.8.0
 * @author Chen, Yi-Cyuan [emn178@gmail.com]
 * @copyright Chen, Yi-Cyuan 2015-2018
 * @license MIT
 */(function(r){(function(){var e="input is invalid type",t="finalize already called",n=typeof window=="object",i=n?window:{};i.JS_SHA3_NO_WINDOW&&(n=!1);var s=!n&&typeof self=="object",o=!i.JS_SHA3_NO_NODE_JS&&typeof process=="object"&&process.versions&&process.versions.node;o?i=ZM:s&&(i=self);var a=!i.JS_SHA3_NO_COMMON_JS&&!0&&r.exports,A=!i.JS_SHA3_NO_ARRAY_BUFFER&&typeof ArrayBuffer<"u",l="0123456789abcdef".split(""),c=[31,7936,2031616,520093696],u=[4,1024,262144,67108864],f=[1,256,65536,16777216],d=[6,1536,393216,100663296],p=[0,8,16,24],h=[1,0,32898,0,32906,2147483648,2147516416,2147483648,32907,0,2147483649,0,2147516545,2147483648,32777,2147483648,138,0,136,0,2147516425,0,2147483658,0,2147516555,0,139,2147483648,32905,2147483648,32771,2147483648,32770,2147483648,128,2147483648,32778,0,2147483658,2147483648,2147516545,2147483648,32896,2147483648,2147483649,0,2147516424,2147483648],m=[224,256,384,512],g=[128,256],B=["hex","buffer","arrayBuffer","array","digest"],v={128:168,256:136};(i.JS_SHA3_NO_NODE_JS||!Array.isArray)&&(Array.isArray=function(M){return Object.prototype.toString.call(M)==="[object Array]"}),A&&(i.JS_SHA3_NO_ARRAY_BUFFER_IS_VIEW||!ArrayBuffer.isView)&&(ArrayBuffer.isView=function(M){return typeof M=="object"&&M.buffer&&M.buffer.constructor===ArrayBuffer});for(var w=function(M,k,q){return function(ee){return new x(M,k,M).update(ee)[q]()}},C=function(M,k,q){return function(ee,X){return new x(M,k,X).update(ee)[q]()}},I=function(M,k,q){return function(ee,X,$,se){return y["cshake"+M].update(ee,X,$,se)[q]()}},E=function(M,k,q){return function(ee,X,$,se){return y["kmac"+M].update(ee,X,$,se)[q]()}},U=function(M,k,q,ee){for(var X=0;X<B.length;++X){var $=B[X];M[$]=k(q,ee,$)}return M},S=function(M,k){var q=w(M,k,"hex");return q.create=function(){return new x(M,k,M)},q.update=function(ee){return q.create().update(ee)},U(q,w,M,k)},V=function(M,k){var q=C(M,k,"hex");return q.create=function(ee){return new x(M,k,ee)},q.update=function(ee,X){return q.create(X).update(ee)},U(q,C,M,k)},J=function(M,k){var q=v[M],ee=I(M,k,"hex");return ee.create=function(X,$,se){return!$&&!se?y["shake"+M].create(X):new x(M,k,X).bytepad([$,se],q)},ee.update=function(X,$,se,ae){return ee.create($,se,ae).update(X)},U(ee,I,M,k)},z=function(M,k){var q=v[M],ee=E(M,k,"hex");return ee.create=function(X,$,se){return new P(M,k,$).bytepad(["KMAC",se],q).bytepad([X],q)},ee.update=function(X,$,se,ae){return ee.create(X,se,ae).update($)},U(ee,E,M,k)},R=[{name:"keccak",padding:f,bits:m,createMethod:S},{name:"sha3",padding:d,bits:m,createMethod:S},{name:"shake",padding:c,bits:g,createMethod:V},{name:"cshake",padding:u,bits:g,createMethod:J},{name:"kmac",padding:u,bits:g,createMethod:z}],y={},Q=[],_=0;_<R.length;++_)for(var L=R[_],T=L.bits,Z=0;Z<T.length;++Z){var G=L.name+"_"+T[Z];if(Q.push(G),y[G]=L.createMethod(T[Z],L.padding),L.name!=="sha3"){var D=L.name+T[Z];Q.push(D),y[D]=y[G]}}function x(M,k,q){this.blocks=[],this.s=[],this.padding=k,this.outputBits=q,this.reset=!0,this.finalized=!1,this.block=0,this.start=0,this.blockCount=1600-(M<<1)>>5,this.byteCount=this.blockCount<<2,this.outputBlocks=q>>5,this.extraBytes=(q&31)>>3;for(var ee=0;ee<50;++ee)this.s[ee]=0}x.prototype.update=function(M){if(this.finalized)throw new Error(t);var k,q=typeof M;if(q!=="string"){if(q==="object"){if(M===null)throw new Error(e);if(A&&M.constructor===ArrayBuffer)M=new Uint8Array(M);else if(!Array.isArray(M)&&(!A||!ArrayBuffer.isView(M)))throw new Error(e)}else throw new Error(e);k=!0}for(var ee=this.blocks,X=this.byteCount,$=M.length,se=this.blockCount,ae=0,de=this.s,fe,ge;ae<$;){if(this.reset)for(this.reset=!1,ee[0]=this.block,fe=1;fe<se+1;++fe)ee[fe]=0;if(k)for(fe=this.start;ae<$&&fe<X;++ae)ee[fe>>2]|=M[ae]<<p[fe++&3];else for(fe=this.start;ae<$&&fe<X;++ae)ge=M.charCodeAt(ae),ge<128?ee[fe>>2]|=ge<<p[fe++&3]:ge<2048?(ee[fe>>2]|=(192|ge>>6)<<p[fe++&3],ee[fe>>2]|=(128|ge&63)<<p[fe++&3]):ge<55296||ge>=57344?(ee[fe>>2]|=(224|ge>>12)<<p[fe++&3],ee[fe>>2]|=(128|ge>>6&63)<<p[fe++&3],ee[fe>>2]|=(128|ge&63)<<p[fe++&3]):(ge=65536+((ge&1023)<<10|M.charCodeAt(++ae)&1023),ee[fe>>2]|=(240|ge>>18)<<p[fe++&3],ee[fe>>2]|=(128|ge>>12&63)<<p[fe++&3],ee[fe>>2]|=(128|ge>>6&63)<<p[fe++&3],ee[fe>>2]|=(128|ge&63)<<p[fe++&3]);if(this.lastByteIndex=fe,fe>=X){for(this.start=fe-X,this.block=ee[se],fe=0;fe<se;++fe)de[fe]^=ee[fe];oe(de),this.reset=!0}else this.start=fe}return this},x.prototype.encode=function(M,k){var q=M&255,ee=1,X=[q];for(M=M>>8,q=M&255;q>0;)X.unshift(q),M=M>>8,q=M&255,++ee;return k?X.push(ee):X.unshift(ee),this.update(X),X.length},x.prototype.encodeString=function(M){var k,q=typeof M;if(q!=="string"){if(q==="object"){if(M===null)throw new Error(e);if(A&&M.constructor===ArrayBuffer)M=new Uint8Array(M);else if(!Array.isArray(M)&&(!A||!ArrayBuffer.isView(M)))throw new Error(e)}else throw new Error(e);k=!0}var ee=0,X=M.length;if(k)ee=X;else for(var $=0;$<M.length;++$){var se=M.charCodeAt($);se<128?ee+=1:se<2048?ee+=2:se<55296||se>=57344?ee+=3:(se=65536+((se&1023)<<10|M.charCodeAt(++$)&1023),ee+=4)}return ee+=this.encode(ee*8),this.update(M),ee},x.prototype.bytepad=function(M,k){for(var q=this.encode(k),ee=0;ee<M.length;++ee)q+=this.encodeString(M[ee]);var X=k-q%k,$=[];return $.length=X,this.update($),this},x.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var M=this.blocks,k=this.lastByteIndex,q=this.blockCount,ee=this.s;if(M[k>>2]|=this.padding[k&3],this.lastByteIndex===this.byteCount)for(M[0]=M[q],k=1;k<q+1;++k)M[k]=0;for(M[q-1]|=2147483648,k=0;k<q;++k)ee[k]^=M[k];oe(ee)}},x.prototype.toString=x.prototype.hex=function(){this.finalize();for(var M=this.blockCount,k=this.s,q=this.outputBlocks,ee=this.extraBytes,X=0,$=0,se="",ae;$<q;){for(X=0;X<M&&$<q;++X,++$)ae=k[X],se+=l[ae>>4&15]+l[ae&15]+l[ae>>12&15]+l[ae>>8&15]+l[ae>>20&15]+l[ae>>16&15]+l[ae>>28&15]+l[ae>>24&15];$%M===0&&(oe(k),X=0)}return ee&&(ae=k[X],se+=l[ae>>4&15]+l[ae&15],ee>1&&(se+=l[ae>>12&15]+l[ae>>8&15]),ee>2&&(se+=l[ae>>20&15]+l[ae>>16&15])),se},x.prototype.arrayBuffer=function(){this.finalize();var M=this.blockCount,k=this.s,q=this.outputBlocks,ee=this.extraBytes,X=0,$=0,se=this.outputBits>>3,ae;ee?ae=new ArrayBuffer(q+1<<2):ae=new ArrayBuffer(se);for(var de=new Uint32Array(ae);$<q;){for(X=0;X<M&&$<q;++X,++$)de[$]=k[X];$%M===0&&oe(k)}return ee&&(de[X]=k[X],ae=ae.slice(0,se)),ae},x.prototype.buffer=x.prototype.arrayBuffer,x.prototype.digest=x.prototype.array=function(){this.finalize();for(var M=this.blockCount,k=this.s,q=this.outputBlocks,ee=this.extraBytes,X=0,$=0,se=[],ae,de;$<q;){for(X=0;X<M&&$<q;++X,++$)ae=$<<2,de=k[X],se[ae]=de&255,se[ae+1]=de>>8&255,se[ae+2]=de>>16&255,se[ae+3]=de>>24&255;$%M===0&&oe(k)}return ee&&(ae=$<<2,de=k[X],se[ae]=de&255,ee>1&&(se[ae+1]=de>>8&255),ee>2&&(se[ae+2]=de>>16&255)),se};function P(M,k,q){x.call(this,M,k,q)}P.prototype=new x,P.prototype.finalize=function(){return this.encode(this.outputBits,!0),x.prototype.finalize.call(this)};var oe=function(M){var k,q,ee,X,$,se,ae,de,fe,ge,Qe,Ue,xe,Fe,Ne,Ze,j,O,le,ue,Ce,W,b,F,N,K,te,ne,we,ye,Se,We,Re,re,Be,ve,be,Ge,Ye,rt,Yt,gt,qe,Wn,ct,kt,Fs,Tt,Lt,Y,Ae,he,ce,pe,Te,tt,He,ze,At,st,ot,Wt,hn;for(ee=0;ee<48;ee+=2)X=M[0]^M[10]^M[20]^M[30]^M[40],$=M[1]^M[11]^M[21]^M[31]^M[41],se=M[2]^M[12]^M[22]^M[32]^M[42],ae=M[3]^M[13]^M[23]^M[33]^M[43],de=M[4]^M[14]^M[24]^M[34]^M[44],fe=M[5]^M[15]^M[25]^M[35]^M[45],ge=M[6]^M[16]^M[26]^M[36]^M[46],Qe=M[7]^M[17]^M[27]^M[37]^M[47],Ue=M[8]^M[18]^M[28]^M[38]^M[48],xe=M[9]^M[19]^M[29]^M[39]^M[49],k=Ue^(se<<1|ae>>>31),q=xe^(ae<<1|se>>>31),M[0]^=k,M[1]^=q,M[10]^=k,M[11]^=q,M[20]^=k,M[21]^=q,M[30]^=k,M[31]^=q,M[40]^=k,M[41]^=q,k=X^(de<<1|fe>>>31),q=$^(fe<<1|de>>>31),M[2]^=k,M[3]^=q,M[12]^=k,M[13]^=q,M[22]^=k,M[23]^=q,M[32]^=k,M[33]^=q,M[42]^=k,M[43]^=q,k=se^(ge<<1|Qe>>>31),q=ae^(Qe<<1|ge>>>31),M[4]^=k,M[5]^=q,M[14]^=k,M[15]^=q,M[24]^=k,M[25]^=q,M[34]^=k,M[35]^=q,M[44]^=k,M[45]^=q,k=de^(Ue<<1|xe>>>31),q=fe^(xe<<1|Ue>>>31),M[6]^=k,M[7]^=q,M[16]^=k,M[17]^=q,M[26]^=k,M[27]^=q,M[36]^=k,M[37]^=q,M[46]^=k,M[47]^=q,k=ge^(X<<1|$>>>31),q=Qe^($<<1|X>>>31),M[8]^=k,M[9]^=q,M[18]^=k,M[19]^=q,M[28]^=k,M[29]^=q,M[38]^=k,M[39]^=q,M[48]^=k,M[49]^=q,Fe=M[0],Ne=M[1],kt=M[11]<<4|M[10]>>>28,Fs=M[10]<<4|M[11]>>>28,ne=M[20]<<3|M[21]>>>29,we=M[21]<<3|M[20]>>>29,st=M[31]<<9|M[30]>>>23,ot=M[30]<<9|M[31]>>>23,gt=M[40]<<18|M[41]>>>14,qe=M[41]<<18|M[40]>>>14,re=M[2]<<1|M[3]>>>31,Be=M[3]<<1|M[2]>>>31,Ze=M[13]<<12|M[12]>>>20,j=M[12]<<12|M[13]>>>20,Tt=M[22]<<10|M[23]>>>22,Lt=M[23]<<10|M[22]>>>22,ye=M[33]<<13|M[32]>>>19,Se=M[32]<<13|M[33]>>>19,Wt=M[42]<<2|M[43]>>>30,hn=M[43]<<2|M[42]>>>30,pe=M[5]<<30|M[4]>>>2,Te=M[4]<<30|M[5]>>>2,ve=M[14]<<6|M[15]>>>26,be=M[15]<<6|M[14]>>>26,O=M[25]<<11|M[24]>>>21,le=M[24]<<11|M[25]>>>21,Y=M[34]<<15|M[35]>>>17,Ae=M[35]<<15|M[34]>>>17,We=M[45]<<29|M[44]>>>3,Re=M[44]<<29|M[45]>>>3,F=M[6]<<28|M[7]>>>4,N=M[7]<<28|M[6]>>>4,tt=M[17]<<23|M[16]>>>9,He=M[16]<<23|M[17]>>>9,Ge=M[26]<<25|M[27]>>>7,Ye=M[27]<<25|M[26]>>>7,ue=M[36]<<21|M[37]>>>11,Ce=M[37]<<21|M[36]>>>11,he=M[47]<<24|M[46]>>>8,ce=M[46]<<24|M[47]>>>8,Wn=M[8]<<27|M[9]>>>5,ct=M[9]<<27|M[8]>>>5,K=M[18]<<20|M[19]>>>12,te=M[19]<<20|M[18]>>>12,ze=M[29]<<7|M[28]>>>25,At=M[28]<<7|M[29]>>>25,rt=M[38]<<8|M[39]>>>24,Yt=M[39]<<8|M[38]>>>24,W=M[48]<<14|M[49]>>>18,b=M[49]<<14|M[48]>>>18,M[0]=Fe^~Ze&O,M[1]=Ne^~j&le,M[10]=F^~K&ne,M[11]=N^~te&we,M[20]=re^~ve&Ge,M[21]=Be^~be&Ye,M[30]=Wn^~kt&Tt,M[31]=ct^~Fs&Lt,M[40]=pe^~tt&ze,M[41]=Te^~He&At,M[2]=Ze^~O&ue,M[3]=j^~le&Ce,M[12]=K^~ne&ye,M[13]=te^~we&Se,M[22]=ve^~Ge&rt,M[23]=be^~Ye&Yt,M[32]=kt^~Tt&Y,M[33]=Fs^~Lt&Ae,M[42]=tt^~ze&st,M[43]=He^~At&ot,M[4]=O^~ue&W,M[5]=le^~Ce&b,M[14]=ne^~ye&We,M[15]=we^~Se&Re,M[24]=Ge^~rt&gt,M[25]=Ye^~Yt&qe,M[34]=Tt^~Y&he,M[35]=Lt^~Ae&ce,M[44]=ze^~st&Wt,M[45]=At^~ot&hn,M[6]=ue^~W&Fe,M[7]=Ce^~b&Ne,M[16]=ye^~We&F,M[17]=Se^~Re&N,M[26]=rt^~gt&re,M[27]=Yt^~qe&Be,M[36]=Y^~he&Wn,M[37]=Ae^~ce&ct,M[46]=st^~Wt&pe,M[47]=ot^~hn&Te,M[8]=W^~Fe&Ze,M[9]=b^~Ne&j,M[18]=We^~F&K,M[19]=Re^~N&te,M[28]=gt^~re&ve,M[29]=qe^~Be&be,M[38]=he^~Wn&kt,M[39]=ce^~ct&Fs,M[48]=Wt^~pe&tt,M[49]=hn^~Te&He,M[0]^=h[ee],M[1]^=h[ee+1]};if(a)r.exports=y;else for(_=0;_<Q.length;++_)i[Q[_]]=y[Q[_]]})()})(dW);const hW=Zw;function kn(r){return"0x"+hW.keccak_256(nt(r))}const pW="strings/5.7.0",r2=new me(pW);var bh;(function(r){r.current="",r.NFC="NFC",r.NFD="NFD",r.NFKC="NFKC",r.NFKD="NFKD"})(bh||(bh={}));var wi;(function(r){r.UNEXPECTED_CONTINUE="unexpected continuation byte",r.BAD_PREFIX="bad codepoint prefix",r.OVERRUN="string overrun",r.MISSING_CONTINUE="missing continuation byte",r.OUT_OF_RANGE="out of UTF-8 range",r.UTF16_SURROGATE="UTF-16 surrogate",r.OVERLONG="overlong representation"})(wi||(wi={}));function gW(r,e,t,n,i){return r2.throwArgumentError(`invalid codepoint at offset ${e}; ${r}`,"bytes",t)}function i2(r,e,t,n,i){if(r===wi.BAD_PREFIX||r===wi.UNEXPECTED_CONTINUE){let s=0;for(let o=e+1;o<t.length&&t[o]>>6===2;o++)s++;return s}return r===wi.OVERRUN?t.length-e-1:0}function mW(r,e,t,n,i){return r===wi.OVERLONG?(n.push(i),0):(n.push(65533),i2(r,e,t))}const BW=Object.freeze({error:gW,ignore:i2,replace:mW});function s2(r,e){e==null&&(e=BW.error),r=nt(r);const t=[];let n=0;for(;n<r.length;){const i=r[n++];if(!(i>>7)){t.push(i);continue}let s=null,o=null;if((i&224)===192)s=1,o=127;else if((i&240)===224)s=2,o=2047;else if((i&248)===240)s=3,o=65535;else{(i&192)===128?n+=e(wi.UNEXPECTED_CONTINUE,n-1,r,t):n+=e(wi.BAD_PREFIX,n-1,r,t);continue}if(n-1+s>=r.length){n+=e(wi.OVERRUN,n-1,r,t);continue}let a=i&(1<<8-s-1)-1;for(let A=0;A<s;A++){let l=r[n];if((l&192)!=128){n+=e(wi.MISSING_CONTINUE,n,r,t),a=null;break}a=a<<6|l&63,n++}if(a!==null){if(a>1114111){n+=e(wi.OUT_OF_RANGE,n-1-s,r,t,a);continue}if(a>=55296&&a<=57343){n+=e(wi.UTF16_SURROGATE,n-1-s,r,t,a);continue}if(a<=o){n+=e(wi.OVERLONG,n-1-s,r,t,a);continue}t.push(a)}}return t}function Mo(r,e=bh.current){e!=bh.current&&(r2.checkNormalize(),r=r.normalize(e));let t=[];for(let n=0;n<r.length;n++){const i=r.charCodeAt(n);if(i<128)t.push(i);else if(i<2048)t.push(i>>6|192),t.push(i&63|128);else if((i&64512)==55296){n++;const s=r.charCodeAt(n);if(n>=r.length||(s&64512)!==56320)throw new Error("invalid utf-8 string");const o=65536+((i&1023)<<10)+(s&1023);t.push(o>>18|240),t.push(o>>12&63|128),t.push(o>>6&63|128),t.push(o&63|128)}else t.push(i>>12|224),t.push(i>>6&63|128),t.push(i&63|128)}return nt(t)}function vW(r){return r.map(e=>e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode((e>>10&1023)+55296,(e&1023)+56320))).join("")}function Cp(r,e){return vW(s2(r,e))}function yW(r,e=bh.current){return s2(Mo(r,e))}function lu(r){return kn(Mo(r))}const o2="hash/5.7.0";function a2(r,e){e==null&&(e=1);const t=[],n=t.forEach,i=function(s,o){n.call(s,function(a){o>0&&Array.isArray(a)?i(a,o-1):t.push(a)})};return i(r,e),t}function CW(r){const e={};for(let t=0;t<r.length;t++){const n=r[t];e[n[0]]=n[1]}return e}function wW(r){let e=0;function t(){return r[e++]<<8|r[e++]}let n=t(),i=1,s=[0,1];for(let C=1;C<n;C++)s.push(i+=t());let o=t(),a=e;e+=o;let A=0,l=0;function c(){return A==0&&(l=l<<8|r[e++],A=8),l>>--A&1}const u=31,f=Math.pow(2,u),d=f>>>1,p=d>>1,h=f-1;let m=0;for(let C=0;C<u;C++)m=m<<1|c();let g=[],B=0,v=f;for(;;){let C=Math.floor(((m-B+1)*i-1)/v),I=0,E=n;for(;E-I>1;){let V=I+E>>>1;C<s[V]?E=V:I=V}if(I==0)break;g.push(I);let U=B+Math.floor(v*s[I]/i),S=B+Math.floor(v*s[I+1]/i)-1;for(;!((U^S)&d);)m=m<<1&h|c(),U=U<<1&h,S=S<<1&h|1;for(;U&~S&p;)m=m&d|m<<1&h>>>1|c(),U=U<<1^d,S=(S^d)<<1|d|1;B=U,v=1+S-U}let w=n-4;return g.map(C=>{switch(C-w){case 3:return w+65792+(r[a++]<<16|r[a++]<<8|r[a++]);case 2:return w+256+(r[a++]<<8|r[a++]);case 1:return w+r[a++];default:return C-1}})}function FW(r){let e=0;return()=>r[e++]}function IW(r){return FW(wW(r))}function UW(r){return r&1?~r>>1:r>>1}function xW(r,e){let t=Array(r);for(let n=0;n<r;n++)t[n]=1+e();return t}function VQ(r,e){let t=Array(r);for(let n=0,i=-1;n<r;n++)t[n]=i+=1+e();return t}function QW(r,e){let t=Array(r);for(let n=0,i=0;n<r;n++)t[n]=i+=UW(e());return t}function u0(r,e){let t=VQ(r(),r),n=r(),i=VQ(n,r),s=xW(n,r);for(let o=0;o<n;o++)for(let a=0;a<s[o];a++)t.push(i[o]+a);return e?t.map(o=>e[o]):t}function bW(r){let e=[];for(;;){let t=r();if(t==0)break;e.push(SW(t,r))}for(;;){let t=r()-1;if(t<0)break;e.push(_W(t,r))}return CW(a2(e))}function EW(r){let e=[];for(;;){let t=r();if(t==0)break;e.push(t)}return e}function A2(r,e,t){let n=Array(r).fill(void 0).map(()=>[]);for(let i=0;i<e;i++)QW(r,t).forEach((s,o)=>n[o].push(s));return n}function SW(r,e){let t=1+e(),n=e(),i=EW(e),s=A2(i.length,1+r,e);return a2(s.map((o,a)=>{const A=o[0],l=o.slice(1);return Array(i[a]).fill(void 0).map((c,u)=>{let f=u*n;return[A+u*t,l.map(d=>d+f)]})}))}function _W(r,e){let t=1+e();return A2(t,1+r,e).map(i=>[i[0],i.slice(1)])}function RW(r){let e=u0(r).sort((n,i)=>n-i);return t();function t(){let n=[];for(;;){let l=u0(r,e);if(l.length==0)break;n.push({set:new Set(l),node:t()})}n.sort((l,c)=>c.set.size-l.set.size);let i=r(),s=i%3;i=i/3|0;let o=!!(i&1);i>>=1;let a=i==1,A=i==2;return{branches:n,valid:s,fe0f:o,save:a,check:A}}}function MW(){return IW($M("AEQF2AO2DEsA2wIrAGsBRABxAN8AZwCcAEwAqgA0AGwAUgByADcATAAVAFYAIQAyACEAKAAYAFgAGwAjABQAMAAmADIAFAAfABQAKwATACoADgAbAA8AHQAYABoAGQAxADgALAAoADwAEwA9ABMAGgARAA4ADwAWABMAFgAIAA8AHgQXBYMA5BHJAS8JtAYoAe4AExozi0UAH21tAaMnBT8CrnIyhrMDhRgDygIBUAEHcoFHUPe8AXBjAewCjgDQR8IICIcEcQLwATXCDgzvHwBmBoHNAqsBdBcUAykgDhAMShskMgo8AY8jqAQfAUAfHw8BDw87MioGlCIPBwZCa4ELatMAAMspJVgsDl8AIhckSg8XAHdvTwBcIQEiDT4OPhUqbyECAEoAS34Aej8Ybx83JgT/Xw8gHxZ/7w8RICxPHA9vBw+Pfw8PHwAPFv+fAsAvCc8vEr8ivwD/EQ8Bol8OEBa/A78hrwAPCU8vESNvvwWfHwNfAVoDHr+ZAAED34YaAdJPAK7PLwSEgDLHAGo1Pz8Pvx9fUwMrpb8O/58VTzAPIBoXIyQJNF8hpwIVAT8YGAUADDNBaX3RAMomJCg9EhUeA29MABsZBTMNJipjOhc19gcIDR8bBwQHEggCWi6DIgLuAQYA+BAFCha3A5XiAEsqM7UFFgFLhAMjFTMYE1Klnw74nRVBG/ASCm0BYRN/BrsU3VoWy+S0vV8LQx+vN8gF2AC2AK5EAWwApgYDKmAAroQ0NDQ0AT+OCg7wAAIHRAbpNgVcBV0APTA5BfbPFgMLzcYL/QqqA82eBALKCjQCjqYCht0/k2+OAsXQAoP3ASTKDgDw6ACKAUYCMpIKJpRaAE4A5womABzZvs0REEKiACIQAd5QdAECAj4Ywg/wGqY2AVgAYADYvAoCGAEubA0gvAY2ALAAbpbvqpyEAGAEpgQAJgAG7gAgAEACmghUFwCqAMpAINQIwC4DthRAAPcycKgApoIdABwBfCisABoATwBqASIAvhnSBP8aH/ECeAKXAq40NjgDBTwFYQU6AXs3oABgAD4XNgmcCY1eCl5tIFZeUqGgyoNHABgAEQAaABNwWQAmABMATPMa3T34ADldyprmM1M2XociUQgLzvwAXT3xABgAEQAaABNwIGFAnADD8AAgAD4BBJWzaCcIAIEBFMAWwKoAAdq9BWAF5wLQpALEtQAKUSGkahR4GnJM+gsAwCgeFAiUAECQ0BQuL8AAIAAAADKeIheclvFqQAAETr4iAMxIARMgAMIoHhQIAn0E0pDQFC4HhznoAAAAIAI2C0/4lvFqQAAETgBJJwYCAy4ABgYAFAA8MBKYEH4eRhTkAjYeFcgACAYAeABsOqyQ5gRwDayqugEgaIIAtgoACgDmEABmBAWGme5OBJJA2m4cDeoAmITWAXwrMgOgAGwBCh6CBXYF1Tzg1wKAAFdiuABRAFwAXQBsAG8AdgBrAHYAbwCEAHEwfxQBVE5TEQADVFhTBwBDANILAqcCzgLTApQCrQL6vAAMAL8APLhNBKkE6glGKTAU4Dr4N2EYEwBCkABKk8rHAbYBmwIoAiU4Ajf/Aq4CowCAANIChzgaNBsCsTgeODcFXrgClQKdAqQBiQGYAqsCsjTsNHsfNPA0ixsAWTWiOAMFPDQSNCk2BDZHNow2TTZUNhk28Jk9VzI3QkEoAoICoQKwAqcAQAAxBV4FXbS9BW47YkIXP1ciUqs05DS/FwABUwJW11e6nHuYZmSh/RAYA8oMKvZ8KASoUAJYWAJ6ILAsAZSoqjpgA0ocBIhmDgDWAAawRDQoAAcuAj5iAHABZiR2AIgiHgCaAU68ACxuHAG0ygM8MiZIAlgBdF4GagJqAPZOHAMuBgoATkYAsABiAHgAMLoGDPj0HpKEBAAOJgAuALggTAHWAeAMEDbd20Uege0ADwAWADkAQgA9OHd+2MUQZBBhBgNNDkxxPxUQArEPqwvqERoM1irQ090ANK4H8ANYB/ADWANYB/AH8ANYB/ADWANYA1gDWBwP8B/YxRBkD00EcgWTBZAE2wiIJk4RhgctCNdUEnQjHEwDSgEBIypJITuYMxAlR0wRTQgIATZHbKx9PQNMMbBU+pCnA9AyVDlxBgMedhKlAC8PeCE1uk6DekxxpQpQT7NX9wBFBgASqwAS5gBJDSgAUCwGPQBI4zTYABNGAE2bAE3KAExdGABKaAbgAFBXAFCOAFBJABI2SWdObALDOq0//QomCZhvwHdTBkIQHCemEPgMNAG2ATwN7kvZBPIGPATKH34ZGg/OlZ0Ipi3eDO4m5C6igFsj9iqEBe5L9TzeC05RaQ9aC2YJ5DpkgU8DIgEOIowK3g06CG4Q9ArKbA3mEUYHOgPWSZsApgcCCxIdNhW2JhFirQsKOXgG/Br3C5AmsBMqev0F1BoiBk4BKhsAANAu6IWxWjJcHU9gBgQLJiPIFKlQIQ0mQLh4SRocBxYlqgKSQ3FKiFE3HpQh9zw+DWcuFFF9B/Y8BhlQC4I8n0asRQ8R0z6OPUkiSkwtBDaALDAnjAnQD4YMunxzAVoJIgmyDHITMhEYN8YIOgcaLpclJxYIIkaWYJsE+KAD9BPSAwwFQAlCBxQDthwuEy8VKgUOgSXYAvQ21i60ApBWgQEYBcwPJh/gEFFH4Q7qCJwCZgOEJewALhUiABginAhEZABgj9lTBi7MCMhqbSN1A2gU6GIRdAeSDlgHqBw0FcAc4nDJXgyGCSiksAlcAXYJmgFgBOQICjVcjKEgQmdUi1kYnCBiQUBd/QIyDGYVoES+h3kCjA9sEhwBNgF0BzoNAgJ4Ee4RbBCWCOyGBTW2M/k6JgRQIYQgEgooA1BszwsoJvoM+WoBpBJjAw00PnfvZ6xgtyUX/gcaMsZBYSHyC5NPzgydGsIYQ1QvGeUHwAP0GvQn60FYBgADpAQUOk4z7wS+C2oIjAlAAEoOpBgH2BhrCnKM0QEyjAG4mgNYkoQCcJAGOAcMAGgMiAV65gAeAqgIpAAGANADWAA6Aq4HngAaAIZCAT4DKDABIuYCkAOUCDLMAZYwAfQqBBzEDBYA+DhuSwLDsgKAa2ajBd5ZAo8CSjYBTiYEBk9IUgOwcuIA3ABMBhTgSAEWrEvMG+REAeBwLADIAPwABjYHBkIBzgH0bgC4AWALMgmjtLYBTuoqAIQAFmwB2AKKAN4ANgCA8gFUAE4FWvoF1AJQSgESMhksWGIBvAMgATQBDgB6BsyOpsoIIARuB9QCEBwV4gLvLwe2AgMi4BPOQsYCvd9WADIXUu5eZwqoCqdeaAC0YTQHMnM9UQAPH6k+yAdy/BZIiQImSwBQ5gBQQzSaNTFWSTYBpwGqKQK38AFtqwBI/wK37gK3rQK3sAK6280C0gK33AK3zxAAUEIAUD9SklKDArekArw5AEQAzAHCO147WTteO1k7XjtZO147WTteO1kDmChYI03AVU0oJqkKbV9GYewMpw3VRMk6ShPcYFJgMxPJLbgUwhXPJVcZPhq9JwYl5VUKDwUt1GYxCC00dhe9AEApaYNCY4ceMQpMHOhTklT5LRwAskujM7ANrRsWREEFSHXuYisWDwojAmSCAmJDXE6wXDchAqH4AmiZAmYKAp+FOBwMAmY8AmYnBG8EgAN/FAN+kzkHOXgYOYM6JCQCbB4CMjc4CwJtyAJtr/CLADRoRiwBaADfAOIASwYHmQyOAP8MwwAOtgJ3MAJ2o0ACeUxEAni7Hl3cRa9G9AJ8QAJ6yQJ9CgJ88UgBSH5kJQAsFklZSlwWGErNAtECAtDNSygDiFADh+dExpEzAvKiXQQDA69Lz0wuJgTQTU1NsAKLQAKK2cIcCB5EaAa4Ao44Ao5dQZiCAo7aAo5deVG1UzYLUtVUhgKT/AKTDQDqAB1VH1WwVdEHLBwplocy4nhnRTw6ApegAu+zWCKpAFomApaQApZ9nQCqWa1aCoJOADwClrYClk9cRVzSApnMApllXMtdCBoCnJw5wzqeApwXAp+cAp65iwAeEDIrEAKd8gKekwC2PmE1YfACntQCoG8BqgKeoCACnk+mY8lkKCYsAiewAiZ/AqD8AqBN2AKmMAKlzwKoAAB+AqfzaH1osgAESmodatICrOQCrK8CrWgCrQMCVx4CVd0CseLYAx9PbJgCsr4OArLpGGzhbWRtSWADJc4Ctl08QG6RAylGArhfArlIFgK5K3hwN3DiAr0aAy2zAzISAr6JcgMDM3ICvhtzI3NQAsPMAsMFc4N0TDZGdOEDPKgDPJsDPcACxX0CxkgCxhGKAshqUgLIRQLJUALJLwJkngLd03h6YniveSZL0QMYpGcDAmH1GfSVJXsMXpNevBICz2wCz20wTFTT9BSgAMeuAs90ASrrA04TfkwGAtwoAtuLAtJQA1JdA1NgAQIDVY2AikABzBfuYUZ2AILPg44C2sgC2d+EEYRKpz0DhqYAMANkD4ZyWvoAVgLfZgLeuXR4AuIw7RUB8zEoAfScAfLTiALr9ALpcXoAAur6AurlAPpIAboC7ooC652Wq5cEAu5AA4XhmHpw4XGiAvMEAGoDjheZlAL3FAORbwOSiAL3mQL52gL4Z5odmqy8OJsfA52EAv77ARwAOp8dn7QDBY4DpmsDptoA0sYDBmuhiaIGCgMMSgFgASACtgNGAJwEgLpoBgC8BGzAEowcggCEDC6kdjoAJAM0C5IKRoABZCgiAIzw3AYBLACkfng9ogigkgNmWAN6AEQCvrkEVqTGAwCsBRbAA+4iQkMCHR072jI2PTbUNsk2RjY5NvA23TZKNiU3EDcZN5I+RTxDRTBCJkK5VBYKFhZfwQCWygU3AJBRHpu+OytgNxa61A40GMsYjsn7BVwFXQVcBV0FaAVdBVwFXQVcBV0FXAVdBVwFXUsaCNyKAK4AAQUHBwKU7oICoW1e7jAEzgPxA+YDwgCkBFDAwADABKzAAOxFLhitA1UFTDeyPkM+bj51QkRCuwTQWWQ8X+0AWBYzsACNA8xwzAGm7EZ/QisoCTAbLDs6fnLfb8H2GccsbgFw13M1HAVkBW/Jxsm9CNRO8E8FDD0FBQw9FkcClOYCoMFegpDfADgcMiA2AJQACB8AsigKAIzIEAJKeBIApY5yPZQIAKQiHb4fvj5BKSRPQrZCOz0oXyxgOywfKAnGbgMClQaCAkILXgdeCD9IIGUgQj5fPoY+dT52Ao5CM0dAX9BTVG9SDzFwWTQAbxBzJF/lOEIQQglCCkKJIAls5AcClQICoKPMODEFxhi6KSAbiyfIRrMjtCgdWCAkPlFBIitCsEJRzAbMAV/OEyQzDg0OAQQEJ36i328/Mk9AybDJsQlq3tDRApUKAkFzXf1d/j9uALYP6hCoFgCTGD8kPsFKQiobrm0+zj0KSD8kPnVCRBwMDyJRTHFgMTJa5rwXQiQ2YfI/JD7BMEJEHGINTw4TOFlIRzwJO0icMQpyPyQ+wzJCRBv6DVgnKB01NgUKj2bwYzMqCoBkznBgEF+zYDIocwRIX+NgHj4HICNfh2C4CwdwFWpTG/lgUhYGAwRfv2Ts8mAaXzVgml/XYIJfuWC4HI1gUF9pYJZgMR6ilQHMAOwLAlDRefC0in4AXAEJA6PjCwc0IamOANMMCAECRQDFNRTZBgd+CwQlRA+r6+gLBDEFBnwUBXgKATIArwAGRAAHA3cDdAN2A3kDdwN9A3oDdQN7A30DfAN4A3oDfQAYEAAlAtYASwMAUAFsAHcKAHcAmgB3AHUAdQB2AHVu8UgAygDAAHcAdQB1AHYAdQALCgB3AAsAmgB3AAsCOwB3AAtu8UgAygDAAHgKAJoAdwB3AHUAdQB2AHUAeAB1AHUAdgB1bvFIAMoAwAALCgCaAHcACwB3AAsCOwB3AAtu8UgAygDAAH4ACwGgALcBpwC6AahdAu0COwLtbvFIAMoAwAALCgCaAu0ACwLtAAsCOwLtAAtu8UgAygDAA24ACwNvAAu0VsQAAzsAABCkjUIpAAsAUIusOggWcgMeBxVsGwL67U/2HlzmWOEeOgALASvuAAseAfpKUpnpGgYJDCIZM6YyARUE9ThqAD5iXQgnAJYJPnOzw0ZAEZxEKsIAkA4DhAHnTAIDxxUDK0lxCQlPYgIvIQVYJQBVqE1GakUAKGYiDToSBA1EtAYAXQJYAIF8GgMHRyAAIAjOe9YncekRAA0KACUrjwE7Ayc6AAYWAqaiKG4McEcqANoN3+Mg9TwCBhIkuCny+JwUQ29L008JluRxu3K+oAdqiHOqFH0AG5SUIfUJ5SxCGfxdipRzqTmT4V5Zb+r1Uo4Vm+NqSSEl2mNvR2JhIa8SpYO6ntdwFXHCWTCK8f2+Hxo7uiG3drDycAuKIMP5bhi06ACnqArH1rz4Rqg//lm6SgJGEVbF9xJHISaR6HxqxSnkw6shDnelHKNEfGUXSJRJ1GcsmtJw25xrZMDK9gXSm1/YMkdX4/6NKYOdtk/NQ3/NnDASjTc3fPjIjW/5sVfVObX2oTDWkr1dF9f3kxBsD3/3aQO8hPfRz+e0uEiJqt1161griu7gz8hDDwtpy+F+BWtefnKHZPAxcZoWbnznhJpy0e842j36bcNzGnIEusgGX0a8ZxsnjcSsPDZ09yZ36fCQbriHeQ72JRMILNl6ePPf2HWoVwgWAm1fb3V2sAY0+B6rAXqSwPBgseVmoqsBTSrm91+XasMYYySI8eeRxH3ZvHkMz3BQ5aJ3iUVbYPNM3/7emRtjlsMgv/9VyTsyt/mK+8fgWeT6SoFaclXqn42dAIsvAarF5vNNWHzKSkKQ/8Hfk5ZWK7r9yliOsooyBjRhfkHP4Q2DkWXQi6FG/9r/IwbmkV5T7JSopHKn1pJwm9tb5Ot0oyN1Z2mPpKXHTxx2nlK08fKk1hEYA8WgVVWL5lgx0iTv+KdojJeU23ZDjmiubXOxVXJKKi2Wjuh2HLZOFLiSC7Tls5SMh4f+Pj6xUSrNjFqLGehRNB8lC0QSLNmkJJx/wSG3MnjE9T1CkPwJI0wH2lfzwETIiVqUxg0dfu5q39Gt+hwdcxkhhNvQ4TyrBceof3Mhs/IxFci1HmHr4FMZgXEEczPiGCx0HRwzAqDq2j9AVm1kwN0mRVLWLylgtoPNapF5cY4Y1wJh/e0BBwZj44YgZrDNqvD/9Hv7GFYdUQeDJuQ3EWI4HaKqavU1XjC/n41kT4L79kqGq0kLhdTZvgP3TA3fS0ozVz+5piZsoOtIvBUFoMKbNcmBL6YxxaUAusHB38XrS8dQMnQwJfUUkpRoGr5AUeWicvBTzyK9g77+yCkf5PAysL7r/JjcZgrbvRpMW9iyaxZvKO6ceZN2EwIxKwVFPuvFuiEPGCoagbMo+SpydLrXqBzNCDGFCrO/rkcwa2xhokQZ5CdZ0AsU3JfSqJ6n5I14YA+P/uAgfhPU84Tlw7cEFfp7AEE8ey4sP12PTt4Cods1GRgDOB5xvyiR5m+Bx8O5nBCNctU8BevfV5A08x6RHd5jcwPTMDSZJOedIZ1cGQ704lxbAzqZOP05ZxaOghzSdvFBHYqomATARyAADK4elP8Ly3IrUZKfWh23Xy20uBUmLS4Pfagu9+oyVa2iPgqRP3F2CTUsvJ7+RYnN8fFZbU/HVvxvcFFDKkiTqV5UBZ3Gz54JAKByi9hkKMZJvuGgcSYXFmw08UyoQyVdfTD1/dMkCHXcTGAKeROgArsvmRrQTLUOXioOHGK2QkjHuoYFgXciZoTJd6Fs5q1QX1G+p/e26hYsEf7QZD1nnIyl/SFkNtYYmmBhpBrxl9WbY0YpHWRuw2Ll/tj9mD8P4snVzJl4F9J+1arVeTb9E5r2ILH04qStjxQNwn3m4YNqxmaNbLAqW2TN6LidwuJRqS+NXbtqxoeDXpxeGWmxzSkWxjkyCkX4NQRme6q5SAcC+M7+9ETfA/EwrzQajKakCwYyeunP6ZFlxU2oMEn1Pz31zeStW74G406ZJFCl1wAXIoUKkWotYEpOuXB1uVNxJ63dpJEqfxBeptwIHNrPz8BllZoIcBoXwgfJ+8VAUnVPvRvexnw0Ma/WiGYuJO5y8QTvEYBigFmhUxY5RqzE8OcywN/8m4UYrlaniJO75XQ6KSo9+tWHlu+hMi0UVdiKQp7NelnoZUzNaIyBPVeOwK6GNp+FfHuPOoyhaWuNvTYFkvxscMQWDh+zeFCFkgwbXftiV23ywJ4+uwRqmg9k3KzwIQpzppt8DBBOMbrqwQM5Gb05sEwdKzMiAqOloaA/lr0KA+1pr0/+HiWoiIjHA/wir2nIuS3PeU/ji3O6ZwoxcR1SZ9FhtLC5S0FIzFhbBWcGVP/KpxOPSiUoAdWUpqKH++6Scz507iCcxYI6rdMBICPJZea7OcmeFw5mObJSiqpjg2UoWNIs+cFhyDSt6geV5qgi3FunmwwDoGSMgerFOZGX1m0dMCYo5XOruxO063dwENK9DbnVM9wYFREzh4vyU1WYYJ/LRRp6oxgjqP/X5a8/4Af6p6NWkQferzBmXme0zY/4nwMJm/wd1tIqSwGz+E3xPEAOoZlJit3XddD7/BT1pllzOx+8bmQtANQ/S6fZexc6qi3W+Q2xcmXTUhuS5mpHQRvcxZUN0S5+PL9lXWUAaRZhEH8hTdAcuNMMCuVNKTEGtSUKNi3O6KhSaTzck8csZ2vWRZ+d7mW8c4IKwXIYd25S/zIftPkwPzufjEvOHWVD1m+FjpDVUTV0DGDuHj6QnaEwLu/dEgdLQOg9E1Sro9XHJ8ykLAwtPu+pxqKDuFexqON1sKQm7rwbE1E68UCfA/erovrTCG+DBSNg0l4goDQvZN6uNlbyLpcZAwj2UclycvLpIZMgv4yRlpb3YuMftozorbcGVHt/VeDV3+Fdf1TP0iuaCsPi2G4XeGhsyF1ubVDxkoJhmniQ0/jSg/eYML9KLfnCFgISWkp91eauR3IQvED0nAPXK+6hPCYs+n3+hCZbiskmVMG2da+0EsZPonUeIY8EbfusQXjsK/eFDaosbPjEfQS0RKG7yj5GG69M7MeO1HmiUYocgygJHL6M1qzUDDwUSmr99V7Sdr2F3JjQAJY+F0yH33Iv3+C9M38eML7gTgmNu/r2bUMiPvpYbZ6v1/IaESirBHNa7mPKn4dEmYg7v/+HQgPN1G79jBQ1+soydfDC2r+h2Bl/KIc5KjMK7OH6nb1jLsNf0EHVe2KBiE51ox636uyG6Lho0t3J34L5QY/ilE3mikaF4HKXG1mG1rCevT1Vv6GavltxoQe/bMrpZvRggnBxSEPEeEzkEdOxTnPXHVjUYdw8JYvjB/o7Eegc3Ma+NUxLLnsK0kJlinPmUHzHGtrk5+CAbVzFOBqpyy3QVUnzTDfC/0XD94/okH+OB+i7g9lolhWIjSnfIb+Eq43ZXOWmwvjyV/qqD+t0e+7mTEM74qP/Ozt8nmC7mRpyu63OB4KnUzFc074SqoyPUAgM+/TJGFo6T44EHnQU4X4z6qannVqgw/U7zCpwcmXV1AubIrvOmkKHazJAR55ePjp5tLBsN8vAqs3NAHdcEHOR2xQ0lsNAFzSUuxFQCFYvXLZJdOj9p4fNq6p0HBGUik2YzaI4xySy91KzhQ0+q1hjxvImRwPRf76tChlRkhRCi74NXZ9qUNeIwP+s5p+3m5nwPdNOHgSLD79n7O9m1n1uDHiMntq4nkYwV5OZ1ENbXxFd4PgrlvavZsyUO4MqYlqqn1O8W/I1dEZq5dXhrbETLaZIbC2Kj/Aa/QM+fqUOHdf0tXAQ1huZ3cmWECWSXy/43j35+Mvq9xws7JKseriZ1pEWKc8qlzNrGPUGcVgOa9cPJYIJsGnJTAUsEcDOEVULO5x0rXBijc1lgXEzQQKhROf8zIV82w8eswc78YX11KYLWQRcgHNJElBxfXr72lS2RBSl07qTKorO2uUDZr3sFhYsvnhLZn0A94KRzJ/7DEGIAhW5ZWFpL8gEwu1aLA9MuWZzNwl8Oze9Y+bX+v9gywRVnoB5I/8kXTXU3141yRLYrIOOz6SOnyHNy4SieqzkBXharjfjqq1q6tklaEbA8Qfm2DaIPs7OTq/nvJBjKfO2H9bH2cCMh1+5gspfycu8f/cuuRmtDjyqZ7uCIMyjdV3a+p3fqmXsRx4C8lujezIFHnQiVTXLXuI1XrwN3+siYYj2HHTvESUx8DlOTXpak9qFRK+L3mgJ1WsD7F4cu1aJoFoYQnu+wGDMOjJM3kiBQWHCcvhJ/HRdxodOQp45YZaOTA22Nb4XKCVxqkbwMYFhzYQYIAnCW8FW14uf98jhUG2zrKhQQ0q0CEq0t5nXyvUyvR8DvD69LU+g3i+HFWQMQ8PqZuHD+sNKAV0+M6EJC0szq7rEr7B5bQ8BcNHzvDMc9eqB5ZCQdTf80Obn4uzjwpYU7SISdtV0QGa9D3Wrh2BDQtpBKxaNFV+/Cy2P/Sv+8s7Ud0Fd74X4+o/TNztWgETUapy+majNQ68Lq3ee0ZO48VEbTZYiH1Co4OlfWef82RWeyUXo7woM03PyapGfikTnQinoNq5z5veLpeMV3HCAMTaZmA1oGLAn7XS3XYsz+XK7VMQsc4XKrmDXOLU/pSXVNUq8dIqTba///3x6LiLS6xs1xuCAYSfcQ3+rQgmu7uvf3THKt5Ooo97TqcbRqxx7EASizaQCBQllG/rYxVapMLgtLbZS64w1MDBMXX+PQpBKNwqUKOf2DDRDUXQf9EhOS0Qj4nTmlA8dzSLz/G1d+Ud8MTy/6ghhdiLpeerGY/UlDOfiuqFsMUU5/UYlP+BAmgRLuNpvrUaLlVkrqDievNVEAwF+4CoM1MZTmjxjJMsKJq+u8Zd7tNCUFy6LiyYXRJQ4VyvEQFFaCGKsxIwQkk7EzZ6LTJq2hUuPhvAW+gQnSG6J+MszC+7QCRHcnqDdyNRJ6T9xyS87A6MDutbzKGvGktpbXqtzWtXb9HsfK2cBMomjN9a4y+TaJLnXxAeX/HWzmf4cR4vALt/P4w4qgKY04ml4ZdLOinFYS6cup3G/1ie4+t1eOnpBNlqGqs75ilzkT4+DsZQxNvaSKJ//6zIbbk/M7LOhFmRc/1R+kBtz7JFGdZm/COotIdvQoXpTqP/1uqEUmCb/QWoGLMwO5ANcHzxdY48IGP5+J+zKOTBFZ4Pid+GTM+Wq12MV/H86xEJptBa6T+p3kgpwLedManBHC2GgNrFpoN2xnrMz9WFWX/8/ygSBkavq2Uv7FdCsLEYLu9LLIvAU0bNRDtzYl+/vXmjpIvuJFYjmI0im6QEYqnIeMsNjXG4vIutIGHijeAG/9EDBozKV5cldkHbLxHh25vT+ZEzbhXlqvpzKJwcEgfNwLAKFeo0/pvEE10XDB+EXRTXtSzJozQKFFAJhMxYkVaCW+E9AL7tMeU8acxidHqzb6lX4691UsDpy/LLRmT+epgW56+5Cw8tB4kMUv6s9lh3eRKbyGs+H/4mQMaYzPTf2OOdokEn+zzgvoD3FqNKk8QqGAXVsqcGdXrT62fSPkR2vROFi68A6se86UxRUk4cajfPyCC4G5wDhD+zNq4jodQ4u4n/m37Lr36n4LIAAsVr02dFi9AiwA81MYs2rm4eDlDNmdMRvEKRHfBwW5DdMNp0jPFZMeARqF/wL4XBfd+EMLBfMzpH5GH6NaW+1vrvMdg+VxDzatk3MXgO3ro3P/DpcC6+Mo4MySJhKJhSR01SGGGp5hPWmrrUgrv3lDnP+HhcI3nt3YqBoVAVTBAQT5iuhTg8nvPtd8ZeYj6w1x6RqGUBrSku7+N1+BaasZvjTk64RoIDlL8brpEcJx3OmY7jLoZsswdtmhfC/G21llXhITOwmvRDDeTTPbyASOa16cF5/A1fZAidJpqju3wYAy9avPR1ya6eNp9K8XYrrtuxlqi+bDKwlfrYdR0RRiKRVTLOH85+ZY7XSmzRpfZBJjaTa81VDcJHpZnZnSQLASGYW9l51ZV/h7eVzTi3Hv6hUsgc/51AqJRTkpbFVLXXszoBL8nBX0u/0jBLT8nH+fJePbrwURT58OY+UieRjd1vs04w0VG5VN2U6MoGZkQzKN/ptz0Q366dxoTGmj7i1NQGHi9GgnquXFYdrCfZBmeb7s0T6yrdlZH5cZuwHFyIJ/kAtGsTg0xH5taAAq44BAk1CPk9KVVbqQzrCUiFdF/6gtlPQ8bHHc1G1W92MXGZ5HEHftyLYs8mbD/9xYRUWkHmlM0zC2ilJlnNgV4bfALpQghxOUoZL7VTqtCHIaQSXm+YUMnpkXybnV+A6xlm2CVy8fn0Xlm2XRa0+zzOa21JWWmixfiPMSCZ7qA4rS93VN3pkpF1s5TonQjisHf7iU9ZGvUPOAKZcR1pbeVf/Ul7OhepGCaId9wOtqo7pJ7yLcBZ0pFkOF28y4zEI/kcUNmutBHaQpBdNM8vjCS6HZRokkeo88TBAjGyG7SR+6vUgTcyK9Imalj0kuxz0wmK+byQU11AiJFk/ya5dNduRClcnU64yGu/ieWSeOos1t3ep+RPIWQ2pyTYVbZltTbsb7NiwSi3AV+8KLWk7LxCnfZUetEM8ThnsSoGH38/nyAwFguJp8FjvlHtcWZuU4hPva0rHfr0UhOOJ/F6vS62FW7KzkmRll2HEc7oUq4fyi5T70Vl7YVIfsPHUCdHesf9Lk7WNVWO75JDkYbMI8TOW8JKVtLY9d6UJRITO8oKo0xS+o99Yy04iniGHAaGj88kEWgwv0OrHdY/nr76DOGNS59hXCGXzTKUvDl9iKpLSWYN1lxIeyywdNpTkhay74w2jFT6NS8qkjo5CxA1yfSYwp6AJIZNKIeEK5PJAW7ORgWgwp0VgzYpqovMrWxbu+DGZ6Lhie1RAqpzm8VUzKJOH3mCzWuTOLsN3VT/dv2eeYe9UjbR8YTBsLz7q60VN1sU51k+um1f8JxD5pPhbhSC8rRaB454tmh6YUWrJI3+GWY0qeWioj/tbkYITOkJaeuGt4JrJvHA+l0Gu7kY7XOaa05alMnRWVCXqFgLIwSY4uF59Ue5SU4QKuc/HamDxbr0x6csCetXGoP7Qn1Bk/J9DsynO/UD6iZ1Hyrz+jit0hDCwi/E9OjgKTbB3ZQKQ/0ZOvevfNHG0NK4Aj3Cp7NpRk07RT1i/S0EL93Ag8GRgKI9CfpajKyK6+Jj/PI1KO5/85VAwz2AwzP8FTBb075IxCXv6T9RVvWT2tUaqxDS92zrGUbWzUYk9mSs82pECH+fkqsDt93VW++4YsR/dHCYcQSYTO/KaBMDj9LSD/J/+z20Kq8XvZUAIHtm9hRPP3ItbuAu2Hm5lkPs92pd7kCxgRs0xOVBnZ13ccdA0aunrwv9SdqElJRC3g+oCu+nXyCgmXUs9yMjTMAIHfxZV+aPKcZeUBWt057Xo85Ks1Ir5gzEHCWqZEhrLZMuF11ziGtFQUds/EESajhagzcKsxamcSZxGth4UII+adPhQkUnx2WyN+4YWR+r3f8MnkyGFuR4zjzxJS8WsQYR5PTyRaD9ixa6Mh741nBHbzfjXHskGDq179xaRNrCIB1z1xRfWfjqw2pHc1zk9xlPpL8sQWAIuETZZhbnmL54rceXVNRvUiKrrqIkeogsl0XXb17ylNb0f4GA9Wd44vffEG8FSZGHEL2fbaTGRcSiCeA8PmA/f6Hz8HCS76fXUHwgwkzSwlI71ekZ7Fapmlk/KC+Hs8hUcw3N2LN5LhkVYyizYFl/uPeVP5lsoJHhhfWvvSWruCUW1ZcJOeuTbrDgywJ/qG07gZJplnTvLcYdNaH0KMYOYMGX+rB4NGPFmQsNaIwlWrfCezxre8zXBrsMT+edVLbLqN1BqB76JH4BvZTqUIMfGwPGEn+EnmTV86fPBaYbFL3DFEhjB45CewkXEAtJxk4/Ms2pPXnaRqdky0HOYdcUcE2zcXq4vaIvW2/v0nHFJH2XXe22ueDmq/18XGtELSq85j9X8q0tcNSSKJIX8FTuJF/Pf8j5PhqG2u+osvsLxYrvvfeVJL+4tkcXcr9JV7v0ERmj/X6fM3NC4j6dS1+9Umr2oPavqiAydTZPLMNRGY23LO9zAVDly7jD+70G5TPPLdhRIl4WxcYjLnM+SNcJ26FOrkrISUtPObIz5Zb3AG612krnpy15RMW+1cQjlnWFI6538qky9axd2oJmHIHP08KyP0ubGO+TQNOYuv2uh17yCIvR8VcStw7o1g0NM60sk+8Tq7YfIBJrtp53GkvzXH7OA0p8/n/u1satf/VJhtR1l8Wa6Gmaug7haSpaCaYQax6ta0mkutlb+eAOSG1aobM81D9A4iS1RRlzBBoVX6tU1S6WE2N9ORY6DfeLRC4l9Rvr5h95XDWB2mR1d4WFudpsgVYwiTwT31ljskD8ZyDOlm5DkGh9N/UB/0AI5Xvb8ZBmai2hQ4BWMqFwYnzxwB26YHSOv9WgY3JXnvoN+2R4rqGVh/LLDMtpFP+SpMGJNWvbIl5SOodbCczW2RKleksPoUeGEzrjtKHVdtZA+kfqO+rVx/iclCqwoopepvJpSTDjT+b9GWylGRF8EDbGlw6eUzmJM95Ovoz+kwLX3c2fTjFeYEsE7vUZm3mqdGJuKh2w9/QGSaqRHs99aScGOdDqkFcACoqdbBoQqqjamhH6Q9ng39JCg3lrGJwd50Qk9ovnqBTr8MME7Ps2wiVfygUmPoUBJJfJWX5Nda0nuncbFkA=="))}const kB=MW(),TW=new Set(u0(kB)),NW=new Set(u0(kB)),VW=bW(kB),DW=RW(kB),DQ=45,kQ=95;function l2(r){return yW(r)}function kW(r){return r.filter(e=>e!=65039)}function c2(r){for(let e of r.split(".")){let t=l2(e);try{for(let n=t.lastIndexOf(kQ)-1;n>=0;n--)if(t[n]!==kQ)throw new Error("underscore only allowed at start");if(t.length>=4&&t.every(n=>n<128)&&t[2]===DQ&&t[3]===DQ)throw new Error("invalid label extension")}catch(n){throw new Error(`Invalid label "${e}": ${n.message}`)}}return r}function LW(r){return c2(WW(r,kW))}function WW(r,e){let t=l2(r).reverse(),n=[];for(;t.length;){let i=PW(t);if(i){n.push(...e(i));continue}let s=t.pop();if(TW.has(s)){n.push(s);continue}if(NW.has(s))continue;let o=VW[s];if(o){n.push(...o);continue}throw new Error(`Disallowed codepoint: 0x${s.toString(16).toUpperCase()}`)}return c2(ZW(String.fromCodePoint(...n)))}function ZW(r){return r.normalize("NFC")}function PW(r,e){var t;let n=DW,i,s,o=[],a=r.length;for(e&&(e.length=0);a;){let A=r[--a];if(n=(t=n.branches.find(l=>l.set.has(A)))===null||t===void 0?void 0:t.node,!n)break;if(n.save)s=A;else if(n.check&&A===s)break;o.push(A),n.fe0f&&(o.push(65039),a>0&&r[a-1]==65039&&a--),n.valid&&(i=o.slice(),n.valid==2&&i.splice(1,1),e&&e.push(...r.slice(a).reverse()),r.length=a)}return i}const JW=new me(o2),u2=new Uint8Array(32);u2.fill(0);function LQ(r){if(r.length===0)throw new Error("invalid ENS name; empty component");return r}function f2(r){const e=Mo(LW(r)),t=[];if(r.length===0)return t;let n=0;for(let i=0;i<e.length;i++)e[i]===46&&(t.push(LQ(e.slice(n,i))),n=i+1);if(n>=e.length)throw new Error("invalid ENS name; empty component");return t.push(LQ(e.slice(n))),t}function bm(r){typeof r!="string"&&JW.throwArgumentError("invalid ENS name; not a string","name",r);let e=u2;const t=f2(r);for(;t.length;)e=kn(Qi([e,kn(t.pop())]));return Ke(e)}function GW(r){return Ke(Qi(f2(r).map(e=>{if(e.length>63)throw new Error("invalid DNS encoded entry; length exceeds 63 bytes");const t=new Uint8Array(e.length+1);return t.set(e,1),t[0]=t.length-1,t})))+"00"}const OW="rlp/5.7.0",co=new me(OW);function WQ(r){const e=[];for(;r;)e.unshift(r&255),r>>=8;return e}function ZQ(r,e,t){let n=0;for(let i=0;i<t;i++)n=n*256+r[e+i];return n}function d2(r){if(Array.isArray(r)){let n=[];if(r.forEach(function(s){n=n.concat(d2(s))}),n.length<=55)return n.unshift(192+n.length),n;const i=WQ(n.length);return i.unshift(247+i.length),i.concat(n)}pU(r)||co.throwArgumentError("RLP object must be BytesLike","object",r);const e=Array.prototype.slice.call(nt(r));if(e.length===1&&e[0]<=127)return e;if(e.length<=55)return e.unshift(128+e.length),e;const t=WQ(e.length);return t.unshift(183+t.length),t.concat(e)}function LB(r){return Ke(d2(r))}function PQ(r,e,t,n){const i=[];for(;t<e+1+n;){const s=h2(r,t);i.push(s.result),t+=s.consumed,t>e+1+n&&co.throwError("child data too short",me.errors.BUFFER_OVERRUN,{})}return{consumed:1+n,result:i}}function h2(r,e){if(r.length===0&&co.throwError("data too short",me.errors.BUFFER_OVERRUN,{}),r[e]>=248){const t=r[e]-247;e+1+t>r.length&&co.throwError("data short segment too short",me.errors.BUFFER_OVERRUN,{});const n=ZQ(r,e+1,t);return e+1+t+n>r.length&&co.throwError("data long segment too short",me.errors.BUFFER_OVERRUN,{}),PQ(r,e,e+1+t,t+n)}else if(r[e]>=192){const t=r[e]-192;return e+1+t>r.length&&co.throwError("data array too short",me.errors.BUFFER_OVERRUN,{}),PQ(r,e,e+1,t)}else if(r[e]>=184){const t=r[e]-183;e+1+t>r.length&&co.throwError("data array too short",me.errors.BUFFER_OVERRUN,{});const n=ZQ(r,e+1,t);e+1+t+n>r.length&&co.throwError("data array too short",me.errors.BUFFER_OVERRUN,{});const i=Ke(r.slice(e+1+t,e+1+t+n));return{consumed:1+t+n,result:i}}else if(r[e]>=128){const t=r[e]-128;e+1+t>r.length&&co.throwError("data too short",me.errors.BUFFER_OVERRUN,{});const n=Ke(r.slice(e+1,e+1+t));return{consumed:1+t,result:n}}return{consumed:1,result:Ke(r[e])}}function mU(r){const e=nt(r),t=h2(e,0);return t.consumed!==e.length&&co.throwArgumentError("invalid rlp data","data",r),t.result}const HW="address/5.7.0",cu=new me(HW);function JQ(r){Mt(r,20)||cu.throwArgumentError("invalid address","address",r),r=r.toLowerCase();const e=r.substring(2).split(""),t=new Uint8Array(40);for(let i=0;i<40;i++)t[i]=e[i].charCodeAt(0);const n=nt(kn(t));for(let i=0;i<40;i+=2)n[i>>1]>>4>=8&&(e[i]=e[i].toUpperCase()),(n[i>>1]&15)>=8&&(e[i+1]=e[i+1].toUpperCase());return"0x"+e.join("")}const zW=9007199254740991;function XW(r){return Math.log10?Math.log10(r):Math.log(r)/Math.LN10}const BU={};for(let r=0;r<10;r++)BU[String(r)]=String(r);for(let r=0;r<26;r++)BU[String.fromCharCode(65+r)]=String(10+r);const GQ=Math.floor(XW(zW));function YW(r){r=r.toUpperCase(),r=r.substring(4)+r.substring(0,2)+"00";let e=r.split("").map(n=>BU[n]).join("");for(;e.length>=GQ;){let n=e.substring(0,GQ);e=parseInt(n,10)%97+e.substring(n.length)}let t=String(98-parseInt(e,10)%97);for(;t.length<2;)t="0"+t;return t}function dr(r){let e=null;if(typeof r!="string"&&cu.throwArgumentError("invalid address","address",r),r.match(/^(0x)?[0-9a-fA-F]{40}$/))r.substring(0,2)!=="0x"&&(r="0x"+r),e=JQ(r),r.match(/([A-F].*[a-f])|([a-f].*[A-F])/)&&e!==r&&cu.throwArgumentError("bad address checksum","address",r);else if(r.match(/^XE[0-9]{2}[0-9A-Za-z]{30,31}$/)){for(r.substring(2,4)!==YW(r)&&cu.throwArgumentError("bad icap checksum","address",r),e=Y3(r.substring(4));e.length<40;)e="0"+e;e=JQ("0x"+e)}else cu.throwArgumentError("invalid address","address",r);return e}function p2(r){let e=null;try{e=dr(r.from)}catch{cu.throwArgumentError("missing from address","transaction",r)}const t=sf(nt(De.from(r.nonce).toHexString()));return dr(yr(kn(LB([e,t])),12))}var KW=globalThis&&globalThis.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(c){try{l(n.next(c))}catch(u){o(u)}}function A(c){try{l(n.throw(c))}catch(u){o(u)}}function l(c){c.done?s(c.value):i(c.value).then(a,A)}l((n=n.apply(r,e||[])).next())})};const on=new me(o2),g2=new Uint8Array(32);g2.fill(0);const jW=De.from(-1),m2=De.from(0),B2=De.from(1),qW=De.from("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");function $W(r){const e=nt(r),t=e.length%32;return t?$r([e,g2.slice(t)]):Ke(e)}const eZ=yn(B2.toHexString(),32),tZ=yn(m2.toHexString(),32),OQ={name:"string",version:"string",chainId:"uint256",verifyingContract:"address",salt:"bytes32"},Ov=["name","version","chainId","verifyingContract","salt"];function HQ(r){return function(e){return typeof e!="string"&&on.throwArgumentError(`invalid domain value for ${JSON.stringify(r)}`,`domain.${r}`,e),e}}const nZ={name:HQ("name"),version:HQ("version"),chainId:function(r){try{return De.from(r).toString()}catch{}return on.throwArgumentError('invalid domain value for "chainId"',"domain.chainId",r)},verifyingContract:function(r){try{return dr(r).toLowerCase()}catch{}return on.throwArgumentError('invalid domain value "verifyingContract"',"domain.verifyingContract",r)},salt:function(r){try{const e=nt(r);if(e.length!==32)throw new Error("bad length");return Ke(e)}catch{}return on.throwArgumentError('invalid domain value "salt"',"domain.salt",r)}};function Hv(r){{const e=r.match(/^(u?)int(\d*)$/);if(e){const t=e[1]==="",n=parseInt(e[2]||"256");(n%8!==0||n>256||e[2]&&e[2]!==String(n))&&on.throwArgumentError("invalid numeric width","type",r);const i=qW.mask(t?n-1:n),s=t?i.add(B2).mul(jW):m2;return function(o){const a=De.from(o);return(a.lt(s)||a.gt(i))&&on.throwArgumentError(`value out-of-bounds for ${r}`,"value",o),yn(a.toTwos(256).toHexString(),32)}}}{const e=r.match(/^bytes(\d+)$/);if(e){const t=parseInt(e[1]);return(t===0||t>32||e[1]!==String(t))&&on.throwArgumentError("invalid bytes width","type",r),function(n){return nt(n).length!==t&&on.throwArgumentError(`invalid length for ${r}`,"value",n),$W(n)}}}switch(r){case"address":return function(e){return yn(dr(e),32)};case"bool":return function(e){return e?eZ:tZ};case"bytes":return function(e){return kn(e)};case"string":return function(e){return lu(e)}}return null}function zQ(r,e){return`${r}(${e.map(({name:t,type:n})=>n+" "+t).join(",")})`}class vi{constructor(e){_e(this,"types",Object.freeze(Ea(e))),_e(this,"_encoderCache",{}),_e(this,"_types",{});const t={},n={},i={};Object.keys(e).forEach(a=>{t[a]={},n[a]=[],i[a]={}});for(const a in e){const A={};e[a].forEach(l=>{A[l.name]&&on.throwArgumentError(`duplicate variable name ${JSON.stringify(l.name)} in ${JSON.stringify(a)}`,"types",e),A[l.name]=!0;const c=l.type.match(/^([^\x5b]*)(\x5b|$)/)[1];c===a&&on.throwArgumentError(`circular type reference to ${JSON.stringify(c)}`,"types",e),!Hv(c)&&(n[c]||on.throwArgumentError(`unknown type ${JSON.stringify(c)}`,"types",e),n[c].push(a),t[a][c]=!0)})}const s=Object.keys(n).filter(a=>n[a].length===0);s.length===0?on.throwArgumentError("missing primary type","types",e):s.length>1&&on.throwArgumentError(`ambiguous primary types or unused types: ${s.map(a=>JSON.stringify(a)).join(", ")}`,"types",e),_e(this,"primaryType",s[0]);function o(a,A){A[a]&&on.throwArgumentError(`circular type reference to ${JSON.stringify(a)}`,"types",e),A[a]=!0,Object.keys(t[a]).forEach(l=>{n[l]&&(o(l,A),Object.keys(A).forEach(c=>{i[c][l]=!0}))}),delete A[a]}o(this.primaryType,{});for(const a in i){const A=Object.keys(i[a]);A.sort(),this._types[a]=zQ(a,e[a])+A.map(l=>zQ(l,e[l])).join("")}}getEncoder(e){let t=this._encoderCache[e];return t||(t=this._encoderCache[e]=this._getEncoder(e)),t}_getEncoder(e){{const i=Hv(e);if(i)return i}const t=e.match(/^(.*)(\x5b(\d*)\x5d)$/);if(t){const i=t[1],s=this.getEncoder(i),o=parseInt(t[3]);return a=>{o>=0&&a.length!==o&&on.throwArgumentError("array length mismatch; expected length ${ arrayLength }","value",a);let A=a.map(s);return this._types[i]&&(A=A.map(kn)),kn($r(A))}}const n=this.types[e];if(n){const i=lu(this._types[e]);return s=>{const o=n.map(({name:a,type:A})=>{const l=this.getEncoder(A)(s[a]);return this._types[A]?kn(l):l});return o.unshift(i),$r(o)}}return on.throwArgumentError(`unknown type: ${e}`,"type",e)}encodeType(e){const t=this._types[e];return t||on.throwArgumentError(`unknown type: ${JSON.stringify(e)}`,"name",e),t}encodeData(e,t){return this.getEncoder(e)(t)}hashStruct(e,t){return kn(this.encodeData(e,t))}encode(e){return this.encodeData(this.primaryType,e)}hash(e){return this.hashStruct(this.primaryType,e)}_visit(e,t,n){if(Hv(e))return n(e,t);const i=e.match(/^(.*)(\x5b(\d*)\x5d)$/);if(i){const o=i[1],a=parseInt(i[3]);return a>=0&&t.length!==a&&on.throwArgumentError("array length mismatch; expected length ${ arrayLength }","value",t),t.map(A=>this._visit(o,A,n))}const s=this.types[e];return s?s.reduce((o,{name:a,type:A})=>(o[a]=this._visit(A,t[a],n),o),{}):on.throwArgumentError(`unknown type: ${e}`,"type",e)}visit(e,t){return this._visit(this.primaryType,e,t)}static from(e){return new vi(e)}static getPrimaryType(e){return vi.from(e).primaryType}static hashStruct(e,t,n){return vi.from(t).hashStruct(e,n)}static hashDomain(e){const t=[];for(const n in e){const i=OQ[n];i||on.throwArgumentError(`invalid typed-data domain key: ${JSON.stringify(n)}`,"domain",e),t.push({name:n,type:i})}return t.sort((n,i)=>Ov.indexOf(n.name)-Ov.indexOf(i.name)),vi.hashStruct("EIP712Domain",{EIP712Domain:t},e)}static encode(e,t,n){return $r(["0x1901",vi.hashDomain(e),vi.from(t).hash(n)])}static hash(e,t,n){return kn(vi.encode(e,t,n))}static resolveNames(e,t,n,i){return KW(this,void 0,void 0,function*(){e=Yn(e);const s={};e.verifyingContract&&!Mt(e.verifyingContract,20)&&(s[e.verifyingContract]="0x");const o=vi.from(t);o.visit(n,(a,A)=>(a==="address"&&!Mt(A,20)&&(s[A]="0x"),A));for(const a in s)s[a]=yield i(a);return e.verifyingContract&&s[e.verifyingContract]&&(e.verifyingContract=s[e.verifyingContract]),n=o.visit(n,(a,A)=>a==="address"&&s[A]?s[A]:A),{domain:e,value:n}})}static getPayload(e,t,n){vi.hashDomain(e);const i={},s=[];Ov.forEach(A=>{const l=e[A];l!=null&&(i[A]=nZ[A](l),s.push({name:A,type:OQ[A]}))});const o=vi.from(t),a=Yn(t);return a.EIP712Domain?on.throwArgumentError("types must not contain EIP712Domain type","types.EIP712Domain",t):a.EIP712Domain=s,o.encode(n),{types:a,domain:i,primaryType:o.primaryType,message:o.visit(n,(A,l)=>{if(A.match(/^bytes(\d*)/))return Ke(nt(l));if(A.match(/^u?int/))return De.from(l).toString();switch(A){case"address":return l.toLowerCase();case"bool":return!!l;case"string":return typeof l!="string"&&on.throwArgumentError("invalid string","value",l),l}return on.throwArgumentError("unsupported type","type",A)})}}}var Zs={},wt={},wp=v2;function v2(r,e){if(!r)throw new Error(e||"Assertion failed")}v2.equal=function(e,t,n){if(e!=t)throw new Error(n||"Assertion failed: "+e+" != "+t)};var Pw={},XQ={get exports(){return Pw},set exports(r){Pw=r}};typeof Object.create=="function"?XQ.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:XQ.exports=function(e,t){if(t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}};var rZ=wp,iZ=Pw;wt.inherits=iZ;function sZ(r,e){return(r.charCodeAt(e)&64512)!==55296||e<0||e+1>=r.length?!1:(r.charCodeAt(e+1)&64512)===56320}function oZ(r,e){if(Array.isArray(r))return r.slice();if(!r)return[];var t=[];if(typeof r=="string")if(e){if(e==="hex")for(r=r.replace(/[^a-z0-9]+/ig,""),r.length%2!==0&&(r="0"+r),i=0;i<r.length;i+=2)t.push(parseInt(r[i]+r[i+1],16))}else for(var n=0,i=0;i<r.length;i++){var s=r.charCodeAt(i);s<128?t[n++]=s:s<2048?(t[n++]=s>>6|192,t[n++]=s&63|128):sZ(r,i)?(s=65536+((s&1023)<<10)+(r.charCodeAt(++i)&1023),t[n++]=s>>18|240,t[n++]=s>>12&63|128,t[n++]=s>>6&63|128,t[n++]=s&63|128):(t[n++]=s>>12|224,t[n++]=s>>6&63|128,t[n++]=s&63|128)}else for(i=0;i<r.length;i++)t[i]=r[i]|0;return t}wt.toArray=oZ;function aZ(r){for(var e="",t=0;t<r.length;t++)e+=C2(r[t].toString(16));return e}wt.toHex=aZ;function y2(r){var e=r>>>24|r>>>8&65280|r<<8&16711680|(r&255)<<24;return e>>>0}wt.htonl=y2;function AZ(r,e){for(var t="",n=0;n<r.length;n++){var i=r[n];e==="little"&&(i=y2(i)),t+=w2(i.toString(16))}return t}wt.toHex32=AZ;function C2(r){return r.length===1?"0"+r:r}wt.zero2=C2;function w2(r){return r.length===7?"0"+r:r.length===6?"00"+r:r.length===5?"000"+r:r.length===4?"0000"+r:r.length===3?"00000"+r:r.length===2?"000000"+r:r.length===1?"0000000"+r:r}wt.zero8=w2;function lZ(r,e,t,n){var i=t-e;rZ(i%4===0);for(var s=new Array(i/4),o=0,a=e;o<s.length;o++,a+=4){var A;n==="big"?A=r[a]<<24|r[a+1]<<16|r[a+2]<<8|r[a+3]:A=r[a+3]<<24|r[a+2]<<16|r[a+1]<<8|r[a],s[o]=A>>>0}return s}wt.join32=lZ;function cZ(r,e){for(var t=new Array(r.length*4),n=0,i=0;n<r.length;n++,i+=4){var s=r[n];e==="big"?(t[i]=s>>>24,t[i+1]=s>>>16&255,t[i+2]=s>>>8&255,t[i+3]=s&255):(t[i+3]=s>>>24,t[i+2]=s>>>16&255,t[i+1]=s>>>8&255,t[i]=s&255)}return t}wt.split32=cZ;function uZ(r,e){return r>>>e|r<<32-e}wt.rotr32=uZ;function fZ(r,e){return r<<e|r>>>32-e}wt.rotl32=fZ;function dZ(r,e){return r+e>>>0}wt.sum32=dZ;function hZ(r,e,t){return r+e+t>>>0}wt.sum32_3=hZ;function pZ(r,e,t,n){return r+e+t+n>>>0}wt.sum32_4=pZ;function gZ(r,e,t,n,i){return r+e+t+n+i>>>0}wt.sum32_5=gZ;function mZ(r,e,t,n){var i=r[e],s=r[e+1],o=n+s>>>0,a=(o<n?1:0)+t+i;r[e]=a>>>0,r[e+1]=o}wt.sum64=mZ;function BZ(r,e,t,n){var i=e+n>>>0,s=(i<e?1:0)+r+t;return s>>>0}wt.sum64_hi=BZ;function vZ(r,e,t,n){var i=e+n;return i>>>0}wt.sum64_lo=vZ;function yZ(r,e,t,n,i,s,o,a){var A=0,l=e;l=l+n>>>0,A+=l<e?1:0,l=l+s>>>0,A+=l<s?1:0,l=l+a>>>0,A+=l<a?1:0;var c=r+t+i+o+A;return c>>>0}wt.sum64_4_hi=yZ;function CZ(r,e,t,n,i,s,o,a){var A=e+n+s+a;return A>>>0}wt.sum64_4_lo=CZ;function wZ(r,e,t,n,i,s,o,a,A,l){var c=0,u=e;u=u+n>>>0,c+=u<e?1:0,u=u+s>>>0,c+=u<s?1:0,u=u+a>>>0,c+=u<a?1:0,u=u+l>>>0,c+=u<l?1:0;var f=r+t+i+o+A+c;return f>>>0}wt.sum64_5_hi=wZ;function FZ(r,e,t,n,i,s,o,a,A,l){var c=e+n+s+a+l;return c>>>0}wt.sum64_5_lo=FZ;function IZ(r,e,t){var n=e<<32-t|r>>>t;return n>>>0}wt.rotr64_hi=IZ;function UZ(r,e,t){var n=r<<32-t|e>>>t;return n>>>0}wt.rotr64_lo=UZ;function xZ(r,e,t){return r>>>t}wt.shr64_hi=xZ;function QZ(r,e,t){var n=r<<32-t|e>>>t;return n>>>0}wt.shr64_lo=QZ;var Tf={},YQ=wt,bZ=wp;function WB(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}Tf.BlockHash=WB;WB.prototype.update=function(e,t){if(e=YQ.toArray(e,t),this.pending?this.pending=this.pending.concat(e):this.pending=e,this.pendingTotal+=e.length,this.pending.length>=this._delta8){e=this.pending;var n=e.length%this._delta8;this.pending=e.slice(e.length-n,e.length),this.pending.length===0&&(this.pending=null),e=YQ.join32(e,0,e.length-n,this.endian);for(var i=0;i<e.length;i+=this._delta32)this._update(e,i,i+this._delta32)}return this};WB.prototype.digest=function(e){return this.update(this._pad()),bZ(this.pending===null),this._digest(e)};WB.prototype._pad=function(){var e=this.pendingTotal,t=this._delta8,n=t-(e+this.padLength)%t,i=new Array(n+this.padLength);i[0]=128;for(var s=1;s<n;s++)i[s]=0;if(e<<=3,this.endian==="big"){for(var o=8;o<this.padLength;o++)i[s++]=0;i[s++]=0,i[s++]=0,i[s++]=0,i[s++]=0,i[s++]=e>>>24&255,i[s++]=e>>>16&255,i[s++]=e>>>8&255,i[s++]=e&255}else for(i[s++]=e&255,i[s++]=e>>>8&255,i[s++]=e>>>16&255,i[s++]=e>>>24&255,i[s++]=0,i[s++]=0,i[s++]=0,i[s++]=0,o=8;o<this.padLength;o++)i[s++]=0;return i};var Nf={},Zo={},EZ=wt,xo=EZ.rotr32;function SZ(r,e,t,n){if(r===0)return F2(e,t,n);if(r===1||r===3)return U2(e,t,n);if(r===2)return I2(e,t,n)}Zo.ft_1=SZ;function F2(r,e,t){return r&e^~r&t}Zo.ch32=F2;function I2(r,e,t){return r&e^r&t^e&t}Zo.maj32=I2;function U2(r,e,t){return r^e^t}Zo.p32=U2;function _Z(r){return xo(r,2)^xo(r,13)^xo(r,22)}Zo.s0_256=_Z;function RZ(r){return xo(r,6)^xo(r,11)^xo(r,25)}Zo.s1_256=RZ;function MZ(r){return xo(r,7)^xo(r,18)^r>>>3}Zo.g0_256=MZ;function TZ(r){return xo(r,17)^xo(r,19)^r>>>10}Zo.g1_256=TZ;var of=wt,NZ=Tf,VZ=Zo,zv=of.rotl32,Xf=of.sum32,DZ=of.sum32_5,kZ=VZ.ft_1,x2=NZ.BlockHash,LZ=[1518500249,1859775393,2400959708,3395469782];function To(){if(!(this instanceof To))return new To;x2.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80)}of.inherits(To,x2);var WZ=To;To.blockSize=512;To.outSize=160;To.hmacStrength=80;To.padLength=64;To.prototype._update=function(e,t){for(var n=this.W,i=0;i<16;i++)n[i]=e[t+i];for(;i<n.length;i++)n[i]=zv(n[i-3]^n[i-8]^n[i-14]^n[i-16],1);var s=this.h[0],o=this.h[1],a=this.h[2],A=this.h[3],l=this.h[4];for(i=0;i<n.length;i++){var c=~~(i/20),u=DZ(zv(s,5),kZ(c,o,a,A),l,n[i],LZ[c]);l=A,A=a,a=zv(o,30),o=s,s=u}this.h[0]=Xf(this.h[0],s),this.h[1]=Xf(this.h[1],o),this.h[2]=Xf(this.h[2],a),this.h[3]=Xf(this.h[3],A),this.h[4]=Xf(this.h[4],l)};To.prototype._digest=function(e){return e==="hex"?of.toHex32(this.h,"big"):of.split32(this.h,"big")};var af=wt,ZZ=Tf,Vf=Zo,PZ=wp,Qs=af.sum32,JZ=af.sum32_4,GZ=af.sum32_5,OZ=Vf.ch32,HZ=Vf.maj32,zZ=Vf.s0_256,XZ=Vf.s1_256,YZ=Vf.g0_256,KZ=Vf.g1_256,Q2=ZZ.BlockHash,jZ=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function No(){if(!(this instanceof No))return new No;Q2.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=jZ,this.W=new Array(64)}af.inherits(No,Q2);var b2=No;No.blockSize=512;No.outSize=256;No.hmacStrength=192;No.padLength=64;No.prototype._update=function(e,t){for(var n=this.W,i=0;i<16;i++)n[i]=e[t+i];for(;i<n.length;i++)n[i]=JZ(KZ(n[i-2]),n[i-7],YZ(n[i-15]),n[i-16]);var s=this.h[0],o=this.h[1],a=this.h[2],A=this.h[3],l=this.h[4],c=this.h[5],u=this.h[6],f=this.h[7];for(PZ(this.k.length===n.length),i=0;i<n.length;i++){var d=GZ(f,XZ(l),OZ(l,c,u),this.k[i],n[i]),p=Qs(zZ(s),HZ(s,o,a));f=u,u=c,c=l,l=Qs(A,d),A=a,a=o,o=s,s=Qs(d,p)}this.h[0]=Qs(this.h[0],s),this.h[1]=Qs(this.h[1],o),this.h[2]=Qs(this.h[2],a),this.h[3]=Qs(this.h[3],A),this.h[4]=Qs(this.h[4],l),this.h[5]=Qs(this.h[5],c),this.h[6]=Qs(this.h[6],u),this.h[7]=Qs(this.h[7],f)};No.prototype._digest=function(e){return e==="hex"?af.toHex32(this.h,"big"):af.split32(this.h,"big")};var Jw=wt,E2=b2;function Sa(){if(!(this instanceof Sa))return new Sa;E2.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}Jw.inherits(Sa,E2);var qZ=Sa;Sa.blockSize=512;Sa.outSize=224;Sa.hmacStrength=192;Sa.padLength=64;Sa.prototype._digest=function(e){return e==="hex"?Jw.toHex32(this.h.slice(0,7),"big"):Jw.split32(this.h.slice(0,7),"big")};var ci=wt,$Z=Tf,eP=wp,Qo=ci.rotr64_hi,bo=ci.rotr64_lo,S2=ci.shr64_hi,_2=ci.shr64_lo,Oa=ci.sum64,Xv=ci.sum64_hi,Yv=ci.sum64_lo,tP=ci.sum64_4_hi,nP=ci.sum64_4_lo,rP=ci.sum64_5_hi,iP=ci.sum64_5_lo,R2=$Z.BlockHash,sP=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function js(){if(!(this instanceof js))return new js;R2.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=sP,this.W=new Array(160)}ci.inherits(js,R2);var M2=js;js.blockSize=1024;js.outSize=512;js.hmacStrength=192;js.padLength=128;js.prototype._prepareBlock=function(e,t){for(var n=this.W,i=0;i<32;i++)n[i]=e[t+i];for(;i<n.length;i+=2){var s=gP(n[i-4],n[i-3]),o=mP(n[i-4],n[i-3]),a=n[i-14],A=n[i-13],l=hP(n[i-30],n[i-29]),c=pP(n[i-30],n[i-29]),u=n[i-32],f=n[i-31];n[i]=tP(s,o,a,A,l,c,u,f),n[i+1]=nP(s,o,a,A,l,c,u,f)}};js.prototype._update=function(e,t){this._prepareBlock(e,t);var n=this.W,i=this.h[0],s=this.h[1],o=this.h[2],a=this.h[3],A=this.h[4],l=this.h[5],c=this.h[6],u=this.h[7],f=this.h[8],d=this.h[9],p=this.h[10],h=this.h[11],m=this.h[12],g=this.h[13],B=this.h[14],v=this.h[15];eP(this.k.length===n.length);for(var w=0;w<n.length;w+=2){var C=B,I=v,E=fP(f,d),U=dP(f,d),S=oP(f,d,p,h,m),V=aP(f,d,p,h,m,g),J=this.k[w],z=this.k[w+1],R=n[w],y=n[w+1],Q=rP(C,I,E,U,S,V,J,z,R,y),_=iP(C,I,E,U,S,V,J,z,R,y);C=cP(i,s),I=uP(i,s),E=AP(i,s,o,a,A),U=lP(i,s,o,a,A,l);var L=Xv(C,I,E,U),T=Yv(C,I,E,U);B=m,v=g,m=p,g=h,p=f,h=d,f=Xv(c,u,Q,_),d=Yv(u,u,Q,_),c=A,u=l,A=o,l=a,o=i,a=s,i=Xv(Q,_,L,T),s=Yv(Q,_,L,T)}Oa(this.h,0,i,s),Oa(this.h,2,o,a),Oa(this.h,4,A,l),Oa(this.h,6,c,u),Oa(this.h,8,f,d),Oa(this.h,10,p,h),Oa(this.h,12,m,g),Oa(this.h,14,B,v)};js.prototype._digest=function(e){return e==="hex"?ci.toHex32(this.h,"big"):ci.split32(this.h,"big")};function oP(r,e,t,n,i){var s=r&t^~r&i;return s<0&&(s+=4294967296),s}function aP(r,e,t,n,i,s){var o=e&n^~e&s;return o<0&&(o+=4294967296),o}function AP(r,e,t,n,i){var s=r&t^r&i^t&i;return s<0&&(s+=4294967296),s}function lP(r,e,t,n,i,s){var o=e&n^e&s^n&s;return o<0&&(o+=4294967296),o}function cP(r,e){var t=Qo(r,e,28),n=Qo(e,r,2),i=Qo(e,r,7),s=t^n^i;return s<0&&(s+=4294967296),s}function uP(r,e){var t=bo(r,e,28),n=bo(e,r,2),i=bo(e,r,7),s=t^n^i;return s<0&&(s+=4294967296),s}function fP(r,e){var t=Qo(r,e,14),n=Qo(r,e,18),i=Qo(e,r,9),s=t^n^i;return s<0&&(s+=4294967296),s}function dP(r,e){var t=bo(r,e,14),n=bo(r,e,18),i=bo(e,r,9),s=t^n^i;return s<0&&(s+=4294967296),s}function hP(r,e){var t=Qo(r,e,1),n=Qo(r,e,8),i=S2(r,e,7),s=t^n^i;return s<0&&(s+=4294967296),s}function pP(r,e){var t=bo(r,e,1),n=bo(r,e,8),i=_2(r,e,7),s=t^n^i;return s<0&&(s+=4294967296),s}function gP(r,e){var t=Qo(r,e,19),n=Qo(e,r,29),i=S2(r,e,6),s=t^n^i;return s<0&&(s+=4294967296),s}function mP(r,e){var t=bo(r,e,19),n=bo(e,r,29),i=_2(r,e,6),s=t^n^i;return s<0&&(s+=4294967296),s}var Gw=wt,T2=M2;function _a(){if(!(this instanceof _a))return new _a;T2.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}Gw.inherits(_a,T2);var BP=_a;_a.blockSize=1024;_a.outSize=384;_a.hmacStrength=192;_a.padLength=128;_a.prototype._digest=function(e){return e==="hex"?Gw.toHex32(this.h.slice(0,12),"big"):Gw.split32(this.h.slice(0,12),"big")};Nf.sha1=WZ;Nf.sha224=qZ;Nf.sha256=b2;Nf.sha384=BP;Nf.sha512=M2;var N2={},Kl=wt,vP=Tf,Gp=Kl.rotl32,KQ=Kl.sum32,Yf=Kl.sum32_3,jQ=Kl.sum32_4,V2=vP.BlockHash;function Vo(){if(!(this instanceof Vo))return new Vo;V2.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}Kl.inherits(Vo,V2);N2.ripemd160=Vo;Vo.blockSize=512;Vo.outSize=160;Vo.hmacStrength=192;Vo.padLength=64;Vo.prototype._update=function(e,t){for(var n=this.h[0],i=this.h[1],s=this.h[2],o=this.h[3],a=this.h[4],A=n,l=i,c=s,u=o,f=a,d=0;d<80;d++){var p=KQ(Gp(jQ(n,qQ(d,i,s,o),e[wP[d]+t],yP(d)),IP[d]),a);n=a,a=o,o=Gp(s,10),s=i,i=p,p=KQ(Gp(jQ(A,qQ(79-d,l,c,u),e[FP[d]+t],CP(d)),UP[d]),f),A=f,f=u,u=Gp(c,10),c=l,l=p}p=Yf(this.h[1],s,u),this.h[1]=Yf(this.h[2],o,f),this.h[2]=Yf(this.h[3],a,A),this.h[3]=Yf(this.h[4],n,l),this.h[4]=Yf(this.h[0],i,c),this.h[0]=p};Vo.prototype._digest=function(e){return e==="hex"?Kl.toHex32(this.h,"little"):Kl.split32(this.h,"little")};function qQ(r,e,t,n){return r<=15?e^t^n:r<=31?e&t|~e&n:r<=47?(e|~t)^n:r<=63?e&n|t&~n:e^(t|~n)}function yP(r){return r<=15?0:r<=31?1518500249:r<=47?1859775393:r<=63?2400959708:2840853838}function CP(r){return r<=15?1352829926:r<=31?1548603684:r<=47?1836072691:r<=63?2053994217:0}var wP=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],FP=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],IP=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],UP=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],xP=wt,QP=wp;function Af(r,e,t){if(!(this instanceof Af))return new Af(r,e,t);this.Hash=r,this.blockSize=r.blockSize/8,this.outSize=r.outSize/8,this.inner=null,this.outer=null,this._init(xP.toArray(e,t))}var bP=Af;Af.prototype._init=function(e){e.length>this.blockSize&&(e=new this.Hash().update(e).digest()),QP(e.length<=this.blockSize);for(var t=e.length;t<this.blockSize;t++)e.push(0);for(t=0;t<e.length;t++)e[t]^=54;for(this.inner=new this.Hash().update(e),t=0;t<e.length;t++)e[t]^=106;this.outer=new this.Hash().update(e)};Af.prototype.update=function(e,t){return this.inner.update(e,t),this};Af.prototype.digest=function(e){return this.outer.update(this.inner.digest()),this.outer.digest(e)};(function(r){var e=r;e.utils=wt,e.common=Tf,e.sha=Nf,e.ripemd=N2,e.hmac=bP,e.sha1=e.sha.sha1,e.sha256=e.sha.sha256,e.sha224=e.sha.sha224,e.sha384=e.sha.sha384,e.sha512=e.sha.sha512,e.ripemd160=e.ripemd.ripemd160})(Zs);function $Q(r){return"0x"+Zs.sha256().update(nt(r)).digest("hex")}const EP="web/5.7.1";var SP=globalThis&&globalThis.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(c){try{l(n.next(c))}catch(u){o(u)}}function A(c){try{l(n.throw(c))}catch(u){o(u)}}function l(c){c.done?s(c.value):i(c.value).then(a,A)}l((n=n.apply(r,e||[])).next())})};function _P(r,e){return SP(this,void 0,void 0,function*(){e==null&&(e={});const t={method:e.method||"GET",headers:e.headers||{},body:e.body||void 0};if(e.skipFetchSetup!==!0&&(t.mode="cors",t.cache="no-cache",t.credentials="same-origin",t.redirect="follow",t.referrer="client"),e.fetchOptions!=null){const o=e.fetchOptions;o.mode&&(t.mode=o.mode),o.cache&&(t.cache=o.cache),o.credentials&&(t.credentials=o.credentials),o.redirect&&(t.redirect=o.redirect),o.referrer&&(t.referrer=o.referrer)}const n=yield fetch(r,t),i=yield n.arrayBuffer(),s={};return n.headers.forEach?n.headers.forEach((o,a)=>{s[a.toLowerCase()]=o}):n.headers.keys().forEach(o=>{s[o.toLowerCase()]=n.headers.get(o)}),{headers:s,statusCode:n.status,statusMessage:n.statusText,body:nt(new Uint8Array(i))}})}var RP=globalThis&&globalThis.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(c){try{l(n.next(c))}catch(u){o(u)}}function A(c){try{l(n.throw(c))}catch(u){o(u)}}function l(c){c.done?s(c.value):i(c.value).then(a,A)}l((n=n.apply(r,e||[])).next())})};const Vs=new me(EP);function eb(r){return new Promise(e=>{setTimeout(e,r)})}function Ha(r,e){if(r==null)return null;if(typeof r=="string")return r;if(pU(r)){if(e&&(e.split("/")[0]==="text"||e.split(";")[0].trim()==="application/json"))try{return Cp(r)}catch{}return Ke(r)}return r}function MP(r){return Mo(r.replace(/%([0-9a-f][0-9a-f])/gi,(e,t)=>String.fromCharCode(parseInt(t,16))))}function TP(r,e,t){const n=typeof r=="object"&&r.throttleLimit!=null?r.throttleLimit:12;Vs.assertArgument(n>0&&n%1===0,"invalid connection throttle limit","connection.throttleLimit",n);const i=typeof r=="object"?r.throttleCallback:null,s=typeof r=="object"&&typeof r.throttleSlotInterval=="number"?r.throttleSlotInterval:100;Vs.assertArgument(s>0&&s%1===0,"invalid connection throttle slot interval","connection.throttleSlotInterval",s);const o=typeof r=="object"?!!r.errorPassThrough:!1,a={};let A=null;const l={method:"GET"};let c=!1,u=2*60*1e3;if(typeof r=="string")A=r;else if(typeof r=="object"){if((r==null||r.url==null)&&Vs.throwArgumentError("missing URL","connection.url",r),A=r.url,typeof r.timeout=="number"&&r.timeout>0&&(u=r.timeout),r.headers)for(const g in r.headers)a[g.toLowerCase()]={key:g,value:String(r.headers[g])},["if-none-match","if-modified-since"].indexOf(g.toLowerCase())>=0&&(c=!0);if(l.allowGzip=!!r.allowGzip,r.user!=null&&r.password!=null){A.substring(0,6)!=="https:"&&r.allowInsecureAuthentication!==!0&&Vs.throwError("basic authentication requires a secure https url",me.errors.INVALID_ARGUMENT,{argument:"url",url:A,user:r.user,password:"[REDACTED]"});const g=r.user+":"+r.password;a.authorization={key:"Authorization",value:"Basic "+e2(Mo(g))}}r.skipFetchSetup!=null&&(l.skipFetchSetup=!!r.skipFetchSetup),r.fetchOptions!=null&&(l.fetchOptions=Yn(r.fetchOptions))}const f=new RegExp("^data:([^;:]*)?(;base64)?,(.*)$","i"),d=A?A.match(f):null;if(d)try{const g={statusCode:200,statusMessage:"OK",headers:{"content-type":d[1]||"text/plain"},body:d[2]?$M(d[3]):MP(d[3])};let B=g.body;return t&&(B=t(g.body,g)),Promise.resolve(B)}catch(g){Vs.throwError("processing response error",me.errors.SERVER_ERROR,{body:Ha(d[1],d[2]),error:g,requestBody:null,requestMethod:"GET",url:A})}e&&(l.method="POST",l.body=e,a["content-type"]==null&&(a["content-type"]={key:"Content-Type",value:"application/octet-stream"}),a["content-length"]==null&&(a["content-length"]={key:"Content-Length",value:String(e.length)}));const p={};Object.keys(a).forEach(g=>{const B=a[g];p[B.key]=B.value}),l.headers=p;const h=function(){let g=null;return{promise:new Promise(function(w,C){u&&(g=setTimeout(()=>{g!=null&&(g=null,C(Vs.makeError("timeout",me.errors.TIMEOUT,{requestBody:Ha(l.body,p["content-type"]),requestMethod:l.method,timeout:u,url:A})))},u))}),cancel:function(){g!=null&&(clearTimeout(g),g=null)}}}(),m=function(){return RP(this,void 0,void 0,function*(){for(let g=0;g<n;g++){let B=null;try{if(B=yield _P(A,l),g<n){if(B.statusCode===301||B.statusCode===302){const w=B.headers.location||"";if(l.method==="GET"&&w.match(/^https:/)){A=B.headers.location;continue}}else if(B.statusCode===429){let w=!0;if(i&&(w=yield i(g,A)),w){let C=0;const I=B.headers["retry-after"];typeof I=="string"&&I.match(/^[1-9][0-9]*$/)?C=parseInt(I)*1e3:C=s*parseInt(String(Math.random()*Math.pow(2,g))),yield eb(C);continue}}}}catch(w){B=w.response,B==null&&(h.cancel(),Vs.throwError("missing response",me.errors.SERVER_ERROR,{requestBody:Ha(l.body,p["content-type"]),requestMethod:l.method,serverError:w,url:A}))}let v=B.body;if(c&&B.statusCode===304?v=null:!o&&(B.statusCode<200||B.statusCode>=300)&&(h.cancel(),Vs.throwError("bad response",me.errors.SERVER_ERROR,{status:B.statusCode,headers:B.headers,body:Ha(v,B.headers?B.headers["content-type"]:null),requestBody:Ha(l.body,p["content-type"]),requestMethod:l.method,url:A})),t)try{const w=yield t(v,B);return h.cancel(),w}catch(w){if(w.throttleRetry&&g<n){let C=!0;if(i&&(C=yield i(g,A)),C){const I=s*parseInt(String(Math.random()*Math.pow(2,g)));yield eb(I);continue}}h.cancel(),Vs.throwError("processing response error",me.errors.SERVER_ERROR,{body:Ha(v,B.headers?B.headers["content-type"]:null),error:w,requestBody:Ha(l.body,p["content-type"]),requestMethod:l.method,url:A})}return h.cancel(),v}return Vs.throwError("failed response",me.errors.SERVER_ERROR,{requestBody:Ha(l.body,p["content-type"]),requestMethod:l.method,url:A})})}();return Promise.race([h.promise,m])}function vU(r,e,t){let n=(s,o)=>{let a=null;if(s!=null)try{a=JSON.parse(Cp(s))}catch(A){Vs.throwError("invalid JSON",me.errors.SERVER_ERROR,{body:s,error:A})}return t&&(a=t(a,o)),a},i=null;if(e!=null){i=Mo(e);const s=typeof r=="string"?{url:r}:Yn(r);s.headers?Object.keys(s.headers).filter(a=>a.toLowerCase()==="content-type").length!==0||(s.headers=Yn(s.headers),s.headers["content-type"]="application/json"):s.headers={"content-type":"application/json"},r=s}return TP(r,i,n)}function kd(r,e){return e||(e={}),e=Yn(e),e.floor==null&&(e.floor=0),e.ceiling==null&&(e.ceiling=1e4),e.interval==null&&(e.interval=250),new Promise(function(t,n){let i=null,s=!1;const o=()=>s?!1:(s=!0,i&&clearTimeout(i),!0);e.timeout&&(i=setTimeout(()=>{o()&&n(new Error("timeout"))},e.timeout));const a=e.retryLimit;let A=0;function l(){return r().then(function(c){if(c!==void 0)o()&&t(c);else if(e.oncePoll)e.oncePoll.once("poll",l);else if(e.onceBlock)e.onceBlock.once("block",l);else if(!s){if(A++,A>a){o()&&n(new Error("retry limit reached"));return}let u=e.interval*parseInt(String(Math.random()*Math.pow(2,A)));u<e.floor&&(u=e.floor),u>e.ceiling&&(u=e.ceiling),setTimeout(l,u)}return null},function(c){o()&&n(c)})}l()})}var f0="qpzry9x8gf2tvdw0s3jn54khce6mua7l",Ow={};for(var Op=0;Op<f0.length;Op++){var Kv=f0.charAt(Op);if(Ow[Kv]!==void 0)throw new TypeError(Kv+" is ambiguous");Ow[Kv]=Op}function Nu(r){var e=r>>25;return(r&33554431)<<5^-(e>>0&1)&996825010^-(e>>1&1)&642813549^-(e>>2&1)&513874426^-(e>>3&1)&1027748829^-(e>>4&1)&705979059}function D2(r){for(var e=1,t=0;t<r.length;++t){var n=r.charCodeAt(t);if(n<33||n>126)return"Invalid prefix ("+r+")";e=Nu(e)^n>>5}for(e=Nu(e),t=0;t<r.length;++t){var i=r.charCodeAt(t);e=Nu(e)^i&31}return e}function NP(r,e,t){if(t=t||90,r.length+7+e.length>t)throw new TypeError("Exceeds length limit");r=r.toLowerCase();var n=D2(r);if(typeof n=="string")throw new Error(n);for(var i=r+"1",s=0;s<e.length;++s){var o=e[s];if(o>>5)throw new Error("Non 5-bit word");n=Nu(n)^o,i+=f0.charAt(o)}for(s=0;s<6;++s)n=Nu(n);for(n^=1,s=0;s<6;++s){var a=n>>(5-s)*5&31;i+=f0.charAt(a)}return i}function k2(r,e){if(e=e||90,r.length<8)return r+" too short";if(r.length>e)return"Exceeds length limit";var t=r.toLowerCase(),n=r.toUpperCase();if(r!==t&&r!==n)return"Mixed-case string "+r;r=t;var i=r.lastIndexOf("1");if(i===-1)return"No separator character for "+r;if(i===0)return"Missing prefix for "+r;var s=r.slice(0,i),o=r.slice(i+1);if(o.length<6)return"Data too short";var a=D2(s);if(typeof a=="string")return a;for(var A=[],l=0;l<o.length;++l){var c=o.charAt(l),u=Ow[c];if(u===void 0)return"Unknown character "+c;a=Nu(a)^u,!(l+6>=o.length)&&A.push(u)}return a!==1?"Invalid checksum for "+r:{prefix:s,words:A}}function VP(){var r=k2.apply(null,arguments);if(typeof r=="object")return r}function DP(r){var e=k2.apply(null,arguments);if(typeof e=="object")return e;throw new Error(e)}function ZB(r,e,t,n){for(var i=0,s=0,o=(1<<t)-1,a=[],A=0;A<r.length;++A)for(i=i<<e|r[A],s+=e;s>=t;)s-=t,a.push(i>>s&o);if(n)s>0&&a.push(i<<t-s&o);else{if(s>=e)return"Excess padding";if(i<<t-s&o)return"Non-zero padding"}return a}function kP(r){var e=ZB(r,8,5,!0);if(Array.isArray(e))return e}function LP(r){var e=ZB(r,8,5,!0);if(Array.isArray(e))return e;throw new Error(e)}function WP(r){var e=ZB(r,5,8,!1);if(Array.isArray(e))return e}function ZP(r){var e=ZB(r,5,8,!1);if(Array.isArray(e))return e;throw new Error(e)}var tb={decodeUnsafe:VP,decode:DP,encode:NP,toWordsUnsafe:kP,toWords:LP,fromWordsUnsafe:WP,fromWords:ZP};const PB="providers/5.7.2";function Df(r,e,t){return t={path:e,exports:{},require:function(n,i){return PP(n,i??t.path)}},r(t,t.exports),t.exports}function PP(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}var yU=L2;function L2(r,e){if(!r)throw new Error(e||"Assertion failed")}L2.equal=function(e,t,n){if(e!=t)throw new Error(n||"Assertion failed: "+e+" != "+t)};var Hs=Df(function(r,e){var t=e;function n(o,a){if(Array.isArray(o))return o.slice();if(!o)return[];var A=[];if(typeof o!="string"){for(var l=0;l<o.length;l++)A[l]=o[l]|0;return A}if(a==="hex"){o=o.replace(/[^a-z0-9]+/ig,""),o.length%2!==0&&(o="0"+o);for(var l=0;l<o.length;l+=2)A.push(parseInt(o[l]+o[l+1],16))}else for(var l=0;l<o.length;l++){var c=o.charCodeAt(l),u=c>>8,f=c&255;u?A.push(u,f):A.push(f)}return A}t.toArray=n;function i(o){return o.length===1?"0"+o:o}t.zero2=i;function s(o){for(var a="",A=0;A<o.length;A++)a+=i(o[A].toString(16));return a}t.toHex=s,t.encode=function(a,A){return A==="hex"?s(a):a}}),Di=Df(function(r,e){var t=e;t.assert=yU,t.toArray=Hs.toArray,t.zero2=Hs.zero2,t.toHex=Hs.toHex,t.encode=Hs.encode;function n(A,l,c){var u=new Array(Math.max(A.bitLength(),c)+1);u.fill(0);for(var f=1<<l+1,d=A.clone(),p=0;p<u.length;p++){var h,m=d.andln(f-1);d.isOdd()?(m>(f>>1)-1?h=(f>>1)-m:h=m,d.isubn(h)):h=0,u[p]=h,d.iushrn(1)}return u}t.getNAF=n;function i(A,l){var c=[[],[]];A=A.clone(),l=l.clone();for(var u=0,f=0,d;A.cmpn(-u)>0||l.cmpn(-f)>0;){var p=A.andln(3)+u&3,h=l.andln(3)+f&3;p===3&&(p=-1),h===3&&(h=-1);var m;p&1?(d=A.andln(7)+u&7,(d===3||d===5)&&h===2?m=-p:m=p):m=0,c[0].push(m);var g;h&1?(d=l.andln(7)+f&7,(d===3||d===5)&&p===2?g=-h:g=h):g=0,c[1].push(g),2*u===m+1&&(u=1-u),2*f===g+1&&(f=1-f),A.iushrn(1),l.iushrn(1)}return c}t.getJSF=i;function s(A,l,c){var u="_"+l;A.prototype[l]=function(){return this[u]!==void 0?this[u]:this[u]=c.call(this)}}t.cachedProperty=s;function o(A){return typeof A=="string"?t.toArray(A,"hex"):A}t.parseBytes=o;function a(A){return new at(A,"hex","le")}t.intFromLE=a}),d0=Di.getNAF,JP=Di.getJSF,h0=Di.assert;function nl(r,e){this.type=r,this.p=new at(e.p,16),this.red=e.prime?at.red(e.prime):at.mont(this.p),this.zero=new at(0).toRed(this.red),this.one=new at(1).toRed(this.red),this.two=new at(2).toRed(this.red),this.n=e.n&&new at(e.n,16),this.g=e.g&&this.pointFromJSON(e.g,e.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var t=this.n&&this.p.div(this.n);!t||t.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}var lc=nl;nl.prototype.point=function(){throw new Error("Not implemented")};nl.prototype.validate=function(){throw new Error("Not implemented")};nl.prototype._fixedNafMul=function(e,t){h0(e.precomputed);var n=e._getDoubles(),i=d0(t,1,this._bitLength),s=(1<<n.step+1)-(n.step%2===0?2:1);s/=3;var o=[],a,A;for(a=0;a<i.length;a+=n.step){A=0;for(var l=a+n.step-1;l>=a;l--)A=(A<<1)+i[l];o.push(A)}for(var c=this.jpoint(null,null,null),u=this.jpoint(null,null,null),f=s;f>0;f--){for(a=0;a<o.length;a++)A=o[a],A===f?u=u.mixedAdd(n.points[a]):A===-f&&(u=u.mixedAdd(n.points[a].neg()));c=c.add(u)}return c.toP()};nl.prototype._wnafMul=function(e,t){var n=4,i=e._getNAFPoints(n);n=i.wnd;for(var s=i.points,o=d0(t,n,this._bitLength),a=this.jpoint(null,null,null),A=o.length-1;A>=0;A--){for(var l=0;A>=0&&o[A]===0;A--)l++;if(A>=0&&l++,a=a.dblp(l),A<0)break;var c=o[A];h0(c!==0),e.type==="affine"?c>0?a=a.mixedAdd(s[c-1>>1]):a=a.mixedAdd(s[-c-1>>1].neg()):c>0?a=a.add(s[c-1>>1]):a=a.add(s[-c-1>>1].neg())}return e.type==="affine"?a.toP():a};nl.prototype._wnafMulAdd=function(e,t,n,i,s){var o=this._wnafT1,a=this._wnafT2,A=this._wnafT3,l=0,c,u,f;for(c=0;c<i;c++){f=t[c];var d=f._getNAFPoints(e);o[c]=d.wnd,a[c]=d.points}for(c=i-1;c>=1;c-=2){var p=c-1,h=c;if(o[p]!==1||o[h]!==1){A[p]=d0(n[p],o[p],this._bitLength),A[h]=d0(n[h],o[h],this._bitLength),l=Math.max(A[p].length,l),l=Math.max(A[h].length,l);continue}var m=[t[p],null,null,t[h]];t[p].y.cmp(t[h].y)===0?(m[1]=t[p].add(t[h]),m[2]=t[p].toJ().mixedAdd(t[h].neg())):t[p].y.cmp(t[h].y.redNeg())===0?(m[1]=t[p].toJ().mixedAdd(t[h]),m[2]=t[p].add(t[h].neg())):(m[1]=t[p].toJ().mixedAdd(t[h]),m[2]=t[p].toJ().mixedAdd(t[h].neg()));var g=[-3,-1,-5,-7,0,7,5,1,3],B=JP(n[p],n[h]);for(l=Math.max(B[0].length,l),A[p]=new Array(l),A[h]=new Array(l),u=0;u<l;u++){var v=B[0][u]|0,w=B[1][u]|0;A[p][u]=g[(v+1)*3+(w+1)],A[h][u]=0,a[p]=m}}var C=this.jpoint(null,null,null),I=this._wnafT4;for(c=l;c>=0;c--){for(var E=0;c>=0;){var U=!0;for(u=0;u<i;u++)I[u]=A[u][c]|0,I[u]!==0&&(U=!1);if(!U)break;E++,c--}if(c>=0&&E++,C=C.dblp(E),c<0)break;for(u=0;u<i;u++){var S=I[u];S!==0&&(S>0?f=a[u][S-1>>1]:S<0&&(f=a[u][-S-1>>1].neg()),f.type==="affine"?C=C.mixedAdd(f):C=C.add(f))}}for(c=0;c<i;c++)a[c]=null;return s?C:C.toP()};function Bs(r,e){this.curve=r,this.type=e,this.precomputed=null}nl.BasePoint=Bs;Bs.prototype.eq=function(){throw new Error("Not implemented")};Bs.prototype.validate=function(){return this.curve.validate(this)};nl.prototype.decodePoint=function(e,t){e=Di.toArray(e,t);var n=this.p.byteLength();if((e[0]===4||e[0]===6||e[0]===7)&&e.length-1===2*n){e[0]===6?h0(e[e.length-1]%2===0):e[0]===7&&h0(e[e.length-1]%2===1);var i=this.point(e.slice(1,1+n),e.slice(1+n,1+2*n));return i}else if((e[0]===2||e[0]===3)&&e.length-1===n)return this.pointFromX(e.slice(1,1+n),e[0]===3);throw new Error("Unknown point format")};Bs.prototype.encodeCompressed=function(e){return this.encode(e,!0)};Bs.prototype._encode=function(e){var t=this.curve.p.byteLength(),n=this.getX().toArray("be",t);return e?[this.getY().isEven()?2:3].concat(n):[4].concat(n,this.getY().toArray("be",t))};Bs.prototype.encode=function(e,t){return Di.encode(this._encode(t),e)};Bs.prototype.precompute=function(e){if(this.precomputed)return this;var t={doubles:null,naf:null,beta:null};return t.naf=this._getNAFPoints(8),t.doubles=this._getDoubles(4,e),t.beta=this._getBeta(),this.precomputed=t,this};Bs.prototype._hasDoubles=function(e){if(!this.precomputed)return!1;var t=this.precomputed.doubles;return t?t.points.length>=Math.ceil((e.bitLength()+1)/t.step):!1};Bs.prototype._getDoubles=function(e,t){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var n=[this],i=this,s=0;s<t;s+=e){for(var o=0;o<e;o++)i=i.dbl();n.push(i)}return{step:e,points:n}};Bs.prototype._getNAFPoints=function(e){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var t=[this],n=(1<<e)-1,i=n===1?null:this.dbl(),s=1;s<n;s++)t[s]=t[s-1].add(i);return{wnd:e,points:t}};Bs.prototype._getBeta=function(){return null};Bs.prototype.dblp=function(e){for(var t=this,n=0;n<e;n++)t=t.dbl();return t};var CU=Df(function(r){typeof Object.create=="function"?r.exports=function(t,n){n&&(t.super_=n,t.prototype=Object.create(n.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:r.exports=function(t,n){if(n){t.super_=n;var i=function(){};i.prototype=n.prototype,t.prototype=new i,t.prototype.constructor=t}}}),GP=Di.assert;function vs(r){lc.call(this,"short",r),this.a=new at(r.a,16).toRed(this.red),this.b=new at(r.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=this.a.fromRed().cmpn(0)===0,this.threeA=this.a.fromRed().sub(this.p).cmpn(-3)===0,this.endo=this._getEndomorphism(r),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}CU(vs,lc);var OP=vs;vs.prototype._getEndomorphism=function(e){if(!(!this.zeroA||!this.g||!this.n||this.p.modn(3)!==1)){var t,n;if(e.beta)t=new at(e.beta,16).toRed(this.red);else{var i=this._getEndoRoots(this.p);t=i[0].cmp(i[1])<0?i[0]:i[1],t=t.toRed(this.red)}if(e.lambda)n=new at(e.lambda,16);else{var s=this._getEndoRoots(this.n);this.g.mul(s[0]).x.cmp(this.g.x.redMul(t))===0?n=s[0]:(n=s[1],GP(this.g.mul(n).x.cmp(this.g.x.redMul(t))===0))}var o;return e.basis?o=e.basis.map(function(a){return{a:new at(a.a,16),b:new at(a.b,16)}}):o=this._getEndoBasis(n),{beta:t,lambda:n,basis:o}}};vs.prototype._getEndoRoots=function(e){var t=e===this.p?this.red:at.mont(e),n=new at(2).toRed(t).redInvm(),i=n.redNeg(),s=new at(3).toRed(t).redNeg().redSqrt().redMul(n),o=i.redAdd(s).fromRed(),a=i.redSub(s).fromRed();return[o,a]};vs.prototype._getEndoBasis=function(e){for(var t=this.n.ushrn(Math.floor(this.n.bitLength()/2)),n=e,i=this.n.clone(),s=new at(1),o=new at(0),a=new at(0),A=new at(1),l,c,u,f,d,p,h,m=0,g,B;n.cmpn(0)!==0;){var v=i.div(n);g=i.sub(v.mul(n)),B=a.sub(v.mul(s));var w=A.sub(v.mul(o));if(!u&&g.cmp(t)<0)l=h.neg(),c=s,u=g.neg(),f=B;else if(u&&++m===2)break;h=g,i=n,n=g,a=s,s=B,A=o,o=w}d=g.neg(),p=B;var C=u.sqr().add(f.sqr()),I=d.sqr().add(p.sqr());return I.cmp(C)>=0&&(d=l,p=c),u.negative&&(u=u.neg(),f=f.neg()),d.negative&&(d=d.neg(),p=p.neg()),[{a:u,b:f},{a:d,b:p}]};vs.prototype._endoSplit=function(e){var t=this.endo.basis,n=t[0],i=t[1],s=i.b.mul(e).divRound(this.n),o=n.b.neg().mul(e).divRound(this.n),a=s.mul(n.a),A=o.mul(i.a),l=s.mul(n.b),c=o.mul(i.b),u=e.sub(a).sub(A),f=l.add(c).neg();return{k1:u,k2:f}};vs.prototype.pointFromX=function(e,t){e=new at(e,16),e.red||(e=e.toRed(this.red));var n=e.redSqr().redMul(e).redIAdd(e.redMul(this.a)).redIAdd(this.b),i=n.redSqrt();if(i.redSqr().redSub(n).cmp(this.zero)!==0)throw new Error("invalid point");var s=i.fromRed().isOdd();return(t&&!s||!t&&s)&&(i=i.redNeg()),this.point(e,i)};vs.prototype.validate=function(e){if(e.inf)return!0;var t=e.x,n=e.y,i=this.a.redMul(t),s=t.redSqr().redMul(t).redIAdd(i).redIAdd(this.b);return n.redSqr().redISub(s).cmpn(0)===0};vs.prototype._endoWnafMulAdd=function(e,t,n){for(var i=this._endoWnafT1,s=this._endoWnafT2,o=0;o<e.length;o++){var a=this._endoSplit(t[o]),A=e[o],l=A._getBeta();a.k1.negative&&(a.k1.ineg(),A=A.neg(!0)),a.k2.negative&&(a.k2.ineg(),l=l.neg(!0)),i[o*2]=A,i[o*2+1]=l,s[o*2]=a.k1,s[o*2+1]=a.k2}for(var c=this._wnafMulAdd(1,i,s,o*2,n),u=0;u<o*2;u++)i[u]=null,s[u]=null;return c};function ar(r,e,t,n){lc.BasePoint.call(this,r,"affine"),e===null&&t===null?(this.x=null,this.y=null,this.inf=!0):(this.x=new at(e,16),this.y=new at(t,16),n&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}CU(ar,lc.BasePoint);vs.prototype.point=function(e,t,n){return new ar(this,e,t,n)};vs.prototype.pointFromJSON=function(e,t){return ar.fromJSON(this,e,t)};ar.prototype._getBeta=function(){if(this.curve.endo){var e=this.precomputed;if(e&&e.beta)return e.beta;var t=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(e){var n=this.curve,i=function(s){return n.point(s.x.redMul(n.endo.beta),s.y)};e.beta=t,t.precomputed={beta:null,naf:e.naf&&{wnd:e.naf.wnd,points:e.naf.points.map(i)},doubles:e.doubles&&{step:e.doubles.step,points:e.doubles.points.map(i)}}}return t}};ar.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]};ar.fromJSON=function(e,t,n){typeof t=="string"&&(t=JSON.parse(t));var i=e.point(t[0],t[1],n);if(!t[2])return i;function s(a){return e.point(a[0],a[1],n)}var o=t[2];return i.precomputed={beta:null,doubles:o.doubles&&{step:o.doubles.step,points:[i].concat(o.doubles.points.map(s))},naf:o.naf&&{wnd:o.naf.wnd,points:[i].concat(o.naf.points.map(s))}},i};ar.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"};ar.prototype.isInfinity=function(){return this.inf};ar.prototype.add=function(e){if(this.inf)return e;if(e.inf)return this;if(this.eq(e))return this.dbl();if(this.neg().eq(e))return this.curve.point(null,null);if(this.x.cmp(e.x)===0)return this.curve.point(null,null);var t=this.y.redSub(e.y);t.cmpn(0)!==0&&(t=t.redMul(this.x.redSub(e.x).redInvm()));var n=t.redSqr().redISub(this.x).redISub(e.x),i=t.redMul(this.x.redSub(n)).redISub(this.y);return this.curve.point(n,i)};ar.prototype.dbl=function(){if(this.inf)return this;var e=this.y.redAdd(this.y);if(e.cmpn(0)===0)return this.curve.point(null,null);var t=this.curve.a,n=this.x.redSqr(),i=e.redInvm(),s=n.redAdd(n).redIAdd(n).redIAdd(t).redMul(i),o=s.redSqr().redISub(this.x.redAdd(this.x)),a=s.redMul(this.x.redSub(o)).redISub(this.y);return this.curve.point(o,a)};ar.prototype.getX=function(){return this.x.fromRed()};ar.prototype.getY=function(){return this.y.fromRed()};ar.prototype.mul=function(e){return e=new at(e,16),this.isInfinity()?this:this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve.endo?this.curve._endoWnafMulAdd([this],[e]):this.curve._wnafMul(this,e)};ar.prototype.mulAdd=function(e,t,n){var i=[this,t],s=[e,n];return this.curve.endo?this.curve._endoWnafMulAdd(i,s):this.curve._wnafMulAdd(1,i,s,2)};ar.prototype.jmulAdd=function(e,t,n){var i=[this,t],s=[e,n];return this.curve.endo?this.curve._endoWnafMulAdd(i,s,!0):this.curve._wnafMulAdd(1,i,s,2,!0)};ar.prototype.eq=function(e){return this===e||this.inf===e.inf&&(this.inf||this.x.cmp(e.x)===0&&this.y.cmp(e.y)===0)};ar.prototype.neg=function(e){if(this.inf)return this;var t=this.curve.point(this.x,this.y.redNeg());if(e&&this.precomputed){var n=this.precomputed,i=function(s){return s.neg()};t.precomputed={naf:n.naf&&{wnd:n.naf.wnd,points:n.naf.points.map(i)},doubles:n.doubles&&{step:n.doubles.step,points:n.doubles.points.map(i)}}}return t};ar.prototype.toJ=function(){if(this.inf)return this.curve.jpoint(null,null,null);var e=this.curve.jpoint(this.x,this.y,this.curve.one);return e};function pr(r,e,t,n){lc.BasePoint.call(this,r,"jacobian"),e===null&&t===null&&n===null?(this.x=this.curve.one,this.y=this.curve.one,this.z=new at(0)):(this.x=new at(e,16),this.y=new at(t,16),this.z=new at(n,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}CU(pr,lc.BasePoint);vs.prototype.jpoint=function(e,t,n){return new pr(this,e,t,n)};pr.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var e=this.z.redInvm(),t=e.redSqr(),n=this.x.redMul(t),i=this.y.redMul(t).redMul(e);return this.curve.point(n,i)};pr.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)};pr.prototype.add=function(e){if(this.isInfinity())return e;if(e.isInfinity())return this;var t=e.z.redSqr(),n=this.z.redSqr(),i=this.x.redMul(t),s=e.x.redMul(n),o=this.y.redMul(t.redMul(e.z)),a=e.y.redMul(n.redMul(this.z)),A=i.redSub(s),l=o.redSub(a);if(A.cmpn(0)===0)return l.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var c=A.redSqr(),u=c.redMul(A),f=i.redMul(c),d=l.redSqr().redIAdd(u).redISub(f).redISub(f),p=l.redMul(f.redISub(d)).redISub(o.redMul(u)),h=this.z.redMul(e.z).redMul(A);return this.curve.jpoint(d,p,h)};pr.prototype.mixedAdd=function(e){if(this.isInfinity())return e.toJ();if(e.isInfinity())return this;var t=this.z.redSqr(),n=this.x,i=e.x.redMul(t),s=this.y,o=e.y.redMul(t).redMul(this.z),a=n.redSub(i),A=s.redSub(o);if(a.cmpn(0)===0)return A.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var l=a.redSqr(),c=l.redMul(a),u=n.redMul(l),f=A.redSqr().redIAdd(c).redISub(u).redISub(u),d=A.redMul(u.redISub(f)).redISub(s.redMul(c)),p=this.z.redMul(a);return this.curve.jpoint(f,d,p)};pr.prototype.dblp=function(e){if(e===0)return this;if(this.isInfinity())return this;if(!e)return this.dbl();var t;if(this.curve.zeroA||this.curve.threeA){var n=this;for(t=0;t<e;t++)n=n.dbl();return n}var i=this.curve.a,s=this.curve.tinv,o=this.x,a=this.y,A=this.z,l=A.redSqr().redSqr(),c=a.redAdd(a);for(t=0;t<e;t++){var u=o.redSqr(),f=c.redSqr(),d=f.redSqr(),p=u.redAdd(u).redIAdd(u).redIAdd(i.redMul(l)),h=o.redMul(f),m=p.redSqr().redISub(h.redAdd(h)),g=h.redISub(m),B=p.redMul(g);B=B.redIAdd(B).redISub(d);var v=c.redMul(A);t+1<e&&(l=l.redMul(d)),o=m,A=v,c=B}return this.curve.jpoint(o,c.redMul(s),A)};pr.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()};pr.prototype._zeroDbl=function(){var e,t,n;if(this.zOne){var i=this.x.redSqr(),s=this.y.redSqr(),o=s.redSqr(),a=this.x.redAdd(s).redSqr().redISub(i).redISub(o);a=a.redIAdd(a);var A=i.redAdd(i).redIAdd(i),l=A.redSqr().redISub(a).redISub(a),c=o.redIAdd(o);c=c.redIAdd(c),c=c.redIAdd(c),e=l,t=A.redMul(a.redISub(l)).redISub(c),n=this.y.redAdd(this.y)}else{var u=this.x.redSqr(),f=this.y.redSqr(),d=f.redSqr(),p=this.x.redAdd(f).redSqr().redISub(u).redISub(d);p=p.redIAdd(p);var h=u.redAdd(u).redIAdd(u),m=h.redSqr(),g=d.redIAdd(d);g=g.redIAdd(g),g=g.redIAdd(g),e=m.redISub(p).redISub(p),t=h.redMul(p.redISub(e)).redISub(g),n=this.y.redMul(this.z),n=n.redIAdd(n)}return this.curve.jpoint(e,t,n)};pr.prototype._threeDbl=function(){var e,t,n;if(this.zOne){var i=this.x.redSqr(),s=this.y.redSqr(),o=s.redSqr(),a=this.x.redAdd(s).redSqr().redISub(i).redISub(o);a=a.redIAdd(a);var A=i.redAdd(i).redIAdd(i).redIAdd(this.curve.a),l=A.redSqr().redISub(a).redISub(a);e=l;var c=o.redIAdd(o);c=c.redIAdd(c),c=c.redIAdd(c),t=A.redMul(a.redISub(l)).redISub(c),n=this.y.redAdd(this.y)}else{var u=this.z.redSqr(),f=this.y.redSqr(),d=this.x.redMul(f),p=this.x.redSub(u).redMul(this.x.redAdd(u));p=p.redAdd(p).redIAdd(p);var h=d.redIAdd(d);h=h.redIAdd(h);var m=h.redAdd(h);e=p.redSqr().redISub(m),n=this.y.redAdd(this.z).redSqr().redISub(f).redISub(u);var g=f.redSqr();g=g.redIAdd(g),g=g.redIAdd(g),g=g.redIAdd(g),t=p.redMul(h.redISub(e)).redISub(g)}return this.curve.jpoint(e,t,n)};pr.prototype._dbl=function(){var e=this.curve.a,t=this.x,n=this.y,i=this.z,s=i.redSqr().redSqr(),o=t.redSqr(),a=n.redSqr(),A=o.redAdd(o).redIAdd(o).redIAdd(e.redMul(s)),l=t.redAdd(t);l=l.redIAdd(l);var c=l.redMul(a),u=A.redSqr().redISub(c.redAdd(c)),f=c.redISub(u),d=a.redSqr();d=d.redIAdd(d),d=d.redIAdd(d),d=d.redIAdd(d);var p=A.redMul(f).redISub(d),h=n.redAdd(n).redMul(i);return this.curve.jpoint(u,p,h)};pr.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var e=this.x.redSqr(),t=this.y.redSqr(),n=this.z.redSqr(),i=t.redSqr(),s=e.redAdd(e).redIAdd(e),o=s.redSqr(),a=this.x.redAdd(t).redSqr().redISub(e).redISub(i);a=a.redIAdd(a),a=a.redAdd(a).redIAdd(a),a=a.redISub(o);var A=a.redSqr(),l=i.redIAdd(i);l=l.redIAdd(l),l=l.redIAdd(l),l=l.redIAdd(l);var c=s.redIAdd(a).redSqr().redISub(o).redISub(A).redISub(l),u=t.redMul(c);u=u.redIAdd(u),u=u.redIAdd(u);var f=this.x.redMul(A).redISub(u);f=f.redIAdd(f),f=f.redIAdd(f);var d=this.y.redMul(c.redMul(l.redISub(c)).redISub(a.redMul(A)));d=d.redIAdd(d),d=d.redIAdd(d),d=d.redIAdd(d);var p=this.z.redAdd(a).redSqr().redISub(n).redISub(A);return this.curve.jpoint(f,d,p)};pr.prototype.mul=function(e,t){return e=new at(e,t),this.curve._wnafMul(this,e)};pr.prototype.eq=function(e){if(e.type==="affine")return this.eq(e.toJ());if(this===e)return!0;var t=this.z.redSqr(),n=e.z.redSqr();if(this.x.redMul(n).redISub(e.x.redMul(t)).cmpn(0)!==0)return!1;var i=t.redMul(this.z),s=n.redMul(e.z);return this.y.redMul(s).redISub(e.y.redMul(i)).cmpn(0)===0};pr.prototype.eqXToP=function(e){var t=this.z.redSqr(),n=e.toRed(this.curve.red).redMul(t);if(this.x.cmp(n)===0)return!0;for(var i=e.clone(),s=this.curve.redN.redMul(t);;){if(i.iadd(this.curve.n),i.cmp(this.curve.p)>=0)return!1;if(n.redIAdd(s),this.x.cmp(n)===0)return!0}};pr.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"};pr.prototype.isInfinity=function(){return this.z.cmpn(0)===0};var Em=Df(function(r,e){var t=e;t.base=lc,t.short=OP,t.mont=null,t.edwards=null}),Sm=Df(function(r,e){var t=e,n=Di.assert;function i(a){a.type==="short"?this.curve=new Em.short(a):a.type==="edwards"?this.curve=new Em.edwards(a):this.curve=new Em.mont(a),this.g=this.curve.g,this.n=this.curve.n,this.hash=a.hash,n(this.g.validate(),"Invalid curve"),n(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}t.PresetCurve=i;function s(a,A){Object.defineProperty(t,a,{configurable:!0,enumerable:!0,get:function(){var l=new i(A);return Object.defineProperty(t,a,{configurable:!0,enumerable:!0,value:l}),l}})}s("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:Zs.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),s("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:Zs.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),s("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:Zs.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),s("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:Zs.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),s("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:Zs.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),s("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:Zs.sha256,gRed:!1,g:["9"]}),s("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:Zs.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});var o;try{o=null.crash()}catch{o=void 0}s("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:Zs.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",o]})});function OA(r){if(!(this instanceof OA))return new OA(r);this.hash=r.hash,this.predResist=!!r.predResist,this.outLen=this.hash.outSize,this.minEntropy=r.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var e=Hs.toArray(r.entropy,r.entropyEnc||"hex"),t=Hs.toArray(r.nonce,r.nonceEnc||"hex"),n=Hs.toArray(r.pers,r.persEnc||"hex");yU(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(e,t,n)}var W2=OA;OA.prototype._init=function(e,t,n){var i=e.concat(t).concat(n);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var s=0;s<this.V.length;s++)this.K[s]=0,this.V[s]=1;this._update(i),this._reseed=1,this.reseedInterval=281474976710656};OA.prototype._hmac=function(){return new Zs.hmac(this.hash,this.K)};OA.prototype._update=function(e){var t=this._hmac().update(this.V).update([0]);e&&(t=t.update(e)),this.K=t.digest(),this.V=this._hmac().update(this.V).digest(),e&&(this.K=this._hmac().update(this.V).update([1]).update(e).digest(),this.V=this._hmac().update(this.V).digest())};OA.prototype.reseed=function(e,t,n,i){typeof t!="string"&&(i=n,n=t,t=null),e=Hs.toArray(e,t),n=Hs.toArray(n,i),yU(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(e.concat(n||[])),this._reseed=1};OA.prototype.generate=function(e,t,n,i){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");typeof t!="string"&&(i=n,n=t,t=null),n&&(n=Hs.toArray(n,i||"hex"),this._update(n));for(var s=[];s.length<e;)this.V=this._hmac().update(this.V).digest(),s=s.concat(this.V);var o=s.slice(0,e);return this._update(n),this._reseed++,Hs.encode(o,t)};var Hw=Di.assert;function br(r,e){this.ec=r,this.priv=null,this.pub=null,e.priv&&this._importPrivate(e.priv,e.privEnc),e.pub&&this._importPublic(e.pub,e.pubEnc)}var wU=br;br.fromPublic=function(e,t,n){return t instanceof br?t:new br(e,{pub:t,pubEnc:n})};br.fromPrivate=function(e,t,n){return t instanceof br?t:new br(e,{priv:t,privEnc:n})};br.prototype.validate=function(){var e=this.getPublic();return e.isInfinity()?{result:!1,reason:"Invalid public key"}:e.validate()?e.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}};br.prototype.getPublic=function(e,t){return typeof e=="string"&&(t=e,e=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),t?this.pub.encode(t,e):this.pub};br.prototype.getPrivate=function(e){return e==="hex"?this.priv.toString(16,2):this.priv};br.prototype._importPrivate=function(e,t){this.priv=new at(e,t||16),this.priv=this.priv.umod(this.ec.curve.n)};br.prototype._importPublic=function(e,t){if(e.x||e.y){this.ec.curve.type==="mont"?Hw(e.x,"Need x coordinate"):(this.ec.curve.type==="short"||this.ec.curve.type==="edwards")&&Hw(e.x&&e.y,"Need both x and y coordinate"),this.pub=this.ec.curve.point(e.x,e.y);return}this.pub=this.ec.curve.decodePoint(e,t)};br.prototype.derive=function(e){return e.validate()||Hw(e.validate(),"public point not validated"),e.mul(this.priv).getX()};br.prototype.sign=function(e,t,n){return this.ec.sign(e,this,t,n)};br.prototype.verify=function(e,t){return this.ec.verify(e,t,this)};br.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"};var HP=Di.assert;function JB(r,e){if(r instanceof JB)return r;this._importDER(r,e)||(HP(r.r&&r.s,"Signature without r or s"),this.r=new at(r.r,16),this.s=new at(r.s,16),r.recoveryParam===void 0?this.recoveryParam=null:this.recoveryParam=r.recoveryParam)}var GB=JB;function zP(){this.place=0}function jv(r,e){var t=r[e.place++];if(!(t&128))return t;var n=t&15;if(n===0||n>4)return!1;for(var i=0,s=0,o=e.place;s<n;s++,o++)i<<=8,i|=r[o],i>>>=0;return i<=127?!1:(e.place=o,i)}function nb(r){for(var e=0,t=r.length-1;!r[e]&&!(r[e+1]&128)&&e<t;)e++;return e===0?r:r.slice(e)}JB.prototype._importDER=function(e,t){e=Di.toArray(e,t);var n=new zP;if(e[n.place++]!==48)return!1;var i=jv(e,n);if(i===!1||i+n.place!==e.length||e[n.place++]!==2)return!1;var s=jv(e,n);if(s===!1)return!1;var o=e.slice(n.place,s+n.place);if(n.place+=s,e[n.place++]!==2)return!1;var a=jv(e,n);if(a===!1||e.length!==a+n.place)return!1;var A=e.slice(n.place,a+n.place);if(o[0]===0)if(o[1]&128)o=o.slice(1);else return!1;if(A[0]===0)if(A[1]&128)A=A.slice(1);else return!1;return this.r=new at(o),this.s=new at(A),this.recoveryParam=null,!0};function qv(r,e){if(e<128){r.push(e);return}var t=1+(Math.log(e)/Math.LN2>>>3);for(r.push(t|128);--t;)r.push(e>>>(t<<3)&255);r.push(e)}JB.prototype.toDER=function(e){var t=this.r.toArray(),n=this.s.toArray();for(t[0]&128&&(t=[0].concat(t)),n[0]&128&&(n=[0].concat(n)),t=nb(t),n=nb(n);!n[0]&&!(n[1]&128);)n=n.slice(1);var i=[2];qv(i,t.length),i=i.concat(t),i.push(2),qv(i,n.length);var s=i.concat(n),o=[48];return qv(o,s.length),o=o.concat(s),Di.encode(o,e)};var XP=function(){throw new Error("unsupported")},Z2=Di.assert;function fs(r){if(!(this instanceof fs))return new fs(r);typeof r=="string"&&(Z2(Object.prototype.hasOwnProperty.call(Sm,r),"Unknown curve "+r),r=Sm[r]),r instanceof Sm.PresetCurve&&(r={curve:r}),this.curve=r.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=r.curve.g,this.g.precompute(r.curve.n.bitLength()+1),this.hash=r.hash||r.curve.hash}var YP=fs;fs.prototype.keyPair=function(e){return new wU(this,e)};fs.prototype.keyFromPrivate=function(e,t){return wU.fromPrivate(this,e,t)};fs.prototype.keyFromPublic=function(e,t){return wU.fromPublic(this,e,t)};fs.prototype.genKeyPair=function(e){e||(e={});for(var t=new W2({hash:this.hash,pers:e.pers,persEnc:e.persEnc||"utf8",entropy:e.entropy||XP(this.hash.hmacStrength),entropyEnc:e.entropy&&e.entropyEnc||"utf8",nonce:this.n.toArray()}),n=this.n.byteLength(),i=this.n.sub(new at(2));;){var s=new at(t.generate(n));if(!(s.cmp(i)>0))return s.iaddn(1),this.keyFromPrivate(s)}};fs.prototype._truncateToN=function(e,t){var n=e.byteLength()*8-this.n.bitLength();return n>0&&(e=e.ushrn(n)),!t&&e.cmp(this.n)>=0?e.sub(this.n):e};fs.prototype.sign=function(e,t,n,i){typeof n=="object"&&(i=n,n=null),i||(i={}),t=this.keyFromPrivate(t,n),e=this._truncateToN(new at(e,16));for(var s=this.n.byteLength(),o=t.getPrivate().toArray("be",s),a=e.toArray("be",s),A=new W2({hash:this.hash,entropy:o,nonce:a,pers:i.pers,persEnc:i.persEnc||"utf8"}),l=this.n.sub(new at(1)),c=0;;c++){var u=i.k?i.k(c):new at(A.generate(this.n.byteLength()));if(u=this._truncateToN(u,!0),!(u.cmpn(1)<=0||u.cmp(l)>=0)){var f=this.g.mul(u);if(!f.isInfinity()){var d=f.getX(),p=d.umod(this.n);if(p.cmpn(0)!==0){var h=u.invm(this.n).mul(p.mul(t.getPrivate()).iadd(e));if(h=h.umod(this.n),h.cmpn(0)!==0){var m=(f.getY().isOdd()?1:0)|(d.cmp(p)!==0?2:0);return i.canonical&&h.cmp(this.nh)>0&&(h=this.n.sub(h),m^=1),new GB({r:p,s:h,recoveryParam:m})}}}}}};fs.prototype.verify=function(e,t,n,i){e=this._truncateToN(new at(e,16)),n=this.keyFromPublic(n,i),t=new GB(t,"hex");var s=t.r,o=t.s;if(s.cmpn(1)<0||s.cmp(this.n)>=0||o.cmpn(1)<0||o.cmp(this.n)>=0)return!1;var a=o.invm(this.n),A=a.mul(e).umod(this.n),l=a.mul(s).umod(this.n),c;return this.curve._maxwellTrick?(c=this.g.jmulAdd(A,n.getPublic(),l),c.isInfinity()?!1:c.eqXToP(s)):(c=this.g.mulAdd(A,n.getPublic(),l),c.isInfinity()?!1:c.getX().umod(this.n).cmp(s)===0)};fs.prototype.recoverPubKey=function(r,e,t,n){Z2((3&t)===t,"The recovery param is more than two bits"),e=new GB(e,n);var i=this.n,s=new at(r),o=e.r,a=e.s,A=t&1,l=t>>1;if(o.cmp(this.curve.p.umod(this.curve.n))>=0&&l)throw new Error("Unable to find sencond key candinate");l?o=this.curve.pointFromX(o.add(this.curve.n),A):o=this.curve.pointFromX(o,A);var c=e.r.invm(i),u=i.sub(s).mul(c).umod(i),f=a.mul(c).umod(i);return this.g.mulAdd(u,o,f)};fs.prototype.getKeyRecoveryParam=function(r,e,t,n){if(e=new GB(e,n),e.recoveryParam!==null)return e.recoveryParam;for(var i=0;i<4;i++){var s;try{s=this.recoverPubKey(r,e,i)}catch{continue}if(s.eq(t))return i}throw new Error("Unable to find valid recovery factor")};var KP=Df(function(r,e){var t=e;t.version="6.5.4",t.utils=Di,t.rand=function(){throw new Error("unsupported")},t.curve=Em,t.curves=Sm,t.ec=YP,t.eddsa=null}),jP=KP.ec;const qP="signing-key/5.7.0",zw=new me(qP);let $v=null;function fo(){return $v||($v=new jP("secp256k1")),$v}class $P{constructor(e){_e(this,"curve","secp256k1"),_e(this,"privateKey",Ke(e)),Yl(this.privateKey)!==32&&zw.throwArgumentError("invalid private key","privateKey","[[ REDACTED ]]");const t=fo().keyFromPrivate(nt(this.privateKey));_e(this,"publicKey","0x"+t.getPublic(!1,"hex")),_e(this,"compressedPublicKey","0x"+t.getPublic(!0,"hex")),_e(this,"_isSigningKey",!0)}_addPoint(e){const t=fo().keyFromPublic(nt(this.publicKey)),n=fo().keyFromPublic(nt(e));return"0x"+t.pub.add(n.pub).encodeCompressed("hex")}signDigest(e){const t=fo().keyFromPrivate(nt(this.privateKey)),n=nt(e);n.length!==32&&zw.throwArgumentError("bad digest length","digest",e);const i=t.sign(n,{canonical:!0});return VB({recoveryParam:i.recoveryParam,r:yn("0x"+i.r.toString(16),32),s:yn("0x"+i.s.toString(16),32)})}computeSharedSecret(e){const t=fo().keyFromPrivate(nt(this.privateKey)),n=fo().keyFromPublic(nt(P2(e)));return yn("0x"+t.derive(n.getPublic()).toString(16),32)}static isSigningKey(e){return!!(e&&e._isSigningKey)}}function eJ(r,e){const t=VB(e),n={r:nt(t.r),s:nt(t.s)};return"0x"+fo().recoverPubKey(nt(r),n,t.recoveryParam).encode("hex",!1)}function P2(r,e){const t=nt(r);if(t.length===32){const n=new $P(t);return e?"0x"+fo().keyFromPrivate(t).getPublic(!0,"hex"):n.publicKey}else{if(t.length===33)return e?Ke(t):"0x"+fo().keyFromPublic(t).getPublic(!1,"hex");if(t.length===65)return e?"0x"+fo().keyFromPublic(t).getPublic(!0,"hex"):Ke(t)}return zw.throwArgumentError("invalid public or private key","key","[REDACTED]")}const tJ="transactions/5.7.0",Za=new me(tJ);var rb;(function(r){r[r.legacy=0]="legacy",r[r.eip2930=1]="eip2930",r[r.eip1559=2]="eip1559"})(rb||(rb={}));function FU(r){return r==="0x"?null:dr(r)}function wr(r){return r==="0x"?n2:De.from(r)}function nJ(r){const e=P2(r);return dr(yr(kn(yr(e,1)),12))}function J2(r,e){return nJ(eJ(nt(r),e))}function Fi(r,e){const t=sf(De.from(r).toHexString());return t.length>32&&Za.throwArgumentError("invalid length for "+e,"transaction:"+e,r),t}function ey(r,e){return{address:dr(r),storageKeys:(e||[]).map((t,n)=>(Yl(t)!==32&&Za.throwArgumentError("invalid access list storageKey",`accessList[${r}:${n}]`,t),t.toLowerCase()))}}function kf(r){if(Array.isArray(r))return r.map((t,n)=>Array.isArray(t)?(t.length>2&&Za.throwArgumentError("access list expected to be [ address, storageKeys[] ]",`value[${n}]`,t),ey(t[0],t[1])):ey(t.address,t.storageKeys));const e=Object.keys(r).map(t=>{const n=r[t].reduce((i,s)=>(i[s]=!0,i),{});return ey(t,Object.keys(n).sort())});return e.sort((t,n)=>t.address.localeCompare(n.address)),e}function G2(r){return kf(r).map(e=>[e.address,e.storageKeys])}function rJ(r,e){if(r.gasPrice!=null){const n=De.from(r.gasPrice),i=De.from(r.maxFeePerGas||0);n.eq(i)||Za.throwArgumentError("mismatch EIP-1559 gasPrice != maxFeePerGas","tx",{gasPrice:n,maxFeePerGas:i})}const t=[Fi(r.chainId||0,"chainId"),Fi(r.nonce||0,"nonce"),Fi(r.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),Fi(r.maxFeePerGas||0,"maxFeePerGas"),Fi(r.gasLimit||0,"gasLimit"),r.to!=null?dr(r.to):"0x",Fi(r.value||0,"value"),r.data||"0x",G2(r.accessList||[])];if(e){const n=VB(e);t.push(Fi(n.recoveryParam,"recoveryParam")),t.push(sf(n.r)),t.push(sf(n.s))}return $r(["0x02",LB(t)])}function iJ(r,e){const t=[Fi(r.chainId||0,"chainId"),Fi(r.nonce||0,"nonce"),Fi(r.gasPrice||0,"gasPrice"),Fi(r.gasLimit||0,"gasLimit"),r.to!=null?dr(r.to):"0x",Fi(r.value||0,"value"),r.data||"0x",G2(r.accessList||[])];if(e){const n=VB(e);t.push(Fi(n.recoveryParam,"recoveryParam")),t.push(sf(n.r)),t.push(sf(n.s))}return $r(["0x01",LB(t)])}function O2(r,e,t){try{const n=wr(e[0]).toNumber();if(n!==0&&n!==1)throw new Error("bad recid");r.v=n}catch{Za.throwArgumentError("invalid v for transaction type: 1","v",e[0])}r.r=yn(e[1],32),r.s=yn(e[2],32);try{const n=kn(t(r));r.from=J2(n,{r:r.r,s:r.s,recoveryParam:r.v})}catch{}}function sJ(r){const e=mU(r.slice(1));e.length!==9&&e.length!==12&&Za.throwArgumentError("invalid component count for transaction type: 2","payload",Ke(r));const t=wr(e[2]),n=wr(e[3]),i={type:2,chainId:wr(e[0]).toNumber(),nonce:wr(e[1]).toNumber(),maxPriorityFeePerGas:t,maxFeePerGas:n,gasPrice:null,gasLimit:wr(e[4]),to:FU(e[5]),value:wr(e[6]),data:e[7],accessList:kf(e[8])};return e.length===9||(i.hash=kn(r),O2(i,e.slice(9),rJ)),i}function oJ(r){const e=mU(r.slice(1));e.length!==8&&e.length!==11&&Za.throwArgumentError("invalid component count for transaction type: 1","payload",Ke(r));const t={type:1,chainId:wr(e[0]).toNumber(),nonce:wr(e[1]).toNumber(),gasPrice:wr(e[2]),gasLimit:wr(e[3]),to:FU(e[4]),value:wr(e[5]),data:e[6],accessList:kf(e[7])};return e.length===8||(t.hash=kn(r),O2(t,e.slice(8),iJ)),t}function aJ(r){const e=mU(r);e.length!==9&&e.length!==6&&Za.throwArgumentError("invalid raw transaction","rawTransaction",r);const t={nonce:wr(e[0]).toNumber(),gasPrice:wr(e[1]),gasLimit:wr(e[2]),to:FU(e[3]),value:wr(e[4]),data:e[5],chainId:0};if(e.length===6)return t;try{t.v=De.from(e[6]).toNumber()}catch{return t}if(t.r=yn(e[7],32),t.s=yn(e[8],32),De.from(t.r).isZero()&&De.from(t.s).isZero())t.chainId=t.v,t.v=0;else{t.chainId=Math.floor((t.v-35)/2),t.chainId<0&&(t.chainId=0);let n=t.v-27;const i=e.slice(0,6);t.chainId!==0&&(i.push(Ke(t.chainId)),i.push("0x"),i.push("0x"),n-=t.chainId*2+8);const s=kn(LB(i));try{t.from=J2(s,{r:Ke(t.r),s:Ke(t.s),recoveryParam:n})}catch{}t.hash=kn(r)}return t.type=null,t}function AJ(r){const e=nt(r);if(e[0]>127)return aJ(e);switch(e[0]){case 1:return oJ(e);case 2:return sJ(e)}return Za.throwError(`unsupported transaction type: ${e[0]}`,me.errors.UNSUPPORTED_OPERATION,{operation:"parseTransaction",transactionType:e[0]})}const Kf=new me(PB);let ib=class Xe{constructor(){this.formats=this.getDefaultFormats()}getDefaultFormats(){const e={},t=this.address.bind(this),n=this.bigNumber.bind(this),i=this.blockTag.bind(this),s=this.data.bind(this),o=this.hash.bind(this),a=this.hex.bind(this),A=this.number.bind(this),l=this.type.bind(this),c=u=>this.data(u,!0);return e.transaction={hash:o,type:l,accessList:Xe.allowNull(this.accessList.bind(this),null),blockHash:Xe.allowNull(o,null),blockNumber:Xe.allowNull(A,null),transactionIndex:Xe.allowNull(A,null),confirmations:Xe.allowNull(A,null),from:t,gasPrice:Xe.allowNull(n),maxPriorityFeePerGas:Xe.allowNull(n),maxFeePerGas:Xe.allowNull(n),gasLimit:n,to:Xe.allowNull(t,null),value:n,nonce:A,data:s,r:Xe.allowNull(this.uint256),s:Xe.allowNull(this.uint256),v:Xe.allowNull(A),creates:Xe.allowNull(t,null),raw:Xe.allowNull(s)},e.transactionRequest={from:Xe.allowNull(t),nonce:Xe.allowNull(A),gasLimit:Xe.allowNull(n),gasPrice:Xe.allowNull(n),maxPriorityFeePerGas:Xe.allowNull(n),maxFeePerGas:Xe.allowNull(n),to:Xe.allowNull(t),value:Xe.allowNull(n),data:Xe.allowNull(c),type:Xe.allowNull(A),accessList:Xe.allowNull(this.accessList.bind(this),null)},e.receiptLog={transactionIndex:A,blockNumber:A,transactionHash:o,address:t,topics:Xe.arrayOf(o),data:s,logIndex:A,blockHash:o},e.receipt={to:Xe.allowNull(this.address,null),from:Xe.allowNull(this.address,null),contractAddress:Xe.allowNull(t,null),transactionIndex:A,root:Xe.allowNull(a),gasUsed:n,logsBloom:Xe.allowNull(s),blockHash:o,transactionHash:o,logs:Xe.arrayOf(this.receiptLog.bind(this)),blockNumber:A,confirmations:Xe.allowNull(A,null),cumulativeGasUsed:n,effectiveGasPrice:Xe.allowNull(n),status:Xe.allowNull(A),type:l},e.block={hash:Xe.allowNull(o),parentHash:o,number:A,timestamp:A,nonce:Xe.allowNull(a),difficulty:this.difficulty.bind(this),gasLimit:n,gasUsed:n,miner:Xe.allowNull(t),extraData:s,transactions:Xe.allowNull(Xe.arrayOf(o)),baseFeePerGas:Xe.allowNull(n)},e.blockWithTransactions=Yn(e.block),e.blockWithTransactions.transactions=Xe.allowNull(Xe.arrayOf(this.transactionResponse.bind(this))),e.filter={fromBlock:Xe.allowNull(i,void 0),toBlock:Xe.allowNull(i,void 0),blockHash:Xe.allowNull(o,void 0),address:Xe.allowNull(t,void 0),topics:Xe.allowNull(this.topics.bind(this),void 0)},e.filterLog={blockNumber:Xe.allowNull(A),blockHash:Xe.allowNull(o),transactionIndex:A,removed:Xe.allowNull(this.boolean.bind(this)),address:t,data:Xe.allowFalsish(s,"0x"),topics:Xe.arrayOf(o),transactionHash:o,logIndex:A},e}accessList(e){return kf(e||[])}number(e){return e==="0x"?0:De.from(e).toNumber()}type(e){return e==="0x"||e==null?0:De.from(e).toNumber()}bigNumber(e){return De.from(e)}boolean(e){if(typeof e=="boolean")return e;if(typeof e=="string"){if(e=e.toLowerCase(),e==="true")return!0;if(e==="false")return!1}throw new Error("invalid boolean - "+e)}hex(e,t){return typeof e=="string"&&(!t&&e.substring(0,2)!=="0x"&&(e="0x"+e),Mt(e))?e.toLowerCase():Kf.throwArgumentError("invalid hash","value",e)}data(e,t){const n=this.hex(e,t);if(n.length%2!==0)throw new Error("invalid data; odd-length - "+e);return n}address(e){return dr(e)}callAddress(e){if(!Mt(e,32))return null;const t=dr(yr(e,12));return t===AW?null:t}contractAddress(e){return p2(e)}blockTag(e){if(e==null)return"latest";if(e==="earliest")return"0x0";switch(e){case"earliest":return"0x0";case"latest":case"pending":case"safe":case"finalized":return e}if(typeof e=="number"||Mt(e))return gU(e);throw new Error("invalid blockTag")}hash(e,t){const n=this.hex(e,t);return Yl(n)!==32?Kf.throwArgumentError("invalid hash","value",e):n}difficulty(e){if(e==null)return null;const t=De.from(e);try{return t.toNumber()}catch{}return null}uint256(e){if(!Mt(e))throw new Error("invalid uint256");return yn(e,32)}_block(e,t){e.author!=null&&e.miner==null&&(e.miner=e.author);const n=e._difficulty!=null?e._difficulty:e.difficulty,i=Xe.check(t,e);return i._difficulty=n==null?null:De.from(n),i}block(e){return this._block(e,this.formats.block)}blockWithTransactions(e){return this._block(e,this.formats.blockWithTransactions)}transactionRequest(e){return Xe.check(this.formats.transactionRequest,e)}transactionResponse(e){e.gas!=null&&e.gasLimit==null&&(e.gasLimit=e.gas),e.to&&De.from(e.to).isZero()&&(e.to="0x0000000000000000000000000000000000000000"),e.input!=null&&e.data==null&&(e.data=e.input),e.to==null&&e.creates==null&&(e.creates=this.contractAddress(e)),(e.type===1||e.type===2)&&e.accessList==null&&(e.accessList=[]);const t=Xe.check(this.formats.transaction,e);if(e.chainId!=null){let n=e.chainId;Mt(n)&&(n=De.from(n).toNumber()),t.chainId=n}else{let n=e.networkId;n==null&&t.v==null&&(n=e.chainId),Mt(n)&&(n=De.from(n).toNumber()),typeof n!="number"&&t.v!=null&&(n=(t.v-35)/2,n<0&&(n=0),n=parseInt(n)),typeof n!="number"&&(n=0),t.chainId=n}return t.blockHash&&t.blockHash.replace(/0/g,"")==="x"&&(t.blockHash=null),t}transaction(e){return AJ(e)}receiptLog(e){return Xe.check(this.formats.receiptLog,e)}receipt(e){const t=Xe.check(this.formats.receipt,e);if(t.root!=null)if(t.root.length<=4){const n=De.from(t.root).toNumber();n===0||n===1?(t.status!=null&&t.status!==n&&Kf.throwArgumentError("alt-root-status/status mismatch","value",{root:t.root,status:t.status}),t.status=n,delete t.root):Kf.throwArgumentError("invalid alt-root-status","value.root",t.root)}else t.root.length!==66&&Kf.throwArgumentError("invalid root hash","value.root",t.root);return t.status!=null&&(t.byzantium=!0),t}topics(e){return Array.isArray(e)?e.map(t=>this.topics(t)):e!=null?this.hash(e,!0):null}filter(e){return Xe.check(this.formats.filter,e)}filterLog(e){return Xe.check(this.formats.filterLog,e)}static check(e,t){const n={};for(const i in e)try{const s=e[i](t[i]);s!==void 0&&(n[i]=s)}catch(s){throw s.checkKey=i,s.checkValue=t[i],s}return n}static allowNull(e,t){return function(n){return n==null?t:e(n)}}static allowFalsish(e,t){return function(n){return n?e(n):t}}static arrayOf(e){return function(t){if(!Array.isArray(t))throw new Error("not an array");const n=[];return t.forEach(function(i){n.push(e(i))}),n}}};var it=globalThis&&globalThis.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(c){try{l(n.next(c))}catch(u){o(u)}}function A(c){try{l(n.throw(c))}catch(u){o(u)}}function l(c){c.done?s(c.value):i(c.value).then(a,A)}l((n=n.apply(r,e||[])).next())})};const dt=new me(PB),lJ=10;function sb(r){return r==null?"null":(Yl(r)!==32&&dt.throwArgumentError("invalid topic","topic",r),r.toLowerCase())}function ob(r){for(r=r.slice();r.length>0&&r[r.length-1]==null;)r.pop();return r.map(e=>{if(Array.isArray(e)){const t={};e.forEach(i=>{t[sb(i)]=!0});const n=Object.keys(t);return n.sort(),n.join("|")}else return sb(e)}).join("&")}function cJ(r){return r===""?[]:r.split(/&/g).map(e=>{if(e==="")return[];const t=e.split("|").map(n=>n==="null"?null:n);return t.length===1?t[0]:t})}function vc(r){if(typeof r=="string"){if(r=r.toLowerCase(),Yl(r)===32)return"tx:"+r;if(r.indexOf(":")===-1)return r}else{if(Array.isArray(r))return"filter:*:"+ob(r);if(iW.isForkEvent(r))throw dt.warn("not implemented"),new Error("not implemented");if(r&&typeof r=="object")return"filter:"+(r.address||"*")+":"+ob(r.topics||[])}throw new Error("invalid event - "+r)}function jf(){return new Date().getTime()}function ab(r){return new Promise(e=>{setTimeout(e,r)})}const uJ=["block","network","pending","poll"];let fJ=class{constructor(e,t,n){_e(this,"tag",e),_e(this,"listener",t),_e(this,"once",n),this._lastBlockNumber=-2,this._inflight=!1}get event(){switch(this.type){case"tx":return this.hash;case"filter":return this.filter}return this.tag}get type(){return this.tag.split(":")[0]}get hash(){const e=this.tag.split(":");return e[0]!=="tx"?null:e[1]}get filter(){const e=this.tag.split(":");if(e[0]!=="filter")return null;const t=e[1],n=cJ(e[2]),i={};return n.length>0&&(i.topics=n),t&&t!=="*"&&(i.address=t),i}pollable(){return this.tag.indexOf(":")>=0||uJ.indexOf(this.tag)>=0}};const dJ={0:{symbol:"btc",p2pkh:0,p2sh:5,prefix:"bc"},2:{symbol:"ltc",p2pkh:48,p2sh:50,prefix:"ltc"},3:{symbol:"doge",p2pkh:30,p2sh:22},60:{symbol:"eth",ilk:"eth"},61:{symbol:"etc",ilk:"eth"},700:{symbol:"xdai",ilk:"eth"}};function ty(r){return yn(De.from(r).toHexString(),32)}function Ab(r){return Ww.encode(Qi([r,yr($Q($Q(r)),0,4)]))}const H2=new RegExp("^(ipfs)://(.*)$","i"),lb=[new RegExp("^(https)://(.*)$","i"),new RegExp("^(data):(.*)$","i"),H2,new RegExp("^eip155:[0-9]+/(erc[0-9]+):(.*)$","i")];function _m(r,e){try{return Cp(Eh(r,e))}catch{}return null}function Eh(r,e){if(r==="0x")return null;const t=De.from(yr(r,e,e+32)).toNumber(),n=De.from(yr(r,t,t+32)).toNumber();return yr(r,t+32,t+32+n)}function ny(r){return r.match(/^ipfs:\/\/ipfs\//i)?r=r.substring(12):r.match(/^ipfs:\/\//i)?r=r.substring(7):dt.throwArgumentError("unsupported IPFS format","link",r),`https://gateway.ipfs.io/ipfs/${r}`}function cb(r){const e=nt(r);if(e.length>32)throw new Error("internal; should not happen");const t=new Uint8Array(32);return t.set(e,32-e.length),t}function hJ(r){if(r.length%32===0)return r;const e=new Uint8Array(Math.ceil(r.length/32)*32);return e.set(r),e}function z2(r){const e=[];let t=0;for(let n=0;n<r.length;n++)e.push(null),t+=32;for(let n=0;n<r.length;n++){const i=nt(r[n]);e[n]=cb(t),e.push(cb(i.length)),e.push(hJ(i)),t+=32+Math.ceil(i.length/32)*32}return $r(e)}class ub{constructor(e,t,n,i){_e(this,"provider",e),_e(this,"name",n),_e(this,"address",e.formatter.address(t)),_e(this,"_resolvedAddress",i)}supportsWildcard(){return this._supportsEip2544||(this._supportsEip2544=this.provider.call({to:this.address,data:"0x01ffc9a79061b92300000000000000000000000000000000000000000000000000000000"}).then(e=>De.from(e).eq(1)).catch(e=>{if(e.code===me.errors.CALL_EXCEPTION)return!1;throw this._supportsEip2544=null,e})),this._supportsEip2544}_fetch(e,t){return it(this,void 0,void 0,function*(){const n={to:this.address,ccipReadEnabled:!0,data:$r([e,bm(this.name),t||"0x"])};let i=!1;(yield this.supportsWildcard())&&(i=!0,n.data=$r(["0x9061b923",z2([GW(this.name),n.data])]));try{let s=yield this.provider.call(n);return nt(s).length%32===4&&dt.throwError("resolver threw error",me.errors.CALL_EXCEPTION,{transaction:n,data:s}),i&&(s=Eh(s,0)),s}catch(s){if(s.code===me.errors.CALL_EXCEPTION)return null;throw s}})}_fetchBytes(e,t){return it(this,void 0,void 0,function*(){const n=yield this._fetch(e,t);return n!=null?Eh(n,0):null})}_getAddress(e,t){const n=dJ[String(e)];if(n==null&&dt.throwError(`unsupported coin type: ${e}`,me.errors.UNSUPPORTED_OPERATION,{operation:`getAddress(${e})`}),n.ilk==="eth")return this.provider.formatter.address(t);const i=nt(t);if(n.p2pkh!=null){const s=t.match(/^0x76a9([0-9a-f][0-9a-f])([0-9a-f]*)88ac$/);if(s){const o=parseInt(s[1],16);if(s[2].length===o*2&&o>=1&&o<=75)return Ab(Qi([[n.p2pkh],"0x"+s[2]]))}}if(n.p2sh!=null){const s=t.match(/^0xa9([0-9a-f][0-9a-f])([0-9a-f]*)87$/);if(s){const o=parseInt(s[1],16);if(s[2].length===o*2&&o>=1&&o<=75)return Ab(Qi([[n.p2sh],"0x"+s[2]]))}}if(n.prefix!=null){const s=i[1];let o=i[0];if(o===0?s!==20&&s!==32&&(o=-1):o=-1,o>=0&&i.length===2+s&&s>=1&&s<=75){const a=tb.toWords(i.slice(2));return a.unshift(o),tb.encode(n.prefix,a)}}return null}getAddress(e){return it(this,void 0,void 0,function*(){if(e==null&&(e=60),e===60)try{const i=yield this._fetch("0x3b3b57de");return i==="0x"||i===fW?null:this.provider.formatter.callAddress(i)}catch(i){if(i.code===me.errors.CALL_EXCEPTION)return null;throw i}const t=yield this._fetchBytes("0xf1cb7e06",ty(e));if(t==null||t==="0x")return null;const n=this._getAddress(e,t);return n==null&&dt.throwError("invalid or unsupported coin data",me.errors.UNSUPPORTED_OPERATION,{operation:`getAddress(${e})`,coinType:e,data:t}),n})}getAvatar(){return it(this,void 0,void 0,function*(){const e=[{type:"name",content:this.name}];try{const t=yield this.getText("avatar");if(t==null)return null;for(let n=0;n<lb.length;n++){const i=t.match(lb[n]);if(i==null)continue;const s=i[1].toLowerCase();switch(s){case"https":return e.push({type:"url",content:t}),{linkage:e,url:t};case"data":return e.push({type:"data",content:t}),{linkage:e,url:t};case"ipfs":return e.push({type:"ipfs",content:t}),{linkage:e,url:ny(t)};case"erc721":case"erc1155":{const o=s==="erc721"?"0xc87b56dd":"0x0e89341c";e.push({type:s,content:t});const a=this._resolvedAddress||(yield this.getAddress()),A=(i[2]||"").split("/");if(A.length!==2)return null;const l=yield this.provider.formatter.address(A[0]),c=yn(De.from(A[1]).toHexString(),32);if(s==="erc721"){const h=this.provider.formatter.callAddress(yield this.provider.call({to:l,data:$r(["0x6352211e",c])}));if(a!==h)return null;e.push({type:"owner",content:h})}else if(s==="erc1155"){const h=De.from(yield this.provider.call({to:l,data:$r(["0x00fdd58e",yn(a,32),c])}));if(h.isZero())return null;e.push({type:"balance",content:h.toString()})}const u={to:this.provider.formatter.address(A[0]),data:$r([o,c])};let f=_m(yield this.provider.call(u),0);if(f==null)return null;e.push({type:"metadata-url-base",content:f}),s==="erc1155"&&(f=f.replace("{id}",c.substring(2)),e.push({type:"metadata-url-expanded",content:f})),f.match(/^ipfs:/i)&&(f=ny(f)),e.push({type:"metadata-url",content:f});const d=yield vU(f);if(!d)return null;e.push({type:"metadata",content:JSON.stringify(d)});let p=d.image;if(typeof p!="string")return null;if(!p.match(/^(https:\/\/|data:)/i)){if(p.match(H2)==null)return null;e.push({type:"url-ipfs",content:p}),p=ny(p)}return e.push({type:"url",content:p}),{linkage:e,url:p}}}}}catch{}return null})}getContentHash(){return it(this,void 0,void 0,function*(){const e=yield this._fetchBytes("0xbc1c58d1");if(e==null||e==="0x")return null;const t=e.match(/^0xe3010170(([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])([0-9a-f]*))$/);if(t){const o=parseInt(t[3],16);if(t[4].length===o*2)return"ipfs://"+Ww.encode("0x"+t[1])}const n=e.match(/^0xe5010172(([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])([0-9a-f]*))$/);if(n){const o=parseInt(n[3],16);if(n[4].length===o*2)return"ipns://"+Ww.encode("0x"+n[1])}const i=e.match(/^0xe40101fa011b20([0-9a-f]*)$/);if(i&&i[1].length===32*2)return"bzz://"+i[1];const s=e.match(/^0x90b2c605([0-9a-f]*)$/);if(s&&s[1].length===34*2){const o={"=":"","+":"-","/":"_"};return"sia://"+e2("0x"+s[1]).replace(/[=+\/]/g,A=>o[A])}return dt.throwError("invalid or unsupported content hash data",me.errors.UNSUPPORTED_OPERATION,{operation:"getContentHash()",data:e})})}getText(e){return it(this,void 0,void 0,function*(){let t=Mo(e);t=Qi([ty(64),ty(t.length),t]),t.length%32!==0&&(t=Qi([t,yn("0x",32-e.length%32)]));const n=yield this._fetchBytes("0x59d1d43c",Ke(t));return n==null||n==="0x"?null:Cp(n)})}}let ry=null,pJ=1;class gJ extends DB{constructor(e){if(super(),this._events=[],this._emitted={block:-2},this.disableCcipRead=!1,this.formatter=new.target.getFormatter(),_e(this,"anyNetwork",e==="any"),this.anyNetwork&&(e=this.detectNetwork()),e instanceof Promise)this._networkPromise=e,e.catch(t=>{}),this._ready().catch(t=>{});else{const t=Fo(new.target,"getNetwork")(e);t?(_e(this,"_network",t),this.emit("network",t,null)):dt.throwArgumentError("invalid network","network",e)}this._maxInternalBlockNumber=-1024,this._lastBlockNumber=-2,this._maxFilterBlockRange=10,this._pollingInterval=4e3,this._fastQueryDate=0}_ready(){return it(this,void 0,void 0,function*(){if(this._network==null){let e=null;if(this._networkPromise)try{e=yield this._networkPromise}catch{}e==null&&(e=yield this.detectNetwork()),e||dt.throwError("no network detected",me.errors.UNKNOWN_ERROR,{}),this._network==null&&(this.anyNetwork?this._network=e:_e(this,"_network",e),this.emit("network",e,null))}return this._network})}get ready(){return kd(()=>this._ready().then(e=>e,e=>{if(!(e.code===me.errors.NETWORK_ERROR&&e.event==="noNetwork"))throw e}))}static getFormatter(){return ry==null&&(ry=new ib),ry}static getNetwork(e){return aW(e??"homestead")}ccipReadFetch(e,t,n){return it(this,void 0,void 0,function*(){if(this.disableCcipRead||n.length===0)return null;const i=e.to.toLowerCase(),s=t.toLowerCase(),o=[];for(let a=0;a<n.length;a++){const A=n[a],l=A.replace("{sender}",i).replace("{data}",s),c=A.indexOf("{data}")>=0?null:JSON.stringify({data:s,sender:i}),u=yield vU({url:l,errorPassThrough:!0},c,(d,p)=>(d.status=p.statusCode,d));if(u.data)return u.data;const f=u.message||"unknown error";if(u.status>=400&&u.status<500)return dt.throwError(`response not found during CCIP fetch: ${f}`,me.errors.SERVER_ERROR,{url:A,errorMessage:f});o.push(f)}return dt.throwError(`error encountered during CCIP fetch: ${o.map(a=>JSON.stringify(a)).join(", ")}`,me.errors.SERVER_ERROR,{urls:n,errorMessages:o})})}_getInternalBlockNumber(e){return it(this,void 0,void 0,function*(){if(yield this._ready(),e>0)for(;this._internalBlockNumber;){const i=this._internalBlockNumber;try{const s=yield i;if(jf()-s.respTime<=e)return s.blockNumber;break}catch{if(this._internalBlockNumber===i)break}}const t=jf(),n=Tn({blockNumber:this.perform("getBlockNumber",{}),networkError:this.getNetwork().then(i=>null,i=>i)}).then(({blockNumber:i,networkError:s})=>{if(s)throw this._internalBlockNumber===n&&(this._internalBlockNumber=null),s;const o=jf();return i=De.from(i).toNumber(),i<this._maxInternalBlockNumber&&(i=this._maxInternalBlockNumber),this._maxInternalBlockNumber=i,this._setFastBlockNumber(i),{blockNumber:i,reqTime:t,respTime:o}});return this._internalBlockNumber=n,n.catch(i=>{this._internalBlockNumber===n&&(this._internalBlockNumber=null)}),(yield n).blockNumber})}poll(){return it(this,void 0,void 0,function*(){const e=pJ++,t=[];let n=null;try{n=yield this._getInternalBlockNumber(100+this.pollingInterval/2)}catch(i){this.emit("error",i);return}if(this._setFastBlockNumber(n),this.emit("poll",e,n),n===this._lastBlockNumber){this.emit("didPoll",e);return}if(this._emitted.block===-2&&(this._emitted.block=n-1),Math.abs(this._emitted.block-n)>1e3)dt.warn(`network block skew detected; skipping block events (emitted=${this._emitted.block} blockNumber${n})`),this.emit("error",dt.makeError("network block skew detected",me.errors.NETWORK_ERROR,{blockNumber:n,event:"blockSkew",previousBlockNumber:this._emitted.block})),this.emit("block",n);else for(let i=this._emitted.block+1;i<=n;i++)this.emit("block",i);this._emitted.block!==n&&(this._emitted.block=n,Object.keys(this._emitted).forEach(i=>{if(i==="block")return;const s=this._emitted[i];s!=="pending"&&n-s>12&&delete this._emitted[i]})),this._lastBlockNumber===-2&&(this._lastBlockNumber=n-1),this._events.forEach(i=>{switch(i.type){case"tx":{const s=i.hash;let o=this.getTransactionReceipt(s).then(a=>(!a||a.blockNumber==null||(this._emitted["t:"+s]=a.blockNumber,this.emit(s,a)),null)).catch(a=>{this.emit("error",a)});t.push(o);break}case"filter":{if(!i._inflight){i._inflight=!0,i._lastBlockNumber===-2&&(i._lastBlockNumber=n-1);const s=i.filter;s.fromBlock=i._lastBlockNumber+1,s.toBlock=n;const o=s.toBlock-this._maxFilterBlockRange;o>s.fromBlock&&(s.fromBlock=o),s.fromBlock<0&&(s.fromBlock=0);const a=this.getLogs(s).then(A=>{i._inflight=!1,A.length!==0&&A.forEach(l=>{l.blockNumber>i._lastBlockNumber&&(i._lastBlockNumber=l.blockNumber),this._emitted["b:"+l.blockHash]=l.blockNumber,this._emitted["t:"+l.transactionHash]=l.blockNumber,this.emit(s,l)})}).catch(A=>{this.emit("error",A),i._inflight=!1});t.push(a)}break}}}),this._lastBlockNumber=n,Promise.all(t).then(()=>{this.emit("didPoll",e)}).catch(i=>{this.emit("error",i)})})}resetEventsBlock(e){this._lastBlockNumber=e-1,this.polling&&this.poll()}get network(){return this._network}detectNetwork(){return it(this,void 0,void 0,function*(){return dt.throwError("provider does not support network detection",me.errors.UNSUPPORTED_OPERATION,{operation:"provider.detectNetwork"})})}getNetwork(){return it(this,void 0,void 0,function*(){const e=yield this._ready(),t=yield this.detectNetwork();if(e.chainId!==t.chainId){if(this.anyNetwork)return this._network=t,this._lastBlockNumber=-2,this._fastBlockNumber=null,this._fastBlockNumberPromise=null,this._fastQueryDate=0,this._emitted.block=-2,this._maxInternalBlockNumber=-1024,this._internalBlockNumber=null,this.emit("network",t,e),yield ab(0),this._network;const n=dt.makeError("underlying network changed",me.errors.NETWORK_ERROR,{event:"changed",network:e,detectedNetwork:t});throw this.emit("error",n),n}return e})}get blockNumber(){return this._getInternalBlockNumber(100+this.pollingInterval/2).then(e=>{this._setFastBlockNumber(e)},e=>{}),this._fastBlockNumber!=null?this._fastBlockNumber:-1}get polling(){return this._poller!=null}set polling(e){e&&!this._poller?(this._poller=setInterval(()=>{this.poll()},this.pollingInterval),this._bootstrapPoll||(this._bootstrapPoll=setTimeout(()=>{this.poll(),this._bootstrapPoll=setTimeout(()=>{this._poller||this.poll(),this._bootstrapPoll=null},this.pollingInterval)},0))):!e&&this._poller&&(clearInterval(this._poller),this._poller=null)}get pollingInterval(){return this._pollingInterval}set pollingInterval(e){if(typeof e!="number"||e<=0||parseInt(String(e))!=e)throw new Error("invalid polling interval");this._pollingInterval=e,this._poller&&(clearInterval(this._poller),this._poller=setInterval(()=>{this.poll()},this._pollingInterval))}_getFastBlockNumber(){const e=jf();return e-this._fastQueryDate>2*this._pollingInterval&&(this._fastQueryDate=e,this._fastBlockNumberPromise=this.getBlockNumber().then(t=>((this._fastBlockNumber==null||t>this._fastBlockNumber)&&(this._fastBlockNumber=t),this._fastBlockNumber))),this._fastBlockNumberPromise}_setFastBlockNumber(e){this._fastBlockNumber!=null&&e<this._fastBlockNumber||(this._fastQueryDate=jf(),(this._fastBlockNumber==null||e>this._fastBlockNumber)&&(this._fastBlockNumber=e,this._fastBlockNumberPromise=Promise.resolve(e)))}waitForTransaction(e,t,n){return it(this,void 0,void 0,function*(){return this._waitForTransaction(e,t??1,n||0,null)})}_waitForTransaction(e,t,n,i){return it(this,void 0,void 0,function*(){const s=yield this.getTransactionReceipt(e);return(s?s.confirmations:0)>=t?s:new Promise((o,a)=>{const A=[];let l=!1;const c=function(){return l?!0:(l=!0,A.forEach(f=>{f()}),!1)},u=f=>{f.confirmations<t||c()||o(f)};if(this.on(e,u),A.push(()=>{this.removeListener(e,u)}),i){let f=i.startBlock,d=null;const p=h=>it(this,void 0,void 0,function*(){l||(yield ab(1e3),this.getTransactionCount(i.from).then(m=>it(this,void 0,void 0,function*(){if(!l){if(m<=i.nonce)f=h;else{{const g=yield this.getTransaction(e);if(g&&g.blockNumber!=null)return}for(d==null&&(d=f-3,d<i.startBlock&&(d=i.startBlock));d<=h;){if(l)return;const g=yield this.getBlockWithTransactions(d);for(let B=0;B<g.transactions.length;B++){const v=g.transactions[B];if(v.hash===e)return;if(v.from===i.from&&v.nonce===i.nonce){if(l)return;const w=yield this.waitForTransaction(v.hash,t);if(c())return;let C="replaced";v.data===i.data&&v.to===i.to&&v.value.eq(i.value)?C="repriced":v.data==="0x"&&v.from===v.to&&v.value.isZero()&&(C="cancelled"),a(dt.makeError("transaction was replaced",me.errors.TRANSACTION_REPLACED,{cancelled:C==="replaced"||C==="cancelled",reason:C,replacement:this._wrapTransaction(v),hash:e,receipt:w}));return}}d++}}l||this.once("block",p)}}),m=>{l||this.once("block",p)}))});if(l)return;this.once("block",p),A.push(()=>{this.removeListener("block",p)})}if(typeof n=="number"&&n>0){const f=setTimeout(()=>{c()||a(dt.makeError("timeout exceeded",me.errors.TIMEOUT,{timeout:n}))},n);f.unref&&f.unref(),A.push(()=>{clearTimeout(f)})}})})}getBlockNumber(){return it(this,void 0,void 0,function*(){return this._getInternalBlockNumber(0)})}getGasPrice(){return it(this,void 0,void 0,function*(){yield this.getNetwork();const e=yield this.perform("getGasPrice",{});try{return De.from(e)}catch(t){return dt.throwError("bad result from backend",me.errors.SERVER_ERROR,{method:"getGasPrice",result:e,error:t})}})}getBalance(e,t){return it(this,void 0,void 0,function*(){yield this.getNetwork();const n=yield Tn({address:this._getAddress(e),blockTag:this._getBlockTag(t)}),i=yield this.perform("getBalance",n);try{return De.from(i)}catch(s){return dt.throwError("bad result from backend",me.errors.SERVER_ERROR,{method:"getBalance",params:n,result:i,error:s})}})}getTransactionCount(e,t){return it(this,void 0,void 0,function*(){yield this.getNetwork();const n=yield Tn({address:this._getAddress(e),blockTag:this._getBlockTag(t)}),i=yield this.perform("getTransactionCount",n);try{return De.from(i).toNumber()}catch(s){return dt.throwError("bad result from backend",me.errors.SERVER_ERROR,{method:"getTransactionCount",params:n,result:i,error:s})}})}getCode(e,t){return it(this,void 0,void 0,function*(){yield this.getNetwork();const n=yield Tn({address:this._getAddress(e),blockTag:this._getBlockTag(t)}),i=yield this.perform("getCode",n);try{return Ke(i)}catch(s){return dt.throwError("bad result from backend",me.errors.SERVER_ERROR,{method:"getCode",params:n,result:i,error:s})}})}getStorageAt(e,t,n){return it(this,void 0,void 0,function*(){yield this.getNetwork();const i=yield Tn({address:this._getAddress(e),blockTag:this._getBlockTag(n),position:Promise.resolve(t).then(o=>gU(o))}),s=yield this.perform("getStorageAt",i);try{return Ke(s)}catch(o){return dt.throwError("bad result from backend",me.errors.SERVER_ERROR,{method:"getStorageAt",params:i,result:s,error:o})}})}_wrapTransaction(e,t,n){if(t!=null&&Yl(t)!==32)throw new Error("invalid response - sendTransaction");const i=e;return t!=null&&e.hash!==t&&dt.throwError("Transaction hash mismatch from Provider.sendTransaction.",me.errors.UNKNOWN_ERROR,{expectedHash:e.hash,returnedHash:t}),i.wait=(s,o)=>it(this,void 0,void 0,function*(){s==null&&(s=1),o==null&&(o=0);let a;s!==0&&n!=null&&(a={data:e.data,from:e.from,nonce:e.nonce,to:e.to,value:e.value,startBlock:n});const A=yield this._waitForTransaction(e.hash,s,o,a);return A==null&&s===0?null:(this._emitted["t:"+e.hash]=A.blockNumber,A.status===0&&dt.throwError("transaction failed",me.errors.CALL_EXCEPTION,{transactionHash:e.hash,transaction:e,receipt:A}),A)}),i}sendTransaction(e){return it(this,void 0,void 0,function*(){yield this.getNetwork();const t=yield Promise.resolve(e).then(s=>Ke(s)),n=this.formatter.transaction(e);n.confirmations==null&&(n.confirmations=0);const i=yield this._getInternalBlockNumber(100+2*this.pollingInterval);try{const s=yield this.perform("sendTransaction",{signedTransaction:t});return this._wrapTransaction(n,s,i)}catch(s){throw s.transaction=n,s.transactionHash=n.hash,s}})}_getTransactionRequest(e){return it(this,void 0,void 0,function*(){const t=yield e,n={};return["from","to"].forEach(i=>{t[i]!=null&&(n[i]=Promise.resolve(t[i]).then(s=>s?this._getAddress(s):null))}),["gasLimit","gasPrice","maxFeePerGas","maxPriorityFeePerGas","value"].forEach(i=>{t[i]!=null&&(n[i]=Promise.resolve(t[i]).then(s=>s?De.from(s):null))}),["type"].forEach(i=>{t[i]!=null&&(n[i]=Promise.resolve(t[i]).then(s=>s??null))}),t.accessList&&(n.accessList=this.formatter.accessList(t.accessList)),["data"].forEach(i=>{t[i]!=null&&(n[i]=Promise.resolve(t[i]).then(s=>s?Ke(s):null))}),this.formatter.transactionRequest(yield Tn(n))})}_getFilter(e){return it(this,void 0,void 0,function*(){e=yield e;const t={};return e.address!=null&&(t.address=this._getAddress(e.address)),["blockHash","topics"].forEach(n=>{e[n]!=null&&(t[n]=e[n])}),["fromBlock","toBlock"].forEach(n=>{e[n]!=null&&(t[n]=this._getBlockTag(e[n]))}),this.formatter.filter(yield Tn(t))})}_call(e,t,n){return it(this,void 0,void 0,function*(){n>=lJ&&dt.throwError("CCIP read exceeded maximum redirections",me.errors.SERVER_ERROR,{redirects:n,transaction:e});const i=e.to,s=yield this.perform("call",{transaction:e,blockTag:t});if(n>=0&&t==="latest"&&i!=null&&s.substring(0,10)==="0x556f1830"&&Yl(s)%32===4)try{const o=yr(s,4),a=yr(o,0,32);De.from(a).eq(i)||dt.throwError("CCIP Read sender did not match",me.errors.CALL_EXCEPTION,{name:"OffchainLookup",signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",transaction:e,data:s});const A=[],l=De.from(yr(o,32,64)).toNumber(),c=De.from(yr(o,l,l+32)).toNumber(),u=yr(o,l+32);for(let g=0;g<c;g++){const B=_m(u,g*32);B==null&&dt.throwError("CCIP Read contained corrupt URL string",me.errors.CALL_EXCEPTION,{name:"OffchainLookup",signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",transaction:e,data:s}),A.push(B)}const f=Eh(o,64);De.from(yr(o,100,128)).isZero()||dt.throwError("CCIP Read callback selector included junk",me.errors.CALL_EXCEPTION,{name:"OffchainLookup",signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",transaction:e,data:s});const d=yr(o,96,100),p=Eh(o,128),h=yield this.ccipReadFetch(e,f,A);h==null&&dt.throwError("CCIP Read disabled or provided no URLs",me.errors.CALL_EXCEPTION,{name:"OffchainLookup",signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",transaction:e,data:s});const m={to:i,data:$r([d,z2([h,p])])};return this._call(m,t,n+1)}catch(o){if(o.code===me.errors.SERVER_ERROR)throw o}try{return Ke(s)}catch(o){return dt.throwError("bad result from backend",me.errors.SERVER_ERROR,{method:"call",params:{transaction:e,blockTag:t},result:s,error:o})}})}call(e,t){return it(this,void 0,void 0,function*(){yield this.getNetwork();const n=yield Tn({transaction:this._getTransactionRequest(e),blockTag:this._getBlockTag(t),ccipReadEnabled:Promise.resolve(e.ccipReadEnabled)});return this._call(n.transaction,n.blockTag,n.ccipReadEnabled?0:-1)})}estimateGas(e){return it(this,void 0,void 0,function*(){yield this.getNetwork();const t=yield Tn({transaction:this._getTransactionRequest(e)}),n=yield this.perform("estimateGas",t);try{return De.from(n)}catch(i){return dt.throwError("bad result from backend",me.errors.SERVER_ERROR,{method:"estimateGas",params:t,result:n,error:i})}})}_getAddress(e){return it(this,void 0,void 0,function*(){e=yield e,typeof e!="string"&&dt.throwArgumentError("invalid address or ENS name","name",e);const t=yield this.resolveName(e);return t==null&&dt.throwError("ENS name not configured",me.errors.UNSUPPORTED_OPERATION,{operation:`resolveName(${JSON.stringify(e)})`}),t})}_getBlock(e,t){return it(this,void 0,void 0,function*(){yield this.getNetwork(),e=yield e;let n=-128;const i={includeTransactions:!!t};if(Mt(e,32))i.blockHash=e;else try{i.blockTag=yield this._getBlockTag(e),Mt(i.blockTag)&&(n=parseInt(i.blockTag.substring(2),16))}catch{dt.throwArgumentError("invalid block hash or block tag","blockHashOrBlockTag",e)}return kd(()=>it(this,void 0,void 0,function*(){const s=yield this.perform("getBlock",i);if(s==null)return i.blockHash!=null&&this._emitted["b:"+i.blockHash]==null||i.blockTag!=null&&n>this._emitted.block?null:void 0;if(t){let o=null;for(let A=0;A<s.transactions.length;A++){const l=s.transactions[A];if(l.blockNumber==null)l.confirmations=0;else if(l.confirmations==null){o==null&&(o=yield this._getInternalBlockNumber(100+2*this.pollingInterval));let c=o-l.blockNumber+1;c<=0&&(c=1),l.confirmations=c}}const a=this.formatter.blockWithTransactions(s);return a.transactions=a.transactions.map(A=>this._wrapTransaction(A)),a}return this.formatter.block(s)}),{oncePoll:this})})}getBlock(e){return this._getBlock(e,!1)}getBlockWithTransactions(e){return this._getBlock(e,!0)}getTransaction(e){return it(this,void 0,void 0,function*(){yield this.getNetwork(),e=yield e;const t={transactionHash:this.formatter.hash(e,!0)};return kd(()=>it(this,void 0,void 0,function*(){const n=yield this.perform("getTransaction",t);if(n==null)return this._emitted["t:"+e]==null?null:void 0;const i=this.formatter.transactionResponse(n);if(i.blockNumber==null)i.confirmations=0;else if(i.confirmations==null){let o=(yield this._getInternalBlockNumber(100+2*this.pollingInterval))-i.blockNumber+1;o<=0&&(o=1),i.confirmations=o}return this._wrapTransaction(i)}),{oncePoll:this})})}getTransactionReceipt(e){return it(this,void 0,void 0,function*(){yield this.getNetwork(),e=yield e;const t={transactionHash:this.formatter.hash(e,!0)};return kd(()=>it(this,void 0,void 0,function*(){const n=yield this.perform("getTransactionReceipt",t);if(n==null)return this._emitted["t:"+e]==null?null:void 0;if(n.blockHash==null)return;const i=this.formatter.receipt(n);if(i.blockNumber==null)i.confirmations=0;else if(i.confirmations==null){let o=(yield this._getInternalBlockNumber(100+2*this.pollingInterval))-i.blockNumber+1;o<=0&&(o=1),i.confirmations=o}return i}),{oncePoll:this})})}getLogs(e){return it(this,void 0,void 0,function*(){yield this.getNetwork();const t=yield Tn({filter:this._getFilter(e)}),n=yield this.perform("getLogs",t);return n.forEach(i=>{i.removed==null&&(i.removed=!1)}),ib.arrayOf(this.formatter.filterLog.bind(this.formatter))(n)})}getEtherPrice(){return it(this,void 0,void 0,function*(){return yield this.getNetwork(),this.perform("getEtherPrice",{})})}_getBlockTag(e){return it(this,void 0,void 0,function*(){if(e=yield e,typeof e=="number"&&e<0){e%1&&dt.throwArgumentError("invalid BlockTag","blockTag",e);let t=yield this._getInternalBlockNumber(100+2*this.pollingInterval);return t+=e,t<0&&(t=0),this.formatter.blockTag(t)}return this.formatter.blockTag(e)})}getResolver(e){return it(this,void 0,void 0,function*(){let t=e;for(;;){if(t===""||t==="."||e!=="eth"&&t==="eth")return null;const n=yield this._getResolver(t,"getResolver");if(n!=null){const i=new ub(this,n,e);return t!==e&&!(yield i.supportsWildcard())?null:i}t=t.split(".").slice(1).join(".")}})}_getResolver(e,t){return it(this,void 0,void 0,function*(){t==null&&(t="ENS");const n=yield this.getNetwork();n.ensAddress||dt.throwError("network does not support ENS",me.errors.UNSUPPORTED_OPERATION,{operation:t,network:n.name});try{const i=yield this.call({to:n.ensAddress,data:"0x0178b8bf"+bm(e).substring(2)});return this.formatter.callAddress(i)}catch{}return null})}resolveName(e){return it(this,void 0,void 0,function*(){e=yield e;try{return Promise.resolve(this.formatter.address(e))}catch(n){if(Mt(e))throw n}typeof e!="string"&&dt.throwArgumentError("invalid ENS name","name",e);const t=yield this.getResolver(e);return t?yield t.getAddress():null})}lookupAddress(e){return it(this,void 0,void 0,function*(){e=yield e,e=this.formatter.address(e);const t=e.substring(2).toLowerCase()+".addr.reverse",n=yield this._getResolver(t,"lookupAddress");if(n==null)return null;const i=_m(yield this.call({to:n,data:"0x691f3431"+bm(t).substring(2)}),0);return(yield this.resolveName(i))!=e?null:i})}getAvatar(e){return it(this,void 0,void 0,function*(){let t=null;if(Mt(e)){const s=this.formatter.address(e).substring(2).toLowerCase()+".addr.reverse",o=yield this._getResolver(s,"getAvatar");if(!o)return null;t=new ub(this,o,s);try{const a=yield t.getAvatar();if(a)return a.url}catch(a){if(a.code!==me.errors.CALL_EXCEPTION)throw a}try{const a=_m(yield this.call({to:o,data:"0x691f3431"+bm(s).substring(2)}),0);t=yield this.getResolver(a)}catch(a){if(a.code!==me.errors.CALL_EXCEPTION)throw a;return null}}else if(t=yield this.getResolver(e),!t)return null;const n=yield t.getAvatar();return n==null?null:n.url})}perform(e,t){return dt.throwError(e+" not implemented",me.errors.NOT_IMPLEMENTED,{operation:e})}_startEvent(e){this.polling=this._events.filter(t=>t.pollable()).length>0}_stopEvent(e){this.polling=this._events.filter(t=>t.pollable()).length>0}_addEventListener(e,t,n){const i=new fJ(vc(e),t,n);return this._events.push(i),this._startEvent(i),this}on(e,t){return this._addEventListener(e,t,!1)}once(e,t){return this._addEventListener(e,t,!0)}emit(e,...t){let n=!1,i=[],s=vc(e);return this._events=this._events.filter(o=>o.tag!==s?!0:(setTimeout(()=>{o.listener.apply(this,t)},0),n=!0,o.once?(i.push(o),!1):!0)),i.forEach(o=>{this._stopEvent(o)}),n}listenerCount(e){if(!e)return this._events.length;let t=vc(e);return this._events.filter(n=>n.tag===t).length}listeners(e){if(e==null)return this._events.map(n=>n.listener);let t=vc(e);return this._events.filter(n=>n.tag===t).map(n=>n.listener)}off(e,t){if(t==null)return this.removeAllListeners(e);const n=[];let i=!1,s=vc(e);return this._events=this._events.filter(o=>o.tag!==s||o.listener!=t||i?!0:(i=!0,n.push(o),!1)),n.forEach(o=>{this._stopEvent(o)}),this}removeAllListeners(e){let t=[];if(e==null)t=this._events,this._events=[];else{const n=vc(e);this._events=this._events.filter(i=>i.tag!==n?!0:(t.push(i),!1))}return t.forEach(n=>{this._stopEvent(n)}),this}}const mJ="abstract-signer/5.7.0";var bs=globalThis&&globalThis.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(c){try{l(n.next(c))}catch(u){o(u)}}function A(c){try{l(n.throw(c))}catch(u){o(u)}}function l(c){c.done?s(c.value):i(c.value).then(a,A)}l((n=n.apply(r,e||[])).next())})};const Oi=new me(mJ),BJ=["accessList","ccipReadEnabled","chainId","customData","data","from","gasLimit","gasPrice","maxFeePerGas","maxPriorityFeePerGas","nonce","to","type","value"],vJ=[me.errors.INSUFFICIENT_FUNDS,me.errors.NONCE_EXPIRED,me.errors.REPLACEMENT_UNDERPRICED];class Fp{constructor(){Oi.checkAbstract(new.target,Fp),_e(this,"_isSigner",!0)}getBalance(e){return bs(this,void 0,void 0,function*(){return this._checkProvider("getBalance"),yield this.provider.getBalance(this.getAddress(),e)})}getTransactionCount(e){return bs(this,void 0,void 0,function*(){return this._checkProvider("getTransactionCount"),yield this.provider.getTransactionCount(this.getAddress(),e)})}estimateGas(e){return bs(this,void 0,void 0,function*(){this._checkProvider("estimateGas");const t=yield Tn(this.checkTransaction(e));return yield this.provider.estimateGas(t)})}call(e,t){return bs(this,void 0,void 0,function*(){this._checkProvider("call");const n=yield Tn(this.checkTransaction(e));return yield this.provider.call(n,t)})}sendTransaction(e){return bs(this,void 0,void 0,function*(){this._checkProvider("sendTransaction");const t=yield this.populateTransaction(e),n=yield this.signTransaction(t);return yield this.provider.sendTransaction(n)})}getChainId(){return bs(this,void 0,void 0,function*(){return this._checkProvider("getChainId"),(yield this.provider.getNetwork()).chainId})}getGasPrice(){return bs(this,void 0,void 0,function*(){return this._checkProvider("getGasPrice"),yield this.provider.getGasPrice()})}getFeeData(){return bs(this,void 0,void 0,function*(){return this._checkProvider("getFeeData"),yield this.provider.getFeeData()})}resolveName(e){return bs(this,void 0,void 0,function*(){return this._checkProvider("resolveName"),yield this.provider.resolveName(e)})}checkTransaction(e){for(const n in e)BJ.indexOf(n)===-1&&Oi.throwArgumentError("invalid transaction key: "+n,"transaction",e);const t=Yn(e);return t.from==null?t.from=this.getAddress():t.from=Promise.all([Promise.resolve(t.from),this.getAddress()]).then(n=>(n[0].toLowerCase()!==n[1].toLowerCase()&&Oi.throwArgumentError("from address mismatch","transaction",e),n[0])),t}populateTransaction(e){return bs(this,void 0,void 0,function*(){const t=yield Tn(this.checkTransaction(e));t.to!=null&&(t.to=Promise.resolve(t.to).then(i=>bs(this,void 0,void 0,function*(){if(i==null)return null;const s=yield this.resolveName(i);return s==null&&Oi.throwArgumentError("provided ENS name resolves to null","tx.to",i),s})),t.to.catch(i=>{}));const n=t.maxFeePerGas!=null||t.maxPriorityFeePerGas!=null;if(t.gasPrice!=null&&(t.type===2||n)?Oi.throwArgumentError("eip-1559 transaction do not support gasPrice","transaction",e):(t.type===0||t.type===1)&&n&&Oi.throwArgumentError("pre-eip-1559 transaction do not support maxFeePerGas/maxPriorityFeePerGas","transaction",e),(t.type===2||t.type==null)&&t.maxFeePerGas!=null&&t.maxPriorityFeePerGas!=null)t.type=2;else if(t.type===0||t.type===1)t.gasPrice==null&&(t.gasPrice=this.getGasPrice());else{const i=yield this.getFeeData();if(t.type==null)if(i.maxFeePerGas!=null&&i.maxPriorityFeePerGas!=null)if(t.type=2,t.gasPrice!=null){const s=t.gasPrice;delete t.gasPrice,t.maxFeePerGas=s,t.maxPriorityFeePerGas=s}else t.maxFeePerGas==null&&(t.maxFeePerGas=i.maxFeePerGas),t.maxPriorityFeePerGas==null&&(t.maxPriorityFeePerGas=i.maxPriorityFeePerGas);else i.gasPrice!=null?(n&&Oi.throwError("network does not support EIP-1559",me.errors.UNSUPPORTED_OPERATION,{operation:"populateTransaction"}),t.gasPrice==null&&(t.gasPrice=i.gasPrice),t.type=0):Oi.throwError("failed to get consistent fee data",me.errors.UNSUPPORTED_OPERATION,{operation:"signer.getFeeData"});else t.type===2&&(t.maxFeePerGas==null&&(t.maxFeePerGas=i.maxFeePerGas),t.maxPriorityFeePerGas==null&&(t.maxPriorityFeePerGas=i.maxPriorityFeePerGas))}return t.nonce==null&&(t.nonce=this.getTransactionCount("pending")),t.gasLimit==null&&(t.gasLimit=this.estimateGas(t).catch(i=>{if(vJ.indexOf(i.code)>=0)throw i;return Oi.throwError("cannot estimate gas; transaction may fail or may require manual gas limit",me.errors.UNPREDICTABLE_GAS_LIMIT,{error:i,tx:t})})),t.chainId==null?t.chainId=this.getChainId():t.chainId=Promise.all([Promise.resolve(t.chainId),this.getChainId()]).then(i=>(i[1]!==0&&i[0]!==i[1]&&Oi.throwArgumentError("chainId address mismatch","transaction",e),i[0])),yield Tn(t)})}_checkProvider(e){this.provider||Oi.throwError("missing provider",me.errors.UNSUPPORTED_OPERATION,{operation:e||"_checkProvider"})}static isSigner(e){return!!(e&&e._isSigner)}}class IU extends Fp{constructor(e,t){super(),_e(this,"address",e),_e(this,"provider",t||null)}getAddress(){return Promise.resolve(this.address)}_fail(e,t){return Promise.resolve().then(()=>{Oi.throwError(e,me.errors.UNSUPPORTED_OPERATION,{operation:t})})}signMessage(e){return this._fail("VoidSigner cannot sign messages","signMessage")}signTransaction(e){return this._fail("VoidSigner cannot sign transactions","signTransaction")}_signTypedData(e,t,n){return this._fail("VoidSigner cannot sign typed data","signTypedData")}connect(e){return new IU(this.address,e)}}var ua=globalThis&&globalThis.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(c){try{l(n.next(c))}catch(u){o(u)}}function A(c){try{l(n.throw(c))}catch(u){o(u)}}function l(c){c.done?s(c.value):i(c.value).then(a,A)}l((n=n.apply(r,e||[])).next())})};const Nn=new me(PB),yJ=["call","estimateGas"];function oh(r,e){if(r==null)return null;if(typeof r.message=="string"&&r.message.match("reverted")){const t=Mt(r.data)?r.data:null;if(!e||t)return{message:r.message,data:t}}if(typeof r=="object"){for(const t in r){const n=oh(r[t],e);if(n)return n}return null}if(typeof r=="string")try{return oh(JSON.parse(r),e)}catch{}return null}function X2(r,e,t){const n=t.transaction||t.signedTransaction;if(r==="call"){const s=oh(e,!0);if(s)return s.data;Nn.throwError("missing revert data in call exception; Transaction reverted without a reason string",me.errors.CALL_EXCEPTION,{data:"0x",transaction:n,error:e})}if(r==="estimateGas"){let s=oh(e.body,!1);s==null&&(s=oh(e,!1)),s&&Nn.throwError("cannot estimate gas; transaction may fail or may require manual gas limit",me.errors.UNPREDICTABLE_GAS_LIMIT,{reason:s.message,method:r,transaction:n,error:e})}let i=e.message;throw e.code===me.errors.SERVER_ERROR&&e.error&&typeof e.error.message=="string"?i=e.error.message:typeof e.body=="string"?i=e.body:typeof e.responseText=="string"&&(i=e.responseText),i=(i||"").toLowerCase(),i.match(/insufficient funds|base fee exceeds gas limit|InsufficientFunds/i)&&Nn.throwError("insufficient funds for intrinsic transaction cost",me.errors.INSUFFICIENT_FUNDS,{error:e,method:r,transaction:n}),i.match(/nonce (is )?too low/i)&&Nn.throwError("nonce has already been used",me.errors.NONCE_EXPIRED,{error:e,method:r,transaction:n}),i.match(/replacement transaction underpriced|transaction gas price.*too low/i)&&Nn.throwError("replacement fee too low",me.errors.REPLACEMENT_UNDERPRICED,{error:e,method:r,transaction:n}),i.match(/only replay-protected/i)&&Nn.throwError("legacy pre-eip-155 transactions not supported",me.errors.UNSUPPORTED_OPERATION,{error:e,method:r,transaction:n}),yJ.indexOf(r)>=0&&i.match(/gas required exceeds allowance|always failing transaction|execution reverted|revert/)&&Nn.throwError("cannot estimate gas; transaction may fail or may require manual gas limit",me.errors.UNPREDICTABLE_GAS_LIMIT,{error:e,method:r,transaction:n}),e}function fb(r){return new Promise(function(e){setTimeout(e,r)})}function CJ(r){if(r.error){const e=new Error(r.error.message);throw e.code=r.error.code,e.data=r.error.data,e}return r.result}function qf(r){return r&&r.toLowerCase()}const Xw={};class Y2 extends Fp{constructor(e,t,n){if(super(),e!==Xw)throw new Error("do not call the JsonRpcSigner constructor directly; use provider.getSigner");_e(this,"provider",t),n==null&&(n=0),typeof n=="string"?(_e(this,"_address",this.provider.formatter.address(n)),_e(this,"_index",null)):typeof n=="number"?(_e(this,"_index",n),_e(this,"_address",null)):Nn.throwArgumentError("invalid address or index","addressOrIndex",n)}connect(e){return Nn.throwError("cannot alter JSON-RPC Signer connection",me.errors.UNSUPPORTED_OPERATION,{operation:"connect"})}connectUnchecked(){return new wJ(Xw,this.provider,this._address||this._index)}getAddress(){return this._address?Promise.resolve(this._address):this.provider.send("eth_accounts",[]).then(e=>(e.length<=this._index&&Nn.throwError("unknown account #"+this._index,me.errors.UNSUPPORTED_OPERATION,{operation:"getAddress"}),this.provider.formatter.address(e[this._index])))}sendUncheckedTransaction(e){e=Yn(e);const t=this.getAddress().then(n=>(n&&(n=n.toLowerCase()),n));if(e.gasLimit==null){const n=Yn(e);n.from=t,e.gasLimit=this.provider.estimateGas(n)}return e.to!=null&&(e.to=Promise.resolve(e.to).then(n=>ua(this,void 0,void 0,function*(){if(n==null)return null;const i=yield this.provider.resolveName(n);return i==null&&Nn.throwArgumentError("provided ENS name resolves to null","tx.to",n),i}))),Tn({tx:Tn(e),sender:t}).then(({tx:n,sender:i})=>{n.from!=null?n.from.toLowerCase()!==i&&Nn.throwArgumentError("from address mismatch","transaction",e):n.from=i;const s=this.provider.constructor.hexlifyTransaction(n,{from:!0});return this.provider.send("eth_sendTransaction",[s]).then(o=>o,o=>(typeof o.message=="string"&&o.message.match(/user denied/i)&&Nn.throwError("user rejected transaction",me.errors.ACTION_REJECTED,{action:"sendTransaction",transaction:n}),X2("sendTransaction",o,s)))})}signTransaction(e){return Nn.throwError("signing transactions is unsupported",me.errors.UNSUPPORTED_OPERATION,{operation:"signTransaction"})}sendTransaction(e){return ua(this,void 0,void 0,function*(){const t=yield this.provider._getInternalBlockNumber(100+2*this.provider.pollingInterval),n=yield this.sendUncheckedTransaction(e);try{return yield kd(()=>ua(this,void 0,void 0,function*(){const i=yield this.provider.getTransaction(n);if(i!==null)return this.provider._wrapTransaction(i,n,t)}),{oncePoll:this.provider})}catch(i){throw i.transactionHash=n,i}})}signMessage(e){return ua(this,void 0,void 0,function*(){const t=typeof e=="string"?Mo(e):e,n=yield this.getAddress();try{return yield this.provider.send("personal_sign",[Ke(t),n.toLowerCase()])}catch(i){throw typeof i.message=="string"&&i.message.match(/user denied/i)&&Nn.throwError("user rejected signing",me.errors.ACTION_REJECTED,{action:"signMessage",from:n,messageData:e}),i}})}_legacySignMessage(e){return ua(this,void 0,void 0,function*(){const t=typeof e=="string"?Mo(e):e,n=yield this.getAddress();try{return yield this.provider.send("eth_sign",[n.toLowerCase(),Ke(t)])}catch(i){throw typeof i.message=="string"&&i.message.match(/user denied/i)&&Nn.throwError("user rejected signing",me.errors.ACTION_REJECTED,{action:"_legacySignMessage",from:n,messageData:e}),i}})}_signTypedData(e,t,n){return ua(this,void 0,void 0,function*(){const i=yield vi.resolveNames(e,t,n,o=>this.provider.resolveName(o)),s=yield this.getAddress();try{return yield this.provider.send("eth_signTypedData_v4",[s.toLowerCase(),JSON.stringify(vi.getPayload(i.domain,t,i.value))])}catch(o){throw typeof o.message=="string"&&o.message.match(/user denied/i)&&Nn.throwError("user rejected signing",me.errors.ACTION_REJECTED,{action:"_signTypedData",from:s,messageData:{domain:i.domain,types:t,value:i.value}}),o}})}unlock(e){return ua(this,void 0,void 0,function*(){const t=this.provider,n=yield this.getAddress();return t.send("personal_unlockAccount",[n.toLowerCase(),e,null])})}}class wJ extends Y2{sendTransaction(e){return this.sendUncheckedTransaction(e).then(t=>({hash:t,nonce:null,gasLimit:null,gasPrice:null,data:null,value:null,chainId:null,confirmations:0,from:null,wait:n=>this.provider.waitForTransaction(t,n)}))}}const FJ={chainId:!0,data:!0,gasLimit:!0,gasPrice:!0,nonce:!0,to:!0,value:!0,type:!0,accessList:!0,maxFeePerGas:!0,maxPriorityFeePerGas:!0};class IJ extends gJ{constructor(e,t){let n=t;n==null&&(n=new Promise((i,s)=>{setTimeout(()=>{this.detectNetwork().then(o=>{i(o)},o=>{s(o)})},0)})),super(n),e||(e=Fo(this.constructor,"defaultUrl")()),typeof e=="string"?_e(this,"connection",Object.freeze({url:e})):_e(this,"connection",Object.freeze(Yn(e))),this._nextId=42}get _cache(){return this._eventLoopCache==null&&(this._eventLoopCache={}),this._eventLoopCache}static defaultUrl(){return"http://localhost:8545"}detectNetwork(){return this._cache.detectNetwork||(this._cache.detectNetwork=this._uncachedDetectNetwork(),setTimeout(()=>{this._cache.detectNetwork=null},0)),this._cache.detectNetwork}_uncachedDetectNetwork(){return ua(this,void 0,void 0,function*(){yield fb(0);let e=null;try{e=yield this.send("eth_chainId",[])}catch{try{e=yield this.send("net_version",[])}catch{}}if(e!=null){const t=Fo(this.constructor,"getNetwork");try{return t(De.from(e).toNumber())}catch(n){return Nn.throwError("could not detect network",me.errors.NETWORK_ERROR,{chainId:e,event:"invalidNetwork",serverError:n})}}return Nn.throwError("could not detect network",me.errors.NETWORK_ERROR,{event:"noNetwork"})})}getSigner(e){return new Y2(Xw,this,e)}getUncheckedSigner(e){return this.getSigner(e).connectUnchecked()}listAccounts(){return this.send("eth_accounts",[]).then(e=>e.map(t=>this.formatter.address(t)))}send(e,t){const n={method:e,params:t,id:this._nextId++,jsonrpc:"2.0"};this.emit("debug",{action:"request",request:Ea(n),provider:this});const i=["eth_chainId","eth_blockNumber"].indexOf(e)>=0;if(i&&this._cache[e])return this._cache[e];const s=vU(this.connection,JSON.stringify(n),CJ).then(o=>(this.emit("debug",{action:"response",request:n,response:o,provider:this}),o),o=>{throw this.emit("debug",{action:"response",error:o,request:n,provider:this}),o});return i&&(this._cache[e]=s,setTimeout(()=>{this._cache[e]=null},0)),s}prepareRequest(e,t){switch(e){case"getBlockNumber":return["eth_blockNumber",[]];case"getGasPrice":return["eth_gasPrice",[]];case"getBalance":return["eth_getBalance",[qf(t.address),t.blockTag]];case"getTransactionCount":return["eth_getTransactionCount",[qf(t.address),t.blockTag]];case"getCode":return["eth_getCode",[qf(t.address),t.blockTag]];case"getStorageAt":return["eth_getStorageAt",[qf(t.address),yn(t.position,32),t.blockTag]];case"sendTransaction":return["eth_sendRawTransaction",[t.signedTransaction]];case"getBlock":return t.blockTag?["eth_getBlockByNumber",[t.blockTag,!!t.includeTransactions]]:t.blockHash?["eth_getBlockByHash",[t.blockHash,!!t.includeTransactions]]:null;case"getTransaction":return["eth_getTransactionByHash",[t.transactionHash]];case"getTransactionReceipt":return["eth_getTransactionReceipt",[t.transactionHash]];case"call":return["eth_call",[Fo(this.constructor,"hexlifyTransaction")(t.transaction,{from:!0}),t.blockTag]];case"estimateGas":return["eth_estimateGas",[Fo(this.constructor,"hexlifyTransaction")(t.transaction,{from:!0})]];case"getLogs":return t.filter&&t.filter.address!=null&&(t.filter.address=qf(t.filter.address)),["eth_getLogs",[t.filter]]}return null}perform(e,t){return ua(this,void 0,void 0,function*(){if(e==="call"||e==="estimateGas"){const i=t.transaction;if(i&&i.type!=null&&De.from(i.type).isZero()&&i.maxFeePerGas==null&&i.maxPriorityFeePerGas==null){const s=yield this.getFeeData();s.maxFeePerGas==null&&s.maxPriorityFeePerGas==null&&(t=Yn(t),t.transaction=Yn(i),delete t.transaction.type)}}const n=this.prepareRequest(e,t);n==null&&Nn.throwError(e+" not implemented",me.errors.NOT_IMPLEMENTED,{operation:e});try{return yield this.send(n[0],n[1])}catch(i){return X2(e,i,t)}})}_startEvent(e){e.tag==="pending"&&this._startPending(),super._startEvent(e)}_startPending(){if(this._pendingFilter!=null)return;const e=this,t=this.send("eth_newPendingTransactionFilter",[]);this._pendingFilter=t,t.then(function(n){function i(){e.send("eth_getFilterChanges",[n]).then(function(s){if(e._pendingFilter!=t)return null;let o=Promise.resolve();return s.forEach(function(a){e._emitted["t:"+a.toLowerCase()]="pending",o=o.then(function(){return e.getTransaction(a).then(function(A){return e.emit("pending",A),null})})}),o.then(function(){return fb(1e3)})}).then(function(){if(e._pendingFilter!=t){e.send("eth_uninstallFilter",[n]);return}return setTimeout(function(){i()},0),null}).catch(s=>{})}return i(),n}).catch(n=>{})}_stopEvent(e){e.tag==="pending"&&this.listenerCount("pending")===0&&(this._pendingFilter=null),super._stopEvent(e)}static hexlifyTransaction(e,t){const n=Yn(FJ);if(t)for(const s in t)t[s]&&(n[s]=!0);q3(e,n);const i={};return["chainId","gasLimit","gasPrice","type","maxFeePerGas","maxPriorityFeePerGas","nonce","value"].forEach(function(s){if(e[s]==null)return;const o=gU(De.from(e[s]));s==="gasLimit"&&(s="gas"),i[s]=o}),["from","to","data"].forEach(function(s){e[s]!=null&&(i[s]=Ke(e[s]))}),e.accessList&&(i.accessList=kf(e.accessList)),i}}const db=new me(PB);let UJ=1;function hb(r,e){const t="Web3LegacyFetcher";return function(n,i){const s={method:n,params:i,id:UJ++,jsonrpc:"2.0"};return new Promise((o,a)=>{this.emit("debug",{action:"request",fetcher:t,request:Ea(s),provider:this}),e(s,(A,l)=>{if(A)return this.emit("debug",{action:"response",fetcher:t,error:A,request:s,provider:this}),a(A);if(this.emit("debug",{action:"response",fetcher:t,request:s,response:l,provider:this}),l.error){const c=new Error(l.error.message);return c.code=l.error.code,c.data=l.error.data,a(c)}o(l.result)})})}}function xJ(r){return function(e,t){t==null&&(t=[]);const n={method:e,params:t};return this.emit("debug",{action:"request",fetcher:"Eip1193Fetcher",request:Ea(n),provider:this}),r.request(n).then(i=>(this.emit("debug",{action:"response",fetcher:"Eip1193Fetcher",request:n,response:i,provider:this}),i),i=>{throw this.emit("debug",{action:"response",fetcher:"Eip1193Fetcher",request:n,error:i,provider:this}),i})}}class QJ extends IJ{constructor(e,t){e==null&&db.throwArgumentError("missing provider","provider",e);let n=null,i=null,s=null;typeof e=="function"?(n="unknown:",i=e):(n=e.host||e.path||"",!n&&e.isMetaMask&&(n="metamask"),s=e,e.request?(n===""&&(n="eip-1193:"),i=xJ(e)):e.sendAsync?i=hb(e,e.sendAsync.bind(e)):e.send?i=hb(e,e.send.bind(e)):db.throwArgumentError("unsupported provider","provider",e),n||(n="unknown:")),super(n,t),_e(this,"jsonRpcFetchFunc",i),_e(this,"provider",s)}send(e,t){return this.jsonRpcFetchFunc(e,t)}}var bJ=!0,iy="Invariant failed";function ya(r,e){if(!r){if(bJ)throw new Error(iy);var t=typeof e=="function"?e():e,n=t?"".concat(iy,": ").concat(t):iy;throw new Error(n)}}var Gs;(function(r){r.Update="Web3ReactUpdate",r.Error="Web3ReactError",r.Deactivate="Web3ReactDeactivate"})(Gs||(Gs={}));function Sh(){return Sh=Object.assign||function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},Sh.apply(this,arguments)}function K2(r,e){r.prototype=Object.create(e.prototype),r.prototype.constructor=r,_h(r,e)}function Yw(r){return Yw=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Yw(r)}function _h(r,e){return _h=Object.setPrototypeOf||function(n,i){return n.__proto__=i,n},_h(r,e)}function EJ(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function Rm(r,e,t){return EJ()?Rm=Reflect.construct:Rm=function(i,s,o){var a=[null];a.push.apply(a,s);var A=Function.bind.apply(i,a),l=new A;return o&&_h(l,o.prototype),l},Rm.apply(null,arguments)}function SJ(r){return Function.toString.call(r).indexOf("[native code]")!==-1}function p0(r){var e=typeof Map=="function"?new Map:void 0;return p0=function(n){if(n===null||!SJ(n))return n;if(typeof n!="function")throw new TypeError("Super expression must either be null or a function");if(typeof e<"u"){if(e.has(n))return e.get(n);e.set(n,i)}function i(){return Rm(n,arguments,Yw(this).constructor)}return i.prototype=Object.create(n.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),_h(i,n)},p0(r)}typeof Symbol<"u"&&(Symbol.iterator||(Symbol.iterator=Symbol("Symbol.iterator")));typeof Symbol<"u"&&(Symbol.asyncIterator||(Symbol.asyncIterator=Symbol("Symbol.asyncIterator")));function pb(r,e){try{var t=r()}catch(n){return e(n)}return t&&t.then?t.then(void 0,e):t}function j2(r){if(typeof r=="string"){r=r.replace(/^Ox/,"0x");var e=Number.parseInt(r,r.trim().substring(0,2)==="0x"?16:10);return Number.isNaN(e)&&ya(!1),e}else return Number.isInteger(r)||ya(!1),r}function q2(r){typeof r=="string"&&r.match(/^(0x)?[0-9a-fA-F]{40}$/)||ya(!1);for(var e=r.substring(0,2)==="0x"?r:"0x"+r,t=e.toLowerCase().substring(2).split(""),n=new Uint8Array(40),i=0;i<40;i++)n[i]=t[i].charCodeAt(0);for(var s=nt(kn(n)),o=0;o<40;o+=2)s[o>>1]>>4>=8&&(t[o]=t[o].toUpperCase()),(s[o>>1]&15)>=8&&(t[o+1]=t[o+1].toUpperCase());var a="0x"+t.join("");return e.match(/([A-F].*[a-f])|([a-f].*[A-F])/)&&e!==a&&ya(!1),a}var gb=function(e,t){try{var n=function(o){return Promise.resolve(Promise.all([t.chainId===void 0?e.getChainId():t.chainId,t.account===void 0?e.getAccount():t.account])).then(function(a){var A=a[0],l=a[1],c=j2(A);if(e.supportedChainIds&&!e.supportedChainIds.includes(c))throw new $2(c,e.supportedChainIds);var u=l===null?l:q2(l);return{provider:o,chainId:c,account:u}})},i=t.provider===void 0;return Promise.resolve(i?Promise.resolve(e.getProvider()).then(n):n(t.provider))}catch(s){return Promise.reject(s)}},Hp=function(r){K2(e,r);function e(){var t;return t=r.call(this)||this,t.name=t.constructor.name,t}return e}(p0(Error)),$2=function(r){K2(e,r);function e(t,n){var i;return i=r.call(this)||this,i.name=i.constructor.name,i.message="Unsupported chain id: "+t+". Supported chain ids are: "+n+".",i}return e}(p0(Error)),nr;(function(r){r[r.ACTIVATE_CONNECTOR=0]="ACTIVATE_CONNECTOR",r[r.UPDATE=1]="UPDATE",r[r.UPDATE_FROM_ERROR=2]="UPDATE_FROM_ERROR",r[r.ERROR=3]="ERROR",r[r.ERROR_FROM_ACTIVATION=4]="ERROR_FROM_ACTIVATION",r[r.DEACTIVATE_CONNECTOR=5]="DEACTIVATE_CONNECTOR"})(nr||(nr={}));function _J(r,e){var t=e.type,n=e.payload;switch(t){case nr.ACTIVATE_CONNECTOR:{var i=n.connector,s=n.provider,o=n.chainId,a=n.account,A=n.onError;return{connector:i,provider:s,chainId:o,account:a,onError:A}}case nr.UPDATE:{var l=n.provider,c=n.chainId,u=n.account;return Sh({},r,l===void 0?{}:{provider:l},c===void 0?{}:{chainId:c},u===void 0?{}:{account:u})}case nr.UPDATE_FROM_ERROR:{var f=n.provider,d=n.chainId,p=n.account;return Sh({},r,f===void 0?{}:{provider:f},d===void 0?{}:{chainId:d},p===void 0?{}:{account:p},{error:void 0})}case nr.ERROR:{var h=n.error,m=r.connector,g=r.onError;return{connector:m,error:h,onError:g}}case nr.ERROR_FROM_ACTIVATION:{var B=n.connector,v=n.error;return{connector:B,error:v}}case nr.DEACTIVATE_CONNECTOR:return{}}}function RJ(){var r=Ie.useReducer(_J,{}),e=r[0],t=r[1],n=e.connector,i=e.provider,s=e.chainId,o=e.account,a=e.onError,A=e.error,l=Ie.useRef(-1);l.current+=1;var c=Ie.useCallback(function(m,g,B){B===void 0&&(B=!1);try{var v=l.current,w=!1;return Promise.resolve(pb(function(){return Promise.resolve(m.activate().then(function(C){return w=!0,C})).then(function(C){return Promise.resolve(gb(m,C)).then(function(I){if(l.current>v)throw new Hp;t({type:nr.ACTIVATE_CONNECTOR,payload:Sh({connector:m},I,{onError:g})})})})},function(C){if(C instanceof Hp)w&&m.deactivate();else{if(B)throw w&&m.deactivate(),C;g?(w&&m.deactivate(),g(C)):t({type:nr.ERROR_FROM_ACTIVATION,payload:{connector:m,error:C}})}}))}catch(C){return Promise.reject(C)}},[]),u=Ie.useCallback(function(m){t({type:nr.ERROR,payload:{error:m}})},[]),f=Ie.useCallback(function(){t({type:nr.DEACTIVATE_CONNECTOR})},[]),d=Ie.useCallback(function(m){try{if(!n)throw Error("This should never happen, it's just so Typescript stops complaining");var g=l.current;return Promise.resolve(function(){if(A)return pb(function(){return Promise.resolve(gb(n,m)).then(function(C){if(l.current>g)throw new Hp;t({type:nr.UPDATE_FROM_ERROR,payload:C})})},function(C){C instanceof Hp||(a?a(C):t({type:nr.ERROR,payload:{error:C}}))});var B=m.chainId===void 0?void 0:j2(m.chainId);if(B!==void 0&&n.supportedChainIds&&!n.supportedChainIds.includes(B)){var v=new $2(B,n.supportedChainIds);a?a(v):t({type:nr.ERROR,payload:{error:v}})}else{var w=typeof m.account=="string"?q2(m.account):m.account;t({type:nr.UPDATE,payload:{provider:m.provider,chainId:B,account:w}})}}())}catch(B){return Promise.reject(B)}},[n,A,a]),p=Ie.useCallback(function(m){a?a(m):t({type:nr.ERROR,payload:{error:m}})},[a]),h=Ie.useCallback(function(){t({type:nr.DEACTIVATE_CONNECTOR})},[]);return Ie.useEffect(function(){return function(){n&&n.deactivate()}},[n]),Ie.useEffect(function(){return n&&n.on(Gs.Update,d).on(Gs.Error,p).on(Gs.Deactivate,h),function(){n&&n.off(Gs.Update,d).off(Gs.Error,p).off(Gs.Deactivate,h)}},[n,d,p,h]),{connector:n,provider:i,chainId:s,account:o,activate:c,setError:u,deactivate:f,error:A}}var eT="primary",uu={};function MJ(r){uu[r]&&ya(!1),uu[r]=Ie.createContext({activate:function(){try{return ya(!1),Promise.resolve()}catch(t){return Promise.reject(t)}},setError:function(){ya(!1)},deactivate:function(){ya(!1)},active:!1}),uu[r].displayName="Web3ReactContext - "+r;var e=uu[r].Provider;return function(n){var i=n.getLibrary,s=n.children,o=RJ(),a=o.connector,A=o.provider,l=o.chainId,c=o.account,u=o.activate,f=o.setError,d=o.deactivate,p=o.error,h=a!==void 0&&l!==void 0&&c!==void 0&&!p,m=Ie.useMemo(function(){return h&&l!==void 0&&Number.isInteger(l)&&a?i(A,a):void 0},[h,i,A,a,l]),g={connector:a,library:m,chainId:l,account:c,activate:u,setError:f,deactivate:d,active:h,error:p};return et.createElement(e,{value:g},s)}}var TJ=MJ(eT);function NJ(r){return r===void 0&&(r=eT),Object.keys(uu).includes(r)||ya(!1),uu[r]}function VJ(r){return Ie.useContext(NJ(r))}var Kw={},jw={},DJ={get exports(){return jw},set exports(r){jw=r}},ki={},qw={},kJ={get exports(){return qw},set exports(r){qw=r}},tT={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(r){function e(T,Z){var G=T.length;T.push(Z);e:for(;0<G;){var D=G-1>>>1,x=T[D];if(0<i(x,Z))T[D]=Z,T[G]=x,G=D;else break e}}function t(T){return T.length===0?null:T[0]}function n(T){if(T.length===0)return null;var Z=T[0],G=T.pop();if(G!==Z){T[0]=G;e:for(var D=0,x=T.length,P=x>>>1;D<P;){var oe=2*(D+1)-1,M=T[oe],k=oe+1,q=T[k];if(0>i(M,G))k<x&&0>i(q,M)?(T[D]=q,T[k]=G,D=k):(T[D]=M,T[oe]=G,D=oe);else if(k<x&&0>i(q,G))T[D]=q,T[k]=G,D=k;else break e}}return Z}function i(T,Z){var G=T.sortIndex-Z.sortIndex;return G!==0?G:T.id-Z.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;r.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();r.unstable_now=function(){return o.now()-a}}var A=[],l=[],c=1,u=null,f=3,d=!1,p=!1,h=!1,m=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,B=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function v(T){for(var Z=t(l);Z!==null;){if(Z.callback===null)n(l);else if(Z.startTime<=T)n(l),Z.sortIndex=Z.expirationTime,e(A,Z);else break;Z=t(l)}}function w(T){if(h=!1,v(T),!p)if(t(A)!==null)p=!0,_(C);else{var Z=t(l);Z!==null&&L(w,Z.startTime-T)}}function C(T,Z){p=!1,h&&(h=!1,g(U),U=-1),d=!0;var G=f;try{for(v(Z),u=t(A);u!==null&&(!(u.expirationTime>Z)||T&&!J());){var D=u.callback;if(typeof D=="function"){u.callback=null,f=u.priorityLevel;var x=D(u.expirationTime<=Z);Z=r.unstable_now(),typeof x=="function"?u.callback=x:u===t(A)&&n(A),v(Z)}else n(A);u=t(A)}if(u!==null)var P=!0;else{var oe=t(l);oe!==null&&L(w,oe.startTime-Z),P=!1}return P}finally{u=null,f=G,d=!1}}var I=!1,E=null,U=-1,S=5,V=-1;function J(){return!(r.unstable_now()-V<S)}function z(){if(E!==null){var T=r.unstable_now();V=T;var Z=!0;try{Z=E(!0,T)}finally{Z?R():(I=!1,E=null)}}else I=!1}var R;if(typeof B=="function")R=function(){B(z)};else if(typeof MessageChannel<"u"){var y=new MessageChannel,Q=y.port2;y.port1.onmessage=z,R=function(){Q.postMessage(null)}}else R=function(){m(z,0)};function _(T){E=T,I||(I=!0,R())}function L(T,Z){U=m(function(){T(r.unstable_now())},Z)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(T){T.callback=null},r.unstable_continueExecution=function(){p||d||(p=!0,_(C))},r.unstable_forceFrameRate=function(T){0>T||125<T?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<T?Math.floor(1e3/T):5},r.unstable_getCurrentPriorityLevel=function(){return f},r.unstable_getFirstCallbackNode=function(){return t(A)},r.unstable_next=function(T){switch(f){case 1:case 2:case 3:var Z=3;break;default:Z=f}var G=f;f=Z;try{return T()}finally{f=G}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function(T,Z){switch(T){case 1:case 2:case 3:case 4:case 5:break;default:T=3}var G=f;f=T;try{return Z()}finally{f=G}},r.unstable_scheduleCallback=function(T,Z,G){var D=r.unstable_now();switch(typeof G=="object"&&G!==null?(G=G.delay,G=typeof G=="number"&&0<G?D+G:D):G=D,T){case 1:var x=-1;break;case 2:x=250;break;case 5:x=1073741823;break;case 4:x=1e4;break;default:x=5e3}return x=G+x,T={id:c++,callback:Z,priorityLevel:T,startTime:G,expirationTime:x,sortIndex:-1},G>D?(T.sortIndex=G,e(l,T),t(A)===null&&T===t(l)&&(h?(g(U),U=-1):h=!0,L(w,G-D))):(T.sortIndex=x,e(A,T),p||d||(p=!0,_(C))),T},r.unstable_shouldYield=J,r.unstable_wrapCallback=function(T){var Z=f;return function(){var G=f;f=Z;try{return T.apply(this,arguments)}finally{f=G}}}})(tT);(function(r){r.exports=tT})(kJ);/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nT=Ie,Mi=qw;function Ee(r){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+r,t=1;t<arguments.length;t++)e+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+r+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var rT=new Set,Rh={};function cc(r,e){lf(r,e),lf(r+"Capture",e)}function lf(r,e){for(Rh[r]=e,r=0;r<e.length;r++)rT.add(e[r])}var Ra=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),$w=Object.prototype.hasOwnProperty,LJ=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,mb={},Bb={};function WJ(r){return $w.call(Bb,r)?!0:$w.call(mb,r)?!1:LJ.test(r)?Bb[r]=!0:(mb[r]=!0,!1)}function ZJ(r,e,t,n){if(t!==null&&t.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return n?!1:t!==null?!t.acceptsBooleans:(r=r.toLowerCase().slice(0,5),r!=="data-"&&r!=="aria-");default:return!1}}function PJ(r,e,t,n){if(e===null||typeof e>"u"||ZJ(r,e,t,n))return!0;if(n)return!1;if(t!==null)switch(t.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function zr(r,e,t,n,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=n,this.attributeNamespace=i,this.mustUseProperty=t,this.propertyName=r,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var hr={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(r){hr[r]=new zr(r,0,!1,r,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(r){var e=r[0];hr[e]=new zr(e,1,!1,r[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(r){hr[r]=new zr(r,2,!1,r.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(r){hr[r]=new zr(r,2,!1,r,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(r){hr[r]=new zr(r,3,!1,r.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(r){hr[r]=new zr(r,3,!0,r,null,!1,!1)});["capture","download"].forEach(function(r){hr[r]=new zr(r,4,!1,r,null,!1,!1)});["cols","rows","size","span"].forEach(function(r){hr[r]=new zr(r,6,!1,r,null,!1,!1)});["rowSpan","start"].forEach(function(r){hr[r]=new zr(r,5,!1,r.toLowerCase(),null,!1,!1)});var UU=/[\-:]([a-z])/g;function xU(r){return r[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(r){var e=r.replace(UU,xU);hr[e]=new zr(e,1,!1,r,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(r){var e=r.replace(UU,xU);hr[e]=new zr(e,1,!1,r,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(r){var e=r.replace(UU,xU);hr[e]=new zr(e,1,!1,r,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(r){hr[r]=new zr(r,1,!1,r.toLowerCase(),null,!1,!1)});hr.xlinkHref=new zr("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(r){hr[r]=new zr(r,1,!1,r.toLowerCase(),null,!0,!0)});function QU(r,e,t,n){var i=hr.hasOwnProperty(e)?hr[e]:null;(i!==null?i.type!==0:n||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(PJ(e,t,i,n)&&(t=null),n||i===null?WJ(e)&&(t===null?r.removeAttribute(e):r.setAttribute(e,""+t)):i.mustUseProperty?r[i.propertyName]=t===null?i.type===3?!1:"":t:(e=i.attributeName,n=i.attributeNamespace,t===null?r.removeAttribute(e):(i=i.type,t=i===3||i===4&&t===!0?"":""+t,n?r.setAttributeNS(n,e,t):r.setAttribute(e,t))))}var Pa=nT.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,zp=Symbol.for("react.element"),fu=Symbol.for("react.portal"),du=Symbol.for("react.fragment"),bU=Symbol.for("react.strict_mode"),eF=Symbol.for("react.profiler"),iT=Symbol.for("react.provider"),sT=Symbol.for("react.context"),EU=Symbol.for("react.forward_ref"),tF=Symbol.for("react.suspense"),nF=Symbol.for("react.suspense_list"),SU=Symbol.for("react.memo"),lA=Symbol.for("react.lazy"),oT=Symbol.for("react.offscreen"),vb=Symbol.iterator;function $f(r){return r===null||typeof r!="object"?null:(r=vb&&r[vb]||r["@@iterator"],typeof r=="function"?r:null)}var dn=Object.assign,sy;function Ld(r){if(sy===void 0)try{throw Error()}catch(t){var e=t.stack.trim().match(/\n( *(at )?)/);sy=e&&e[1]||""}return`
`+sy+r}var oy=!1;function ay(r,e){if(!r||oy)return"";oy=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(l){var n=l}Reflect.construct(r,[],e)}else{try{e.call()}catch(l){n=l}r.call(e.prototype)}else{try{throw Error()}catch(l){n=l}r()}}catch(l){if(l&&n&&typeof l.stack=="string"){for(var i=l.stack.split(`
`),s=n.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var A=`
`+i[o].replace(" at new "," at ");return r.displayName&&A.includes("<anonymous>")&&(A=A.replace("<anonymous>",r.displayName)),A}while(1<=o&&0<=a);break}}}finally{oy=!1,Error.prepareStackTrace=t}return(r=r?r.displayName||r.name:"")?Ld(r):""}function JJ(r){switch(r.tag){case 5:return Ld(r.type);case 16:return Ld("Lazy");case 13:return Ld("Suspense");case 19:return Ld("SuspenseList");case 0:case 2:case 15:return r=ay(r.type,!1),r;case 11:return r=ay(r.type.render,!1),r;case 1:return r=ay(r.type,!0),r;default:return""}}function rF(r){if(r==null)return null;if(typeof r=="function")return r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case du:return"Fragment";case fu:return"Portal";case eF:return"Profiler";case bU:return"StrictMode";case tF:return"Suspense";case nF:return"SuspenseList"}if(typeof r=="object")switch(r.$$typeof){case sT:return(r.displayName||"Context")+".Consumer";case iT:return(r._context.displayName||"Context")+".Provider";case EU:var e=r.render;return r=r.displayName,r||(r=e.displayName||e.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case SU:return e=r.displayName||null,e!==null?e:rF(r.type)||"Memo";case lA:e=r._payload,r=r._init;try{return rF(r(e))}catch{}}return null}function GJ(r){var e=r.type;switch(r.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return r=e.render,r=r.displayName||r.name||"",e.displayName||(r!==""?"ForwardRef("+r+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return rF(e);case 8:return e===bU?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function HA(r){switch(typeof r){case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function aT(r){var e=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function OJ(r){var e=aT(r)?"checked":"value",t=Object.getOwnPropertyDescriptor(r.constructor.prototype,e),n=""+r[e];if(!r.hasOwnProperty(e)&&typeof t<"u"&&typeof t.get=="function"&&typeof t.set=="function"){var i=t.get,s=t.set;return Object.defineProperty(r,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){n=""+o,s.call(this,o)}}),Object.defineProperty(r,e,{enumerable:t.enumerable}),{getValue:function(){return n},setValue:function(o){n=""+o},stopTracking:function(){r._valueTracker=null,delete r[e]}}}}function Xp(r){r._valueTracker||(r._valueTracker=OJ(r))}function AT(r){if(!r)return!1;var e=r._valueTracker;if(!e)return!0;var t=e.getValue(),n="";return r&&(n=aT(r)?r.checked?"true":"false":r.value),r=n,r!==t?(e.setValue(r),!0):!1}function g0(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}function iF(r,e){var t=e.checked;return dn({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:t??r._wrapperState.initialChecked})}function yb(r,e){var t=e.defaultValue==null?"":e.defaultValue,n=e.checked!=null?e.checked:e.defaultChecked;t=HA(e.value!=null?e.value:t),r._wrapperState={initialChecked:n,initialValue:t,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function lT(r,e){e=e.checked,e!=null&&QU(r,"checked",e,!1)}function sF(r,e){lT(r,e);var t=HA(e.value),n=e.type;if(t!=null)n==="number"?(t===0&&r.value===""||r.value!=t)&&(r.value=""+t):r.value!==""+t&&(r.value=""+t);else if(n==="submit"||n==="reset"){r.removeAttribute("value");return}e.hasOwnProperty("value")?oF(r,e.type,t):e.hasOwnProperty("defaultValue")&&oF(r,e.type,HA(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(r.defaultChecked=!!e.defaultChecked)}function Cb(r,e,t){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var n=e.type;if(!(n!=="submit"&&n!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+r._wrapperState.initialValue,t||e===r.value||(r.value=e),r.defaultValue=e}t=r.name,t!==""&&(r.name=""),r.defaultChecked=!!r._wrapperState.initialChecked,t!==""&&(r.name=t)}function oF(r,e,t){(e!=="number"||g0(r.ownerDocument)!==r)&&(t==null?r.defaultValue=""+r._wrapperState.initialValue:r.defaultValue!==""+t&&(r.defaultValue=""+t))}var Wd=Array.isArray;function Vu(r,e,t,n){if(r=r.options,e){e={};for(var i=0;i<t.length;i++)e["$"+t[i]]=!0;for(t=0;t<r.length;t++)i=e.hasOwnProperty("$"+r[t].value),r[t].selected!==i&&(r[t].selected=i),i&&n&&(r[t].defaultSelected=!0)}else{for(t=""+HA(t),e=null,i=0;i<r.length;i++){if(r[i].value===t){r[i].selected=!0,n&&(r[i].defaultSelected=!0);return}e!==null||r[i].disabled||(e=r[i])}e!==null&&(e.selected=!0)}}function aF(r,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Ee(91));return dn({},e,{value:void 0,defaultValue:void 0,children:""+r._wrapperState.initialValue})}function wb(r,e){var t=e.value;if(t==null){if(t=e.children,e=e.defaultValue,t!=null){if(e!=null)throw Error(Ee(92));if(Wd(t)){if(1<t.length)throw Error(Ee(93));t=t[0]}e=t}e==null&&(e=""),t=e}r._wrapperState={initialValue:HA(t)}}function cT(r,e){var t=HA(e.value),n=HA(e.defaultValue);t!=null&&(t=""+t,t!==r.value&&(r.value=t),e.defaultValue==null&&r.defaultValue!==t&&(r.defaultValue=t)),n!=null&&(r.defaultValue=""+n)}function Fb(r){var e=r.textContent;e===r._wrapperState.initialValue&&e!==""&&e!==null&&(r.value=e)}function uT(r){switch(r){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function AF(r,e){return r==null||r==="http://www.w3.org/1999/xhtml"?uT(e):r==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":r}var Yp,fT=function(r){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,t,n,i){MSApp.execUnsafeLocalFunction(function(){return r(e,t,n,i)})}:r}(function(r,e){if(r.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in r)r.innerHTML=e;else{for(Yp=Yp||document.createElement("div"),Yp.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Yp.firstChild;r.firstChild;)r.removeChild(r.firstChild);for(;e.firstChild;)r.appendChild(e.firstChild)}});function Mh(r,e){if(e){var t=r.firstChild;if(t&&t===r.lastChild&&t.nodeType===3){t.nodeValue=e;return}}r.textContent=e}var ah={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},HJ=["Webkit","ms","Moz","O"];Object.keys(ah).forEach(function(r){HJ.forEach(function(e){e=e+r.charAt(0).toUpperCase()+r.substring(1),ah[e]=ah[r]})});function dT(r,e,t){return e==null||typeof e=="boolean"||e===""?"":t||typeof e!="number"||e===0||ah.hasOwnProperty(r)&&ah[r]?(""+e).trim():e+"px"}function hT(r,e){r=r.style;for(var t in e)if(e.hasOwnProperty(t)){var n=t.indexOf("--")===0,i=dT(t,e[t],n);t==="float"&&(t="cssFloat"),n?r.setProperty(t,i):r[t]=i}}var zJ=dn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function lF(r,e){if(e){if(zJ[r]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Ee(137,r));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Ee(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Ee(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Ee(62))}}function cF(r,e){if(r.indexOf("-")===-1)return typeof e.is=="string";switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var uF=null;function _U(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var fF=null,Du=null,ku=null;function Ib(r){if(r=xp(r)){if(typeof fF!="function")throw Error(Ee(280));var e=r.stateNode;e&&(e=YB(e),fF(r.stateNode,r.type,e))}}function pT(r){Du?ku?ku.push(r):ku=[r]:Du=r}function gT(){if(Du){var r=Du,e=ku;if(ku=Du=null,Ib(r),e)for(r=0;r<e.length;r++)Ib(e[r])}}function mT(r,e){return r(e)}function BT(){}var Ay=!1;function vT(r,e,t){if(Ay)return r(e,t);Ay=!0;try{return mT(r,e,t)}finally{Ay=!1,(Du!==null||ku!==null)&&(BT(),gT())}}function Th(r,e){var t=r.stateNode;if(t===null)return null;var n=YB(t);if(n===null)return null;t=n[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(r=r.type,n=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!n;break e;default:r=!1}if(r)return null;if(t&&typeof t!="function")throw Error(Ee(231,e,typeof t));return t}var dF=!1;if(Ra)try{var ed={};Object.defineProperty(ed,"passive",{get:function(){dF=!0}}),window.addEventListener("test",ed,ed),window.removeEventListener("test",ed,ed)}catch{dF=!1}function XJ(r,e,t,n,i,s,o,a,A){var l=Array.prototype.slice.call(arguments,3);try{e.apply(t,l)}catch(c){this.onError(c)}}var Ah=!1,m0=null,B0=!1,hF=null,YJ={onError:function(r){Ah=!0,m0=r}};function KJ(r,e,t,n,i,s,o,a,A){Ah=!1,m0=null,XJ.apply(YJ,arguments)}function jJ(r,e,t,n,i,s,o,a,A){if(KJ.apply(this,arguments),Ah){if(Ah){var l=m0;Ah=!1,m0=null}else throw Error(Ee(198));B0||(B0=!0,hF=l)}}function uc(r){var e=r,t=r;if(r.alternate)for(;e.return;)e=e.return;else{r=e;do e=r,e.flags&4098&&(t=e.return),r=e.return;while(r)}return e.tag===3?t:null}function yT(r){if(r.tag===13){var e=r.memoizedState;if(e===null&&(r=r.alternate,r!==null&&(e=r.memoizedState)),e!==null)return e.dehydrated}return null}function Ub(r){if(uc(r)!==r)throw Error(Ee(188))}function qJ(r){var e=r.alternate;if(!e){if(e=uc(r),e===null)throw Error(Ee(188));return e!==r?null:r}for(var t=r,n=e;;){var i=t.return;if(i===null)break;var s=i.alternate;if(s===null){if(n=i.return,n!==null){t=n;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===t)return Ub(i),r;if(s===n)return Ub(i),e;s=s.sibling}throw Error(Ee(188))}if(t.return!==n.return)t=i,n=s;else{for(var o=!1,a=i.child;a;){if(a===t){o=!0,t=i,n=s;break}if(a===n){o=!0,n=i,t=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===t){o=!0,t=s,n=i;break}if(a===n){o=!0,n=s,t=i;break}a=a.sibling}if(!o)throw Error(Ee(189))}}if(t.alternate!==n)throw Error(Ee(190))}if(t.tag!==3)throw Error(Ee(188));return t.stateNode.current===t?r:e}function CT(r){return r=qJ(r),r!==null?wT(r):null}function wT(r){if(r.tag===5||r.tag===6)return r;for(r=r.child;r!==null;){var e=wT(r);if(e!==null)return e;r=r.sibling}return null}var FT=Mi.unstable_scheduleCallback,xb=Mi.unstable_cancelCallback,$J=Mi.unstable_shouldYield,eG=Mi.unstable_requestPaint,Qn=Mi.unstable_now,tG=Mi.unstable_getCurrentPriorityLevel,RU=Mi.unstable_ImmediatePriority,IT=Mi.unstable_UserBlockingPriority,v0=Mi.unstable_NormalPriority,nG=Mi.unstable_LowPriority,UT=Mi.unstable_IdlePriority,OB=null,Eo=null;function rG(r){if(Eo&&typeof Eo.onCommitFiberRoot=="function")try{Eo.onCommitFiberRoot(OB,r,void 0,(r.current.flags&128)===128)}catch{}}var zs=Math.clz32?Math.clz32:oG,iG=Math.log,sG=Math.LN2;function oG(r){return r>>>=0,r===0?32:31-(iG(r)/sG|0)|0}var Kp=64,jp=4194304;function Zd(r){switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return r&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return r}}function y0(r,e){var t=r.pendingLanes;if(t===0)return 0;var n=0,i=r.suspendedLanes,s=r.pingedLanes,o=t&268435455;if(o!==0){var a=o&~i;a!==0?n=Zd(a):(s&=o,s!==0&&(n=Zd(s)))}else o=t&~i,o!==0?n=Zd(o):s!==0&&(n=Zd(s));if(n===0)return 0;if(e!==0&&e!==n&&!(e&i)&&(i=n&-n,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(n&4&&(n|=t&16),e=r.entangledLanes,e!==0)for(r=r.entanglements,e&=n;0<e;)t=31-zs(e),i=1<<t,n|=r[t],e&=~i;return n}function aG(r,e){switch(r){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function AG(r,e){for(var t=r.suspendedLanes,n=r.pingedLanes,i=r.expirationTimes,s=r.pendingLanes;0<s;){var o=31-zs(s),a=1<<o,A=i[o];A===-1?(!(a&t)||a&n)&&(i[o]=aG(a,e)):A<=e&&(r.expiredLanes|=a),s&=~a}}function pF(r){return r=r.pendingLanes&-1073741825,r!==0?r:r&1073741824?1073741824:0}function xT(){var r=Kp;return Kp<<=1,!(Kp&4194240)&&(Kp=64),r}function ly(r){for(var e=[],t=0;31>t;t++)e.push(r);return e}function Ip(r,e,t){r.pendingLanes|=e,e!==536870912&&(r.suspendedLanes=0,r.pingedLanes=0),r=r.eventTimes,e=31-zs(e),r[e]=t}function lG(r,e){var t=r.pendingLanes&~e;r.pendingLanes=e,r.suspendedLanes=0,r.pingedLanes=0,r.expiredLanes&=e,r.mutableReadLanes&=e,r.entangledLanes&=e,e=r.entanglements;var n=r.eventTimes;for(r=r.expirationTimes;0<t;){var i=31-zs(t),s=1<<i;e[i]=0,n[i]=-1,r[i]=-1,t&=~s}}function MU(r,e){var t=r.entangledLanes|=e;for(r=r.entanglements;t;){var n=31-zs(t),i=1<<n;i&e|r[n]&e&&(r[n]|=e),t&=~i}}var Pt=0;function QT(r){return r&=-r,1<r?4<r?r&268435455?16:536870912:4:1}var bT,TU,ET,ST,_T,gF=!1,qp=[],SA=null,_A=null,RA=null,Nh=new Map,Vh=new Map,pA=[],cG="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Qb(r,e){switch(r){case"focusin":case"focusout":SA=null;break;case"dragenter":case"dragleave":_A=null;break;case"mouseover":case"mouseout":RA=null;break;case"pointerover":case"pointerout":Nh.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Vh.delete(e.pointerId)}}function td(r,e,t,n,i,s){return r===null||r.nativeEvent!==s?(r={blockedOn:e,domEventName:t,eventSystemFlags:n,nativeEvent:s,targetContainers:[i]},e!==null&&(e=xp(e),e!==null&&TU(e)),r):(r.eventSystemFlags|=n,e=r.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),r)}function uG(r,e,t,n,i){switch(e){case"focusin":return SA=td(SA,r,e,t,n,i),!0;case"dragenter":return _A=td(_A,r,e,t,n,i),!0;case"mouseover":return RA=td(RA,r,e,t,n,i),!0;case"pointerover":var s=i.pointerId;return Nh.set(s,td(Nh.get(s)||null,r,e,t,n,i)),!0;case"gotpointercapture":return s=i.pointerId,Vh.set(s,td(Vh.get(s)||null,r,e,t,n,i)),!0}return!1}function RT(r){var e=Sl(r.target);if(e!==null){var t=uc(e);if(t!==null){if(e=t.tag,e===13){if(e=yT(t),e!==null){r.blockedOn=e,_T(r.priority,function(){ET(t)});return}}else if(e===3&&t.stateNode.current.memoizedState.isDehydrated){r.blockedOn=t.tag===3?t.stateNode.containerInfo:null;return}}}r.blockedOn=null}function Mm(r){if(r.blockedOn!==null)return!1;for(var e=r.targetContainers;0<e.length;){var t=mF(r.domEventName,r.eventSystemFlags,e[0],r.nativeEvent);if(t===null){t=r.nativeEvent;var n=new t.constructor(t.type,t);uF=n,t.target.dispatchEvent(n),uF=null}else return e=xp(t),e!==null&&TU(e),r.blockedOn=t,!1;e.shift()}return!0}function bb(r,e,t){Mm(r)&&t.delete(e)}function fG(){gF=!1,SA!==null&&Mm(SA)&&(SA=null),_A!==null&&Mm(_A)&&(_A=null),RA!==null&&Mm(RA)&&(RA=null),Nh.forEach(bb),Vh.forEach(bb)}function nd(r,e){r.blockedOn===e&&(r.blockedOn=null,gF||(gF=!0,Mi.unstable_scheduleCallback(Mi.unstable_NormalPriority,fG)))}function Dh(r){function e(i){return nd(i,r)}if(0<qp.length){nd(qp[0],r);for(var t=1;t<qp.length;t++){var n=qp[t];n.blockedOn===r&&(n.blockedOn=null)}}for(SA!==null&&nd(SA,r),_A!==null&&nd(_A,r),RA!==null&&nd(RA,r),Nh.forEach(e),Vh.forEach(e),t=0;t<pA.length;t++)n=pA[t],n.blockedOn===r&&(n.blockedOn=null);for(;0<pA.length&&(t=pA[0],t.blockedOn===null);)RT(t),t.blockedOn===null&&pA.shift()}var Lu=Pa.ReactCurrentBatchConfig,C0=!0;function dG(r,e,t,n){var i=Pt,s=Lu.transition;Lu.transition=null;try{Pt=1,NU(r,e,t,n)}finally{Pt=i,Lu.transition=s}}function hG(r,e,t,n){var i=Pt,s=Lu.transition;Lu.transition=null;try{Pt=4,NU(r,e,t,n)}finally{Pt=i,Lu.transition=s}}function NU(r,e,t,n){if(C0){var i=mF(r,e,t,n);if(i===null)vy(r,e,n,w0,t),Qb(r,n);else if(uG(i,r,e,t,n))n.stopPropagation();else if(Qb(r,n),e&4&&-1<cG.indexOf(r)){for(;i!==null;){var s=xp(i);if(s!==null&&bT(s),s=mF(r,e,t,n),s===null&&vy(r,e,n,w0,t),s===i)break;i=s}i!==null&&n.stopPropagation()}else vy(r,e,n,null,t)}}var w0=null;function mF(r,e,t,n){if(w0=null,r=_U(n),r=Sl(r),r!==null)if(e=uc(r),e===null)r=null;else if(t=e.tag,t===13){if(r=yT(e),r!==null)return r;r=null}else if(t===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;r=null}else e!==r&&(r=null);return w0=r,null}function MT(r){switch(r){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(tG()){case RU:return 1;case IT:return 4;case v0:case nG:return 16;case UT:return 536870912;default:return 16}default:return 16}}var vA=null,VU=null,Tm=null;function TT(){if(Tm)return Tm;var r,e=VU,t=e.length,n,i="value"in vA?vA.value:vA.textContent,s=i.length;for(r=0;r<t&&e[r]===i[r];r++);var o=t-r;for(n=1;n<=o&&e[t-n]===i[s-n];n++);return Tm=i.slice(r,1<n?1-n:void 0)}function Nm(r){var e=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&e===13&&(r=13)):r=e,r===10&&(r=13),32<=r||r===13?r:0}function $p(){return!0}function Eb(){return!1}function Li(r){function e(t,n,i,s,o){this._reactName=t,this._targetInst=i,this.type=n,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in r)r.hasOwnProperty(a)&&(t=r[a],this[a]=t?t(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?$p:Eb,this.isPropagationStopped=Eb,this}return dn(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():typeof t.returnValue!="unknown"&&(t.returnValue=!1),this.isDefaultPrevented=$p)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():typeof t.cancelBubble!="unknown"&&(t.cancelBubble=!0),this.isPropagationStopped=$p)},persist:function(){},isPersistent:$p}),e}var Lf={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},DU=Li(Lf),Up=dn({},Lf,{view:0,detail:0}),pG=Li(Up),cy,uy,rd,HB=dn({},Up,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:kU,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==rd&&(rd&&r.type==="mousemove"?(cy=r.screenX-rd.screenX,uy=r.screenY-rd.screenY):uy=cy=0,rd=r),cy)},movementY:function(r){return"movementY"in r?r.movementY:uy}}),Sb=Li(HB),gG=dn({},HB,{dataTransfer:0}),mG=Li(gG),BG=dn({},Up,{relatedTarget:0}),fy=Li(BG),vG=dn({},Lf,{animationName:0,elapsedTime:0,pseudoElement:0}),yG=Li(vG),CG=dn({},Lf,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),wG=Li(CG),FG=dn({},Lf,{data:0}),_b=Li(FG),IG={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},UG={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},xG={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function QG(r){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(r):(r=xG[r])?!!e[r]:!1}function kU(){return QG}var bG=dn({},Up,{key:function(r){if(r.key){var e=IG[r.key]||r.key;if(e!=="Unidentified")return e}return r.type==="keypress"?(r=Nm(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?UG[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:kU,charCode:function(r){return r.type==="keypress"?Nm(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?Nm(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),EG=Li(bG),SG=dn({},HB,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Rb=Li(SG),_G=dn({},Up,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:kU}),RG=Li(_G),MG=dn({},Lf,{propertyName:0,elapsedTime:0,pseudoElement:0}),TG=Li(MG),NG=dn({},HB,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),VG=Li(NG),DG=[9,13,27,32],LU=Ra&&"CompositionEvent"in window,lh=null;Ra&&"documentMode"in document&&(lh=document.documentMode);var kG=Ra&&"TextEvent"in window&&!lh,NT=Ra&&(!LU||lh&&8<lh&&11>=lh),Mb=String.fromCharCode(32),Tb=!1;function VT(r,e){switch(r){case"keyup":return DG.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function DT(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var hu=!1;function LG(r,e){switch(r){case"compositionend":return DT(e);case"keypress":return e.which!==32?null:(Tb=!0,Mb);case"textInput":return r=e.data,r===Mb&&Tb?null:r;default:return null}}function WG(r,e){if(hu)return r==="compositionend"||!LU&&VT(r,e)?(r=TT(),Tm=VU=vA=null,hu=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return NT&&e.locale!=="ko"?null:e.data;default:return null}}var ZG={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Nb(r){var e=r&&r.nodeName&&r.nodeName.toLowerCase();return e==="input"?!!ZG[r.type]:e==="textarea"}function kT(r,e,t,n){pT(n),e=F0(e,"onChange"),0<e.length&&(t=new DU("onChange","change",null,t,n),r.push({event:t,listeners:e}))}var ch=null,kh=null;function PG(r){YT(r,0)}function zB(r){var e=mu(r);if(AT(e))return r}function JG(r,e){if(r==="change")return e}var LT=!1;if(Ra){var dy;if(Ra){var hy="oninput"in document;if(!hy){var Vb=document.createElement("div");Vb.setAttribute("oninput","return;"),hy=typeof Vb.oninput=="function"}dy=hy}else dy=!1;LT=dy&&(!document.documentMode||9<document.documentMode)}function Db(){ch&&(ch.detachEvent("onpropertychange",WT),kh=ch=null)}function WT(r){if(r.propertyName==="value"&&zB(kh)){var e=[];kT(e,kh,r,_U(r)),vT(PG,e)}}function GG(r,e,t){r==="focusin"?(Db(),ch=e,kh=t,ch.attachEvent("onpropertychange",WT)):r==="focusout"&&Db()}function OG(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return zB(kh)}function HG(r,e){if(r==="click")return zB(e)}function zG(r,e){if(r==="input"||r==="change")return zB(e)}function XG(r,e){return r===e&&(r!==0||1/r===1/e)||r!==r&&e!==e}var qs=typeof Object.is=="function"?Object.is:XG;function Lh(r,e){if(qs(r,e))return!0;if(typeof r!="object"||r===null||typeof e!="object"||e===null)return!1;var t=Object.keys(r),n=Object.keys(e);if(t.length!==n.length)return!1;for(n=0;n<t.length;n++){var i=t[n];if(!$w.call(e,i)||!qs(r[i],e[i]))return!1}return!0}function kb(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function Lb(r,e){var t=kb(r);r=0;for(var n;t;){if(t.nodeType===3){if(n=r+t.textContent.length,r<=e&&n>=e)return{node:t,offset:e-r};r=n}e:{for(;t;){if(t.nextSibling){t=t.nextSibling;break e}t=t.parentNode}t=void 0}t=kb(t)}}function ZT(r,e){return r&&e?r===e?!0:r&&r.nodeType===3?!1:e&&e.nodeType===3?ZT(r,e.parentNode):"contains"in r?r.contains(e):r.compareDocumentPosition?!!(r.compareDocumentPosition(e)&16):!1:!1}function PT(){for(var r=window,e=g0();e instanceof r.HTMLIFrameElement;){try{var t=typeof e.contentWindow.location.href=="string"}catch{t=!1}if(t)r=e.contentWindow;else break;e=g0(r.document)}return e}function WU(r){var e=r&&r.nodeName&&r.nodeName.toLowerCase();return e&&(e==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||e==="textarea"||r.contentEditable==="true")}function YG(r){var e=PT(),t=r.focusedElem,n=r.selectionRange;if(e!==t&&t&&t.ownerDocument&&ZT(t.ownerDocument.documentElement,t)){if(n!==null&&WU(t)){if(e=n.start,r=n.end,r===void 0&&(r=e),"selectionStart"in t)t.selectionStart=e,t.selectionEnd=Math.min(r,t.value.length);else if(r=(e=t.ownerDocument||document)&&e.defaultView||window,r.getSelection){r=r.getSelection();var i=t.textContent.length,s=Math.min(n.start,i);n=n.end===void 0?s:Math.min(n.end,i),!r.extend&&s>n&&(i=n,n=s,s=i),i=Lb(t,s);var o=Lb(t,n);i&&o&&(r.rangeCount!==1||r.anchorNode!==i.node||r.anchorOffset!==i.offset||r.focusNode!==o.node||r.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),r.removeAllRanges(),s>n?(r.addRange(e),r.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),r.addRange(e)))}}for(e=[],r=t;r=r.parentNode;)r.nodeType===1&&e.push({element:r,left:r.scrollLeft,top:r.scrollTop});for(typeof t.focus=="function"&&t.focus(),t=0;t<e.length;t++)r=e[t],r.element.scrollLeft=r.left,r.element.scrollTop=r.top}}var KG=Ra&&"documentMode"in document&&11>=document.documentMode,pu=null,BF=null,uh=null,vF=!1;function Wb(r,e,t){var n=t.window===t?t.document:t.nodeType===9?t:t.ownerDocument;vF||pu==null||pu!==g0(n)||(n=pu,"selectionStart"in n&&WU(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),uh&&Lh(uh,n)||(uh=n,n=F0(BF,"onSelect"),0<n.length&&(e=new DU("onSelect","select",null,e,t),r.push({event:e,listeners:n}),e.target=pu)))}function eg(r,e){var t={};return t[r.toLowerCase()]=e.toLowerCase(),t["Webkit"+r]="webkit"+e,t["Moz"+r]="moz"+e,t}var gu={animationend:eg("Animation","AnimationEnd"),animationiteration:eg("Animation","AnimationIteration"),animationstart:eg("Animation","AnimationStart"),transitionend:eg("Transition","TransitionEnd")},py={},JT={};Ra&&(JT=document.createElement("div").style,"AnimationEvent"in window||(delete gu.animationend.animation,delete gu.animationiteration.animation,delete gu.animationstart.animation),"TransitionEvent"in window||delete gu.transitionend.transition);function XB(r){if(py[r])return py[r];if(!gu[r])return r;var e=gu[r],t;for(t in e)if(e.hasOwnProperty(t)&&t in JT)return py[r]=e[t];return r}var GT=XB("animationend"),OT=XB("animationiteration"),HT=XB("animationstart"),zT=XB("transitionend"),XT=new Map,Zb="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function rl(r,e){XT.set(r,e),cc(e,[r])}for(var gy=0;gy<Zb.length;gy++){var my=Zb[gy],jG=my.toLowerCase(),qG=my[0].toUpperCase()+my.slice(1);rl(jG,"on"+qG)}rl(GT,"onAnimationEnd");rl(OT,"onAnimationIteration");rl(HT,"onAnimationStart");rl("dblclick","onDoubleClick");rl("focusin","onFocus");rl("focusout","onBlur");rl(zT,"onTransitionEnd");lf("onMouseEnter",["mouseout","mouseover"]);lf("onMouseLeave",["mouseout","mouseover"]);lf("onPointerEnter",["pointerout","pointerover"]);lf("onPointerLeave",["pointerout","pointerover"]);cc("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));cc("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));cc("onBeforeInput",["compositionend","keypress","textInput","paste"]);cc("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));cc("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));cc("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Pd="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),$G=new Set("cancel close invalid load scroll toggle".split(" ").concat(Pd));function Pb(r,e,t){var n=r.type||"unknown-event";r.currentTarget=t,jJ(n,e,void 0,r),r.currentTarget=null}function YT(r,e){e=(e&4)!==0;for(var t=0;t<r.length;t++){var n=r[t],i=n.event;n=n.listeners;e:{var s=void 0;if(e)for(var o=n.length-1;0<=o;o--){var a=n[o],A=a.instance,l=a.currentTarget;if(a=a.listener,A!==s&&i.isPropagationStopped())break e;Pb(i,a,l),s=A}else for(o=0;o<n.length;o++){if(a=n[o],A=a.instance,l=a.currentTarget,a=a.listener,A!==s&&i.isPropagationStopped())break e;Pb(i,a,l),s=A}}}if(B0)throw r=hF,B0=!1,hF=null,r}function qt(r,e){var t=e[IF];t===void 0&&(t=e[IF]=new Set);var n=r+"__bubble";t.has(n)||(KT(e,r,2,!1),t.add(n))}function By(r,e,t){var n=0;e&&(n|=4),KT(t,r,n,e)}var tg="_reactListening"+Math.random().toString(36).slice(2);function Wh(r){if(!r[tg]){r[tg]=!0,rT.forEach(function(t){t!=="selectionchange"&&($G.has(t)||By(t,!1,r),By(t,!0,r))});var e=r.nodeType===9?r:r.ownerDocument;e===null||e[tg]||(e[tg]=!0,By("selectionchange",!1,e))}}function KT(r,e,t,n){switch(MT(e)){case 1:var i=dG;break;case 4:i=hG;break;default:i=NU}t=i.bind(null,e,t,r),i=void 0,!dF||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),n?i!==void 0?r.addEventListener(e,t,{capture:!0,passive:i}):r.addEventListener(e,t,!0):i!==void 0?r.addEventListener(e,t,{passive:i}):r.addEventListener(e,t,!1)}function vy(r,e,t,n,i){var s=n;if(!(e&1)&&!(e&2)&&n!==null)e:for(;;){if(n===null)return;var o=n.tag;if(o===3||o===4){var a=n.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=n.return;o!==null;){var A=o.tag;if((A===3||A===4)&&(A=o.stateNode.containerInfo,A===i||A.nodeType===8&&A.parentNode===i))return;o=o.return}for(;a!==null;){if(o=Sl(a),o===null)return;if(A=o.tag,A===5||A===6){n=s=o;continue e}a=a.parentNode}}n=n.return}vT(function(){var l=s,c=_U(t),u=[];e:{var f=XT.get(r);if(f!==void 0){var d=DU,p=r;switch(r){case"keypress":if(Nm(t)===0)break e;case"keydown":case"keyup":d=EG;break;case"focusin":p="focus",d=fy;break;case"focusout":p="blur",d=fy;break;case"beforeblur":case"afterblur":d=fy;break;case"click":if(t.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":d=Sb;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":d=mG;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":d=RG;break;case GT:case OT:case HT:d=yG;break;case zT:d=TG;break;case"scroll":d=pG;break;case"wheel":d=VG;break;case"copy":case"cut":case"paste":d=wG;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":d=Rb}var h=(e&4)!==0,m=!h&&r==="scroll",g=h?f!==null?f+"Capture":null:f;h=[];for(var B=l,v;B!==null;){v=B;var w=v.stateNode;if(v.tag===5&&w!==null&&(v=w,g!==null&&(w=Th(B,g),w!=null&&h.push(Zh(B,w,v)))),m)break;B=B.return}0<h.length&&(f=new d(f,p,null,t,c),u.push({event:f,listeners:h}))}}if(!(e&7)){e:{if(f=r==="mouseover"||r==="pointerover",d=r==="mouseout"||r==="pointerout",f&&t!==uF&&(p=t.relatedTarget||t.fromElement)&&(Sl(p)||p[Ma]))break e;if((d||f)&&(f=c.window===c?c:(f=c.ownerDocument)?f.defaultView||f.parentWindow:window,d?(p=t.relatedTarget||t.toElement,d=l,p=p?Sl(p):null,p!==null&&(m=uc(p),p!==m||p.tag!==5&&p.tag!==6)&&(p=null)):(d=null,p=l),d!==p)){if(h=Sb,w="onMouseLeave",g="onMouseEnter",B="mouse",(r==="pointerout"||r==="pointerover")&&(h=Rb,w="onPointerLeave",g="onPointerEnter",B="pointer"),m=d==null?f:mu(d),v=p==null?f:mu(p),f=new h(w,B+"leave",d,t,c),f.target=m,f.relatedTarget=v,w=null,Sl(c)===l&&(h=new h(g,B+"enter",p,t,c),h.target=v,h.relatedTarget=m,w=h),m=w,d&&p)t:{for(h=d,g=p,B=0,v=h;v;v=yc(v))B++;for(v=0,w=g;w;w=yc(w))v++;for(;0<B-v;)h=yc(h),B--;for(;0<v-B;)g=yc(g),v--;for(;B--;){if(h===g||g!==null&&h===g.alternate)break t;h=yc(h),g=yc(g)}h=null}else h=null;d!==null&&Jb(u,f,d,h,!1),p!==null&&m!==null&&Jb(u,m,p,h,!0)}}e:{if(f=l?mu(l):window,d=f.nodeName&&f.nodeName.toLowerCase(),d==="select"||d==="input"&&f.type==="file")var C=JG;else if(Nb(f))if(LT)C=zG;else{C=OG;var I=GG}else(d=f.nodeName)&&d.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(C=HG);if(C&&(C=C(r,l))){kT(u,C,t,c);break e}I&&I(r,f,l),r==="focusout"&&(I=f._wrapperState)&&I.controlled&&f.type==="number"&&oF(f,"number",f.value)}switch(I=l?mu(l):window,r){case"focusin":(Nb(I)||I.contentEditable==="true")&&(pu=I,BF=l,uh=null);break;case"focusout":uh=BF=pu=null;break;case"mousedown":vF=!0;break;case"contextmenu":case"mouseup":case"dragend":vF=!1,Wb(u,t,c);break;case"selectionchange":if(KG)break;case"keydown":case"keyup":Wb(u,t,c)}var E;if(LU)e:{switch(r){case"compositionstart":var U="onCompositionStart";break e;case"compositionend":U="onCompositionEnd";break e;case"compositionupdate":U="onCompositionUpdate";break e}U=void 0}else hu?VT(r,t)&&(U="onCompositionEnd"):r==="keydown"&&t.keyCode===229&&(U="onCompositionStart");U&&(NT&&t.locale!=="ko"&&(hu||U!=="onCompositionStart"?U==="onCompositionEnd"&&hu&&(E=TT()):(vA=c,VU="value"in vA?vA.value:vA.textContent,hu=!0)),I=F0(l,U),0<I.length&&(U=new _b(U,r,null,t,c),u.push({event:U,listeners:I}),E?U.data=E:(E=DT(t),E!==null&&(U.data=E)))),(E=kG?LG(r,t):WG(r,t))&&(l=F0(l,"onBeforeInput"),0<l.length&&(c=new _b("onBeforeInput","beforeinput",null,t,c),u.push({event:c,listeners:l}),c.data=E))}YT(u,e)})}function Zh(r,e,t){return{instance:r,listener:e,currentTarget:t}}function F0(r,e){for(var t=e+"Capture",n=[];r!==null;){var i=r,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Th(r,t),s!=null&&n.unshift(Zh(r,s,i)),s=Th(r,e),s!=null&&n.push(Zh(r,s,i))),r=r.return}return n}function yc(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5);return r||null}function Jb(r,e,t,n,i){for(var s=e._reactName,o=[];t!==null&&t!==n;){var a=t,A=a.alternate,l=a.stateNode;if(A!==null&&A===n)break;a.tag===5&&l!==null&&(a=l,i?(A=Th(t,s),A!=null&&o.unshift(Zh(t,A,a))):i||(A=Th(t,s),A!=null&&o.push(Zh(t,A,a)))),t=t.return}o.length!==0&&r.push({event:e,listeners:o})}var eO=/\r\n?/g,tO=/\u0000|\uFFFD/g;function Gb(r){return(typeof r=="string"?r:""+r).replace(eO,`
`).replace(tO,"")}function ng(r,e,t){if(e=Gb(e),Gb(r)!==e&&t)throw Error(Ee(425))}function I0(){}var yF=null,CF=null;function wF(r,e){return r==="textarea"||r==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var FF=typeof setTimeout=="function"?setTimeout:void 0,nO=typeof clearTimeout=="function"?clearTimeout:void 0,Ob=typeof Promise=="function"?Promise:void 0,rO=typeof queueMicrotask=="function"?queueMicrotask:typeof Ob<"u"?function(r){return Ob.resolve(null).then(r).catch(iO)}:FF;function iO(r){setTimeout(function(){throw r})}function yy(r,e){var t=e,n=0;do{var i=t.nextSibling;if(r.removeChild(t),i&&i.nodeType===8)if(t=i.data,t==="/$"){if(n===0){r.removeChild(i),Dh(e);return}n--}else t!=="$"&&t!=="$?"&&t!=="$!"||n++;t=i}while(t);Dh(e)}function MA(r){for(;r!=null;r=r.nextSibling){var e=r.nodeType;if(e===1||e===3)break;if(e===8){if(e=r.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return r}function Hb(r){r=r.previousSibling;for(var e=0;r;){if(r.nodeType===8){var t=r.data;if(t==="$"||t==="$!"||t==="$?"){if(e===0)return r;e--}else t==="/$"&&e++}r=r.previousSibling}return null}var Wf=Math.random().toString(36).slice(2),go="__reactFiber$"+Wf,Ph="__reactProps$"+Wf,Ma="__reactContainer$"+Wf,IF="__reactEvents$"+Wf,sO="__reactListeners$"+Wf,oO="__reactHandles$"+Wf;function Sl(r){var e=r[go];if(e)return e;for(var t=r.parentNode;t;){if(e=t[Ma]||t[go]){if(t=e.alternate,e.child!==null||t!==null&&t.child!==null)for(r=Hb(r);r!==null;){if(t=r[go])return t;r=Hb(r)}return e}r=t,t=r.parentNode}return null}function xp(r){return r=r[go]||r[Ma],!r||r.tag!==5&&r.tag!==6&&r.tag!==13&&r.tag!==3?null:r}function mu(r){if(r.tag===5||r.tag===6)return r.stateNode;throw Error(Ee(33))}function YB(r){return r[Ph]||null}var UF=[],Bu=-1;function il(r){return{current:r}}function en(r){0>Bu||(r.current=UF[Bu],UF[Bu]=null,Bu--)}function jt(r,e){Bu++,UF[Bu]=r.current,r.current=e}var zA={},_r=il(zA),ri=il(!1),jl=zA;function cf(r,e){var t=r.type.contextTypes;if(!t)return zA;var n=r.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===e)return n.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in t)i[s]=e[s];return n&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=e,r.__reactInternalMemoizedMaskedChildContext=i),i}function ii(r){return r=r.childContextTypes,r!=null}function U0(){en(ri),en(_r)}function zb(r,e,t){if(_r.current!==zA)throw Error(Ee(168));jt(_r,e),jt(ri,t)}function jT(r,e,t){var n=r.stateNode;if(e=e.childContextTypes,typeof n.getChildContext!="function")return t;n=n.getChildContext();for(var i in n)if(!(i in e))throw Error(Ee(108,GJ(r)||"Unknown",i));return dn({},t,n)}function x0(r){return r=(r=r.stateNode)&&r.__reactInternalMemoizedMergedChildContext||zA,jl=_r.current,jt(_r,r),jt(ri,ri.current),!0}function Xb(r,e,t){var n=r.stateNode;if(!n)throw Error(Ee(169));t?(r=jT(r,e,jl),n.__reactInternalMemoizedMergedChildContext=r,en(ri),en(_r),jt(_r,r)):en(ri),jt(ri,t)}var ga=null,KB=!1,Cy=!1;function qT(r){ga===null?ga=[r]:ga.push(r)}function aO(r){KB=!0,qT(r)}function sl(){if(!Cy&&ga!==null){Cy=!0;var r=0,e=Pt;try{var t=ga;for(Pt=1;r<t.length;r++){var n=t[r];do n=n(!0);while(n!==null)}ga=null,KB=!1}catch(i){throw ga!==null&&(ga=ga.slice(r+1)),FT(RU,sl),i}finally{Pt=e,Cy=!1}}return null}var vu=[],yu=0,Q0=null,b0=0,qi=[],$i=0,ql=null,Ca=1,wa="";function Il(r,e){vu[yu++]=b0,vu[yu++]=Q0,Q0=r,b0=e}function $T(r,e,t){qi[$i++]=Ca,qi[$i++]=wa,qi[$i++]=ql,ql=r;var n=Ca;r=wa;var i=32-zs(n)-1;n&=~(1<<i),t+=1;var s=32-zs(e)+i;if(30<s){var o=i-i%5;s=(n&(1<<o)-1).toString(32),n>>=o,i-=o,Ca=1<<32-zs(e)+i|t<<i|n,wa=s+r}else Ca=1<<s|t<<i|n,wa=r}function ZU(r){r.return!==null&&(Il(r,1),$T(r,1,0))}function PU(r){for(;r===Q0;)Q0=vu[--yu],vu[yu]=null,b0=vu[--yu],vu[yu]=null;for(;r===ql;)ql=qi[--$i],qi[$i]=null,wa=qi[--$i],qi[$i]=null,Ca=qi[--$i],qi[$i]=null}var Si=null,bi=null,rn=!1,Os=null;function eN(r,e){var t=rs(5,null,null,0);t.elementType="DELETED",t.stateNode=e,t.return=r,e=r.deletions,e===null?(r.deletions=[t],r.flags|=16):e.push(t)}function Yb(r,e){switch(r.tag){case 5:var t=r.type;return e=e.nodeType!==1||t.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(r.stateNode=e,Si=r,bi=MA(e.firstChild),!0):!1;case 6:return e=r.pendingProps===""||e.nodeType!==3?null:e,e!==null?(r.stateNode=e,Si=r,bi=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(t=ql!==null?{id:Ca,overflow:wa}:null,r.memoizedState={dehydrated:e,treeContext:t,retryLane:1073741824},t=rs(18,null,null,0),t.stateNode=e,t.return=r,r.child=t,Si=r,bi=null,!0):!1;default:return!1}}function xF(r){return(r.mode&1)!==0&&(r.flags&128)===0}function QF(r){if(rn){var e=bi;if(e){var t=e;if(!Yb(r,e)){if(xF(r))throw Error(Ee(418));e=MA(t.nextSibling);var n=Si;e&&Yb(r,e)?eN(n,t):(r.flags=r.flags&-4097|2,rn=!1,Si=r)}}else{if(xF(r))throw Error(Ee(418));r.flags=r.flags&-4097|2,rn=!1,Si=r}}}function Kb(r){for(r=r.return;r!==null&&r.tag!==5&&r.tag!==3&&r.tag!==13;)r=r.return;Si=r}function rg(r){if(r!==Si)return!1;if(!rn)return Kb(r),rn=!0,!1;var e;if((e=r.tag!==3)&&!(e=r.tag!==5)&&(e=r.type,e=e!=="head"&&e!=="body"&&!wF(r.type,r.memoizedProps)),e&&(e=bi)){if(xF(r))throw tN(),Error(Ee(418));for(;e;)eN(r,e),e=MA(e.nextSibling)}if(Kb(r),r.tag===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(Ee(317));e:{for(r=r.nextSibling,e=0;r;){if(r.nodeType===8){var t=r.data;if(t==="/$"){if(e===0){bi=MA(r.nextSibling);break e}e--}else t!=="$"&&t!=="$!"&&t!=="$?"||e++}r=r.nextSibling}bi=null}}else bi=Si?MA(r.stateNode.nextSibling):null;return!0}function tN(){for(var r=bi;r;)r=MA(r.nextSibling)}function uf(){bi=Si=null,rn=!1}function JU(r){Os===null?Os=[r]:Os.push(r)}var AO=Pa.ReactCurrentBatchConfig;function Ps(r,e){if(r&&r.defaultProps){e=dn({},e),r=r.defaultProps;for(var t in r)e[t]===void 0&&(e[t]=r[t]);return e}return e}var E0=il(null),S0=null,Cu=null,GU=null;function OU(){GU=Cu=S0=null}function HU(r){var e=E0.current;en(E0),r._currentValue=e}function bF(r,e,t){for(;r!==null;){var n=r.alternate;if((r.childLanes&e)!==e?(r.childLanes|=e,n!==null&&(n.childLanes|=e)):n!==null&&(n.childLanes&e)!==e&&(n.childLanes|=e),r===t)break;r=r.return}}function Wu(r,e){S0=r,GU=Cu=null,r=r.dependencies,r!==null&&r.firstContext!==null&&(r.lanes&e&&(ni=!0),r.firstContext=null)}function ds(r){var e=r._currentValue;if(GU!==r)if(r={context:r,memoizedValue:e,next:null},Cu===null){if(S0===null)throw Error(Ee(308));Cu=r,S0.dependencies={lanes:0,firstContext:r}}else Cu=Cu.next=r;return e}var _l=null;function zU(r){_l===null?_l=[r]:_l.push(r)}function nN(r,e,t,n){var i=e.interleaved;return i===null?(t.next=t,zU(e)):(t.next=i.next,i.next=t),e.interleaved=t,Ta(r,n)}function Ta(r,e){r.lanes|=e;var t=r.alternate;for(t!==null&&(t.lanes|=e),t=r,r=r.return;r!==null;)r.childLanes|=e,t=r.alternate,t!==null&&(t.childLanes|=e),t=r,r=r.return;return t.tag===3?t.stateNode:null}var cA=!1;function XU(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function rN(r,e){r=r.updateQueue,e.updateQueue===r&&(e.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,effects:r.effects})}function xa(r,e){return{eventTime:r,lane:e,tag:0,payload:null,callback:null,next:null}}function TA(r,e,t){var n=r.updateQueue;if(n===null)return null;if(n=n.shared,Et&2){var i=n.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),n.pending=e,Ta(r,t)}return i=n.interleaved,i===null?(e.next=e,zU(n)):(e.next=i.next,i.next=e),n.interleaved=e,Ta(r,t)}function Vm(r,e,t){if(e=e.updateQueue,e!==null&&(e=e.shared,(t&4194240)!==0)){var n=e.lanes;n&=r.pendingLanes,t|=n,e.lanes=t,MU(r,t)}}function jb(r,e){var t=r.updateQueue,n=r.alternate;if(n!==null&&(n=n.updateQueue,t===n)){var i=null,s=null;if(t=t.firstBaseUpdate,t!==null){do{var o={eventTime:t.eventTime,lane:t.lane,tag:t.tag,payload:t.payload,callback:t.callback,next:null};s===null?i=s=o:s=s.next=o,t=t.next}while(t!==null);s===null?i=s=e:s=s.next=e}else i=s=e;t={baseState:n.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:n.shared,effects:n.effects},r.updateQueue=t;return}r=t.lastBaseUpdate,r===null?t.firstBaseUpdate=e:r.next=e,t.lastBaseUpdate=e}function _0(r,e,t,n){var i=r.updateQueue;cA=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var A=a,l=A.next;A.next=null,o===null?s=l:o.next=l,o=A;var c=r.alternate;c!==null&&(c=c.updateQueue,a=c.lastBaseUpdate,a!==o&&(a===null?c.firstBaseUpdate=l:a.next=l,c.lastBaseUpdate=A))}if(s!==null){var u=i.baseState;o=0,c=l=A=null,a=s;do{var f=a.lane,d=a.eventTime;if((n&f)===f){c!==null&&(c=c.next={eventTime:d,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=r,h=a;switch(f=e,d=t,h.tag){case 1:if(p=h.payload,typeof p=="function"){u=p.call(d,u,f);break e}u=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=h.payload,f=typeof p=="function"?p.call(d,u,f):p,f==null)break e;u=dn({},u,f);break e;case 2:cA=!0}}a.callback!==null&&a.lane!==0&&(r.flags|=64,f=i.effects,f===null?i.effects=[a]:f.push(a))}else d={eventTime:d,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},c===null?(l=c=d,A=u):c=c.next=d,o|=f;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;f=a,a=f.next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}while(1);if(c===null&&(A=u),i.baseState=A,i.firstBaseUpdate=l,i.lastBaseUpdate=c,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);ec|=o,r.lanes=o,r.memoizedState=u}}function qb(r,e,t){if(r=e.effects,e.effects=null,r!==null)for(e=0;e<r.length;e++){var n=r[e],i=n.callback;if(i!==null){if(n.callback=null,n=t,typeof i!="function")throw Error(Ee(191,i));i.call(n)}}}var iN=new nT.Component().refs;function EF(r,e,t,n){e=r.memoizedState,t=t(n,e),t=t==null?e:dn({},e,t),r.memoizedState=t,r.lanes===0&&(r.updateQueue.baseState=t)}var jB={isMounted:function(r){return(r=r._reactInternals)?uc(r)===r:!1},enqueueSetState:function(r,e,t){r=r._reactInternals;var n=Or(),i=VA(r),s=xa(n,i);s.payload=e,t!=null&&(s.callback=t),e=TA(r,s,i),e!==null&&(Xs(e,r,i,n),Vm(e,r,i))},enqueueReplaceState:function(r,e,t){r=r._reactInternals;var n=Or(),i=VA(r),s=xa(n,i);s.tag=1,s.payload=e,t!=null&&(s.callback=t),e=TA(r,s,i),e!==null&&(Xs(e,r,i,n),Vm(e,r,i))},enqueueForceUpdate:function(r,e){r=r._reactInternals;var t=Or(),n=VA(r),i=xa(t,n);i.tag=2,e!=null&&(i.callback=e),e=TA(r,i,n),e!==null&&(Xs(e,r,n,t),Vm(e,r,n))}};function $b(r,e,t,n,i,s,o){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(n,s,o):e.prototype&&e.prototype.isPureReactComponent?!Lh(t,n)||!Lh(i,s):!0}function sN(r,e,t){var n=!1,i=zA,s=e.contextType;return typeof s=="object"&&s!==null?s=ds(s):(i=ii(e)?jl:_r.current,n=e.contextTypes,s=(n=n!=null)?cf(r,i):zA),e=new e(t,s),r.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=jB,r.stateNode=e,e._reactInternals=r,n&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=i,r.__reactInternalMemoizedMaskedChildContext=s),e}function eE(r,e,t,n){r=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(t,n),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(t,n),e.state!==r&&jB.enqueueReplaceState(e,e.state,null)}function SF(r,e,t,n){var i=r.stateNode;i.props=t,i.state=r.memoizedState,i.refs=iN,XU(r);var s=e.contextType;typeof s=="object"&&s!==null?i.context=ds(s):(s=ii(e)?jl:_r.current,i.context=cf(r,s)),i.state=r.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(EF(r,e,s,t),i.state=r.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&jB.enqueueReplaceState(i,i.state,null),_0(r,t,i,n),i.state=r.memoizedState),typeof i.componentDidMount=="function"&&(r.flags|=4194308)}function id(r,e,t){if(r=t.ref,r!==null&&typeof r!="function"&&typeof r!="object"){if(t._owner){if(t=t._owner,t){if(t.tag!==1)throw Error(Ee(309));var n=t.stateNode}if(!n)throw Error(Ee(147,r));var i=n,s=""+r;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;a===iN&&(a=i.refs={}),o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof r!="string")throw Error(Ee(284));if(!t._owner)throw Error(Ee(290,r))}return r}function ig(r,e){throw r=Object.prototype.toString.call(e),Error(Ee(31,r==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":r))}function tE(r){var e=r._init;return e(r._payload)}function oN(r){function e(g,B){if(r){var v=g.deletions;v===null?(g.deletions=[B],g.flags|=16):v.push(B)}}function t(g,B){if(!r)return null;for(;B!==null;)e(g,B),B=B.sibling;return null}function n(g,B){for(g=new Map;B!==null;)B.key!==null?g.set(B.key,B):g.set(B.index,B),B=B.sibling;return g}function i(g,B){return g=DA(g,B),g.index=0,g.sibling=null,g}function s(g,B,v){return g.index=v,r?(v=g.alternate,v!==null?(v=v.index,v<B?(g.flags|=2,B):v):(g.flags|=2,B)):(g.flags|=1048576,B)}function o(g){return r&&g.alternate===null&&(g.flags|=2),g}function a(g,B,v,w){return B===null||B.tag!==6?(B=by(v,g.mode,w),B.return=g,B):(B=i(B,v),B.return=g,B)}function A(g,B,v,w){var C=v.type;return C===du?c(g,B,v.props.children,w,v.key):B!==null&&(B.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===lA&&tE(C)===B.type)?(w=i(B,v.props),w.ref=id(g,B,v),w.return=g,w):(w=Pm(v.type,v.key,v.props,null,g.mode,w),w.ref=id(g,B,v),w.return=g,w)}function l(g,B,v,w){return B===null||B.tag!==4||B.stateNode.containerInfo!==v.containerInfo||B.stateNode.implementation!==v.implementation?(B=Ey(v,g.mode,w),B.return=g,B):(B=i(B,v.children||[]),B.return=g,B)}function c(g,B,v,w,C){return B===null||B.tag!==7?(B=Zl(v,g.mode,w,C),B.return=g,B):(B=i(B,v),B.return=g,B)}function u(g,B,v){if(typeof B=="string"&&B!==""||typeof B=="number")return B=by(""+B,g.mode,v),B.return=g,B;if(typeof B=="object"&&B!==null){switch(B.$$typeof){case zp:return v=Pm(B.type,B.key,B.props,null,g.mode,v),v.ref=id(g,null,B),v.return=g,v;case fu:return B=Ey(B,g.mode,v),B.return=g,B;case lA:var w=B._init;return u(g,w(B._payload),v)}if(Wd(B)||$f(B))return B=Zl(B,g.mode,v,null),B.return=g,B;ig(g,B)}return null}function f(g,B,v,w){var C=B!==null?B.key:null;if(typeof v=="string"&&v!==""||typeof v=="number")return C!==null?null:a(g,B,""+v,w);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case zp:return v.key===C?A(g,B,v,w):null;case fu:return v.key===C?l(g,B,v,w):null;case lA:return C=v._init,f(g,B,C(v._payload),w)}if(Wd(v)||$f(v))return C!==null?null:c(g,B,v,w,null);ig(g,v)}return null}function d(g,B,v,w,C){if(typeof w=="string"&&w!==""||typeof w=="number")return g=g.get(v)||null,a(B,g,""+w,C);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case zp:return g=g.get(w.key===null?v:w.key)||null,A(B,g,w,C);case fu:return g=g.get(w.key===null?v:w.key)||null,l(B,g,w,C);case lA:var I=w._init;return d(g,B,v,I(w._payload),C)}if(Wd(w)||$f(w))return g=g.get(v)||null,c(B,g,w,C,null);ig(B,w)}return null}function p(g,B,v,w){for(var C=null,I=null,E=B,U=B=0,S=null;E!==null&&U<v.length;U++){E.index>U?(S=E,E=null):S=E.sibling;var V=f(g,E,v[U],w);if(V===null){E===null&&(E=S);break}r&&E&&V.alternate===null&&e(g,E),B=s(V,B,U),I===null?C=V:I.sibling=V,I=V,E=S}if(U===v.length)return t(g,E),rn&&Il(g,U),C;if(E===null){for(;U<v.length;U++)E=u(g,v[U],w),E!==null&&(B=s(E,B,U),I===null?C=E:I.sibling=E,I=E);return rn&&Il(g,U),C}for(E=n(g,E);U<v.length;U++)S=d(E,g,U,v[U],w),S!==null&&(r&&S.alternate!==null&&E.delete(S.key===null?U:S.key),B=s(S,B,U),I===null?C=S:I.sibling=S,I=S);return r&&E.forEach(function(J){return e(g,J)}),rn&&Il(g,U),C}function h(g,B,v,w){var C=$f(v);if(typeof C!="function")throw Error(Ee(150));if(v=C.call(v),v==null)throw Error(Ee(151));for(var I=C=null,E=B,U=B=0,S=null,V=v.next();E!==null&&!V.done;U++,V=v.next()){E.index>U?(S=E,E=null):S=E.sibling;var J=f(g,E,V.value,w);if(J===null){E===null&&(E=S);break}r&&E&&J.alternate===null&&e(g,E),B=s(J,B,U),I===null?C=J:I.sibling=J,I=J,E=S}if(V.done)return t(g,E),rn&&Il(g,U),C;if(E===null){for(;!V.done;U++,V=v.next())V=u(g,V.value,w),V!==null&&(B=s(V,B,U),I===null?C=V:I.sibling=V,I=V);return rn&&Il(g,U),C}for(E=n(g,E);!V.done;U++,V=v.next())V=d(E,g,U,V.value,w),V!==null&&(r&&V.alternate!==null&&E.delete(V.key===null?U:V.key),B=s(V,B,U),I===null?C=V:I.sibling=V,I=V);return r&&E.forEach(function(z){return e(g,z)}),rn&&Il(g,U),C}function m(g,B,v,w){if(typeof v=="object"&&v!==null&&v.type===du&&v.key===null&&(v=v.props.children),typeof v=="object"&&v!==null){switch(v.$$typeof){case zp:e:{for(var C=v.key,I=B;I!==null;){if(I.key===C){if(C=v.type,C===du){if(I.tag===7){t(g,I.sibling),B=i(I,v.props.children),B.return=g,g=B;break e}}else if(I.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===lA&&tE(C)===I.type){t(g,I.sibling),B=i(I,v.props),B.ref=id(g,I,v),B.return=g,g=B;break e}t(g,I);break}else e(g,I);I=I.sibling}v.type===du?(B=Zl(v.props.children,g.mode,w,v.key),B.return=g,g=B):(w=Pm(v.type,v.key,v.props,null,g.mode,w),w.ref=id(g,B,v),w.return=g,g=w)}return o(g);case fu:e:{for(I=v.key;B!==null;){if(B.key===I)if(B.tag===4&&B.stateNode.containerInfo===v.containerInfo&&B.stateNode.implementation===v.implementation){t(g,B.sibling),B=i(B,v.children||[]),B.return=g,g=B;break e}else{t(g,B);break}else e(g,B);B=B.sibling}B=Ey(v,g.mode,w),B.return=g,g=B}return o(g);case lA:return I=v._init,m(g,B,I(v._payload),w)}if(Wd(v))return p(g,B,v,w);if($f(v))return h(g,B,v,w);ig(g,v)}return typeof v=="string"&&v!==""||typeof v=="number"?(v=""+v,B!==null&&B.tag===6?(t(g,B.sibling),B=i(B,v),B.return=g,g=B):(t(g,B),B=by(v,g.mode,w),B.return=g,g=B),o(g)):t(g,B)}return m}var ff=oN(!0),aN=oN(!1),Qp={},So=il(Qp),Jh=il(Qp),Gh=il(Qp);function Rl(r){if(r===Qp)throw Error(Ee(174));return r}function YU(r,e){switch(jt(Gh,e),jt(Jh,r),jt(So,Qp),r=e.nodeType,r){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:AF(null,"");break;default:r=r===8?e.parentNode:e,e=r.namespaceURI||null,r=r.tagName,e=AF(e,r)}en(So),jt(So,e)}function df(){en(So),en(Jh),en(Gh)}function AN(r){Rl(Gh.current);var e=Rl(So.current),t=AF(e,r.type);e!==t&&(jt(Jh,r),jt(So,t))}function KU(r){Jh.current===r&&(en(So),en(Jh))}var An=il(0);function R0(r){for(var e=r;e!==null;){if(e.tag===13){var t=e.memoizedState;if(t!==null&&(t=t.dehydrated,t===null||t.data==="$?"||t.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===r)break;for(;e.sibling===null;){if(e.return===null||e.return===r)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var wy=[];function jU(){for(var r=0;r<wy.length;r++)wy[r]._workInProgressVersionPrimary=null;wy.length=0}var Dm=Pa.ReactCurrentDispatcher,Fy=Pa.ReactCurrentBatchConfig,$l=0,fn=null,Gn=null,rr=null,M0=!1,fh=!1,Oh=0,lO=0;function mr(){throw Error(Ee(321))}function qU(r,e){if(e===null)return!1;for(var t=0;t<e.length&&t<r.length;t++)if(!qs(r[t],e[t]))return!1;return!0}function $U(r,e,t,n,i,s){if($l=s,fn=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Dm.current=r===null||r.memoizedState===null?dO:hO,r=t(n,i),fh){s=0;do{if(fh=!1,Oh=0,25<=s)throw Error(Ee(301));s+=1,rr=Gn=null,e.updateQueue=null,Dm.current=pO,r=t(n,i)}while(fh)}if(Dm.current=T0,e=Gn!==null&&Gn.next!==null,$l=0,rr=Gn=fn=null,M0=!1,e)throw Error(Ee(300));return r}function ex(){var r=Oh!==0;return Oh=0,r}function lo(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return rr===null?fn.memoizedState=rr=r:rr=rr.next=r,rr}function hs(){if(Gn===null){var r=fn.alternate;r=r!==null?r.memoizedState:null}else r=Gn.next;var e=rr===null?fn.memoizedState:rr.next;if(e!==null)rr=e,Gn=r;else{if(r===null)throw Error(Ee(310));Gn=r,r={memoizedState:Gn.memoizedState,baseState:Gn.baseState,baseQueue:Gn.baseQueue,queue:Gn.queue,next:null},rr===null?fn.memoizedState=rr=r:rr=rr.next=r}return rr}function Hh(r,e){return typeof e=="function"?e(r):e}function Iy(r){var e=hs(),t=e.queue;if(t===null)throw Error(Ee(311));t.lastRenderedReducer=r;var n=Gn,i=n.baseQueue,s=t.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}n.baseQueue=i=s,t.pending=null}if(i!==null){s=i.next,n=n.baseState;var a=o=null,A=null,l=s;do{var c=l.lane;if(($l&c)===c)A!==null&&(A=A.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),n=l.hasEagerState?l.eagerState:r(n,l.action);else{var u={lane:c,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};A===null?(a=A=u,o=n):A=A.next=u,fn.lanes|=c,ec|=c}l=l.next}while(l!==null&&l!==s);A===null?o=n:A.next=a,qs(n,e.memoizedState)||(ni=!0),e.memoizedState=n,e.baseState=o,e.baseQueue=A,t.lastRenderedState=n}if(r=t.interleaved,r!==null){i=r;do s=i.lane,fn.lanes|=s,ec|=s,i=i.next;while(i!==r)}else i===null&&(t.lanes=0);return[e.memoizedState,t.dispatch]}function Uy(r){var e=hs(),t=e.queue;if(t===null)throw Error(Ee(311));t.lastRenderedReducer=r;var n=t.dispatch,i=t.pending,s=e.memoizedState;if(i!==null){t.pending=null;var o=i=i.next;do s=r(s,o.action),o=o.next;while(o!==i);qs(s,e.memoizedState)||(ni=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),t.lastRenderedState=s}return[s,n]}function lN(){}function cN(r,e){var t=fn,n=hs(),i=e(),s=!qs(n.memoizedState,i);if(s&&(n.memoizedState=i,ni=!0),n=n.queue,tx(dN.bind(null,t,n,r),[r]),n.getSnapshot!==e||s||rr!==null&&rr.memoizedState.tag&1){if(t.flags|=2048,zh(9,fN.bind(null,t,n,i,e),void 0,null),sr===null)throw Error(Ee(349));$l&30||uN(t,e,i)}return i}function uN(r,e,t){r.flags|=16384,r={getSnapshot:e,value:t},e=fn.updateQueue,e===null?(e={lastEffect:null,stores:null},fn.updateQueue=e,e.stores=[r]):(t=e.stores,t===null?e.stores=[r]:t.push(r))}function fN(r,e,t,n){e.value=t,e.getSnapshot=n,hN(e)&&pN(r)}function dN(r,e,t){return t(function(){hN(e)&&pN(r)})}function hN(r){var e=r.getSnapshot;r=r.value;try{var t=e();return!qs(r,t)}catch{return!0}}function pN(r){var e=Ta(r,1);e!==null&&Xs(e,r,1,-1)}function nE(r){var e=lo();return typeof r=="function"&&(r=r()),e.memoizedState=e.baseState=r,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Hh,lastRenderedState:r},e.queue=r,r=r.dispatch=fO.bind(null,fn,r),[e.memoizedState,r]}function zh(r,e,t,n){return r={tag:r,create:e,destroy:t,deps:n,next:null},e=fn.updateQueue,e===null?(e={lastEffect:null,stores:null},fn.updateQueue=e,e.lastEffect=r.next=r):(t=e.lastEffect,t===null?e.lastEffect=r.next=r:(n=t.next,t.next=r,r.next=n,e.lastEffect=r)),r}function gN(){return hs().memoizedState}function km(r,e,t,n){var i=lo();fn.flags|=r,i.memoizedState=zh(1|e,t,void 0,n===void 0?null:n)}function qB(r,e,t,n){var i=hs();n=n===void 0?null:n;var s=void 0;if(Gn!==null){var o=Gn.memoizedState;if(s=o.destroy,n!==null&&qU(n,o.deps)){i.memoizedState=zh(e,t,s,n);return}}fn.flags|=r,i.memoizedState=zh(1|e,t,s,n)}function rE(r,e){return km(8390656,8,r,e)}function tx(r,e){return qB(2048,8,r,e)}function mN(r,e){return qB(4,2,r,e)}function BN(r,e){return qB(4,4,r,e)}function vN(r,e){if(typeof e=="function")return r=r(),e(r),function(){e(null)};if(e!=null)return r=r(),e.current=r,function(){e.current=null}}function yN(r,e,t){return t=t!=null?t.concat([r]):null,qB(4,4,vN.bind(null,e,r),t)}function nx(){}function CN(r,e){var t=hs();e=e===void 0?null:e;var n=t.memoizedState;return n!==null&&e!==null&&qU(e,n[1])?n[0]:(t.memoizedState=[r,e],r)}function wN(r,e){var t=hs();e=e===void 0?null:e;var n=t.memoizedState;return n!==null&&e!==null&&qU(e,n[1])?n[0]:(r=r(),t.memoizedState=[r,e],r)}function FN(r,e,t){return $l&21?(qs(t,e)||(t=xT(),fn.lanes|=t,ec|=t,r.baseState=!0),e):(r.baseState&&(r.baseState=!1,ni=!0),r.memoizedState=t)}function cO(r,e){var t=Pt;Pt=t!==0&&4>t?t:4,r(!0);var n=Fy.transition;Fy.transition={};try{r(!1),e()}finally{Pt=t,Fy.transition=n}}function IN(){return hs().memoizedState}function uO(r,e,t){var n=VA(r);if(t={lane:n,action:t,hasEagerState:!1,eagerState:null,next:null},UN(r))xN(e,t);else if(t=nN(r,e,t,n),t!==null){var i=Or();Xs(t,r,n,i),QN(t,e,n)}}function fO(r,e,t){var n=VA(r),i={lane:n,action:t,hasEagerState:!1,eagerState:null,next:null};if(UN(r))xN(e,i);else{var s=r.alternate;if(r.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,t);if(i.hasEagerState=!0,i.eagerState=a,qs(a,o)){var A=e.interleaved;A===null?(i.next=i,zU(e)):(i.next=A.next,A.next=i),e.interleaved=i;return}}catch{}finally{}t=nN(r,e,i,n),t!==null&&(i=Or(),Xs(t,r,n,i),QN(t,e,n))}}function UN(r){var e=r.alternate;return r===fn||e!==null&&e===fn}function xN(r,e){fh=M0=!0;var t=r.pending;t===null?e.next=e:(e.next=t.next,t.next=e),r.pending=e}function QN(r,e,t){if(t&4194240){var n=e.lanes;n&=r.pendingLanes,t|=n,e.lanes=t,MU(r,t)}}var T0={readContext:ds,useCallback:mr,useContext:mr,useEffect:mr,useImperativeHandle:mr,useInsertionEffect:mr,useLayoutEffect:mr,useMemo:mr,useReducer:mr,useRef:mr,useState:mr,useDebugValue:mr,useDeferredValue:mr,useTransition:mr,useMutableSource:mr,useSyncExternalStore:mr,useId:mr,unstable_isNewReconciler:!1},dO={readContext:ds,useCallback:function(r,e){return lo().memoizedState=[r,e===void 0?null:e],r},useContext:ds,useEffect:rE,useImperativeHandle:function(r,e,t){return t=t!=null?t.concat([r]):null,km(4194308,4,vN.bind(null,e,r),t)},useLayoutEffect:function(r,e){return km(4194308,4,r,e)},useInsertionEffect:function(r,e){return km(4,2,r,e)},useMemo:function(r,e){var t=lo();return e=e===void 0?null:e,r=r(),t.memoizedState=[r,e],r},useReducer:function(r,e,t){var n=lo();return e=t!==void 0?t(e):e,n.memoizedState=n.baseState=e,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:e},n.queue=r,r=r.dispatch=uO.bind(null,fn,r),[n.memoizedState,r]},useRef:function(r){var e=lo();return r={current:r},e.memoizedState=r},useState:nE,useDebugValue:nx,useDeferredValue:function(r){return lo().memoizedState=r},useTransition:function(){var r=nE(!1),e=r[0];return r=cO.bind(null,r[1]),lo().memoizedState=r,[e,r]},useMutableSource:function(){},useSyncExternalStore:function(r,e,t){var n=fn,i=lo();if(rn){if(t===void 0)throw Error(Ee(407));t=t()}else{if(t=e(),sr===null)throw Error(Ee(349));$l&30||uN(n,e,t)}i.memoizedState=t;var s={value:t,getSnapshot:e};return i.queue=s,rE(dN.bind(null,n,s,r),[r]),n.flags|=2048,zh(9,fN.bind(null,n,s,t,e),void 0,null),t},useId:function(){var r=lo(),e=sr.identifierPrefix;if(rn){var t=wa,n=Ca;t=(n&~(1<<32-zs(n)-1)).toString(32)+t,e=":"+e+"R"+t,t=Oh++,0<t&&(e+="H"+t.toString(32)),e+=":"}else t=lO++,e=":"+e+"r"+t.toString(32)+":";return r.memoizedState=e},unstable_isNewReconciler:!1},hO={readContext:ds,useCallback:CN,useContext:ds,useEffect:tx,useImperativeHandle:yN,useInsertionEffect:mN,useLayoutEffect:BN,useMemo:wN,useReducer:Iy,useRef:gN,useState:function(){return Iy(Hh)},useDebugValue:nx,useDeferredValue:function(r){var e=hs();return FN(e,Gn.memoizedState,r)},useTransition:function(){var r=Iy(Hh)[0],e=hs().memoizedState;return[r,e]},useMutableSource:lN,useSyncExternalStore:cN,useId:IN,unstable_isNewReconciler:!1},pO={readContext:ds,useCallback:CN,useContext:ds,useEffect:tx,useImperativeHandle:yN,useInsertionEffect:mN,useLayoutEffect:BN,useMemo:wN,useReducer:Uy,useRef:gN,useState:function(){return Uy(Hh)},useDebugValue:nx,useDeferredValue:function(r){var e=hs();return Gn===null?e.memoizedState=r:FN(e,Gn.memoizedState,r)},useTransition:function(){var r=Uy(Hh)[0],e=hs().memoizedState;return[r,e]},useMutableSource:lN,useSyncExternalStore:cN,useId:IN,unstable_isNewReconciler:!1};function hf(r,e){try{var t="",n=e;do t+=JJ(n),n=n.return;while(n);var i=t}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:r,source:e,stack:i,digest:null}}function xy(r,e,t){return{value:r,source:null,stack:t??null,digest:e??null}}function _F(r,e){try{console.error(e.value)}catch(t){setTimeout(function(){throw t})}}var gO=typeof WeakMap=="function"?WeakMap:Map;function bN(r,e,t){t=xa(-1,t),t.tag=3,t.payload={element:null};var n=e.value;return t.callback=function(){V0||(V0=!0,ZF=n),_F(r,e)},t}function EN(r,e,t){t=xa(-1,t),t.tag=3;var n=r.type.getDerivedStateFromError;if(typeof n=="function"){var i=e.value;t.payload=function(){return n(i)},t.callback=function(){_F(r,e)}}var s=r.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(t.callback=function(){_F(r,e),typeof n!="function"&&(NA===null?NA=new Set([this]):NA.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),t}function iE(r,e,t){var n=r.pingCache;if(n===null){n=r.pingCache=new gO;var i=new Set;n.set(e,i)}else i=n.get(e),i===void 0&&(i=new Set,n.set(e,i));i.has(t)||(i.add(t),r=SO.bind(null,r,e,t),e.then(r,r))}function sE(r){do{var e;if((e=r.tag===13)&&(e=r.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return r;r=r.return}while(r!==null);return null}function oE(r,e,t,n,i){return r.mode&1?(r.flags|=65536,r.lanes=i,r):(r===e?r.flags|=65536:(r.flags|=128,t.flags|=131072,t.flags&=-52805,t.tag===1&&(t.alternate===null?t.tag=17:(e=xa(-1,1),e.tag=2,TA(t,e,1))),t.lanes|=1),r)}var mO=Pa.ReactCurrentOwner,ni=!1;function Lr(r,e,t,n){e.child=r===null?aN(e,null,t,n):ff(e,r.child,t,n)}function aE(r,e,t,n,i){t=t.render;var s=e.ref;return Wu(e,i),n=$U(r,e,t,n,s,i),t=ex(),r!==null&&!ni?(e.updateQueue=r.updateQueue,e.flags&=-2053,r.lanes&=~i,Na(r,e,i)):(rn&&t&&ZU(e),e.flags|=1,Lr(r,e,n,i),e.child)}function AE(r,e,t,n,i){if(r===null){var s=t.type;return typeof s=="function"&&!cx(s)&&s.defaultProps===void 0&&t.compare===null&&t.defaultProps===void 0?(e.tag=15,e.type=s,SN(r,e,s,n,i)):(r=Pm(t.type,null,n,e,e.mode,i),r.ref=e.ref,r.return=e,e.child=r)}if(s=r.child,!(r.lanes&i)){var o=s.memoizedProps;if(t=t.compare,t=t!==null?t:Lh,t(o,n)&&r.ref===e.ref)return Na(r,e,i)}return e.flags|=1,r=DA(s,n),r.ref=e.ref,r.return=e,e.child=r}function SN(r,e,t,n,i){if(r!==null){var s=r.memoizedProps;if(Lh(s,n)&&r.ref===e.ref)if(ni=!1,e.pendingProps=n=s,(r.lanes&i)!==0)r.flags&131072&&(ni=!0);else return e.lanes=r.lanes,Na(r,e,i)}return RF(r,e,t,n,i)}function _N(r,e,t){var n=e.pendingProps,i=n.children,s=r!==null?r.memoizedState:null;if(n.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},jt(Fu,Ci),Ci|=t;else{if(!(t&1073741824))return r=s!==null?s.baseLanes|t:t,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:r,cachePool:null,transitions:null},e.updateQueue=null,jt(Fu,Ci),Ci|=r,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=s!==null?s.baseLanes:t,jt(Fu,Ci),Ci|=n}else s!==null?(n=s.baseLanes|t,e.memoizedState=null):n=t,jt(Fu,Ci),Ci|=n;return Lr(r,e,i,t),e.child}function RN(r,e){var t=e.ref;(r===null&&t!==null||r!==null&&r.ref!==t)&&(e.flags|=512,e.flags|=2097152)}function RF(r,e,t,n,i){var s=ii(t)?jl:_r.current;return s=cf(e,s),Wu(e,i),t=$U(r,e,t,n,s,i),n=ex(),r!==null&&!ni?(e.updateQueue=r.updateQueue,e.flags&=-2053,r.lanes&=~i,Na(r,e,i)):(rn&&n&&ZU(e),e.flags|=1,Lr(r,e,t,i),e.child)}function lE(r,e,t,n,i){if(ii(t)){var s=!0;x0(e)}else s=!1;if(Wu(e,i),e.stateNode===null)Lm(r,e),sN(e,t,n),SF(e,t,n,i),n=!0;else if(r===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var A=o.context,l=t.contextType;typeof l=="object"&&l!==null?l=ds(l):(l=ii(t)?jl:_r.current,l=cf(e,l));var c=t.getDerivedStateFromProps,u=typeof c=="function"||typeof o.getSnapshotBeforeUpdate=="function";u||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==n||A!==l)&&eE(e,o,n,l),cA=!1;var f=e.memoizedState;o.state=f,_0(e,n,o,i),A=e.memoizedState,a!==n||f!==A||ri.current||cA?(typeof c=="function"&&(EF(e,t,c,n),A=e.memoizedState),(a=cA||$b(e,t,a,n,f,A,l))?(u||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=n,e.memoizedState=A),o.props=n,o.state=A,o.context=l,n=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),n=!1)}else{o=e.stateNode,rN(r,e),a=e.memoizedProps,l=e.type===e.elementType?a:Ps(e.type,a),o.props=l,u=e.pendingProps,f=o.context,A=t.contextType,typeof A=="object"&&A!==null?A=ds(A):(A=ii(t)?jl:_r.current,A=cf(e,A));var d=t.getDerivedStateFromProps;(c=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==u||f!==A)&&eE(e,o,n,A),cA=!1,f=e.memoizedState,o.state=f,_0(e,n,o,i);var p=e.memoizedState;a!==u||f!==p||ri.current||cA?(typeof d=="function"&&(EF(e,t,d,n),p=e.memoizedState),(l=cA||$b(e,t,l,n,f,p,A)||!1)?(c||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(n,p,A),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(n,p,A)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===r.memoizedProps&&f===r.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===r.memoizedProps&&f===r.memoizedState||(e.flags|=1024),e.memoizedProps=n,e.memoizedState=p),o.props=n,o.state=p,o.context=A,n=l):(typeof o.componentDidUpdate!="function"||a===r.memoizedProps&&f===r.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===r.memoizedProps&&f===r.memoizedState||(e.flags|=1024),n=!1)}return MF(r,e,t,n,s,i)}function MF(r,e,t,n,i,s){RN(r,e);var o=(e.flags&128)!==0;if(!n&&!o)return i&&Xb(e,t,!1),Na(r,e,s);n=e.stateNode,mO.current=e;var a=o&&typeof t.getDerivedStateFromError!="function"?null:n.render();return e.flags|=1,r!==null&&o?(e.child=ff(e,r.child,null,s),e.child=ff(e,null,a,s)):Lr(r,e,a,s),e.memoizedState=n.state,i&&Xb(e,t,!0),e.child}function MN(r){var e=r.stateNode;e.pendingContext?zb(r,e.pendingContext,e.pendingContext!==e.context):e.context&&zb(r,e.context,!1),YU(r,e.containerInfo)}function cE(r,e,t,n,i){return uf(),JU(i),e.flags|=256,Lr(r,e,t,n),e.child}var TF={dehydrated:null,treeContext:null,retryLane:0};function NF(r){return{baseLanes:r,cachePool:null,transitions:null}}function TN(r,e,t){var n=e.pendingProps,i=An.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=r!==null&&r.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(r===null||r.memoizedState!==null)&&(i|=1),jt(An,i&1),r===null)return QF(e),r=e.memoizedState,r!==null&&(r=r.dehydrated,r!==null)?(e.mode&1?r.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=n.children,r=n.fallback,s?(n=e.mode,s=e.child,o={mode:"hidden",children:o},!(n&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=tv(o,n,0,null),r=Zl(r,n,t,null),s.return=e,r.return=e,s.sibling=r,e.child=s,e.child.memoizedState=NF(t),e.memoizedState=TF,r):rx(e,o));if(i=r.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return BO(r,e,o,n,a,i,t);if(s){s=n.fallback,o=e.mode,i=r.child,a=i.sibling;var A={mode:"hidden",children:n.children};return!(o&1)&&e.child!==i?(n=e.child,n.childLanes=0,n.pendingProps=A,e.deletions=null):(n=DA(i,A),n.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=DA(a,s):(s=Zl(s,o,t,null),s.flags|=2),s.return=e,n.return=e,n.sibling=s,e.child=n,n=s,s=e.child,o=r.child.memoizedState,o=o===null?NF(t):{baseLanes:o.baseLanes|t,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=r.childLanes&~t,e.memoizedState=TF,n}return s=r.child,r=s.sibling,n=DA(s,{mode:"visible",children:n.children}),!(e.mode&1)&&(n.lanes=t),n.return=e,n.sibling=null,r!==null&&(t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)),e.child=n,e.memoizedState=null,n}function rx(r,e){return e=tv({mode:"visible",children:e},r.mode,0,null),e.return=r,r.child=e}function sg(r,e,t,n){return n!==null&&JU(n),ff(e,r.child,null,t),r=rx(e,e.pendingProps.children),r.flags|=2,e.memoizedState=null,r}function BO(r,e,t,n,i,s,o){if(t)return e.flags&256?(e.flags&=-257,n=xy(Error(Ee(422))),sg(r,e,o,n)):e.memoizedState!==null?(e.child=r.child,e.flags|=128,null):(s=n.fallback,i=e.mode,n=tv({mode:"visible",children:n.children},i,0,null),s=Zl(s,i,o,null),s.flags|=2,n.return=e,s.return=e,n.sibling=s,e.child=n,e.mode&1&&ff(e,r.child,null,o),e.child.memoizedState=NF(o),e.memoizedState=TF,s);if(!(e.mode&1))return sg(r,e,o,null);if(i.data==="$!"){if(n=i.nextSibling&&i.nextSibling.dataset,n)var a=n.dgst;return n=a,s=Error(Ee(419)),n=xy(s,n,void 0),sg(r,e,o,n)}if(a=(o&r.childLanes)!==0,ni||a){if(n=sr,n!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(n.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Ta(r,i),Xs(n,r,i,-1))}return lx(),n=xy(Error(Ee(421))),sg(r,e,o,n)}return i.data==="$?"?(e.flags|=128,e.child=r.child,e=_O.bind(null,r),i._reactRetry=e,null):(r=s.treeContext,bi=MA(i.nextSibling),Si=e,rn=!0,Os=null,r!==null&&(qi[$i++]=Ca,qi[$i++]=wa,qi[$i++]=ql,Ca=r.id,wa=r.overflow,ql=e),e=rx(e,n.children),e.flags|=4096,e)}function uE(r,e,t){r.lanes|=e;var n=r.alternate;n!==null&&(n.lanes|=e),bF(r.return,e,t)}function Qy(r,e,t,n,i){var s=r.memoizedState;s===null?r.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:n,tail:t,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=n,s.tail=t,s.tailMode=i)}function NN(r,e,t){var n=e.pendingProps,i=n.revealOrder,s=n.tail;if(Lr(r,e,n.children,t),n=An.current,n&2)n=n&1|2,e.flags|=128;else{if(r!==null&&r.flags&128)e:for(r=e.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&uE(r,t,e);else if(r.tag===19)uE(r,t,e);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break e;for(;r.sibling===null;){if(r.return===null||r.return===e)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}n&=1}if(jt(An,n),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(t=e.child,i=null;t!==null;)r=t.alternate,r!==null&&R0(r)===null&&(i=t),t=t.sibling;t=i,t===null?(i=e.child,e.child=null):(i=t.sibling,t.sibling=null),Qy(e,!1,i,t,s);break;case"backwards":for(t=null,i=e.child,e.child=null;i!==null;){if(r=i.alternate,r!==null&&R0(r)===null){e.child=i;break}r=i.sibling,i.sibling=t,t=i,i=r}Qy(e,!0,t,null,s);break;case"together":Qy(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Lm(r,e){!(e.mode&1)&&r!==null&&(r.alternate=null,e.alternate=null,e.flags|=2)}function Na(r,e,t){if(r!==null&&(e.dependencies=r.dependencies),ec|=e.lanes,!(t&e.childLanes))return null;if(r!==null&&e.child!==r.child)throw Error(Ee(153));if(e.child!==null){for(r=e.child,t=DA(r,r.pendingProps),e.child=t,t.return=e;r.sibling!==null;)r=r.sibling,t=t.sibling=DA(r,r.pendingProps),t.return=e;t.sibling=null}return e.child}function vO(r,e,t){switch(e.tag){case 3:MN(e),uf();break;case 5:AN(e);break;case 1:ii(e.type)&&x0(e);break;case 4:YU(e,e.stateNode.containerInfo);break;case 10:var n=e.type._context,i=e.memoizedProps.value;jt(E0,n._currentValue),n._currentValue=i;break;case 13:if(n=e.memoizedState,n!==null)return n.dehydrated!==null?(jt(An,An.current&1),e.flags|=128,null):t&e.child.childLanes?TN(r,e,t):(jt(An,An.current&1),r=Na(r,e,t),r!==null?r.sibling:null);jt(An,An.current&1);break;case 19:if(n=(t&e.childLanes)!==0,r.flags&128){if(n)return NN(r,e,t);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),jt(An,An.current),n)break;return null;case 22:case 23:return e.lanes=0,_N(r,e,t)}return Na(r,e,t)}var VN,VF,DN,kN;VN=function(r,e){for(var t=e.child;t!==null;){if(t.tag===5||t.tag===6)r.appendChild(t.stateNode);else if(t.tag!==4&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return;t=t.return}t.sibling.return=t.return,t=t.sibling}};VF=function(){};DN=function(r,e,t,n){var i=r.memoizedProps;if(i!==n){r=e.stateNode,Rl(So.current);var s=null;switch(t){case"input":i=iF(r,i),n=iF(r,n),s=[];break;case"select":i=dn({},i,{value:void 0}),n=dn({},n,{value:void 0}),s=[];break;case"textarea":i=aF(r,i),n=aF(r,n),s=[];break;default:typeof i.onClick!="function"&&typeof n.onClick=="function"&&(r.onclick=I0)}lF(t,n);var o;t=null;for(l in i)if(!n.hasOwnProperty(l)&&i.hasOwnProperty(l)&&i[l]!=null)if(l==="style"){var a=i[l];for(o in a)a.hasOwnProperty(o)&&(t||(t={}),t[o]="")}else l!=="dangerouslySetInnerHTML"&&l!=="children"&&l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(Rh.hasOwnProperty(l)?s||(s=[]):(s=s||[]).push(l,null));for(l in n){var A=n[l];if(a=i!=null?i[l]:void 0,n.hasOwnProperty(l)&&A!==a&&(A!=null||a!=null))if(l==="style")if(a){for(o in a)!a.hasOwnProperty(o)||A&&A.hasOwnProperty(o)||(t||(t={}),t[o]="");for(o in A)A.hasOwnProperty(o)&&a[o]!==A[o]&&(t||(t={}),t[o]=A[o])}else t||(s||(s=[]),s.push(l,t)),t=A;else l==="dangerouslySetInnerHTML"?(A=A?A.__html:void 0,a=a?a.__html:void 0,A!=null&&a!==A&&(s=s||[]).push(l,A)):l==="children"?typeof A!="string"&&typeof A!="number"||(s=s||[]).push(l,""+A):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&(Rh.hasOwnProperty(l)?(A!=null&&l==="onScroll"&&qt("scroll",r),s||a===A||(s=[])):(s=s||[]).push(l,A))}t&&(s=s||[]).push("style",t);var l=s;(e.updateQueue=l)&&(e.flags|=4)}};kN=function(r,e,t,n){t!==n&&(e.flags|=4)};function sd(r,e){if(!rn)switch(r.tailMode){case"hidden":e=r.tail;for(var t=null;e!==null;)e.alternate!==null&&(t=e),e=e.sibling;t===null?r.tail=null:t.sibling=null;break;case"collapsed":t=r.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e||r.tail===null?r.tail=null:r.tail.sibling=null:n.sibling=null}}function Br(r){var e=r.alternate!==null&&r.alternate.child===r.child,t=0,n=0;if(e)for(var i=r.child;i!==null;)t|=i.lanes|i.childLanes,n|=i.subtreeFlags&14680064,n|=i.flags&14680064,i.return=r,i=i.sibling;else for(i=r.child;i!==null;)t|=i.lanes|i.childLanes,n|=i.subtreeFlags,n|=i.flags,i.return=r,i=i.sibling;return r.subtreeFlags|=n,r.childLanes=t,e}function yO(r,e,t){var n=e.pendingProps;switch(PU(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Br(e),null;case 1:return ii(e.type)&&U0(),Br(e),null;case 3:return n=e.stateNode,df(),en(ri),en(_r),jU(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(r===null||r.child===null)&&(rg(e)?e.flags|=4:r===null||r.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Os!==null&&(GF(Os),Os=null))),VF(r,e),Br(e),null;case 5:KU(e);var i=Rl(Gh.current);if(t=e.type,r!==null&&e.stateNode!=null)DN(r,e,t,n,i),r.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!n){if(e.stateNode===null)throw Error(Ee(166));return Br(e),null}if(r=Rl(So.current),rg(e)){n=e.stateNode,t=e.type;var s=e.memoizedProps;switch(n[go]=e,n[Ph]=s,r=(e.mode&1)!==0,t){case"dialog":qt("cancel",n),qt("close",n);break;case"iframe":case"object":case"embed":qt("load",n);break;case"video":case"audio":for(i=0;i<Pd.length;i++)qt(Pd[i],n);break;case"source":qt("error",n);break;case"img":case"image":case"link":qt("error",n),qt("load",n);break;case"details":qt("toggle",n);break;case"input":yb(n,s),qt("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!s.multiple},qt("invalid",n);break;case"textarea":wb(n,s),qt("invalid",n)}lF(t,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?n.textContent!==a&&(s.suppressHydrationWarning!==!0&&ng(n.textContent,a,r),i=["children",a]):typeof a=="number"&&n.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&ng(n.textContent,a,r),i=["children",""+a]):Rh.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&qt("scroll",n)}switch(t){case"input":Xp(n),Cb(n,s,!0);break;case"textarea":Xp(n),Fb(n);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(n.onclick=I0)}n=i,e.updateQueue=n,n!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,r==="http://www.w3.org/1999/xhtml"&&(r=uT(t)),r==="http://www.w3.org/1999/xhtml"?t==="script"?(r=o.createElement("div"),r.innerHTML="<script><\/script>",r=r.removeChild(r.firstChild)):typeof n.is=="string"?r=o.createElement(t,{is:n.is}):(r=o.createElement(t),t==="select"&&(o=r,n.multiple?o.multiple=!0:n.size&&(o.size=n.size))):r=o.createElementNS(r,t),r[go]=e,r[Ph]=n,VN(r,e,!1,!1),e.stateNode=r;e:{switch(o=cF(t,n),t){case"dialog":qt("cancel",r),qt("close",r),i=n;break;case"iframe":case"object":case"embed":qt("load",r),i=n;break;case"video":case"audio":for(i=0;i<Pd.length;i++)qt(Pd[i],r);i=n;break;case"source":qt("error",r),i=n;break;case"img":case"image":case"link":qt("error",r),qt("load",r),i=n;break;case"details":qt("toggle",r),i=n;break;case"input":yb(r,n),i=iF(r,n),qt("invalid",r);break;case"option":i=n;break;case"select":r._wrapperState={wasMultiple:!!n.multiple},i=dn({},n,{value:void 0}),qt("invalid",r);break;case"textarea":wb(r,n),i=aF(r,n),qt("invalid",r);break;default:i=n}lF(t,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var A=a[s];s==="style"?hT(r,A):s==="dangerouslySetInnerHTML"?(A=A?A.__html:void 0,A!=null&&fT(r,A)):s==="children"?typeof A=="string"?(t!=="textarea"||A!=="")&&Mh(r,A):typeof A=="number"&&Mh(r,""+A):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Rh.hasOwnProperty(s)?A!=null&&s==="onScroll"&&qt("scroll",r):A!=null&&QU(r,s,A,o))}switch(t){case"input":Xp(r),Cb(r,n,!1);break;case"textarea":Xp(r),Fb(r);break;case"option":n.value!=null&&r.setAttribute("value",""+HA(n.value));break;case"select":r.multiple=!!n.multiple,s=n.value,s!=null?Vu(r,!!n.multiple,s,!1):n.defaultValue!=null&&Vu(r,!!n.multiple,n.defaultValue,!0);break;default:typeof i.onClick=="function"&&(r.onclick=I0)}switch(t){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Br(e),null;case 6:if(r&&e.stateNode!=null)kN(r,e,r.memoizedProps,n);else{if(typeof n!="string"&&e.stateNode===null)throw Error(Ee(166));if(t=Rl(Gh.current),Rl(So.current),rg(e)){if(n=e.stateNode,t=e.memoizedProps,n[go]=e,(s=n.nodeValue!==t)&&(r=Si,r!==null))switch(r.tag){case 3:ng(n.nodeValue,t,(r.mode&1)!==0);break;case 5:r.memoizedProps.suppressHydrationWarning!==!0&&ng(n.nodeValue,t,(r.mode&1)!==0)}s&&(e.flags|=4)}else n=(t.nodeType===9?t:t.ownerDocument).createTextNode(n),n[go]=e,e.stateNode=n}return Br(e),null;case 13:if(en(An),n=e.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(rn&&bi!==null&&e.mode&1&&!(e.flags&128))tN(),uf(),e.flags|=98560,s=!1;else if(s=rg(e),n!==null&&n.dehydrated!==null){if(r===null){if(!s)throw Error(Ee(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(Ee(317));s[go]=e}else uf(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Br(e),s=!1}else Os!==null&&(GF(Os),Os=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=t,e):(n=n!==null,n!==(r!==null&&r.memoizedState!==null)&&n&&(e.child.flags|=8192,e.mode&1&&(r===null||An.current&1?Kn===0&&(Kn=3):lx())),e.updateQueue!==null&&(e.flags|=4),Br(e),null);case 4:return df(),VF(r,e),r===null&&Wh(e.stateNode.containerInfo),Br(e),null;case 10:return HU(e.type._context),Br(e),null;case 17:return ii(e.type)&&U0(),Br(e),null;case 19:if(en(An),s=e.memoizedState,s===null)return Br(e),null;if(n=(e.flags&128)!==0,o=s.rendering,o===null)if(n)sd(s,!1);else{if(Kn!==0||r!==null&&r.flags&128)for(r=e.child;r!==null;){if(o=R0(r),o!==null){for(e.flags|=128,sd(s,!1),n=o.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),e.subtreeFlags=0,n=t,t=e.child;t!==null;)s=t,r=n,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=r,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,r=o.dependencies,s.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),t=t.sibling;return jt(An,An.current&1|2),e.child}r=r.sibling}s.tail!==null&&Qn()>pf&&(e.flags|=128,n=!0,sd(s,!1),e.lanes=4194304)}else{if(!n)if(r=R0(o),r!==null){if(e.flags|=128,n=!0,t=r.updateQueue,t!==null&&(e.updateQueue=t,e.flags|=4),sd(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!rn)return Br(e),null}else 2*Qn()-s.renderingStartTime>pf&&t!==1073741824&&(e.flags|=128,n=!0,sd(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(t=s.last,t!==null?t.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Qn(),e.sibling=null,t=An.current,jt(An,n?t&1|2:t&1),e):(Br(e),null);case 22:case 23:return Ax(),n=e.memoizedState!==null,r!==null&&r.memoizedState!==null!==n&&(e.flags|=8192),n&&e.mode&1?Ci&1073741824&&(Br(e),e.subtreeFlags&6&&(e.flags|=8192)):Br(e),null;case 24:return null;case 25:return null}throw Error(Ee(156,e.tag))}function CO(r,e){switch(PU(e),e.tag){case 1:return ii(e.type)&&U0(),r=e.flags,r&65536?(e.flags=r&-65537|128,e):null;case 3:return df(),en(ri),en(_r),jU(),r=e.flags,r&65536&&!(r&128)?(e.flags=r&-65537|128,e):null;case 5:return KU(e),null;case 13:if(en(An),r=e.memoizedState,r!==null&&r.dehydrated!==null){if(e.alternate===null)throw Error(Ee(340));uf()}return r=e.flags,r&65536?(e.flags=r&-65537|128,e):null;case 19:return en(An),null;case 4:return df(),null;case 10:return HU(e.type._context),null;case 22:case 23:return Ax(),null;case 24:return null;default:return null}}var og=!1,Fr=!1,wO=typeof WeakSet=="function"?WeakSet:Set,Pe=null;function wu(r,e){var t=r.ref;if(t!==null)if(typeof t=="function")try{t(null)}catch(n){Bn(r,e,n)}else t.current=null}function DF(r,e,t){try{t()}catch(n){Bn(r,e,n)}}var fE=!1;function FO(r,e){if(yF=C0,r=PT(),WU(r)){if("selectionStart"in r)var t={start:r.selectionStart,end:r.selectionEnd};else e:{t=(t=r.ownerDocument)&&t.defaultView||window;var n=t.getSelection&&t.getSelection();if(n&&n.rangeCount!==0){t=n.anchorNode;var i=n.anchorOffset,s=n.focusNode;n=n.focusOffset;try{t.nodeType,s.nodeType}catch{t=null;break e}var o=0,a=-1,A=-1,l=0,c=0,u=r,f=null;t:for(;;){for(var d;u!==t||i!==0&&u.nodeType!==3||(a=o+i),u!==s||n!==0&&u.nodeType!==3||(A=o+n),u.nodeType===3&&(o+=u.nodeValue.length),(d=u.firstChild)!==null;)f=u,u=d;for(;;){if(u===r)break t;if(f===t&&++l===i&&(a=o),f===s&&++c===n&&(A=o),(d=u.nextSibling)!==null)break;u=f,f=u.parentNode}u=d}t=a===-1||A===-1?null:{start:a,end:A}}else t=null}t=t||{start:0,end:0}}else t=null;for(CF={focusedElem:r,selectionRange:t},C0=!1,Pe=e;Pe!==null;)if(e=Pe,r=e.child,(e.subtreeFlags&1028)!==0&&r!==null)r.return=e,Pe=r;else for(;Pe!==null;){e=Pe;try{var p=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var h=p.memoizedProps,m=p.memoizedState,g=e.stateNode,B=g.getSnapshotBeforeUpdate(e.elementType===e.type?h:Ps(e.type,h),m);g.__reactInternalSnapshotBeforeUpdate=B}break;case 3:var v=e.stateNode.containerInfo;v.nodeType===1?v.textContent="":v.nodeType===9&&v.documentElement&&v.removeChild(v.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Ee(163))}}catch(w){Bn(e,e.return,w)}if(r=e.sibling,r!==null){r.return=e.return,Pe=r;break}Pe=e.return}return p=fE,fE=!1,p}function dh(r,e,t){var n=e.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var i=n=n.next;do{if((i.tag&r)===r){var s=i.destroy;i.destroy=void 0,s!==void 0&&DF(e,t,s)}i=i.next}while(i!==n)}}function $B(r,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var t=e=e.next;do{if((t.tag&r)===r){var n=t.create;t.destroy=n()}t=t.next}while(t!==e)}}function kF(r){var e=r.ref;if(e!==null){var t=r.stateNode;switch(r.tag){case 5:r=t;break;default:r=t}typeof e=="function"?e(r):e.current=r}}function LN(r){var e=r.alternate;e!==null&&(r.alternate=null,LN(e)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(e=r.stateNode,e!==null&&(delete e[go],delete e[Ph],delete e[IF],delete e[sO],delete e[oO])),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}function WN(r){return r.tag===5||r.tag===3||r.tag===4}function dE(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||WN(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function LF(r,e,t){var n=r.tag;if(n===5||n===6)r=r.stateNode,e?t.nodeType===8?t.parentNode.insertBefore(r,e):t.insertBefore(r,e):(t.nodeType===8?(e=t.parentNode,e.insertBefore(r,t)):(e=t,e.appendChild(r)),t=t._reactRootContainer,t!=null||e.onclick!==null||(e.onclick=I0));else if(n!==4&&(r=r.child,r!==null))for(LF(r,e,t),r=r.sibling;r!==null;)LF(r,e,t),r=r.sibling}function WF(r,e,t){var n=r.tag;if(n===5||n===6)r=r.stateNode,e?t.insertBefore(r,e):t.appendChild(r);else if(n!==4&&(r=r.child,r!==null))for(WF(r,e,t),r=r.sibling;r!==null;)WF(r,e,t),r=r.sibling}var lr=null,Js=!1;function za(r,e,t){for(t=t.child;t!==null;)ZN(r,e,t),t=t.sibling}function ZN(r,e,t){if(Eo&&typeof Eo.onCommitFiberUnmount=="function")try{Eo.onCommitFiberUnmount(OB,t)}catch{}switch(t.tag){case 5:Fr||wu(t,e);case 6:var n=lr,i=Js;lr=null,za(r,e,t),lr=n,Js=i,lr!==null&&(Js?(r=lr,t=t.stateNode,r.nodeType===8?r.parentNode.removeChild(t):r.removeChild(t)):lr.removeChild(t.stateNode));break;case 18:lr!==null&&(Js?(r=lr,t=t.stateNode,r.nodeType===8?yy(r.parentNode,t):r.nodeType===1&&yy(r,t),Dh(r)):yy(lr,t.stateNode));break;case 4:n=lr,i=Js,lr=t.stateNode.containerInfo,Js=!0,za(r,e,t),lr=n,Js=i;break;case 0:case 11:case 14:case 15:if(!Fr&&(n=t.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){i=n=n.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&DF(t,e,o),i=i.next}while(i!==n)}za(r,e,t);break;case 1:if(!Fr&&(wu(t,e),n=t.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=t.memoizedProps,n.state=t.memoizedState,n.componentWillUnmount()}catch(a){Bn(t,e,a)}za(r,e,t);break;case 21:za(r,e,t);break;case 22:t.mode&1?(Fr=(n=Fr)||t.memoizedState!==null,za(r,e,t),Fr=n):za(r,e,t);break;default:za(r,e,t)}}function hE(r){var e=r.updateQueue;if(e!==null){r.updateQueue=null;var t=r.stateNode;t===null&&(t=r.stateNode=new wO),e.forEach(function(n){var i=RO.bind(null,r,n);t.has(n)||(t.add(n),n.then(i,i))})}}function Es(r,e){var t=e.deletions;if(t!==null)for(var n=0;n<t.length;n++){var i=t[n];try{var s=r,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:lr=a.stateNode,Js=!1;break e;case 3:lr=a.stateNode.containerInfo,Js=!0;break e;case 4:lr=a.stateNode.containerInfo,Js=!0;break e}a=a.return}if(lr===null)throw Error(Ee(160));ZN(s,o,i),lr=null,Js=!1;var A=i.alternate;A!==null&&(A.return=null),i.return=null}catch(l){Bn(i,e,l)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)PN(e,r),e=e.sibling}function PN(r,e){var t=r.alternate,n=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:if(Es(e,r),to(r),n&4){try{dh(3,r,r.return),$B(3,r)}catch(h){Bn(r,r.return,h)}try{dh(5,r,r.return)}catch(h){Bn(r,r.return,h)}}break;case 1:Es(e,r),to(r),n&512&&t!==null&&wu(t,t.return);break;case 5:if(Es(e,r),to(r),n&512&&t!==null&&wu(t,t.return),r.flags&32){var i=r.stateNode;try{Mh(i,"")}catch(h){Bn(r,r.return,h)}}if(n&4&&(i=r.stateNode,i!=null)){var s=r.memoizedProps,o=t!==null?t.memoizedProps:s,a=r.type,A=r.updateQueue;if(r.updateQueue=null,A!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&lT(i,s),cF(a,o);var l=cF(a,s);for(o=0;o<A.length;o+=2){var c=A[o],u=A[o+1];c==="style"?hT(i,u):c==="dangerouslySetInnerHTML"?fT(i,u):c==="children"?Mh(i,u):QU(i,c,u,l)}switch(a){case"input":sF(i,s);break;case"textarea":cT(i,s);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var d=s.value;d!=null?Vu(i,!!s.multiple,d,!1):f!==!!s.multiple&&(s.defaultValue!=null?Vu(i,!!s.multiple,s.defaultValue,!0):Vu(i,!!s.multiple,s.multiple?[]:"",!1))}i[Ph]=s}catch(h){Bn(r,r.return,h)}}break;case 6:if(Es(e,r),to(r),n&4){if(r.stateNode===null)throw Error(Ee(162));i=r.stateNode,s=r.memoizedProps;try{i.nodeValue=s}catch(h){Bn(r,r.return,h)}}break;case 3:if(Es(e,r),to(r),n&4&&t!==null&&t.memoizedState.isDehydrated)try{Dh(e.containerInfo)}catch(h){Bn(r,r.return,h)}break;case 4:Es(e,r),to(r);break;case 13:Es(e,r),to(r),i=r.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(ox=Qn())),n&4&&hE(r);break;case 22:if(c=t!==null&&t.memoizedState!==null,r.mode&1?(Fr=(l=Fr)||c,Es(e,r),Fr=l):Es(e,r),to(r),n&8192){if(l=r.memoizedState!==null,(r.stateNode.isHidden=l)&&!c&&r.mode&1)for(Pe=r,c=r.child;c!==null;){for(u=Pe=c;Pe!==null;){switch(f=Pe,d=f.child,f.tag){case 0:case 11:case 14:case 15:dh(4,f,f.return);break;case 1:wu(f,f.return);var p=f.stateNode;if(typeof p.componentWillUnmount=="function"){n=f,t=f.return;try{e=n,p.props=e.memoizedProps,p.state=e.memoizedState,p.componentWillUnmount()}catch(h){Bn(n,t,h)}}break;case 5:wu(f,f.return);break;case 22:if(f.memoizedState!==null){gE(u);continue}}d!==null?(d.return=f,Pe=d):gE(u)}c=c.sibling}e:for(c=null,u=r;;){if(u.tag===5){if(c===null){c=u;try{i=u.stateNode,l?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=u.stateNode,A=u.memoizedProps.style,o=A!=null&&A.hasOwnProperty("display")?A.display:null,a.style.display=dT("display",o))}catch(h){Bn(r,r.return,h)}}}else if(u.tag===6){if(c===null)try{u.stateNode.nodeValue=l?"":u.memoizedProps}catch(h){Bn(r,r.return,h)}}else if((u.tag!==22&&u.tag!==23||u.memoizedState===null||u===r)&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===r)break e;for(;u.sibling===null;){if(u.return===null||u.return===r)break e;c===u&&(c=null),u=u.return}c===u&&(c=null),u.sibling.return=u.return,u=u.sibling}}break;case 19:Es(e,r),to(r),n&4&&hE(r);break;case 21:break;default:Es(e,r),to(r)}}function to(r){var e=r.flags;if(e&2){try{e:{for(var t=r.return;t!==null;){if(WN(t)){var n=t;break e}t=t.return}throw Error(Ee(160))}switch(n.tag){case 5:var i=n.stateNode;n.flags&32&&(Mh(i,""),n.flags&=-33);var s=dE(r);WF(r,s,i);break;case 3:case 4:var o=n.stateNode.containerInfo,a=dE(r);LF(r,a,o);break;default:throw Error(Ee(161))}}catch(A){Bn(r,r.return,A)}r.flags&=-3}e&4096&&(r.flags&=-4097)}function IO(r,e,t){Pe=r,JN(r)}function JN(r,e,t){for(var n=(r.mode&1)!==0;Pe!==null;){var i=Pe,s=i.child;if(i.tag===22&&n){var o=i.memoizedState!==null||og;if(!o){var a=i.alternate,A=a!==null&&a.memoizedState!==null||Fr;a=og;var l=Fr;if(og=o,(Fr=A)&&!l)for(Pe=i;Pe!==null;)o=Pe,A=o.child,o.tag===22&&o.memoizedState!==null?mE(i):A!==null?(A.return=o,Pe=A):mE(i);for(;s!==null;)Pe=s,JN(s),s=s.sibling;Pe=i,og=a,Fr=l}pE(r)}else i.subtreeFlags&8772&&s!==null?(s.return=i,Pe=s):pE(r)}}function pE(r){for(;Pe!==null;){var e=Pe;if(e.flags&8772){var t=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Fr||$B(5,e);break;case 1:var n=e.stateNode;if(e.flags&4&&!Fr)if(t===null)n.componentDidMount();else{var i=e.elementType===e.type?t.memoizedProps:Ps(e.type,t.memoizedProps);n.componentDidUpdate(i,t.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&qb(e,s,n);break;case 3:var o=e.updateQueue;if(o!==null){if(t=null,e.child!==null)switch(e.child.tag){case 5:t=e.child.stateNode;break;case 1:t=e.child.stateNode}qb(e,o,t)}break;case 5:var a=e.stateNode;if(t===null&&e.flags&4){t=a;var A=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":A.autoFocus&&t.focus();break;case"img":A.src&&(t.src=A.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var l=e.alternate;if(l!==null){var c=l.memoizedState;if(c!==null){var u=c.dehydrated;u!==null&&Dh(u)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Ee(163))}Fr||e.flags&512&&kF(e)}catch(f){Bn(e,e.return,f)}}if(e===r){Pe=null;break}if(t=e.sibling,t!==null){t.return=e.return,Pe=t;break}Pe=e.return}}function gE(r){for(;Pe!==null;){var e=Pe;if(e===r){Pe=null;break}var t=e.sibling;if(t!==null){t.return=e.return,Pe=t;break}Pe=e.return}}function mE(r){for(;Pe!==null;){var e=Pe;try{switch(e.tag){case 0:case 11:case 15:var t=e.return;try{$B(4,e)}catch(A){Bn(e,t,A)}break;case 1:var n=e.stateNode;if(typeof n.componentDidMount=="function"){var i=e.return;try{n.componentDidMount()}catch(A){Bn(e,i,A)}}var s=e.return;try{kF(e)}catch(A){Bn(e,s,A)}break;case 5:var o=e.return;try{kF(e)}catch(A){Bn(e,o,A)}}}catch(A){Bn(e,e.return,A)}if(e===r){Pe=null;break}var a=e.sibling;if(a!==null){a.return=e.return,Pe=a;break}Pe=e.return}}var UO=Math.ceil,N0=Pa.ReactCurrentDispatcher,ix=Pa.ReactCurrentOwner,ls=Pa.ReactCurrentBatchConfig,Et=0,sr=null,Ln=null,fr=0,Ci=0,Fu=il(0),Kn=0,Xh=null,ec=0,ev=0,sx=0,hh=null,qr=null,ox=0,pf=1/0,fa=null,V0=!1,ZF=null,NA=null,ag=!1,yA=null,D0=0,ph=0,PF=null,Wm=-1,Zm=0;function Or(){return Et&6?Qn():Wm!==-1?Wm:Wm=Qn()}function VA(r){return r.mode&1?Et&2&&fr!==0?fr&-fr:AO.transition!==null?(Zm===0&&(Zm=xT()),Zm):(r=Pt,r!==0||(r=window.event,r=r===void 0?16:MT(r.type)),r):1}function Xs(r,e,t,n){if(50<ph)throw ph=0,PF=null,Error(Ee(185));Ip(r,t,n),(!(Et&2)||r!==sr)&&(r===sr&&(!(Et&2)&&(ev|=t),Kn===4&&gA(r,fr)),si(r,n),t===1&&Et===0&&!(e.mode&1)&&(pf=Qn()+500,KB&&sl()))}function si(r,e){var t=r.callbackNode;AG(r,e);var n=y0(r,r===sr?fr:0);if(n===0)t!==null&&xb(t),r.callbackNode=null,r.callbackPriority=0;else if(e=n&-n,r.callbackPriority!==e){if(t!=null&&xb(t),e===1)r.tag===0?aO(BE.bind(null,r)):qT(BE.bind(null,r)),rO(function(){!(Et&6)&&sl()}),t=null;else{switch(QT(n)){case 1:t=RU;break;case 4:t=IT;break;case 16:t=v0;break;case 536870912:t=UT;break;default:t=v0}t=jN(t,GN.bind(null,r))}r.callbackPriority=e,r.callbackNode=t}}function GN(r,e){if(Wm=-1,Zm=0,Et&6)throw Error(Ee(327));var t=r.callbackNode;if(Zu()&&r.callbackNode!==t)return null;var n=y0(r,r===sr?fr:0);if(n===0)return null;if(n&30||n&r.expiredLanes||e)e=k0(r,n);else{e=n;var i=Et;Et|=2;var s=HN();(sr!==r||fr!==e)&&(fa=null,pf=Qn()+500,Wl(r,e));do try{bO();break}catch(a){ON(r,a)}while(1);OU(),N0.current=s,Et=i,Ln!==null?e=0:(sr=null,fr=0,e=Kn)}if(e!==0){if(e===2&&(i=pF(r),i!==0&&(n=i,e=JF(r,i))),e===1)throw t=Xh,Wl(r,0),gA(r,n),si(r,Qn()),t;if(e===6)gA(r,n);else{if(i=r.current.alternate,!(n&30)&&!xO(i)&&(e=k0(r,n),e===2&&(s=pF(r),s!==0&&(n=s,e=JF(r,s))),e===1))throw t=Xh,Wl(r,0),gA(r,n),si(r,Qn()),t;switch(r.finishedWork=i,r.finishedLanes=n,e){case 0:case 1:throw Error(Ee(345));case 2:Ul(r,qr,fa);break;case 3:if(gA(r,n),(n&130023424)===n&&(e=ox+500-Qn(),10<e)){if(y0(r,0)!==0)break;if(i=r.suspendedLanes,(i&n)!==n){Or(),r.pingedLanes|=r.suspendedLanes&i;break}r.timeoutHandle=FF(Ul.bind(null,r,qr,fa),e);break}Ul(r,qr,fa);break;case 4:if(gA(r,n),(n&4194240)===n)break;for(e=r.eventTimes,i=-1;0<n;){var o=31-zs(n);s=1<<o,o=e[o],o>i&&(i=o),n&=~s}if(n=i,n=Qn()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*UO(n/1960))-n,10<n){r.timeoutHandle=FF(Ul.bind(null,r,qr,fa),n);break}Ul(r,qr,fa);break;case 5:Ul(r,qr,fa);break;default:throw Error(Ee(329))}}}return si(r,Qn()),r.callbackNode===t?GN.bind(null,r):null}function JF(r,e){var t=hh;return r.current.memoizedState.isDehydrated&&(Wl(r,e).flags|=256),r=k0(r,e),r!==2&&(e=qr,qr=t,e!==null&&GF(e)),r}function GF(r){qr===null?qr=r:qr.push.apply(qr,r)}function xO(r){for(var e=r;;){if(e.flags&16384){var t=e.updateQueue;if(t!==null&&(t=t.stores,t!==null))for(var n=0;n<t.length;n++){var i=t[n],s=i.getSnapshot;i=i.value;try{if(!qs(s(),i))return!1}catch{return!1}}}if(t=e.child,e.subtreeFlags&16384&&t!==null)t.return=e,e=t;else{if(e===r)break;for(;e.sibling===null;){if(e.return===null||e.return===r)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function gA(r,e){for(e&=~sx,e&=~ev,r.suspendedLanes|=e,r.pingedLanes&=~e,r=r.expirationTimes;0<e;){var t=31-zs(e),n=1<<t;r[t]=-1,e&=~n}}function BE(r){if(Et&6)throw Error(Ee(327));Zu();var e=y0(r,0);if(!(e&1))return si(r,Qn()),null;var t=k0(r,e);if(r.tag!==0&&t===2){var n=pF(r);n!==0&&(e=n,t=JF(r,n))}if(t===1)throw t=Xh,Wl(r,0),gA(r,e),si(r,Qn()),t;if(t===6)throw Error(Ee(345));return r.finishedWork=r.current.alternate,r.finishedLanes=e,Ul(r,qr,fa),si(r,Qn()),null}function ax(r,e){var t=Et;Et|=1;try{return r(e)}finally{Et=t,Et===0&&(pf=Qn()+500,KB&&sl())}}function tc(r){yA!==null&&yA.tag===0&&!(Et&6)&&Zu();var e=Et;Et|=1;var t=ls.transition,n=Pt;try{if(ls.transition=null,Pt=1,r)return r()}finally{Pt=n,ls.transition=t,Et=e,!(Et&6)&&sl()}}function Ax(){Ci=Fu.current,en(Fu)}function Wl(r,e){r.finishedWork=null,r.finishedLanes=0;var t=r.timeoutHandle;if(t!==-1&&(r.timeoutHandle=-1,nO(t)),Ln!==null)for(t=Ln.return;t!==null;){var n=t;switch(PU(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&U0();break;case 3:df(),en(ri),en(_r),jU();break;case 5:KU(n);break;case 4:df();break;case 13:en(An);break;case 19:en(An);break;case 10:HU(n.type._context);break;case 22:case 23:Ax()}t=t.return}if(sr=r,Ln=r=DA(r.current,null),fr=Ci=e,Kn=0,Xh=null,sx=ev=ec=0,qr=hh=null,_l!==null){for(e=0;e<_l.length;e++)if(t=_l[e],n=t.interleaved,n!==null){t.interleaved=null;var i=n.next,s=t.pending;if(s!==null){var o=s.next;s.next=i,n.next=o}t.pending=n}_l=null}return r}function ON(r,e){do{var t=Ln;try{if(OU(),Dm.current=T0,M0){for(var n=fn.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}M0=!1}if($l=0,rr=Gn=fn=null,fh=!1,Oh=0,ix.current=null,t===null||t.return===null){Kn=1,Xh=e,Ln=null;break}e:{var s=r,o=t.return,a=t,A=e;if(e=fr,a.flags|=32768,A!==null&&typeof A=="object"&&typeof A.then=="function"){var l=A,c=a,u=c.tag;if(!(c.mode&1)&&(u===0||u===11||u===15)){var f=c.alternate;f?(c.updateQueue=f.updateQueue,c.memoizedState=f.memoizedState,c.lanes=f.lanes):(c.updateQueue=null,c.memoizedState=null)}var d=sE(o);if(d!==null){d.flags&=-257,oE(d,o,a,s,e),d.mode&1&&iE(s,l,e),e=d,A=l;var p=e.updateQueue;if(p===null){var h=new Set;h.add(A),e.updateQueue=h}else p.add(A);break e}else{if(!(e&1)){iE(s,l,e),lx();break e}A=Error(Ee(426))}}else if(rn&&a.mode&1){var m=sE(o);if(m!==null){!(m.flags&65536)&&(m.flags|=256),oE(m,o,a,s,e),JU(hf(A,a));break e}}s=A=hf(A,a),Kn!==4&&(Kn=2),hh===null?hh=[s]:hh.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var g=bN(s,A,e);jb(s,g);break e;case 1:a=A;var B=s.type,v=s.stateNode;if(!(s.flags&128)&&(typeof B.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(NA===null||!NA.has(v)))){s.flags|=65536,e&=-e,s.lanes|=e;var w=EN(s,a,e);jb(s,w);break e}}s=s.return}while(s!==null)}XN(t)}catch(C){e=C,Ln===t&&t!==null&&(Ln=t=t.return);continue}break}while(1)}function HN(){var r=N0.current;return N0.current=T0,r===null?T0:r}function lx(){(Kn===0||Kn===3||Kn===2)&&(Kn=4),sr===null||!(ec&268435455)&&!(ev&268435455)||gA(sr,fr)}function k0(r,e){var t=Et;Et|=2;var n=HN();(sr!==r||fr!==e)&&(fa=null,Wl(r,e));do try{QO();break}catch(i){ON(r,i)}while(1);if(OU(),Et=t,N0.current=n,Ln!==null)throw Error(Ee(261));return sr=null,fr=0,Kn}function QO(){for(;Ln!==null;)zN(Ln)}function bO(){for(;Ln!==null&&!$J();)zN(Ln)}function zN(r){var e=KN(r.alternate,r,Ci);r.memoizedProps=r.pendingProps,e===null?XN(r):Ln=e,ix.current=null}function XN(r){var e=r;do{var t=e.alternate;if(r=e.return,e.flags&32768){if(t=CO(t,e),t!==null){t.flags&=32767,Ln=t;return}if(r!==null)r.flags|=32768,r.subtreeFlags=0,r.deletions=null;else{Kn=6,Ln=null;return}}else if(t=yO(t,e,Ci),t!==null){Ln=t;return}if(e=e.sibling,e!==null){Ln=e;return}Ln=e=r}while(e!==null);Kn===0&&(Kn=5)}function Ul(r,e,t){var n=Pt,i=ls.transition;try{ls.transition=null,Pt=1,EO(r,e,t,n)}finally{ls.transition=i,Pt=n}return null}function EO(r,e,t,n){do Zu();while(yA!==null);if(Et&6)throw Error(Ee(327));t=r.finishedWork;var i=r.finishedLanes;if(t===null)return null;if(r.finishedWork=null,r.finishedLanes=0,t===r.current)throw Error(Ee(177));r.callbackNode=null,r.callbackPriority=0;var s=t.lanes|t.childLanes;if(lG(r,s),r===sr&&(Ln=sr=null,fr=0),!(t.subtreeFlags&2064)&&!(t.flags&2064)||ag||(ag=!0,jN(v0,function(){return Zu(),null})),s=(t.flags&15990)!==0,t.subtreeFlags&15990||s){s=ls.transition,ls.transition=null;var o=Pt;Pt=1;var a=Et;Et|=4,ix.current=null,FO(r,t),PN(t,r),YG(CF),C0=!!yF,CF=yF=null,r.current=t,IO(t),eG(),Et=a,Pt=o,ls.transition=s}else r.current=t;if(ag&&(ag=!1,yA=r,D0=i),s=r.pendingLanes,s===0&&(NA=null),rG(t.stateNode),si(r,Qn()),e!==null)for(n=r.onRecoverableError,t=0;t<e.length;t++)i=e[t],n(i.value,{componentStack:i.stack,digest:i.digest});if(V0)throw V0=!1,r=ZF,ZF=null,r;return D0&1&&r.tag!==0&&Zu(),s=r.pendingLanes,s&1?r===PF?ph++:(ph=0,PF=r):ph=0,sl(),null}function Zu(){if(yA!==null){var r=QT(D0),e=ls.transition,t=Pt;try{if(ls.transition=null,Pt=16>r?16:r,yA===null)var n=!1;else{if(r=yA,yA=null,D0=0,Et&6)throw Error(Ee(331));var i=Et;for(Et|=4,Pe=r.current;Pe!==null;){var s=Pe,o=s.child;if(Pe.flags&16){var a=s.deletions;if(a!==null){for(var A=0;A<a.length;A++){var l=a[A];for(Pe=l;Pe!==null;){var c=Pe;switch(c.tag){case 0:case 11:case 15:dh(8,c,s)}var u=c.child;if(u!==null)u.return=c,Pe=u;else for(;Pe!==null;){c=Pe;var f=c.sibling,d=c.return;if(LN(c),c===l){Pe=null;break}if(f!==null){f.return=d,Pe=f;break}Pe=d}}}var p=s.alternate;if(p!==null){var h=p.child;if(h!==null){p.child=null;do{var m=h.sibling;h.sibling=null,h=m}while(h!==null)}}Pe=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,Pe=o;else e:for(;Pe!==null;){if(s=Pe,s.flags&2048)switch(s.tag){case 0:case 11:case 15:dh(9,s,s.return)}var g=s.sibling;if(g!==null){g.return=s.return,Pe=g;break e}Pe=s.return}}var B=r.current;for(Pe=B;Pe!==null;){o=Pe;var v=o.child;if(o.subtreeFlags&2064&&v!==null)v.return=o,Pe=v;else e:for(o=B;Pe!==null;){if(a=Pe,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:$B(9,a)}}catch(C){Bn(a,a.return,C)}if(a===o){Pe=null;break e}var w=a.sibling;if(w!==null){w.return=a.return,Pe=w;break e}Pe=a.return}}if(Et=i,sl(),Eo&&typeof Eo.onPostCommitFiberRoot=="function")try{Eo.onPostCommitFiberRoot(OB,r)}catch{}n=!0}return n}finally{Pt=t,ls.transition=e}}return!1}function vE(r,e,t){e=hf(t,e),e=bN(r,e,1),r=TA(r,e,1),e=Or(),r!==null&&(Ip(r,1,e),si(r,e))}function Bn(r,e,t){if(r.tag===3)vE(r,r,t);else for(;e!==null;){if(e.tag===3){vE(e,r,t);break}else if(e.tag===1){var n=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(NA===null||!NA.has(n))){r=hf(t,r),r=EN(e,r,1),e=TA(e,r,1),r=Or(),e!==null&&(Ip(e,1,r),si(e,r));break}}e=e.return}}function SO(r,e,t){var n=r.pingCache;n!==null&&n.delete(e),e=Or(),r.pingedLanes|=r.suspendedLanes&t,sr===r&&(fr&t)===t&&(Kn===4||Kn===3&&(fr&130023424)===fr&&500>Qn()-ox?Wl(r,0):sx|=t),si(r,e)}function YN(r,e){e===0&&(r.mode&1?(e=jp,jp<<=1,!(jp&130023424)&&(jp=4194304)):e=1);var t=Or();r=Ta(r,e),r!==null&&(Ip(r,e,t),si(r,t))}function _O(r){var e=r.memoizedState,t=0;e!==null&&(t=e.retryLane),YN(r,t)}function RO(r,e){var t=0;switch(r.tag){case 13:var n=r.stateNode,i=r.memoizedState;i!==null&&(t=i.retryLane);break;case 19:n=r.stateNode;break;default:throw Error(Ee(314))}n!==null&&n.delete(e),YN(r,t)}var KN;KN=function(r,e,t){if(r!==null)if(r.memoizedProps!==e.pendingProps||ri.current)ni=!0;else{if(!(r.lanes&t)&&!(e.flags&128))return ni=!1,vO(r,e,t);ni=!!(r.flags&131072)}else ni=!1,rn&&e.flags&1048576&&$T(e,b0,e.index);switch(e.lanes=0,e.tag){case 2:var n=e.type;Lm(r,e),r=e.pendingProps;var i=cf(e,_r.current);Wu(e,t),i=$U(null,e,n,r,i,t);var s=ex();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,ii(n)?(s=!0,x0(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,XU(e),i.updater=jB,e.stateNode=i,i._reactInternals=e,SF(e,n,r,t),e=MF(null,e,n,!0,s,t)):(e.tag=0,rn&&s&&ZU(e),Lr(null,e,i,t),e=e.child),e;case 16:n=e.elementType;e:{switch(Lm(r,e),r=e.pendingProps,i=n._init,n=i(n._payload),e.type=n,i=e.tag=TO(n),r=Ps(n,r),i){case 0:e=RF(null,e,n,r,t);break e;case 1:e=lE(null,e,n,r,t);break e;case 11:e=aE(null,e,n,r,t);break e;case 14:e=AE(null,e,n,Ps(n.type,r),t);break e}throw Error(Ee(306,n,""))}return e;case 0:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:Ps(n,i),RF(r,e,n,i,t);case 1:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:Ps(n,i),lE(r,e,n,i,t);case 3:e:{if(MN(e),r===null)throw Error(Ee(387));n=e.pendingProps,s=e.memoizedState,i=s.element,rN(r,e),_0(e,n,null,t);var o=e.memoizedState;if(n=o.element,s.isDehydrated)if(s={element:n,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=hf(Error(Ee(423)),e),e=cE(r,e,n,t,i);break e}else if(n!==i){i=hf(Error(Ee(424)),e),e=cE(r,e,n,t,i);break e}else for(bi=MA(e.stateNode.containerInfo.firstChild),Si=e,rn=!0,Os=null,t=aN(e,null,n,t),e.child=t;t;)t.flags=t.flags&-3|4096,t=t.sibling;else{if(uf(),n===i){e=Na(r,e,t);break e}Lr(r,e,n,t)}e=e.child}return e;case 5:return AN(e),r===null&&QF(e),n=e.type,i=e.pendingProps,s=r!==null?r.memoizedProps:null,o=i.children,wF(n,i)?o=null:s!==null&&wF(n,s)&&(e.flags|=32),RN(r,e),Lr(r,e,o,t),e.child;case 6:return r===null&&QF(e),null;case 13:return TN(r,e,t);case 4:return YU(e,e.stateNode.containerInfo),n=e.pendingProps,r===null?e.child=ff(e,null,n,t):Lr(r,e,n,t),e.child;case 11:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:Ps(n,i),aE(r,e,n,i,t);case 7:return Lr(r,e,e.pendingProps,t),e.child;case 8:return Lr(r,e,e.pendingProps.children,t),e.child;case 12:return Lr(r,e,e.pendingProps.children,t),e.child;case 10:e:{if(n=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,jt(E0,n._currentValue),n._currentValue=o,s!==null)if(qs(s.value,o)){if(s.children===i.children&&!ri.current){e=Na(r,e,t);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var A=a.firstContext;A!==null;){if(A.context===n){if(s.tag===1){A=xa(-1,t&-t),A.tag=2;var l=s.updateQueue;if(l!==null){l=l.shared;var c=l.pending;c===null?A.next=A:(A.next=c.next,c.next=A),l.pending=A}}s.lanes|=t,A=s.alternate,A!==null&&(A.lanes|=t),bF(s.return,t,e),a.lanes|=t;break}A=A.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(Ee(341));o.lanes|=t,a=o.alternate,a!==null&&(a.lanes|=t),bF(o,t,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Lr(r,e,i.children,t),e=e.child}return e;case 9:return i=e.type,n=e.pendingProps.children,Wu(e,t),i=ds(i),n=n(i),e.flags|=1,Lr(r,e,n,t),e.child;case 14:return n=e.type,i=Ps(n,e.pendingProps),i=Ps(n.type,i),AE(r,e,n,i,t);case 15:return SN(r,e,e.type,e.pendingProps,t);case 17:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:Ps(n,i),Lm(r,e),e.tag=1,ii(n)?(r=!0,x0(e)):r=!1,Wu(e,t),sN(e,n,i),SF(e,n,i,t),MF(null,e,n,!0,r,t);case 19:return NN(r,e,t);case 22:return _N(r,e,t)}throw Error(Ee(156,e.tag))};function jN(r,e){return FT(r,e)}function MO(r,e,t,n){this.tag=r,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function rs(r,e,t,n){return new MO(r,e,t,n)}function cx(r){return r=r.prototype,!(!r||!r.isReactComponent)}function TO(r){if(typeof r=="function")return cx(r)?1:0;if(r!=null){if(r=r.$$typeof,r===EU)return 11;if(r===SU)return 14}return 2}function DA(r,e){var t=r.alternate;return t===null?(t=rs(r.tag,e,r.key,r.mode),t.elementType=r.elementType,t.type=r.type,t.stateNode=r.stateNode,t.alternate=r,r.alternate=t):(t.pendingProps=e,t.type=r.type,t.flags=0,t.subtreeFlags=0,t.deletions=null),t.flags=r.flags&14680064,t.childLanes=r.childLanes,t.lanes=r.lanes,t.child=r.child,t.memoizedProps=r.memoizedProps,t.memoizedState=r.memoizedState,t.updateQueue=r.updateQueue,e=r.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},t.sibling=r.sibling,t.index=r.index,t.ref=r.ref,t}function Pm(r,e,t,n,i,s){var o=2;if(n=r,typeof r=="function")cx(r)&&(o=1);else if(typeof r=="string")o=5;else e:switch(r){case du:return Zl(t.children,i,s,e);case bU:o=8,i|=8;break;case eF:return r=rs(12,t,e,i|2),r.elementType=eF,r.lanes=s,r;case tF:return r=rs(13,t,e,i),r.elementType=tF,r.lanes=s,r;case nF:return r=rs(19,t,e,i),r.elementType=nF,r.lanes=s,r;case oT:return tv(t,i,s,e);default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case iT:o=10;break e;case sT:o=9;break e;case EU:o=11;break e;case SU:o=14;break e;case lA:o=16,n=null;break e}throw Error(Ee(130,r==null?r:typeof r,""))}return e=rs(o,t,e,i),e.elementType=r,e.type=n,e.lanes=s,e}function Zl(r,e,t,n){return r=rs(7,r,n,e),r.lanes=t,r}function tv(r,e,t,n){return r=rs(22,r,n,e),r.elementType=oT,r.lanes=t,r.stateNode={isHidden:!1},r}function by(r,e,t){return r=rs(6,r,null,e),r.lanes=t,r}function Ey(r,e,t){return e=rs(4,r.children!==null?r.children:[],r.key,e),e.lanes=t,e.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},e}function NO(r,e,t,n,i){this.tag=e,this.containerInfo=r,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ly(0),this.expirationTimes=ly(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ly(0),this.identifierPrefix=n,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function ux(r,e,t,n,i,s,o,a,A){return r=new NO(r,e,t,a,A),e===1?(e=1,s===!0&&(e|=8)):e=0,s=rs(3,null,null,e),r.current=s,s.stateNode=r,s.memoizedState={element:n,isDehydrated:t,cache:null,transitions:null,pendingSuspenseBoundaries:null},XU(s),r}function VO(r,e,t){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:fu,key:n==null?null:""+n,children:r,containerInfo:e,implementation:t}}function qN(r){if(!r)return zA;r=r._reactInternals;e:{if(uc(r)!==r||r.tag!==1)throw Error(Ee(170));var e=r;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(ii(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Ee(171))}if(r.tag===1){var t=r.type;if(ii(t))return jT(r,t,e)}return e}function $N(r,e,t,n,i,s,o,a,A){return r=ux(t,n,!0,r,i,s,o,a,A),r.context=qN(null),t=r.current,n=Or(),i=VA(t),s=xa(n,i),s.callback=e??null,TA(t,s,i),r.current.lanes=i,Ip(r,i,n),si(r,n),r}function nv(r,e,t,n){var i=e.current,s=Or(),o=VA(i);return t=qN(t),e.context===null?e.context=t:e.pendingContext=t,e=xa(s,o),e.payload={element:r},n=n===void 0?null:n,n!==null&&(e.callback=n),r=TA(i,e,o),r!==null&&(Xs(r,i,o,s),Vm(r,i,o)),o}function L0(r){if(r=r.current,!r.child)return null;switch(r.child.tag){case 5:return r.child.stateNode;default:return r.child.stateNode}}function yE(r,e){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var t=r.retryLane;r.retryLane=t!==0&&t<e?t:e}}function fx(r,e){yE(r,e),(r=r.alternate)&&yE(r,e)}function DO(){return null}var eV=typeof reportError=="function"?reportError:function(r){console.error(r)};function dx(r){this._internalRoot=r}rv.prototype.render=dx.prototype.render=function(r){var e=this._internalRoot;if(e===null)throw Error(Ee(409));nv(r,e,null,null)};rv.prototype.unmount=dx.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var e=r.containerInfo;tc(function(){nv(null,r,null,null)}),e[Ma]=null}};function rv(r){this._internalRoot=r}rv.prototype.unstable_scheduleHydration=function(r){if(r){var e=ST();r={blockedOn:null,target:r,priority:e};for(var t=0;t<pA.length&&e!==0&&e<pA[t].priority;t++);pA.splice(t,0,r),t===0&&RT(r)}};function hx(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function iv(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11&&(r.nodeType!==8||r.nodeValue!==" react-mount-point-unstable "))}function CE(){}function kO(r,e,t,n,i){if(i){if(typeof n=="function"){var s=n;n=function(){var l=L0(o);s.call(l)}}var o=$N(e,n,r,0,null,!1,!1,"",CE);return r._reactRootContainer=o,r[Ma]=o.current,Wh(r.nodeType===8?r.parentNode:r),tc(),o}for(;i=r.lastChild;)r.removeChild(i);if(typeof n=="function"){var a=n;n=function(){var l=L0(A);a.call(l)}}var A=ux(r,0,!1,null,null,!1,!1,"",CE);return r._reactRootContainer=A,r[Ma]=A.current,Wh(r.nodeType===8?r.parentNode:r),tc(function(){nv(e,A,t,n)}),A}function sv(r,e,t,n,i){var s=t._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var A=L0(o);a.call(A)}}nv(e,o,r,i)}else o=kO(t,e,r,i,n);return L0(o)}bT=function(r){switch(r.tag){case 3:var e=r.stateNode;if(e.current.memoizedState.isDehydrated){var t=Zd(e.pendingLanes);t!==0&&(MU(e,t|1),si(e,Qn()),!(Et&6)&&(pf=Qn()+500,sl()))}break;case 13:tc(function(){var n=Ta(r,1);if(n!==null){var i=Or();Xs(n,r,1,i)}}),fx(r,1)}};TU=function(r){if(r.tag===13){var e=Ta(r,134217728);if(e!==null){var t=Or();Xs(e,r,134217728,t)}fx(r,134217728)}};ET=function(r){if(r.tag===13){var e=VA(r),t=Ta(r,e);if(t!==null){var n=Or();Xs(t,r,e,n)}fx(r,e)}};ST=function(){return Pt};_T=function(r,e){var t=Pt;try{return Pt=r,e()}finally{Pt=t}};fF=function(r,e,t){switch(e){case"input":if(sF(r,t),e=t.name,t.type==="radio"&&e!=null){for(t=r;t.parentNode;)t=t.parentNode;for(t=t.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<t.length;e++){var n=t[e];if(n!==r&&n.form===r.form){var i=YB(n);if(!i)throw Error(Ee(90));AT(n),sF(n,i)}}}break;case"textarea":cT(r,t);break;case"select":e=t.value,e!=null&&Vu(r,!!t.multiple,e,!1)}};mT=ax;BT=tc;var LO={usingClientEntryPoint:!1,Events:[xp,mu,YB,pT,gT,ax]},od={findFiberByHostInstance:Sl,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},WO={bundleType:od.bundleType,version:od.version,rendererPackageName:od.rendererPackageName,rendererConfig:od.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Pa.ReactCurrentDispatcher,findHostInstanceByFiber:function(r){return r=CT(r),r===null?null:r.stateNode},findFiberByHostInstance:od.findFiberByHostInstance||DO,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ag=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ag.isDisabled&&Ag.supportsFiber)try{OB=Ag.inject(WO),Eo=Ag}catch{}}ki.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=LO;ki.createPortal=function(r,e){var t=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!hx(e))throw Error(Ee(200));return VO(r,e,null,t)};ki.createRoot=function(r,e){if(!hx(r))throw Error(Ee(299));var t=!1,n="",i=eV;return e!=null&&(e.unstable_strictMode===!0&&(t=!0),e.identifierPrefix!==void 0&&(n=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=ux(r,1,!1,null,null,t,!1,n,i),r[Ma]=e.current,Wh(r.nodeType===8?r.parentNode:r),new dx(e)};ki.findDOMNode=function(r){if(r==null)return null;if(r.nodeType===1)return r;var e=r._reactInternals;if(e===void 0)throw typeof r.render=="function"?Error(Ee(188)):(r=Object.keys(r).join(","),Error(Ee(268,r)));return r=CT(e),r=r===null?null:r.stateNode,r};ki.flushSync=function(r){return tc(r)};ki.hydrate=function(r,e,t){if(!iv(e))throw Error(Ee(200));return sv(null,r,e,!0,t)};ki.hydrateRoot=function(r,e,t){if(!hx(r))throw Error(Ee(405));var n=t!=null&&t.hydratedSources||null,i=!1,s="",o=eV;if(t!=null&&(t.unstable_strictMode===!0&&(i=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onRecoverableError!==void 0&&(o=t.onRecoverableError)),e=$N(e,null,r,1,t??null,i,!1,s,o),r[Ma]=e.current,Wh(r),n)for(r=0;r<n.length;r++)t=n[r],i=t._getVersion,i=i(t._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[t,i]:e.mutableSourceEagerHydrationData.push(t,i);return new rv(e)};ki.render=function(r,e,t){if(!iv(e))throw Error(Ee(200));return sv(null,r,e,!1,t)};ki.unmountComponentAtNode=function(r){if(!iv(r))throw Error(Ee(40));return r._reactRootContainer?(tc(function(){sv(null,null,r,!1,function(){r._reactRootContainer=null,r[Ma]=null})}),!0):!1};ki.unstable_batchedUpdates=ax;ki.unstable_renderSubtreeIntoContainer=function(r,e,t,n){if(!iv(t))throw Error(Ee(200));if(r==null||r._reactInternals===void 0)throw Error(Ee(38));return sv(r,e,t,!1,n)};ki.version="18.2.0-next-9e3b772b8-20220608";(function(r){function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}e(),r.exports=ki})(DJ);var wE=jw;Kw.createRoot=wE.createRoot,Kw.hydrateRoot=wE.hydrateRoot;const ZO=""+new URL("cc_bgm_balanced-f542698c.wav",import.meta.url).href,Po=Ie.createContext(),PO=({children:r})=>{const[e,t]=Ie.useState(!1),n=et.useRef(null),i=()=>{t(!1);const o=n.current;o.src=ZO,o.loop=!0,o.volume=0,o.play();let a=0;const A=5,l=setInterval(()=>{a=Math.max(a+1/(10*A*60),1),a>=1&&clearInterval(l),o.volume=a},1e3/60)},s=()=>{t(!0),n.current.pause()};return ie.jsxs(Po.Provider,{value:{isMute:e,setMute:t,enableAudio:i,disableAudio:s},children:[ie.jsx("audio",{ref:n}),r]})},JO=Ie.createContext(),GO=r=>{const[e,t]=Ie.useState(null),[n,i]=Ie.useState(null),[s,o]=Ie.useState(!1),[a,A]=Ie.useState([]);return ie.jsx(JO.Provider,{value:{walletAddress:e,setWalletAddress:t,ensName:n,setEnsName:i,connected:s,setConnected:o,OTTokens:a,setOTTokens:A},children:r.children})};/**
 * @license
 * Copyright 2010-2022 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const es="148",Cc={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},wc={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},OO=0,FE=1,HO=2,tV=1,zO=2,Jd=3,Do=0,oi=1,Va=2,lg=3,kA=0,Pu=1,nc=2,IE=3,UE=4,XO=5,su=100,YO=101,KO=102,xE=103,QE=104,jO=200,qO=201,$O=202,eH=203,nV=204,rV=205,tH=206,nH=207,rH=208,iH=209,sH=210,oH=0,aH=1,AH=2,OF=3,lH=4,cH=5,uH=6,fH=7,ov=0,dH=1,hH=2,Qa=0,pH=1,gH=2,mH=3,BH=4,vH=5,iV=300,gf=301,mf=302,W0=303,HF=304,av=306,ps=1e3,Gr=1001,Yh=1002,Hn=1003,Z0=1004,gh=1005,Wr=1006,px=1007,XA=1008,YA=1009,yH=1010,CH=1011,sV=1012,wH=1013,Ml=1014,CA=1015,Kh=1016,FH=1017,IH=1018,Ju=1020,UH=1021,xH=1022,ei=1023,QH=1024,bH=1025,Pl=1026,Bf=1027,EH=1028,SH=1029,_H=1030,RH=1031,MH=1033,Sy=33776,_y=33777,Ry=33778,My=33779,bE=35840,EE=35841,SE=35842,_E=35843,TH=36196,RE=37492,ME=37496,TE=37808,NE=37809,VE=37810,DE=37811,kE=37812,LE=37813,WE=37814,ZE=37815,PE=37816,JE=37817,GE=37818,OE=37819,HE=37820,zE=37821,XE=36492,NH=2200,VH=2201,DH=2202,vf=2300,rc=2301,Ty=2302,Iu=2400,Uu=2401,P0=2402,gx=2500,kH=2501,LH=1,oV=2,gs=3e3,lt=3001,WH=3200,ZH=3201,bp=0,PH=1,uo="srgb",jh="srgb-linear",Ny=7680,JH=519,zF=35044,GH=35048,YE="300 es",XF=1035;class ol{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const n=this._listeners;n[e]===void 0&&(n[e]=[]),n[e].indexOf(t)===-1&&n[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;const n=this._listeners;return n[e]!==void 0&&n[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;const i=this._listeners[e];if(i!==void 0){const s=i.indexOf(t);s!==-1&&i.splice(s,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const n=this._listeners[e.type];if(n!==void 0){e.target=this;const i=n.slice(0);for(let s=0,o=i.length;s<o;s++)i[s].call(this,e);e.target=null}}}const vr=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let KE=1234567;const mh=Math.PI/180,qh=180/Math.PI;function Ys(){const r=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,n=Math.random()*4294967295|0;return(vr[r&255]+vr[r>>8&255]+vr[r>>16&255]+vr[r>>24&255]+"-"+vr[e&255]+vr[e>>8&255]+"-"+vr[e>>16&15|64]+vr[e>>24&255]+"-"+vr[t&63|128]+vr[t>>8&255]+"-"+vr[t>>16&255]+vr[t>>24&255]+vr[n&255]+vr[n>>8&255]+vr[n>>16&255]+vr[n>>24&255]).toLowerCase()}function zn(r,e,t){return Math.max(e,Math.min(t,r))}function mx(r,e){return(r%e+e)%e}function OH(r,e,t,n,i){return n+(r-e)*(i-n)/(t-e)}function HH(r,e,t){return r!==e?(t-r)/(e-r):0}function Bh(r,e,t){return(1-t)*r+t*e}function zH(r,e,t,n){return Bh(r,e,1-Math.exp(-t*n))}function XH(r,e=1){return e-Math.abs(mx(r,e*2)-e)}function YH(r,e,t){return r<=e?0:r>=t?1:(r=(r-e)/(t-e),r*r*(3-2*r))}function KH(r,e,t){return r<=e?0:r>=t?1:(r=(r-e)/(t-e),r*r*r*(r*(r*6-15)+10))}function jH(r,e){return r+Math.floor(Math.random()*(e-r+1))}function qH(r,e){return r+Math.random()*(e-r)}function $H(r){return r*(.5-Math.random())}function e4(r){r!==void 0&&(KE=r);let e=KE+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function t4(r){return r*mh}function n4(r){return r*qh}function YF(r){return(r&r-1)===0&&r!==0}function aV(r){return Math.pow(2,Math.ceil(Math.log(r)/Math.LN2))}function J0(r){return Math.pow(2,Math.floor(Math.log(r)/Math.LN2))}function r4(r,e,t,n,i){const s=Math.cos,o=Math.sin,a=s(t/2),A=o(t/2),l=s((e+n)/2),c=o((e+n)/2),u=s((e-n)/2),f=o((e-n)/2),d=s((n-e)/2),p=o((n-e)/2);switch(i){case"XYX":r.set(a*c,A*u,A*f,a*l);break;case"YZY":r.set(A*f,a*c,A*u,a*l);break;case"ZXZ":r.set(A*u,A*f,a*c,a*l);break;case"XZX":r.set(a*c,A*p,A*d,a*l);break;case"YXY":r.set(A*d,a*c,A*p,a*l);break;case"ZYZ":r.set(A*p,A*d,a*c,a*l);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+i)}}function Fa(r,e){switch(e.constructor){case Float32Array:return r;case Uint16Array:return r/65535;case Uint8Array:return r/255;case Int16Array:return Math.max(r/32767,-1);case Int8Array:return Math.max(r/127,-1);default:throw new Error("Invalid component type.")}}function Ht(r,e){switch(e.constructor){case Float32Array:return r;case Uint16Array:return Math.round(r*65535);case Uint8Array:return Math.round(r*255);case Int16Array:return Math.round(r*32767);case Int8Array:return Math.round(r*127);default:throw new Error("Invalid component type.")}}var It=Object.freeze({__proto__:null,DEG2RAD:mh,RAD2DEG:qh,generateUUID:Ys,clamp:zn,euclideanModulo:mx,mapLinear:OH,inverseLerp:HH,lerp:Bh,damp:zH,pingpong:XH,smoothstep:YH,smootherstep:KH,randInt:jH,randFloat:qH,randFloatSpread:$H,seededRandom:e4,degToRad:t4,radToDeg:n4,isPowerOfTwo:YF,ceilPowerOfTwo:aV,floorPowerOfTwo:J0,setQuaternionFromProperEuler:r4,normalize:Ht,denormalize:Fa});class Je{constructor(e=0,t=0){Je.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,n=this.y,i=e.elements;return this.x=i[0]*t+i[3]*n+i[6],this.y=i[1]*t+i[4]*n+i[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y;return t*t+n*n}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const n=Math.cos(t),i=Math.sin(t),s=this.x-e.x,o=this.y-e.y;return this.x=s*n-o*i+e.x,this.y=s*i+o*n+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class an{constructor(){an.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1]}set(e,t,n,i,s,o,a,A,l){const c=this.elements;return c[0]=e,c[1]=i,c[2]=a,c[3]=t,c[4]=s,c[5]=A,c[6]=n,c[7]=o,c[8]=l,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],this}extractBasis(e,t,n){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,i=t.elements,s=this.elements,o=n[0],a=n[3],A=n[6],l=n[1],c=n[4],u=n[7],f=n[2],d=n[5],p=n[8],h=i[0],m=i[3],g=i[6],B=i[1],v=i[4],w=i[7],C=i[2],I=i[5],E=i[8];return s[0]=o*h+a*B+A*C,s[3]=o*m+a*v+A*I,s[6]=o*g+a*w+A*E,s[1]=l*h+c*B+u*C,s[4]=l*m+c*v+u*I,s[7]=l*g+c*w+u*E,s[2]=f*h+d*B+p*C,s[5]=f*m+d*v+p*I,s[8]=f*g+d*w+p*E,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[1],i=e[2],s=e[3],o=e[4],a=e[5],A=e[6],l=e[7],c=e[8];return t*o*c-t*a*l-n*s*c+n*a*A+i*s*l-i*o*A}invert(){const e=this.elements,t=e[0],n=e[1],i=e[2],s=e[3],o=e[4],a=e[5],A=e[6],l=e[7],c=e[8],u=c*o-a*l,f=a*A-c*s,d=l*s-o*A,p=t*u+n*f+i*d;if(p===0)return this.set(0,0,0,0,0,0,0,0,0);const h=1/p;return e[0]=u*h,e[1]=(i*l-c*n)*h,e[2]=(a*n-i*o)*h,e[3]=f*h,e[4]=(c*t-i*A)*h,e[5]=(i*s-a*t)*h,e[6]=d*h,e[7]=(n*A-l*t)*h,e[8]=(o*t-n*s)*h,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,n,i,s,o,a){const A=Math.cos(s),l=Math.sin(s);return this.set(n*A,n*l,-n*(A*o+l*a)+o+e,-i*l,i*A,-i*(-l*o+A*a)+a+t,0,0,1),this}scale(e,t){return this.premultiply(Vy.makeScale(e,t)),this}rotate(e){return this.premultiply(Vy.makeRotation(-e)),this}translate(e,t){return this.premultiply(Vy.makeTranslation(e,t)),this}makeTranslation(e,t){return this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,n,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,n=e.elements;for(let i=0;i<9;i++)if(t[i]!==n[i])return!1;return!0}fromArray(e,t=0){for(let n=0;n<9;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const Vy=new an;function AV(r){for(let e=r.length-1;e>=0;--e)if(r[e]>=65535)return!0;return!1}function $h(r){return document.createElementNS("http://www.w3.org/1999/xhtml",r)}function Jl(r){return r<.04045?r*.0773993808:Math.pow(r*.9478672986+.0521327014,2.4)}function Jm(r){return r<.0031308?r*12.92:1.055*Math.pow(r,.41666)-.055}const Dy={[uo]:{[jh]:Jl},[jh]:{[uo]:Jm}},Mr={legacyMode:!0,get workingColorSpace(){return jh},set workingColorSpace(r){console.warn("THREE.ColorManagement: .workingColorSpace is readonly.")},convert:function(r,e,t){if(this.legacyMode||e===t||!e||!t)return r;if(Dy[e]&&Dy[e][t]!==void 0){const n=Dy[e][t];return r.r=n(r.r),r.g=n(r.g),r.b=n(r.b),r}throw new Error("Unsupported color space conversion.")},fromWorkingColorSpace:function(r,e){return this.convert(r,this.workingColorSpace,e)},toWorkingColorSpace:function(r,e){return this.convert(r,e,this.workingColorSpace)}},lV={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Pn={r:0,g:0,b:0},Ss={h:0,s:0,l:0},cg={h:0,s:0,l:0};function ky(r,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?r+(e-r)*6*t:t<1/2?e:t<2/3?r+(e-r)*6*(2/3-t):r}function ug(r,e){return e.r=r.r,e.g=r.g,e.b=r.b,e}class Ve{constructor(e,t,n){return this.isColor=!0,this.r=1,this.g=1,this.b=1,t===void 0&&n===void 0?this.set(e):this.setRGB(e,t,n)}set(e){return e&&e.isColor?this.copy(e):typeof e=="number"?this.setHex(e):typeof e=="string"&&this.setStyle(e),this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=uo){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,Mr.toWorkingColorSpace(this,t),this}setRGB(e,t,n,i=Mr.workingColorSpace){return this.r=e,this.g=t,this.b=n,Mr.toWorkingColorSpace(this,i),this}setHSL(e,t,n,i=Mr.workingColorSpace){if(e=mx(e,1),t=zn(t,0,1),n=zn(n,0,1),t===0)this.r=this.g=this.b=n;else{const s=n<=.5?n*(1+t):n+t-n*t,o=2*n-s;this.r=ky(o,s,e+1/3),this.g=ky(o,s,e),this.b=ky(o,s,e-1/3)}return Mr.toWorkingColorSpace(this,i),this}setStyle(e,t=uo){function n(s){s!==void 0&&parseFloat(s)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let i;if(i=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(e)){let s;const o=i[1],a=i[2];switch(o){case"rgb":case"rgba":if(s=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return this.r=Math.min(255,parseInt(s[1],10))/255,this.g=Math.min(255,parseInt(s[2],10))/255,this.b=Math.min(255,parseInt(s[3],10))/255,Mr.toWorkingColorSpace(this,t),n(s[4]),this;if(s=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return this.r=Math.min(100,parseInt(s[1],10))/100,this.g=Math.min(100,parseInt(s[2],10))/100,this.b=Math.min(100,parseInt(s[3],10))/100,Mr.toWorkingColorSpace(this,t),n(s[4]),this;break;case"hsl":case"hsla":if(s=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a)){const A=parseFloat(s[1])/360,l=parseFloat(s[2])/100,c=parseFloat(s[3])/100;return n(s[4]),this.setHSL(A,l,c,t)}break}}else if(i=/^\#([A-Fa-f\d]+)$/.exec(e)){const s=i[1],o=s.length;if(o===3)return this.r=parseInt(s.charAt(0)+s.charAt(0),16)/255,this.g=parseInt(s.charAt(1)+s.charAt(1),16)/255,this.b=parseInt(s.charAt(2)+s.charAt(2),16)/255,Mr.toWorkingColorSpace(this,t),this;if(o===6)return this.r=parseInt(s.charAt(0)+s.charAt(1),16)/255,this.g=parseInt(s.charAt(2)+s.charAt(3),16)/255,this.b=parseInt(s.charAt(4)+s.charAt(5),16)/255,Mr.toWorkingColorSpace(this,t),this}return e&&e.length>0?this.setColorName(e,t):this}setColorName(e,t=uo){const n=lV[e.toLowerCase()];return n!==void 0?this.setHex(n,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=Jl(e.r),this.g=Jl(e.g),this.b=Jl(e.b),this}copyLinearToSRGB(e){return this.r=Jm(e.r),this.g=Jm(e.g),this.b=Jm(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=uo){return Mr.fromWorkingColorSpace(ug(this,Pn),e),zn(Pn.r*255,0,255)<<16^zn(Pn.g*255,0,255)<<8^zn(Pn.b*255,0,255)<<0}getHexString(e=uo){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=Mr.workingColorSpace){Mr.fromWorkingColorSpace(ug(this,Pn),t);const n=Pn.r,i=Pn.g,s=Pn.b,o=Math.max(n,i,s),a=Math.min(n,i,s);let A,l;const c=(a+o)/2;if(a===o)A=0,l=0;else{const u=o-a;switch(l=c<=.5?u/(o+a):u/(2-o-a),o){case n:A=(i-s)/u+(i<s?6:0);break;case i:A=(s-n)/u+2;break;case s:A=(n-i)/u+4;break}A/=6}return e.h=A,e.s=l,e.l=c,e}getRGB(e,t=Mr.workingColorSpace){return Mr.fromWorkingColorSpace(ug(this,Pn),t),e.r=Pn.r,e.g=Pn.g,e.b=Pn.b,e}getStyle(e=uo){return Mr.fromWorkingColorSpace(ug(this,Pn),e),e!==uo?`color(${e} ${Pn.r} ${Pn.g} ${Pn.b})`:`rgb(${Pn.r*255|0},${Pn.g*255|0},${Pn.b*255|0})`}offsetHSL(e,t,n){return this.getHSL(Ss),Ss.h+=e,Ss.s+=t,Ss.l+=n,this.setHSL(Ss.h,Ss.s,Ss.l),this}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,n){return this.r=e.r+(t.r-e.r)*n,this.g=e.g+(t.g-e.g)*n,this.b=e.b+(t.b-e.b)*n,this}lerpHSL(e,t){this.getHSL(Ss),e.getHSL(cg);const n=Bh(Ss.h,cg.h,t),i=Bh(Ss.s,cg.s,t),s=Bh(Ss.l,cg.l,t);return this.setHSL(n,i,s),this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}Ve.NAMES=lV;let Fc;class cV{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{Fc===void 0&&(Fc=$h("canvas")),Fc.width=e.width,Fc.height=e.height;const n=Fc.getContext("2d");e instanceof ImageData?n.putImageData(e,0,0):n.drawImage(e,0,0,e.width,e.height),t=Fc}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=$h("canvas");t.width=e.width,t.height=e.height;const n=t.getContext("2d");n.drawImage(e,0,0,e.width,e.height);const i=n.getImageData(0,0,e.width,e.height),s=i.data;for(let o=0;o<s.length;o++)s[o]=Jl(s[o]/255)*255;return n.putImageData(i,0,0),t}else if(e.data){const t=e.data.slice(0);for(let n=0;n<t.length;n++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[n]=Math.floor(Jl(t[n]/255)*255):t[n]=Jl(t[n]);return{data:t,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}class Bx{constructor(e=null){this.isSource=!0,this.uuid=Ys(),this.data=e,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const n={uuid:this.uuid,url:""},i=this.data;if(i!==null){let s;if(Array.isArray(i)){s=[];for(let o=0,a=i.length;o<a;o++)i[o].isDataTexture?s.push(Ly(i[o].image)):s.push(Ly(i[o]))}else s=Ly(i);n.url=s}return t||(e.images[this.uuid]=n),n}}function Ly(r){return typeof HTMLImageElement<"u"&&r instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&r instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&r instanceof ImageBitmap?cV.getDataURL(r):r.data?{data:Array.from(r.data),width:r.width,height:r.height,type:r.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let i4=0;class En extends ol{constructor(e=En.DEFAULT_IMAGE,t=En.DEFAULT_MAPPING,n=Gr,i=Gr,s=Wr,o=XA,a=ei,A=YA,l=En.DEFAULT_ANISOTROPY,c=gs){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:i4++}),this.uuid=Ys(),this.name="",this.source=new Bx(e),this.mipmaps=[],this.mapping=t,this.wrapS=n,this.wrapT=i,this.magFilter=s,this.minFilter=o,this.anisotropy=l,this.format=a,this.internalFormat=null,this.type=A,this.offset=new Je(0,0),this.repeat=new Je(1,1),this.center=new Je(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new an,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=c,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(e){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const n={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(n.userData=this.userData),t||(e.textures[this.uuid]=n),n}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==iV)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case ps:e.x=e.x-Math.floor(e.x);break;case Gr:e.x=e.x<0?0:1;break;case Yh:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case ps:e.y=e.y-Math.floor(e.y);break;case Gr:e.y=e.y<0?0:1;break;case Yh:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}}En.DEFAULT_IMAGE=null;En.DEFAULT_MAPPING=iV;En.DEFAULT_ANISOTROPY=1;class bt{constructor(e=0,t=0,n=0,i=1){bt.prototype.isVector4=!0,this.x=e,this.y=t,this.z=n,this.w=i}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,n,i){return this.x=e,this.y=t,this.z=n,this.w=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,n=this.y,i=this.z,s=this.w,o=e.elements;return this.x=o[0]*t+o[4]*n+o[8]*i+o[12]*s,this.y=o[1]*t+o[5]*n+o[9]*i+o[13]*s,this.z=o[2]*t+o[6]*n+o[10]*i+o[14]*s,this.w=o[3]*t+o[7]*n+o[11]*i+o[15]*s,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,n,i,s;const A=e.elements,l=A[0],c=A[4],u=A[8],f=A[1],d=A[5],p=A[9],h=A[2],m=A[6],g=A[10];if(Math.abs(c-f)<.01&&Math.abs(u-h)<.01&&Math.abs(p-m)<.01){if(Math.abs(c+f)<.1&&Math.abs(u+h)<.1&&Math.abs(p+m)<.1&&Math.abs(l+d+g-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const v=(l+1)/2,w=(d+1)/2,C=(g+1)/2,I=(c+f)/4,E=(u+h)/4,U=(p+m)/4;return v>w&&v>C?v<.01?(n=0,i=.707106781,s=.707106781):(n=Math.sqrt(v),i=I/n,s=E/n):w>C?w<.01?(n=.707106781,i=0,s=.707106781):(i=Math.sqrt(w),n=I/i,s=U/i):C<.01?(n=.707106781,i=.707106781,s=0):(s=Math.sqrt(C),n=E/s,i=U/s),this.set(n,i,s,t),this}let B=Math.sqrt((m-p)*(m-p)+(u-h)*(u-h)+(f-c)*(f-c));return Math.abs(B)<.001&&(B=1),this.x=(m-p)/B,this.y=(u-h)/B,this.z=(f-c)/B,this.w=Math.acos((l+d+g-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this.w=e.w+(t.w-e.w)*n,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class KA extends ol{constructor(e=1,t=1,n={}){super(),this.isWebGLRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new bt(0,0,e,t),this.scissorTest=!1,this.viewport=new bt(0,0,e,t);const i={width:e,height:t,depth:1};this.texture=new En(i,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.encoding),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=n.generateMipmaps!==void 0?n.generateMipmaps:!1,this.texture.internalFormat=n.internalFormat!==void 0?n.internalFormat:null,this.texture.minFilter=n.minFilter!==void 0?n.minFilter:Wr,this.depthBuffer=n.depthBuffer!==void 0?n.depthBuffer:!0,this.stencilBuffer=n.stencilBuffer!==void 0?n.stencilBuffer:!1,this.depthTexture=n.depthTexture!==void 0?n.depthTexture:null,this.samples=n.samples!==void 0?n.samples:0}setSize(e,t,n=1){(this.width!==e||this.height!==t||this.depth!==n)&&(this.width=e,this.height=t,this.depth=n,this.texture.image.width=e,this.texture.image.height=t,this.texture.image.depth=n,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.isRenderTargetTexture=!0;const t=Object.assign({},e.texture.image);return this.texture.source=new Bx(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class uV extends En{constructor(e=null,t=1,n=1,i=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:n,depth:i},this.magFilter=Hn,this.minFilter=Hn,this.wrapR=Gr,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class s4 extends En{constructor(e=null,t=1,n=1,i=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:n,depth:i},this.magFilter=Hn,this.minFilter=Hn,this.wrapR=Gr,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class $e{constructor(e=0,t=0,n=0,i=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=n,this._w=i}static slerpFlat(e,t,n,i,s,o,a){let A=n[i+0],l=n[i+1],c=n[i+2],u=n[i+3];const f=s[o+0],d=s[o+1],p=s[o+2],h=s[o+3];if(a===0){e[t+0]=A,e[t+1]=l,e[t+2]=c,e[t+3]=u;return}if(a===1){e[t+0]=f,e[t+1]=d,e[t+2]=p,e[t+3]=h;return}if(u!==h||A!==f||l!==d||c!==p){let m=1-a;const g=A*f+l*d+c*p+u*h,B=g>=0?1:-1,v=1-g*g;if(v>Number.EPSILON){const C=Math.sqrt(v),I=Math.atan2(C,g*B);m=Math.sin(m*I)/C,a=Math.sin(a*I)/C}const w=a*B;if(A=A*m+f*w,l=l*m+d*w,c=c*m+p*w,u=u*m+h*w,m===1-a){const C=1/Math.sqrt(A*A+l*l+c*c+u*u);A*=C,l*=C,c*=C,u*=C}}e[t]=A,e[t+1]=l,e[t+2]=c,e[t+3]=u}static multiplyQuaternionsFlat(e,t,n,i,s,o){const a=n[i],A=n[i+1],l=n[i+2],c=n[i+3],u=s[o],f=s[o+1],d=s[o+2],p=s[o+3];return e[t]=a*p+c*u+A*d-l*f,e[t+1]=A*p+c*f+l*u-a*d,e[t+2]=l*p+c*d+a*f-A*u,e[t+3]=c*p-a*u-A*f-l*d,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,n,i){return this._x=e,this._y=t,this._z=n,this._w=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t){const n=e._x,i=e._y,s=e._z,o=e._order,a=Math.cos,A=Math.sin,l=a(n/2),c=a(i/2),u=a(s/2),f=A(n/2),d=A(i/2),p=A(s/2);switch(o){case"XYZ":this._x=f*c*u+l*d*p,this._y=l*d*u-f*c*p,this._z=l*c*p+f*d*u,this._w=l*c*u-f*d*p;break;case"YXZ":this._x=f*c*u+l*d*p,this._y=l*d*u-f*c*p,this._z=l*c*p-f*d*u,this._w=l*c*u+f*d*p;break;case"ZXY":this._x=f*c*u-l*d*p,this._y=l*d*u+f*c*p,this._z=l*c*p+f*d*u,this._w=l*c*u-f*d*p;break;case"ZYX":this._x=f*c*u-l*d*p,this._y=l*d*u+f*c*p,this._z=l*c*p-f*d*u,this._w=l*c*u+f*d*p;break;case"YZX":this._x=f*c*u+l*d*p,this._y=l*d*u+f*c*p,this._z=l*c*p-f*d*u,this._w=l*c*u-f*d*p;break;case"XZY":this._x=f*c*u-l*d*p,this._y=l*d*u-f*c*p,this._z=l*c*p+f*d*u,this._w=l*c*u+f*d*p;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return t!==!1&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const n=t/2,i=Math.sin(n);return this._x=e.x*i,this._y=e.y*i,this._z=e.z*i,this._w=Math.cos(n),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,n=t[0],i=t[4],s=t[8],o=t[1],a=t[5],A=t[9],l=t[2],c=t[6],u=t[10],f=n+a+u;if(f>0){const d=.5/Math.sqrt(f+1);this._w=.25/d,this._x=(c-A)*d,this._y=(s-l)*d,this._z=(o-i)*d}else if(n>a&&n>u){const d=2*Math.sqrt(1+n-a-u);this._w=(c-A)/d,this._x=.25*d,this._y=(i+o)/d,this._z=(s+l)/d}else if(a>u){const d=2*Math.sqrt(1+a-n-u);this._w=(s-l)/d,this._x=(i+o)/d,this._y=.25*d,this._z=(A+c)/d}else{const d=2*Math.sqrt(1+u-n-a);this._w=(o-i)/d,this._x=(s+l)/d,this._y=(A+c)/d,this._z=.25*d}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let n=e.dot(t)+1;return n<Number.EPSILON?(n=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=n):(this._x=0,this._y=-e.z,this._z=e.y,this._w=n)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=n),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(zn(this.dot(e),-1,1)))}rotateTowards(e,t){const n=this.angleTo(e);if(n===0)return this;const i=Math.min(1,t/n);return this.slerp(e,i),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const n=e._x,i=e._y,s=e._z,o=e._w,a=t._x,A=t._y,l=t._z,c=t._w;return this._x=n*c+o*a+i*l-s*A,this._y=i*c+o*A+s*a-n*l,this._z=s*c+o*l+n*A-i*a,this._w=o*c-n*a-i*A-s*l,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);const n=this._x,i=this._y,s=this._z,o=this._w;let a=o*e._w+n*e._x+i*e._y+s*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=o,this._x=n,this._y=i,this._z=s,this;const A=1-a*a;if(A<=Number.EPSILON){const d=1-t;return this._w=d*o+t*this._w,this._x=d*n+t*this._x,this._y=d*i+t*this._y,this._z=d*s+t*this._z,this.normalize(),this._onChangeCallback(),this}const l=Math.sqrt(A),c=Math.atan2(l,a),u=Math.sin((1-t)*c)/l,f=Math.sin(t*c)/l;return this._w=o*u+this._w*f,this._x=n*u+this._x*f,this._y=i*u+this._y*f,this._z=s*u+this._z*f,this._onChangeCallback(),this}slerpQuaternions(e,t,n){return this.copy(e).slerp(t,n)}random(){const e=Math.random(),t=Math.sqrt(1-e),n=Math.sqrt(e),i=2*Math.PI*Math.random(),s=2*Math.PI*Math.random();return this.set(t*Math.cos(i),n*Math.sin(s),n*Math.cos(s),t*Math.sin(i))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class H{constructor(e=0,t=0,n=0){H.prototype.isVector3=!0,this.x=e,this.y=t,this.z=n}set(e,t,n){return n===void 0&&(n=this.z),this.x=e,this.y=t,this.z=n,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(jE.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(jE.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,n=this.y,i=this.z,s=e.elements;return this.x=s[0]*t+s[3]*n+s[6]*i,this.y=s[1]*t+s[4]*n+s[7]*i,this.z=s[2]*t+s[5]*n+s[8]*i,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,n=this.y,i=this.z,s=e.elements,o=1/(s[3]*t+s[7]*n+s[11]*i+s[15]);return this.x=(s[0]*t+s[4]*n+s[8]*i+s[12])*o,this.y=(s[1]*t+s[5]*n+s[9]*i+s[13])*o,this.z=(s[2]*t+s[6]*n+s[10]*i+s[14])*o,this}applyQuaternion(e){const t=this.x,n=this.y,i=this.z,s=e.x,o=e.y,a=e.z,A=e.w,l=A*t+o*i-a*n,c=A*n+a*t-s*i,u=A*i+s*n-o*t,f=-s*t-o*n-a*i;return this.x=l*A+f*-s+c*-a-u*-o,this.y=c*A+f*-o+u*-s-l*-a,this.z=u*A+f*-a+l*-o-c*-s,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,n=this.y,i=this.z,s=e.elements;return this.x=s[0]*t+s[4]*n+s[8]*i,this.y=s[1]*t+s[5]*n+s[9]*i,this.z=s[2]*t+s[6]*n+s[10]*i,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const n=e.x,i=e.y,s=e.z,o=t.x,a=t.y,A=t.z;return this.x=i*A-s*a,this.y=s*o-n*A,this.z=n*a-i*o,this}projectOnVector(e){const t=e.lengthSq();if(t===0)return this.set(0,0,0);const n=e.dot(this)/t;return this.copy(e).multiplyScalar(n)}projectOnPlane(e){return Wy.copy(this).projectOnVector(e),this.sub(Wy)}reflect(e){return this.sub(Wy.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const n=this.dot(e)/t;return Math.acos(zn(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y,i=this.z-e.z;return t*t+n*n+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,n){const i=Math.sin(t)*e;return this.x=i*Math.sin(n),this.y=Math.cos(t)*e,this.z=i*Math.cos(n),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,n){return this.x=e*Math.sin(t),this.y=n,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),n=this.setFromMatrixColumn(e,1).length(),i=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=n,this.z=i,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=(Math.random()-.5)*2,t=Math.random()*Math.PI*2,n=Math.sqrt(1-e**2);return this.x=n*Math.cos(t),this.y=n*Math.sin(t),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const Wy=new H,jE=new $e;class ys{constructor(e=new H(1/0,1/0,1/0),t=new H(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){let t=1/0,n=1/0,i=1/0,s=-1/0,o=-1/0,a=-1/0;for(let A=0,l=e.length;A<l;A+=3){const c=e[A],u=e[A+1],f=e[A+2];c<t&&(t=c),u<n&&(n=u),f<i&&(i=f),c>s&&(s=c),u>o&&(o=u),f>a&&(a=f)}return this.min.set(t,n,i),this.max.set(s,o,a),this}setFromBufferAttribute(e){let t=1/0,n=1/0,i=1/0,s=-1/0,o=-1/0,a=-1/0;for(let A=0,l=e.count;A<l;A++){const c=e.getX(A),u=e.getY(A),f=e.getZ(A);c<t&&(t=c),u<n&&(n=u),f<i&&(i=f),c>s&&(s=c),u>o&&(o=u),f>a&&(a=f)}return this.min.set(t,n,i),this.max.set(s,o,a),this}setFromPoints(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const n=fl.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const n=e.geometry;if(n!==void 0)if(t&&n.attributes!=null&&n.attributes.position!==void 0){const s=n.attributes.position;for(let o=0,a=s.count;o<a;o++)fl.fromBufferAttribute(s,o).applyMatrix4(e.matrixWorld),this.expandByPoint(fl)}else n.boundingBox===null&&n.computeBoundingBox(),Zy.copy(n.boundingBox),Zy.applyMatrix4(e.matrixWorld),this.union(Zy);const i=e.children;for(let s=0,o=i.length;s<o;s++)this.expandByObject(i[s],t);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,fl),fl.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,n;return e.normal.x>0?(t=e.normal.x*this.min.x,n=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,n=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,n+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,n+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,n+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,n+=e.normal.z*this.min.z),t<=-e.constant&&n>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(ad),fg.subVectors(this.max,ad),Ic.subVectors(e.a,ad),Uc.subVectors(e.b,ad),xc.subVectors(e.c,ad),Xa.subVectors(Uc,Ic),Ya.subVectors(xc,Uc),dl.subVectors(Ic,xc);let t=[0,-Xa.z,Xa.y,0,-Ya.z,Ya.y,0,-dl.z,dl.y,Xa.z,0,-Xa.x,Ya.z,0,-Ya.x,dl.z,0,-dl.x,-Xa.y,Xa.x,0,-Ya.y,Ya.x,0,-dl.y,dl.x,0];return!Py(t,Ic,Uc,xc,fg)||(t=[1,0,0,0,1,0,0,0,1],!Py(t,Ic,Uc,xc,fg))?!1:(dg.crossVectors(Xa,Ya),t=[dg.x,dg.y,dg.z],Py(t,Ic,Uc,xc,fg))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return fl.copy(e).clamp(this.min,this.max).sub(e).length()}getBoundingSphere(e){return this.getCenter(e.center),e.radius=this.getSize(fl).length()*.5,e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(Ko[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Ko[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Ko[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Ko[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Ko[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Ko[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Ko[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Ko[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Ko),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const Ko=[new H,new H,new H,new H,new H,new H,new H,new H],fl=new H,Zy=new ys,Ic=new H,Uc=new H,xc=new H,Xa=new H,Ya=new H,dl=new H,ad=new H,fg=new H,dg=new H,hl=new H;function Py(r,e,t,n,i){for(let s=0,o=r.length-3;s<=o;s+=3){hl.fromArray(r,s);const a=i.x*Math.abs(hl.x)+i.y*Math.abs(hl.y)+i.z*Math.abs(hl.z),A=e.dot(hl),l=t.dot(hl),c=n.dot(hl);if(Math.max(-Math.max(A,l,c),Math.min(A,l,c))>a)return!1}return!0}const o4=new ys,Ad=new H,Jy=new H;class fc{constructor(e=new H,t=-1){this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const n=this.center;t!==void 0?n.copy(t):o4.setFromPoints(e).getCenter(n);let i=0;for(let s=0,o=e.length;s<o;s++)i=Math.max(i,n.distanceToSquared(e[s]));return this.radius=Math.sqrt(i),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const n=this.center.distanceToSquared(e);return t.copy(e),n>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;Ad.subVectors(e,this.center);const t=Ad.lengthSq();if(t>this.radius*this.radius){const n=Math.sqrt(t),i=(n-this.radius)*.5;this.center.addScaledVector(Ad,i/n),this.radius+=i}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(Jy.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(Ad.copy(e.center).add(Jy)),this.expandByPoint(Ad.copy(e.center).sub(Jy))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}}const jo=new H,Gy=new H,hg=new H,Ka=new H,Oy=new H,pg=new H,Hy=new H;class Ep{constructor(e=new H,t=new H(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.direction).multiplyScalar(e).add(this.origin)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,jo)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const n=t.dot(this.direction);return n<0?t.copy(this.origin):t.copy(this.direction).multiplyScalar(n).add(this.origin)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=jo.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(jo.copy(this.direction).multiplyScalar(t).add(this.origin),jo.distanceToSquared(e))}distanceSqToSegment(e,t,n,i){Gy.copy(e).add(t).multiplyScalar(.5),hg.copy(t).sub(e).normalize(),Ka.copy(this.origin).sub(Gy);const s=e.distanceTo(t)*.5,o=-this.direction.dot(hg),a=Ka.dot(this.direction),A=-Ka.dot(hg),l=Ka.lengthSq(),c=Math.abs(1-o*o);let u,f,d,p;if(c>0)if(u=o*A-a,f=o*a-A,p=s*c,u>=0)if(f>=-p)if(f<=p){const h=1/c;u*=h,f*=h,d=u*(u+o*f+2*a)+f*(o*u+f+2*A)+l}else f=s,u=Math.max(0,-(o*f+a)),d=-u*u+f*(f+2*A)+l;else f=-s,u=Math.max(0,-(o*f+a)),d=-u*u+f*(f+2*A)+l;else f<=-p?(u=Math.max(0,-(-o*s+a)),f=u>0?-s:Math.min(Math.max(-s,-A),s),d=-u*u+f*(f+2*A)+l):f<=p?(u=0,f=Math.min(Math.max(-s,-A),s),d=f*(f+2*A)+l):(u=Math.max(0,-(o*s+a)),f=u>0?s:Math.min(Math.max(-s,-A),s),d=-u*u+f*(f+2*A)+l);else f=o>0?-s:s,u=Math.max(0,-(o*f+a)),d=-u*u+f*(f+2*A)+l;return n&&n.copy(this.direction).multiplyScalar(u).add(this.origin),i&&i.copy(hg).multiplyScalar(f).add(Gy),d}intersectSphere(e,t){jo.subVectors(e.center,this.origin);const n=jo.dot(this.direction),i=jo.dot(jo)-n*n,s=e.radius*e.radius;if(i>s)return null;const o=Math.sqrt(s-i),a=n-o,A=n+o;return a<0&&A<0?null:a<0?this.at(A,t):this.at(a,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;const n=-(this.origin.dot(e.normal)+e.constant)/t;return n>=0?n:null}intersectPlane(e,t){const n=this.distanceToPlane(e);return n===null?null:this.at(n,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let n,i,s,o,a,A;const l=1/this.direction.x,c=1/this.direction.y,u=1/this.direction.z,f=this.origin;return l>=0?(n=(e.min.x-f.x)*l,i=(e.max.x-f.x)*l):(n=(e.max.x-f.x)*l,i=(e.min.x-f.x)*l),c>=0?(s=(e.min.y-f.y)*c,o=(e.max.y-f.y)*c):(s=(e.max.y-f.y)*c,o=(e.min.y-f.y)*c),n>o||s>i||((s>n||isNaN(n))&&(n=s),(o<i||isNaN(i))&&(i=o),u>=0?(a=(e.min.z-f.z)*u,A=(e.max.z-f.z)*u):(a=(e.max.z-f.z)*u,A=(e.min.z-f.z)*u),n>A||a>i)||((a>n||n!==n)&&(n=a),(A<i||i!==i)&&(i=A),i<0)?null:this.at(n>=0?n:i,t)}intersectsBox(e){return this.intersectBox(e,jo)!==null}intersectTriangle(e,t,n,i,s){Oy.subVectors(t,e),pg.subVectors(n,e),Hy.crossVectors(Oy,pg);let o=this.direction.dot(Hy),a;if(o>0){if(i)return null;a=1}else if(o<0)a=-1,o=-o;else return null;Ka.subVectors(this.origin,e);const A=a*this.direction.dot(pg.crossVectors(Ka,pg));if(A<0)return null;const l=a*this.direction.dot(Oy.cross(Ka));if(l<0||A+l>o)return null;const c=-a*Ka.dot(Hy);return c<0?null:this.at(c/o,s)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class Le{constructor(){Le.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}set(e,t,n,i,s,o,a,A,l,c,u,f,d,p,h,m){const g=this.elements;return g[0]=e,g[4]=t,g[8]=n,g[12]=i,g[1]=s,g[5]=o,g[9]=a,g[13]=A,g[2]=l,g[6]=c,g[10]=u,g[14]=f,g[3]=d,g[7]=p,g[11]=h,g[15]=m,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new Le().fromArray(this.elements)}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],this}copyPosition(e){const t=this.elements,n=e.elements;return t[12]=n[12],t[13]=n[13],t[14]=n[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,n){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}makeBasis(e,t,n){return this.set(e.x,t.x,n.x,0,e.y,t.y,n.y,0,e.z,t.z,n.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,n=e.elements,i=1/Qc.setFromMatrixColumn(e,0).length(),s=1/Qc.setFromMatrixColumn(e,1).length(),o=1/Qc.setFromMatrixColumn(e,2).length();return t[0]=n[0]*i,t[1]=n[1]*i,t[2]=n[2]*i,t[3]=0,t[4]=n[4]*s,t[5]=n[5]*s,t[6]=n[6]*s,t[7]=0,t[8]=n[8]*o,t[9]=n[9]*o,t[10]=n[10]*o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,n=e.x,i=e.y,s=e.z,o=Math.cos(n),a=Math.sin(n),A=Math.cos(i),l=Math.sin(i),c=Math.cos(s),u=Math.sin(s);if(e.order==="XYZ"){const f=o*c,d=o*u,p=a*c,h=a*u;t[0]=A*c,t[4]=-A*u,t[8]=l,t[1]=d+p*l,t[5]=f-h*l,t[9]=-a*A,t[2]=h-f*l,t[6]=p+d*l,t[10]=o*A}else if(e.order==="YXZ"){const f=A*c,d=A*u,p=l*c,h=l*u;t[0]=f+h*a,t[4]=p*a-d,t[8]=o*l,t[1]=o*u,t[5]=o*c,t[9]=-a,t[2]=d*a-p,t[6]=h+f*a,t[10]=o*A}else if(e.order==="ZXY"){const f=A*c,d=A*u,p=l*c,h=l*u;t[0]=f-h*a,t[4]=-o*u,t[8]=p+d*a,t[1]=d+p*a,t[5]=o*c,t[9]=h-f*a,t[2]=-o*l,t[6]=a,t[10]=o*A}else if(e.order==="ZYX"){const f=o*c,d=o*u,p=a*c,h=a*u;t[0]=A*c,t[4]=p*l-d,t[8]=f*l+h,t[1]=A*u,t[5]=h*l+f,t[9]=d*l-p,t[2]=-l,t[6]=a*A,t[10]=o*A}else if(e.order==="YZX"){const f=o*A,d=o*l,p=a*A,h=a*l;t[0]=A*c,t[4]=h-f*u,t[8]=p*u+d,t[1]=u,t[5]=o*c,t[9]=-a*c,t[2]=-l*c,t[6]=d*u+p,t[10]=f-h*u}else if(e.order==="XZY"){const f=o*A,d=o*l,p=a*A,h=a*l;t[0]=A*c,t[4]=-u,t[8]=l*c,t[1]=f*u+h,t[5]=o*c,t[9]=d*u-p,t[2]=p*u-d,t[6]=a*c,t[10]=h*u+f}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(a4,e,A4)}lookAt(e,t,n){const i=this.elements;return di.subVectors(e,t),di.lengthSq()===0&&(di.z=1),di.normalize(),ja.crossVectors(n,di),ja.lengthSq()===0&&(Math.abs(n.z)===1?di.x+=1e-4:di.z+=1e-4,di.normalize(),ja.crossVectors(n,di)),ja.normalize(),gg.crossVectors(di,ja),i[0]=ja.x,i[4]=gg.x,i[8]=di.x,i[1]=ja.y,i[5]=gg.y,i[9]=di.y,i[2]=ja.z,i[6]=gg.z,i[10]=di.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,i=t.elements,s=this.elements,o=n[0],a=n[4],A=n[8],l=n[12],c=n[1],u=n[5],f=n[9],d=n[13],p=n[2],h=n[6],m=n[10],g=n[14],B=n[3],v=n[7],w=n[11],C=n[15],I=i[0],E=i[4],U=i[8],S=i[12],V=i[1],J=i[5],z=i[9],R=i[13],y=i[2],Q=i[6],_=i[10],L=i[14],T=i[3],Z=i[7],G=i[11],D=i[15];return s[0]=o*I+a*V+A*y+l*T,s[4]=o*E+a*J+A*Q+l*Z,s[8]=o*U+a*z+A*_+l*G,s[12]=o*S+a*R+A*L+l*D,s[1]=c*I+u*V+f*y+d*T,s[5]=c*E+u*J+f*Q+d*Z,s[9]=c*U+u*z+f*_+d*G,s[13]=c*S+u*R+f*L+d*D,s[2]=p*I+h*V+m*y+g*T,s[6]=p*E+h*J+m*Q+g*Z,s[10]=p*U+h*z+m*_+g*G,s[14]=p*S+h*R+m*L+g*D,s[3]=B*I+v*V+w*y+C*T,s[7]=B*E+v*J+w*Q+C*Z,s[11]=B*U+v*z+w*_+C*G,s[15]=B*S+v*R+w*L+C*D,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[4],i=e[8],s=e[12],o=e[1],a=e[5],A=e[9],l=e[13],c=e[2],u=e[6],f=e[10],d=e[14],p=e[3],h=e[7],m=e[11],g=e[15];return p*(+s*A*u-i*l*u-s*a*f+n*l*f+i*a*d-n*A*d)+h*(+t*A*d-t*l*f+s*o*f-i*o*d+i*l*c-s*A*c)+m*(+t*l*u-t*a*d-s*o*u+n*o*d+s*a*c-n*l*c)+g*(-i*a*c-t*A*u+t*a*f+i*o*u-n*o*f+n*A*c)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,n){const i=this.elements;return e.isVector3?(i[12]=e.x,i[13]=e.y,i[14]=e.z):(i[12]=e,i[13]=t,i[14]=n),this}invert(){const e=this.elements,t=e[0],n=e[1],i=e[2],s=e[3],o=e[4],a=e[5],A=e[6],l=e[7],c=e[8],u=e[9],f=e[10],d=e[11],p=e[12],h=e[13],m=e[14],g=e[15],B=u*m*l-h*f*l+h*A*d-a*m*d-u*A*g+a*f*g,v=p*f*l-c*m*l-p*A*d+o*m*d+c*A*g-o*f*g,w=c*h*l-p*u*l+p*a*d-o*h*d-c*a*g+o*u*g,C=p*u*A-c*h*A-p*a*f+o*h*f+c*a*m-o*u*m,I=t*B+n*v+i*w+s*C;if(I===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const E=1/I;return e[0]=B*E,e[1]=(h*f*s-u*m*s-h*i*d+n*m*d+u*i*g-n*f*g)*E,e[2]=(a*m*s-h*A*s+h*i*l-n*m*l-a*i*g+n*A*g)*E,e[3]=(u*A*s-a*f*s-u*i*l+n*f*l+a*i*d-n*A*d)*E,e[4]=v*E,e[5]=(c*m*s-p*f*s+p*i*d-t*m*d-c*i*g+t*f*g)*E,e[6]=(p*A*s-o*m*s-p*i*l+t*m*l+o*i*g-t*A*g)*E,e[7]=(o*f*s-c*A*s+c*i*l-t*f*l-o*i*d+t*A*d)*E,e[8]=w*E,e[9]=(p*u*s-c*h*s-p*n*d+t*h*d+c*n*g-t*u*g)*E,e[10]=(o*h*s-p*a*s+p*n*l-t*h*l-o*n*g+t*a*g)*E,e[11]=(c*a*s-o*u*s-c*n*l+t*u*l+o*n*d-t*a*d)*E,e[12]=C*E,e[13]=(c*h*i-p*u*i+p*n*f-t*h*f-c*n*m+t*u*m)*E,e[14]=(p*a*i-o*h*i-p*n*A+t*h*A+o*n*m-t*a*m)*E,e[15]=(o*u*i-c*a*i+c*n*A-t*u*A-o*n*f+t*a*f)*E,this}scale(e){const t=this.elements,n=e.x,i=e.y,s=e.z;return t[0]*=n,t[4]*=i,t[8]*=s,t[1]*=n,t[5]*=i,t[9]*=s,t[2]*=n,t[6]*=i,t[10]*=s,t[3]*=n,t[7]*=i,t[11]*=s,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],n=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],i=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,n,i))}makeTranslation(e,t,n){return this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),n=Math.sin(e);return this.set(1,0,0,0,0,t,-n,0,0,n,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,0,n,0,0,1,0,0,-n,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,0,n,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const n=Math.cos(t),i=Math.sin(t),s=1-n,o=e.x,a=e.y,A=e.z,l=s*o,c=s*a;return this.set(l*o+n,l*a-i*A,l*A+i*a,0,l*a+i*A,c*a+n,c*A-i*o,0,l*A-i*a,c*A+i*o,s*A*A+n,0,0,0,0,1),this}makeScale(e,t,n){return this.set(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1),this}makeShear(e,t,n,i,s,o){return this.set(1,n,s,0,e,1,o,0,t,i,1,0,0,0,0,1),this}compose(e,t,n){const i=this.elements,s=t._x,o=t._y,a=t._z,A=t._w,l=s+s,c=o+o,u=a+a,f=s*l,d=s*c,p=s*u,h=o*c,m=o*u,g=a*u,B=A*l,v=A*c,w=A*u,C=n.x,I=n.y,E=n.z;return i[0]=(1-(h+g))*C,i[1]=(d+w)*C,i[2]=(p-v)*C,i[3]=0,i[4]=(d-w)*I,i[5]=(1-(f+g))*I,i[6]=(m+B)*I,i[7]=0,i[8]=(p+v)*E,i[9]=(m-B)*E,i[10]=(1-(f+h))*E,i[11]=0,i[12]=e.x,i[13]=e.y,i[14]=e.z,i[15]=1,this}decompose(e,t,n){const i=this.elements;let s=Qc.set(i[0],i[1],i[2]).length();const o=Qc.set(i[4],i[5],i[6]).length(),a=Qc.set(i[8],i[9],i[10]).length();this.determinant()<0&&(s=-s),e.x=i[12],e.y=i[13],e.z=i[14],_s.copy(this);const l=1/s,c=1/o,u=1/a;return _s.elements[0]*=l,_s.elements[1]*=l,_s.elements[2]*=l,_s.elements[4]*=c,_s.elements[5]*=c,_s.elements[6]*=c,_s.elements[8]*=u,_s.elements[9]*=u,_s.elements[10]*=u,t.setFromRotationMatrix(_s),n.x=s,n.y=o,n.z=a,this}makePerspective(e,t,n,i,s,o){const a=this.elements,A=2*s/(t-e),l=2*s/(n-i),c=(t+e)/(t-e),u=(n+i)/(n-i),f=-(o+s)/(o-s),d=-2*o*s/(o-s);return a[0]=A,a[4]=0,a[8]=c,a[12]=0,a[1]=0,a[5]=l,a[9]=u,a[13]=0,a[2]=0,a[6]=0,a[10]=f,a[14]=d,a[3]=0,a[7]=0,a[11]=-1,a[15]=0,this}makeOrthographic(e,t,n,i,s,o){const a=this.elements,A=1/(t-e),l=1/(n-i),c=1/(o-s),u=(t+e)*A,f=(n+i)*l,d=(o+s)*c;return a[0]=2*A,a[4]=0,a[8]=0,a[12]=-u,a[1]=0,a[5]=2*l,a[9]=0,a[13]=-f,a[2]=0,a[6]=0,a[10]=-2*c,a[14]=-d,a[3]=0,a[7]=0,a[11]=0,a[15]=1,this}equals(e){const t=this.elements,n=e.elements;for(let i=0;i<16;i++)if(t[i]!==n[i])return!1;return!0}fromArray(e,t=0){for(let n=0;n<16;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e[t+9]=n[9],e[t+10]=n[10],e[t+11]=n[11],e[t+12]=n[12],e[t+13]=n[13],e[t+14]=n[14],e[t+15]=n[15],e}}const Qc=new H,_s=new Le,a4=new H(0,0,0),A4=new H(1,1,1),ja=new H,gg=new H,di=new H,qE=new Le,$E=new $e;class xr{constructor(e=0,t=0,n=0,i=xr.DefaultOrder){this.isEuler=!0,this._x=e,this._y=t,this._z=n,this._order=i}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,n,i=this._order){return this._x=e,this._y=t,this._z=n,this._order=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,n=!0){const i=e.elements,s=i[0],o=i[4],a=i[8],A=i[1],l=i[5],c=i[9],u=i[2],f=i[6],d=i[10];switch(t){case"XYZ":this._y=Math.asin(zn(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-c,d),this._z=Math.atan2(-o,s)):(this._x=Math.atan2(f,l),this._z=0);break;case"YXZ":this._x=Math.asin(-zn(c,-1,1)),Math.abs(c)<.9999999?(this._y=Math.atan2(a,d),this._z=Math.atan2(A,l)):(this._y=Math.atan2(-u,s),this._z=0);break;case"ZXY":this._x=Math.asin(zn(f,-1,1)),Math.abs(f)<.9999999?(this._y=Math.atan2(-u,d),this._z=Math.atan2(-o,l)):(this._y=0,this._z=Math.atan2(A,s));break;case"ZYX":this._y=Math.asin(-zn(u,-1,1)),Math.abs(u)<.9999999?(this._x=Math.atan2(f,d),this._z=Math.atan2(A,s)):(this._x=0,this._z=Math.atan2(-o,l));break;case"YZX":this._z=Math.asin(zn(A,-1,1)),Math.abs(A)<.9999999?(this._x=Math.atan2(-c,l),this._y=Math.atan2(-u,s)):(this._x=0,this._y=Math.atan2(a,d));break;case"XZY":this._z=Math.asin(-zn(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(f,l),this._y=Math.atan2(a,s)):(this._x=Math.atan2(-c,d),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,n===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,n){return qE.makeRotationFromQuaternion(e),this.setFromRotationMatrix(qE,t,n)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return $E.setFromEuler(this),this.setFromQuaternion($E,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}toVector3(){console.error("THREE.Euler: .toVector3() has been removed. Use Vector3.setFromEuler() instead")}}xr.DefaultOrder="XYZ";xr.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"];class vx{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let l4=0;const e1=new H,bc=new $e,qo=new Le,mg=new H,ld=new H,c4=new H,u4=new $e,t1=new H(1,0,0),n1=new H(0,1,0),r1=new H(0,0,1),f4={type:"added"},i1={type:"removed"};class St extends ol{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:l4++}),this.uuid=Ys(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=St.DefaultUp.clone();const e=new H,t=new xr,n=new $e,i=new H(1,1,1);function s(){n.setFromEuler(t,!1)}function o(){t.setFromQuaternion(n,void 0,!1)}t._onChange(s),n._onChange(o),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:n},scale:{configurable:!0,enumerable:!0,value:i},modelViewMatrix:{value:new Le},normalMatrix:{value:new an}}),this.matrix=new Le,this.matrixWorld=new Le,this.matrixAutoUpdate=St.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.matrixWorldAutoUpdate=St.DefaultMatrixWorldAutoUpdate,this.layers=new vx,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return bc.setFromAxisAngle(e,t),this.quaternion.multiply(bc),this}rotateOnWorldAxis(e,t){return bc.setFromAxisAngle(e,t),this.quaternion.premultiply(bc),this}rotateX(e){return this.rotateOnAxis(t1,e)}rotateY(e){return this.rotateOnAxis(n1,e)}rotateZ(e){return this.rotateOnAxis(r1,e)}translateOnAxis(e,t){return e1.copy(e).applyQuaternion(this.quaternion),this.position.add(e1.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(t1,e)}translateY(e){return this.translateOnAxis(n1,e)}translateZ(e){return this.translateOnAxis(r1,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(qo.copy(this.matrixWorld).invert())}lookAt(e,t,n){e.isVector3?mg.copy(e):mg.set(e,t,n);const i=this.parent;this.updateWorldMatrix(!0,!1),ld.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?qo.lookAt(ld,mg,this.up):qo.lookAt(mg,ld,this.up),this.quaternion.setFromRotationMatrix(qo),i&&(qo.extractRotation(i.matrixWorld),bc.setFromRotationMatrix(qo),this.quaternion.premultiply(bc.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.parent!==null&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(f4)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let n=0;n<arguments.length;n++)this.remove(arguments[n]);return this}const t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(i1)),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){for(let e=0;e<this.children.length;e++){const t=this.children[e];t.parent=null,t.dispatchEvent(i1)}return this.children.length=0,this}attach(e){return this.updateWorldMatrix(!0,!1),qo.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),qo.multiply(e.parent.matrixWorld)),e.applyMatrix4(qo),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let n=0,i=this.children.length;n<i;n++){const o=this.children[n].getObjectByProperty(e,t);if(o!==void 0)return o}}getObjectsByProperty(e,t){let n=[];this[e]===t&&n.push(this);for(let i=0,s=this.children.length;i<s;i++){const o=this.children[i].getObjectsByProperty(e,t);o.length>0&&(n=n.concat(o))}return n}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(ld,e,c4),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(ld,u4,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let n=0,i=t.length;n<i;n++)t[n].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const t=this.children;for(let n=0,i=t.length;n<i;n++)t[n].traverseVisible(e)}traverseAncestors(e){const t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let n=0,i=t.length;n<i;n++){const s=t[n];(s.matrixWorldAutoUpdate===!0||e===!0)&&s.updateMatrixWorld(e)}}updateWorldMatrix(e,t){const n=this.parent;if(e===!0&&n!==null&&n.matrixWorldAutoUpdate===!0&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),t===!0){const i=this.children;for(let s=0,o=i.length;s<o;s++){const a=i[s];a.matrixWorldAutoUpdate===!0&&a.updateWorldMatrix(!1,!0)}}}toJSON(e){const t=e===void 0||typeof e=="string",n={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},n.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});const i={};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.castShadow===!0&&(i.castShadow=!0),this.receiveShadow===!0&&(i.receiveShadow=!0),this.visible===!1&&(i.visible=!1),this.frustumCulled===!1&&(i.frustumCulled=!1),this.renderOrder!==0&&(i.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(i.userData=this.userData),i.layers=this.layers.mask,i.matrix=this.matrix.toArray(),this.matrixAutoUpdate===!1&&(i.matrixAutoUpdate=!1),this.isInstancedMesh&&(i.type="InstancedMesh",i.count=this.count,i.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(i.instanceColor=this.instanceColor.toJSON()));function s(a,A){return a[A.uuid]===void 0&&(a[A.uuid]=A.toJSON(e)),A.uuid}if(this.isScene)this.background&&(this.background.isColor?i.background=this.background.toJSON():this.background.isTexture&&(i.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(i.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){i.geometry=s(e.geometries,this.geometry);const a=this.geometry.parameters;if(a!==void 0&&a.shapes!==void 0){const A=a.shapes;if(Array.isArray(A))for(let l=0,c=A.length;l<c;l++){const u=A[l];s(e.shapes,u)}else s(e.shapes,A)}}if(this.isSkinnedMesh&&(i.bindMode=this.bindMode,i.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(s(e.skeletons,this.skeleton),i.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const a=[];for(let A=0,l=this.material.length;A<l;A++)a.push(s(e.materials,this.material[A]));i.material=a}else i.material=s(e.materials,this.material);if(this.children.length>0){i.children=[];for(let a=0;a<this.children.length;a++)i.children.push(this.children[a].toJSON(e).object)}if(this.animations.length>0){i.animations=[];for(let a=0;a<this.animations.length;a++){const A=this.animations[a];i.animations.push(s(e.animations,A))}}if(t){const a=o(e.geometries),A=o(e.materials),l=o(e.textures),c=o(e.images),u=o(e.shapes),f=o(e.skeletons),d=o(e.animations),p=o(e.nodes);a.length>0&&(n.geometries=a),A.length>0&&(n.materials=A),l.length>0&&(n.textures=l),c.length>0&&(n.images=c),u.length>0&&(n.shapes=u),f.length>0&&(n.skeletons=f),d.length>0&&(n.animations=d),p.length>0&&(n.nodes=p)}return n.object=i,n;function o(a){const A=[];for(const l in a){const c=a[l];delete c.metadata,A.push(c)}return A}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let n=0;n<e.children.length;n++){const i=e.children[n];this.add(i.clone())}return this}}St.DefaultUp=new H(0,1,0);St.DefaultMatrixAutoUpdate=!0;St.DefaultMatrixWorldAutoUpdate=!0;const Rs=new H,$o=new H,zy=new H,ea=new H,Ec=new H,Sc=new H,s1=new H,Xy=new H,Yy=new H,Ky=new H;class Ui{constructor(e=new H,t=new H,n=new H){this.a=e,this.b=t,this.c=n}static getNormal(e,t,n,i){i.subVectors(n,t),Rs.subVectors(e,t),i.cross(Rs);const s=i.lengthSq();return s>0?i.multiplyScalar(1/Math.sqrt(s)):i.set(0,0,0)}static getBarycoord(e,t,n,i,s){Rs.subVectors(i,t),$o.subVectors(n,t),zy.subVectors(e,t);const o=Rs.dot(Rs),a=Rs.dot($o),A=Rs.dot(zy),l=$o.dot($o),c=$o.dot(zy),u=o*l-a*a;if(u===0)return s.set(-2,-1,-1);const f=1/u,d=(l*A-a*c)*f,p=(o*c-a*A)*f;return s.set(1-d-p,p,d)}static containsPoint(e,t,n,i){return this.getBarycoord(e,t,n,i,ea),ea.x>=0&&ea.y>=0&&ea.x+ea.y<=1}static getUV(e,t,n,i,s,o,a,A){return this.getBarycoord(e,t,n,i,ea),A.set(0,0),A.addScaledVector(s,ea.x),A.addScaledVector(o,ea.y),A.addScaledVector(a,ea.z),A}static isFrontFacing(e,t,n,i){return Rs.subVectors(n,t),$o.subVectors(e,t),Rs.cross($o).dot(i)<0}set(e,t,n){return this.a.copy(e),this.b.copy(t),this.c.copy(n),this}setFromPointsAndIndices(e,t,n,i){return this.a.copy(e[t]),this.b.copy(e[n]),this.c.copy(e[i]),this}setFromAttributeAndIndices(e,t,n,i){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,n),this.c.fromBufferAttribute(e,i),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return Rs.subVectors(this.c,this.b),$o.subVectors(this.a,this.b),Rs.cross($o).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return Ui.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return Ui.getBarycoord(e,this.a,this.b,this.c,t)}getUV(e,t,n,i,s){return Ui.getUV(e,this.a,this.b,this.c,t,n,i,s)}containsPoint(e){return Ui.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return Ui.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const n=this.a,i=this.b,s=this.c;let o,a;Ec.subVectors(i,n),Sc.subVectors(s,n),Xy.subVectors(e,n);const A=Ec.dot(Xy),l=Sc.dot(Xy);if(A<=0&&l<=0)return t.copy(n);Yy.subVectors(e,i);const c=Ec.dot(Yy),u=Sc.dot(Yy);if(c>=0&&u<=c)return t.copy(i);const f=A*u-c*l;if(f<=0&&A>=0&&c<=0)return o=A/(A-c),t.copy(n).addScaledVector(Ec,o);Ky.subVectors(e,s);const d=Ec.dot(Ky),p=Sc.dot(Ky);if(p>=0&&d<=p)return t.copy(s);const h=d*l-A*p;if(h<=0&&l>=0&&p<=0)return a=l/(l-p),t.copy(n).addScaledVector(Sc,a);const m=c*p-d*u;if(m<=0&&u-c>=0&&d-p>=0)return s1.subVectors(s,i),a=(u-c)/(u-c+(d-p)),t.copy(i).addScaledVector(s1,a);const g=1/(m+h+f);return o=h*g,a=f*g,t.copy(n).addScaledVector(Ec,o).addScaledVector(Sc,a)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}let d4=0;class cs extends ol{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:d4++}),this.uuid=Ys(),this.name="",this.type="Material",this.blending=Pu,this.side=Do,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=nV,this.blendDst=rV,this.blendEquation=su,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=OF,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=JH,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=Ny,this.stencilZFail=Ny,this.stencilZPass=Ny,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const t in e){const n=e[t];if(n===void 0){console.warn("THREE.Material: '"+t+"' parameter is undefined.");continue}const i=this[t];if(i===void 0){console.warn("THREE."+this.type+": '"+t+"' is not a property of this material.");continue}i&&i.isColor?i.set(n):i&&i.isVector3&&n&&n.isVector3?i.copy(n):this[t]=n}}toJSON(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});const n={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};n.uuid=this.uuid,n.type=this.type,this.name!==""&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),this.roughness!==void 0&&(n.roughness=this.roughness),this.metalness!==void 0&&(n.metalness=this.metalness),this.sheen!==void 0&&(n.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(n.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(n.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.emissiveIntensity&&this.emissiveIntensity!==1&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(n.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(n.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(n.shininess=this.shininess),this.clearcoat!==void 0&&(n.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.iridescence!==void 0&&(n.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(n.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(n.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(n.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(n.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(e).uuid,n.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(e).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(e).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(e).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(e).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(n.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(n.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(n.combine=this.combine)),this.envMapIntensity!==void 0&&(n.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(n.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(n.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(n.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(n.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(n.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(n.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(n.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(n.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(n.size=this.size),this.shadowSide!==null&&(n.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(n.sizeAttenuation=this.sizeAttenuation),this.blending!==Pu&&(n.blending=this.blending),this.side!==Do&&(n.side=this.side),this.vertexColors&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),this.transparent===!0&&(n.transparent=this.transparent),n.depthFunc=this.depthFunc,n.depthTest=this.depthTest,n.depthWrite=this.depthWrite,n.colorWrite=this.colorWrite,n.stencilWrite=this.stencilWrite,n.stencilWriteMask=this.stencilWriteMask,n.stencilFunc=this.stencilFunc,n.stencilRef=this.stencilRef,n.stencilFuncMask=this.stencilFuncMask,n.stencilFail=this.stencilFail,n.stencilZFail=this.stencilZFail,n.stencilZPass=this.stencilZPass,this.rotation!==void 0&&this.rotation!==0&&(n.rotation=this.rotation),this.polygonOffset===!0&&(n.polygonOffset=!0),this.polygonOffsetFactor!==0&&(n.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(n.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(n.linewidth=this.linewidth),this.dashSize!==void 0&&(n.dashSize=this.dashSize),this.gapSize!==void 0&&(n.gapSize=this.gapSize),this.scale!==void 0&&(n.scale=this.scale),this.dithering===!0&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),this.alphaToCoverage===!0&&(n.alphaToCoverage=this.alphaToCoverage),this.premultipliedAlpha===!0&&(n.premultipliedAlpha=this.premultipliedAlpha),this.wireframe===!0&&(n.wireframe=this.wireframe),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(n.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(n.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(n.flatShading=this.flatShading),this.visible===!1&&(n.visible=!1),this.toneMapped===!1&&(n.toneMapped=!1),this.fog===!1&&(n.fog=!1),Object.keys(this.userData).length>0&&(n.userData=this.userData);function i(s){const o=[];for(const a in s){const A=s[a];delete A.metadata,o.push(A)}return o}if(t){const s=i(e.textures),o=i(e.images);s.length>0&&(n.textures=s),o.length>0&&(n.images=o)}return n}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let n=null;if(t!==null){const i=t.length;n=new Array(i);for(let s=0;s!==i;++s)n[s]=t[s].clone()}return this.clippingPlanes=n,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}}class Io extends cs{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new Ve(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=ov,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const Sn=new H,Bg=new Je;class pt{constructor(e,t,n=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=n,this.usage=zF,this.updateRange={offset:0,count:-1},this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this}copyAt(e,t,n){e*=this.itemSize,n*=t.itemSize;for(let i=0,s=this.itemSize;i<s;i++)this.array[e+i]=t.array[n+i];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,n=this.count;t<n;t++)Bg.fromBufferAttribute(this,t),Bg.applyMatrix3(e),this.setXY(t,Bg.x,Bg.y);else if(this.itemSize===3)for(let t=0,n=this.count;t<n;t++)Sn.fromBufferAttribute(this,t),Sn.applyMatrix3(e),this.setXYZ(t,Sn.x,Sn.y,Sn.z);return this}applyMatrix4(e){for(let t=0,n=this.count;t<n;t++)Sn.fromBufferAttribute(this,t),Sn.applyMatrix4(e),this.setXYZ(t,Sn.x,Sn.y,Sn.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)Sn.fromBufferAttribute(this,t),Sn.applyNormalMatrix(e),this.setXYZ(t,Sn.x,Sn.y,Sn.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)Sn.fromBufferAttribute(this,t),Sn.transformDirection(e),this.setXYZ(t,Sn.x,Sn.y,Sn.z);return this}set(e,t=0){return this.array.set(e,t),this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=Fa(t,this.array)),t}setX(e,t){return this.normalized&&(t=Ht(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=Fa(t,this.array)),t}setY(e,t){return this.normalized&&(t=Ht(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=Fa(t,this.array)),t}setZ(e,t){return this.normalized&&(t=Ht(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=Fa(t,this.array)),t}setW(e,t){return this.normalized&&(t=Ht(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,n){return e*=this.itemSize,this.normalized&&(t=Ht(t,this.array),n=Ht(n,this.array)),this.array[e+0]=t,this.array[e+1]=n,this}setXYZ(e,t,n,i){return e*=this.itemSize,this.normalized&&(t=Ht(t,this.array),n=Ht(n,this.array),i=Ht(i,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=i,this}setXYZW(e,t,n,i,s){return e*=this.itemSize,this.normalized&&(t=Ht(t,this.array),n=Ht(n,this.array),i=Ht(i,this.array),s=Ht(s,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=i,this.array[e+3]=s,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==zF&&(e.usage=this.usage),(this.updateRange.offset!==0||this.updateRange.count!==-1)&&(e.updateRange=this.updateRange),e}copyColorsArray(){console.error("THREE.BufferAttribute: copyColorsArray() was removed in r144.")}copyVector2sArray(){console.error("THREE.BufferAttribute: copyVector2sArray() was removed in r144.")}copyVector3sArray(){console.error("THREE.BufferAttribute: copyVector3sArray() was removed in r144.")}copyVector4sArray(){console.error("THREE.BufferAttribute: copyVector4sArray() was removed in r144.")}}class yx extends pt{constructor(e,t,n){super(new Uint16Array(e),t,n)}}class fV extends pt{constructor(e,t,n){super(new Uint32Array(e),t,n)}}class cn extends pt{constructor(e,t,n){super(new Float32Array(e),t,n)}}let h4=0;const Pi=new Le,jy=new St,_c=new H,hi=new ys,cd=new ys,$n=new H;class Xt extends ol{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:h4++}),this.uuid=Ys(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(AV(e)?fV:yx)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,n=0){this.groups.push({start:e,count:t,materialIndex:n})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);const n=this.attributes.normal;if(n!==void 0){const s=new an().getNormalMatrix(e);n.applyNormalMatrix(s),n.needsUpdate=!0}const i=this.attributes.tangent;return i!==void 0&&(i.transformDirection(e),i.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return Pi.makeRotationFromQuaternion(e),this.applyMatrix4(Pi),this}rotateX(e){return Pi.makeRotationX(e),this.applyMatrix4(Pi),this}rotateY(e){return Pi.makeRotationY(e),this.applyMatrix4(Pi),this}rotateZ(e){return Pi.makeRotationZ(e),this.applyMatrix4(Pi),this}translate(e,t,n){return Pi.makeTranslation(e,t,n),this.applyMatrix4(Pi),this}scale(e,t,n){return Pi.makeScale(e,t,n),this.applyMatrix4(Pi),this}lookAt(e){return jy.lookAt(e),jy.updateMatrix(),this.applyMatrix4(jy.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(_c).negate(),this.translate(_c.x,_c.y,_c.z),this}setFromPoints(e){const t=[];for(let n=0,i=e.length;n<i;n++){const s=e[n];t.push(s.x,s.y,s.z||0)}return this.setAttribute("position",new cn(t,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new ys);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingBox.set(new H(-1/0,-1/0,-1/0),new H(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let n=0,i=t.length;n<i;n++){const s=t[n];hi.setFromBufferAttribute(s),this.morphTargetsRelative?($n.addVectors(this.boundingBox.min,hi.min),this.boundingBox.expandByPoint($n),$n.addVectors(this.boundingBox.max,hi.max),this.boundingBox.expandByPoint($n)):(this.boundingBox.expandByPoint(hi.min),this.boundingBox.expandByPoint(hi.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new fc);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingSphere.set(new H,1/0);return}if(e){const n=this.boundingSphere.center;if(hi.setFromBufferAttribute(e),t)for(let s=0,o=t.length;s<o;s++){const a=t[s];cd.setFromBufferAttribute(a),this.morphTargetsRelative?($n.addVectors(hi.min,cd.min),hi.expandByPoint($n),$n.addVectors(hi.max,cd.max),hi.expandByPoint($n)):(hi.expandByPoint(cd.min),hi.expandByPoint(cd.max))}hi.getCenter(n);let i=0;for(let s=0,o=e.count;s<o;s++)$n.fromBufferAttribute(e,s),i=Math.max(i,n.distanceToSquared($n));if(t)for(let s=0,o=t.length;s<o;s++){const a=t[s],A=this.morphTargetsRelative;for(let l=0,c=a.count;l<c;l++)$n.fromBufferAttribute(a,l),A&&(_c.fromBufferAttribute(e,l),$n.add(_c)),i=Math.max(i,n.distanceToSquared($n))}this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const n=e.array,i=t.position.array,s=t.normal.array,o=t.uv.array,a=i.length/3;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new pt(new Float32Array(4*a),4));const A=this.getAttribute("tangent").array,l=[],c=[];for(let V=0;V<a;V++)l[V]=new H,c[V]=new H;const u=new H,f=new H,d=new H,p=new Je,h=new Je,m=new Je,g=new H,B=new H;function v(V,J,z){u.fromArray(i,V*3),f.fromArray(i,J*3),d.fromArray(i,z*3),p.fromArray(o,V*2),h.fromArray(o,J*2),m.fromArray(o,z*2),f.sub(u),d.sub(u),h.sub(p),m.sub(p);const R=1/(h.x*m.y-m.x*h.y);isFinite(R)&&(g.copy(f).multiplyScalar(m.y).addScaledVector(d,-h.y).multiplyScalar(R),B.copy(d).multiplyScalar(h.x).addScaledVector(f,-m.x).multiplyScalar(R),l[V].add(g),l[J].add(g),l[z].add(g),c[V].add(B),c[J].add(B),c[z].add(B))}let w=this.groups;w.length===0&&(w=[{start:0,count:n.length}]);for(let V=0,J=w.length;V<J;++V){const z=w[V],R=z.start,y=z.count;for(let Q=R,_=R+y;Q<_;Q+=3)v(n[Q+0],n[Q+1],n[Q+2])}const C=new H,I=new H,E=new H,U=new H;function S(V){E.fromArray(s,V*3),U.copy(E);const J=l[V];C.copy(J),C.sub(E.multiplyScalar(E.dot(J))).normalize(),I.crossVectors(U,J);const R=I.dot(c[V])<0?-1:1;A[V*4]=C.x,A[V*4+1]=C.y,A[V*4+2]=C.z,A[V*4+3]=R}for(let V=0,J=w.length;V<J;++V){const z=w[V],R=z.start,y=z.count;for(let Q=R,_=R+y;Q<_;Q+=3)S(n[Q+0]),S(n[Q+1]),S(n[Q+2])}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(t!==void 0){let n=this.getAttribute("normal");if(n===void 0)n=new pt(new Float32Array(t.count*3),3),this.setAttribute("normal",n);else for(let f=0,d=n.count;f<d;f++)n.setXYZ(f,0,0,0);const i=new H,s=new H,o=new H,a=new H,A=new H,l=new H,c=new H,u=new H;if(e)for(let f=0,d=e.count;f<d;f+=3){const p=e.getX(f+0),h=e.getX(f+1),m=e.getX(f+2);i.fromBufferAttribute(t,p),s.fromBufferAttribute(t,h),o.fromBufferAttribute(t,m),c.subVectors(o,s),u.subVectors(i,s),c.cross(u),a.fromBufferAttribute(n,p),A.fromBufferAttribute(n,h),l.fromBufferAttribute(n,m),a.add(c),A.add(c),l.add(c),n.setXYZ(p,a.x,a.y,a.z),n.setXYZ(h,A.x,A.y,A.z),n.setXYZ(m,l.x,l.y,l.z)}else for(let f=0,d=t.count;f<d;f+=3)i.fromBufferAttribute(t,f+0),s.fromBufferAttribute(t,f+1),o.fromBufferAttribute(t,f+2),c.subVectors(o,s),u.subVectors(i,s),c.cross(u),n.setXYZ(f+0,c.x,c.y,c.z),n.setXYZ(f+1,c.x,c.y,c.z),n.setXYZ(f+2,c.x,c.y,c.z);this.normalizeNormals(),n.needsUpdate=!0}}merge(){return console.error("THREE.BufferGeometry.merge() has been removed. Use THREE.BufferGeometryUtils.mergeBufferGeometries() instead."),this}normalizeNormals(){const e=this.attributes.normal;for(let t=0,n=e.count;t<n;t++)$n.fromBufferAttribute(e,t),$n.normalize(),e.setXYZ(t,$n.x,$n.y,$n.z)}toNonIndexed(){function e(a,A){const l=a.array,c=a.itemSize,u=a.normalized,f=new l.constructor(A.length*c);let d=0,p=0;for(let h=0,m=A.length;h<m;h++){a.isInterleavedBufferAttribute?d=A[h]*a.data.stride+a.offset:d=A[h]*c;for(let g=0;g<c;g++)f[p++]=l[d++]}return new pt(f,c,u)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new Xt,n=this.index.array,i=this.attributes;for(const a in i){const A=i[a],l=e(A,n);t.setAttribute(a,l)}const s=this.morphAttributes;for(const a in s){const A=[],l=s[a];for(let c=0,u=l.length;c<u;c++){const f=l[c],d=e(f,n);A.push(d)}t.morphAttributes[a]=A}t.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let a=0,A=o.length;a<A;a++){const l=o[a];t.addGroup(l.start,l.count,l.materialIndex)}return t}toJSON(){const e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const A=this.parameters;for(const l in A)A[l]!==void 0&&(e[l]=A[l]);return e}e.data={attributes:{}};const t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const n=this.attributes;for(const A in n){const l=n[A];e.data.attributes[A]=l.toJSON(e.data)}const i={};let s=!1;for(const A in this.morphAttributes){const l=this.morphAttributes[A],c=[];for(let u=0,f=l.length;u<f;u++){const d=l[u];c.push(d.toJSON(e.data))}c.length>0&&(i[A]=c,s=!0)}s&&(e.data.morphAttributes=i,e.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(e.data.groups=JSON.parse(JSON.stringify(o)));const a=this.boundingSphere;return a!==null&&(e.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const n=e.index;n!==null&&this.setIndex(n.clone(t));const i=e.attributes;for(const l in i){const c=i[l];this.setAttribute(l,c.clone(t))}const s=e.morphAttributes;for(const l in s){const c=[],u=s[l];for(let f=0,d=u.length;f<d;f++)c.push(u[f].clone(t));this.morphAttributes[l]=c}this.morphTargetsRelative=e.morphTargetsRelative;const o=e.groups;for(let l=0,c=o.length;l<c;l++){const u=o[l];this.addGroup(u.start,u.count,u.materialIndex)}const a=e.boundingBox;a!==null&&(this.boundingBox=a.clone());const A=e.boundingSphere;return A!==null&&(this.boundingSphere=A.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,e.parameters!==void 0&&(this.parameters=Object.assign({},e.parameters)),this}dispose(){this.dispatchEvent({type:"dispose"})}}const o1=new Le,Rc=new Ep,qy=new fc,ud=new H,fd=new H,dd=new H,$y=new H,vg=new H,yg=new Je,Cg=new Je,wg=new Je,eC=new H,Fg=new H;class bn extends St{constructor(e=new Xt,t=new Io){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=e.material,this.geometry=e.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,n=Object.keys(t);if(n.length>0){const i=t[n[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=i.length;s<o;s++){const a=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}getVertexPosition(e,t){const n=this.geometry,i=n.attributes.position,s=n.morphAttributes.position,o=n.morphTargetsRelative;t.fromBufferAttribute(i,e);const a=this.morphTargetInfluences;if(s&&a){vg.set(0,0,0);for(let A=0,l=s.length;A<l;A++){const c=a[A],u=s[A];c!==0&&($y.fromBufferAttribute(u,e),o?vg.addScaledVector($y,c):vg.addScaledVector($y.sub(t),c))}t.add(vg)}return this.isSkinnedMesh&&this.boneTransform(e,t),t}raycast(e,t){const n=this.geometry,i=this.material,s=this.matrixWorld;if(i===void 0||(n.boundingSphere===null&&n.computeBoundingSphere(),qy.copy(n.boundingSphere),qy.applyMatrix4(s),e.ray.intersectsSphere(qy)===!1)||(o1.copy(s).invert(),Rc.copy(e.ray).applyMatrix4(o1),n.boundingBox!==null&&Rc.intersectsBox(n.boundingBox)===!1))return;let o;const a=n.index,A=n.attributes.position,l=n.attributes.uv,c=n.attributes.uv2,u=n.groups,f=n.drawRange;if(a!==null)if(Array.isArray(i))for(let d=0,p=u.length;d<p;d++){const h=u[d],m=i[h.materialIndex],g=Math.max(h.start,f.start),B=Math.min(a.count,Math.min(h.start+h.count,f.start+f.count));for(let v=g,w=B;v<w;v+=3){const C=a.getX(v),I=a.getX(v+1),E=a.getX(v+2);o=Ig(this,m,e,Rc,l,c,C,I,E),o&&(o.faceIndex=Math.floor(v/3),o.face.materialIndex=h.materialIndex,t.push(o))}}else{const d=Math.max(0,f.start),p=Math.min(a.count,f.start+f.count);for(let h=d,m=p;h<m;h+=3){const g=a.getX(h),B=a.getX(h+1),v=a.getX(h+2);o=Ig(this,i,e,Rc,l,c,g,B,v),o&&(o.faceIndex=Math.floor(h/3),t.push(o))}}else if(A!==void 0)if(Array.isArray(i))for(let d=0,p=u.length;d<p;d++){const h=u[d],m=i[h.materialIndex],g=Math.max(h.start,f.start),B=Math.min(A.count,Math.min(h.start+h.count,f.start+f.count));for(let v=g,w=B;v<w;v+=3){const C=v,I=v+1,E=v+2;o=Ig(this,m,e,Rc,l,c,C,I,E),o&&(o.faceIndex=Math.floor(v/3),o.face.materialIndex=h.materialIndex,t.push(o))}}else{const d=Math.max(0,f.start),p=Math.min(A.count,f.start+f.count);for(let h=d,m=p;h<m;h+=3){const g=h,B=h+1,v=h+2;o=Ig(this,i,e,Rc,l,c,g,B,v),o&&(o.faceIndex=Math.floor(h/3),t.push(o))}}}}function p4(r,e,t,n,i,s,o,a){let A;if(e.side===oi?A=n.intersectTriangle(o,s,i,!0,a):A=n.intersectTriangle(i,s,o,e.side===Do,a),A===null)return null;Fg.copy(a),Fg.applyMatrix4(r.matrixWorld);const l=t.ray.origin.distanceTo(Fg);return l<t.near||l>t.far?null:{distance:l,point:Fg.clone(),object:r}}function Ig(r,e,t,n,i,s,o,a,A){r.getVertexPosition(o,ud),r.getVertexPosition(a,fd),r.getVertexPosition(A,dd);const l=p4(r,e,t,n,ud,fd,dd,eC);if(l){i&&(yg.fromBufferAttribute(i,o),Cg.fromBufferAttribute(i,a),wg.fromBufferAttribute(i,A),l.uv=Ui.getUV(eC,ud,fd,dd,yg,Cg,wg,new Je)),s&&(yg.fromBufferAttribute(s,o),Cg.fromBufferAttribute(s,a),wg.fromBufferAttribute(s,A),l.uv2=Ui.getUV(eC,ud,fd,dd,yg,Cg,wg,new Je));const c={a:o,b:a,c:A,normal:new H,materialIndex:0};Ui.getNormal(ud,fd,dd,c.normal),l.face=c}return l}class Sp extends Xt{constructor(e=1,t=1,n=1,i=1,s=1,o=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:n,widthSegments:i,heightSegments:s,depthSegments:o};const a=this;i=Math.floor(i),s=Math.floor(s),o=Math.floor(o);const A=[],l=[],c=[],u=[];let f=0,d=0;p("z","y","x",-1,-1,n,t,e,o,s,0),p("z","y","x",1,-1,n,t,-e,o,s,1),p("x","z","y",1,1,e,n,t,i,o,2),p("x","z","y",1,-1,e,n,-t,i,o,3),p("x","y","z",1,-1,e,t,n,i,s,4),p("x","y","z",-1,-1,e,t,-n,i,s,5),this.setIndex(A),this.setAttribute("position",new cn(l,3)),this.setAttribute("normal",new cn(c,3)),this.setAttribute("uv",new cn(u,2));function p(h,m,g,B,v,w,C,I,E,U,S){const V=w/E,J=C/U,z=w/2,R=C/2,y=I/2,Q=E+1,_=U+1;let L=0,T=0;const Z=new H;for(let G=0;G<_;G++){const D=G*J-R;for(let x=0;x<Q;x++){const P=x*V-z;Z[h]=P*B,Z[m]=D*v,Z[g]=y,l.push(Z.x,Z.y,Z.z),Z[h]=0,Z[m]=0,Z[g]=I>0?1:-1,c.push(Z.x,Z.y,Z.z),u.push(x/E),u.push(1-G/U),L+=1}}for(let G=0;G<U;G++)for(let D=0;D<E;D++){const x=f+D+Q*G,P=f+D+Q*(G+1),oe=f+(D+1)+Q*(G+1),M=f+(D+1)+Q*G;A.push(x,P,M),A.push(P,oe,M),T+=6}a.addGroup(d,T,S),d+=T,f+=L}}static fromJSON(e){return new Sp(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function yf(r){const e={};for(const t in r){e[t]={};for(const n in r[t]){const i=r[t][n];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture||i.isQuaternion)?e[t][n]=i.clone():Array.isArray(i)?e[t][n]=i.slice():e[t][n]=i}}return e}function kr(r){const e={};for(let t=0;t<r.length;t++){const n=yf(r[t]);for(const i in n)e[i]=n[i]}return e}function g4(r){const e=[];for(let t=0;t<r.length;t++)e.push(r[t].clone());return e}function dV(r){return r.getRenderTarget()===null&&r.outputEncoding===lt?uo:jh}const hV={clone:yf,merge:kr};var m4=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,B4=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class Ti extends cs{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=m4,this.fragmentShader=B4,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=yf(e.uniforms),this.uniformsGroups=g4(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const i in this.uniforms){const o=this.uniforms[i].value;o&&o.isTexture?t.uniforms[i]={type:"t",value:o.toJSON(e).uuid}:o&&o.isColor?t.uniforms[i]={type:"c",value:o.getHex()}:o&&o.isVector2?t.uniforms[i]={type:"v2",value:o.toArray()}:o&&o.isVector3?t.uniforms[i]={type:"v3",value:o.toArray()}:o&&o.isVector4?t.uniforms[i]={type:"v4",value:o.toArray()}:o&&o.isMatrix3?t.uniforms[i]={type:"m3",value:o.toArray()}:o&&o.isMatrix4?t.uniforms[i]={type:"m4",value:o.toArray()}:t.uniforms[i]={value:o}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader;const n={};for(const i in this.extensions)this.extensions[i]===!0&&(n[i]=!0);return Object.keys(n).length>0&&(t.extensions=n),t}}class pV extends St{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Le,this.projectionMatrix=new Le,this.projectionMatrixInverse=new Le}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(-t[8],-t[9],-t[10]).normalize()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}class Ir extends pV{constructor(e=50,t=1,n=.1,i=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=n,this.far=i,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=qh*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(mh*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return qh*2*Math.atan(Math.tan(mh*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,t,n,i,s,o){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=i,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(mh*.5*this.fov)/this.zoom,n=2*t,i=this.aspect*n,s=-.5*i;const o=this.view;if(this.view!==null&&this.view.enabled){const A=o.fullWidth,l=o.fullHeight;s+=o.offsetX*i/A,t-=o.offsetY*n/l,i*=o.width/A,n*=o.height/l}const a=this.filmOffset;a!==0&&(s+=e*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+i,t,t-n,e,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}const Mc=-90,Tc=1;class v4 extends St{constructor(e,t,n){super(),this.type="CubeCamera",this.renderTarget=n;const i=new Ir(Mc,Tc,e,t);i.layers=this.layers,i.up.set(0,1,0),i.lookAt(1,0,0),this.add(i);const s=new Ir(Mc,Tc,e,t);s.layers=this.layers,s.up.set(0,1,0),s.lookAt(-1,0,0),this.add(s);const o=new Ir(Mc,Tc,e,t);o.layers=this.layers,o.up.set(0,0,-1),o.lookAt(0,1,0),this.add(o);const a=new Ir(Mc,Tc,e,t);a.layers=this.layers,a.up.set(0,0,1),a.lookAt(0,-1,0),this.add(a);const A=new Ir(Mc,Tc,e,t);A.layers=this.layers,A.up.set(0,1,0),A.lookAt(0,0,1),this.add(A);const l=new Ir(Mc,Tc,e,t);l.layers=this.layers,l.up.set(0,1,0),l.lookAt(0,0,-1),this.add(l)}update(e,t){this.parent===null&&this.updateMatrixWorld();const n=this.renderTarget,[i,s,o,a,A,l]=this.children,c=e.getRenderTarget(),u=e.toneMapping,f=e.xr.enabled;e.toneMapping=Qa,e.xr.enabled=!1;const d=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,e.setRenderTarget(n,0),e.render(t,i),e.setRenderTarget(n,1),e.render(t,s),e.setRenderTarget(n,2),e.render(t,o),e.setRenderTarget(n,3),e.render(t,a),e.setRenderTarget(n,4),e.render(t,A),n.texture.generateMipmaps=d,e.setRenderTarget(n,5),e.render(t,l),e.setRenderTarget(c),e.toneMapping=u,e.xr.enabled=f,n.texture.needsPMREMUpdate=!0}}class gV extends En{constructor(e,t,n,i,s,o,a,A,l,c){e=e!==void 0?e:[],t=t!==void 0?t:gf,super(e,t,n,i,s,o,a,A,l,c),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class y4 extends KA{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const n={width:e,height:e,depth:1},i=[n,n,n,n,n,n];this.texture=new gV(i,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.encoding),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=t.generateMipmaps!==void 0?t.generateMipmaps:!1,this.texture.minFilter=t.minFilter!==void 0?t.minFilter:Wr}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.encoding=t.encoding,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const n={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},i=new Sp(5,5,5),s=new Ti({name:"CubemapFromEquirect",uniforms:yf(n.uniforms),vertexShader:n.vertexShader,fragmentShader:n.fragmentShader,side:oi,blending:kA});s.uniforms.tEquirect.value=t;const o=new bn(i,s),a=t.minFilter;return t.minFilter===XA&&(t.minFilter=Wr),new v4(1,10,this).update(e,o),t.minFilter=a,o.geometry.dispose(),o.material.dispose(),this}clear(e,t,n,i){const s=e.getRenderTarget();for(let o=0;o<6;o++)e.setRenderTarget(this,o),e.clear(t,n,i);e.setRenderTarget(s)}}const tC=new H,C4=new H,w4=new an;class ma{constructor(e=new H(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,n,i){return this.normal.set(e,t,n),this.constant=i,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,n){const i=tC.subVectors(n,t).cross(C4.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(i,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(this.normal).multiplyScalar(-this.distanceToPoint(e)).add(e)}intersectLine(e,t){const n=e.delta(tC),i=this.normal.dot(n);if(i===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;const s=-(e.start.dot(this.normal)+this.constant)/i;return s<0||s>1?null:t.copy(n).multiplyScalar(s).add(e.start)}intersectsLine(e){const t=this.distanceToPoint(e.start),n=this.distanceToPoint(e.end);return t<0&&n>0||n<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const n=t||w4.getNormalMatrix(e),i=this.coplanarPoint(tC).applyMatrix4(e),s=this.normal.applyMatrix3(n).normalize();return this.constant=-i.dot(s),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const Nc=new fc,Ug=new H;class Cx{constructor(e=new ma,t=new ma,n=new ma,i=new ma,s=new ma,o=new ma){this.planes=[e,t,n,i,s,o]}set(e,t,n,i,s,o){const a=this.planes;return a[0].copy(e),a[1].copy(t),a[2].copy(n),a[3].copy(i),a[4].copy(s),a[5].copy(o),this}copy(e){const t=this.planes;for(let n=0;n<6;n++)t[n].copy(e.planes[n]);return this}setFromProjectionMatrix(e){const t=this.planes,n=e.elements,i=n[0],s=n[1],o=n[2],a=n[3],A=n[4],l=n[5],c=n[6],u=n[7],f=n[8],d=n[9],p=n[10],h=n[11],m=n[12],g=n[13],B=n[14],v=n[15];return t[0].setComponents(a-i,u-A,h-f,v-m).normalize(),t[1].setComponents(a+i,u+A,h+f,v+m).normalize(),t[2].setComponents(a+s,u+l,h+d,v+g).normalize(),t[3].setComponents(a-s,u-l,h-d,v-g).normalize(),t[4].setComponents(a-o,u-c,h-p,v-B).normalize(),t[5].setComponents(a+o,u+c,h+p,v+B).normalize(),this}intersectsObject(e){const t=e.geometry;return t.boundingSphere===null&&t.computeBoundingSphere(),Nc.copy(t.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere(Nc)}intersectsSprite(e){return Nc.center.set(0,0,0),Nc.radius=.7071067811865476,Nc.applyMatrix4(e.matrixWorld),this.intersectsSphere(Nc)}intersectsSphere(e){const t=this.planes,n=e.center,i=-e.radius;for(let s=0;s<6;s++)if(t[s].distanceToPoint(n)<i)return!1;return!0}intersectsBox(e){const t=this.planes;for(let n=0;n<6;n++){const i=t[n];if(Ug.x=i.normal.x>0?e.max.x:e.min.x,Ug.y=i.normal.y>0?e.max.y:e.min.y,Ug.z=i.normal.z>0?e.max.z:e.min.z,i.distanceToPoint(Ug)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let n=0;n<6;n++)if(t[n].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function mV(){let r=null,e=!1,t=null,n=null;function i(s,o){t(s,o),n=r.requestAnimationFrame(i)}return{start:function(){e!==!0&&t!==null&&(n=r.requestAnimationFrame(i),e=!0)},stop:function(){r.cancelAnimationFrame(n),e=!1},setAnimationLoop:function(s){t=s},setContext:function(s){r=s}}}function F4(r,e){const t=e.isWebGL2,n=new WeakMap;function i(l,c){const u=l.array,f=l.usage,d=r.createBuffer();r.bindBuffer(c,d),r.bufferData(c,u,f),l.onUploadCallback();let p;if(u instanceof Float32Array)p=5126;else if(u instanceof Uint16Array)if(l.isFloat16BufferAttribute)if(t)p=5131;else throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");else p=5123;else if(u instanceof Int16Array)p=5122;else if(u instanceof Uint32Array)p=5125;else if(u instanceof Int32Array)p=5124;else if(u instanceof Int8Array)p=5120;else if(u instanceof Uint8Array)p=5121;else if(u instanceof Uint8ClampedArray)p=5121;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+u);return{buffer:d,type:p,bytesPerElement:u.BYTES_PER_ELEMENT,version:l.version}}function s(l,c,u){const f=c.array,d=c.updateRange;r.bindBuffer(u,l),d.count===-1?r.bufferSubData(u,0,f):(t?r.bufferSubData(u,d.offset*f.BYTES_PER_ELEMENT,f,d.offset,d.count):r.bufferSubData(u,d.offset*f.BYTES_PER_ELEMENT,f.subarray(d.offset,d.offset+d.count)),d.count=-1),c.onUploadCallback()}function o(l){return l.isInterleavedBufferAttribute&&(l=l.data),n.get(l)}function a(l){l.isInterleavedBufferAttribute&&(l=l.data);const c=n.get(l);c&&(r.deleteBuffer(c.buffer),n.delete(l))}function A(l,c){if(l.isGLBufferAttribute){const f=n.get(l);(!f||f.version<l.version)&&n.set(l,{buffer:l.buffer,type:l.type,bytesPerElement:l.elementSize,version:l.version});return}l.isInterleavedBufferAttribute&&(l=l.data);const u=n.get(l);u===void 0?n.set(l,i(l,c)):u.version<l.version&&(s(u.buffer,l,c),u.version=l.version)}return{get:o,remove:a,update:A}}class ic extends Xt{constructor(e=1,t=1,n=1,i=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:n,heightSegments:i};const s=e/2,o=t/2,a=Math.floor(n),A=Math.floor(i),l=a+1,c=A+1,u=e/a,f=t/A,d=[],p=[],h=[],m=[];for(let g=0;g<c;g++){const B=g*f-o;for(let v=0;v<l;v++){const w=v*u-s;p.push(w,-B,0),h.push(0,0,1),m.push(v/a),m.push(1-g/A)}}for(let g=0;g<A;g++)for(let B=0;B<a;B++){const v=B+l*g,w=B+l*(g+1),C=B+1+l*(g+1),I=B+1+l*g;d.push(v,w,I),d.push(w,C,I)}this.setIndex(d),this.setAttribute("position",new cn(p,3)),this.setAttribute("normal",new cn(h,3)),this.setAttribute("uv",new cn(m,2))}static fromJSON(e){return new ic(e.width,e.height,e.widthSegments,e.heightSegments)}}var I4=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vUv ).g;
#endif`,U4=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,x4=`#ifdef USE_ALPHATEST
	if ( diffuseColor.a < alphaTest ) discard;
#endif`,Q4=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,b4=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,E4=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,S4="vec3 transformed = vec3( position );",_4=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,R4=`vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float roughness ) {
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
	float D = D_GGX( alpha, dotNH );
	return F * ( V * D );
}
#ifdef USE_IRIDESCENCE
	vec3 BRDF_GGX_Iridescence( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float iridescence, const in vec3 iridescenceFresnel, const in float roughness ) {
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = mix( F_Schlick( f0, f90, dotVH ), iridescenceFresnel, iridescence );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif`,M4=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			 return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float R21 = R12;
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,T4=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vUv );
		vec2 dSTdy = dFdy( vUv );
		float Hll = bumpScale * texture2D( bumpMap, vUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = dFdx( surf_pos.xyz );
		vec3 vSigmaY = dFdy( surf_pos.xyz );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,N4=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#pragma unroll_loop_start
	for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
		plane = clippingPlanes[ i ];
		if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
	}
	#pragma unroll_loop_end
	#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
		bool clipped = true;
		#pragma unroll_loop_start
		for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
		}
		#pragma unroll_loop_end
		if ( clipped ) discard;
	#endif
#endif`,V4=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,D4=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,k4=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,L4=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,W4=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,Z4=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	varying vec3 vColor;
#endif`,P4=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif`,J4=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
struct GeometricContext {
	vec3 position;
	vec3 normal;
	vec3 viewDir;
#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal;
#endif
};
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float luminance( const in vec3 rgb ) {
	const vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );
	return dot( weights, rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}`,G4=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_v0 0.339
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_v1 0.276
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_v4 0.046
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_v5 0.016
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_v6 0.0038
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,O4=`vec3 transformedNormal = objectNormal;
#ifdef USE_INSTANCING
	mat3 m = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );
	transformedNormal = m * transformedNormal;
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	vec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,H4=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,z4=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );
#endif`,X4=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vUv );
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,Y4=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,K4="gl_FragColor = linearToOutputTexel( gl_FragColor );",j4=`vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 LinearTosRGB( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,q4=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,$4=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,e5=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,t5=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,n5=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,r5=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,i5=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,s5=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,o5=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,a5=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,A5=`#ifdef USE_LIGHTMAP
	vec4 lightMapTexel = texture2D( lightMap, vUv2 );
	vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
	reflectedLight.indirectDiffuse += lightMapIrradiance;
#endif`,l5=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,c5=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,u5=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,f5=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
uniform vec3 lightProbe[ 9 ];
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	#if defined ( PHYSICALLY_CORRECT_LIGHTS )
		float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
		if ( cutoffDistance > 0.0 ) {
			distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
		}
		return distanceFalloff;
	#else
		if ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
			return pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );
		}
		return 1.0;
	#endif
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometry.position;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometry.position;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,d5=`#if defined( USE_ENVMAP )
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#if defined( ENVMAP_TYPE_CUBE_UV )
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#if defined( ENVMAP_TYPE_CUBE_UV )
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
#endif`,h5=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,p5=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,g5=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,m5=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,B5=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULARINTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vUv ).a;
		#endif
		#ifdef USE_SPECULARCOLORMAP
			specularColorFactor *= texture2D( specularColorMap, vUv ).rgb;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEENCOLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEENROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vUv ).a;
	#endif
#endif`,v5=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
};
vec3 clearcoatSpecular = vec3( 0.0 );
vec3 sheenSpecular = vec3( 0.0 );
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometry.normal;
		vec3 viewDir = geometry.viewDir;
		vec3 position = geometry.position;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecular += ccIrradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );
	#endif
	#ifdef USE_IRIDESCENCE
		reflectedLight.directSpecular += irradiance * BRDF_GGX_Iridescence( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness );
	#else
		reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.roughness );
	#endif
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,y5=`
GeometricContext geometry;
geometry.position = - vViewPosition;
geometry.normal = normal;
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
#ifdef USE_CLEARCOAT
	geometry.clearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometry.viewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometry, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	irradiance += getLightProbeIrradiance( lightProbe, geometry.normal );
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,C5=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vUv2 );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometry.normal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	radiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,w5=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );
#endif`,F5=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,I5=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,U5=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
		varying float vIsPerspective;
	#else
		uniform float logDepthBufFC;
	#endif
#endif`,x5=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
	#else
		if ( isPerspectiveMatrix( projectionMatrix ) ) {
			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
			gl_Position.z *= gl_Position.w;
		}
	#endif
#endif`,Q5=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,b5=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,E5=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,S5=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	uniform mat3 uvTransform;
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,_5=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vUv );
	metalnessFactor *= texelMetalness.b;
#endif`,R5=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,M5=`#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,T5=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
		objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
		objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
		objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
	#endif
#endif`,N5=`#ifdef USE_MORPHTARGETS
	uniform float morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
		uniform sampler2DArray morphTargetsTexture;
		uniform ivec2 morphTargetsTextureSize;
		vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
			int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
			int y = texelIndex / morphTargetsTextureSize.x;
			int x = texelIndex - y * morphTargetsTextureSize.x;
			ivec3 morphUV = ivec3( x, y, morphTargetIndex );
			return texelFetch( morphTargetsTexture, morphUV, 0 );
		}
	#else
		#ifndef USE_MORPHNORMALS
			uniform float morphTargetInfluences[ 8 ];
		#else
			uniform float morphTargetInfluences[ 4 ];
		#endif
	#endif
#endif`,V5=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		transformed += morphTarget0 * morphTargetInfluences[ 0 ];
		transformed += morphTarget1 * morphTargetInfluences[ 1 ];
		transformed += morphTarget2 * morphTargetInfluences[ 2 ];
		transformed += morphTarget3 * morphTargetInfluences[ 3 ];
		#ifndef USE_MORPHNORMALS
			transformed += morphTarget4 * morphTargetInfluences[ 4 ];
			transformed += morphTarget5 * morphTargetInfluences[ 5 ];
			transformed += morphTarget6 * morphTargetInfluences[ 6 ];
			transformed += morphTarget7 * morphTargetInfluences[ 7 ];
		#endif
	#endif
#endif`,D5=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	#ifdef USE_TANGENT
		vec3 tangent = normalize( vTangent );
		vec3 bitangent = normalize( vBitangent );
		#ifdef DOUBLE_SIDED
			tangent = tangent * faceDirection;
			bitangent = bitangent * faceDirection;
		#endif
		#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )
			mat3 vTBN = mat3( tangent, bitangent, normal );
		#endif
	#endif
#endif
vec3 geometryNormal = normal;`,k5=`#ifdef OBJECTSPACE_NORMALMAP
	normal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( TANGENTSPACE_NORMALMAP )
	vec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	#ifdef USE_TANGENT
		normal = normalize( vTBN * mapN );
	#else
		normal = perturbNormal2Arb( - vViewPosition, normal, mapN, faceDirection );
	#endif
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,L5=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,W5=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,Z5=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,P5=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef OBJECTSPACE_NORMALMAP
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )
	vec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( vUv.st );
		vec2 st1 = dFdy( vUv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );
		return normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );
	}
#endif`,J5=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = geometryNormal;
#endif`,G5=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	#ifdef USE_TANGENT
		clearcoatNormal = normalize( vTBN * clearcoatMapN );
	#else
		clearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );
	#endif
#endif`,O5=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif`,H5=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,z5=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha + 0.1;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,X5=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec2 packDepthToRG( in highp float v ) {
	return packDepthToRGBA( v ).yx;
}
float unpackRGToDepth( const in highp vec2 v ) {
	return unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {
	return linearClipZ * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * invClipZ - far );
}`,Y5=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,K5=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,j5=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,q5=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,$5=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vUv );
	roughnessFactor *= texelRoughness.g;
#endif`,ez=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,tz=`#if NUM_SPOT_LIGHT_COORDS > 0
  varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
  uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif`,nz=`#if NUM_SPOT_LIGHT_COORDS > 0
  uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
  varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,rz=`#if defined( USE_SHADOWMAP ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_COORDS > 0 || NUM_POINT_LIGHT_SHADOWS > 0
		vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		vec4 shadowWorldPosition;
	#endif
	#if NUM_DIR_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
		vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
		vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
#endif`,iz=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,sz=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,oz=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	uniform int boneTextureSize;
	mat4 getBoneMatrix( const in float i ) {
		float j = i * 4.0;
		float x = mod( j, float( boneTextureSize ) );
		float y = floor( j / float( boneTextureSize ) );
		float dx = 1.0 / float( boneTextureSize );
		float dy = 1.0 / float( boneTextureSize );
		y = dy * ( y + 0.5 );
		vec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );
		vec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );
		vec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );
		vec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );
		mat4 bone = mat4( v1, v2, v3, v4 );
		return bone;
	}
#endif`,az=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,Az=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,lz=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,cz=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,uz=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,fz=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return toneMappingExposure * color;
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,dz=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmission = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmission.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmission.rgb, material.transmission );
#endif`,hz=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		#ifdef texture2DLodEXT
			return texture2DLodEXT( transmissionSamplerMap, fragCoord.xy, framebufferLod );
		#else
			return texture2D( transmissionSamplerMap, fragCoord.xy, framebufferLod );
		#endif
	}
	vec3 applyVolumeAttenuation( const in vec3 radiance, const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return radiance;
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance * radiance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
		vec3 refractedRayExit = position + transmissionRay;
		vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
		vec2 refractionCoords = ndcPos.xy / ndcPos.w;
		refractionCoords += 1.0;
		refractionCoords /= 2.0;
		vec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
		vec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		return vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );
	}
#endif`,pz=`#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )
	varying vec2 vUv;
#endif`,gz=`#ifdef USE_UV
	#ifdef UVS_VERTEX_ONLY
		vec2 vUv;
	#else
		varying vec2 vUv;
	#endif
	uniform mat3 uvTransform;
#endif`,mz=`#ifdef USE_UV
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
#endif`,Bz=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	varying vec2 vUv2;
#endif`,vz=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	attribute vec2 uv2;
	varying vec2 vUv2;
	uniform mat3 uv2Transform;
#endif`,yz=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	vUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;
#endif`,Cz=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const wz=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,Fz=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,Iz=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,Uz=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,xz=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,Qz=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,bz=`#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,Ez=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,Sz=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,_z=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,Rz=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,Mz=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,Tz=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,Nz=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,Vz=`#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,Dz=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vUv2 );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,kz=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Lz=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Wz=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,Zz=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Pz=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	vViewPosition = - mvPosition.xyz;
#endif
}`,Jz=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), opacity );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,Gz=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Oz=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Hz=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,zz=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULARINTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
	#ifdef USE_SPECULARCOLORMAP
		uniform sampler2D specularColorMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEENCOLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEENROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <bsdfs>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;
	#endif
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Xz=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Yz=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Kz=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,jz=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,qz=`#include <common>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,$z=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,eX=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,tX=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,ut={alphamap_fragment:I4,alphamap_pars_fragment:U4,alphatest_fragment:x4,alphatest_pars_fragment:Q4,aomap_fragment:b4,aomap_pars_fragment:E4,begin_vertex:S4,beginnormal_vertex:_4,bsdfs:R4,iridescence_fragment:M4,bumpmap_pars_fragment:T4,clipping_planes_fragment:N4,clipping_planes_pars_fragment:V4,clipping_planes_pars_vertex:D4,clipping_planes_vertex:k4,color_fragment:L4,color_pars_fragment:W4,color_pars_vertex:Z4,color_vertex:P4,common:J4,cube_uv_reflection_fragment:G4,defaultnormal_vertex:O4,displacementmap_pars_vertex:H4,displacementmap_vertex:z4,emissivemap_fragment:X4,emissivemap_pars_fragment:Y4,encodings_fragment:K4,encodings_pars_fragment:j4,envmap_fragment:q4,envmap_common_pars_fragment:$4,envmap_pars_fragment:e5,envmap_pars_vertex:t5,envmap_physical_pars_fragment:d5,envmap_vertex:n5,fog_vertex:r5,fog_pars_vertex:i5,fog_fragment:s5,fog_pars_fragment:o5,gradientmap_pars_fragment:a5,lightmap_fragment:A5,lightmap_pars_fragment:l5,lights_lambert_fragment:c5,lights_lambert_pars_fragment:u5,lights_pars_begin:f5,lights_toon_fragment:h5,lights_toon_pars_fragment:p5,lights_phong_fragment:g5,lights_phong_pars_fragment:m5,lights_physical_fragment:B5,lights_physical_pars_fragment:v5,lights_fragment_begin:y5,lights_fragment_maps:C5,lights_fragment_end:w5,logdepthbuf_fragment:F5,logdepthbuf_pars_fragment:I5,logdepthbuf_pars_vertex:U5,logdepthbuf_vertex:x5,map_fragment:Q5,map_pars_fragment:b5,map_particle_fragment:E5,map_particle_pars_fragment:S5,metalnessmap_fragment:_5,metalnessmap_pars_fragment:R5,morphcolor_vertex:M5,morphnormal_vertex:T5,morphtarget_pars_vertex:N5,morphtarget_vertex:V5,normal_fragment_begin:D5,normal_fragment_maps:k5,normal_pars_fragment:L5,normal_pars_vertex:W5,normal_vertex:Z5,normalmap_pars_fragment:P5,clearcoat_normal_fragment_begin:J5,clearcoat_normal_fragment_maps:G5,clearcoat_pars_fragment:O5,iridescence_pars_fragment:H5,output_fragment:z5,packing:X5,premultiplied_alpha_fragment:Y5,project_vertex:K5,dithering_fragment:j5,dithering_pars_fragment:q5,roughnessmap_fragment:$5,roughnessmap_pars_fragment:ez,shadowmap_pars_fragment:tz,shadowmap_pars_vertex:nz,shadowmap_vertex:rz,shadowmask_pars_fragment:iz,skinbase_vertex:sz,skinning_pars_vertex:oz,skinning_vertex:az,skinnormal_vertex:Az,specularmap_fragment:lz,specularmap_pars_fragment:cz,tonemapping_fragment:uz,tonemapping_pars_fragment:fz,transmission_fragment:dz,transmission_pars_fragment:hz,uv_pars_fragment:pz,uv_pars_vertex:gz,uv_vertex:mz,uv2_pars_fragment:Bz,uv2_pars_vertex:vz,uv2_vertex:yz,worldpos_vertex:Cz,background_vert:wz,background_frag:Fz,backgroundCube_vert:Iz,backgroundCube_frag:Uz,cube_vert:xz,cube_frag:Qz,depth_vert:bz,depth_frag:Ez,distanceRGBA_vert:Sz,distanceRGBA_frag:_z,equirect_vert:Rz,equirect_frag:Mz,linedashed_vert:Tz,linedashed_frag:Nz,meshbasic_vert:Vz,meshbasic_frag:Dz,meshlambert_vert:kz,meshlambert_frag:Lz,meshmatcap_vert:Wz,meshmatcap_frag:Zz,meshnormal_vert:Pz,meshnormal_frag:Jz,meshphong_vert:Gz,meshphong_frag:Oz,meshphysical_vert:Hz,meshphysical_frag:zz,meshtoon_vert:Xz,meshtoon_frag:Yz,points_vert:Kz,points_frag:jz,shadow_vert:qz,shadow_frag:$z,sprite_vert:eX,sprite_frag:tX},Me={common:{diffuse:{value:new Ve(16777215)},opacity:{value:1},map:{value:null},uvTransform:{value:new an},uv2Transform:{value:new an},alphaMap:{value:null},alphaTest:{value:0}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new Je(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Ve(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Ve(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new an}},sprite:{diffuse:{value:new Ve(16777215)},opacity:{value:1},center:{value:new Je(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new an}}},ho={basic:{uniforms:kr([Me.common,Me.specularmap,Me.envmap,Me.aomap,Me.lightmap,Me.fog]),vertexShader:ut.meshbasic_vert,fragmentShader:ut.meshbasic_frag},lambert:{uniforms:kr([Me.common,Me.specularmap,Me.envmap,Me.aomap,Me.lightmap,Me.emissivemap,Me.bumpmap,Me.normalmap,Me.displacementmap,Me.fog,Me.lights,{emissive:{value:new Ve(0)}}]),vertexShader:ut.meshlambert_vert,fragmentShader:ut.meshlambert_frag},phong:{uniforms:kr([Me.common,Me.specularmap,Me.envmap,Me.aomap,Me.lightmap,Me.emissivemap,Me.bumpmap,Me.normalmap,Me.displacementmap,Me.fog,Me.lights,{emissive:{value:new Ve(0)},specular:{value:new Ve(1118481)},shininess:{value:30}}]),vertexShader:ut.meshphong_vert,fragmentShader:ut.meshphong_frag},standard:{uniforms:kr([Me.common,Me.envmap,Me.aomap,Me.lightmap,Me.emissivemap,Me.bumpmap,Me.normalmap,Me.displacementmap,Me.roughnessmap,Me.metalnessmap,Me.fog,Me.lights,{emissive:{value:new Ve(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:ut.meshphysical_vert,fragmentShader:ut.meshphysical_frag},toon:{uniforms:kr([Me.common,Me.aomap,Me.lightmap,Me.emissivemap,Me.bumpmap,Me.normalmap,Me.displacementmap,Me.gradientmap,Me.fog,Me.lights,{emissive:{value:new Ve(0)}}]),vertexShader:ut.meshtoon_vert,fragmentShader:ut.meshtoon_frag},matcap:{uniforms:kr([Me.common,Me.bumpmap,Me.normalmap,Me.displacementmap,Me.fog,{matcap:{value:null}}]),vertexShader:ut.meshmatcap_vert,fragmentShader:ut.meshmatcap_frag},points:{uniforms:kr([Me.points,Me.fog]),vertexShader:ut.points_vert,fragmentShader:ut.points_frag},dashed:{uniforms:kr([Me.common,Me.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:ut.linedashed_vert,fragmentShader:ut.linedashed_frag},depth:{uniforms:kr([Me.common,Me.displacementmap]),vertexShader:ut.depth_vert,fragmentShader:ut.depth_frag},normal:{uniforms:kr([Me.common,Me.bumpmap,Me.normalmap,Me.displacementmap,{opacity:{value:1}}]),vertexShader:ut.meshnormal_vert,fragmentShader:ut.meshnormal_frag},sprite:{uniforms:kr([Me.sprite,Me.fog]),vertexShader:ut.sprite_vert,fragmentShader:ut.sprite_frag},background:{uniforms:{uvTransform:{value:new an},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:ut.background_vert,fragmentShader:ut.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1}},vertexShader:ut.backgroundCube_vert,fragmentShader:ut.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:ut.cube_vert,fragmentShader:ut.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:ut.equirect_vert,fragmentShader:ut.equirect_frag},distanceRGBA:{uniforms:kr([Me.common,Me.displacementmap,{referencePosition:{value:new H},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:ut.distanceRGBA_vert,fragmentShader:ut.distanceRGBA_frag},shadow:{uniforms:kr([Me.lights,Me.fog,{color:{value:new Ve(0)},opacity:{value:1}}]),vertexShader:ut.shadow_vert,fragmentShader:ut.shadow_frag}};ho.physical={uniforms:kr([ho.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new Je(1,1)},clearcoatNormalMap:{value:null},iridescence:{value:0},iridescenceMap:{value:null},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},sheen:{value:0},sheenColor:{value:new Ve(0)},sheenColorMap:{value:null},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},transmission:{value:0},transmissionMap:{value:null},transmissionSamplerSize:{value:new Je},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:0},attenuationColor:{value:new Ve(0)},specularIntensity:{value:1},specularIntensityMap:{value:null},specularColor:{value:new Ve(1,1,1)},specularColorMap:{value:null}}]),vertexShader:ut.meshphysical_vert,fragmentShader:ut.meshphysical_frag};const xg={r:0,b:0,g:0};function nX(r,e,t,n,i,s,o){const a=new Ve(0);let A=s===!0?0:1,l,c,u=null,f=0,d=null;function p(m,g){let B=!1,v=g.isScene===!0?g.background:null;v&&v.isTexture&&(v=(g.backgroundBlurriness>0?t:e).get(v));const w=r.xr,C=w.getSession&&w.getSession();C&&C.environmentBlendMode==="additive"&&(v=null),v===null?h(a,A):v&&v.isColor&&(h(v,1),B=!0),(r.autoClear||B)&&r.clear(r.autoClearColor,r.autoClearDepth,r.autoClearStencil),v&&(v.isCubeTexture||v.mapping===av)?(c===void 0&&(c=new bn(new Sp(1,1,1),new Ti({name:"BackgroundCubeMaterial",uniforms:yf(ho.backgroundCube.uniforms),vertexShader:ho.backgroundCube.vertexShader,fragmentShader:ho.backgroundCube.fragmentShader,side:oi,depthTest:!1,depthWrite:!1,fog:!1})),c.geometry.deleteAttribute("normal"),c.geometry.deleteAttribute("uv"),c.onBeforeRender=function(I,E,U){this.matrixWorld.copyPosition(U.matrixWorld)},Object.defineProperty(c.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),i.update(c)),c.material.uniforms.envMap.value=v,c.material.uniforms.flipEnvMap.value=v.isCubeTexture&&v.isRenderTargetTexture===!1?-1:1,c.material.uniforms.backgroundBlurriness.value=g.backgroundBlurriness,c.material.uniforms.backgroundIntensity.value=g.backgroundIntensity,c.material.toneMapped=v.encoding!==lt,(u!==v||f!==v.version||d!==r.toneMapping)&&(c.material.needsUpdate=!0,u=v,f=v.version,d=r.toneMapping),c.layers.enableAll(),m.unshift(c,c.geometry,c.material,0,0,null)):v&&v.isTexture&&(l===void 0&&(l=new bn(new ic(2,2),new Ti({name:"BackgroundMaterial",uniforms:yf(ho.background.uniforms),vertexShader:ho.background.vertexShader,fragmentShader:ho.background.fragmentShader,side:Do,depthTest:!1,depthWrite:!1,fog:!1})),l.geometry.deleteAttribute("normal"),Object.defineProperty(l.material,"map",{get:function(){return this.uniforms.t2D.value}}),i.update(l)),l.material.uniforms.t2D.value=v,l.material.uniforms.backgroundIntensity.value=g.backgroundIntensity,l.material.toneMapped=v.encoding!==lt,v.matrixAutoUpdate===!0&&v.updateMatrix(),l.material.uniforms.uvTransform.value.copy(v.matrix),(u!==v||f!==v.version||d!==r.toneMapping)&&(l.material.needsUpdate=!0,u=v,f=v.version,d=r.toneMapping),l.layers.enableAll(),m.unshift(l,l.geometry,l.material,0,0,null))}function h(m,g){m.getRGB(xg,dV(r)),n.buffers.color.setClear(xg.r,xg.g,xg.b,g,o)}return{getClearColor:function(){return a},setClearColor:function(m,g=1){a.set(m),A=g,h(a,A)},getClearAlpha:function(){return A},setClearAlpha:function(m){A=m,h(a,A)},render:p}}function rX(r,e,t,n){const i=r.getParameter(34921),s=n.isWebGL2?null:e.get("OES_vertex_array_object"),o=n.isWebGL2||s!==null,a={},A=m(null);let l=A,c=!1;function u(y,Q,_,L,T){let Z=!1;if(o){const G=h(L,_,Q);l!==G&&(l=G,d(l.object)),Z=g(y,L,_,T),Z&&B(y,L,_,T)}else{const G=Q.wireframe===!0;(l.geometry!==L.id||l.program!==_.id||l.wireframe!==G)&&(l.geometry=L.id,l.program=_.id,l.wireframe=G,Z=!0)}T!==null&&t.update(T,34963),(Z||c)&&(c=!1,U(y,Q,_,L),T!==null&&r.bindBuffer(34963,t.get(T).buffer))}function f(){return n.isWebGL2?r.createVertexArray():s.createVertexArrayOES()}function d(y){return n.isWebGL2?r.bindVertexArray(y):s.bindVertexArrayOES(y)}function p(y){return n.isWebGL2?r.deleteVertexArray(y):s.deleteVertexArrayOES(y)}function h(y,Q,_){const L=_.wireframe===!0;let T=a[y.id];T===void 0&&(T={},a[y.id]=T);let Z=T[Q.id];Z===void 0&&(Z={},T[Q.id]=Z);let G=Z[L];return G===void 0&&(G=m(f()),Z[L]=G),G}function m(y){const Q=[],_=[],L=[];for(let T=0;T<i;T++)Q[T]=0,_[T]=0,L[T]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:Q,enabledAttributes:_,attributeDivisors:L,object:y,attributes:{},index:null}}function g(y,Q,_,L){const T=l.attributes,Z=Q.attributes;let G=0;const D=_.getAttributes();for(const x in D)if(D[x].location>=0){const oe=T[x];let M=Z[x];if(M===void 0&&(x==="instanceMatrix"&&y.instanceMatrix&&(M=y.instanceMatrix),x==="instanceColor"&&y.instanceColor&&(M=y.instanceColor)),oe===void 0||oe.attribute!==M||M&&oe.data!==M.data)return!0;G++}return l.attributesNum!==G||l.index!==L}function B(y,Q,_,L){const T={},Z=Q.attributes;let G=0;const D=_.getAttributes();for(const x in D)if(D[x].location>=0){let oe=Z[x];oe===void 0&&(x==="instanceMatrix"&&y.instanceMatrix&&(oe=y.instanceMatrix),x==="instanceColor"&&y.instanceColor&&(oe=y.instanceColor));const M={};M.attribute=oe,oe&&oe.data&&(M.data=oe.data),T[x]=M,G++}l.attributes=T,l.attributesNum=G,l.index=L}function v(){const y=l.newAttributes;for(let Q=0,_=y.length;Q<_;Q++)y[Q]=0}function w(y){C(y,0)}function C(y,Q){const _=l.newAttributes,L=l.enabledAttributes,T=l.attributeDivisors;_[y]=1,L[y]===0&&(r.enableVertexAttribArray(y),L[y]=1),T[y]!==Q&&((n.isWebGL2?r:e.get("ANGLE_instanced_arrays"))[n.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](y,Q),T[y]=Q)}function I(){const y=l.newAttributes,Q=l.enabledAttributes;for(let _=0,L=Q.length;_<L;_++)Q[_]!==y[_]&&(r.disableVertexAttribArray(_),Q[_]=0)}function E(y,Q,_,L,T,Z){n.isWebGL2===!0&&(_===5124||_===5125)?r.vertexAttribIPointer(y,Q,_,T,Z):r.vertexAttribPointer(y,Q,_,L,T,Z)}function U(y,Q,_,L){if(n.isWebGL2===!1&&(y.isInstancedMesh||L.isInstancedBufferGeometry)&&e.get("ANGLE_instanced_arrays")===null)return;v();const T=L.attributes,Z=_.getAttributes(),G=Q.defaultAttributeValues;for(const D in Z){const x=Z[D];if(x.location>=0){let P=T[D];if(P===void 0&&(D==="instanceMatrix"&&y.instanceMatrix&&(P=y.instanceMatrix),D==="instanceColor"&&y.instanceColor&&(P=y.instanceColor)),P!==void 0){const oe=P.normalized,M=P.itemSize,k=t.get(P);if(k===void 0)continue;const q=k.buffer,ee=k.type,X=k.bytesPerElement;if(P.isInterleavedBufferAttribute){const $=P.data,se=$.stride,ae=P.offset;if($.isInstancedInterleavedBuffer){for(let de=0;de<x.locationSize;de++)C(x.location+de,$.meshPerAttribute);y.isInstancedMesh!==!0&&L._maxInstanceCount===void 0&&(L._maxInstanceCount=$.meshPerAttribute*$.count)}else for(let de=0;de<x.locationSize;de++)w(x.location+de);r.bindBuffer(34962,q);for(let de=0;de<x.locationSize;de++)E(x.location+de,M/x.locationSize,ee,oe,se*X,(ae+M/x.locationSize*de)*X)}else{if(P.isInstancedBufferAttribute){for(let $=0;$<x.locationSize;$++)C(x.location+$,P.meshPerAttribute);y.isInstancedMesh!==!0&&L._maxInstanceCount===void 0&&(L._maxInstanceCount=P.meshPerAttribute*P.count)}else for(let $=0;$<x.locationSize;$++)w(x.location+$);r.bindBuffer(34962,q);for(let $=0;$<x.locationSize;$++)E(x.location+$,M/x.locationSize,ee,oe,M*X,M/x.locationSize*$*X)}}else if(G!==void 0){const oe=G[D];if(oe!==void 0)switch(oe.length){case 2:r.vertexAttrib2fv(x.location,oe);break;case 3:r.vertexAttrib3fv(x.location,oe);break;case 4:r.vertexAttrib4fv(x.location,oe);break;default:r.vertexAttrib1fv(x.location,oe)}}}}I()}function S(){z();for(const y in a){const Q=a[y];for(const _ in Q){const L=Q[_];for(const T in L)p(L[T].object),delete L[T];delete Q[_]}delete a[y]}}function V(y){if(a[y.id]===void 0)return;const Q=a[y.id];for(const _ in Q){const L=Q[_];for(const T in L)p(L[T].object),delete L[T];delete Q[_]}delete a[y.id]}function J(y){for(const Q in a){const _=a[Q];if(_[y.id]===void 0)continue;const L=_[y.id];for(const T in L)p(L[T].object),delete L[T];delete _[y.id]}}function z(){R(),c=!0,l!==A&&(l=A,d(l.object))}function R(){A.geometry=null,A.program=null,A.wireframe=!1}return{setup:u,reset:z,resetDefaultState:R,dispose:S,releaseStatesOfGeometry:V,releaseStatesOfProgram:J,initAttributes:v,enableAttribute:w,disableUnusedAttributes:I}}function iX(r,e,t,n){const i=n.isWebGL2;let s;function o(l){s=l}function a(l,c){r.drawArrays(s,l,c),t.update(c,s,1)}function A(l,c,u){if(u===0)return;let f,d;if(i)f=r,d="drawArraysInstanced";else if(f=e.get("ANGLE_instanced_arrays"),d="drawArraysInstancedANGLE",f===null){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}f[d](s,l,c,u),t.update(c,s,u)}this.setMode=o,this.render=a,this.renderInstances=A}function sX(r,e,t){let n;function i(){if(n!==void 0)return n;if(e.has("EXT_texture_filter_anisotropic")===!0){const E=e.get("EXT_texture_filter_anisotropic");n=r.getParameter(E.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else n=0;return n}function s(E){if(E==="highp"){if(r.getShaderPrecisionFormat(35633,36338).precision>0&&r.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";E="mediump"}return E==="mediump"&&r.getShaderPrecisionFormat(35633,36337).precision>0&&r.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}const o=typeof WebGL2RenderingContext<"u"&&r instanceof WebGL2RenderingContext||typeof WebGL2ComputeRenderingContext<"u"&&r instanceof WebGL2ComputeRenderingContext;let a=t.precision!==void 0?t.precision:"highp";const A=s(a);A!==a&&(console.warn("THREE.WebGLRenderer:",a,"not supported, using",A,"instead."),a=A);const l=o||e.has("WEBGL_draw_buffers"),c=t.logarithmicDepthBuffer===!0,u=r.getParameter(34930),f=r.getParameter(35660),d=r.getParameter(3379),p=r.getParameter(34076),h=r.getParameter(34921),m=r.getParameter(36347),g=r.getParameter(36348),B=r.getParameter(36349),v=f>0,w=o||e.has("OES_texture_float"),C=v&&w,I=o?r.getParameter(36183):0;return{isWebGL2:o,drawBuffers:l,getMaxAnisotropy:i,getMaxPrecision:s,precision:a,logarithmicDepthBuffer:c,maxTextures:u,maxVertexTextures:f,maxTextureSize:d,maxCubemapSize:p,maxAttributes:h,maxVertexUniforms:m,maxVaryings:g,maxFragmentUniforms:B,vertexTextures:v,floatFragmentTextures:w,floatVertexTextures:C,maxSamples:I}}function oX(r){const e=this;let t=null,n=0,i=!1,s=!1;const o=new ma,a=new an,A={value:null,needsUpdate:!1};this.uniform=A,this.numPlanes=0,this.numIntersection=0,this.init=function(u,f,d){const p=u.length!==0||f||n!==0||i;return i=f,t=c(u,d,0),n=u.length,p},this.beginShadows=function(){s=!0,c(null)},this.endShadows=function(){s=!1,l()},this.setState=function(u,f,d){const p=u.clippingPlanes,h=u.clipIntersection,m=u.clipShadows,g=r.get(u);if(!i||p===null||p.length===0||s&&!m)s?c(null):l();else{const B=s?0:n,v=B*4;let w=g.clippingState||null;A.value=w,w=c(p,f,v,d);for(let C=0;C!==v;++C)w[C]=t[C];g.clippingState=w,this.numIntersection=h?this.numPlanes:0,this.numPlanes+=B}};function l(){A.value!==t&&(A.value=t,A.needsUpdate=n>0),e.numPlanes=n,e.numIntersection=0}function c(u,f,d,p){const h=u!==null?u.length:0;let m=null;if(h!==0){if(m=A.value,p!==!0||m===null){const g=d+h*4,B=f.matrixWorldInverse;a.getNormalMatrix(B),(m===null||m.length<g)&&(m=new Float32Array(g));for(let v=0,w=d;v!==h;++v,w+=4)o.copy(u[v]).applyMatrix4(B,a),o.normal.toArray(m,w),m[w+3]=o.constant}A.value=m,A.needsUpdate=!0}return e.numPlanes=h,e.numIntersection=0,m}}function aX(r){let e=new WeakMap;function t(o,a){return a===W0?o.mapping=gf:a===HF&&(o.mapping=mf),o}function n(o){if(o&&o.isTexture&&o.isRenderTargetTexture===!1){const a=o.mapping;if(a===W0||a===HF)if(e.has(o)){const A=e.get(o).texture;return t(A,o.mapping)}else{const A=o.image;if(A&&A.height>0){const l=new y4(A.height/2);return l.fromEquirectangularTexture(r,o),e.set(o,l),o.addEventListener("dispose",i),t(l.texture,o.mapping)}else return null}}return o}function i(o){const a=o.target;a.removeEventListener("dispose",i);const A=e.get(a);A!==void 0&&(e.delete(a),A.dispose())}function s(){e=new WeakMap}return{get:n,dispose:s}}class _p extends pV{constructor(e=-1,t=1,n=1,i=-1,s=.1,o=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=n,this.bottom=i,this.near=s,this.far=o,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,n,i,s,o){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=i,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,i=(this.top+this.bottom)/2;let s=n-e,o=n+e,a=i+t,A=i-t;if(this.view!==null&&this.view.enabled){const l=(this.right-this.left)/this.view.fullWidth/this.zoom,c=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=l*this.view.offsetX,o=s+l*this.view.width,a-=c*this.view.offsetY,A=a-c*this.view.height}this.projectionMatrix.makeOrthographic(s,o,a,A,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}}const xu=4,a1=[.125,.215,.35,.446,.526,.582],bl=20,nC=new _p,A1=new Ve;let rC=null;const xl=(1+Math.sqrt(5))/2,Vc=1/xl,l1=[new H(1,1,1),new H(-1,1,1),new H(1,1,-1),new H(-1,1,-1),new H(0,xl,Vc),new H(0,xl,-Vc),new H(Vc,0,xl),new H(-Vc,0,xl),new H(xl,Vc,0),new H(-xl,Vc,0)];class c1{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,n=.1,i=100){rC=this._renderer.getRenderTarget(),this._setSize(256);const s=this._allocateTargets();return s.depthBuffer=!0,this._sceneToCubeUV(e,n,i,s),t>0&&this._blur(s,0,0,t),this._applyPMREM(s),this._cleanup(s),s}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=d1(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=f1(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(rC),e.scissorTest=!1,Qg(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===gf||e.mapping===mf?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),rC=this._renderer.getRenderTarget();const n=t||this._allocateTargets();return this._textureToCubeUV(e,n),this._applyPMREM(n),this._cleanup(n),n}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,n={magFilter:Wr,minFilter:Wr,generateMipmaps:!1,type:Kh,format:ei,encoding:gs,depthBuffer:!1},i=u1(e,t,n);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=u1(e,t,n);const{_lodMax:s}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=AX(s)),this._blurMaterial=lX(s,e,t)}return i}_compileMaterial(e){const t=new bn(this._lodPlanes[0],e);this._renderer.compile(t,nC)}_sceneToCubeUV(e,t,n,i){const a=new Ir(90,1,t,n),A=[1,-1,1,1,1,1],l=[1,1,1,-1,-1,-1],c=this._renderer,u=c.autoClear,f=c.toneMapping;c.getClearColor(A1),c.toneMapping=Qa,c.autoClear=!1;const d=new Io({name:"PMREM.Background",side:oi,depthWrite:!1,depthTest:!1}),p=new bn(new Sp,d);let h=!1;const m=e.background;m?m.isColor&&(d.color.copy(m),e.background=null,h=!0):(d.color.copy(A1),h=!0);for(let g=0;g<6;g++){const B=g%3;B===0?(a.up.set(0,A[g],0),a.lookAt(l[g],0,0)):B===1?(a.up.set(0,0,A[g]),a.lookAt(0,l[g],0)):(a.up.set(0,A[g],0),a.lookAt(0,0,l[g]));const v=this._cubeSize;Qg(i,B*v,g>2?v:0,v,v),c.setRenderTarget(i),h&&c.render(p,a),c.render(e,a)}p.geometry.dispose(),p.material.dispose(),c.toneMapping=f,c.autoClear=u,e.background=m}_textureToCubeUV(e,t){const n=this._renderer,i=e.mapping===gf||e.mapping===mf;i?(this._cubemapMaterial===null&&(this._cubemapMaterial=d1()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=f1());const s=i?this._cubemapMaterial:this._equirectMaterial,o=new bn(this._lodPlanes[0],s),a=s.uniforms;a.envMap.value=e;const A=this._cubeSize;Qg(t,0,0,3*A,2*A),n.setRenderTarget(t),n.render(o,nC)}_applyPMREM(e){const t=this._renderer,n=t.autoClear;t.autoClear=!1;for(let i=1;i<this._lodPlanes.length;i++){const s=Math.sqrt(this._sigmas[i]*this._sigmas[i]-this._sigmas[i-1]*this._sigmas[i-1]),o=l1[(i-1)%l1.length];this._blur(e,i-1,i,s,o)}t.autoClear=n}_blur(e,t,n,i,s){const o=this._pingPongRenderTarget;this._halfBlur(e,o,t,n,i,"latitudinal",s),this._halfBlur(o,e,n,n,i,"longitudinal",s)}_halfBlur(e,t,n,i,s,o,a){const A=this._renderer,l=this._blurMaterial;o!=="latitudinal"&&o!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const c=3,u=new bn(this._lodPlanes[i],l),f=l.uniforms,d=this._sizeLods[n]-1,p=isFinite(s)?Math.PI/(2*d):2*Math.PI/(2*bl-1),h=s/p,m=isFinite(s)?1+Math.floor(c*h):bl;m>bl&&console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${m} samples when the maximum is set to ${bl}`);const g=[];let B=0;for(let E=0;E<bl;++E){const U=E/h,S=Math.exp(-U*U/2);g.push(S),E===0?B+=S:E<m&&(B+=2*S)}for(let E=0;E<g.length;E++)g[E]=g[E]/B;f.envMap.value=e.texture,f.samples.value=m,f.weights.value=g,f.latitudinal.value=o==="latitudinal",a&&(f.poleAxis.value=a);const{_lodMax:v}=this;f.dTheta.value=p,f.mipInt.value=v-n;const w=this._sizeLods[i],C=3*w*(i>v-xu?i-v+xu:0),I=4*(this._cubeSize-w);Qg(t,C,I,3*w,2*w),A.setRenderTarget(t),A.render(u,nC)}}function AX(r){const e=[],t=[],n=[];let i=r;const s=r-xu+1+a1.length;for(let o=0;o<s;o++){const a=Math.pow(2,i);t.push(a);let A=1/a;o>r-xu?A=a1[o-r+xu-1]:o===0&&(A=0),n.push(A);const l=1/(a-2),c=-l,u=1+l,f=[c,c,u,c,u,u,c,c,u,u,c,u],d=6,p=6,h=3,m=2,g=1,B=new Float32Array(h*p*d),v=new Float32Array(m*p*d),w=new Float32Array(g*p*d);for(let I=0;I<d;I++){const E=I%3*2/3-1,U=I>2?0:-1,S=[E,U,0,E+2/3,U,0,E+2/3,U+1,0,E,U,0,E+2/3,U+1,0,E,U+1,0];B.set(S,h*p*I),v.set(f,m*p*I);const V=[I,I,I,I,I,I];w.set(V,g*p*I)}const C=new Xt;C.setAttribute("position",new pt(B,h)),C.setAttribute("uv",new pt(v,m)),C.setAttribute("faceIndex",new pt(w,g)),e.push(C),i>xu&&i--}return{lodPlanes:e,sizeLods:t,sigmas:n}}function u1(r,e,t){const n=new KA(r,e,t);return n.texture.mapping=av,n.texture.name="PMREM.cubeUv",n.scissorTest=!0,n}function Qg(r,e,t,n,i){r.viewport.set(e,t,n,i),r.scissor.set(e,t,n,i)}function lX(r,e,t){const n=new Float32Array(bl),i=new H(0,1,0);return new Ti({name:"SphericalGaussianBlur",defines:{n:bl,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${r}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:n},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:i}},vertexShader:wx(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:kA,depthTest:!1,depthWrite:!1})}function f1(){return new Ti({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:wx(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:kA,depthTest:!1,depthWrite:!1})}function d1(){return new Ti({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:wx(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:kA,depthTest:!1,depthWrite:!1})}function wx(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function cX(r){let e=new WeakMap,t=null;function n(a){if(a&&a.isTexture){const A=a.mapping,l=A===W0||A===HF,c=A===gf||A===mf;if(l||c)if(a.isRenderTargetTexture&&a.needsPMREMUpdate===!0){a.needsPMREMUpdate=!1;let u=e.get(a);return t===null&&(t=new c1(r)),u=l?t.fromEquirectangular(a,u):t.fromCubemap(a,u),e.set(a,u),u.texture}else{if(e.has(a))return e.get(a).texture;{const u=a.image;if(l&&u&&u.height>0||c&&u&&i(u)){t===null&&(t=new c1(r));const f=l?t.fromEquirectangular(a):t.fromCubemap(a);return e.set(a,f),a.addEventListener("dispose",s),f.texture}else return null}}}return a}function i(a){let A=0;const l=6;for(let c=0;c<l;c++)a[c]!==void 0&&A++;return A===l}function s(a){const A=a.target;A.removeEventListener("dispose",s);const l=e.get(A);l!==void 0&&(e.delete(A),l.dispose())}function o(){e=new WeakMap,t!==null&&(t.dispose(),t=null)}return{get:n,dispose:o}}function uX(r){const e={};function t(n){if(e[n]!==void 0)return e[n];let i;switch(n){case"WEBGL_depth_texture":i=r.getExtension("WEBGL_depth_texture")||r.getExtension("MOZ_WEBGL_depth_texture")||r.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":i=r.getExtension("EXT_texture_filter_anisotropic")||r.getExtension("MOZ_EXT_texture_filter_anisotropic")||r.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":i=r.getExtension("WEBGL_compressed_texture_s3tc")||r.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||r.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":i=r.getExtension("WEBGL_compressed_texture_pvrtc")||r.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:i=r.getExtension(n)}return e[n]=i,i}return{has:function(n){return t(n)!==null},init:function(n){n.isWebGL2?t("EXT_color_buffer_float"):(t("WEBGL_depth_texture"),t("OES_texture_float"),t("OES_texture_half_float"),t("OES_texture_half_float_linear"),t("OES_standard_derivatives"),t("OES_element_index_uint"),t("OES_vertex_array_object"),t("ANGLE_instanced_arrays")),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture")},get:function(n){const i=t(n);return i===null&&console.warn("THREE.WebGLRenderer: "+n+" extension not supported."),i}}}function fX(r,e,t,n){const i={},s=new WeakMap;function o(u){const f=u.target;f.index!==null&&e.remove(f.index);for(const p in f.attributes)e.remove(f.attributes[p]);f.removeEventListener("dispose",o),delete i[f.id];const d=s.get(f);d&&(e.remove(d),s.delete(f)),n.releaseStatesOfGeometry(f),f.isInstancedBufferGeometry===!0&&delete f._maxInstanceCount,t.memory.geometries--}function a(u,f){return i[f.id]===!0||(f.addEventListener("dispose",o),i[f.id]=!0,t.memory.geometries++),f}function A(u){const f=u.attributes;for(const p in f)e.update(f[p],34962);const d=u.morphAttributes;for(const p in d){const h=d[p];for(let m=0,g=h.length;m<g;m++)e.update(h[m],34962)}}function l(u){const f=[],d=u.index,p=u.attributes.position;let h=0;if(d!==null){const B=d.array;h=d.version;for(let v=0,w=B.length;v<w;v+=3){const C=B[v+0],I=B[v+1],E=B[v+2];f.push(C,I,I,E,E,C)}}else{const B=p.array;h=p.version;for(let v=0,w=B.length/3-1;v<w;v+=3){const C=v+0,I=v+1,E=v+2;f.push(C,I,I,E,E,C)}}const m=new(AV(f)?fV:yx)(f,1);m.version=h;const g=s.get(u);g&&e.remove(g),s.set(u,m)}function c(u){const f=s.get(u);if(f){const d=u.index;d!==null&&f.version<d.version&&l(u)}else l(u);return s.get(u)}return{get:a,update:A,getWireframeAttribute:c}}function dX(r,e,t,n){const i=n.isWebGL2;let s;function o(f){s=f}let a,A;function l(f){a=f.type,A=f.bytesPerElement}function c(f,d){r.drawElements(s,d,a,f*A),t.update(d,s,1)}function u(f,d,p){if(p===0)return;let h,m;if(i)h=r,m="drawElementsInstanced";else if(h=e.get("ANGLE_instanced_arrays"),m="drawElementsInstancedANGLE",h===null){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}h[m](s,d,a,f*A,p),t.update(d,s,p)}this.setMode=o,this.setIndex=l,this.render=c,this.renderInstances=u}function hX(r){const e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function n(s,o,a){switch(t.calls++,o){case 4:t.triangles+=a*(s/3);break;case 1:t.lines+=a*(s/2);break;case 3:t.lines+=a*(s-1);break;case 2:t.lines+=a*s;break;case 0:t.points+=a*s;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",o);break}}function i(){t.frame++,t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:e,render:t,programs:null,autoReset:!0,reset:i,update:n}}function pX(r,e){return r[0]-e[0]}function gX(r,e){return Math.abs(e[1])-Math.abs(r[1])}function mX(r,e,t){const n={},i=new Float32Array(8),s=new WeakMap,o=new bt,a=[];for(let l=0;l<8;l++)a[l]=[l,0];function A(l,c,u,f){const d=l.morphTargetInfluences;if(e.isWebGL2===!0){const p=c.morphAttributes.position||c.morphAttributes.normal||c.morphAttributes.color,h=p!==void 0?p.length:0;let m=s.get(c);if(m===void 0||m.count!==h){let Q=function(){R.dispose(),s.delete(c),c.removeEventListener("dispose",Q)};m!==void 0&&m.texture.dispose();const v=c.morphAttributes.position!==void 0,w=c.morphAttributes.normal!==void 0,C=c.morphAttributes.color!==void 0,I=c.morphAttributes.position||[],E=c.morphAttributes.normal||[],U=c.morphAttributes.color||[];let S=0;v===!0&&(S=1),w===!0&&(S=2),C===!0&&(S=3);let V=c.attributes.position.count*S,J=1;V>e.maxTextureSize&&(J=Math.ceil(V/e.maxTextureSize),V=e.maxTextureSize);const z=new Float32Array(V*J*4*h),R=new uV(z,V,J,h);R.type=CA,R.needsUpdate=!0;const y=S*4;for(let _=0;_<h;_++){const L=I[_],T=E[_],Z=U[_],G=V*J*4*_;for(let D=0;D<L.count;D++){const x=D*y;v===!0&&(o.fromBufferAttribute(L,D),z[G+x+0]=o.x,z[G+x+1]=o.y,z[G+x+2]=o.z,z[G+x+3]=0),w===!0&&(o.fromBufferAttribute(T,D),z[G+x+4]=o.x,z[G+x+5]=o.y,z[G+x+6]=o.z,z[G+x+7]=0),C===!0&&(o.fromBufferAttribute(Z,D),z[G+x+8]=o.x,z[G+x+9]=o.y,z[G+x+10]=o.z,z[G+x+11]=Z.itemSize===4?o.w:1)}}m={count:h,texture:R,size:new Je(V,J)},s.set(c,m),c.addEventListener("dispose",Q)}let g=0;for(let v=0;v<d.length;v++)g+=d[v];const B=c.morphTargetsRelative?1:1-g;f.getUniforms().setValue(r,"morphTargetBaseInfluence",B),f.getUniforms().setValue(r,"morphTargetInfluences",d),f.getUniforms().setValue(r,"morphTargetsTexture",m.texture,t),f.getUniforms().setValue(r,"morphTargetsTextureSize",m.size)}else{const p=d===void 0?0:d.length;let h=n[c.id];if(h===void 0||h.length!==p){h=[];for(let w=0;w<p;w++)h[w]=[w,0];n[c.id]=h}for(let w=0;w<p;w++){const C=h[w];C[0]=w,C[1]=d[w]}h.sort(gX);for(let w=0;w<8;w++)w<p&&h[w][1]?(a[w][0]=h[w][0],a[w][1]=h[w][1]):(a[w][0]=Number.MAX_SAFE_INTEGER,a[w][1]=0);a.sort(pX);const m=c.morphAttributes.position,g=c.morphAttributes.normal;let B=0;for(let w=0;w<8;w++){const C=a[w],I=C[0],E=C[1];I!==Number.MAX_SAFE_INTEGER&&E?(m&&c.getAttribute("morphTarget"+w)!==m[I]&&c.setAttribute("morphTarget"+w,m[I]),g&&c.getAttribute("morphNormal"+w)!==g[I]&&c.setAttribute("morphNormal"+w,g[I]),i[w]=E,B+=E):(m&&c.hasAttribute("morphTarget"+w)===!0&&c.deleteAttribute("morphTarget"+w),g&&c.hasAttribute("morphNormal"+w)===!0&&c.deleteAttribute("morphNormal"+w),i[w]=0)}const v=c.morphTargetsRelative?1:1-B;f.getUniforms().setValue(r,"morphTargetBaseInfluence",v),f.getUniforms().setValue(r,"morphTargetInfluences",i)}}return{update:A}}function BX(r,e,t,n){let i=new WeakMap;function s(A){const l=n.render.frame,c=A.geometry,u=e.get(A,c);return i.get(u)!==l&&(e.update(u),i.set(u,l)),A.isInstancedMesh&&(A.hasEventListener("dispose",a)===!1&&A.addEventListener("dispose",a),t.update(A.instanceMatrix,34962),A.instanceColor!==null&&t.update(A.instanceColor,34962)),u}function o(){i=new WeakMap}function a(A){const l=A.target;l.removeEventListener("dispose",a),t.remove(l.instanceMatrix),l.instanceColor!==null&&t.remove(l.instanceColor)}return{update:s,dispose:o}}const BV=new En,vV=new uV,yV=new s4,CV=new gV,h1=[],p1=[],g1=new Float32Array(16),m1=new Float32Array(9),B1=new Float32Array(4);function Zf(r,e,t){const n=r[0];if(n<=0||n>0)return r;const i=e*t;let s=h1[i];if(s===void 0&&(s=new Float32Array(i),h1[i]=s),e!==0){n.toArray(s,0);for(let o=1,a=0;o!==e;++o)a+=t,r[o].toArray(s,a)}return s}function jn(r,e){if(r.length!==e.length)return!1;for(let t=0,n=r.length;t<n;t++)if(r[t]!==e[t])return!1;return!0}function qn(r,e){for(let t=0,n=e.length;t<n;t++)r[t]=e[t]}function Av(r,e){let t=p1[e];t===void 0&&(t=new Int32Array(e),p1[e]=t);for(let n=0;n!==e;++n)t[n]=r.allocateTextureUnit();return t}function vX(r,e){const t=this.cache;t[0]!==e&&(r.uniform1f(this.addr,e),t[0]=e)}function yX(r,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(r.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(jn(t,e))return;r.uniform2fv(this.addr,e),qn(t,e)}}function CX(r,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(r.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(r.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(jn(t,e))return;r.uniform3fv(this.addr,e),qn(t,e)}}function wX(r,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(r.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(jn(t,e))return;r.uniform4fv(this.addr,e),qn(t,e)}}function FX(r,e){const t=this.cache,n=e.elements;if(n===void 0){if(jn(t,e))return;r.uniformMatrix2fv(this.addr,!1,e),qn(t,e)}else{if(jn(t,n))return;B1.set(n),r.uniformMatrix2fv(this.addr,!1,B1),qn(t,n)}}function IX(r,e){const t=this.cache,n=e.elements;if(n===void 0){if(jn(t,e))return;r.uniformMatrix3fv(this.addr,!1,e),qn(t,e)}else{if(jn(t,n))return;m1.set(n),r.uniformMatrix3fv(this.addr,!1,m1),qn(t,n)}}function UX(r,e){const t=this.cache,n=e.elements;if(n===void 0){if(jn(t,e))return;r.uniformMatrix4fv(this.addr,!1,e),qn(t,e)}else{if(jn(t,n))return;g1.set(n),r.uniformMatrix4fv(this.addr,!1,g1),qn(t,n)}}function xX(r,e){const t=this.cache;t[0]!==e&&(r.uniform1i(this.addr,e),t[0]=e)}function QX(r,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(r.uniform2i(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(jn(t,e))return;r.uniform2iv(this.addr,e),qn(t,e)}}function bX(r,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(r.uniform3i(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(jn(t,e))return;r.uniform3iv(this.addr,e),qn(t,e)}}function EX(r,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(r.uniform4i(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(jn(t,e))return;r.uniform4iv(this.addr,e),qn(t,e)}}function SX(r,e){const t=this.cache;t[0]!==e&&(r.uniform1ui(this.addr,e),t[0]=e)}function _X(r,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(r.uniform2ui(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(jn(t,e))return;r.uniform2uiv(this.addr,e),qn(t,e)}}function RX(r,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(r.uniform3ui(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(jn(t,e))return;r.uniform3uiv(this.addr,e),qn(t,e)}}function MX(r,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(r.uniform4ui(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(jn(t,e))return;r.uniform4uiv(this.addr,e),qn(t,e)}}function TX(r,e,t){const n=this.cache,i=t.allocateTextureUnit();n[0]!==i&&(r.uniform1i(this.addr,i),n[0]=i),t.setTexture2D(e||BV,i)}function NX(r,e,t){const n=this.cache,i=t.allocateTextureUnit();n[0]!==i&&(r.uniform1i(this.addr,i),n[0]=i),t.setTexture3D(e||yV,i)}function VX(r,e,t){const n=this.cache,i=t.allocateTextureUnit();n[0]!==i&&(r.uniform1i(this.addr,i),n[0]=i),t.setTextureCube(e||CV,i)}function DX(r,e,t){const n=this.cache,i=t.allocateTextureUnit();n[0]!==i&&(r.uniform1i(this.addr,i),n[0]=i),t.setTexture2DArray(e||vV,i)}function kX(r){switch(r){case 5126:return vX;case 35664:return yX;case 35665:return CX;case 35666:return wX;case 35674:return FX;case 35675:return IX;case 35676:return UX;case 5124:case 35670:return xX;case 35667:case 35671:return QX;case 35668:case 35672:return bX;case 35669:case 35673:return EX;case 5125:return SX;case 36294:return _X;case 36295:return RX;case 36296:return MX;case 35678:case 36198:case 36298:case 36306:case 35682:return TX;case 35679:case 36299:case 36307:return NX;case 35680:case 36300:case 36308:case 36293:return VX;case 36289:case 36303:case 36311:case 36292:return DX}}function LX(r,e){r.uniform1fv(this.addr,e)}function WX(r,e){const t=Zf(e,this.size,2);r.uniform2fv(this.addr,t)}function ZX(r,e){const t=Zf(e,this.size,3);r.uniform3fv(this.addr,t)}function PX(r,e){const t=Zf(e,this.size,4);r.uniform4fv(this.addr,t)}function JX(r,e){const t=Zf(e,this.size,4);r.uniformMatrix2fv(this.addr,!1,t)}function GX(r,e){const t=Zf(e,this.size,9);r.uniformMatrix3fv(this.addr,!1,t)}function OX(r,e){const t=Zf(e,this.size,16);r.uniformMatrix4fv(this.addr,!1,t)}function HX(r,e){r.uniform1iv(this.addr,e)}function zX(r,e){r.uniform2iv(this.addr,e)}function XX(r,e){r.uniform3iv(this.addr,e)}function YX(r,e){r.uniform4iv(this.addr,e)}function KX(r,e){r.uniform1uiv(this.addr,e)}function jX(r,e){r.uniform2uiv(this.addr,e)}function qX(r,e){r.uniform3uiv(this.addr,e)}function $X(r,e){r.uniform4uiv(this.addr,e)}function eY(r,e,t){const n=this.cache,i=e.length,s=Av(t,i);jn(n,s)||(r.uniform1iv(this.addr,s),qn(n,s));for(let o=0;o!==i;++o)t.setTexture2D(e[o]||BV,s[o])}function tY(r,e,t){const n=this.cache,i=e.length,s=Av(t,i);jn(n,s)||(r.uniform1iv(this.addr,s),qn(n,s));for(let o=0;o!==i;++o)t.setTexture3D(e[o]||yV,s[o])}function nY(r,e,t){const n=this.cache,i=e.length,s=Av(t,i);jn(n,s)||(r.uniform1iv(this.addr,s),qn(n,s));for(let o=0;o!==i;++o)t.setTextureCube(e[o]||CV,s[o])}function rY(r,e,t){const n=this.cache,i=e.length,s=Av(t,i);jn(n,s)||(r.uniform1iv(this.addr,s),qn(n,s));for(let o=0;o!==i;++o)t.setTexture2DArray(e[o]||vV,s[o])}function iY(r){switch(r){case 5126:return LX;case 35664:return WX;case 35665:return ZX;case 35666:return PX;case 35674:return JX;case 35675:return GX;case 35676:return OX;case 5124:case 35670:return HX;case 35667:case 35671:return zX;case 35668:case 35672:return XX;case 35669:case 35673:return YX;case 5125:return KX;case 36294:return jX;case 36295:return qX;case 36296:return $X;case 35678:case 36198:case 36298:case 36306:case 35682:return eY;case 35679:case 36299:case 36307:return tY;case 35680:case 36300:case 36308:case 36293:return nY;case 36289:case 36303:case 36311:case 36292:return rY}}class sY{constructor(e,t,n){this.id=e,this.addr=n,this.cache=[],this.setValue=kX(t.type)}}class oY{constructor(e,t,n){this.id=e,this.addr=n,this.cache=[],this.size=t.size,this.setValue=iY(t.type)}}class aY{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,n){const i=this.seq;for(let s=0,o=i.length;s!==o;++s){const a=i[s];a.setValue(e,t[a.id],n)}}}const iC=/(\w+)(\])?(\[|\.)?/g;function v1(r,e){r.seq.push(e),r.map[e.id]=e}function AY(r,e,t){const n=r.name,i=n.length;for(iC.lastIndex=0;;){const s=iC.exec(n),o=iC.lastIndex;let a=s[1];const A=s[2]==="]",l=s[3];if(A&&(a=a|0),l===void 0||l==="["&&o+2===i){v1(t,l===void 0?new sY(a,r,e):new oY(a,r,e));break}else{let u=t.map[a];u===void 0&&(u=new aY(a),v1(t,u)),t=u}}}class Gm{constructor(e,t){this.seq=[],this.map={};const n=e.getProgramParameter(t,35718);for(let i=0;i<n;++i){const s=e.getActiveUniform(t,i),o=e.getUniformLocation(t,s.name);AY(s,o,this)}}setValue(e,t,n,i){const s=this.map[t];s!==void 0&&s.setValue(e,n,i)}setOptional(e,t,n){const i=t[n];i!==void 0&&this.setValue(e,n,i)}static upload(e,t,n,i){for(let s=0,o=t.length;s!==o;++s){const a=t[s],A=n[a.id];A.needsUpdate!==!1&&a.setValue(e,A.value,i)}}static seqWithValue(e,t){const n=[];for(let i=0,s=e.length;i!==s;++i){const o=e[i];o.id in t&&n.push(o)}return n}}function y1(r,e,t){const n=r.createShader(e);return r.shaderSource(n,t),r.compileShader(n),n}let lY=0;function cY(r,e){const t=r.split(`
`),n=[],i=Math.max(e-6,0),s=Math.min(e+6,t.length);for(let o=i;o<s;o++){const a=o+1;n.push(`${a===e?">":" "} ${a}: ${t[o]}`)}return n.join(`
`)}function uY(r){switch(r){case gs:return["Linear","( value )"];case lt:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",r),["Linear","( value )"]}}function C1(r,e,t){const n=r.getShaderParameter(e,35713),i=r.getShaderInfoLog(e).trim();if(n&&i==="")return"";const s=/ERROR: 0:(\d+)/.exec(i);if(s){const o=parseInt(s[1]);return t.toUpperCase()+`

`+i+`

`+cY(r.getShaderSource(e),o)}else return i}function fY(r,e){const t=uY(e);return"vec4 "+r+"( vec4 value ) { return LinearTo"+t[0]+t[1]+"; }"}function dY(r,e){let t;switch(e){case pH:t="Linear";break;case gH:t="Reinhard";break;case mH:t="OptimizedCineon";break;case BH:t="ACESFilmic";break;case vH:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+r+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}function hY(r){return[r.extensionDerivatives||r.envMapCubeUVHeight||r.bumpMap||r.tangentSpaceNormalMap||r.clearcoatNormalMap||r.flatShading||r.shaderID==="physical"?"#extension GL_OES_standard_derivatives : enable":"",(r.extensionFragDepth||r.logarithmicDepthBuffer)&&r.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",r.extensionDrawBuffers&&r.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(r.extensionShaderTextureLOD||r.envMap||r.transmission)&&r.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(Gd).join(`
`)}function pY(r){const e=[];for(const t in r){const n=r[t];n!==!1&&e.push("#define "+t+" "+n)}return e.join(`
`)}function gY(r,e){const t={},n=r.getProgramParameter(e,35721);for(let i=0;i<n;i++){const s=r.getActiveAttrib(e,i),o=s.name;let a=1;s.type===35674&&(a=2),s.type===35675&&(a=3),s.type===35676&&(a=4),t[o]={type:s.type,location:r.getAttribLocation(e,o),locationSize:a}}return t}function Gd(r){return r!==""}function w1(r,e){const t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return r.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function F1(r,e){return r.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const mY=/^[ \t]*#include +<([\w\d./]+)>/gm;function KF(r){return r.replace(mY,BY)}function BY(r,e){const t=ut[e];if(t===void 0)throw new Error("Can not resolve #include <"+e+">");return KF(t)}const vY=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function I1(r){return r.replace(vY,yY)}function yY(r,e,t,n){let i="";for(let s=parseInt(e);s<parseInt(t);s++)i+=n.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return i}function U1(r){let e="precision "+r.precision+` float;
precision `+r.precision+" int;";return r.precision==="highp"?e+=`
#define HIGH_PRECISION`:r.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:r.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function CY(r){let e="SHADOWMAP_TYPE_BASIC";return r.shadowMapType===tV?e="SHADOWMAP_TYPE_PCF":r.shadowMapType===zO?e="SHADOWMAP_TYPE_PCF_SOFT":r.shadowMapType===Jd&&(e="SHADOWMAP_TYPE_VSM"),e}function wY(r){let e="ENVMAP_TYPE_CUBE";if(r.envMap)switch(r.envMapMode){case gf:case mf:e="ENVMAP_TYPE_CUBE";break;case av:e="ENVMAP_TYPE_CUBE_UV";break}return e}function FY(r){let e="ENVMAP_MODE_REFLECTION";if(r.envMap)switch(r.envMapMode){case mf:e="ENVMAP_MODE_REFRACTION";break}return e}function IY(r){let e="ENVMAP_BLENDING_NONE";if(r.envMap)switch(r.combine){case ov:e="ENVMAP_BLENDING_MULTIPLY";break;case dH:e="ENVMAP_BLENDING_MIX";break;case hH:e="ENVMAP_BLENDING_ADD";break}return e}function UY(r){const e=r.envMapCubeUVHeight;if(e===null)return null;const t=Math.log2(e)-2,n=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),7*16)),texelHeight:n,maxMip:t}}function xY(r,e,t,n){const i=r.getContext(),s=t.defines;let o=t.vertexShader,a=t.fragmentShader;const A=CY(t),l=wY(t),c=FY(t),u=IY(t),f=UY(t),d=t.isWebGL2?"":hY(t),p=pY(s),h=i.createProgram();let m,g,B=t.glslVersion?"#version "+t.glslVersion+`
`:"";t.isRawShaderMaterial?(m=[p].filter(Gd).join(`
`),m.length>0&&(m+=`
`),g=[d,p].filter(Gd).join(`
`),g.length>0&&(g+=`
`)):(m=[U1(t),"#define SHADER_NAME "+t.shaderName,p,t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.supportsVertexTextures?"#define VERTEX_TEXTURES":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+c:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMap&&t.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",t.normalMap&&t.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.displacementMap&&t.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",t.specularColorMap?"#define USE_SPECULARCOLORMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEENCOLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",t.vertexTangents?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUvs?"#define USE_UV":"",t.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&t.flatShading===!1?"#define USE_MORPHNORMALS":"",t.morphColors&&t.isWebGL2?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+A:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(Gd).join(`
`),g=[d,U1(t),"#define SHADER_NAME "+t.shaderName,p,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+l:"",t.envMap?"#define "+c:"",t.envMap?"#define "+u:"",f?"#define CUBEUV_TEXEL_WIDTH "+f.texelWidth:"",f?"#define CUBEUV_TEXEL_HEIGHT "+f.texelHeight:"",f?"#define CUBEUV_MAX_MIP "+f.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMap&&t.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",t.normalMap&&t.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",t.specularColorMap?"#define USE_SPECULARCOLORMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEENCOLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.vertexTangents?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUvs?"#define USE_UV":"",t.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+A:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==Qa?"#define TONE_MAPPING":"",t.toneMapping!==Qa?ut.tonemapping_pars_fragment:"",t.toneMapping!==Qa?dY("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",ut.encodings_pars_fragment,fY("linearToOutputTexel",t.outputEncoding),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"",`
`].filter(Gd).join(`
`)),o=KF(o),o=w1(o,t),o=F1(o,t),a=KF(a),a=w1(a,t),a=F1(a,t),o=I1(o),a=I1(a),t.isWebGL2&&t.isRawShaderMaterial!==!0&&(B=`#version 300 es
`,m=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+m,g=["#define varying in",t.glslVersion===YE?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===YE?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+g);const v=B+m+o,w=B+g+a,C=y1(i,35633,v),I=y1(i,35632,w);if(i.attachShader(h,C),i.attachShader(h,I),t.index0AttributeName!==void 0?i.bindAttribLocation(h,0,t.index0AttributeName):t.morphTargets===!0&&i.bindAttribLocation(h,0,"position"),i.linkProgram(h),r.debug.checkShaderErrors){const S=i.getProgramInfoLog(h).trim(),V=i.getShaderInfoLog(C).trim(),J=i.getShaderInfoLog(I).trim();let z=!0,R=!0;if(i.getProgramParameter(h,35714)===!1){z=!1;const y=C1(i,C,"vertex"),Q=C1(i,I,"fragment");console.error("THREE.WebGLProgram: Shader Error "+i.getError()+" - VALIDATE_STATUS "+i.getProgramParameter(h,35715)+`

Program Info Log: `+S+`
`+y+`
`+Q)}else S!==""?console.warn("THREE.WebGLProgram: Program Info Log:",S):(V===""||J==="")&&(R=!1);R&&(this.diagnostics={runnable:z,programLog:S,vertexShader:{log:V,prefix:m},fragmentShader:{log:J,prefix:g}})}i.deleteShader(C),i.deleteShader(I);let E;this.getUniforms=function(){return E===void 0&&(E=new Gm(i,h)),E};let U;return this.getAttributes=function(){return U===void 0&&(U=gY(i,h)),U},this.destroy=function(){n.releaseStatesOfProgram(this),i.deleteProgram(h),this.program=void 0},this.name=t.shaderName,this.id=lY++,this.cacheKey=e,this.usedTimes=1,this.program=h,this.vertexShader=C,this.fragmentShader=I,this}let QY=0;class bY{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,n=e.fragmentShader,i=this._getShaderStage(t),s=this._getShaderStage(n),o=this._getShaderCacheForMaterial(e);return o.has(i)===!1&&(o.add(i),i.usedTimes++),o.has(s)===!1&&(o.add(s),s.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const n of t)n.usedTimes--,n.usedTimes===0&&this.shaderCache.delete(n.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let n=t.get(e);return n===void 0&&(n=new Set,t.set(e,n)),n}_getShaderStage(e){const t=this.shaderCache;let n=t.get(e);return n===void 0&&(n=new EY(e),t.set(e,n)),n}}class EY{constructor(e){this.id=QY++,this.code=e,this.usedTimes=0}}function SY(r,e,t,n,i,s,o){const a=new vx,A=new bY,l=[],c=i.isWebGL2,u=i.logarithmicDepthBuffer,f=i.vertexTextures;let d=i.precision;const p={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function h(U,S,V,J,z){const R=J.fog,y=z.geometry,Q=U.isMeshStandardMaterial?J.environment:null,_=(U.isMeshStandardMaterial?t:e).get(U.envMap||Q),L=_&&_.mapping===av?_.image.height:null,T=p[U.type];U.precision!==null&&(d=i.getMaxPrecision(U.precision),d!==U.precision&&console.warn("THREE.WebGLProgram.getParameters:",U.precision,"not supported, using",d,"instead."));const Z=y.morphAttributes.position||y.morphAttributes.normal||y.morphAttributes.color,G=Z!==void 0?Z.length:0;let D=0;y.morphAttributes.position!==void 0&&(D=1),y.morphAttributes.normal!==void 0&&(D=2),y.morphAttributes.color!==void 0&&(D=3);let x,P,oe,M;if(T){const se=ho[T];x=se.vertexShader,P=se.fragmentShader}else x=U.vertexShader,P=U.fragmentShader,A.update(U),oe=A.getVertexShaderID(U),M=A.getFragmentShaderID(U);const k=r.getRenderTarget(),q=U.alphaTest>0,ee=U.clearcoat>0,X=U.iridescence>0;return{isWebGL2:c,shaderID:T,shaderName:U.type,vertexShader:x,fragmentShader:P,defines:U.defines,customVertexShaderID:oe,customFragmentShaderID:M,isRawShaderMaterial:U.isRawShaderMaterial===!0,glslVersion:U.glslVersion,precision:d,instancing:z.isInstancedMesh===!0,instancingColor:z.isInstancedMesh===!0&&z.instanceColor!==null,supportsVertexTextures:f,outputEncoding:k===null?r.outputEncoding:k.isXRRenderTarget===!0?k.texture.encoding:gs,map:!!U.map,matcap:!!U.matcap,envMap:!!_,envMapMode:_&&_.mapping,envMapCubeUVHeight:L,lightMap:!!U.lightMap,aoMap:!!U.aoMap,emissiveMap:!!U.emissiveMap,bumpMap:!!U.bumpMap,normalMap:!!U.normalMap,objectSpaceNormalMap:U.normalMapType===PH,tangentSpaceNormalMap:U.normalMapType===bp,decodeVideoTexture:!!U.map&&U.map.isVideoTexture===!0&&U.map.encoding===lt,clearcoat:ee,clearcoatMap:ee&&!!U.clearcoatMap,clearcoatRoughnessMap:ee&&!!U.clearcoatRoughnessMap,clearcoatNormalMap:ee&&!!U.clearcoatNormalMap,iridescence:X,iridescenceMap:X&&!!U.iridescenceMap,iridescenceThicknessMap:X&&!!U.iridescenceThicknessMap,displacementMap:!!U.displacementMap,roughnessMap:!!U.roughnessMap,metalnessMap:!!U.metalnessMap,specularMap:!!U.specularMap,specularIntensityMap:!!U.specularIntensityMap,specularColorMap:!!U.specularColorMap,opaque:U.transparent===!1&&U.blending===Pu,alphaMap:!!U.alphaMap,alphaTest:q,gradientMap:!!U.gradientMap,sheen:U.sheen>0,sheenColorMap:!!U.sheenColorMap,sheenRoughnessMap:!!U.sheenRoughnessMap,transmission:U.transmission>0,transmissionMap:!!U.transmissionMap,thicknessMap:!!U.thicknessMap,combine:U.combine,vertexTangents:!!U.normalMap&&!!y.attributes.tangent,vertexColors:U.vertexColors,vertexAlphas:U.vertexColors===!0&&!!y.attributes.color&&y.attributes.color.itemSize===4,vertexUvs:!!U.map||!!U.bumpMap||!!U.normalMap||!!U.specularMap||!!U.alphaMap||!!U.emissiveMap||!!U.roughnessMap||!!U.metalnessMap||!!U.clearcoatMap||!!U.clearcoatRoughnessMap||!!U.clearcoatNormalMap||!!U.iridescenceMap||!!U.iridescenceThicknessMap||!!U.displacementMap||!!U.transmissionMap||!!U.thicknessMap||!!U.specularIntensityMap||!!U.specularColorMap||!!U.sheenColorMap||!!U.sheenRoughnessMap,uvsVertexOnly:!(U.map||U.bumpMap||U.normalMap||U.specularMap||U.alphaMap||U.emissiveMap||U.roughnessMap||U.metalnessMap||U.clearcoatNormalMap||U.iridescenceMap||U.iridescenceThicknessMap||U.transmission>0||U.transmissionMap||U.thicknessMap||U.specularIntensityMap||U.specularColorMap||U.sheen>0||U.sheenColorMap||U.sheenRoughnessMap)&&!!U.displacementMap,fog:!!R,useFog:U.fog===!0,fogExp2:R&&R.isFogExp2,flatShading:!!U.flatShading,sizeAttenuation:U.sizeAttenuation,logarithmicDepthBuffer:u,skinning:z.isSkinnedMesh===!0,morphTargets:y.morphAttributes.position!==void 0,morphNormals:y.morphAttributes.normal!==void 0,morphColors:y.morphAttributes.color!==void 0,morphTargetsCount:G,morphTextureStride:D,numDirLights:S.directional.length,numPointLights:S.point.length,numSpotLights:S.spot.length,numSpotLightMaps:S.spotLightMap.length,numRectAreaLights:S.rectArea.length,numHemiLights:S.hemi.length,numDirLightShadows:S.directionalShadowMap.length,numPointLightShadows:S.pointShadowMap.length,numSpotLightShadows:S.spotShadowMap.length,numSpotLightShadowsWithMaps:S.numSpotLightShadowsWithMaps,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:U.dithering,shadowMapEnabled:r.shadowMap.enabled&&V.length>0,shadowMapType:r.shadowMap.type,toneMapping:U.toneMapped?r.toneMapping:Qa,physicallyCorrectLights:r.physicallyCorrectLights,premultipliedAlpha:U.premultipliedAlpha,doubleSided:U.side===Va,flipSided:U.side===oi,useDepthPacking:!!U.depthPacking,depthPacking:U.depthPacking||0,index0AttributeName:U.index0AttributeName,extensionDerivatives:U.extensions&&U.extensions.derivatives,extensionFragDepth:U.extensions&&U.extensions.fragDepth,extensionDrawBuffers:U.extensions&&U.extensions.drawBuffers,extensionShaderTextureLOD:U.extensions&&U.extensions.shaderTextureLOD,rendererExtensionFragDepth:c||n.has("EXT_frag_depth"),rendererExtensionDrawBuffers:c||n.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:c||n.has("EXT_shader_texture_lod"),customProgramCacheKey:U.customProgramCacheKey()}}function m(U){const S=[];if(U.shaderID?S.push(U.shaderID):(S.push(U.customVertexShaderID),S.push(U.customFragmentShaderID)),U.defines!==void 0)for(const V in U.defines)S.push(V),S.push(U.defines[V]);return U.isRawShaderMaterial===!1&&(g(S,U),B(S,U),S.push(r.outputEncoding)),S.push(U.customProgramCacheKey),S.join()}function g(U,S){U.push(S.precision),U.push(S.outputEncoding),U.push(S.envMapMode),U.push(S.envMapCubeUVHeight),U.push(S.combine),U.push(S.vertexUvs),U.push(S.fogExp2),U.push(S.sizeAttenuation),U.push(S.morphTargetsCount),U.push(S.morphAttributeCount),U.push(S.numDirLights),U.push(S.numPointLights),U.push(S.numSpotLights),U.push(S.numSpotLightMaps),U.push(S.numHemiLights),U.push(S.numRectAreaLights),U.push(S.numDirLightShadows),U.push(S.numPointLightShadows),U.push(S.numSpotLightShadows),U.push(S.numSpotLightShadowsWithMaps),U.push(S.shadowMapType),U.push(S.toneMapping),U.push(S.numClippingPlanes),U.push(S.numClipIntersection),U.push(S.depthPacking)}function B(U,S){a.disableAll(),S.isWebGL2&&a.enable(0),S.supportsVertexTextures&&a.enable(1),S.instancing&&a.enable(2),S.instancingColor&&a.enable(3),S.map&&a.enable(4),S.matcap&&a.enable(5),S.envMap&&a.enable(6),S.lightMap&&a.enable(7),S.aoMap&&a.enable(8),S.emissiveMap&&a.enable(9),S.bumpMap&&a.enable(10),S.normalMap&&a.enable(11),S.objectSpaceNormalMap&&a.enable(12),S.tangentSpaceNormalMap&&a.enable(13),S.clearcoat&&a.enable(14),S.clearcoatMap&&a.enable(15),S.clearcoatRoughnessMap&&a.enable(16),S.clearcoatNormalMap&&a.enable(17),S.iridescence&&a.enable(18),S.iridescenceMap&&a.enable(19),S.iridescenceThicknessMap&&a.enable(20),S.displacementMap&&a.enable(21),S.specularMap&&a.enable(22),S.roughnessMap&&a.enable(23),S.metalnessMap&&a.enable(24),S.gradientMap&&a.enable(25),S.alphaMap&&a.enable(26),S.alphaTest&&a.enable(27),S.vertexColors&&a.enable(28),S.vertexAlphas&&a.enable(29),S.vertexUvs&&a.enable(30),S.vertexTangents&&a.enable(31),S.uvsVertexOnly&&a.enable(32),U.push(a.mask),a.disableAll(),S.fog&&a.enable(0),S.useFog&&a.enable(1),S.flatShading&&a.enable(2),S.logarithmicDepthBuffer&&a.enable(3),S.skinning&&a.enable(4),S.morphTargets&&a.enable(5),S.morphNormals&&a.enable(6),S.morphColors&&a.enable(7),S.premultipliedAlpha&&a.enable(8),S.shadowMapEnabled&&a.enable(9),S.physicallyCorrectLights&&a.enable(10),S.doubleSided&&a.enable(11),S.flipSided&&a.enable(12),S.useDepthPacking&&a.enable(13),S.dithering&&a.enable(14),S.specularIntensityMap&&a.enable(15),S.specularColorMap&&a.enable(16),S.transmission&&a.enable(17),S.transmissionMap&&a.enable(18),S.thicknessMap&&a.enable(19),S.sheen&&a.enable(20),S.sheenColorMap&&a.enable(21),S.sheenRoughnessMap&&a.enable(22),S.decodeVideoTexture&&a.enable(23),S.opaque&&a.enable(24),U.push(a.mask)}function v(U){const S=p[U.type];let V;if(S){const J=ho[S];V=hV.clone(J.uniforms)}else V=U.uniforms;return V}function w(U,S){let V;for(let J=0,z=l.length;J<z;J++){const R=l[J];if(R.cacheKey===S){V=R,++V.usedTimes;break}}return V===void 0&&(V=new xY(r,S,U,s),l.push(V)),V}function C(U){if(--U.usedTimes===0){const S=l.indexOf(U);l[S]=l[l.length-1],l.pop(),U.destroy()}}function I(U){A.remove(U)}function E(){A.dispose()}return{getParameters:h,getProgramCacheKey:m,getUniforms:v,acquireProgram:w,releaseProgram:C,releaseShaderCache:I,programs:l,dispose:E}}function _Y(){let r=new WeakMap;function e(s){let o=r.get(s);return o===void 0&&(o={},r.set(s,o)),o}function t(s){r.delete(s)}function n(s,o,a){r.get(s)[o]=a}function i(){r=new WeakMap}return{get:e,remove:t,update:n,dispose:i}}function RY(r,e){return r.groupOrder!==e.groupOrder?r.groupOrder-e.groupOrder:r.renderOrder!==e.renderOrder?r.renderOrder-e.renderOrder:r.material.id!==e.material.id?r.material.id-e.material.id:r.z!==e.z?r.z-e.z:r.id-e.id}function x1(r,e){return r.groupOrder!==e.groupOrder?r.groupOrder-e.groupOrder:r.renderOrder!==e.renderOrder?r.renderOrder-e.renderOrder:r.z!==e.z?e.z-r.z:r.id-e.id}function Q1(){const r=[];let e=0;const t=[],n=[],i=[];function s(){e=0,t.length=0,n.length=0,i.length=0}function o(u,f,d,p,h,m){let g=r[e];return g===void 0?(g={id:u.id,object:u,geometry:f,material:d,groupOrder:p,renderOrder:u.renderOrder,z:h,group:m},r[e]=g):(g.id=u.id,g.object=u,g.geometry=f,g.material=d,g.groupOrder=p,g.renderOrder=u.renderOrder,g.z=h,g.group=m),e++,g}function a(u,f,d,p,h,m){const g=o(u,f,d,p,h,m);d.transmission>0?n.push(g):d.transparent===!0?i.push(g):t.push(g)}function A(u,f,d,p,h,m){const g=o(u,f,d,p,h,m);d.transmission>0?n.unshift(g):d.transparent===!0?i.unshift(g):t.unshift(g)}function l(u,f){t.length>1&&t.sort(u||RY),n.length>1&&n.sort(f||x1),i.length>1&&i.sort(f||x1)}function c(){for(let u=e,f=r.length;u<f;u++){const d=r[u];if(d.id===null)break;d.id=null,d.object=null,d.geometry=null,d.material=null,d.group=null}}return{opaque:t,transmissive:n,transparent:i,init:s,push:a,unshift:A,finish:c,sort:l}}function MY(){let r=new WeakMap;function e(n,i){const s=r.get(n);let o;return s===void 0?(o=new Q1,r.set(n,[o])):i>=s.length?(o=new Q1,s.push(o)):o=s[i],o}function t(){r=new WeakMap}return{get:e,dispose:t}}function TY(){const r={};return{get:function(e){if(r[e.id]!==void 0)return r[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new H,color:new Ve};break;case"SpotLight":t={position:new H,direction:new H,color:new Ve,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new H,color:new Ve,distance:0,decay:0};break;case"HemisphereLight":t={direction:new H,skyColor:new Ve,groundColor:new Ve};break;case"RectAreaLight":t={color:new Ve,position:new H,halfWidth:new H,halfHeight:new H};break}return r[e.id]=t,t}}}function NY(){const r={};return{get:function(e){if(r[e.id]!==void 0)return r[e.id];let t;switch(e.type){case"DirectionalLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Je};break;case"SpotLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Je};break;case"PointLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Je,shadowCameraNear:1,shadowCameraFar:1e3};break}return r[e.id]=t,t}}}let VY=0;function DY(r,e){return(e.castShadow?2:0)-(r.castShadow?2:0)+(e.map?1:0)-(r.map?1:0)}function kY(r,e){const t=new TY,n=NY(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0};for(let c=0;c<9;c++)i.probe.push(new H);const s=new H,o=new Le,a=new Le;function A(c,u){let f=0,d=0,p=0;for(let J=0;J<9;J++)i.probe[J].set(0,0,0);let h=0,m=0,g=0,B=0,v=0,w=0,C=0,I=0,E=0,U=0;c.sort(DY);const S=u!==!0?Math.PI:1;for(let J=0,z=c.length;J<z;J++){const R=c[J],y=R.color,Q=R.intensity,_=R.distance,L=R.shadow&&R.shadow.map?R.shadow.map.texture:null;if(R.isAmbientLight)f+=y.r*Q*S,d+=y.g*Q*S,p+=y.b*Q*S;else if(R.isLightProbe)for(let T=0;T<9;T++)i.probe[T].addScaledVector(R.sh.coefficients[T],Q);else if(R.isDirectionalLight){const T=t.get(R);if(T.color.copy(R.color).multiplyScalar(R.intensity*S),R.castShadow){const Z=R.shadow,G=n.get(R);G.shadowBias=Z.bias,G.shadowNormalBias=Z.normalBias,G.shadowRadius=Z.radius,G.shadowMapSize=Z.mapSize,i.directionalShadow[h]=G,i.directionalShadowMap[h]=L,i.directionalShadowMatrix[h]=R.shadow.matrix,w++}i.directional[h]=T,h++}else if(R.isSpotLight){const T=t.get(R);T.position.setFromMatrixPosition(R.matrixWorld),T.color.copy(y).multiplyScalar(Q*S),T.distance=_,T.coneCos=Math.cos(R.angle),T.penumbraCos=Math.cos(R.angle*(1-R.penumbra)),T.decay=R.decay,i.spot[g]=T;const Z=R.shadow;if(R.map&&(i.spotLightMap[E]=R.map,E++,Z.updateMatrices(R),R.castShadow&&U++),i.spotLightMatrix[g]=Z.matrix,R.castShadow){const G=n.get(R);G.shadowBias=Z.bias,G.shadowNormalBias=Z.normalBias,G.shadowRadius=Z.radius,G.shadowMapSize=Z.mapSize,i.spotShadow[g]=G,i.spotShadowMap[g]=L,I++}g++}else if(R.isRectAreaLight){const T=t.get(R);T.color.copy(y).multiplyScalar(Q),T.halfWidth.set(R.width*.5,0,0),T.halfHeight.set(0,R.height*.5,0),i.rectArea[B]=T,B++}else if(R.isPointLight){const T=t.get(R);if(T.color.copy(R.color).multiplyScalar(R.intensity*S),T.distance=R.distance,T.decay=R.decay,R.castShadow){const Z=R.shadow,G=n.get(R);G.shadowBias=Z.bias,G.shadowNormalBias=Z.normalBias,G.shadowRadius=Z.radius,G.shadowMapSize=Z.mapSize,G.shadowCameraNear=Z.camera.near,G.shadowCameraFar=Z.camera.far,i.pointShadow[m]=G,i.pointShadowMap[m]=L,i.pointShadowMatrix[m]=R.shadow.matrix,C++}i.point[m]=T,m++}else if(R.isHemisphereLight){const T=t.get(R);T.skyColor.copy(R.color).multiplyScalar(Q*S),T.groundColor.copy(R.groundColor).multiplyScalar(Q*S),i.hemi[v]=T,v++}}B>0&&(e.isWebGL2||r.has("OES_texture_float_linear")===!0?(i.rectAreaLTC1=Me.LTC_FLOAT_1,i.rectAreaLTC2=Me.LTC_FLOAT_2):r.has("OES_texture_half_float_linear")===!0?(i.rectAreaLTC1=Me.LTC_HALF_1,i.rectAreaLTC2=Me.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),i.ambient[0]=f,i.ambient[1]=d,i.ambient[2]=p;const V=i.hash;(V.directionalLength!==h||V.pointLength!==m||V.spotLength!==g||V.rectAreaLength!==B||V.hemiLength!==v||V.numDirectionalShadows!==w||V.numPointShadows!==C||V.numSpotShadows!==I||V.numSpotMaps!==E)&&(i.directional.length=h,i.spot.length=g,i.rectArea.length=B,i.point.length=m,i.hemi.length=v,i.directionalShadow.length=w,i.directionalShadowMap.length=w,i.pointShadow.length=C,i.pointShadowMap.length=C,i.spotShadow.length=I,i.spotShadowMap.length=I,i.directionalShadowMatrix.length=w,i.pointShadowMatrix.length=C,i.spotLightMatrix.length=I+E-U,i.spotLightMap.length=E,i.numSpotLightShadowsWithMaps=U,V.directionalLength=h,V.pointLength=m,V.spotLength=g,V.rectAreaLength=B,V.hemiLength=v,V.numDirectionalShadows=w,V.numPointShadows=C,V.numSpotShadows=I,V.numSpotMaps=E,i.version=VY++)}function l(c,u){let f=0,d=0,p=0,h=0,m=0;const g=u.matrixWorldInverse;for(let B=0,v=c.length;B<v;B++){const w=c[B];if(w.isDirectionalLight){const C=i.directional[f];C.direction.setFromMatrixPosition(w.matrixWorld),s.setFromMatrixPosition(w.target.matrixWorld),C.direction.sub(s),C.direction.transformDirection(g),f++}else if(w.isSpotLight){const C=i.spot[p];C.position.setFromMatrixPosition(w.matrixWorld),C.position.applyMatrix4(g),C.direction.setFromMatrixPosition(w.matrixWorld),s.setFromMatrixPosition(w.target.matrixWorld),C.direction.sub(s),C.direction.transformDirection(g),p++}else if(w.isRectAreaLight){const C=i.rectArea[h];C.position.setFromMatrixPosition(w.matrixWorld),C.position.applyMatrix4(g),a.identity(),o.copy(w.matrixWorld),o.premultiply(g),a.extractRotation(o),C.halfWidth.set(w.width*.5,0,0),C.halfHeight.set(0,w.height*.5,0),C.halfWidth.applyMatrix4(a),C.halfHeight.applyMatrix4(a),h++}else if(w.isPointLight){const C=i.point[d];C.position.setFromMatrixPosition(w.matrixWorld),C.position.applyMatrix4(g),d++}else if(w.isHemisphereLight){const C=i.hemi[m];C.direction.setFromMatrixPosition(w.matrixWorld),C.direction.transformDirection(g),m++}}}return{setup:A,setupView:l,state:i}}function b1(r,e){const t=new kY(r,e),n=[],i=[];function s(){n.length=0,i.length=0}function o(u){n.push(u)}function a(u){i.push(u)}function A(u){t.setup(n,u)}function l(u){t.setupView(n,u)}return{init:s,state:{lightsArray:n,shadowsArray:i,lights:t},setupLights:A,setupLightsView:l,pushLight:o,pushShadow:a}}function LY(r,e){let t=new WeakMap;function n(s,o=0){const a=t.get(s);let A;return a===void 0?(A=new b1(r,e),t.set(s,[A])):o>=a.length?(A=new b1(r,e),a.push(A)):A=a[o],A}function i(){t=new WeakMap}return{get:n,dispose:i}}class WY extends cs{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=WH,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class ZY extends cs{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.referencePosition=new H,this.nearDistance=1,this.farDistance=1e3,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.referencePosition.copy(e.referencePosition),this.nearDistance=e.nearDistance,this.farDistance=e.farDistance,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}const PY=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,JY=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function GY(r,e,t){let n=new Cx;const i=new Je,s=new Je,o=new bt,a=new WY({depthPacking:ZH}),A=new ZY,l={},c=t.maxTextureSize,u={0:oi,1:Do,2:Va},f=new Ti({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Je},radius:{value:4}},vertexShader:PY,fragmentShader:JY}),d=f.clone();d.defines.HORIZONTAL_PASS=1;const p=new Xt;p.setAttribute("position",new pt(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const h=new bn(p,f),m=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=tV,this.render=function(w,C,I){if(m.enabled===!1||m.autoUpdate===!1&&m.needsUpdate===!1||w.length===0)return;const E=r.getRenderTarget(),U=r.getActiveCubeFace(),S=r.getActiveMipmapLevel(),V=r.state;V.setBlending(kA),V.buffers.color.setClear(1,1,1,1),V.buffers.depth.setTest(!0),V.setScissorTest(!1);for(let J=0,z=w.length;J<z;J++){const R=w[J],y=R.shadow;if(y===void 0){console.warn("THREE.WebGLShadowMap:",R,"has no shadow.");continue}if(y.autoUpdate===!1&&y.needsUpdate===!1)continue;i.copy(y.mapSize);const Q=y.getFrameExtents();if(i.multiply(Q),s.copy(y.mapSize),(i.x>c||i.y>c)&&(i.x>c&&(s.x=Math.floor(c/Q.x),i.x=s.x*Q.x,y.mapSize.x=s.x),i.y>c&&(s.y=Math.floor(c/Q.y),i.y=s.y*Q.y,y.mapSize.y=s.y)),y.map===null){const L=this.type!==Jd?{minFilter:Hn,magFilter:Hn}:{};y.map=new KA(i.x,i.y,L),y.map.texture.name=R.name+".shadowMap",y.camera.updateProjectionMatrix()}r.setRenderTarget(y.map),r.clear();const _=y.getViewportCount();for(let L=0;L<_;L++){const T=y.getViewport(L);o.set(s.x*T.x,s.y*T.y,s.x*T.z,s.y*T.w),V.viewport(o),y.updateMatrices(R,L),n=y.getFrustum(),v(C,I,y.camera,R,this.type)}y.isPointLightShadow!==!0&&this.type===Jd&&g(y,I),y.needsUpdate=!1}m.needsUpdate=!1,r.setRenderTarget(E,U,S)};function g(w,C){const I=e.update(h);f.defines.VSM_SAMPLES!==w.blurSamples&&(f.defines.VSM_SAMPLES=w.blurSamples,d.defines.VSM_SAMPLES=w.blurSamples,f.needsUpdate=!0,d.needsUpdate=!0),w.mapPass===null&&(w.mapPass=new KA(i.x,i.y)),f.uniforms.shadow_pass.value=w.map.texture,f.uniforms.resolution.value=w.mapSize,f.uniforms.radius.value=w.radius,r.setRenderTarget(w.mapPass),r.clear(),r.renderBufferDirect(C,null,I,f,h,null),d.uniforms.shadow_pass.value=w.mapPass.texture,d.uniforms.resolution.value=w.mapSize,d.uniforms.radius.value=w.radius,r.setRenderTarget(w.map),r.clear(),r.renderBufferDirect(C,null,I,d,h,null)}function B(w,C,I,E,U,S){let V=null;const J=I.isPointLight===!0?w.customDistanceMaterial:w.customDepthMaterial;if(J!==void 0)V=J;else if(V=I.isPointLight===!0?A:a,r.localClippingEnabled&&C.clipShadows===!0&&Array.isArray(C.clippingPlanes)&&C.clippingPlanes.length!==0||C.displacementMap&&C.displacementScale!==0||C.alphaMap&&C.alphaTest>0||C.map&&C.alphaTest>0){const z=V.uuid,R=C.uuid;let y=l[z];y===void 0&&(y={},l[z]=y);let Q=y[R];Q===void 0&&(Q=V.clone(),y[R]=Q),V=Q}return V.visible=C.visible,V.wireframe=C.wireframe,S===Jd?V.side=C.shadowSide!==null?C.shadowSide:C.side:V.side=C.shadowSide!==null?C.shadowSide:u[C.side],V.alphaMap=C.alphaMap,V.alphaTest=C.alphaTest,V.map=C.map,V.clipShadows=C.clipShadows,V.clippingPlanes=C.clippingPlanes,V.clipIntersection=C.clipIntersection,V.displacementMap=C.displacementMap,V.displacementScale=C.displacementScale,V.displacementBias=C.displacementBias,V.wireframeLinewidth=C.wireframeLinewidth,V.linewidth=C.linewidth,I.isPointLight===!0&&V.isMeshDistanceMaterial===!0&&(V.referencePosition.setFromMatrixPosition(I.matrixWorld),V.nearDistance=E,V.farDistance=U),V}function v(w,C,I,E,U){if(w.visible===!1)return;if(w.layers.test(C.layers)&&(w.isMesh||w.isLine||w.isPoints)&&(w.castShadow||w.receiveShadow&&U===Jd)&&(!w.frustumCulled||n.intersectsObject(w))){w.modelViewMatrix.multiplyMatrices(I.matrixWorldInverse,w.matrixWorld);const J=e.update(w),z=w.material;if(Array.isArray(z)){const R=J.groups;for(let y=0,Q=R.length;y<Q;y++){const _=R[y],L=z[_.materialIndex];if(L&&L.visible){const T=B(w,L,E,I.near,I.far,U);r.renderBufferDirect(I,null,J,T,w,_)}}}else if(z.visible){const R=B(w,z,E,I.near,I.far,U);r.renderBufferDirect(I,null,J,R,w,null)}}const V=w.children;for(let J=0,z=V.length;J<z;J++)v(V[J],C,I,E,U)}}function OY(r,e,t){const n=t.isWebGL2;function i(){let re=!1;const Be=new bt;let ve=null;const be=new bt(0,0,0,0);return{setMask:function(Ge){ve!==Ge&&!re&&(r.colorMask(Ge,Ge,Ge,Ge),ve=Ge)},setLocked:function(Ge){re=Ge},setClear:function(Ge,Ye,rt,Yt,gt){gt===!0&&(Ge*=Yt,Ye*=Yt,rt*=Yt),Be.set(Ge,Ye,rt,Yt),be.equals(Be)===!1&&(r.clearColor(Ge,Ye,rt,Yt),be.copy(Be))},reset:function(){re=!1,ve=null,be.set(-1,0,0,0)}}}function s(){let re=!1,Be=null,ve=null,be=null;return{setTest:function(Ge){Ge?q(2929):ee(2929)},setMask:function(Ge){Be!==Ge&&!re&&(r.depthMask(Ge),Be=Ge)},setFunc:function(Ge){if(ve!==Ge){switch(Ge){case oH:r.depthFunc(512);break;case aH:r.depthFunc(519);break;case AH:r.depthFunc(513);break;case OF:r.depthFunc(515);break;case lH:r.depthFunc(514);break;case cH:r.depthFunc(518);break;case uH:r.depthFunc(516);break;case fH:r.depthFunc(517);break;default:r.depthFunc(515)}ve=Ge}},setLocked:function(Ge){re=Ge},setClear:function(Ge){be!==Ge&&(r.clearDepth(Ge),be=Ge)},reset:function(){re=!1,Be=null,ve=null,be=null}}}function o(){let re=!1,Be=null,ve=null,be=null,Ge=null,Ye=null,rt=null,Yt=null,gt=null;return{setTest:function(qe){re||(qe?q(2960):ee(2960))},setMask:function(qe){Be!==qe&&!re&&(r.stencilMask(qe),Be=qe)},setFunc:function(qe,Wn,ct){(ve!==qe||be!==Wn||Ge!==ct)&&(r.stencilFunc(qe,Wn,ct),ve=qe,be=Wn,Ge=ct)},setOp:function(qe,Wn,ct){(Ye!==qe||rt!==Wn||Yt!==ct)&&(r.stencilOp(qe,Wn,ct),Ye=qe,rt=Wn,Yt=ct)},setLocked:function(qe){re=qe},setClear:function(qe){gt!==qe&&(r.clearStencil(qe),gt=qe)},reset:function(){re=!1,Be=null,ve=null,be=null,Ge=null,Ye=null,rt=null,Yt=null,gt=null}}}const a=new i,A=new s,l=new o,c=new WeakMap,u=new WeakMap;let f={},d={},p=new WeakMap,h=[],m=null,g=!1,B=null,v=null,w=null,C=null,I=null,E=null,U=null,S=!1,V=null,J=null,z=null,R=null,y=null;const Q=r.getParameter(35661);let _=!1,L=0;const T=r.getParameter(7938);T.indexOf("WebGL")!==-1?(L=parseFloat(/^WebGL (\d)/.exec(T)[1]),_=L>=1):T.indexOf("OpenGL ES")!==-1&&(L=parseFloat(/^OpenGL ES (\d)/.exec(T)[1]),_=L>=2);let Z=null,G={};const D=r.getParameter(3088),x=r.getParameter(2978),P=new bt().fromArray(D),oe=new bt().fromArray(x);function M(re,Be,ve){const be=new Uint8Array(4),Ge=r.createTexture();r.bindTexture(re,Ge),r.texParameteri(re,10241,9728),r.texParameteri(re,10240,9728);for(let Ye=0;Ye<ve;Ye++)r.texImage2D(Be+Ye,0,6408,1,1,0,6408,5121,be);return Ge}const k={};k[3553]=M(3553,3553,1),k[34067]=M(34067,34069,6),a.setClear(0,0,0,1),A.setClear(1),l.setClear(0),q(2929),A.setFunc(OF),Qe(!1),Ue(FE),q(2884),fe(kA);function q(re){f[re]!==!0&&(r.enable(re),f[re]=!0)}function ee(re){f[re]!==!1&&(r.disable(re),f[re]=!1)}function X(re,Be){return d[re]!==Be?(r.bindFramebuffer(re,Be),d[re]=Be,n&&(re===36009&&(d[36160]=Be),re===36160&&(d[36009]=Be)),!0):!1}function $(re,Be){let ve=h,be=!1;if(re)if(ve=p.get(Be),ve===void 0&&(ve=[],p.set(Be,ve)),re.isWebGLMultipleRenderTargets){const Ge=re.texture;if(ve.length!==Ge.length||ve[0]!==36064){for(let Ye=0,rt=Ge.length;Ye<rt;Ye++)ve[Ye]=36064+Ye;ve.length=Ge.length,be=!0}}else ve[0]!==36064&&(ve[0]=36064,be=!0);else ve[0]!==1029&&(ve[0]=1029,be=!0);be&&(t.isWebGL2?r.drawBuffers(ve):e.get("WEBGL_draw_buffers").drawBuffersWEBGL(ve))}function se(re){return m!==re?(r.useProgram(re),m=re,!0):!1}const ae={[su]:32774,[YO]:32778,[KO]:32779};if(n)ae[xE]=32775,ae[QE]=32776;else{const re=e.get("EXT_blend_minmax");re!==null&&(ae[xE]=re.MIN_EXT,ae[QE]=re.MAX_EXT)}const de={[jO]:0,[qO]:1,[$O]:768,[nV]:770,[sH]:776,[rH]:774,[tH]:772,[eH]:769,[rV]:771,[iH]:775,[nH]:773};function fe(re,Be,ve,be,Ge,Ye,rt,Yt){if(re===kA){g===!0&&(ee(3042),g=!1);return}if(g===!1&&(q(3042),g=!0),re!==XO){if(re!==B||Yt!==S){if((v!==su||I!==su)&&(r.blendEquation(32774),v=su,I=su),Yt)switch(re){case Pu:r.blendFuncSeparate(1,771,1,771);break;case nc:r.blendFunc(1,1);break;case IE:r.blendFuncSeparate(0,769,0,1);break;case UE:r.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",re);break}else switch(re){case Pu:r.blendFuncSeparate(770,771,1,771);break;case nc:r.blendFunc(770,1);break;case IE:r.blendFuncSeparate(0,769,0,1);break;case UE:r.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",re);break}w=null,C=null,E=null,U=null,B=re,S=Yt}return}Ge=Ge||Be,Ye=Ye||ve,rt=rt||be,(Be!==v||Ge!==I)&&(r.blendEquationSeparate(ae[Be],ae[Ge]),v=Be,I=Ge),(ve!==w||be!==C||Ye!==E||rt!==U)&&(r.blendFuncSeparate(de[ve],de[be],de[Ye],de[rt]),w=ve,C=be,E=Ye,U=rt),B=re,S=!1}function ge(re,Be){re.side===Va?ee(2884):q(2884);let ve=re.side===oi;Be&&(ve=!ve),Qe(ve),re.blending===Pu&&re.transparent===!1?fe(kA):fe(re.blending,re.blendEquation,re.blendSrc,re.blendDst,re.blendEquationAlpha,re.blendSrcAlpha,re.blendDstAlpha,re.premultipliedAlpha),A.setFunc(re.depthFunc),A.setTest(re.depthTest),A.setMask(re.depthWrite),a.setMask(re.colorWrite);const be=re.stencilWrite;l.setTest(be),be&&(l.setMask(re.stencilWriteMask),l.setFunc(re.stencilFunc,re.stencilRef,re.stencilFuncMask),l.setOp(re.stencilFail,re.stencilZFail,re.stencilZPass)),Fe(re.polygonOffset,re.polygonOffsetFactor,re.polygonOffsetUnits),re.alphaToCoverage===!0?q(32926):ee(32926)}function Qe(re){V!==re&&(re?r.frontFace(2304):r.frontFace(2305),V=re)}function Ue(re){re!==OO?(q(2884),re!==J&&(re===FE?r.cullFace(1029):re===HO?r.cullFace(1028):r.cullFace(1032))):ee(2884),J=re}function xe(re){re!==z&&(_&&r.lineWidth(re),z=re)}function Fe(re,Be,ve){re?(q(32823),(R!==Be||y!==ve)&&(r.polygonOffset(Be,ve),R=Be,y=ve)):ee(32823)}function Ne(re){re?q(3089):ee(3089)}function Ze(re){re===void 0&&(re=33984+Q-1),Z!==re&&(r.activeTexture(re),Z=re)}function j(re,Be,ve){ve===void 0&&(Z===null?ve=33984+Q-1:ve=Z);let be=G[ve];be===void 0&&(be={type:void 0,texture:void 0},G[ve]=be),(be.type!==re||be.texture!==Be)&&(Z!==ve&&(r.activeTexture(ve),Z=ve),r.bindTexture(re,Be||k[re]),be.type=re,be.texture=Be)}function O(){const re=G[Z];re!==void 0&&re.type!==void 0&&(r.bindTexture(re.type,null),re.type=void 0,re.texture=void 0)}function le(){try{r.compressedTexImage2D.apply(r,arguments)}catch(re){console.error("THREE.WebGLState:",re)}}function ue(){try{r.compressedTexImage3D.apply(r,arguments)}catch(re){console.error("THREE.WebGLState:",re)}}function Ce(){try{r.texSubImage2D.apply(r,arguments)}catch(re){console.error("THREE.WebGLState:",re)}}function W(){try{r.texSubImage3D.apply(r,arguments)}catch(re){console.error("THREE.WebGLState:",re)}}function b(){try{r.compressedTexSubImage2D.apply(r,arguments)}catch(re){console.error("THREE.WebGLState:",re)}}function F(){try{r.compressedTexSubImage3D.apply(r,arguments)}catch(re){console.error("THREE.WebGLState:",re)}}function N(){try{r.texStorage2D.apply(r,arguments)}catch(re){console.error("THREE.WebGLState:",re)}}function K(){try{r.texStorage3D.apply(r,arguments)}catch(re){console.error("THREE.WebGLState:",re)}}function te(){try{r.texImage2D.apply(r,arguments)}catch(re){console.error("THREE.WebGLState:",re)}}function ne(){try{r.texImage3D.apply(r,arguments)}catch(re){console.error("THREE.WebGLState:",re)}}function we(re){P.equals(re)===!1&&(r.scissor(re.x,re.y,re.z,re.w),P.copy(re))}function ye(re){oe.equals(re)===!1&&(r.viewport(re.x,re.y,re.z,re.w),oe.copy(re))}function Se(re,Be){let ve=u.get(Be);ve===void 0&&(ve=new WeakMap,u.set(Be,ve));let be=ve.get(re);be===void 0&&(be=r.getUniformBlockIndex(Be,re.name),ve.set(re,be))}function We(re,Be){const be=u.get(Be).get(re);c.get(Be)!==be&&(r.uniformBlockBinding(Be,be,re.__bindingPointIndex),c.set(Be,be))}function Re(){r.disable(3042),r.disable(2884),r.disable(2929),r.disable(32823),r.disable(3089),r.disable(2960),r.disable(32926),r.blendEquation(32774),r.blendFunc(1,0),r.blendFuncSeparate(1,0,1,0),r.colorMask(!0,!0,!0,!0),r.clearColor(0,0,0,0),r.depthMask(!0),r.depthFunc(513),r.clearDepth(1),r.stencilMask(4294967295),r.stencilFunc(519,0,4294967295),r.stencilOp(7680,7680,7680),r.clearStencil(0),r.cullFace(1029),r.frontFace(2305),r.polygonOffset(0,0),r.activeTexture(33984),r.bindFramebuffer(36160,null),n===!0&&(r.bindFramebuffer(36009,null),r.bindFramebuffer(36008,null)),r.useProgram(null),r.lineWidth(1),r.scissor(0,0,r.canvas.width,r.canvas.height),r.viewport(0,0,r.canvas.width,r.canvas.height),f={},Z=null,G={},d={},p=new WeakMap,h=[],m=null,g=!1,B=null,v=null,w=null,C=null,I=null,E=null,U=null,S=!1,V=null,J=null,z=null,R=null,y=null,P.set(0,0,r.canvas.width,r.canvas.height),oe.set(0,0,r.canvas.width,r.canvas.height),a.reset(),A.reset(),l.reset()}return{buffers:{color:a,depth:A,stencil:l},enable:q,disable:ee,bindFramebuffer:X,drawBuffers:$,useProgram:se,setBlending:fe,setMaterial:ge,setFlipSided:Qe,setCullFace:Ue,setLineWidth:xe,setPolygonOffset:Fe,setScissorTest:Ne,activeTexture:Ze,bindTexture:j,unbindTexture:O,compressedTexImage2D:le,compressedTexImage3D:ue,texImage2D:te,texImage3D:ne,updateUBOMapping:Se,uniformBlockBinding:We,texStorage2D:N,texStorage3D:K,texSubImage2D:Ce,texSubImage3D:W,compressedTexSubImage2D:b,compressedTexSubImage3D:F,scissor:we,viewport:ye,reset:Re}}function HY(r,e,t,n,i,s,o){const a=i.isWebGL2,A=i.maxTextures,l=i.maxCubemapSize,c=i.maxTextureSize,u=i.maxSamples,f=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,d=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),p=new WeakMap;let h;const m=new WeakMap;let g=!1;try{g=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function B(j,O){return g?new OffscreenCanvas(j,O):$h("canvas")}function v(j,O,le,ue){let Ce=1;if((j.width>ue||j.height>ue)&&(Ce=ue/Math.max(j.width,j.height)),Ce<1||O===!0)if(typeof HTMLImageElement<"u"&&j instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&j instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&j instanceof ImageBitmap){const W=O?J0:Math.floor,b=W(Ce*j.width),F=W(Ce*j.height);h===void 0&&(h=B(b,F));const N=le?B(b,F):h;return N.width=b,N.height=F,N.getContext("2d").drawImage(j,0,0,b,F),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+j.width+"x"+j.height+") to ("+b+"x"+F+")."),N}else return"data"in j&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+j.width+"x"+j.height+")."),j;return j}function w(j){return YF(j.width)&&YF(j.height)}function C(j){return a?!1:j.wrapS!==Gr||j.wrapT!==Gr||j.minFilter!==Hn&&j.minFilter!==Wr}function I(j,O){return j.generateMipmaps&&O&&j.minFilter!==Hn&&j.minFilter!==Wr}function E(j){r.generateMipmap(j)}function U(j,O,le,ue,Ce=!1){if(a===!1)return O;if(j!==null){if(r[j]!==void 0)return r[j];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+j+"'")}let W=O;return O===6403&&(le===5126&&(W=33326),le===5131&&(W=33325),le===5121&&(W=33321)),O===33319&&(le===5126&&(W=33328),le===5131&&(W=33327),le===5121&&(W=33323)),O===6408&&(le===5126&&(W=34836),le===5131&&(W=34842),le===5121&&(W=ue===lt&&Ce===!1?35907:32856),le===32819&&(W=32854),le===32820&&(W=32855)),(W===33325||W===33326||W===33327||W===33328||W===34842||W===34836)&&e.get("EXT_color_buffer_float"),W}function S(j,O,le){return I(j,le)===!0||j.isFramebufferTexture&&j.minFilter!==Hn&&j.minFilter!==Wr?Math.log2(Math.max(O.width,O.height))+1:j.mipmaps!==void 0&&j.mipmaps.length>0?j.mipmaps.length:j.isCompressedTexture&&Array.isArray(j.image)?O.mipmaps.length:1}function V(j){return j===Hn||j===Z0||j===gh?9728:9729}function J(j){const O=j.target;O.removeEventListener("dispose",J),R(O),O.isVideoTexture&&p.delete(O)}function z(j){const O=j.target;O.removeEventListener("dispose",z),Q(O)}function R(j){const O=n.get(j);if(O.__webglInit===void 0)return;const le=j.source,ue=m.get(le);if(ue){const Ce=ue[O.__cacheKey];Ce.usedTimes--,Ce.usedTimes===0&&y(j),Object.keys(ue).length===0&&m.delete(le)}n.remove(j)}function y(j){const O=n.get(j);r.deleteTexture(O.__webglTexture);const le=j.source,ue=m.get(le);delete ue[O.__cacheKey],o.memory.textures--}function Q(j){const O=j.texture,le=n.get(j),ue=n.get(O);if(ue.__webglTexture!==void 0&&(r.deleteTexture(ue.__webglTexture),o.memory.textures--),j.depthTexture&&j.depthTexture.dispose(),j.isWebGLCubeRenderTarget)for(let Ce=0;Ce<6;Ce++)r.deleteFramebuffer(le.__webglFramebuffer[Ce]),le.__webglDepthbuffer&&r.deleteRenderbuffer(le.__webglDepthbuffer[Ce]);else{if(r.deleteFramebuffer(le.__webglFramebuffer),le.__webglDepthbuffer&&r.deleteRenderbuffer(le.__webglDepthbuffer),le.__webglMultisampledFramebuffer&&r.deleteFramebuffer(le.__webglMultisampledFramebuffer),le.__webglColorRenderbuffer)for(let Ce=0;Ce<le.__webglColorRenderbuffer.length;Ce++)le.__webglColorRenderbuffer[Ce]&&r.deleteRenderbuffer(le.__webglColorRenderbuffer[Ce]);le.__webglDepthRenderbuffer&&r.deleteRenderbuffer(le.__webglDepthRenderbuffer)}if(j.isWebGLMultipleRenderTargets)for(let Ce=0,W=O.length;Ce<W;Ce++){const b=n.get(O[Ce]);b.__webglTexture&&(r.deleteTexture(b.__webglTexture),o.memory.textures--),n.remove(O[Ce])}n.remove(O),n.remove(j)}let _=0;function L(){_=0}function T(){const j=_;return j>=A&&console.warn("THREE.WebGLTextures: Trying to use "+j+" texture units while this GPU supports only "+A),_+=1,j}function Z(j){const O=[];return O.push(j.wrapS),O.push(j.wrapT),O.push(j.wrapR||0),O.push(j.magFilter),O.push(j.minFilter),O.push(j.anisotropy),O.push(j.internalFormat),O.push(j.format),O.push(j.type),O.push(j.generateMipmaps),O.push(j.premultiplyAlpha),O.push(j.flipY),O.push(j.unpackAlignment),O.push(j.encoding),O.join()}function G(j,O){const le=n.get(j);if(j.isVideoTexture&&Ne(j),j.isRenderTargetTexture===!1&&j.version>0&&le.__version!==j.version){const ue=j.image;if(ue===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(ue.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{ee(le,j,O);return}}t.bindTexture(3553,le.__webglTexture,33984+O)}function D(j,O){const le=n.get(j);if(j.version>0&&le.__version!==j.version){ee(le,j,O);return}t.bindTexture(35866,le.__webglTexture,33984+O)}function x(j,O){const le=n.get(j);if(j.version>0&&le.__version!==j.version){ee(le,j,O);return}t.bindTexture(32879,le.__webglTexture,33984+O)}function P(j,O){const le=n.get(j);if(j.version>0&&le.__version!==j.version){X(le,j,O);return}t.bindTexture(34067,le.__webglTexture,33984+O)}const oe={[ps]:10497,[Gr]:33071,[Yh]:33648},M={[Hn]:9728,[Z0]:9984,[gh]:9986,[Wr]:9729,[px]:9985,[XA]:9987};function k(j,O,le){if(le?(r.texParameteri(j,10242,oe[O.wrapS]),r.texParameteri(j,10243,oe[O.wrapT]),(j===32879||j===35866)&&r.texParameteri(j,32882,oe[O.wrapR]),r.texParameteri(j,10240,M[O.magFilter]),r.texParameteri(j,10241,M[O.minFilter])):(r.texParameteri(j,10242,33071),r.texParameteri(j,10243,33071),(j===32879||j===35866)&&r.texParameteri(j,32882,33071),(O.wrapS!==Gr||O.wrapT!==Gr)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),r.texParameteri(j,10240,V(O.magFilter)),r.texParameteri(j,10241,V(O.minFilter)),O.minFilter!==Hn&&O.minFilter!==Wr&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),e.has("EXT_texture_filter_anisotropic")===!0){const ue=e.get("EXT_texture_filter_anisotropic");if(O.magFilter===Hn||O.minFilter!==gh&&O.minFilter!==XA||O.type===CA&&e.has("OES_texture_float_linear")===!1||a===!1&&O.type===Kh&&e.has("OES_texture_half_float_linear")===!1)return;(O.anisotropy>1||n.get(O).__currentAnisotropy)&&(r.texParameterf(j,ue.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(O.anisotropy,i.getMaxAnisotropy())),n.get(O).__currentAnisotropy=O.anisotropy)}}function q(j,O){let le=!1;j.__webglInit===void 0&&(j.__webglInit=!0,O.addEventListener("dispose",J));const ue=O.source;let Ce=m.get(ue);Ce===void 0&&(Ce={},m.set(ue,Ce));const W=Z(O);if(W!==j.__cacheKey){Ce[W]===void 0&&(Ce[W]={texture:r.createTexture(),usedTimes:0},o.memory.textures++,le=!0),Ce[W].usedTimes++;const b=Ce[j.__cacheKey];b!==void 0&&(Ce[j.__cacheKey].usedTimes--,b.usedTimes===0&&y(O)),j.__cacheKey=W,j.__webglTexture=Ce[W].texture}return le}function ee(j,O,le){let ue=3553;(O.isDataArrayTexture||O.isCompressedArrayTexture)&&(ue=35866),O.isData3DTexture&&(ue=32879);const Ce=q(j,O),W=O.source;t.bindTexture(ue,j.__webglTexture,33984+le);const b=n.get(W);if(W.version!==b.__version||Ce===!0){t.activeTexture(33984+le),r.pixelStorei(37440,O.flipY),r.pixelStorei(37441,O.premultiplyAlpha),r.pixelStorei(3317,O.unpackAlignment),r.pixelStorei(37443,0);const F=C(O)&&w(O.image)===!1;let N=v(O.image,F,!1,c);N=Ze(O,N);const K=w(N)||a,te=s.convert(O.format,O.encoding);let ne=s.convert(O.type),we=U(O.internalFormat,te,ne,O.encoding,O.isVideoTexture);k(ue,O,K);let ye;const Se=O.mipmaps,We=a&&O.isVideoTexture!==!0,Re=b.__version===void 0||Ce===!0,re=S(O,N,K);if(O.isDepthTexture)we=6402,a?O.type===CA?we=36012:O.type===Ml?we=33190:O.type===Ju?we=35056:we=33189:O.type===CA&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),O.format===Pl&&we===6402&&O.type!==sV&&O.type!==Ml&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),O.type=Ml,ne=s.convert(O.type)),O.format===Bf&&we===6402&&(we=34041,O.type!==Ju&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),O.type=Ju,ne=s.convert(O.type))),Re&&(We?t.texStorage2D(3553,1,we,N.width,N.height):t.texImage2D(3553,0,we,N.width,N.height,0,te,ne,null));else if(O.isDataTexture)if(Se.length>0&&K){We&&Re&&t.texStorage2D(3553,re,we,Se[0].width,Se[0].height);for(let Be=0,ve=Se.length;Be<ve;Be++)ye=Se[Be],We?t.texSubImage2D(3553,Be,0,0,ye.width,ye.height,te,ne,ye.data):t.texImage2D(3553,Be,we,ye.width,ye.height,0,te,ne,ye.data);O.generateMipmaps=!1}else We?(Re&&t.texStorage2D(3553,re,we,N.width,N.height),t.texSubImage2D(3553,0,0,0,N.width,N.height,te,ne,N.data)):t.texImage2D(3553,0,we,N.width,N.height,0,te,ne,N.data);else if(O.isCompressedTexture)if(O.isCompressedArrayTexture){We&&Re&&t.texStorage3D(35866,re,we,Se[0].width,Se[0].height,N.depth);for(let Be=0,ve=Se.length;Be<ve;Be++)ye=Se[Be],O.format!==ei?te!==null?We?t.compressedTexSubImage3D(35866,Be,0,0,0,ye.width,ye.height,N.depth,te,ye.data,0,0):t.compressedTexImage3D(35866,Be,we,ye.width,ye.height,N.depth,0,ye.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):We?t.texSubImage3D(35866,Be,0,0,0,ye.width,ye.height,N.depth,te,ne,ye.data):t.texImage3D(35866,Be,we,ye.width,ye.height,N.depth,0,te,ne,ye.data)}else{We&&Re&&t.texStorage2D(3553,re,we,Se[0].width,Se[0].height);for(let Be=0,ve=Se.length;Be<ve;Be++)ye=Se[Be],O.format!==ei?te!==null?We?t.compressedTexSubImage2D(3553,Be,0,0,ye.width,ye.height,te,ye.data):t.compressedTexImage2D(3553,Be,we,ye.width,ye.height,0,ye.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):We?t.texSubImage2D(3553,Be,0,0,ye.width,ye.height,te,ne,ye.data):t.texImage2D(3553,Be,we,ye.width,ye.height,0,te,ne,ye.data)}else if(O.isDataArrayTexture)We?(Re&&t.texStorage3D(35866,re,we,N.width,N.height,N.depth),t.texSubImage3D(35866,0,0,0,0,N.width,N.height,N.depth,te,ne,N.data)):t.texImage3D(35866,0,we,N.width,N.height,N.depth,0,te,ne,N.data);else if(O.isData3DTexture)We?(Re&&t.texStorage3D(32879,re,we,N.width,N.height,N.depth),t.texSubImage3D(32879,0,0,0,0,N.width,N.height,N.depth,te,ne,N.data)):t.texImage3D(32879,0,we,N.width,N.height,N.depth,0,te,ne,N.data);else if(O.isFramebufferTexture){if(Re)if(We)t.texStorage2D(3553,re,we,N.width,N.height);else{let Be=N.width,ve=N.height;for(let be=0;be<re;be++)t.texImage2D(3553,be,we,Be,ve,0,te,ne,null),Be>>=1,ve>>=1}}else if(Se.length>0&&K){We&&Re&&t.texStorage2D(3553,re,we,Se[0].width,Se[0].height);for(let Be=0,ve=Se.length;Be<ve;Be++)ye=Se[Be],We?t.texSubImage2D(3553,Be,0,0,te,ne,ye):t.texImage2D(3553,Be,we,te,ne,ye);O.generateMipmaps=!1}else We?(Re&&t.texStorage2D(3553,re,we,N.width,N.height),t.texSubImage2D(3553,0,0,0,te,ne,N)):t.texImage2D(3553,0,we,te,ne,N);I(O,K)&&E(ue),b.__version=W.version,O.onUpdate&&O.onUpdate(O)}j.__version=O.version}function X(j,O,le){if(O.image.length!==6)return;const ue=q(j,O),Ce=O.source;t.bindTexture(34067,j.__webglTexture,33984+le);const W=n.get(Ce);if(Ce.version!==W.__version||ue===!0){t.activeTexture(33984+le),r.pixelStorei(37440,O.flipY),r.pixelStorei(37441,O.premultiplyAlpha),r.pixelStorei(3317,O.unpackAlignment),r.pixelStorei(37443,0);const b=O.isCompressedTexture||O.image[0].isCompressedTexture,F=O.image[0]&&O.image[0].isDataTexture,N=[];for(let Be=0;Be<6;Be++)!b&&!F?N[Be]=v(O.image[Be],!1,!0,l):N[Be]=F?O.image[Be].image:O.image[Be],N[Be]=Ze(O,N[Be]);const K=N[0],te=w(K)||a,ne=s.convert(O.format,O.encoding),we=s.convert(O.type),ye=U(O.internalFormat,ne,we,O.encoding),Se=a&&O.isVideoTexture!==!0,We=W.__version===void 0||ue===!0;let Re=S(O,K,te);k(34067,O,te);let re;if(b){Se&&We&&t.texStorage2D(34067,Re,ye,K.width,K.height);for(let Be=0;Be<6;Be++){re=N[Be].mipmaps;for(let ve=0;ve<re.length;ve++){const be=re[ve];O.format!==ei?ne!==null?Se?t.compressedTexSubImage2D(34069+Be,ve,0,0,be.width,be.height,ne,be.data):t.compressedTexImage2D(34069+Be,ve,ye,be.width,be.height,0,be.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):Se?t.texSubImage2D(34069+Be,ve,0,0,be.width,be.height,ne,we,be.data):t.texImage2D(34069+Be,ve,ye,be.width,be.height,0,ne,we,be.data)}}}else{re=O.mipmaps,Se&&We&&(re.length>0&&Re++,t.texStorage2D(34067,Re,ye,N[0].width,N[0].height));for(let Be=0;Be<6;Be++)if(F){Se?t.texSubImage2D(34069+Be,0,0,0,N[Be].width,N[Be].height,ne,we,N[Be].data):t.texImage2D(34069+Be,0,ye,N[Be].width,N[Be].height,0,ne,we,N[Be].data);for(let ve=0;ve<re.length;ve++){const Ge=re[ve].image[Be].image;Se?t.texSubImage2D(34069+Be,ve+1,0,0,Ge.width,Ge.height,ne,we,Ge.data):t.texImage2D(34069+Be,ve+1,ye,Ge.width,Ge.height,0,ne,we,Ge.data)}}else{Se?t.texSubImage2D(34069+Be,0,0,0,ne,we,N[Be]):t.texImage2D(34069+Be,0,ye,ne,we,N[Be]);for(let ve=0;ve<re.length;ve++){const be=re[ve];Se?t.texSubImage2D(34069+Be,ve+1,0,0,ne,we,be.image[Be]):t.texImage2D(34069+Be,ve+1,ye,ne,we,be.image[Be])}}}I(O,te)&&E(34067),W.__version=Ce.version,O.onUpdate&&O.onUpdate(O)}j.__version=O.version}function $(j,O,le,ue,Ce){const W=s.convert(le.format,le.encoding),b=s.convert(le.type),F=U(le.internalFormat,W,b,le.encoding);n.get(O).__hasExternalTextures||(Ce===32879||Ce===35866?t.texImage3D(Ce,0,F,O.width,O.height,O.depth,0,W,b,null):t.texImage2D(Ce,0,F,O.width,O.height,0,W,b,null)),t.bindFramebuffer(36160,j),Fe(O)?f.framebufferTexture2DMultisampleEXT(36160,ue,Ce,n.get(le).__webglTexture,0,xe(O)):(Ce===3553||Ce>=34069&&Ce<=34074)&&r.framebufferTexture2D(36160,ue,Ce,n.get(le).__webglTexture,0),t.bindFramebuffer(36160,null)}function se(j,O,le){if(r.bindRenderbuffer(36161,j),O.depthBuffer&&!O.stencilBuffer){let ue=33189;if(le||Fe(O)){const Ce=O.depthTexture;Ce&&Ce.isDepthTexture&&(Ce.type===CA?ue=36012:Ce.type===Ml&&(ue=33190));const W=xe(O);Fe(O)?f.renderbufferStorageMultisampleEXT(36161,W,ue,O.width,O.height):r.renderbufferStorageMultisample(36161,W,ue,O.width,O.height)}else r.renderbufferStorage(36161,ue,O.width,O.height);r.framebufferRenderbuffer(36160,36096,36161,j)}else if(O.depthBuffer&&O.stencilBuffer){const ue=xe(O);le&&Fe(O)===!1?r.renderbufferStorageMultisample(36161,ue,35056,O.width,O.height):Fe(O)?f.renderbufferStorageMultisampleEXT(36161,ue,35056,O.width,O.height):r.renderbufferStorage(36161,34041,O.width,O.height),r.framebufferRenderbuffer(36160,33306,36161,j)}else{const ue=O.isWebGLMultipleRenderTargets===!0?O.texture:[O.texture];for(let Ce=0;Ce<ue.length;Ce++){const W=ue[Ce],b=s.convert(W.format,W.encoding),F=s.convert(W.type),N=U(W.internalFormat,b,F,W.encoding),K=xe(O);le&&Fe(O)===!1?r.renderbufferStorageMultisample(36161,K,N,O.width,O.height):Fe(O)?f.renderbufferStorageMultisampleEXT(36161,K,N,O.width,O.height):r.renderbufferStorage(36161,N,O.width,O.height)}}r.bindRenderbuffer(36161,null)}function ae(j,O){if(O&&O.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(36160,j),!(O.depthTexture&&O.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!n.get(O.depthTexture).__webglTexture||O.depthTexture.image.width!==O.width||O.depthTexture.image.height!==O.height)&&(O.depthTexture.image.width=O.width,O.depthTexture.image.height=O.height,O.depthTexture.needsUpdate=!0),G(O.depthTexture,0);const ue=n.get(O.depthTexture).__webglTexture,Ce=xe(O);if(O.depthTexture.format===Pl)Fe(O)?f.framebufferTexture2DMultisampleEXT(36160,36096,3553,ue,0,Ce):r.framebufferTexture2D(36160,36096,3553,ue,0);else if(O.depthTexture.format===Bf)Fe(O)?f.framebufferTexture2DMultisampleEXT(36160,33306,3553,ue,0,Ce):r.framebufferTexture2D(36160,33306,3553,ue,0);else throw new Error("Unknown depthTexture format")}function de(j){const O=n.get(j),le=j.isWebGLCubeRenderTarget===!0;if(j.depthTexture&&!O.__autoAllocateDepthBuffer){if(le)throw new Error("target.depthTexture not supported in Cube render targets");ae(O.__webglFramebuffer,j)}else if(le){O.__webglDepthbuffer=[];for(let ue=0;ue<6;ue++)t.bindFramebuffer(36160,O.__webglFramebuffer[ue]),O.__webglDepthbuffer[ue]=r.createRenderbuffer(),se(O.__webglDepthbuffer[ue],j,!1)}else t.bindFramebuffer(36160,O.__webglFramebuffer),O.__webglDepthbuffer=r.createRenderbuffer(),se(O.__webglDepthbuffer,j,!1);t.bindFramebuffer(36160,null)}function fe(j,O,le){const ue=n.get(j);O!==void 0&&$(ue.__webglFramebuffer,j,j.texture,36064,3553),le!==void 0&&de(j)}function ge(j){const O=j.texture,le=n.get(j),ue=n.get(O);j.addEventListener("dispose",z),j.isWebGLMultipleRenderTargets!==!0&&(ue.__webglTexture===void 0&&(ue.__webglTexture=r.createTexture()),ue.__version=O.version,o.memory.textures++);const Ce=j.isWebGLCubeRenderTarget===!0,W=j.isWebGLMultipleRenderTargets===!0,b=w(j)||a;if(Ce){le.__webglFramebuffer=[];for(let F=0;F<6;F++)le.__webglFramebuffer[F]=r.createFramebuffer()}else{if(le.__webglFramebuffer=r.createFramebuffer(),W)if(i.drawBuffers){const F=j.texture;for(let N=0,K=F.length;N<K;N++){const te=n.get(F[N]);te.__webglTexture===void 0&&(te.__webglTexture=r.createTexture(),o.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(a&&j.samples>0&&Fe(j)===!1){const F=W?O:[O];le.__webglMultisampledFramebuffer=r.createFramebuffer(),le.__webglColorRenderbuffer=[],t.bindFramebuffer(36160,le.__webglMultisampledFramebuffer);for(let N=0;N<F.length;N++){const K=F[N];le.__webglColorRenderbuffer[N]=r.createRenderbuffer(),r.bindRenderbuffer(36161,le.__webglColorRenderbuffer[N]);const te=s.convert(K.format,K.encoding),ne=s.convert(K.type),we=U(K.internalFormat,te,ne,K.encoding,j.isXRRenderTarget===!0),ye=xe(j);r.renderbufferStorageMultisample(36161,ye,we,j.width,j.height),r.framebufferRenderbuffer(36160,36064+N,36161,le.__webglColorRenderbuffer[N])}r.bindRenderbuffer(36161,null),j.depthBuffer&&(le.__webglDepthRenderbuffer=r.createRenderbuffer(),se(le.__webglDepthRenderbuffer,j,!0)),t.bindFramebuffer(36160,null)}}if(Ce){t.bindTexture(34067,ue.__webglTexture),k(34067,O,b);for(let F=0;F<6;F++)$(le.__webglFramebuffer[F],j,O,36064,34069+F);I(O,b)&&E(34067),t.unbindTexture()}else if(W){const F=j.texture;for(let N=0,K=F.length;N<K;N++){const te=F[N],ne=n.get(te);t.bindTexture(3553,ne.__webglTexture),k(3553,te,b),$(le.__webglFramebuffer,j,te,36064+N,3553),I(te,b)&&E(3553)}t.unbindTexture()}else{let F=3553;(j.isWebGL3DRenderTarget||j.isWebGLArrayRenderTarget)&&(a?F=j.isWebGL3DRenderTarget?32879:35866:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),t.bindTexture(F,ue.__webglTexture),k(F,O,b),$(le.__webglFramebuffer,j,O,36064,F),I(O,b)&&E(F),t.unbindTexture()}j.depthBuffer&&de(j)}function Qe(j){const O=w(j)||a,le=j.isWebGLMultipleRenderTargets===!0?j.texture:[j.texture];for(let ue=0,Ce=le.length;ue<Ce;ue++){const W=le[ue];if(I(W,O)){const b=j.isWebGLCubeRenderTarget?34067:3553,F=n.get(W).__webglTexture;t.bindTexture(b,F),E(b),t.unbindTexture()}}}function Ue(j){if(a&&j.samples>0&&Fe(j)===!1){const O=j.isWebGLMultipleRenderTargets?j.texture:[j.texture],le=j.width,ue=j.height;let Ce=16384;const W=[],b=j.stencilBuffer?33306:36096,F=n.get(j),N=j.isWebGLMultipleRenderTargets===!0;if(N)for(let K=0;K<O.length;K++)t.bindFramebuffer(36160,F.__webglMultisampledFramebuffer),r.framebufferRenderbuffer(36160,36064+K,36161,null),t.bindFramebuffer(36160,F.__webglFramebuffer),r.framebufferTexture2D(36009,36064+K,3553,null,0);t.bindFramebuffer(36008,F.__webglMultisampledFramebuffer),t.bindFramebuffer(36009,F.__webglFramebuffer);for(let K=0;K<O.length;K++){W.push(36064+K),j.depthBuffer&&W.push(b);const te=F.__ignoreDepthValues!==void 0?F.__ignoreDepthValues:!1;if(te===!1&&(j.depthBuffer&&(Ce|=256),j.stencilBuffer&&(Ce|=1024)),N&&r.framebufferRenderbuffer(36008,36064,36161,F.__webglColorRenderbuffer[K]),te===!0&&(r.invalidateFramebuffer(36008,[b]),r.invalidateFramebuffer(36009,[b])),N){const ne=n.get(O[K]).__webglTexture;r.framebufferTexture2D(36009,36064,3553,ne,0)}r.blitFramebuffer(0,0,le,ue,0,0,le,ue,Ce,9728),d&&r.invalidateFramebuffer(36008,W)}if(t.bindFramebuffer(36008,null),t.bindFramebuffer(36009,null),N)for(let K=0;K<O.length;K++){t.bindFramebuffer(36160,F.__webglMultisampledFramebuffer),r.framebufferRenderbuffer(36160,36064+K,36161,F.__webglColorRenderbuffer[K]);const te=n.get(O[K]).__webglTexture;t.bindFramebuffer(36160,F.__webglFramebuffer),r.framebufferTexture2D(36009,36064+K,3553,te,0)}t.bindFramebuffer(36009,F.__webglMultisampledFramebuffer)}}function xe(j){return Math.min(u,j.samples)}function Fe(j){const O=n.get(j);return a&&j.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&O.__useRenderToTexture!==!1}function Ne(j){const O=o.render.frame;p.get(j)!==O&&(p.set(j,O),j.update())}function Ze(j,O){const le=j.encoding,ue=j.format,Ce=j.type;return j.isCompressedTexture===!0||j.isVideoTexture===!0||j.format===XF||le!==gs&&(le===lt?a===!1?e.has("EXT_sRGB")===!0&&ue===ei?(j.format=XF,j.minFilter=Wr,j.generateMipmaps=!1):O=cV.sRGBToLinear(O):(ue!==ei||Ce!==YA)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture encoding:",le)),O}this.allocateTextureUnit=T,this.resetTextureUnits=L,this.setTexture2D=G,this.setTexture2DArray=D,this.setTexture3D=x,this.setTextureCube=P,this.rebindTextures=fe,this.setupRenderTarget=ge,this.updateRenderTargetMipmap=Qe,this.updateMultisampleRenderTarget=Ue,this.setupDepthRenderbuffer=de,this.setupFrameBufferTexture=$,this.useMultisampledRTT=Fe}function zY(r,e,t){const n=t.isWebGL2;function i(s,o=null){let a;if(s===YA)return 5121;if(s===FH)return 32819;if(s===IH)return 32820;if(s===yH)return 5120;if(s===CH)return 5122;if(s===sV)return 5123;if(s===wH)return 5124;if(s===Ml)return 5125;if(s===CA)return 5126;if(s===Kh)return n?5131:(a=e.get("OES_texture_half_float"),a!==null?a.HALF_FLOAT_OES:null);if(s===UH)return 6406;if(s===ei)return 6408;if(s===QH)return 6409;if(s===bH)return 6410;if(s===Pl)return 6402;if(s===Bf)return 34041;if(s===xH)return console.warn("THREE.WebGLRenderer: THREE.RGBFormat has been removed. Use THREE.RGBAFormat instead. https://github.com/mrdoob/three.js/pull/23228"),6408;if(s===XF)return a=e.get("EXT_sRGB"),a!==null?a.SRGB_ALPHA_EXT:null;if(s===EH)return 6403;if(s===SH)return 36244;if(s===_H)return 33319;if(s===RH)return 33320;if(s===MH)return 36249;if(s===Sy||s===_y||s===Ry||s===My)if(o===lt)if(a=e.get("WEBGL_compressed_texture_s3tc_srgb"),a!==null){if(s===Sy)return a.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(s===_y)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(s===Ry)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(s===My)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(a=e.get("WEBGL_compressed_texture_s3tc"),a!==null){if(s===Sy)return a.COMPRESSED_RGB_S3TC_DXT1_EXT;if(s===_y)return a.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(s===Ry)return a.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(s===My)return a.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(s===bE||s===EE||s===SE||s===_E)if(a=e.get("WEBGL_compressed_texture_pvrtc"),a!==null){if(s===bE)return a.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(s===EE)return a.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(s===SE)return a.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(s===_E)return a.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(s===TH)return a=e.get("WEBGL_compressed_texture_etc1"),a!==null?a.COMPRESSED_RGB_ETC1_WEBGL:null;if(s===RE||s===ME)if(a=e.get("WEBGL_compressed_texture_etc"),a!==null){if(s===RE)return o===lt?a.COMPRESSED_SRGB8_ETC2:a.COMPRESSED_RGB8_ETC2;if(s===ME)return o===lt?a.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:a.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(s===TE||s===NE||s===VE||s===DE||s===kE||s===LE||s===WE||s===ZE||s===PE||s===JE||s===GE||s===OE||s===HE||s===zE)if(a=e.get("WEBGL_compressed_texture_astc"),a!==null){if(s===TE)return o===lt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:a.COMPRESSED_RGBA_ASTC_4x4_KHR;if(s===NE)return o===lt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:a.COMPRESSED_RGBA_ASTC_5x4_KHR;if(s===VE)return o===lt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:a.COMPRESSED_RGBA_ASTC_5x5_KHR;if(s===DE)return o===lt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:a.COMPRESSED_RGBA_ASTC_6x5_KHR;if(s===kE)return o===lt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:a.COMPRESSED_RGBA_ASTC_6x6_KHR;if(s===LE)return o===lt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:a.COMPRESSED_RGBA_ASTC_8x5_KHR;if(s===WE)return o===lt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:a.COMPRESSED_RGBA_ASTC_8x6_KHR;if(s===ZE)return o===lt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:a.COMPRESSED_RGBA_ASTC_8x8_KHR;if(s===PE)return o===lt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:a.COMPRESSED_RGBA_ASTC_10x5_KHR;if(s===JE)return o===lt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:a.COMPRESSED_RGBA_ASTC_10x6_KHR;if(s===GE)return o===lt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:a.COMPRESSED_RGBA_ASTC_10x8_KHR;if(s===OE)return o===lt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:a.COMPRESSED_RGBA_ASTC_10x10_KHR;if(s===HE)return o===lt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:a.COMPRESSED_RGBA_ASTC_12x10_KHR;if(s===zE)return o===lt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:a.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(s===XE)if(a=e.get("EXT_texture_compression_bptc"),a!==null){if(s===XE)return o===lt?a.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:a.COMPRESSED_RGBA_BPTC_UNORM_EXT}else return null;return s===Ju?n?34042:(a=e.get("WEBGL_depth_texture"),a!==null?a.UNSIGNED_INT_24_8_WEBGL:null):r[s]!==void 0?r[s]:null}return{convert:i}}class XY extends Ir{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}class Qr extends St{constructor(){super(),this.isGroup=!0,this.type="Group"}}const YY={type:"move"};class sC{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new Qr,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new Qr,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new H,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new H),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new Qr,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new H,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new H),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const n of e.hand.values())this._getHandJoint(t,n)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,n){let i=null,s=null,o=null;const a=this._targetRay,A=this._grip,l=this._hand;if(e&&t.session.visibilityState!=="visible-blurred"){if(l&&e.hand){o=!0;for(const h of e.hand.values()){const m=t.getJointPose(h,n),g=this._getHandJoint(l,h);m!==null&&(g.matrix.fromArray(m.transform.matrix),g.matrix.decompose(g.position,g.rotation,g.scale),g.jointRadius=m.radius),g.visible=m!==null}const c=l.joints["index-finger-tip"],u=l.joints["thumb-tip"],f=c.position.distanceTo(u.position),d=.02,p=.005;l.inputState.pinching&&f>d+p?(l.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!l.inputState.pinching&&f<=d-p&&(l.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else A!==null&&e.gripSpace&&(s=t.getPose(e.gripSpace,n),s!==null&&(A.matrix.fromArray(s.transform.matrix),A.matrix.decompose(A.position,A.rotation,A.scale),s.linearVelocity?(A.hasLinearVelocity=!0,A.linearVelocity.copy(s.linearVelocity)):A.hasLinearVelocity=!1,s.angularVelocity?(A.hasAngularVelocity=!0,A.angularVelocity.copy(s.angularVelocity)):A.hasAngularVelocity=!1));a!==null&&(i=t.getPose(e.targetRaySpace,n),i===null&&s!==null&&(i=s),i!==null&&(a.matrix.fromArray(i.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),i.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(i.linearVelocity)):a.hasLinearVelocity=!1,i.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(i.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(YY)))}return a!==null&&(a.visible=i!==null),A!==null&&(A.visible=s!==null),l!==null&&(l.visible=o!==null),this}_getHandJoint(e,t){if(e.joints[t.jointName]===void 0){const n=new Qr;n.matrixAutoUpdate=!1,n.visible=!1,e.joints[t.jointName]=n,e.add(n)}return e.joints[t.jointName]}}class KY extends En{constructor(e,t,n,i,s,o,a,A,l,c){if(c=c!==void 0?c:Pl,c!==Pl&&c!==Bf)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");n===void 0&&c===Pl&&(n=Ml),n===void 0&&c===Bf&&(n=Ju),super(null,i,s,o,a,A,c,n,l),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=a!==void 0?a:Hn,this.minFilter=A!==void 0?A:Hn,this.flipY=!1,this.generateMipmaps=!1}}class jY extends ol{constructor(e,t){super();const n=this;let i=null,s=1,o=null,a="local-floor",A=null,l=null,c=null,u=null,f=null,d=null;const p=t.getContextAttributes();let h=null,m=null;const g=[],B=[],v=new Set,w=new Map,C=new Ir;C.layers.enable(1),C.viewport=new bt;const I=new Ir;I.layers.enable(2),I.viewport=new bt;const E=[C,I],U=new XY;U.layers.enable(1),U.layers.enable(2);let S=null,V=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(D){let x=g[D];return x===void 0&&(x=new sC,g[D]=x),x.getTargetRaySpace()},this.getControllerGrip=function(D){let x=g[D];return x===void 0&&(x=new sC,g[D]=x),x.getGripSpace()},this.getHand=function(D){let x=g[D];return x===void 0&&(x=new sC,g[D]=x),x.getHandSpace()};function J(D){const x=B.indexOf(D.inputSource);if(x===-1)return;const P=g[x];P!==void 0&&P.dispatchEvent({type:D.type,data:D.inputSource})}function z(){i.removeEventListener("select",J),i.removeEventListener("selectstart",J),i.removeEventListener("selectend",J),i.removeEventListener("squeeze",J),i.removeEventListener("squeezestart",J),i.removeEventListener("squeezeend",J),i.removeEventListener("end",z),i.removeEventListener("inputsourceschange",R);for(let D=0;D<g.length;D++){const x=B[D];x!==null&&(B[D]=null,g[D].disconnect(x))}S=null,V=null,e.setRenderTarget(h),f=null,u=null,c=null,i=null,m=null,G.stop(),n.isPresenting=!1,n.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(D){s=D,n.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(D){a=D,n.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return A||o},this.setReferenceSpace=function(D){A=D},this.getBaseLayer=function(){return u!==null?u:f},this.getBinding=function(){return c},this.getFrame=function(){return d},this.getSession=function(){return i},this.setSession=async function(D){if(i=D,i!==null){if(h=e.getRenderTarget(),i.addEventListener("select",J),i.addEventListener("selectstart",J),i.addEventListener("selectend",J),i.addEventListener("squeeze",J),i.addEventListener("squeezestart",J),i.addEventListener("squeezeend",J),i.addEventListener("end",z),i.addEventListener("inputsourceschange",R),p.xrCompatible!==!0&&await t.makeXRCompatible(),i.renderState.layers===void 0||e.capabilities.isWebGL2===!1){const x={antialias:i.renderState.layers===void 0?p.antialias:!0,alpha:p.alpha,depth:p.depth,stencil:p.stencil,framebufferScaleFactor:s};f=new XRWebGLLayer(i,t,x),i.updateRenderState({baseLayer:f}),m=new KA(f.framebufferWidth,f.framebufferHeight,{format:ei,type:YA,encoding:e.outputEncoding,stencilBuffer:p.stencil})}else{let x=null,P=null,oe=null;p.depth&&(oe=p.stencil?35056:33190,x=p.stencil?Bf:Pl,P=p.stencil?Ju:Ml);const M={colorFormat:32856,depthFormat:oe,scaleFactor:s};c=new XRWebGLBinding(i,t),u=c.createProjectionLayer(M),i.updateRenderState({layers:[u]}),m=new KA(u.textureWidth,u.textureHeight,{format:ei,type:YA,depthTexture:new KY(u.textureWidth,u.textureHeight,P,void 0,void 0,void 0,void 0,void 0,void 0,x),stencilBuffer:p.stencil,encoding:e.outputEncoding,samples:p.antialias?4:0});const k=e.properties.get(m);k.__ignoreDepthValues=u.ignoreDepthValues}m.isXRRenderTarget=!0,this.setFoveation(1),A=null,o=await i.requestReferenceSpace(a),G.setContext(i),G.start(),n.isPresenting=!0,n.dispatchEvent({type:"sessionstart"})}};function R(D){for(let x=0;x<D.removed.length;x++){const P=D.removed[x],oe=B.indexOf(P);oe>=0&&(B[oe]=null,g[oe].disconnect(P))}for(let x=0;x<D.added.length;x++){const P=D.added[x];let oe=B.indexOf(P);if(oe===-1){for(let k=0;k<g.length;k++)if(k>=B.length){B.push(P),oe=k;break}else if(B[k]===null){B[k]=P,oe=k;break}if(oe===-1)break}const M=g[oe];M&&M.connect(P)}}const y=new H,Q=new H;function _(D,x,P){y.setFromMatrixPosition(x.matrixWorld),Q.setFromMatrixPosition(P.matrixWorld);const oe=y.distanceTo(Q),M=x.projectionMatrix.elements,k=P.projectionMatrix.elements,q=M[14]/(M[10]-1),ee=M[14]/(M[10]+1),X=(M[9]+1)/M[5],$=(M[9]-1)/M[5],se=(M[8]-1)/M[0],ae=(k[8]+1)/k[0],de=q*se,fe=q*ae,ge=oe/(-se+ae),Qe=ge*-se;x.matrixWorld.decompose(D.position,D.quaternion,D.scale),D.translateX(Qe),D.translateZ(ge),D.matrixWorld.compose(D.position,D.quaternion,D.scale),D.matrixWorldInverse.copy(D.matrixWorld).invert();const Ue=q+ge,xe=ee+ge,Fe=de-Qe,Ne=fe+(oe-Qe),Ze=X*ee/xe*Ue,j=$*ee/xe*Ue;D.projectionMatrix.makePerspective(Fe,Ne,Ze,j,Ue,xe)}function L(D,x){x===null?D.matrixWorld.copy(D.matrix):D.matrixWorld.multiplyMatrices(x.matrixWorld,D.matrix),D.matrixWorldInverse.copy(D.matrixWorld).invert()}this.updateCamera=function(D){if(i===null)return;U.near=I.near=C.near=D.near,U.far=I.far=C.far=D.far,(S!==U.near||V!==U.far)&&(i.updateRenderState({depthNear:U.near,depthFar:U.far}),S=U.near,V=U.far);const x=D.parent,P=U.cameras;L(U,x);for(let M=0;M<P.length;M++)L(P[M],x);U.matrixWorld.decompose(U.position,U.quaternion,U.scale),D.matrix.copy(U.matrix),D.matrix.decompose(D.position,D.quaternion,D.scale);const oe=D.children;for(let M=0,k=oe.length;M<k;M++)oe[M].updateMatrixWorld(!0);P.length===2?_(U,C,I):U.projectionMatrix.copy(C.projectionMatrix)},this.getCamera=function(){return U},this.getFoveation=function(){if(u!==null)return u.fixedFoveation;if(f!==null)return f.fixedFoveation},this.setFoveation=function(D){u!==null&&(u.fixedFoveation=D),f!==null&&f.fixedFoveation!==void 0&&(f.fixedFoveation=D)},this.getPlanes=function(){return v};let T=null;function Z(D,x){if(l=x.getViewerPose(A||o),d=x,l!==null){const P=l.views;f!==null&&(e.setRenderTargetFramebuffer(m,f.framebuffer),e.setRenderTarget(m));let oe=!1;P.length!==U.cameras.length&&(U.cameras.length=0,oe=!0);for(let M=0;M<P.length;M++){const k=P[M];let q=null;if(f!==null)q=f.getViewport(k);else{const X=c.getViewSubImage(u,k);q=X.viewport,M===0&&(e.setRenderTargetTextures(m,X.colorTexture,u.ignoreDepthValues?void 0:X.depthStencilTexture),e.setRenderTarget(m))}let ee=E[M];ee===void 0&&(ee=new Ir,ee.layers.enable(M),ee.viewport=new bt,E[M]=ee),ee.matrix.fromArray(k.transform.matrix),ee.projectionMatrix.fromArray(k.projectionMatrix),ee.viewport.set(q.x,q.y,q.width,q.height),M===0&&U.matrix.copy(ee.matrix),oe===!0&&U.cameras.push(ee)}}for(let P=0;P<g.length;P++){const oe=B[P],M=g[P];oe!==null&&M!==void 0&&M.update(oe,x,A||o)}if(T&&T(D,x),x.detectedPlanes){n.dispatchEvent({type:"planesdetected",data:x.detectedPlanes});let P=null;for(const oe of v)x.detectedPlanes.has(oe)||(P===null&&(P=[]),P.push(oe));if(P!==null)for(const oe of P)v.delete(oe),w.delete(oe),n.dispatchEvent({type:"planeremoved",data:oe});for(const oe of x.detectedPlanes)if(!v.has(oe))v.add(oe),w.set(oe,x.lastChangedTime),n.dispatchEvent({type:"planeadded",data:oe});else{const M=w.get(oe);oe.lastChangedTime>M&&(w.set(oe,oe.lastChangedTime),n.dispatchEvent({type:"planechanged",data:oe}))}}d=null}const G=new mV;G.setAnimationLoop(Z),this.setAnimationLoop=function(D){T=D},this.dispose=function(){}}}function qY(r,e){function t(h,m){m.color.getRGB(h.fogColor.value,dV(r)),m.isFog?(h.fogNear.value=m.near,h.fogFar.value=m.far):m.isFogExp2&&(h.fogDensity.value=m.density)}function n(h,m,g,B,v){m.isMeshBasicMaterial||m.isMeshLambertMaterial?i(h,m):m.isMeshToonMaterial?(i(h,m),c(h,m)):m.isMeshPhongMaterial?(i(h,m),l(h,m)):m.isMeshStandardMaterial?(i(h,m),u(h,m),m.isMeshPhysicalMaterial&&f(h,m,v)):m.isMeshMatcapMaterial?(i(h,m),d(h,m)):m.isMeshDepthMaterial?i(h,m):m.isMeshDistanceMaterial?(i(h,m),p(h,m)):m.isMeshNormalMaterial?i(h,m):m.isLineBasicMaterial?(s(h,m),m.isLineDashedMaterial&&o(h,m)):m.isPointsMaterial?a(h,m,g,B):m.isSpriteMaterial?A(h,m):m.isShadowMaterial?(h.color.value.copy(m.color),h.opacity.value=m.opacity):m.isShaderMaterial&&(m.uniformsNeedUpdate=!1)}function i(h,m){h.opacity.value=m.opacity,m.color&&h.diffuse.value.copy(m.color),m.emissive&&h.emissive.value.copy(m.emissive).multiplyScalar(m.emissiveIntensity),m.map&&(h.map.value=m.map),m.alphaMap&&(h.alphaMap.value=m.alphaMap),m.bumpMap&&(h.bumpMap.value=m.bumpMap,h.bumpScale.value=m.bumpScale,m.side===oi&&(h.bumpScale.value*=-1)),m.displacementMap&&(h.displacementMap.value=m.displacementMap,h.displacementScale.value=m.displacementScale,h.displacementBias.value=m.displacementBias),m.emissiveMap&&(h.emissiveMap.value=m.emissiveMap),m.normalMap&&(h.normalMap.value=m.normalMap,h.normalScale.value.copy(m.normalScale),m.side===oi&&h.normalScale.value.negate()),m.specularMap&&(h.specularMap.value=m.specularMap),m.alphaTest>0&&(h.alphaTest.value=m.alphaTest);const g=e.get(m).envMap;if(g&&(h.envMap.value=g,h.flipEnvMap.value=g.isCubeTexture&&g.isRenderTargetTexture===!1?-1:1,h.reflectivity.value=m.reflectivity,h.ior.value=m.ior,h.refractionRatio.value=m.refractionRatio),m.lightMap){h.lightMap.value=m.lightMap;const w=r.physicallyCorrectLights!==!0?Math.PI:1;h.lightMapIntensity.value=m.lightMapIntensity*w}m.aoMap&&(h.aoMap.value=m.aoMap,h.aoMapIntensity.value=m.aoMapIntensity);let B;m.map?B=m.map:m.specularMap?B=m.specularMap:m.displacementMap?B=m.displacementMap:m.normalMap?B=m.normalMap:m.bumpMap?B=m.bumpMap:m.roughnessMap?B=m.roughnessMap:m.metalnessMap?B=m.metalnessMap:m.alphaMap?B=m.alphaMap:m.emissiveMap?B=m.emissiveMap:m.clearcoatMap?B=m.clearcoatMap:m.clearcoatNormalMap?B=m.clearcoatNormalMap:m.clearcoatRoughnessMap?B=m.clearcoatRoughnessMap:m.iridescenceMap?B=m.iridescenceMap:m.iridescenceThicknessMap?B=m.iridescenceThicknessMap:m.specularIntensityMap?B=m.specularIntensityMap:m.specularColorMap?B=m.specularColorMap:m.transmissionMap?B=m.transmissionMap:m.thicknessMap?B=m.thicknessMap:m.sheenColorMap?B=m.sheenColorMap:m.sheenRoughnessMap&&(B=m.sheenRoughnessMap),B!==void 0&&(B.isWebGLRenderTarget&&(B=B.texture),B.matrixAutoUpdate===!0&&B.updateMatrix(),h.uvTransform.value.copy(B.matrix));let v;m.aoMap?v=m.aoMap:m.lightMap&&(v=m.lightMap),v!==void 0&&(v.isWebGLRenderTarget&&(v=v.texture),v.matrixAutoUpdate===!0&&v.updateMatrix(),h.uv2Transform.value.copy(v.matrix))}function s(h,m){h.diffuse.value.copy(m.color),h.opacity.value=m.opacity}function o(h,m){h.dashSize.value=m.dashSize,h.totalSize.value=m.dashSize+m.gapSize,h.scale.value=m.scale}function a(h,m,g,B){h.diffuse.value.copy(m.color),h.opacity.value=m.opacity,h.size.value=m.size*g,h.scale.value=B*.5,m.map&&(h.map.value=m.map),m.alphaMap&&(h.alphaMap.value=m.alphaMap),m.alphaTest>0&&(h.alphaTest.value=m.alphaTest);let v;m.map?v=m.map:m.alphaMap&&(v=m.alphaMap),v!==void 0&&(v.matrixAutoUpdate===!0&&v.updateMatrix(),h.uvTransform.value.copy(v.matrix))}function A(h,m){h.diffuse.value.copy(m.color),h.opacity.value=m.opacity,h.rotation.value=m.rotation,m.map&&(h.map.value=m.map),m.alphaMap&&(h.alphaMap.value=m.alphaMap),m.alphaTest>0&&(h.alphaTest.value=m.alphaTest);let g;m.map?g=m.map:m.alphaMap&&(g=m.alphaMap),g!==void 0&&(g.matrixAutoUpdate===!0&&g.updateMatrix(),h.uvTransform.value.copy(g.matrix))}function l(h,m){h.specular.value.copy(m.specular),h.shininess.value=Math.max(m.shininess,1e-4)}function c(h,m){m.gradientMap&&(h.gradientMap.value=m.gradientMap)}function u(h,m){h.roughness.value=m.roughness,h.metalness.value=m.metalness,m.roughnessMap&&(h.roughnessMap.value=m.roughnessMap),m.metalnessMap&&(h.metalnessMap.value=m.metalnessMap),e.get(m).envMap&&(h.envMapIntensity.value=m.envMapIntensity)}function f(h,m,g){h.ior.value=m.ior,m.sheen>0&&(h.sheenColor.value.copy(m.sheenColor).multiplyScalar(m.sheen),h.sheenRoughness.value=m.sheenRoughness,m.sheenColorMap&&(h.sheenColorMap.value=m.sheenColorMap),m.sheenRoughnessMap&&(h.sheenRoughnessMap.value=m.sheenRoughnessMap)),m.clearcoat>0&&(h.clearcoat.value=m.clearcoat,h.clearcoatRoughness.value=m.clearcoatRoughness,m.clearcoatMap&&(h.clearcoatMap.value=m.clearcoatMap),m.clearcoatRoughnessMap&&(h.clearcoatRoughnessMap.value=m.clearcoatRoughnessMap),m.clearcoatNormalMap&&(h.clearcoatNormalScale.value.copy(m.clearcoatNormalScale),h.clearcoatNormalMap.value=m.clearcoatNormalMap,m.side===oi&&h.clearcoatNormalScale.value.negate())),m.iridescence>0&&(h.iridescence.value=m.iridescence,h.iridescenceIOR.value=m.iridescenceIOR,h.iridescenceThicknessMinimum.value=m.iridescenceThicknessRange[0],h.iridescenceThicknessMaximum.value=m.iridescenceThicknessRange[1],m.iridescenceMap&&(h.iridescenceMap.value=m.iridescenceMap),m.iridescenceThicknessMap&&(h.iridescenceThicknessMap.value=m.iridescenceThicknessMap)),m.transmission>0&&(h.transmission.value=m.transmission,h.transmissionSamplerMap.value=g.texture,h.transmissionSamplerSize.value.set(g.width,g.height),m.transmissionMap&&(h.transmissionMap.value=m.transmissionMap),h.thickness.value=m.thickness,m.thicknessMap&&(h.thicknessMap.value=m.thicknessMap),h.attenuationDistance.value=m.attenuationDistance,h.attenuationColor.value.copy(m.attenuationColor)),h.specularIntensity.value=m.specularIntensity,h.specularColor.value.copy(m.specularColor),m.specularIntensityMap&&(h.specularIntensityMap.value=m.specularIntensityMap),m.specularColorMap&&(h.specularColorMap.value=m.specularColorMap)}function d(h,m){m.matcap&&(h.matcap.value=m.matcap)}function p(h,m){h.referencePosition.value.copy(m.referencePosition),h.nearDistance.value=m.nearDistance,h.farDistance.value=m.farDistance}return{refreshFogUniforms:t,refreshMaterialUniforms:n}}function $Y(r,e,t,n){let i={},s={},o=[];const a=t.isWebGL2?r.getParameter(35375):0;function A(B,v){const w=v.program;n.uniformBlockBinding(B,w)}function l(B,v){let w=i[B.id];w===void 0&&(p(B),w=c(B),i[B.id]=w,B.addEventListener("dispose",m));const C=v.program;n.updateUBOMapping(B,C);const I=e.render.frame;s[B.id]!==I&&(f(B),s[B.id]=I)}function c(B){const v=u();B.__bindingPointIndex=v;const w=r.createBuffer(),C=B.__size,I=B.usage;return r.bindBuffer(35345,w),r.bufferData(35345,C,I),r.bindBuffer(35345,null),r.bindBufferBase(35345,v,w),w}function u(){for(let B=0;B<a;B++)if(o.indexOf(B)===-1)return o.push(B),B;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function f(B){const v=i[B.id],w=B.uniforms,C=B.__cache;r.bindBuffer(35345,v);for(let I=0,E=w.length;I<E;I++){const U=w[I];if(d(U,I,C)===!0){const S=U.__offset,V=Array.isArray(U.value)?U.value:[U.value];let J=0;for(let z=0;z<V.length;z++){const R=V[z],y=h(R);typeof R=="number"?(U.__data[0]=R,r.bufferSubData(35345,S+J,U.__data)):R.isMatrix3?(U.__data[0]=R.elements[0],U.__data[1]=R.elements[1],U.__data[2]=R.elements[2],U.__data[3]=R.elements[0],U.__data[4]=R.elements[3],U.__data[5]=R.elements[4],U.__data[6]=R.elements[5],U.__data[7]=R.elements[0],U.__data[8]=R.elements[6],U.__data[9]=R.elements[7],U.__data[10]=R.elements[8],U.__data[11]=R.elements[0]):(R.toArray(U.__data,J),J+=y.storage/Float32Array.BYTES_PER_ELEMENT)}r.bufferSubData(35345,S,U.__data)}}r.bindBuffer(35345,null)}function d(B,v,w){const C=B.value;if(w[v]===void 0){if(typeof C=="number")w[v]=C;else{const I=Array.isArray(C)?C:[C],E=[];for(let U=0;U<I.length;U++)E.push(I[U].clone());w[v]=E}return!0}else if(typeof C=="number"){if(w[v]!==C)return w[v]=C,!0}else{const I=Array.isArray(w[v])?w[v]:[w[v]],E=Array.isArray(C)?C:[C];for(let U=0;U<I.length;U++){const S=I[U];if(S.equals(E[U])===!1)return S.copy(E[U]),!0}}return!1}function p(B){const v=B.uniforms;let w=0;const C=16;let I=0;for(let E=0,U=v.length;E<U;E++){const S=v[E],V={boundary:0,storage:0},J=Array.isArray(S.value)?S.value:[S.value];for(let z=0,R=J.length;z<R;z++){const y=J[z],Q=h(y);V.boundary+=Q.boundary,V.storage+=Q.storage}if(S.__data=new Float32Array(V.storage/Float32Array.BYTES_PER_ELEMENT),S.__offset=w,E>0){I=w%C;const z=C-I;I!==0&&z-V.boundary<0&&(w+=C-I,S.__offset=w)}w+=V.storage}return I=w%C,I>0&&(w+=C-I),B.__size=w,B.__cache={},this}function h(B){const v={boundary:0,storage:0};return typeof B=="number"?(v.boundary=4,v.storage=4):B.isVector2?(v.boundary=8,v.storage=8):B.isVector3||B.isColor?(v.boundary=16,v.storage=12):B.isVector4?(v.boundary=16,v.storage=16):B.isMatrix3?(v.boundary=48,v.storage=48):B.isMatrix4?(v.boundary=64,v.storage=64):B.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",B),v}function m(B){const v=B.target;v.removeEventListener("dispose",m);const w=o.indexOf(v.__bindingPointIndex);o.splice(w,1),r.deleteBuffer(i[v.id]),delete i[v.id],delete s[v.id]}function g(){for(const B in i)r.deleteBuffer(i[B]);o=[],i={},s={}}return{bind:A,update:l,dispose:g}}function eK(){const r=$h("canvas");return r.style.display="block",r}function Fx(r={}){this.isWebGLRenderer=!0;const e=r.canvas!==void 0?r.canvas:eK(),t=r.context!==void 0?r.context:null,n=r.depth!==void 0?r.depth:!0,i=r.stencil!==void 0?r.stencil:!0,s=r.antialias!==void 0?r.antialias:!1,o=r.premultipliedAlpha!==void 0?r.premultipliedAlpha:!0,a=r.preserveDrawingBuffer!==void 0?r.preserveDrawingBuffer:!1,A=r.powerPreference!==void 0?r.powerPreference:"default",l=r.failIfMajorPerformanceCaveat!==void 0?r.failIfMajorPerformanceCaveat:!1;let c;t!==null?c=t.getContextAttributes().alpha:c=r.alpha!==void 0?r.alpha:!1;let u=null,f=null;const d=[],p=[];this.domElement=e,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputEncoding=gs,this.physicallyCorrectLights=!1,this.toneMapping=Qa,this.toneMappingExposure=1;const h=this;let m=!1,g=0,B=0,v=null,w=-1,C=null;const I=new bt,E=new bt;let U=null,S=e.width,V=e.height,J=1,z=null,R=null;const y=new bt(0,0,S,V),Q=new bt(0,0,S,V);let _=!1;const L=new Cx;let T=!1,Z=!1,G=null;const D=new Le,x=new Je,P=new H,oe={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function M(){return v===null?J:1}let k=t;function q(Y,Ae){for(let he=0;he<Y.length;he++){const ce=Y[he],pe=e.getContext(ce,Ae);if(pe!==null)return pe}return null}try{const Y={alpha:!0,depth:n,stencil:i,antialias:s,premultipliedAlpha:o,preserveDrawingBuffer:a,powerPreference:A,failIfMajorPerformanceCaveat:l};if("setAttribute"in e&&e.setAttribute("data-engine",`three.js r${es}`),e.addEventListener("webglcontextlost",we,!1),e.addEventListener("webglcontextrestored",ye,!1),e.addEventListener("webglcontextcreationerror",Se,!1),k===null){const Ae=["webgl2","webgl","experimental-webgl"];if(h.isWebGL1Renderer===!0&&Ae.shift(),k=q(Ae,Y),k===null)throw q(Ae)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}k.getShaderPrecisionFormat===void 0&&(k.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(Y){throw console.error("THREE.WebGLRenderer: "+Y.message),Y}let ee,X,$,se,ae,de,fe,ge,Qe,Ue,xe,Fe,Ne,Ze,j,O,le,ue,Ce,W,b,F,N,K;function te(){ee=new uX(k),X=new sX(k,ee,r),ee.init(X),F=new zY(k,ee,X),$=new OY(k,ee,X),se=new hX,ae=new _Y,de=new HY(k,ee,$,ae,X,F,se),fe=new aX(h),ge=new cX(h),Qe=new F4(k,X),N=new rX(k,ee,Qe,X),Ue=new fX(k,Qe,se,N),xe=new BX(k,Ue,Qe,se),Ce=new mX(k,X,de),O=new oX(ae),Fe=new SY(h,fe,ge,ee,X,N,O),Ne=new qY(h,ae),Ze=new MY,j=new LY(ee,X),ue=new nX(h,fe,ge,$,xe,c,o),le=new GY(h,xe,X),K=new $Y(k,se,X,$),W=new iX(k,ee,se,X),b=new dX(k,ee,se,X),se.programs=Fe.programs,h.capabilities=X,h.extensions=ee,h.properties=ae,h.renderLists=Ze,h.shadowMap=le,h.state=$,h.info=se}te();const ne=new jY(h,k);this.xr=ne,this.getContext=function(){return k},this.getContextAttributes=function(){return k.getContextAttributes()},this.forceContextLoss=function(){const Y=ee.get("WEBGL_lose_context");Y&&Y.loseContext()},this.forceContextRestore=function(){const Y=ee.get("WEBGL_lose_context");Y&&Y.restoreContext()},this.getPixelRatio=function(){return J},this.setPixelRatio=function(Y){Y!==void 0&&(J=Y,this.setSize(S,V,!1))},this.getSize=function(Y){return Y.set(S,V)},this.setSize=function(Y,Ae,he){if(ne.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}S=Y,V=Ae,e.width=Math.floor(Y*J),e.height=Math.floor(Ae*J),he!==!1&&(e.style.width=Y+"px",e.style.height=Ae+"px"),this.setViewport(0,0,Y,Ae)},this.getDrawingBufferSize=function(Y){return Y.set(S*J,V*J).floor()},this.setDrawingBufferSize=function(Y,Ae,he){S=Y,V=Ae,J=he,e.width=Math.floor(Y*he),e.height=Math.floor(Ae*he),this.setViewport(0,0,Y,Ae)},this.getCurrentViewport=function(Y){return Y.copy(I)},this.getViewport=function(Y){return Y.copy(y)},this.setViewport=function(Y,Ae,he,ce){Y.isVector4?y.set(Y.x,Y.y,Y.z,Y.w):y.set(Y,Ae,he,ce),$.viewport(I.copy(y).multiplyScalar(J).floor())},this.getScissor=function(Y){return Y.copy(Q)},this.setScissor=function(Y,Ae,he,ce){Y.isVector4?Q.set(Y.x,Y.y,Y.z,Y.w):Q.set(Y,Ae,he,ce),$.scissor(E.copy(Q).multiplyScalar(J).floor())},this.getScissorTest=function(){return _},this.setScissorTest=function(Y){$.setScissorTest(_=Y)},this.setOpaqueSort=function(Y){z=Y},this.setTransparentSort=function(Y){R=Y},this.getClearColor=function(Y){return Y.copy(ue.getClearColor())},this.setClearColor=function(){ue.setClearColor.apply(ue,arguments)},this.getClearAlpha=function(){return ue.getClearAlpha()},this.setClearAlpha=function(){ue.setClearAlpha.apply(ue,arguments)},this.clear=function(Y=!0,Ae=!0,he=!0){let ce=0;Y&&(ce|=16384),Ae&&(ce|=256),he&&(ce|=1024),k.clear(ce)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){e.removeEventListener("webglcontextlost",we,!1),e.removeEventListener("webglcontextrestored",ye,!1),e.removeEventListener("webglcontextcreationerror",Se,!1),Ze.dispose(),j.dispose(),ae.dispose(),fe.dispose(),ge.dispose(),xe.dispose(),N.dispose(),K.dispose(),Fe.dispose(),ne.dispose(),ne.removeEventListener("sessionstart",be),ne.removeEventListener("sessionend",Ge),G&&(G.dispose(),G=null),Ye.stop()};function we(Y){Y.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),m=!0}function ye(){console.log("THREE.WebGLRenderer: Context Restored."),m=!1;const Y=se.autoReset,Ae=le.enabled,he=le.autoUpdate,ce=le.needsUpdate,pe=le.type;te(),se.autoReset=Y,le.enabled=Ae,le.autoUpdate=he,le.needsUpdate=ce,le.type=pe}function Se(Y){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",Y.statusMessage)}function We(Y){const Ae=Y.target;Ae.removeEventListener("dispose",We),Re(Ae)}function Re(Y){re(Y),ae.remove(Y)}function re(Y){const Ae=ae.get(Y).programs;Ae!==void 0&&(Ae.forEach(function(he){Fe.releaseProgram(he)}),Y.isShaderMaterial&&Fe.releaseShaderCache(Y))}this.renderBufferDirect=function(Y,Ae,he,ce,pe,Te){Ae===null&&(Ae=oe);const tt=pe.isMesh&&pe.matrixWorld.determinant()<0,He=Fs(Y,Ae,he,ce,pe);$.setMaterial(ce,tt);let ze=he.index,At=1;ce.wireframe===!0&&(ze=Ue.getWireframeAttribute(he),At=2);const st=he.drawRange,ot=he.attributes.position;let Wt=st.start*At,hn=(st.start+st.count)*At;Te!==null&&(Wt=Math.max(Wt,Te.start*At),hn=Math.min(hn,(Te.start+Te.count)*At)),ze!==null?(Wt=Math.max(Wt,0),hn=Math.min(hn,ze.count)):ot!=null&&(Wt=Math.max(Wt,0),hn=Math.min(hn,ot.count));const fi=hn-Wt;if(fi<0||fi===1/0)return;N.setup(pe,ce,He,he,ze);let Is,tn=W;if(ze!==null&&(Is=Qe.get(ze),tn=b,tn.setIndex(Is)),pe.isMesh)ce.wireframe===!0?($.setLineWidth(ce.wireframeLinewidth*M()),tn.setMode(1)):tn.setMode(4);else if(pe.isLine){let ft=ce.linewidth;ft===void 0&&(ft=1),$.setLineWidth(ft*M()),pe.isLineSegments?tn.setMode(1):pe.isLineLoop?tn.setMode(2):tn.setMode(3)}else pe.isPoints?tn.setMode(0):pe.isSprite&&tn.setMode(4);if(pe.isInstancedMesh)tn.renderInstances(Wt,fi,pe.count);else if(he.isInstancedBufferGeometry){const ft=he._maxInstanceCount!==void 0?he._maxInstanceCount:1/0,ll=Math.min(he.instanceCount,ft);tn.renderInstances(Wt,fi,ll)}else tn.render(Wt,fi)},this.compile=function(Y,Ae){function he(ce,pe,Te){ce.transparent===!0&&ce.side===lg?(ce.side=oi,ce.needsUpdate=!0,ct(ce,pe,Te),ce.side=Do,ce.needsUpdate=!0,ct(ce,pe,Te),ce.side=lg):ct(ce,pe,Te)}f=j.get(Y),f.init(),p.push(f),Y.traverseVisible(function(ce){ce.isLight&&ce.layers.test(Ae.layers)&&(f.pushLight(ce),ce.castShadow&&f.pushShadow(ce))}),f.setupLights(h.physicallyCorrectLights),Y.traverse(function(ce){const pe=ce.material;if(pe)if(Array.isArray(pe))for(let Te=0;Te<pe.length;Te++){const tt=pe[Te];he(tt,Y,ce)}else he(pe,Y,ce)}),p.pop(),f=null};let Be=null;function ve(Y){Be&&Be(Y)}function be(){Ye.stop()}function Ge(){Ye.start()}const Ye=new mV;Ye.setAnimationLoop(ve),typeof self<"u"&&Ye.setContext(self),this.setAnimationLoop=function(Y){Be=Y,ne.setAnimationLoop(Y),Y===null?Ye.stop():Ye.start()},ne.addEventListener("sessionstart",be),ne.addEventListener("sessionend",Ge),this.render=function(Y,Ae){if(Ae!==void 0&&Ae.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(m===!0)return;Y.matrixWorldAutoUpdate===!0&&Y.updateMatrixWorld(),Ae.parent===null&&Ae.matrixWorldAutoUpdate===!0&&Ae.updateMatrixWorld(),ne.enabled===!0&&ne.isPresenting===!0&&(ne.cameraAutoUpdate===!0&&ne.updateCamera(Ae),Ae=ne.getCamera()),Y.isScene===!0&&Y.onBeforeRender(h,Y,Ae,v),f=j.get(Y,p.length),f.init(),p.push(f),D.multiplyMatrices(Ae.projectionMatrix,Ae.matrixWorldInverse),L.setFromProjectionMatrix(D),Z=this.localClippingEnabled,T=O.init(this.clippingPlanes,Z,Ae),u=Ze.get(Y,d.length),u.init(),d.push(u),rt(Y,Ae,0,h.sortObjects),u.finish(),h.sortObjects===!0&&u.sort(z,R),T===!0&&O.beginShadows();const he=f.state.shadowsArray;if(le.render(he,Y,Ae),T===!0&&O.endShadows(),this.info.autoReset===!0&&this.info.reset(),ue.render(u,Y),f.setupLights(h.physicallyCorrectLights),Ae.isArrayCamera){const ce=Ae.cameras;for(let pe=0,Te=ce.length;pe<Te;pe++){const tt=ce[pe];Yt(u,Y,tt,tt.viewport)}}else Yt(u,Y,Ae);v!==null&&(de.updateMultisampleRenderTarget(v),de.updateRenderTargetMipmap(v)),Y.isScene===!0&&Y.onAfterRender(h,Y,Ae),N.resetDefaultState(),w=-1,C=null,p.pop(),p.length>0?f=p[p.length-1]:f=null,d.pop(),d.length>0?u=d[d.length-1]:u=null};function rt(Y,Ae,he,ce){if(Y.visible===!1)return;if(Y.layers.test(Ae.layers)){if(Y.isGroup)he=Y.renderOrder;else if(Y.isLOD)Y.autoUpdate===!0&&Y.update(Ae);else if(Y.isLight)f.pushLight(Y),Y.castShadow&&f.pushShadow(Y);else if(Y.isSprite){if(!Y.frustumCulled||L.intersectsSprite(Y)){ce&&P.setFromMatrixPosition(Y.matrixWorld).applyMatrix4(D);const tt=xe.update(Y),He=Y.material;He.visible&&u.push(Y,tt,He,he,P.z,null)}}else if((Y.isMesh||Y.isLine||Y.isPoints)&&(Y.isSkinnedMesh&&Y.skeleton.frame!==se.render.frame&&(Y.skeleton.update(),Y.skeleton.frame=se.render.frame),!Y.frustumCulled||L.intersectsObject(Y))){ce&&P.setFromMatrixPosition(Y.matrixWorld).applyMatrix4(D);const tt=xe.update(Y),He=Y.material;if(Array.isArray(He)){const ze=tt.groups;for(let At=0,st=ze.length;At<st;At++){const ot=ze[At],Wt=He[ot.materialIndex];Wt&&Wt.visible&&u.push(Y,tt,Wt,he,P.z,ot)}}else He.visible&&u.push(Y,tt,He,he,P.z,null)}}const Te=Y.children;for(let tt=0,He=Te.length;tt<He;tt++)rt(Te[tt],Ae,he,ce)}function Yt(Y,Ae,he,ce){const pe=Y.opaque,Te=Y.transmissive,tt=Y.transparent;f.setupLightsView(he),Te.length>0&&gt(pe,Ae,he),ce&&$.viewport(I.copy(ce)),pe.length>0&&qe(pe,Ae,he),Te.length>0&&qe(Te,Ae,he),tt.length>0&&qe(tt,Ae,he),$.buffers.depth.setTest(!0),$.buffers.depth.setMask(!0),$.buffers.color.setMask(!0),$.setPolygonOffset(!1)}function gt(Y,Ae,he){const ce=X.isWebGL2;G===null&&(G=new KA(1,1,{generateMipmaps:!0,type:ee.has("EXT_color_buffer_half_float")?Kh:YA,minFilter:XA,samples:ce&&s===!0?4:0})),h.getDrawingBufferSize(x),ce?G.setSize(x.x,x.y):G.setSize(J0(x.x),J0(x.y));const pe=h.getRenderTarget();h.setRenderTarget(G),h.clear();const Te=h.toneMapping;h.toneMapping=Qa,qe(Y,Ae,he),h.toneMapping=Te,de.updateMultisampleRenderTarget(G),de.updateRenderTargetMipmap(G),h.setRenderTarget(pe)}function qe(Y,Ae,he){const ce=Ae.isScene===!0?Ae.overrideMaterial:null;for(let pe=0,Te=Y.length;pe<Te;pe++){const tt=Y[pe],He=tt.object,ze=tt.geometry,At=ce===null?tt.material:ce,st=tt.group;He.layers.test(he.layers)&&Wn(He,Ae,he,ze,At,st)}}function Wn(Y,Ae,he,ce,pe,Te){Y.onBeforeRender(h,Ae,he,ce,pe,Te),Y.modelViewMatrix.multiplyMatrices(he.matrixWorldInverse,Y.matrixWorld),Y.normalMatrix.getNormalMatrix(Y.modelViewMatrix),pe.onBeforeRender(h,Ae,he,ce,Y,Te),pe.transparent===!0&&pe.side===lg?(pe.side=oi,pe.needsUpdate=!0,h.renderBufferDirect(he,Ae,ce,pe,Y,Te),pe.side=Do,pe.needsUpdate=!0,h.renderBufferDirect(he,Ae,ce,pe,Y,Te),pe.side=lg):h.renderBufferDirect(he,Ae,ce,pe,Y,Te),Y.onAfterRender(h,Ae,he,ce,pe,Te)}function ct(Y,Ae,he){Ae.isScene!==!0&&(Ae=oe);const ce=ae.get(Y),pe=f.state.lights,Te=f.state.shadowsArray,tt=pe.state.version,He=Fe.getParameters(Y,pe.state,Te,Ae,he),ze=Fe.getProgramCacheKey(He);let At=ce.programs;ce.environment=Y.isMeshStandardMaterial?Ae.environment:null,ce.fog=Ae.fog,ce.envMap=(Y.isMeshStandardMaterial?ge:fe).get(Y.envMap||ce.environment),At===void 0&&(Y.addEventListener("dispose",We),At=new Map,ce.programs=At);let st=At.get(ze);if(st!==void 0){if(ce.currentProgram===st&&ce.lightsStateVersion===tt)return kt(Y,He),st}else He.uniforms=Fe.getUniforms(Y),Y.onBuild(he,He,h),Y.onBeforeCompile(He,h),st=Fe.acquireProgram(He,ze),At.set(ze,st),ce.uniforms=He.uniforms;const ot=ce.uniforms;(!Y.isShaderMaterial&&!Y.isRawShaderMaterial||Y.clipping===!0)&&(ot.clippingPlanes=O.uniform),kt(Y,He),ce.needsLights=Lt(Y),ce.lightsStateVersion=tt,ce.needsLights&&(ot.ambientLightColor.value=pe.state.ambient,ot.lightProbe.value=pe.state.probe,ot.directionalLights.value=pe.state.directional,ot.directionalLightShadows.value=pe.state.directionalShadow,ot.spotLights.value=pe.state.spot,ot.spotLightShadows.value=pe.state.spotShadow,ot.rectAreaLights.value=pe.state.rectArea,ot.ltc_1.value=pe.state.rectAreaLTC1,ot.ltc_2.value=pe.state.rectAreaLTC2,ot.pointLights.value=pe.state.point,ot.pointLightShadows.value=pe.state.pointShadow,ot.hemisphereLights.value=pe.state.hemi,ot.directionalShadowMap.value=pe.state.directionalShadowMap,ot.directionalShadowMatrix.value=pe.state.directionalShadowMatrix,ot.spotShadowMap.value=pe.state.spotShadowMap,ot.spotLightMatrix.value=pe.state.spotLightMatrix,ot.spotLightMap.value=pe.state.spotLightMap,ot.pointShadowMap.value=pe.state.pointShadowMap,ot.pointShadowMatrix.value=pe.state.pointShadowMatrix);const Wt=st.getUniforms(),hn=Gm.seqWithValue(Wt.seq,ot);return ce.currentProgram=st,ce.uniformsList=hn,st}function kt(Y,Ae){const he=ae.get(Y);he.outputEncoding=Ae.outputEncoding,he.instancing=Ae.instancing,he.skinning=Ae.skinning,he.morphTargets=Ae.morphTargets,he.morphNormals=Ae.morphNormals,he.morphColors=Ae.morphColors,he.morphTargetsCount=Ae.morphTargetsCount,he.numClippingPlanes=Ae.numClippingPlanes,he.numIntersection=Ae.numClipIntersection,he.vertexAlphas=Ae.vertexAlphas,he.vertexTangents=Ae.vertexTangents,he.toneMapping=Ae.toneMapping}function Fs(Y,Ae,he,ce,pe){Ae.isScene!==!0&&(Ae=oe),de.resetTextureUnits();const Te=Ae.fog,tt=ce.isMeshStandardMaterial?Ae.environment:null,He=v===null?h.outputEncoding:v.isXRRenderTarget===!0?v.texture.encoding:gs,ze=(ce.isMeshStandardMaterial?ge:fe).get(ce.envMap||tt),At=ce.vertexColors===!0&&!!he.attributes.color&&he.attributes.color.itemSize===4,st=!!ce.normalMap&&!!he.attributes.tangent,ot=!!he.morphAttributes.position,Wt=!!he.morphAttributes.normal,hn=!!he.morphAttributes.color,fi=ce.toneMapped?h.toneMapping:Qa,Is=he.morphAttributes.position||he.morphAttributes.normal||he.morphAttributes.color,tn=Is!==void 0?Is.length:0,ft=ae.get(ce),ll=f.state.lights;if(T===!0&&(Z===!0||Y!==C)){const Ar=Y===C&&ce.id===w;O.setState(ce,Y,Ar)}let pn=!1;ce.version===ft.__version?(ft.needsLights&&ft.lightsStateVersion!==ll.state.version||ft.outputEncoding!==He||pe.isInstancedMesh&&ft.instancing===!1||!pe.isInstancedMesh&&ft.instancing===!0||pe.isSkinnedMesh&&ft.skinning===!1||!pe.isSkinnedMesh&&ft.skinning===!0||ft.envMap!==ze||ce.fog===!0&&ft.fog!==Te||ft.numClippingPlanes!==void 0&&(ft.numClippingPlanes!==O.numPlanes||ft.numIntersection!==O.numIntersection)||ft.vertexAlphas!==At||ft.vertexTangents!==st||ft.morphTargets!==ot||ft.morphNormals!==Wt||ft.morphColors!==hn||ft.toneMapping!==fi||X.isWebGL2===!0&&ft.morphTargetsCount!==tn)&&(pn=!0):(pn=!0,ft.__version=ce.version);let Us=ft.currentProgram;pn===!0&&(Us=ct(ce,Ae,pe));let mc=!1,Yo=!1,cl=!1;const Zn=Us.getUniforms(),xs=ft.uniforms;if($.useProgram(Us.program)&&(mc=!0,Yo=!0,cl=!0),ce.id!==w&&(w=ce.id,Yo=!0),mc||C!==Y){if(Zn.setValue(k,"projectionMatrix",Y.projectionMatrix),X.logarithmicDepthBuffer&&Zn.setValue(k,"logDepthBufFC",2/(Math.log(Y.far+1)/Math.LN2)),C!==Y&&(C=Y,Yo=!0,cl=!0),ce.isShaderMaterial||ce.isMeshPhongMaterial||ce.isMeshToonMaterial||ce.isMeshStandardMaterial||ce.envMap){const Ar=Zn.map.cameraPosition;Ar!==void 0&&Ar.setValue(k,P.setFromMatrixPosition(Y.matrixWorld))}(ce.isMeshPhongMaterial||ce.isMeshToonMaterial||ce.isMeshLambertMaterial||ce.isMeshBasicMaterial||ce.isMeshStandardMaterial||ce.isShaderMaterial)&&Zn.setValue(k,"isOrthographic",Y.isOrthographicCamera===!0),(ce.isMeshPhongMaterial||ce.isMeshToonMaterial||ce.isMeshLambertMaterial||ce.isMeshBasicMaterial||ce.isMeshStandardMaterial||ce.isShaderMaterial||ce.isShadowMaterial||pe.isSkinnedMesh)&&Zn.setValue(k,"viewMatrix",Y.matrixWorldInverse)}if(pe.isSkinnedMesh){Zn.setOptional(k,pe,"bindMatrix"),Zn.setOptional(k,pe,"bindMatrixInverse");const Ar=pe.skeleton;Ar&&(X.floatVertexTextures?(Ar.boneTexture===null&&Ar.computeBoneTexture(),Zn.setValue(k,"boneTexture",Ar.boneTexture,de),Zn.setValue(k,"boneTextureSize",Ar.boneTextureSize)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}const ul=he.morphAttributes;if((ul.position!==void 0||ul.normal!==void 0||ul.color!==void 0&&X.isWebGL2===!0)&&Ce.update(pe,he,ce,Us),(Yo||ft.receiveShadow!==pe.receiveShadow)&&(ft.receiveShadow=pe.receiveShadow,Zn.setValue(k,"receiveShadow",pe.receiveShadow)),ce.isMeshGouraudMaterial&&ce.envMap!==null&&(xs.envMap.value=ze,xs.flipEnvMap.value=ze.isCubeTexture&&ze.isRenderTargetTexture===!1?-1:1),Yo&&(Zn.setValue(k,"toneMappingExposure",h.toneMappingExposure),ft.needsLights&&Tt(xs,cl),Te&&ce.fog===!0&&Ne.refreshFogUniforms(xs,Te),Ne.refreshMaterialUniforms(xs,ce,J,V,G),Gm.upload(k,ft.uniformsList,xs,de)),ce.isShaderMaterial&&ce.uniformsNeedUpdate===!0&&(Gm.upload(k,ft.uniformsList,xs,de),ce.uniformsNeedUpdate=!1),ce.isSpriteMaterial&&Zn.setValue(k,"center",pe.center),Zn.setValue(k,"modelViewMatrix",pe.modelViewMatrix),Zn.setValue(k,"normalMatrix",pe.normalMatrix),Zn.setValue(k,"modelMatrix",pe.matrixWorld),ce.isShaderMaterial||ce.isRawShaderMaterial){const Ar=ce.uniformsGroups;for(let kv=0,f3=Ar.length;kv<f3;kv++)if(X.isWebGL2){const vQ=Ar[kv];K.update(vQ,Us),K.bind(vQ,Us)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return Us}function Tt(Y,Ae){Y.ambientLightColor.needsUpdate=Ae,Y.lightProbe.needsUpdate=Ae,Y.directionalLights.needsUpdate=Ae,Y.directionalLightShadows.needsUpdate=Ae,Y.pointLights.needsUpdate=Ae,Y.pointLightShadows.needsUpdate=Ae,Y.spotLights.needsUpdate=Ae,Y.spotLightShadows.needsUpdate=Ae,Y.rectAreaLights.needsUpdate=Ae,Y.hemisphereLights.needsUpdate=Ae}function Lt(Y){return Y.isMeshLambertMaterial||Y.isMeshToonMaterial||Y.isMeshPhongMaterial||Y.isMeshStandardMaterial||Y.isShadowMaterial||Y.isShaderMaterial&&Y.lights===!0}this.getActiveCubeFace=function(){return g},this.getActiveMipmapLevel=function(){return B},this.getRenderTarget=function(){return v},this.setRenderTargetTextures=function(Y,Ae,he){ae.get(Y.texture).__webglTexture=Ae,ae.get(Y.depthTexture).__webglTexture=he;const ce=ae.get(Y);ce.__hasExternalTextures=!0,ce.__hasExternalTextures&&(ce.__autoAllocateDepthBuffer=he===void 0,ce.__autoAllocateDepthBuffer||ee.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),ce.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(Y,Ae){const he=ae.get(Y);he.__webglFramebuffer=Ae,he.__useDefaultFramebuffer=Ae===void 0},this.setRenderTarget=function(Y,Ae=0,he=0){v=Y,g=Ae,B=he;let ce=!0,pe=null,Te=!1,tt=!1;if(Y){const ze=ae.get(Y);ze.__useDefaultFramebuffer!==void 0?($.bindFramebuffer(36160,null),ce=!1):ze.__webglFramebuffer===void 0?de.setupRenderTarget(Y):ze.__hasExternalTextures&&de.rebindTextures(Y,ae.get(Y.texture).__webglTexture,ae.get(Y.depthTexture).__webglTexture);const At=Y.texture;(At.isData3DTexture||At.isDataArrayTexture||At.isCompressedArrayTexture)&&(tt=!0);const st=ae.get(Y).__webglFramebuffer;Y.isWebGLCubeRenderTarget?(pe=st[Ae],Te=!0):X.isWebGL2&&Y.samples>0&&de.useMultisampledRTT(Y)===!1?pe=ae.get(Y).__webglMultisampledFramebuffer:pe=st,I.copy(Y.viewport),E.copy(Y.scissor),U=Y.scissorTest}else I.copy(y).multiplyScalar(J).floor(),E.copy(Q).multiplyScalar(J).floor(),U=_;if($.bindFramebuffer(36160,pe)&&X.drawBuffers&&ce&&$.drawBuffers(Y,pe),$.viewport(I),$.scissor(E),$.setScissorTest(U),Te){const ze=ae.get(Y.texture);k.framebufferTexture2D(36160,36064,34069+Ae,ze.__webglTexture,he)}else if(tt){const ze=ae.get(Y.texture),At=Ae||0;k.framebufferTextureLayer(36160,36064,ze.__webglTexture,he||0,At)}w=-1},this.readRenderTargetPixels=function(Y,Ae,he,ce,pe,Te,tt){if(!(Y&&Y.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let He=ae.get(Y).__webglFramebuffer;if(Y.isWebGLCubeRenderTarget&&tt!==void 0&&(He=He[tt]),He){$.bindFramebuffer(36160,He);try{const ze=Y.texture,At=ze.format,st=ze.type;if(At!==ei&&F.convert(At)!==k.getParameter(35739)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}const ot=st===Kh&&(ee.has("EXT_color_buffer_half_float")||X.isWebGL2&&ee.has("EXT_color_buffer_float"));if(st!==YA&&F.convert(st)!==k.getParameter(35738)&&!(st===CA&&(X.isWebGL2||ee.has("OES_texture_float")||ee.has("WEBGL_color_buffer_float")))&&!ot){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}Ae>=0&&Ae<=Y.width-ce&&he>=0&&he<=Y.height-pe&&k.readPixels(Ae,he,ce,pe,F.convert(At),F.convert(st),Te)}finally{const ze=v!==null?ae.get(v).__webglFramebuffer:null;$.bindFramebuffer(36160,ze)}}},this.copyFramebufferToTexture=function(Y,Ae,he=0){const ce=Math.pow(2,-he),pe=Math.floor(Ae.image.width*ce),Te=Math.floor(Ae.image.height*ce);de.setTexture2D(Ae,0),k.copyTexSubImage2D(3553,he,0,0,Y.x,Y.y,pe,Te),$.unbindTexture()},this.copyTextureToTexture=function(Y,Ae,he,ce=0){const pe=Ae.image.width,Te=Ae.image.height,tt=F.convert(he.format),He=F.convert(he.type);de.setTexture2D(he,0),k.pixelStorei(37440,he.flipY),k.pixelStorei(37441,he.premultiplyAlpha),k.pixelStorei(3317,he.unpackAlignment),Ae.isDataTexture?k.texSubImage2D(3553,ce,Y.x,Y.y,pe,Te,tt,He,Ae.image.data):Ae.isCompressedTexture?k.compressedTexSubImage2D(3553,ce,Y.x,Y.y,Ae.mipmaps[0].width,Ae.mipmaps[0].height,tt,Ae.mipmaps[0].data):k.texSubImage2D(3553,ce,Y.x,Y.y,tt,He,Ae.image),ce===0&&he.generateMipmaps&&k.generateMipmap(3553),$.unbindTexture()},this.copyTextureToTexture3D=function(Y,Ae,he,ce,pe=0){if(h.isWebGL1Renderer){console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");return}const Te=Y.max.x-Y.min.x+1,tt=Y.max.y-Y.min.y+1,He=Y.max.z-Y.min.z+1,ze=F.convert(ce.format),At=F.convert(ce.type);let st;if(ce.isData3DTexture)de.setTexture3D(ce,0),st=32879;else if(ce.isDataArrayTexture)de.setTexture2DArray(ce,0),st=35866;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}k.pixelStorei(37440,ce.flipY),k.pixelStorei(37441,ce.premultiplyAlpha),k.pixelStorei(3317,ce.unpackAlignment);const ot=k.getParameter(3314),Wt=k.getParameter(32878),hn=k.getParameter(3316),fi=k.getParameter(3315),Is=k.getParameter(32877),tn=he.isCompressedTexture?he.mipmaps[0]:he.image;k.pixelStorei(3314,tn.width),k.pixelStorei(32878,tn.height),k.pixelStorei(3316,Y.min.x),k.pixelStorei(3315,Y.min.y),k.pixelStorei(32877,Y.min.z),he.isDataTexture||he.isData3DTexture?k.texSubImage3D(st,pe,Ae.x,Ae.y,Ae.z,Te,tt,He,ze,At,tn.data):he.isCompressedArrayTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),k.compressedTexSubImage3D(st,pe,Ae.x,Ae.y,Ae.z,Te,tt,He,ze,tn.data)):k.texSubImage3D(st,pe,Ae.x,Ae.y,Ae.z,Te,tt,He,ze,At,tn),k.pixelStorei(3314,ot),k.pixelStorei(32878,Wt),k.pixelStorei(3316,hn),k.pixelStorei(3315,fi),k.pixelStorei(32877,Is),pe===0&&ce.generateMipmaps&&k.generateMipmap(st),$.unbindTexture()},this.initTexture=function(Y){Y.isCubeTexture?de.setTextureCube(Y,0):Y.isData3DTexture?de.setTexture3D(Y,0):Y.isDataArrayTexture||Y.isCompressedArrayTexture?de.setTexture2DArray(Y,0):de.setTexture2D(Y,0),$.unbindTexture()},this.resetState=function(){g=0,B=0,v=null,$.reset(),N.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}class tK extends Fx{}tK.prototype.isWebGL1Renderer=!0;let G0=class extends St{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(t.backgroundIntensity=this.backgroundIntensity),t}get autoUpdate(){return console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate}set autoUpdate(e){console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate=e}};class nK{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=zF,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=Ys()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,n){e*=this.stride,n*=t.stride;for(let i=0,s=this.stride;i<s;i++)this.array[e+i]=t.array[n+i];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Ys()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),n=new this.constructor(t,this.stride);return n.setUsage(this.usage),n}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Ys()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const Tr=new H;class Ix{constructor(e,t,n,i=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=n,this.normalized=i}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,n=this.data.count;t<n;t++)Tr.fromBufferAttribute(this,t),Tr.applyMatrix4(e),this.setXYZ(t,Tr.x,Tr.y,Tr.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)Tr.fromBufferAttribute(this,t),Tr.applyNormalMatrix(e),this.setXYZ(t,Tr.x,Tr.y,Tr.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)Tr.fromBufferAttribute(this,t),Tr.transformDirection(e),this.setXYZ(t,Tr.x,Tr.y,Tr.z);return this}setX(e,t){return this.normalized&&(t=Ht(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=Ht(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=Ht(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=Ht(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=Fa(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=Fa(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=Fa(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=Fa(t,this.array)),t}setXY(e,t,n){return e=e*this.data.stride+this.offset,this.normalized&&(t=Ht(t,this.array),n=Ht(n,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this}setXYZ(e,t,n,i){return e=e*this.data.stride+this.offset,this.normalized&&(t=Ht(t,this.array),n=Ht(n,this.array),i=Ht(i,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=i,this}setXYZW(e,t,n,i,s){return e=e*this.data.stride+this.offset,this.normalized&&(t=Ht(t,this.array),n=Ht(n,this.array),i=Ht(i,this.array),s=Ht(s,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=i,this.data.array[e+3]=s,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let n=0;n<this.count;n++){const i=n*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[i+s])}return new pt(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new Ix(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let n=0;n<this.count;n++){const i=n*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[i+s])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}const E1=new H,S1=new bt,_1=new bt,rK=new H,R1=new Le;class lv extends bn{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new Le,this.bindMatrixInverse=new Le}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,this}bind(e,t){this.skeleton=e,t===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new bt,t=this.geometry.attributes.skinWeight;for(let n=0,i=t.count;n<i;n++){e.fromBufferAttribute(t,n);const s=1/e.manhattanLength();s!==1/0?e.multiplyScalar(s):e.set(1,0,0,0),t.setXYZW(n,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode==="attached"?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode==="detached"?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}boneTransform(e,t){const n=this.skeleton,i=this.geometry;S1.fromBufferAttribute(i.attributes.skinIndex,e),_1.fromBufferAttribute(i.attributes.skinWeight,e),E1.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let s=0;s<4;s++){const o=_1.getComponent(s);if(o!==0){const a=S1.getComponent(s);R1.multiplyMatrices(n.bones[a].matrixWorld,n.boneInverses[a]),t.addScaledVector(rK.copy(E1).applyMatrix4(R1),o)}}return t.applyMatrix4(this.bindMatrixInverse)}}class O0 extends St{constructor(){super(),this.isBone=!0,this.type="Bone"}}class iK extends En{constructor(e=null,t=1,n=1,i,s,o,a,A,l=Hn,c=Hn,u,f){super(null,o,a,A,l,c,i,s,u,f),this.isDataTexture=!0,this.image={data:e,width:t,height:n},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const M1=new Le,sK=new Le;class dc{constructor(e=[],t=[]){this.uuid=Ys(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.frame=-1,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),t.length===0)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let n=0,i=this.bones.length;n<i;n++)this.boneInverses.push(new Le)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const n=new Le;this.bones[e]&&n.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(n)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const n=this.bones[e];n&&n.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const n=this.bones[e];n&&(n.parent&&n.parent.isBone?(n.matrix.copy(n.parent.matrixWorld).invert(),n.matrix.multiply(n.matrixWorld)):n.matrix.copy(n.matrixWorld),n.matrix.decompose(n.position,n.quaternion,n.scale))}}update(){const e=this.bones,t=this.boneInverses,n=this.boneMatrices,i=this.boneTexture;for(let s=0,o=e.length;s<o;s++){const a=e[s]?e[s].matrixWorld:sK;M1.multiplyMatrices(a,t[s]),M1.toArray(n,s*16)}i!==null&&(i.needsUpdate=!0)}clone(){return new dc(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=aV(e),e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const n=new iK(t,e,e,ei,CA);return n.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=n,this.boneTextureSize=e,this}getBoneByName(e){for(let t=0,n=this.bones.length;t<n;t++){const i=this.bones[t];if(i.name===e)return i}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let n=0,i=e.bones.length;n<i;n++){const s=e.bones[n];let o=t[s];o===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",s),o=new O0),this.bones.push(o),this.boneInverses.push(new Le().fromArray(e.boneInverses[n]))}return this.init(),this}toJSON(){const e={metadata:{version:4.5,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,n=this.boneInverses;for(let i=0,s=t.length;i<s;i++){const o=t[i];e.bones.push(o.uuid);const a=n[i];e.boneInverses.push(a.toArray())}return e}}class H0 extends pt{constructor(e,t,n,i=1){super(e,t,n),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const T1=new Le,N1=new Le,bg=[],oK=new Le,hd=new bn;class cv extends bn{constructor(e,t,n){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new H0(new Float32Array(n*16),16),this.instanceColor=null,this.count=n,this.frustumCulled=!1;for(let i=0;i<n;i++)this.setMatrixAt(i,oK)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,this}getColorAt(e,t){t.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,e*16)}raycast(e,t){const n=this.matrixWorld,i=this.count;if(hd.geometry=this.geometry,hd.material=this.material,hd.material!==void 0)for(let s=0;s<i;s++){this.getMatrixAt(s,T1),N1.multiplyMatrices(n,T1),hd.matrixWorld=N1,hd.raycast(e,bg);for(let o=0,a=bg.length;o<a;o++){const A=bg[o];A.instanceId=s,A.object=this,t.push(A)}bg.length=0}}setColorAt(e,t){this.instanceColor===null&&(this.instanceColor=new H0(new Float32Array(this.instanceMatrix.count*3),3)),t.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,e*16)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}class Ja extends cs{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new Ve(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const V1=new H,D1=new H,k1=new Le,oC=new Ep,Eg=new fc;class Pf extends St{constructor(e=new Xt,t=new Ja){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,n=[0];for(let i=1,s=t.count;i<s;i++)V1.fromBufferAttribute(t,i-1),D1.fromBufferAttribute(t,i),n[i]=n[i-1],n[i]+=V1.distanceTo(D1);e.setAttribute("lineDistance",new cn(n,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const n=this.geometry,i=this.matrixWorld,s=e.params.Line.threshold,o=n.drawRange;if(n.boundingSphere===null&&n.computeBoundingSphere(),Eg.copy(n.boundingSphere),Eg.applyMatrix4(i),Eg.radius+=s,e.ray.intersectsSphere(Eg)===!1)return;k1.copy(i).invert(),oC.copy(e.ray).applyMatrix4(k1);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),A=a*a,l=new H,c=new H,u=new H,f=new H,d=this.isLineSegments?2:1,p=n.index,m=n.attributes.position;if(p!==null){const g=Math.max(0,o.start),B=Math.min(p.count,o.start+o.count);for(let v=g,w=B-1;v<w;v+=d){const C=p.getX(v),I=p.getX(v+1);if(l.fromBufferAttribute(m,C),c.fromBufferAttribute(m,I),oC.distanceSqToSegment(l,c,f,u)>A)continue;f.applyMatrix4(this.matrixWorld);const U=e.ray.origin.distanceTo(f);U<e.near||U>e.far||t.push({distance:U,point:u.clone().applyMatrix4(this.matrixWorld),index:v,face:null,faceIndex:null,object:this})}}else{const g=Math.max(0,o.start),B=Math.min(m.count,o.start+o.count);for(let v=g,w=B-1;v<w;v+=d){if(l.fromBufferAttribute(m,v),c.fromBufferAttribute(m,v+1),oC.distanceSqToSegment(l,c,f,u)>A)continue;f.applyMatrix4(this.matrixWorld);const I=e.ray.origin.distanceTo(f);I<e.near||I>e.far||t.push({distance:I,point:u.clone().applyMatrix4(this.matrixWorld),index:v,face:null,faceIndex:null,object:this})}}}updateMorphTargets(){const t=this.geometry.morphAttributes,n=Object.keys(t);if(n.length>0){const i=t[n[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=i.length;s<o;s++){const a=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}}const L1=new H,W1=new H;class Rp extends Pf{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,n=[];for(let i=0,s=t.count;i<s;i+=2)L1.fromBufferAttribute(t,i),W1.fromBufferAttribute(t,i+1),n[i]=i===0?0:n[i-1],n[i+1]=n[i]+L1.distanceTo(W1);e.setAttribute("lineDistance",new cn(n,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class aK extends Pf{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}class wV extends cs{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new Ve(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const Z1=new Le,jF=new Ep,Sg=new fc,_g=new H;class AK extends St{constructor(e=new Xt,t=new wV){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=e.material,this.geometry=e.geometry,this}raycast(e,t){const n=this.geometry,i=this.matrixWorld,s=e.params.Points.threshold,o=n.drawRange;if(n.boundingSphere===null&&n.computeBoundingSphere(),Sg.copy(n.boundingSphere),Sg.applyMatrix4(i),Sg.radius+=s,e.ray.intersectsSphere(Sg)===!1)return;Z1.copy(i).invert(),jF.copy(e.ray).applyMatrix4(Z1);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),A=a*a,l=n.index,u=n.attributes.position;if(l!==null){const f=Math.max(0,o.start),d=Math.min(l.count,o.start+o.count);for(let p=f,h=d;p<h;p++){const m=l.getX(p);_g.fromBufferAttribute(u,m),P1(_g,m,A,i,e,t,this)}}else{const f=Math.max(0,o.start),d=Math.min(u.count,o.start+o.count);for(let p=f,h=d;p<h;p++)_g.fromBufferAttribute(u,p),P1(_g,p,A,i,e,t,this)}}updateMorphTargets(){const t=this.geometry.morphAttributes,n=Object.keys(t);if(n.length>0){const i=t[n[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=i.length;s<o;s++){const a=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}}function P1(r,e,t,n,i,s,o){const a=jF.distanceSqToPoint(r);if(a<t){const A=new H;jF.closestPointToPoint(r,A),A.applyMatrix4(n);const l=i.ray.origin.distanceTo(A);if(l<i.near||l>i.far)return;s.push({distance:l,distanceToRay:Math.sqrt(a),point:A,index:e,face:null,object:o})}}class lK{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,t){const n=this.getUtoTmapping(e);return this.getPoint(n,t)}getPoints(e=5){const t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return t}getSpacedPoints(e=5){const t=[];for(let n=0;n<=e;n++)t.push(this.getPointAt(n/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let n,i=this.getPoint(0),s=0;t.push(0);for(let o=1;o<=e;o++)n=this.getPoint(o/e),s+=n.distanceTo(i),t.push(s),i=n;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t){const n=this.getLengths();let i=0;const s=n.length;let o;t?o=t:o=e*n[s-1];let a=0,A=s-1,l;for(;a<=A;)if(i=Math.floor(a+(A-a)/2),l=n[i]-o,l<0)a=i+1;else if(l>0)A=i-1;else{A=i;break}if(i=A,n[i]===o)return i/(s-1);const c=n[i],f=n[i+1]-c,d=(o-c)/f;return(i+d)/(s-1)}getTangent(e,t){let i=e-1e-4,s=e+1e-4;i<0&&(i=0),s>1&&(s=1);const o=this.getPoint(i),a=this.getPoint(s),A=t||(o.isVector2?new Je:new H);return A.copy(a).sub(o).normalize(),A}getTangentAt(e,t){const n=this.getUtoTmapping(e);return this.getTangent(n,t)}computeFrenetFrames(e,t){const n=new H,i=[],s=[],o=[],a=new H,A=new Le;for(let d=0;d<=e;d++){const p=d/e;i[d]=this.getTangentAt(p,new H)}s[0]=new H,o[0]=new H;let l=Number.MAX_VALUE;const c=Math.abs(i[0].x),u=Math.abs(i[0].y),f=Math.abs(i[0].z);c<=l&&(l=c,n.set(1,0,0)),u<=l&&(l=u,n.set(0,1,0)),f<=l&&n.set(0,0,1),a.crossVectors(i[0],n).normalize(),s[0].crossVectors(i[0],a),o[0].crossVectors(i[0],s[0]);for(let d=1;d<=e;d++){if(s[d]=s[d-1].clone(),o[d]=o[d-1].clone(),a.crossVectors(i[d-1],i[d]),a.length()>Number.EPSILON){a.normalize();const p=Math.acos(zn(i[d-1].dot(i[d]),-1,1));s[d].applyMatrix4(A.makeRotationAxis(a,p))}o[d].crossVectors(i[d],s[d])}if(t===!0){let d=Math.acos(zn(s[0].dot(s[e]),-1,1));d/=e,i[0].dot(a.crossVectors(s[0],s[e]))>0&&(d=-d);for(let p=1;p<=e;p++)s[p].applyMatrix4(A.makeRotationAxis(i[p],d*p)),o[p].crossVectors(i[p],s[p])}return{tangents:i,normals:s,binormals:o}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class uv extends Xt{constructor(e=1,t=1,n=1,i=32,s=1,o=!1,a=0,A=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:n,radialSegments:i,heightSegments:s,openEnded:o,thetaStart:a,thetaLength:A};const l=this;i=Math.floor(i),s=Math.floor(s);const c=[],u=[],f=[],d=[];let p=0;const h=[],m=n/2;let g=0;B(),o===!1&&(e>0&&v(!0),t>0&&v(!1)),this.setIndex(c),this.setAttribute("position",new cn(u,3)),this.setAttribute("normal",new cn(f,3)),this.setAttribute("uv",new cn(d,2));function B(){const w=new H,C=new H;let I=0;const E=(t-e)/n;for(let U=0;U<=s;U++){const S=[],V=U/s,J=V*(t-e)+e;for(let z=0;z<=i;z++){const R=z/i,y=R*A+a,Q=Math.sin(y),_=Math.cos(y);C.x=J*Q,C.y=-V*n+m,C.z=J*_,u.push(C.x,C.y,C.z),w.set(Q,E,_).normalize(),f.push(w.x,w.y,w.z),d.push(R,1-V),S.push(p++)}h.push(S)}for(let U=0;U<i;U++)for(let S=0;S<s;S++){const V=h[S][U],J=h[S+1][U],z=h[S+1][U+1],R=h[S][U+1];c.push(V,J,R),c.push(J,z,R),I+=6}l.addGroup(g,I,0),g+=I}function v(w){const C=p,I=new Je,E=new H;let U=0;const S=w===!0?e:t,V=w===!0?1:-1;for(let z=1;z<=i;z++)u.push(0,m*V,0),f.push(0,V,0),d.push(.5,.5),p++;const J=p;for(let z=0;z<=i;z++){const y=z/i*A+a,Q=Math.cos(y),_=Math.sin(y);E.x=S*_,E.y=m*V,E.z=S*Q,u.push(E.x,E.y,E.z),f.push(0,V,0),I.x=Q*.5+.5,I.y=_*.5*V+.5,d.push(I.x,I.y),p++}for(let z=0;z<i;z++){const R=C+z,y=J+z;w===!0?c.push(y,y+1,R):c.push(y+1,y,R),U+=3}l.addGroup(g,U,w===!0?1:2),g+=U}}static fromJSON(e){return new uv(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class Ux extends Xt{constructor(e=1,t=32,n=16,i=0,s=Math.PI*2,o=0,a=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:n,phiStart:i,phiLength:s,thetaStart:o,thetaLength:a},t=Math.max(3,Math.floor(t)),n=Math.max(2,Math.floor(n));const A=Math.min(o+a,Math.PI);let l=0;const c=[],u=new H,f=new H,d=[],p=[],h=[],m=[];for(let g=0;g<=n;g++){const B=[],v=g/n;let w=0;g==0&&o==0?w=.5/t:g==n&&A==Math.PI&&(w=-.5/t);for(let C=0;C<=t;C++){const I=C/t;u.x=-e*Math.cos(i+I*s)*Math.sin(o+v*a),u.y=e*Math.cos(o+v*a),u.z=e*Math.sin(i+I*s)*Math.sin(o+v*a),p.push(u.x,u.y,u.z),f.copy(u).normalize(),h.push(f.x,f.y,f.z),m.push(I+w,1-v),B.push(l++)}c.push(B)}for(let g=0;g<n;g++)for(let B=0;B<t;B++){const v=c[g][B+1],w=c[g][B],C=c[g+1][B],I=c[g+1][B+1];(g!==0||o>0)&&d.push(v,w,I),(g!==n-1||A<Math.PI)&&d.push(w,C,I)}this.setIndex(d),this.setAttribute("position",new cn(p,3)),this.setAttribute("normal",new cn(h,3)),this.setAttribute("uv",new cn(m,2))}static fromJSON(e){return new Ux(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class Mp extends cs{constructor(e){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new Ve(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ve(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=bp,this.normalScale=new Je(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class hc extends Mp{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Je(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return zn(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new Ve(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new Ve(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new Ve(1,1,1),this.specularColorMap=null,this._sheen=0,this._clearcoat=0,this._iridescence=0,this._transmission=0,this.setValues(e)}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class aC extends cs{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new Ve(16777215),this.specular=new Ve(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ve(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=bp,this.normalScale=new Je(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=ov,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class cK extends cs{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new Ve(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ve(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=bp,this.normalScale=new Je(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=ov,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}function qa(r,e,t){return FV(r)?new r.constructor(r.subarray(e,t!==void 0?t:r.length)):r.slice(e,t)}function Rg(r,e,t){return!r||!t&&r.constructor===e?r:typeof e.BYTES_PER_ELEMENT=="number"?new e(r):Array.prototype.slice.call(r)}function FV(r){return ArrayBuffer.isView(r)&&!(r instanceof DataView)}function uK(r){function e(i,s){return r[i]-r[s]}const t=r.length,n=new Array(t);for(let i=0;i!==t;++i)n[i]=i;return n.sort(e),n}function J1(r,e,t){const n=r.length,i=new r.constructor(n);for(let s=0,o=0;o!==n;++s){const a=t[s]*e;for(let A=0;A!==e;++A)i[o++]=r[a+A]}return i}function IV(r,e,t,n){let i=1,s=r[0];for(;s!==void 0&&s[n]===void 0;)s=r[i++];if(s===void 0)return;let o=s[n];if(o!==void 0)if(Array.isArray(o))do o=s[n],o!==void 0&&(e.push(s.time),t.push.apply(t,o)),s=r[i++];while(s!==void 0);else if(o.toArray!==void 0)do o=s[n],o!==void 0&&(e.push(s.time),o.toArray(t,t.length)),s=r[i++];while(s!==void 0);else do o=s[n],o!==void 0&&(e.push(s.time),t.push(o)),s=r[i++];while(s!==void 0)}class Tp{constructor(e,t,n,i){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=i!==void 0?i:new t.constructor(n),this.sampleValues=t,this.valueSize=n,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let n=this._cachedIndex,i=t[n],s=t[n-1];e:{t:{let o;n:{r:if(!(e<i)){for(let a=n+2;;){if(i===void 0){if(e<s)break r;return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}if(n===a)break;if(s=i,i=t[++n],e<i)break t}o=t.length;break n}if(!(e>=s)){const a=t[1];e<a&&(n=2,s=a);for(let A=n-2;;){if(s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(n===A)break;if(i=s,s=t[--n-1],e>=s)break t}o=n,n=0;break n}break e}for(;n<o;){const a=n+o>>>1;e<t[a]?o=a:n=a+1}if(i=t[n],s=t[n-1],s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(i===void 0)return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}this._cachedIndex=n,this.intervalChanged_(n,s,i)}return this.interpolate_(n,s,e,i)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,n=this.sampleValues,i=this.valueSize,s=e*i;for(let o=0;o!==i;++o)t[o]=n[s+o];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class fK extends Tp{constructor(e,t,n,i){super(e,t,n,i),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:Iu,endingEnd:Iu}}intervalChanged_(e,t,n){const i=this.parameterPositions;let s=e-2,o=e+1,a=i[s],A=i[o];if(a===void 0)switch(this.getSettings_().endingStart){case Uu:s=e,a=2*t-n;break;case P0:s=i.length-2,a=t+i[s]-i[s+1];break;default:s=e,a=n}if(A===void 0)switch(this.getSettings_().endingEnd){case Uu:o=e,A=2*n-t;break;case P0:o=1,A=n+i[1]-i[0];break;default:o=e-1,A=t}const l=(n-t)*.5,c=this.valueSize;this._weightPrev=l/(t-a),this._weightNext=l/(A-n),this._offsetPrev=s*c,this._offsetNext=o*c}interpolate_(e,t,n,i){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,A=e*a,l=A-a,c=this._offsetPrev,u=this._offsetNext,f=this._weightPrev,d=this._weightNext,p=(n-t)/(i-t),h=p*p,m=h*p,g=-f*m+2*f*h-f*p,B=(1+f)*m+(-1.5-2*f)*h+(-.5+f)*p+1,v=(-1-d)*m+(1.5+d)*h+.5*p,w=d*m-d*h;for(let C=0;C!==a;++C)s[C]=g*o[c+C]+B*o[l+C]+v*o[A+C]+w*o[u+C];return s}}class UV extends Tp{constructor(e,t,n,i){super(e,t,n,i)}interpolate_(e,t,n,i){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,A=e*a,l=A-a,c=(n-t)/(i-t),u=1-c;for(let f=0;f!==a;++f)s[f]=o[l+f]*u+o[A+f]*c;return s}}class dK extends Tp{constructor(e,t,n,i){super(e,t,n,i)}interpolate_(e){return this.copySampleValue_(e-1)}}class Jo{constructor(e,t,n,i){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=Rg(t,this.TimeBufferType),this.values=Rg(n,this.ValueBufferType),this.setInterpolation(i||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let n;if(t.toJSON!==this.toJSON)n=t.toJSON(e);else{n={name:e.name,times:Rg(e.times,Array),values:Rg(e.values,Array)};const i=e.getInterpolation();i!==e.DefaultInterpolation&&(n.interpolation=i)}return n.type=e.ValueTypeName,n}InterpolantFactoryMethodDiscrete(e){return new dK(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new UV(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new fK(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case vf:t=this.InterpolantFactoryMethodDiscrete;break;case rc:t=this.InterpolantFactoryMethodLinear;break;case Ty:t=this.InterpolantFactoryMethodSmooth;break}if(t===void 0){const n="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(n);return console.warn("THREE.KeyframeTrack:",n),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return vf;case this.InterpolantFactoryMethodLinear:return rc;case this.InterpolantFactoryMethodSmooth:return Ty}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const t=this.times;for(let n=0,i=t.length;n!==i;++n)t[n]+=e}return this}scale(e){if(e!==1){const t=this.times;for(let n=0,i=t.length;n!==i;++n)t[n]*=e}return this}trim(e,t){const n=this.times,i=n.length;let s=0,o=i-1;for(;s!==i&&n[s]<e;)++s;for(;o!==-1&&n[o]>t;)--o;if(++o,s!==0||o!==i){s>=o&&(o=Math.max(o,1),s=o-1);const a=this.getValueSize();this.times=qa(n,s,o),this.values=qa(this.values,s*a,o*a)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const n=this.times,i=this.values,s=n.length;s===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let o=null;for(let a=0;a!==s;a++){const A=n[a];if(typeof A=="number"&&isNaN(A)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,A),e=!1;break}if(o!==null&&o>A){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,A,o),e=!1;break}o=A}if(i!==void 0&&FV(i))for(let a=0,A=i.length;a!==A;++a){const l=i[a];if(isNaN(l)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,l),e=!1;break}}return e}optimize(){const e=qa(this.times),t=qa(this.values),n=this.getValueSize(),i=this.getInterpolation()===Ty,s=e.length-1;let o=1;for(let a=1;a<s;++a){let A=!1;const l=e[a],c=e[a+1];if(l!==c&&(a!==1||l!==e[0]))if(i)A=!0;else{const u=a*n,f=u-n,d=u+n;for(let p=0;p!==n;++p){const h=t[u+p];if(h!==t[f+p]||h!==t[d+p]){A=!0;break}}}if(A){if(a!==o){e[o]=e[a];const u=a*n,f=o*n;for(let d=0;d!==n;++d)t[f+d]=t[u+d]}++o}}if(s>0){e[o]=e[s];for(let a=s*n,A=o*n,l=0;l!==n;++l)t[A+l]=t[a+l];++o}return o!==e.length?(this.times=qa(e,0,o),this.values=qa(t,0,o*n)):(this.times=e,this.values=t),this}clone(){const e=qa(this.times,0),t=qa(this.values,0),n=this.constructor,i=new n(this.name,e,t);return i.createInterpolant=this.createInterpolant,i}}Jo.prototype.TimeBufferType=Float32Array;Jo.prototype.ValueBufferType=Float32Array;Jo.prototype.DefaultInterpolation=rc;class Jf extends Jo{}Jf.prototype.ValueTypeName="bool";Jf.prototype.ValueBufferType=Array;Jf.prototype.DefaultInterpolation=vf;Jf.prototype.InterpolantFactoryMethodLinear=void 0;Jf.prototype.InterpolantFactoryMethodSmooth=void 0;class xV extends Jo{}xV.prototype.ValueTypeName="color";class Cf extends Jo{}Cf.prototype.ValueTypeName="number";class hK extends Tp{constructor(e,t,n,i){super(e,t,n,i)}interpolate_(e,t,n,i){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,A=(n-t)/(i-t);let l=e*a;for(let c=l+a;l!==c;l+=4)$e.slerpFlat(s,0,o,l-a,o,l,A);return s}}class jA extends Jo{InterpolantFactoryMethodLinear(e){return new hK(this.times,this.values,this.getValueSize(),e)}}jA.prototype.ValueTypeName="quaternion";jA.prototype.DefaultInterpolation=rc;jA.prototype.InterpolantFactoryMethodSmooth=void 0;class Gf extends Jo{}Gf.prototype.ValueTypeName="string";Gf.prototype.ValueBufferType=Array;Gf.prototype.DefaultInterpolation=vf;Gf.prototype.InterpolantFactoryMethodLinear=void 0;Gf.prototype.InterpolantFactoryMethodSmooth=void 0;class wf extends Jo{}wf.prototype.ValueTypeName="vector";class z0{constructor(e,t=-1,n,i=gx){this.name=e,this.tracks=n,this.duration=t,this.blendMode=i,this.uuid=Ys(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],n=e.tracks,i=1/(e.fps||1);for(let o=0,a=n.length;o!==a;++o)t.push(gK(n[o]).scale(i));const s=new this(e.name,e.duration,t,e.blendMode);return s.uuid=e.uuid,s}static toJSON(e){const t=[],n=e.tracks,i={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let s=0,o=n.length;s!==o;++s)t.push(Jo.toJSON(n[s]));return i}static CreateFromMorphTargetSequence(e,t,n,i){const s=t.length,o=[];for(let a=0;a<s;a++){let A=[],l=[];A.push((a+s-1)%s,a,(a+1)%s),l.push(0,1,0);const c=uK(A);A=J1(A,1,c),l=J1(l,1,c),!i&&A[0]===0&&(A.push(s),l.push(l[0])),o.push(new Cf(".morphTargetInfluences["+t[a].name+"]",A,l).scale(1/n))}return new this(e,-1,o)}static findByName(e,t){let n=e;if(!Array.isArray(e)){const i=e;n=i.geometry&&i.geometry.animations||i.animations}for(let i=0;i<n.length;i++)if(n[i].name===t)return n[i];return null}static CreateClipsFromMorphTargetSequences(e,t,n){const i={},s=/^([\w-]*?)([\d]+)$/;for(let a=0,A=e.length;a<A;a++){const l=e[a],c=l.name.match(s);if(c&&c.length>1){const u=c[1];let f=i[u];f||(i[u]=f=[]),f.push(l)}}const o=[];for(const a in i)o.push(this.CreateFromMorphTargetSequence(a,i[a],t,n));return o}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const n=function(u,f,d,p,h){if(d.length!==0){const m=[],g=[];IV(d,m,g,p),m.length!==0&&h.push(new u(f,m,g))}},i=[],s=e.name||"default",o=e.fps||30,a=e.blendMode;let A=e.length||-1;const l=e.hierarchy||[];for(let u=0;u<l.length;u++){const f=l[u].keys;if(!(!f||f.length===0))if(f[0].morphTargets){const d={};let p;for(p=0;p<f.length;p++)if(f[p].morphTargets)for(let h=0;h<f[p].morphTargets.length;h++)d[f[p].morphTargets[h]]=-1;for(const h in d){const m=[],g=[];for(let B=0;B!==f[p].morphTargets.length;++B){const v=f[p];m.push(v.time),g.push(v.morphTarget===h?1:0)}i.push(new Cf(".morphTargetInfluence["+h+"]",m,g))}A=d.length*o}else{const d=".bones["+t[u].name+"]";n(wf,d+".position",f,"pos",i),n(jA,d+".quaternion",f,"rot",i),n(wf,d+".scale",f,"scl",i)}}return i.length===0?null:new this(s,A,i,a)}resetDuration(){const e=this.tracks;let t=0;for(let n=0,i=e.length;n!==i;++n){const s=this.tracks[n];t=Math.max(t,s.times[s.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function pK(r){switch(r.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Cf;case"vector":case"vector2":case"vector3":case"vector4":return wf;case"color":return xV;case"quaternion":return jA;case"bool":case"boolean":return Jf;case"string":return Gf}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+r)}function gK(r){if(r.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=pK(r.type);if(r.times===void 0){const t=[],n=[];IV(r.keys,t,n,"value"),r.times=t,r.values=n}return e.parse!==void 0?e.parse(r):new e(r.name,r.times,r.values,r.interpolation)}const Ff={enabled:!1,files:{},add:function(r,e){this.enabled!==!1&&(this.files[r]=e)},get:function(r){if(this.enabled!==!1)return this.files[r]},remove:function(r){delete this.files[r]},clear:function(){this.files={}}};class QV{constructor(e,t,n){const i=this;let s=!1,o=0,a=0,A;const l=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=n,this.itemStart=function(c){a++,s===!1&&i.onStart!==void 0&&i.onStart(c,o,a),s=!0},this.itemEnd=function(c){o++,i.onProgress!==void 0&&i.onProgress(c,o,a),o===a&&(s=!1,i.onLoad!==void 0&&i.onLoad())},this.itemError=function(c){i.onError!==void 0&&i.onError(c)},this.resolveURL=function(c){return A?A(c):c},this.setURLModifier=function(c){return A=c,this},this.addHandler=function(c,u){return l.push(c,u),this},this.removeHandler=function(c){const u=l.indexOf(c);return u!==-1&&l.splice(u,2),this},this.getHandler=function(c){for(let u=0,f=l.length;u<f;u+=2){const d=l[u],p=l[u+1];if(d.global&&(d.lastIndex=0),d.test(c))return p}return null}}}const mK=new QV;class Of{constructor(e){this.manager=e!==void 0?e:mK,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const n=this;return new Promise(function(i,s){n.load(e,i,t,s)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}const ta={};class BK extends Error{constructor(e,t){super(e),this.response=t}}class xx extends Of{constructor(e){super(e)}load(e,t,n,i){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=Ff.get(e);if(s!==void 0)return this.manager.itemStart(e),setTimeout(()=>{t&&t(s),this.manager.itemEnd(e)},0),s;if(ta[e]!==void 0){ta[e].push({onLoad:t,onProgress:n,onError:i});return}ta[e]=[],ta[e].push({onLoad:t,onProgress:n,onError:i});const o=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),a=this.mimeType,A=this.responseType;fetch(o).then(l=>{if(l.status===200||l.status===0){if(l.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||l.body===void 0||l.body.getReader===void 0)return l;const c=ta[e],u=l.body.getReader(),f=l.headers.get("Content-Length")||l.headers.get("X-File-Size"),d=f?parseInt(f):0,p=d!==0;let h=0;const m=new ReadableStream({start(g){B();function B(){u.read().then(({done:v,value:w})=>{if(v)g.close();else{h+=w.byteLength;const C=new ProgressEvent("progress",{lengthComputable:p,loaded:h,total:d});for(let I=0,E=c.length;I<E;I++){const U=c[I];U.onProgress&&U.onProgress(C)}g.enqueue(w),B()}})}}});return new Response(m)}else throw new BK(`fetch for "${l.url}" responded with ${l.status}: ${l.statusText}`,l)}).then(l=>{switch(A){case"arraybuffer":return l.arrayBuffer();case"blob":return l.blob();case"document":return l.text().then(c=>new DOMParser().parseFromString(c,a));case"json":return l.json();default:if(a===void 0)return l.text();{const u=/charset="?([^;"\s]*)"?/i.exec(a),f=u&&u[1]?u[1].toLowerCase():void 0,d=new TextDecoder(f);return l.arrayBuffer().then(p=>d.decode(p))}}}).then(l=>{Ff.add(e,l);const c=ta[e];delete ta[e];for(let u=0,f=c.length;u<f;u++){const d=c[u];d.onLoad&&d.onLoad(l)}}).catch(l=>{const c=ta[e];if(c===void 0)throw this.manager.itemError(e),l;delete ta[e];for(let u=0,f=c.length;u<f;u++){const d=c[u];d.onError&&d.onError(l)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class bV extends Of{constructor(e){super(e)}load(e,t,n,i){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=Ff.get(e);if(o!==void 0)return s.manager.itemStart(e),setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0),o;const a=$h("img");function A(){c(),Ff.add(e,this),t&&t(this),s.manager.itemEnd(e)}function l(u){c(),i&&i(u),s.manager.itemError(e),s.manager.itemEnd(e)}function c(){a.removeEventListener("load",A,!1),a.removeEventListener("error",l,!1)}return a.addEventListener("load",A,!1),a.addEventListener("error",l,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(a.crossOrigin=this.crossOrigin),s.manager.itemStart(e),a.src=e,a}}class Np extends Of{constructor(e){super(e)}load(e,t,n,i){const s=new En,o=new bV(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(e,function(a){s.image=a,s.needsUpdate=!0,t!==void 0&&t(s)},n,i),s}}class fv extends St{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new Ve(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&&(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(t.object.distance=this.distance),this.angle!==void 0&&(t.object.angle=this.angle),this.decay!==void 0&&(t.object.decay=this.decay),this.penumbra!==void 0&&(t.object.penumbra=this.penumbra),this.shadow!==void 0&&(t.object.shadow=this.shadow.toJSON()),t}}const AC=new Le,G1=new H,O1=new H;class Qx{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Je(512,512),this.map=null,this.mapPass=null,this.matrix=new Le,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Cx,this._frameExtents=new Je(1,1),this._viewportCount=1,this._viewports=[new bt(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,n=this.matrix;G1.setFromMatrixPosition(e.matrixWorld),t.position.copy(G1),O1.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(O1),t.updateMatrixWorld(),AC.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(AC),n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(AC)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class vK extends Qx{constructor(){super(new Ir(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const t=this.camera,n=qh*2*e.angle*this.focus,i=this.mapSize.width/this.mapSize.height,s=e.distance||t.far;(n!==t.fov||i!==t.aspect||s!==t.far)&&(t.fov=n,t.aspect=i,t.far=s,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class EV extends fv{constructor(e,t,n=0,i=Math.PI/3,s=0,o=2){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(St.DefaultUp),this.updateMatrix(),this.target=new St,this.distance=n,this.angle=i,this.penumbra=s,this.decay=o,this.map=null,this.shadow=new vK}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const H1=new Le,pd=new H,lC=new H;class yK extends Qx{constructor(){super(new Ir(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new Je(4,2),this._viewportCount=6,this._viewports=[new bt(2,1,1,1),new bt(0,1,1,1),new bt(3,1,1,1),new bt(1,1,1,1),new bt(3,0,1,1),new bt(1,0,1,1)],this._cubeDirections=[new H(1,0,0),new H(-1,0,0),new H(0,0,1),new H(0,0,-1),new H(0,1,0),new H(0,-1,0)],this._cubeUps=[new H(0,1,0),new H(0,1,0),new H(0,1,0),new H(0,1,0),new H(0,0,1),new H(0,0,-1)]}updateMatrices(e,t=0){const n=this.camera,i=this.matrix,s=e.distance||n.far;s!==n.far&&(n.far=s,n.updateProjectionMatrix()),pd.setFromMatrixPosition(e.matrixWorld),n.position.copy(pd),lC.copy(n.position),lC.add(this._cubeDirections[t]),n.up.copy(this._cubeUps[t]),n.lookAt(lC),n.updateMatrixWorld(),i.makeTranslation(-pd.x,-pd.y,-pd.z),H1.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(H1)}}class qF extends fv{constructor(e,t,n=0,i=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=n,this.decay=i,this.shadow=new yK}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class CK extends Qx{constructor(){super(new _p(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class bx extends fv{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(St.DefaultUp),this.updateMatrix(),this.target=new St,this.shadow=new CK}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class SV extends fv{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}class _o{static decodeText(e){if(typeof TextDecoder<"u")return new TextDecoder().decode(e);let t="";for(let n=0,i=e.length;n<i;n++)t+=String.fromCharCode(e[n]);try{return decodeURIComponent(escape(t))}catch{return t}}static extractUrlBase(e){const t=e.lastIndexOf("/");return t===-1?"./":e.slice(0,t+1)}static resolveURL(e,t){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class wK extends Of{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,n,i){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=Ff.get(e);if(o!==void 0)return s.manager.itemStart(e),setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0),o;const a={};a.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",a.headers=this.requestHeader,fetch(e,a).then(function(A){return A.blob()}).then(function(A){return createImageBitmap(A,Object.assign(s.options,{colorSpaceConversion:"none"}))}).then(function(A){Ff.add(e,A),t&&t(A),s.manager.itemEnd(e)}).catch(function(A){i&&i(A),s.manager.itemError(e),s.manager.itemEnd(e)}),s.manager.itemStart(e)}}class FK{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=z1(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=z1();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}function z1(){return(typeof performance>"u"?Date:performance).now()}class IK{constructor(e,t,n){this.binding=e,this.valueSize=n;let i,s,o;switch(t){case"quaternion":i=this._slerp,s=this._slerpAdditive,o=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(n*6),this._workIndex=5;break;case"string":case"bool":i=this._select,s=this._select,o=this._setAdditiveIdentityOther,this.buffer=new Array(n*5);break;default:i=this._lerp,s=this._lerpAdditive,o=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(n*5)}this._mixBufferRegion=i,this._mixBufferRegionAdditive=s,this._setIdentity=o,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const n=this.buffer,i=this.valueSize,s=e*i+i;let o=this.cumulativeWeight;if(o===0){for(let a=0;a!==i;++a)n[s+a]=n[a];o=t}else{o+=t;const a=t/o;this._mixBufferRegion(n,s,0,a,i)}this.cumulativeWeight=o}accumulateAdditive(e){const t=this.buffer,n=this.valueSize,i=n*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(t,i,0,e,n),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,n=this.buffer,i=e*t+t,s=this.cumulativeWeight,o=this.cumulativeWeightAdditive,a=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,s<1){const A=t*this._origIndex;this._mixBufferRegion(n,i,A,1-s,t)}o>0&&this._mixBufferRegionAdditive(n,i,this._addIndex*t,1,t);for(let A=t,l=t+t;A!==l;++A)if(n[A]!==n[A+t]){a.setValue(n,i);break}}saveOriginalState(){const e=this.binding,t=this.buffer,n=this.valueSize,i=n*this._origIndex;e.getValue(t,i);for(let s=n,o=i;s!==o;++s)t[s]=t[i+s%n];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let n=e;n<t;n++)this.buffer[n]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let n=0;n<this.valueSize;n++)this.buffer[t+n]=this.buffer[e+n]}_select(e,t,n,i,s){if(i>=.5)for(let o=0;o!==s;++o)e[t+o]=e[n+o]}_slerp(e,t,n,i){$e.slerpFlat(e,t,e,t,e,n,i)}_slerpAdditive(e,t,n,i,s){const o=this._workIndex*s;$e.multiplyQuaternionsFlat(e,o,e,t,e,n),$e.slerpFlat(e,t,e,t,e,o,i)}_lerp(e,t,n,i,s){const o=1-i;for(let a=0;a!==s;++a){const A=t+a;e[A]=e[A]*o+e[n+a]*i}}_lerpAdditive(e,t,n,i,s){for(let o=0;o!==s;++o){const a=t+o;e[a]=e[a]+e[n+o]*i}}}const Ex="\\[\\]\\.:\\/",UK=new RegExp("["+Ex+"]","g"),Sx="[^"+Ex+"]",xK="[^"+Ex.replace("\\.","")+"]",QK=/((?:WC+[\/:])*)/.source.replace("WC",Sx),bK=/(WCOD+)?/.source.replace("WCOD",xK),EK=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",Sx),SK=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",Sx),_K=new RegExp("^"+QK+bK+EK+SK+"$"),RK=["material","materials","bones","map"];class MK{constructor(e,t,n){const i=n||ht.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,i)}getValue(e,t){this.bind();const n=this._targetGroup.nCachedObjects_,i=this._bindings[n];i!==void 0&&i.getValue(e,t)}setValue(e,t){const n=this._bindings;for(let i=this._targetGroup.nCachedObjects_,s=n.length;i!==s;++i)n[i].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].unbind()}}class ht{constructor(e,t,n){this.path=t,this.parsedPath=n||ht.parseTrackName(t),this.node=ht.findNode(e,this.parsedPath.nodeName)||e,this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,n){return e&&e.isAnimationObjectGroup?new ht.Composite(e,t,n):new ht(e,t,n)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(UK,"")}static parseTrackName(e){const t=_K.exec(e);if(t===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const n={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},i=n.nodeName&&n.nodeName.lastIndexOf(".");if(i!==void 0&&i!==-1){const s=n.nodeName.substring(i+1);RK.indexOf(s)!==-1&&(n.nodeName=n.nodeName.substring(0,i),n.objectName=s)}if(n.propertyName===null||n.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return n}static findNode(e,t){if(t===void 0||t===""||t==="."||t===-1||t===e.name||t===e.uuid)return e;if(e.skeleton){const n=e.skeleton.getBoneByName(t);if(n!==void 0)return n}if(e.children){const n=function(s){for(let o=0;o<s.length;o++){const a=s[o];if(a.name===t||a.uuid===t)return a;const A=n(a.children);if(A)return A}return null},i=n(e.children);if(i)return i}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const n=this.resolvedProperty;for(let i=0,s=n.length;i!==s;++i)e[t++]=n[i]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const n=this.resolvedProperty;for(let i=0,s=n.length;i!==s;++i)n[i]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const n=this.resolvedProperty;for(let i=0,s=n.length;i!==s;++i)n[i]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const n=this.resolvedProperty;for(let i=0,s=n.length;i!==s;++i)n[i]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,n=t.objectName,i=t.propertyName;let s=t.propertyIndex;if(e||(e=ht.findNode(this.rootNode,t.nodeName)||this.rootNode,this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");return}if(n){let l=t.objectIndex;switch(n){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let c=0;c<e.length;c++)if(e[c].name===l){l=c;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[n]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[n]}if(l!==void 0){if(e[l]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[l]}}const o=e[i];if(o===void 0){const l=t.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+l+"."+i+" but it wasn't found.",e);return}let a=this.Versioning.None;this.targetObject=e,e.needsUpdate!==void 0?a=this.Versioning.NeedsUpdate:e.matrixWorldNeedsUpdate!==void 0&&(a=this.Versioning.MatrixWorldNeedsUpdate);let A=this.BindingType.Direct;if(s!==void 0){if(i==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[s]!==void 0&&(s=e.morphTargetDictionary[s])}A=this.BindingType.ArrayElement,this.resolvedProperty=o,this.propertyIndex=s}else o.fromArray!==void 0&&o.toArray!==void 0?(A=this.BindingType.HasFromToArray,this.resolvedProperty=o):Array.isArray(o)?(A=this.BindingType.EntireArray,this.resolvedProperty=o):this.propertyName=i;this.getValue=this.GetterByBindingType[A],this.setValue=this.SetterByBindingTypeAndVersioning[A][a]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}ht.Composite=MK;ht.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};ht.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};ht.prototype.GetterByBindingType=[ht.prototype._getValue_direct,ht.prototype._getValue_array,ht.prototype._getValue_arrayElement,ht.prototype._getValue_toArray];ht.prototype.SetterByBindingTypeAndVersioning=[[ht.prototype._setValue_direct,ht.prototype._setValue_direct_setNeedsUpdate,ht.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[ht.prototype._setValue_array,ht.prototype._setValue_array_setNeedsUpdate,ht.prototype._setValue_array_setMatrixWorldNeedsUpdate],[ht.prototype._setValue_arrayElement,ht.prototype._setValue_arrayElement_setNeedsUpdate,ht.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[ht.prototype._setValue_fromArray,ht.prototype._setValue_fromArray_setNeedsUpdate,ht.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class TK{constructor(e,t,n=null,i=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=n,this.blendMode=i;const s=t.tracks,o=s.length,a=new Array(o),A={endingStart:Iu,endingEnd:Iu};for(let l=0;l!==o;++l){const c=s[l].createInterpolant(null);a[l]=c,c.settings=A}this._interpolantSettings=A,this._interpolants=a,this._propertyBindings=new Array(o),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=VH,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,n){if(e.fadeOut(t),this.fadeIn(t),n){const i=this._clip.duration,s=e._clip.duration,o=s/i,a=i/s;e.warp(1,o,t),this.warp(a,1,t)}return this}crossFadeTo(e,t,n){return e.crossFadeFrom(this,t,n)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,n){const i=this._mixer,s=i.time,o=this.timeScale;let a=this._timeScaleInterpolant;a===null&&(a=i._lendControlInterpolant(),this._timeScaleInterpolant=a);const A=a.parameterPositions,l=a.sampleValues;return A[0]=s,A[1]=s+n,l[0]=e/o,l[1]=t/o,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,n,i){if(!this.enabled){this._updateWeight(e);return}const s=this._startTime;if(s!==null){const A=(e-s)*n;A<0||n===0?t=0:(this._startTime=null,t=n*A)}t*=this._updateTimeScale(e);const o=this._updateTime(t),a=this._updateWeight(e);if(a>0){const A=this._interpolants,l=this._propertyBindings;switch(this.blendMode){case kH:for(let c=0,u=A.length;c!==u;++c)A[c].evaluate(o),l[c].accumulateAdditive(a);break;case gx:default:for(let c=0,u=A.length;c!==u;++c)A[c].evaluate(o),l[c].accumulate(i,a)}}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const n=this._weightInterpolant;if(n!==null){const i=n.evaluate(e)[0];t*=i,e>n.parameterPositions[1]&&(this.stopFading(),i===0&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const n=this._timeScaleInterpolant;if(n!==null){const i=n.evaluate(e)[0];t*=i,e>n.parameterPositions[1]&&(this.stopWarping(),t===0?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,n=this.loop;let i=this.time+e,s=this._loopCount;const o=n===DH;if(e===0)return s===-1?i:o&&(s&1)===1?t-i:i;if(n===NH){s===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(i>=t)i=t;else if(i<0)i=0;else{this.time=i;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(s===-1&&(e>=0?(s=0,this._setEndings(!0,this.repetitions===0,o)):this._setEndings(this.repetitions===0,!0,o)),i>=t||i<0){const a=Math.floor(i/t);i-=t*a,s+=Math.abs(a);const A=this.repetitions-s;if(A<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,i=e>0?t:0,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(A===1){const l=e<0;this._setEndings(l,!l,o)}else this._setEndings(!1,!1,o);this._loopCount=s,this.time=i,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:a})}}else this.time=i;if(o&&(s&1)===1)return t-i}return i}_setEndings(e,t,n){const i=this._interpolantSettings;n?(i.endingStart=Uu,i.endingEnd=Uu):(e?i.endingStart=this.zeroSlopeAtStart?Uu:Iu:i.endingStart=P0,t?i.endingEnd=this.zeroSlopeAtEnd?Uu:Iu:i.endingEnd=P0)}_scheduleFading(e,t,n){const i=this._mixer,s=i.time;let o=this._weightInterpolant;o===null&&(o=i._lendControlInterpolant(),this._weightInterpolant=o);const a=o.parameterPositions,A=o.sampleValues;return a[0]=s,A[0]=t,a[1]=s+e,A[1]=n,this}}const NK=new Float32Array(1);class VK extends ol{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const n=e._localRoot||this._root,i=e._clip.tracks,s=i.length,o=e._propertyBindings,a=e._interpolants,A=n.uuid,l=this._bindingsByRootAndName;let c=l[A];c===void 0&&(c={},l[A]=c);for(let u=0;u!==s;++u){const f=i[u],d=f.name;let p=c[d];if(p!==void 0)++p.referenceCount,o[u]=p;else{if(p=o[u],p!==void 0){p._cacheIndex===null&&(++p.referenceCount,this._addInactiveBinding(p,A,d));continue}const h=t&&t._propertyBindings[u].binding.parsedPath;p=new IK(ht.create(n,d,h),f.ValueTypeName,f.getValueSize()),++p.referenceCount,this._addInactiveBinding(p,A,d),o[u]=p}a[u].resultBuffer=p.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const n=(e._localRoot||this._root).uuid,i=e._clip.uuid,s=this._actionsByClip[i];this._bindAction(e,s&&s.knownActions[0]),this._addInactiveAction(e,i,n)}const t=e._propertyBindings;for(let n=0,i=t.length;n!==i;++n){const s=t[n];s.useCount++===0&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let n=0,i=t.length;n!==i;++n){const s=t[n];--s.useCount===0&&(s.restoreOriginalState(),this._takeBackBinding(s))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return t!==null&&t<this._nActiveActions}_addInactiveAction(e,t,n){const i=this._actions,s=this._actionsByClip;let o=s[t];if(o===void 0)o={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,s[t]=o;else{const a=o.knownActions;e._byClipCacheIndex=a.length,a.push(e)}e._cacheIndex=i.length,i.push(e),o.actionByRoot[n]=e}_removeInactiveAction(e){const t=this._actions,n=t[t.length-1],i=e._cacheIndex;n._cacheIndex=i,t[i]=n,t.pop(),e._cacheIndex=null;const s=e._clip.uuid,o=this._actionsByClip,a=o[s],A=a.knownActions,l=A[A.length-1],c=e._byClipCacheIndex;l._byClipCacheIndex=c,A[c]=l,A.pop(),e._byClipCacheIndex=null;const u=a.actionByRoot,f=(e._localRoot||this._root).uuid;delete u[f],A.length===0&&delete o[s],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let n=0,i=t.length;n!==i;++n){const s=t[n];--s.referenceCount===0&&this._removeInactiveBinding(s)}}_lendAction(e){const t=this._actions,n=e._cacheIndex,i=this._nActiveActions++,s=t[i];e._cacheIndex=i,t[i]=e,s._cacheIndex=n,t[n]=s}_takeBackAction(e){const t=this._actions,n=e._cacheIndex,i=--this._nActiveActions,s=t[i];e._cacheIndex=i,t[i]=e,s._cacheIndex=n,t[n]=s}_addInactiveBinding(e,t,n){const i=this._bindingsByRootAndName,s=this._bindings;let o=i[t];o===void 0&&(o={},i[t]=o),o[n]=e,e._cacheIndex=s.length,s.push(e)}_removeInactiveBinding(e){const t=this._bindings,n=e.binding,i=n.rootNode.uuid,s=n.path,o=this._bindingsByRootAndName,a=o[i],A=t[t.length-1],l=e._cacheIndex;A._cacheIndex=l,t[l]=A,t.pop(),delete a[s],Object.keys(a).length===0&&delete o[i]}_lendBinding(e){const t=this._bindings,n=e._cacheIndex,i=this._nActiveBindings++,s=t[i];e._cacheIndex=i,t[i]=e,s._cacheIndex=n,t[n]=s}_takeBackBinding(e){const t=this._bindings,n=e._cacheIndex,i=--this._nActiveBindings,s=t[i];e._cacheIndex=i,t[i]=e,s._cacheIndex=n,t[n]=s}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let n=e[t];return n===void 0&&(n=new UV(new Float32Array(2),new Float32Array(2),1,NK),n.__cacheIndex=t,e[t]=n),n}_takeBackControlInterpolant(e){const t=this._controlInterpolants,n=e.__cacheIndex,i=--this._nActiveControlInterpolants,s=t[i];e.__cacheIndex=i,t[i]=e,s.__cacheIndex=n,t[n]=s}clipAction(e,t,n){const i=t||this._root,s=i.uuid;let o=typeof e=="string"?z0.findByName(i,e):e;const a=o!==null?o.uuid:e,A=this._actionsByClip[a];let l=null;if(n===void 0&&(o!==null?n=o.blendMode:n=gx),A!==void 0){const u=A.actionByRoot[s];if(u!==void 0&&u.blendMode===n)return u;l=A.knownActions[0],o===null&&(o=l._clip)}if(o===null)return null;const c=new TK(this,o,t,n);return this._bindAction(c,l),this._addInactiveAction(c,a,s),c}existingAction(e,t){const n=t||this._root,i=n.uuid,s=typeof e=="string"?z0.findByName(n,e):e,o=s?s.uuid:e,a=this._actionsByClip[o];return a!==void 0&&a.actionByRoot[i]||null}stopAllAction(){const e=this._actions,t=this._nActiveActions;for(let n=t-1;n>=0;--n)e[n].stop();return this}update(e){e*=this.timeScale;const t=this._actions,n=this._nActiveActions,i=this.time+=e,s=Math.sign(e),o=this._accuIndex^=1;for(let l=0;l!==n;++l)t[l]._update(i,e,s,o);const a=this._bindings,A=this._nActiveBindings;for(let l=0;l!==A;++l)a[l].apply(o);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,n=e.uuid,i=this._actionsByClip,s=i[n];if(s!==void 0){const o=s.knownActions;for(let a=0,A=o.length;a!==A;++a){const l=o[a];this._deactivateAction(l);const c=l._cacheIndex,u=t[t.length-1];l._cacheIndex=null,l._byClipCacheIndex=null,u._cacheIndex=c,t[c]=u,t.pop(),this._removeInactiveBindingsForAction(l)}delete i[n]}}uncacheRoot(e){const t=e.uuid,n=this._actionsByClip;for(const o in n){const a=n[o].actionByRoot,A=a[t];A!==void 0&&(this._deactivateAction(A),this._removeInactiveAction(A))}const i=this._bindingsByRootAndName,s=i[t];if(s!==void 0)for(const o in s){const a=s[o];a.restoreOriginalState(),this._removeInactiveBinding(a)}}uncacheAction(e,t){const n=this.existingAction(e,t);n!==null&&(this._deactivateAction(n),this._removeInactiveAction(n))}}class X1{constructor(e,t,n,i,s){this.isGLBufferAttribute=!0,this.buffer=e,this.type=t,this.itemSize=n,this.elementSize=i,this.count=s,this.version=0}set needsUpdate(e){e===!0&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,t){return this.type=e,this.elementSize=t,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}class DK{constructor(e,t,n=0,i=1/0){this.ray=new Ep(e,t),this.near=n,this.far=i,this.camera=null,this.layers=new vx,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}intersectObject(e,t=!0,n=[]){return $F(e,this,n,t),n.sort(Y1),n}intersectObjects(e,t=!0,n=[]){for(let i=0,s=e.length;i<s;i++)$F(e[i],this,n,t);return n.sort(Y1),n}}function Y1(r,e){return r.distance-e.distance}function $F(r,e,t,n){if(r.layers.test(e.layers)&&r.raycast(e,t),n===!0){const i=r.children;for(let s=0,o=i.length;s<o;s++)$F(i[s],e,t,!0)}}class K1{constructor(e=1,t=0,n=0){return this.radius=e,this.phi=t,this.theta=n,this}set(e,t,n){return this.radius=e,this.phi=t,this.theta=n,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,n){return this.radius=Math.sqrt(e*e+t*t+n*n),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,n),this.phi=Math.acos(zn(t/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}const j1=new H,Mg=new H;class ba{constructor(e=new H,t=new H){this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){j1.subVectors(e,this.start),Mg.subVectors(this.end,this.start);const n=Mg.dot(Mg);let s=Mg.dot(j1)/n;return t&&(s=zn(s,0,1)),s}closestPointToPoint(e,t,n){const i=this.closestPointToPointParameter(e,t);return this.delta(n).multiplyScalar(i).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}class kK extends Rp{constructor(e=1){const t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],n=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],i=new Xt;i.setAttribute("position",new cn(t,3)),i.setAttribute("color",new cn(n,3));const s=new Ja({vertexColors:!0,toneMapped:!1});super(i,s),this.type="AxesHelper"}setColors(e,t,n){const i=new Ve,s=this.geometry.attributes.color.array;return i.set(e),i.toArray(s,0),i.toArray(s,3),i.set(t),i.toArray(s,6),i.toArray(s,9),i.set(n),i.toArray(s,12),i.toArray(s,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:es}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=es);class _x{constructor(){this.pluginCallbacks=[],this.register(function(e){return new zK(e)}),this.register(function(e){return new XK(e)}),this.register(function(e){return new jK(e)}),this.register(function(e){return new qK(e)}),this.register(function(e){return new YK(e)}),this.register(function(e){return new KK(e)})}register(e){return this.pluginCallbacks.indexOf(e)===-1&&this.pluginCallbacks.push(e),this}unregister(e){return this.pluginCallbacks.indexOf(e)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,t,n,i){const s=new HK,o=[];for(let a=0,A=this.pluginCallbacks.length;a<A;a++)o.push(this.pluginCallbacks[a](s));s.setPlugins(o),s.write(e,t,i).catch(n)}parseAsync(e,t){const n=this;return new Promise(function(i,s){n.parse(e,i,s,t)})}}const Jt={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123,FLOAT:5126,UNSIGNED_INT:5125,ARRAY_BUFFER:34962,ELEMENT_ARRAY_BUFFER:34963,NEAREST:9728,LINEAR:9729,NEAREST_MIPMAP_NEAREST:9984,LINEAR_MIPMAP_NEAREST:9985,NEAREST_MIPMAP_LINEAR:9986,LINEAR_MIPMAP_LINEAR:9987,CLAMP_TO_EDGE:33071,MIRRORED_REPEAT:33648,REPEAT:10497},Ei={};Ei[Hn]=Jt.NEAREST;Ei[Z0]=Jt.NEAREST_MIPMAP_NEAREST;Ei[gh]=Jt.NEAREST_MIPMAP_LINEAR;Ei[Wr]=Jt.LINEAR;Ei[px]=Jt.LINEAR_MIPMAP_NEAREST;Ei[XA]=Jt.LINEAR_MIPMAP_LINEAR;Ei[Gr]=Jt.CLAMP_TO_EDGE;Ei[ps]=Jt.REPEAT;Ei[Yh]=Jt.MIRRORED_REPEAT;const q1={scale:"scale",position:"translation",quaternion:"rotation",morphTargetInfluences:"weights"},$1=12,LK=1179937895,WK=2,eS=8,ZK=1313821514,PK=5130562;function Od(r,e){return r.length===e.length&&r.every(function(t,n){return t===e[n]})}function JK(r){return new TextEncoder().encode(r).buffer}function GK(r){return Od(r.elements,[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}function OK(r,e,t){const n={min:new Array(r.itemSize).fill(Number.POSITIVE_INFINITY),max:new Array(r.itemSize).fill(Number.NEGATIVE_INFINITY)};for(let i=e;i<e+t;i++)for(let s=0;s<r.itemSize;s++){let o;r.itemSize>4?o=r.array[i*r.itemSize+s]:(s===0?o=r.getX(i):s===1?o=r.getY(i):s===2?o=r.getZ(i):s===3&&(o=r.getW(i)),r.normalized===!0&&(o=It.normalize(o,r.array))),n.min[s]=Math.min(n.min[s],o),n.max[s]=Math.max(n.max[s],o)}return n}function _V(r){return Math.ceil(r/4)*4}function cC(r,e=0){const t=_V(r.byteLength);if(t!==r.byteLength){const n=new Uint8Array(t);if(n.set(new Uint8Array(r)),e!==0)for(let i=r.byteLength;i<t;i++)n[i]=e;return n.buffer}return r}function tS(){return typeof document>"u"&&typeof OffscreenCanvas<"u"?new OffscreenCanvas(1,1):document.createElement("canvas")}function nS(r,e){if(r.toBlob!==void 0)return new Promise(n=>r.toBlob(n,e));let t;return e==="image/jpeg"?t=.92:e==="image/webp"&&(t=.8),r.convertToBlob({type:e,quality:t})}class HK{constructor(){this.plugins=[],this.options={},this.pending=[],this.buffers=[],this.byteOffset=0,this.buffers=[],this.nodeMap=new Map,this.skins=[],this.extensionsUsed={},this.uids=new Map,this.uid=0,this.json={asset:{version:"2.0",generator:"THREE.GLTFExporter"}},this.cache={meshes:new Map,attributes:new Map,attributesNormalized:new Map,materials:new Map,textures:new Map,images:new Map}}setPlugins(e){this.plugins=e}async write(e,t,n={}){this.options=Object.assign({binary:!1,trs:!1,onlyVisible:!0,maxTextureSize:1/0,animations:[],includeCustomExtensions:!1},n),this.options.animations.length>0&&(this.options.trs=!0),this.processInput(e),await Promise.all(this.pending);const i=this,s=i.buffers,o=i.json;n=i.options;const a=i.extensionsUsed,A=new Blob(s,{type:"application/octet-stream"}),l=Object.keys(a);if(l.length>0&&(o.extensionsUsed=l),o.buffers&&o.buffers.length>0&&(o.buffers[0].byteLength=A.size),n.binary===!0){const c=new FileReader;c.readAsArrayBuffer(A),c.onloadend=function(){const u=cC(c.result),f=new DataView(new ArrayBuffer(eS));f.setUint32(0,u.byteLength,!0),f.setUint32(4,PK,!0);const d=cC(JK(JSON.stringify(o)),32),p=new DataView(new ArrayBuffer(eS));p.setUint32(0,d.byteLength,!0),p.setUint32(4,ZK,!0);const h=new ArrayBuffer($1),m=new DataView(h);m.setUint32(0,LK,!0),m.setUint32(4,WK,!0);const g=$1+p.byteLength+d.byteLength+f.byteLength+u.byteLength;m.setUint32(8,g,!0);const B=new Blob([h,p,d,f,u],{type:"application/octet-stream"}),v=new FileReader;v.readAsArrayBuffer(B),v.onloadend=function(){t(v.result)}}}else if(o.buffers&&o.buffers.length>0){const c=new FileReader;c.readAsDataURL(A),c.onloadend=function(){const u=c.result;o.buffers[0].uri=u,t(o)}}else t(o)}serializeUserData(e,t){if(Object.keys(e.userData).length===0)return;const n=this.options,i=this.extensionsUsed;try{const s=JSON.parse(JSON.stringify(e.userData));if(n.includeCustomExtensions&&s.gltfExtensions){t.extensions===void 0&&(t.extensions={});for(const o in s.gltfExtensions)t.extensions[o]=s.gltfExtensions[o],i[o]=!0;delete s.gltfExtensions}Object.keys(s).length>0&&(t.extras=s)}catch(s){console.warn("THREE.GLTFExporter: userData of '"+e.name+"' won't be serialized because of JSON.stringify error - "+s.message)}}getUID(e,t=!1){if(this.uids.has(e)===!1){const i=new Map;i.set(!0,this.uid++),i.set(!1,this.uid++),this.uids.set(e,i)}return this.uids.get(e).get(t)}isNormalizedNormalAttribute(e){if(this.cache.attributesNormalized.has(e))return!1;const n=new H;for(let i=0,s=e.count;i<s;i++)if(Math.abs(n.fromBufferAttribute(e,i).length()-1)>5e-4)return!1;return!0}createNormalizedNormalAttribute(e){const t=this.cache;if(t.attributesNormalized.has(e))return t.attributesNormalized.get(e);const n=e.clone(),i=new H;for(let s=0,o=n.count;s<o;s++)i.fromBufferAttribute(n,s),i.x===0&&i.y===0&&i.z===0?i.setX(1):i.normalize(),n.setXYZ(s,i.x,i.y,i.z);return t.attributesNormalized.set(e,n),n}applyTextureTransform(e,t){let n=!1;const i={};(t.offset.x!==0||t.offset.y!==0)&&(i.offset=t.offset.toArray(),n=!0),t.rotation!==0&&(i.rotation=t.rotation,n=!0),(t.repeat.x!==1||t.repeat.y!==1)&&(i.scale=t.repeat.toArray(),n=!0),n&&(e.extensions=e.extensions||{},e.extensions.KHR_texture_transform=i,this.extensionsUsed.KHR_texture_transform=!0)}buildMetalRoughTexture(e,t){if(e===t)return e;function n(d){return d.encoding===lt?function(h){return h<.04045?h*.0773993808:Math.pow(h*.9478672986+.0521327014,2.4)}:function(h){return h}}console.warn("THREE.GLTFExporter: Merged metalnessMap and roughnessMap textures.");const i=e==null?void 0:e.image,s=t==null?void 0:t.image,o=Math.max((i==null?void 0:i.width)||0,(s==null?void 0:s.width)||0),a=Math.max((i==null?void 0:i.height)||0,(s==null?void 0:s.height)||0),A=tS();A.width=o,A.height=a;const l=A.getContext("2d");l.fillStyle="#00ffff",l.fillRect(0,0,o,a);const c=l.getImageData(0,0,o,a);if(i){l.drawImage(i,0,0,o,a);const d=n(e),p=l.getImageData(0,0,o,a).data;for(let h=2;h<p.length;h+=4)c.data[h]=d(p[h]/256)*256}if(s){l.drawImage(s,0,0,o,a);const d=n(t),p=l.getImageData(0,0,o,a).data;for(let h=1;h<p.length;h+=4)c.data[h]=d(p[h]/256)*256}l.putImageData(c,0,0);const f=(e||t).clone();return f.source=new Bx(A),f.encoding=gs,f}processBuffer(e){const t=this.json,n=this.buffers;return t.buffers||(t.buffers=[{byteLength:0}]),n.push(e),0}processBufferView(e,t,n,i,s){const o=this.json;o.bufferViews||(o.bufferViews=[]);let a;t===Jt.UNSIGNED_BYTE?a=1:t===Jt.UNSIGNED_SHORT?a=2:a=4;const A=_V(i*e.itemSize*a),l=new DataView(new ArrayBuffer(A));let c=0;for(let d=n;d<n+i;d++)for(let p=0;p<e.itemSize;p++){let h;e.itemSize>4?h=e.array[d*e.itemSize+p]:(p===0?h=e.getX(d):p===1?h=e.getY(d):p===2?h=e.getZ(d):p===3&&(h=e.getW(d)),e.normalized===!0&&(h=It.normalize(h,e.array))),t===Jt.FLOAT?l.setFloat32(c,h,!0):t===Jt.UNSIGNED_INT?l.setUint32(c,h,!0):t===Jt.UNSIGNED_SHORT?l.setUint16(c,h,!0):t===Jt.UNSIGNED_BYTE&&l.setUint8(c,h),c+=a}const u={buffer:this.processBuffer(l.buffer),byteOffset:this.byteOffset,byteLength:A};return s!==void 0&&(u.target=s),s===Jt.ARRAY_BUFFER&&(u.byteStride=e.itemSize*a),this.byteOffset+=A,o.bufferViews.push(u),{id:o.bufferViews.length-1,byteLength:0}}processBufferViewImage(e){const t=this,n=t.json;return n.bufferViews||(n.bufferViews=[]),new Promise(function(i){const s=new FileReader;s.readAsArrayBuffer(e),s.onloadend=function(){const o=cC(s.result),a={buffer:t.processBuffer(o),byteOffset:t.byteOffset,byteLength:o.byteLength};t.byteOffset+=o.byteLength,i(n.bufferViews.push(a)-1)}})}processAccessor(e,t,n,i){const s=this.json,o={1:"SCALAR",2:"VEC2",3:"VEC3",4:"VEC4",16:"MAT4"};let a;if(e.array.constructor===Float32Array)a=Jt.FLOAT;else if(e.array.constructor===Uint32Array)a=Jt.UNSIGNED_INT;else if(e.array.constructor===Uint16Array)a=Jt.UNSIGNED_SHORT;else if(e.array.constructor===Uint8Array)a=Jt.UNSIGNED_BYTE;else throw new Error("THREE.GLTFExporter: Unsupported bufferAttribute component type.");if(n===void 0&&(n=0),i===void 0&&(i=e.count),i===0)return null;const A=OK(e,n,i);let l;t!==void 0&&(l=e===t.index?Jt.ELEMENT_ARRAY_BUFFER:Jt.ARRAY_BUFFER);const c=this.processBufferView(e,a,n,i,l),u={bufferView:c.id,byteOffset:c.byteOffset,componentType:a,count:i,max:A.max,min:A.min,type:o[e.itemSize]};return e.normalized===!0&&(u.normalized=!0),s.accessors||(s.accessors=[]),s.accessors.push(u)-1}processImage(e,t,n,i="image/png"){if(e!==null){const s=this,o=s.cache,a=s.json,A=s.options,l=s.pending;o.images.has(e)||o.images.set(e,{});const c=o.images.get(e),u=i+":flipY/"+n.toString();if(c[u]!==void 0)return c[u];a.images||(a.images=[]);const f={mimeType:i},d=tS();d.width=Math.min(e.width,A.maxTextureSize),d.height=Math.min(e.height,A.maxTextureSize);const p=d.getContext("2d");if(n===!0&&(p.translate(0,d.height),p.scale(1,-1)),e.data!==void 0){t!==ei&&console.error("GLTFExporter: Only RGBAFormat is supported."),(e.width>A.maxTextureSize||e.height>A.maxTextureSize)&&console.warn("GLTFExporter: Image size is bigger than maxTextureSize",e);const m=new Uint8ClampedArray(e.height*e.width*4);for(let g=0;g<m.length;g+=4)m[g+0]=e.data[g+0],m[g+1]=e.data[g+1],m[g+2]=e.data[g+2],m[g+3]=e.data[g+3];p.putImageData(new ImageData(m,e.width,e.height),0,0)}else p.drawImage(e,0,0,d.width,d.height);A.binary===!0?l.push(nS(d,i).then(m=>s.processBufferViewImage(m)).then(m=>{f.bufferView=m})):d.toDataURL!==void 0?f.uri=d.toDataURL(i):l.push(nS(d,i).then(m=>new FileReader().readAsDataURL(m)).then(m=>{f.uri=m}));const h=a.images.push(f)-1;return c[u]=h,h}else throw new Error("THREE.GLTFExporter: No valid image data found. Unable to process texture.")}processSampler(e){const t=this.json;t.samplers||(t.samplers=[]);const n={magFilter:Ei[e.magFilter],minFilter:Ei[e.minFilter],wrapS:Ei[e.wrapS],wrapT:Ei[e.wrapT]};return t.samplers.push(n)-1}processTexture(e){const t=this.cache,n=this.json;if(t.textures.has(e))return t.textures.get(e);n.textures||(n.textures=[]);let i=e.userData.mimeType;i==="image/webp"&&(i="image/png");const s={sampler:this.processSampler(e),source:this.processImage(e.image,e.format,e.flipY,i)};e.name&&(s.name=e.name),this._invokeAll(function(a){a.writeTexture&&a.writeTexture(e,s)});const o=n.textures.push(s)-1;return t.textures.set(e,o),o}processMaterial(e){const t=this.cache,n=this.json;if(t.materials.has(e))return t.materials.get(e);if(e.isShaderMaterial)return console.warn("GLTFExporter: THREE.ShaderMaterial not supported."),null;n.materials||(n.materials=[]);const i={pbrMetallicRoughness:{}};e.isMeshStandardMaterial!==!0&&e.isMeshBasicMaterial!==!0&&console.warn("GLTFExporter: Use MeshStandardMaterial or MeshBasicMaterial for best results.");const s=e.color.toArray().concat([e.opacity]);if(Od(s,[1,1,1,1])||(i.pbrMetallicRoughness.baseColorFactor=s),e.isMeshStandardMaterial?(i.pbrMetallicRoughness.metallicFactor=e.metalness,i.pbrMetallicRoughness.roughnessFactor=e.roughness):(i.pbrMetallicRoughness.metallicFactor=.5,i.pbrMetallicRoughness.roughnessFactor=.5),e.metalnessMap||e.roughnessMap){const a=this.buildMetalRoughTexture(e.metalnessMap,e.roughnessMap),A={index:this.processTexture(a)};this.applyTextureTransform(A,a),i.pbrMetallicRoughness.metallicRoughnessTexture=A}if(e.map){const a={index:this.processTexture(e.map)};this.applyTextureTransform(a,e.map),i.pbrMetallicRoughness.baseColorTexture=a}if(e.emissive){const a=e.emissive.clone().multiplyScalar(e.emissiveIntensity),A=Math.max(a.r,a.g,a.b);if(A>1&&(a.multiplyScalar(1/A),console.warn("THREE.GLTFExporter: Some emissive components exceed 1; emissive has been limited")),A>0&&(i.emissiveFactor=a.toArray()),e.emissiveMap){const l={index:this.processTexture(e.emissiveMap)};this.applyTextureTransform(l,e.emissiveMap),i.emissiveTexture=l}}if(e.normalMap){const a={index:this.processTexture(e.normalMap)};e.normalScale&&e.normalScale.x!==1&&(a.scale=e.normalScale.x),this.applyTextureTransform(a,e.normalMap),i.normalTexture=a}if(e.aoMap){const a={index:this.processTexture(e.aoMap),texCoord:1};e.aoMapIntensity!==1&&(a.strength=e.aoMapIntensity),this.applyTextureTransform(a,e.aoMap),i.occlusionTexture=a}e.transparent?i.alphaMode="BLEND":e.alphaTest>0&&(i.alphaMode="MASK",i.alphaCutoff=e.alphaTest),e.side===Va&&(i.doubleSided=!0),e.name!==""&&(i.name=e.name),this.serializeUserData(e,i),this._invokeAll(function(a){a.writeMaterial&&a.writeMaterial(e,i)});const o=n.materials.push(i)-1;return t.materials.set(e,o),o}processMesh(e){const t=this.cache,n=this.json,i=[e.geometry.uuid];if(Array.isArray(e.material))for(let v=0,w=e.material.length;v<w;v++)i.push(e.material[v].uuid);else i.push(e.material.uuid);const s=i.join(":");if(t.meshes.has(s))return t.meshes.get(s);const o=e.geometry;let a;e.isLineSegments?a=Jt.LINES:e.isLineLoop?a=Jt.LINE_LOOP:e.isLine?a=Jt.LINE_STRIP:e.isPoints?a=Jt.POINTS:a=e.material.wireframe?Jt.LINES:Jt.TRIANGLES;const A={},l={},c=[],u=[],f={uv:"TEXCOORD_0",uv2:"TEXCOORD_1",color:"COLOR_0",skinWeight:"WEIGHTS_0",skinIndex:"JOINTS_0"},d=o.getAttribute("normal");d!==void 0&&!this.isNormalizedNormalAttribute(d)&&(console.warn("THREE.GLTFExporter: Creating normalized normal attribute from the non-normalized one."),o.setAttribute("normal",this.createNormalizedNormalAttribute(d)));let p=null;for(let v in o.attributes){if(v.slice(0,5)==="morph")continue;const w=o.attributes[v];if(v=f[v]||v.toUpperCase(),/^(POSITION|NORMAL|TANGENT|TEXCOORD_\d+|COLOR_\d+|JOINTS_\d+|WEIGHTS_\d+)$/.test(v)||(v="_"+v),t.attributes.has(this.getUID(w))){l[v]=t.attributes.get(this.getUID(w));continue}p=null;const I=w.array;v==="JOINTS_0"&&!(I instanceof Uint16Array)&&!(I instanceof Uint8Array)&&(console.warn('GLTFExporter: Attribute "skinIndex" converted to type UNSIGNED_SHORT.'),p=new pt(new Uint16Array(I),w.itemSize,w.normalized));const E=this.processAccessor(p||w,o);E!==null&&(l[v]=E,t.attributes.set(this.getUID(w),E))}if(d!==void 0&&o.setAttribute("normal",d),Object.keys(l).length===0)return null;if(e.morphTargetInfluences!==void 0&&e.morphTargetInfluences.length>0){const v=[],w=[],C={};if(e.morphTargetDictionary!==void 0)for(const I in e.morphTargetDictionary)C[e.morphTargetDictionary[I]]=I;for(let I=0;I<e.morphTargetInfluences.length;++I){const E={};let U=!1;for(const S in o.morphAttributes){if(S!=="position"&&S!=="normal"){U||(console.warn("GLTFExporter: Only POSITION and NORMAL morph are supported."),U=!0);continue}const V=o.morphAttributes[S][I],J=S.toUpperCase(),z=o.attributes[S];if(t.attributes.has(this.getUID(V,!0))){E[J]=t.attributes.get(this.getUID(V,!0));continue}const R=V.clone();if(!o.morphTargetsRelative)for(let y=0,Q=V.count;y<Q;y++)for(let _=0;_<V.itemSize;_++)_===0&&R.setX(y,V.getX(y)-z.getX(y)),_===1&&R.setY(y,V.getY(y)-z.getY(y)),_===2&&R.setZ(y,V.getZ(y)-z.getZ(y)),_===3&&R.setW(y,V.getW(y)-z.getW(y));E[J]=this.processAccessor(R,o),t.attributes.set(this.getUID(z,!0),E[J])}u.push(E),v.push(e.morphTargetInfluences[I]),e.morphTargetDictionary!==void 0&&w.push(C[I])}A.weights=v,w.length>0&&(A.extras={},A.extras.targetNames=w)}const h=Array.isArray(e.material);if(h&&o.groups.length===0)return null;const m=h?e.material:[e.material],g=h?o.groups:[{materialIndex:0,start:void 0,count:void 0}];for(let v=0,w=g.length;v<w;v++){const C={mode:a,attributes:l};if(this.serializeUserData(o,C),u.length>0&&(C.targets=u),o.index!==null){let E=this.getUID(o.index);(g[v].start!==void 0||g[v].count!==void 0)&&(E+=":"+g[v].start+":"+g[v].count),t.attributes.has(E)?C.indices=t.attributes.get(E):(C.indices=this.processAccessor(o.index,o,g[v].start,g[v].count),t.attributes.set(E,C.indices)),C.indices===null&&delete C.indices}const I=this.processMaterial(m[g[v].materialIndex]);I!==null&&(C.material=I),c.push(C)}A.primitives=c,n.meshes||(n.meshes=[]),this._invokeAll(function(v){v.writeMesh&&v.writeMesh(e,A)});const B=n.meshes.push(A)-1;return t.meshes.set(s,B),B}processCamera(e){const t=this.json;t.cameras||(t.cameras=[]);const n=e.isOrthographicCamera,i={type:n?"orthographic":"perspective"};return n?i.orthographic={xmag:e.right*2,ymag:e.top*2,zfar:e.far<=0?.001:e.far,znear:e.near<0?0:e.near}:i.perspective={aspectRatio:e.aspect,yfov:It.degToRad(e.fov),zfar:e.far<=0?.001:e.far,znear:e.near<0?0:e.near},e.name!==""&&(i.name=e.type),t.cameras.push(i)-1}processAnimation(e,t){const n=this.json,i=this.nodeMap;n.animations||(n.animations=[]),e=_x.Utils.mergeMorphTargetTracks(e.clone(),t);const s=e.tracks,o=[],a=[];for(let A=0;A<s.length;++A){const l=s[A],c=ht.parseTrackName(l.name);let u=ht.findNode(t,c.nodeName);const f=q1[c.propertyName];if(c.objectName==="bones"&&(u.isSkinnedMesh===!0?u=u.skeleton.getBoneByName(c.objectIndex):u=void 0),!u||!f)return console.warn('THREE.GLTFExporter: Could not export animation track "%s".',l.name),null;const d=1;let p=l.values.length/l.times.length;f===q1.morphTargetInfluences&&(p/=u.morphTargetInfluences.length);let h;l.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline===!0?(h="CUBICSPLINE",p/=3):l.getInterpolation()===vf?h="STEP":h="LINEAR",a.push({input:this.processAccessor(new pt(l.times,d)),output:this.processAccessor(new pt(l.values,p)),interpolation:h}),o.push({sampler:a.length-1,target:{node:i.get(u),path:f}})}return n.animations.push({name:e.name||"clip_"+n.animations.length,samplers:a,channels:o}),n.animations.length-1}processSkin(e){const t=this.json,n=this.nodeMap,i=t.nodes[n.get(e)],s=e.skeleton;if(s===void 0)return null;const o=e.skeleton.bones[0];if(o===void 0)return null;const a=[],A=new Float32Array(s.bones.length*16),l=new Le;for(let u=0;u<s.bones.length;++u)a.push(n.get(s.bones[u])),l.copy(s.boneInverses[u]),l.multiply(e.bindMatrix).toArray(A,u*16);return t.skins===void 0&&(t.skins=[]),t.skins.push({inverseBindMatrices:this.processAccessor(new pt(A,16)),joints:a,skeleton:n.get(o)}),i.skin=t.skins.length-1}processNode(e){const t=this.json,n=this.options,i=this.nodeMap;t.nodes||(t.nodes=[]);const s={};if(n.trs){const a=e.quaternion.toArray(),A=e.position.toArray(),l=e.scale.toArray();Od(a,[0,0,0,1])||(s.rotation=a),Od(A,[0,0,0])||(s.translation=A),Od(l,[1,1,1])||(s.scale=l)}else e.matrixAutoUpdate&&e.updateMatrix(),GK(e.matrix)===!1&&(s.matrix=e.matrix.elements);if(e.name!==""&&(s.name=String(e.name)),this.serializeUserData(e,s),e.isMesh||e.isLine||e.isPoints){const a=this.processMesh(e);a!==null&&(s.mesh=a)}else e.isCamera&&(s.camera=this.processCamera(e));if(e.isSkinnedMesh&&this.skins.push(e),e.children.length>0){const a=[];for(let A=0,l=e.children.length;A<l;A++){const c=e.children[A];if(c.visible||n.onlyVisible===!1){const u=this.processNode(c);u!==null&&a.push(u)}}a.length>0&&(s.children=a)}this._invokeAll(function(a){a.writeNode&&a.writeNode(e,s)});const o=t.nodes.push(s)-1;return i.set(e,o),o}processScene(e){const t=this.json,n=this.options;t.scenes||(t.scenes=[],t.scene=0);const i={};e.name!==""&&(i.name=e.name),t.scenes.push(i);const s=[];for(let o=0,a=e.children.length;o<a;o++){const A=e.children[o];if(A.visible||n.onlyVisible===!1){const l=this.processNode(A);l!==null&&s.push(l)}}s.length>0&&(i.nodes=s),this.serializeUserData(e,i)}processObjects(e){const t=new G0;t.name="AuxScene";for(let n=0;n<e.length;n++)t.children.push(e[n]);this.processScene(t)}processInput(e){const t=this.options;e=e instanceof Array?e:[e],this._invokeAll(function(i){i.beforeParse&&i.beforeParse(e)});const n=[];for(let i=0;i<e.length;i++)e[i]instanceof G0?this.processScene(e[i]):n.push(e[i]);n.length>0&&this.processObjects(n);for(let i=0;i<this.skins.length;++i)this.processSkin(this.skins[i]);for(let i=0;i<t.animations.length;++i)this.processAnimation(t.animations[i],e[0]);this._invokeAll(function(i){i.afterParse&&i.afterParse(e)})}_invokeAll(e){for(let t=0,n=this.plugins.length;t<n;t++)e(this.plugins[t])}}class zK{constructor(e){this.writer=e,this.name="KHR_lights_punctual"}writeNode(e,t){if(!e.isLight)return;if(!e.isDirectionalLight&&!e.isPointLight&&!e.isSpotLight){console.warn("THREE.GLTFExporter: Only directional, point, and spot lights are supported.",e);return}const n=this.writer,i=n.json,s=n.extensionsUsed,o={};e.name&&(o.name=e.name),o.color=e.color.toArray(),o.intensity=e.intensity,e.isDirectionalLight?o.type="directional":e.isPointLight?(o.type="point",e.distance>0&&(o.range=e.distance)):e.isSpotLight&&(o.type="spot",e.distance>0&&(o.range=e.distance),o.spot={},o.spot.innerConeAngle=(e.penumbra-1)*e.angle*-1,o.spot.outerConeAngle=e.angle),e.decay!==void 0&&e.decay!==2&&console.warn("THREE.GLTFExporter: Light decay may be lost. glTF is physically-based, and expects light.decay=2."),e.target&&(e.target.parent!==e||e.target.position.x!==0||e.target.position.y!==0||e.target.position.z!==-1)&&console.warn("THREE.GLTFExporter: Light direction may be lost. For best results, make light.target a child of the light with position 0,0,-1."),s[this.name]||(i.extensions=i.extensions||{},i.extensions[this.name]={lights:[]},s[this.name]=!0);const a=i.extensions[this.name].lights;a.push(o),t.extensions=t.extensions||{},t.extensions[this.name]={light:a.length-1}}}let XK=class{constructor(e){this.writer=e,this.name="KHR_materials_unlit"}writeMaterial(e,t){if(!e.isMeshBasicMaterial)return;const i=this.writer.extensionsUsed;t.extensions=t.extensions||{},t.extensions[this.name]={},i[this.name]=!0,t.pbrMetallicRoughness.metallicFactor=0,t.pbrMetallicRoughness.roughnessFactor=.9}},YK=class{constructor(e){this.writer=e,this.name="KHR_materials_clearcoat"}writeMaterial(e,t){if(!e.isMeshPhysicalMaterial)return;const n=this.writer,i=n.extensionsUsed,s={};if(s.clearcoatFactor=e.clearcoat,e.clearcoatMap){const o={index:n.processTexture(e.clearcoatMap)};n.applyTextureTransform(o,e.clearcoatMap),s.clearcoatTexture=o}if(s.clearcoatRoughnessFactor=e.clearcoatRoughness,e.clearcoatRoughnessMap){const o={index:n.processTexture(e.clearcoatRoughnessMap)};n.applyTextureTransform(o,e.clearcoatRoughnessMap),s.clearcoatRoughnessTexture=o}if(e.clearcoatNormalMap){const o={index:n.processTexture(e.clearcoatNormalMap)};n.applyTextureTransform(o,e.clearcoatNormalMap),s.clearcoatNormalTexture=o}t.extensions=t.extensions||{},t.extensions[this.name]=s,i[this.name]=!0}},KK=class{constructor(e){this.writer=e,this.name="KHR_materials_iridescence"}writeMaterial(e,t){if(!e.isMeshPhysicalMaterial)return;const n=this.writer,i=n.extensionsUsed,s={};if(s.iridescenceFactor=e.iridescence,e.iridescenceMap){const o={index:n.processTexture(e.iridescenceMap)};n.applyTextureTransform(o,e.iridescenceMap),s.iridescenceTexture=o}if(s.iridescenceIor=e.iridescenceIOR,s.iridescenceThicknessMinimum=e.iridescenceThicknessRange[0],s.iridescenceThicknessMaximum=e.iridescenceThicknessRange[1],e.iridescenceThicknessMap){const o={index:n.processTexture(e.iridescenceThicknessMap)};n.applyTextureTransform(o,e.iridescenceThicknessMap),s.iridescenceThicknessTexture=o}t.extensions=t.extensions||{},t.extensions[this.name]=s,i[this.name]=!0}},jK=class{constructor(e){this.writer=e,this.name="KHR_materials_transmission"}writeMaterial(e,t){if(!e.isMeshPhysicalMaterial||e.transmission===0)return;const n=this.writer,i=n.extensionsUsed,s={};if(s.transmissionFactor=e.transmission,e.transmissionMap){const o={index:n.processTexture(e.transmissionMap)};n.applyTextureTransform(o,e.transmissionMap),s.transmissionTexture=o}t.extensions=t.extensions||{},t.extensions[this.name]=s,i[this.name]=!0}},qK=class{constructor(e){this.writer=e,this.name="KHR_materials_volume"}writeMaterial(e,t){if(!e.isMeshPhysicalMaterial||e.transmission===0)return;const n=this.writer,i=n.extensionsUsed,s={};if(s.thicknessFactor=e.thickness,e.thicknessMap){const o={index:n.processTexture(e.thicknessMap)};n.applyTextureTransform(o,e.thicknessMap),s.thicknessTexture=o}s.attenuationDistance=e.attenuationDistance,s.attenuationColor=e.attenuationColor.toArray(),t.extensions=t.extensions||{},t.extensions[this.name]=s,i[this.name]=!0}};_x.Utils={insertKeyframe:function(r,e){const n=r.getValueSize(),i=new r.TimeBufferType(r.times.length+1),s=new r.ValueBufferType(r.values.length+n),o=r.createInterpolant(new r.ValueBufferType(n));let a;if(r.times.length===0){i[0]=e;for(let A=0;A<n;A++)s[A]=0;a=0}else if(e<r.times[0]){if(Math.abs(r.times[0]-e)<.001)return 0;i[0]=e,i.set(r.times,1),s.set(o.evaluate(e),0),s.set(r.values,n),a=0}else if(e>r.times[r.times.length-1]){if(Math.abs(r.times[r.times.length-1]-e)<.001)return r.times.length-1;i[i.length-1]=e,i.set(r.times,0),s.set(r.values,0),s.set(o.evaluate(e),r.values.length),a=i.length-1}else for(let A=0;A<r.times.length;A++){if(Math.abs(r.times[A]-e)<.001)return A;if(r.times[A]<e&&r.times[A+1]>e){i.set(r.times.slice(0,A+1),0),i[A+1]=e,i.set(r.times.slice(A+1),A+2),s.set(r.values.slice(0,(A+1)*n),0),s.set(o.evaluate(e),(A+1)*n),s.set(r.values.slice((A+1)*n),(A+2)*n),a=A+1;break}}return r.times=i,r.values=s,a},mergeMorphTargetTracks:function(r,e){const t=[],n={},i=r.tracks;for(let s=0;s<i.length;++s){let o=i[s];const a=ht.parseTrackName(o.name),A=ht.findNode(e,a.nodeName);if(a.propertyName!=="morphTargetInfluences"||a.propertyIndex===void 0){t.push(o);continue}if(o.createInterpolant!==o.InterpolantFactoryMethodDiscrete&&o.createInterpolant!==o.InterpolantFactoryMethodLinear){if(o.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline)throw new Error("THREE.GLTFExporter: Cannot merge tracks with glTF CUBICSPLINE interpolation.");console.warn("THREE.GLTFExporter: Morph target interpolation mode not yet supported. Using LINEAR instead."),o=o.clone(),o.setInterpolation(rc)}const l=A.morphTargetInfluences.length,c=A.morphTargetDictionary[a.propertyIndex];if(c===void 0)throw new Error("THREE.GLTFExporter: Morph target name not found: "+a.propertyIndex);let u;if(n[A.uuid]===void 0){u=o.clone();const d=new u.ValueBufferType(l*u.times.length);for(let p=0;p<u.times.length;p++)d[p*l+c]=u.values[p];u.name=(a.nodeName||"")+".morphTargetInfluences",u.values=d,n[A.uuid]=u,t.push(u);continue}const f=o.createInterpolant(new o.ValueBufferType(1));u=n[A.uuid];for(let d=0;d<u.times.length;d++)u.values[d*l+c]=f.evaluate(u.times[d]);for(let d=0;d<o.times.length;d++){const p=this.insertKeyframe(u,o.times[d]);u.values[p*l+c]=o.values[d]}}return r.tracks=t,r}};var $K={},dv={};dv.byteLength=n9;dv.toByteArray=i9;dv.fromByteArray=a9;var mo=[],Xi=[],e9=typeof Uint8Array<"u"?Uint8Array:Array,uC="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var Dc=0,t9=uC.length;Dc<t9;++Dc)mo[Dc]=uC[Dc],Xi[uC.charCodeAt(Dc)]=Dc;Xi["-".charCodeAt(0)]=62;Xi["_".charCodeAt(0)]=63;function RV(r){var e=r.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var t=r.indexOf("=");t===-1&&(t=e);var n=t===e?0:4-t%4;return[t,n]}function n9(r){var e=RV(r),t=e[0],n=e[1];return(t+n)*3/4-n}function r9(r,e,t){return(e+t)*3/4-t}function i9(r){var e,t=RV(r),n=t[0],i=t[1],s=new e9(r9(r,n,i)),o=0,a=i>0?n-4:n,A;for(A=0;A<a;A+=4)e=Xi[r.charCodeAt(A)]<<18|Xi[r.charCodeAt(A+1)]<<12|Xi[r.charCodeAt(A+2)]<<6|Xi[r.charCodeAt(A+3)],s[o++]=e>>16&255,s[o++]=e>>8&255,s[o++]=e&255;return i===2&&(e=Xi[r.charCodeAt(A)]<<2|Xi[r.charCodeAt(A+1)]>>4,s[o++]=e&255),i===1&&(e=Xi[r.charCodeAt(A)]<<10|Xi[r.charCodeAt(A+1)]<<4|Xi[r.charCodeAt(A+2)]>>2,s[o++]=e>>8&255,s[o++]=e&255),s}function s9(r){return mo[r>>18&63]+mo[r>>12&63]+mo[r>>6&63]+mo[r&63]}function o9(r,e,t){for(var n,i=[],s=e;s<t;s+=3)n=(r[s]<<16&16711680)+(r[s+1]<<8&65280)+(r[s+2]&255),i.push(s9(n));return i.join("")}function a9(r){for(var e,t=r.length,n=t%3,i=[],s=16383,o=0,a=t-n;o<a;o+=s)i.push(o9(r,o,o+s>a?a:o+s));return n===1?(e=r[t-1],i.push(mo[e>>2]+mo[e<<4&63]+"==")):n===2&&(e=(r[t-2]<<8)+r[t-1],i.push(mo[e>>10]+mo[e>>4&63]+mo[e<<2&63]+"=")),i.join("")}var Rx={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */Rx.read=function(r,e,t,n,i){var s,o,a=i*8-n-1,A=(1<<a)-1,l=A>>1,c=-7,u=t?i-1:0,f=t?-1:1,d=r[e+u];for(u+=f,s=d&(1<<-c)-1,d>>=-c,c+=a;c>0;s=s*256+r[e+u],u+=f,c-=8);for(o=s&(1<<-c)-1,s>>=-c,c+=n;c>0;o=o*256+r[e+u],u+=f,c-=8);if(s===0)s=1-l;else{if(s===A)return o?NaN:(d?-1:1)*(1/0);o=o+Math.pow(2,n),s=s-l}return(d?-1:1)*o*Math.pow(2,s-n)};Rx.write=function(r,e,t,n,i,s){var o,a,A,l=s*8-i-1,c=(1<<l)-1,u=c>>1,f=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,d=n?0:s-1,p=n?1:-1,h=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,o=c):(o=Math.floor(Math.log(e)/Math.LN2),e*(A=Math.pow(2,-o))<1&&(o--,A*=2),o+u>=1?e+=f/A:e+=f*Math.pow(2,1-u),e*A>=2&&(o++,A/=2),o+u>=c?(a=0,o=c):o+u>=1?(a=(e*A-1)*Math.pow(2,i),o=o+u):(a=e*Math.pow(2,u-1)*Math.pow(2,i),o=0));i>=8;r[t+d]=a&255,d+=p,a/=256,i-=8);for(o=o<<i|a,l+=i;l>0;r[t+d]=o&255,d+=p,o/=256,l-=8);r[t+d-p]|=h*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(r){const e=dv,t=Rx,n=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;r.Buffer=a,r.SlowBuffer=B,r.INSPECT_MAX_BYTES=50;const i=2147483647;r.kMaxLength=i,a.TYPED_ARRAY_SUPPORT=s(),!a.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function s(){try{const W=new Uint8Array(1),b={foo:function(){return 42}};return Object.setPrototypeOf(b,Uint8Array.prototype),Object.setPrototypeOf(W,b),W.foo()===42}catch{return!1}}Object.defineProperty(a.prototype,"parent",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.buffer}}),Object.defineProperty(a.prototype,"offset",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.byteOffset}});function o(W){if(W>i)throw new RangeError('The value "'+W+'" is invalid for option "size"');const b=new Uint8Array(W);return Object.setPrototypeOf(b,a.prototype),b}function a(W,b,F){if(typeof W=="number"){if(typeof b=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return u(W)}return A(W,b,F)}a.poolSize=8192;function A(W,b,F){if(typeof W=="string")return f(W,b);if(ArrayBuffer.isView(W))return p(W);if(W==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof W);if(j(W,ArrayBuffer)||W&&j(W.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(j(W,SharedArrayBuffer)||W&&j(W.buffer,SharedArrayBuffer)))return h(W,b,F);if(typeof W=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const N=W.valueOf&&W.valueOf();if(N!=null&&N!==W)return a.from(N,b,F);const K=m(W);if(K)return K;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof W[Symbol.toPrimitive]=="function")return a.from(W[Symbol.toPrimitive]("string"),b,F);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof W)}a.from=function(W,b,F){return A(W,b,F)},Object.setPrototypeOf(a.prototype,Uint8Array.prototype),Object.setPrototypeOf(a,Uint8Array);function l(W){if(typeof W!="number")throw new TypeError('"size" argument must be of type number');if(W<0)throw new RangeError('The value "'+W+'" is invalid for option "size"')}function c(W,b,F){return l(W),W<=0?o(W):b!==void 0?typeof F=="string"?o(W).fill(b,F):o(W).fill(b):o(W)}a.alloc=function(W,b,F){return c(W,b,F)};function u(W){return l(W),o(W<0?0:g(W)|0)}a.allocUnsafe=function(W){return u(W)},a.allocUnsafeSlow=function(W){return u(W)};function f(W,b){if((typeof b!="string"||b==="")&&(b="utf8"),!a.isEncoding(b))throw new TypeError("Unknown encoding: "+b);const F=v(W,b)|0;let N=o(F);const K=N.write(W,b);return K!==F&&(N=N.slice(0,K)),N}function d(W){const b=W.length<0?0:g(W.length)|0,F=o(b);for(let N=0;N<b;N+=1)F[N]=W[N]&255;return F}function p(W){if(j(W,Uint8Array)){const b=new Uint8Array(W);return h(b.buffer,b.byteOffset,b.byteLength)}return d(W)}function h(W,b,F){if(b<0||W.byteLength<b)throw new RangeError('"offset" is outside of buffer bounds');if(W.byteLength<b+(F||0))throw new RangeError('"length" is outside of buffer bounds');let N;return b===void 0&&F===void 0?N=new Uint8Array(W):F===void 0?N=new Uint8Array(W,b):N=new Uint8Array(W,b,F),Object.setPrototypeOf(N,a.prototype),N}function m(W){if(a.isBuffer(W)){const b=g(W.length)|0,F=o(b);return F.length===0||W.copy(F,0,0,b),F}if(W.length!==void 0)return typeof W.length!="number"||O(W.length)?o(0):d(W);if(W.type==="Buffer"&&Array.isArray(W.data))return d(W.data)}function g(W){if(W>=i)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i.toString(16)+" bytes");return W|0}function B(W){return+W!=W&&(W=0),a.alloc(+W)}a.isBuffer=function(b){return b!=null&&b._isBuffer===!0&&b!==a.prototype},a.compare=function(b,F){if(j(b,Uint8Array)&&(b=a.from(b,b.offset,b.byteLength)),j(F,Uint8Array)&&(F=a.from(F,F.offset,F.byteLength)),!a.isBuffer(b)||!a.isBuffer(F))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(b===F)return 0;let N=b.length,K=F.length;for(let te=0,ne=Math.min(N,K);te<ne;++te)if(b[te]!==F[te]){N=b[te],K=F[te];break}return N<K?-1:K<N?1:0},a.isEncoding=function(b){switch(String(b).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},a.concat=function(b,F){if(!Array.isArray(b))throw new TypeError('"list" argument must be an Array of Buffers');if(b.length===0)return a.alloc(0);let N;if(F===void 0)for(F=0,N=0;N<b.length;++N)F+=b[N].length;const K=a.allocUnsafe(F);let te=0;for(N=0;N<b.length;++N){let ne=b[N];if(j(ne,Uint8Array))te+ne.length>K.length?(a.isBuffer(ne)||(ne=a.from(ne)),ne.copy(K,te)):Uint8Array.prototype.set.call(K,ne,te);else if(a.isBuffer(ne))ne.copy(K,te);else throw new TypeError('"list" argument must be an Array of Buffers');te+=ne.length}return K};function v(W,b){if(a.isBuffer(W))return W.length;if(ArrayBuffer.isView(W)||j(W,ArrayBuffer))return W.byteLength;if(typeof W!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof W);const F=W.length,N=arguments.length>2&&arguments[2]===!0;if(!N&&F===0)return 0;let K=!1;for(;;)switch(b){case"ascii":case"latin1":case"binary":return F;case"utf8":case"utf-8":return Ue(W).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return F*2;case"hex":return F>>>1;case"base64":return Ne(W).length;default:if(K)return N?-1:Ue(W).length;b=(""+b).toLowerCase(),K=!0}}a.byteLength=v;function w(W,b,F){let N=!1;if((b===void 0||b<0)&&(b=0),b>this.length||((F===void 0||F>this.length)&&(F=this.length),F<=0)||(F>>>=0,b>>>=0,F<=b))return"";for(W||(W="utf8");;)switch(W){case"hex":return Z(this,b,F);case"utf8":case"utf-8":return y(this,b,F);case"ascii":return L(this,b,F);case"latin1":case"binary":return T(this,b,F);case"base64":return R(this,b,F);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return G(this,b,F);default:if(N)throw new TypeError("Unknown encoding: "+W);W=(W+"").toLowerCase(),N=!0}}a.prototype._isBuffer=!0;function C(W,b,F){const N=W[b];W[b]=W[F],W[F]=N}a.prototype.swap16=function(){const b=this.length;if(b%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let F=0;F<b;F+=2)C(this,F,F+1);return this},a.prototype.swap32=function(){const b=this.length;if(b%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let F=0;F<b;F+=4)C(this,F,F+3),C(this,F+1,F+2);return this},a.prototype.swap64=function(){const b=this.length;if(b%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let F=0;F<b;F+=8)C(this,F,F+7),C(this,F+1,F+6),C(this,F+2,F+5),C(this,F+3,F+4);return this},a.prototype.toString=function(){const b=this.length;return b===0?"":arguments.length===0?y(this,0,b):w.apply(this,arguments)},a.prototype.toLocaleString=a.prototype.toString,a.prototype.equals=function(b){if(!a.isBuffer(b))throw new TypeError("Argument must be a Buffer");return this===b?!0:a.compare(this,b)===0},a.prototype.inspect=function(){let b="";const F=r.INSPECT_MAX_BYTES;return b=this.toString("hex",0,F).replace(/(.{2})/g,"$1 ").trim(),this.length>F&&(b+=" ... "),"<Buffer "+b+">"},n&&(a.prototype[n]=a.prototype.inspect),a.prototype.compare=function(b,F,N,K,te){if(j(b,Uint8Array)&&(b=a.from(b,b.offset,b.byteLength)),!a.isBuffer(b))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof b);if(F===void 0&&(F=0),N===void 0&&(N=b?b.length:0),K===void 0&&(K=0),te===void 0&&(te=this.length),F<0||N>b.length||K<0||te>this.length)throw new RangeError("out of range index");if(K>=te&&F>=N)return 0;if(K>=te)return-1;if(F>=N)return 1;if(F>>>=0,N>>>=0,K>>>=0,te>>>=0,this===b)return 0;let ne=te-K,we=N-F;const ye=Math.min(ne,we),Se=this.slice(K,te),We=b.slice(F,N);for(let Re=0;Re<ye;++Re)if(Se[Re]!==We[Re]){ne=Se[Re],we=We[Re];break}return ne<we?-1:we<ne?1:0};function I(W,b,F,N,K){if(W.length===0)return-1;if(typeof F=="string"?(N=F,F=0):F>2147483647?F=2147483647:F<-2147483648&&(F=-2147483648),F=+F,O(F)&&(F=K?0:W.length-1),F<0&&(F=W.length+F),F>=W.length){if(K)return-1;F=W.length-1}else if(F<0)if(K)F=0;else return-1;if(typeof b=="string"&&(b=a.from(b,N)),a.isBuffer(b))return b.length===0?-1:E(W,b,F,N,K);if(typeof b=="number")return b=b&255,typeof Uint8Array.prototype.indexOf=="function"?K?Uint8Array.prototype.indexOf.call(W,b,F):Uint8Array.prototype.lastIndexOf.call(W,b,F):E(W,[b],F,N,K);throw new TypeError("val must be string, number or Buffer")}function E(W,b,F,N,K){let te=1,ne=W.length,we=b.length;if(N!==void 0&&(N=String(N).toLowerCase(),N==="ucs2"||N==="ucs-2"||N==="utf16le"||N==="utf-16le")){if(W.length<2||b.length<2)return-1;te=2,ne/=2,we/=2,F/=2}function ye(We,Re){return te===1?We[Re]:We.readUInt16BE(Re*te)}let Se;if(K){let We=-1;for(Se=F;Se<ne;Se++)if(ye(W,Se)===ye(b,We===-1?0:Se-We)){if(We===-1&&(We=Se),Se-We+1===we)return We*te}else We!==-1&&(Se-=Se-We),We=-1}else for(F+we>ne&&(F=ne-we),Se=F;Se>=0;Se--){let We=!0;for(let Re=0;Re<we;Re++)if(ye(W,Se+Re)!==ye(b,Re)){We=!1;break}if(We)return Se}return-1}a.prototype.includes=function(b,F,N){return this.indexOf(b,F,N)!==-1},a.prototype.indexOf=function(b,F,N){return I(this,b,F,N,!0)},a.prototype.lastIndexOf=function(b,F,N){return I(this,b,F,N,!1)};function U(W,b,F,N){F=Number(F)||0;const K=W.length-F;N?(N=Number(N),N>K&&(N=K)):N=K;const te=b.length;N>te/2&&(N=te/2);let ne;for(ne=0;ne<N;++ne){const we=parseInt(b.substr(ne*2,2),16);if(O(we))return ne;W[F+ne]=we}return ne}function S(W,b,F,N){return Ze(Ue(b,W.length-F),W,F,N)}function V(W,b,F,N){return Ze(xe(b),W,F,N)}function J(W,b,F,N){return Ze(Ne(b),W,F,N)}function z(W,b,F,N){return Ze(Fe(b,W.length-F),W,F,N)}a.prototype.write=function(b,F,N,K){if(F===void 0)K="utf8",N=this.length,F=0;else if(N===void 0&&typeof F=="string")K=F,N=this.length,F=0;else if(isFinite(F))F=F>>>0,isFinite(N)?(N=N>>>0,K===void 0&&(K="utf8")):(K=N,N=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const te=this.length-F;if((N===void 0||N>te)&&(N=te),b.length>0&&(N<0||F<0)||F>this.length)throw new RangeError("Attempt to write outside buffer bounds");K||(K="utf8");let ne=!1;for(;;)switch(K){case"hex":return U(this,b,F,N);case"utf8":case"utf-8":return S(this,b,F,N);case"ascii":case"latin1":case"binary":return V(this,b,F,N);case"base64":return J(this,b,F,N);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return z(this,b,F,N);default:if(ne)throw new TypeError("Unknown encoding: "+K);K=(""+K).toLowerCase(),ne=!0}},a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function R(W,b,F){return b===0&&F===W.length?e.fromByteArray(W):e.fromByteArray(W.slice(b,F))}function y(W,b,F){F=Math.min(W.length,F);const N=[];let K=b;for(;K<F;){const te=W[K];let ne=null,we=te>239?4:te>223?3:te>191?2:1;if(K+we<=F){let ye,Se,We,Re;switch(we){case 1:te<128&&(ne=te);break;case 2:ye=W[K+1],(ye&192)===128&&(Re=(te&31)<<6|ye&63,Re>127&&(ne=Re));break;case 3:ye=W[K+1],Se=W[K+2],(ye&192)===128&&(Se&192)===128&&(Re=(te&15)<<12|(ye&63)<<6|Se&63,Re>2047&&(Re<55296||Re>57343)&&(ne=Re));break;case 4:ye=W[K+1],Se=W[K+2],We=W[K+3],(ye&192)===128&&(Se&192)===128&&(We&192)===128&&(Re=(te&15)<<18|(ye&63)<<12|(Se&63)<<6|We&63,Re>65535&&Re<1114112&&(ne=Re))}}ne===null?(ne=65533,we=1):ne>65535&&(ne-=65536,N.push(ne>>>10&1023|55296),ne=56320|ne&1023),N.push(ne),K+=we}return _(N)}const Q=4096;function _(W){const b=W.length;if(b<=Q)return String.fromCharCode.apply(String,W);let F="",N=0;for(;N<b;)F+=String.fromCharCode.apply(String,W.slice(N,N+=Q));return F}function L(W,b,F){let N="";F=Math.min(W.length,F);for(let K=b;K<F;++K)N+=String.fromCharCode(W[K]&127);return N}function T(W,b,F){let N="";F=Math.min(W.length,F);for(let K=b;K<F;++K)N+=String.fromCharCode(W[K]);return N}function Z(W,b,F){const N=W.length;(!b||b<0)&&(b=0),(!F||F<0||F>N)&&(F=N);let K="";for(let te=b;te<F;++te)K+=le[W[te]];return K}function G(W,b,F){const N=W.slice(b,F);let K="";for(let te=0;te<N.length-1;te+=2)K+=String.fromCharCode(N[te]+N[te+1]*256);return K}a.prototype.slice=function(b,F){const N=this.length;b=~~b,F=F===void 0?N:~~F,b<0?(b+=N,b<0&&(b=0)):b>N&&(b=N),F<0?(F+=N,F<0&&(F=0)):F>N&&(F=N),F<b&&(F=b);const K=this.subarray(b,F);return Object.setPrototypeOf(K,a.prototype),K};function D(W,b,F){if(W%1!==0||W<0)throw new RangeError("offset is not uint");if(W+b>F)throw new RangeError("Trying to access beyond buffer length")}a.prototype.readUintLE=a.prototype.readUIntLE=function(b,F,N){b=b>>>0,F=F>>>0,N||D(b,F,this.length);let K=this[b],te=1,ne=0;for(;++ne<F&&(te*=256);)K+=this[b+ne]*te;return K},a.prototype.readUintBE=a.prototype.readUIntBE=function(b,F,N){b=b>>>0,F=F>>>0,N||D(b,F,this.length);let K=this[b+--F],te=1;for(;F>0&&(te*=256);)K+=this[b+--F]*te;return K},a.prototype.readUint8=a.prototype.readUInt8=function(b,F){return b=b>>>0,F||D(b,1,this.length),this[b]},a.prototype.readUint16LE=a.prototype.readUInt16LE=function(b,F){return b=b>>>0,F||D(b,2,this.length),this[b]|this[b+1]<<8},a.prototype.readUint16BE=a.prototype.readUInt16BE=function(b,F){return b=b>>>0,F||D(b,2,this.length),this[b]<<8|this[b+1]},a.prototype.readUint32LE=a.prototype.readUInt32LE=function(b,F){return b=b>>>0,F||D(b,4,this.length),(this[b]|this[b+1]<<8|this[b+2]<<16)+this[b+3]*16777216},a.prototype.readUint32BE=a.prototype.readUInt32BE=function(b,F){return b=b>>>0,F||D(b,4,this.length),this[b]*16777216+(this[b+1]<<16|this[b+2]<<8|this[b+3])},a.prototype.readBigUInt64LE=ue(function(b){b=b>>>0,de(b,"offset");const F=this[b],N=this[b+7];(F===void 0||N===void 0)&&fe(b,this.length-8);const K=F+this[++b]*2**8+this[++b]*2**16+this[++b]*2**24,te=this[++b]+this[++b]*2**8+this[++b]*2**16+N*2**24;return BigInt(K)+(BigInt(te)<<BigInt(32))}),a.prototype.readBigUInt64BE=ue(function(b){b=b>>>0,de(b,"offset");const F=this[b],N=this[b+7];(F===void 0||N===void 0)&&fe(b,this.length-8);const K=F*2**24+this[++b]*2**16+this[++b]*2**8+this[++b],te=this[++b]*2**24+this[++b]*2**16+this[++b]*2**8+N;return(BigInt(K)<<BigInt(32))+BigInt(te)}),a.prototype.readIntLE=function(b,F,N){b=b>>>0,F=F>>>0,N||D(b,F,this.length);let K=this[b],te=1,ne=0;for(;++ne<F&&(te*=256);)K+=this[b+ne]*te;return te*=128,K>=te&&(K-=Math.pow(2,8*F)),K},a.prototype.readIntBE=function(b,F,N){b=b>>>0,F=F>>>0,N||D(b,F,this.length);let K=F,te=1,ne=this[b+--K];for(;K>0&&(te*=256);)ne+=this[b+--K]*te;return te*=128,ne>=te&&(ne-=Math.pow(2,8*F)),ne},a.prototype.readInt8=function(b,F){return b=b>>>0,F||D(b,1,this.length),this[b]&128?(255-this[b]+1)*-1:this[b]},a.prototype.readInt16LE=function(b,F){b=b>>>0,F||D(b,2,this.length);const N=this[b]|this[b+1]<<8;return N&32768?N|4294901760:N},a.prototype.readInt16BE=function(b,F){b=b>>>0,F||D(b,2,this.length);const N=this[b+1]|this[b]<<8;return N&32768?N|4294901760:N},a.prototype.readInt32LE=function(b,F){return b=b>>>0,F||D(b,4,this.length),this[b]|this[b+1]<<8|this[b+2]<<16|this[b+3]<<24},a.prototype.readInt32BE=function(b,F){return b=b>>>0,F||D(b,4,this.length),this[b]<<24|this[b+1]<<16|this[b+2]<<8|this[b+3]},a.prototype.readBigInt64LE=ue(function(b){b=b>>>0,de(b,"offset");const F=this[b],N=this[b+7];(F===void 0||N===void 0)&&fe(b,this.length-8);const K=this[b+4]+this[b+5]*2**8+this[b+6]*2**16+(N<<24);return(BigInt(K)<<BigInt(32))+BigInt(F+this[++b]*2**8+this[++b]*2**16+this[++b]*2**24)}),a.prototype.readBigInt64BE=ue(function(b){b=b>>>0,de(b,"offset");const F=this[b],N=this[b+7];(F===void 0||N===void 0)&&fe(b,this.length-8);const K=(F<<24)+this[++b]*2**16+this[++b]*2**8+this[++b];return(BigInt(K)<<BigInt(32))+BigInt(this[++b]*2**24+this[++b]*2**16+this[++b]*2**8+N)}),a.prototype.readFloatLE=function(b,F){return b=b>>>0,F||D(b,4,this.length),t.read(this,b,!0,23,4)},a.prototype.readFloatBE=function(b,F){return b=b>>>0,F||D(b,4,this.length),t.read(this,b,!1,23,4)},a.prototype.readDoubleLE=function(b,F){return b=b>>>0,F||D(b,8,this.length),t.read(this,b,!0,52,8)},a.prototype.readDoubleBE=function(b,F){return b=b>>>0,F||D(b,8,this.length),t.read(this,b,!1,52,8)};function x(W,b,F,N,K,te){if(!a.isBuffer(W))throw new TypeError('"buffer" argument must be a Buffer instance');if(b>K||b<te)throw new RangeError('"value" argument is out of bounds');if(F+N>W.length)throw new RangeError("Index out of range")}a.prototype.writeUintLE=a.prototype.writeUIntLE=function(b,F,N,K){if(b=+b,F=F>>>0,N=N>>>0,!K){const we=Math.pow(2,8*N)-1;x(this,b,F,N,we,0)}let te=1,ne=0;for(this[F]=b&255;++ne<N&&(te*=256);)this[F+ne]=b/te&255;return F+N},a.prototype.writeUintBE=a.prototype.writeUIntBE=function(b,F,N,K){if(b=+b,F=F>>>0,N=N>>>0,!K){const we=Math.pow(2,8*N)-1;x(this,b,F,N,we,0)}let te=N-1,ne=1;for(this[F+te]=b&255;--te>=0&&(ne*=256);)this[F+te]=b/ne&255;return F+N},a.prototype.writeUint8=a.prototype.writeUInt8=function(b,F,N){return b=+b,F=F>>>0,N||x(this,b,F,1,255,0),this[F]=b&255,F+1},a.prototype.writeUint16LE=a.prototype.writeUInt16LE=function(b,F,N){return b=+b,F=F>>>0,N||x(this,b,F,2,65535,0),this[F]=b&255,this[F+1]=b>>>8,F+2},a.prototype.writeUint16BE=a.prototype.writeUInt16BE=function(b,F,N){return b=+b,F=F>>>0,N||x(this,b,F,2,65535,0),this[F]=b>>>8,this[F+1]=b&255,F+2},a.prototype.writeUint32LE=a.prototype.writeUInt32LE=function(b,F,N){return b=+b,F=F>>>0,N||x(this,b,F,4,4294967295,0),this[F+3]=b>>>24,this[F+2]=b>>>16,this[F+1]=b>>>8,this[F]=b&255,F+4},a.prototype.writeUint32BE=a.prototype.writeUInt32BE=function(b,F,N){return b=+b,F=F>>>0,N||x(this,b,F,4,4294967295,0),this[F]=b>>>24,this[F+1]=b>>>16,this[F+2]=b>>>8,this[F+3]=b&255,F+4};function P(W,b,F,N,K){ae(b,N,K,W,F,7);let te=Number(b&BigInt(4294967295));W[F++]=te,te=te>>8,W[F++]=te,te=te>>8,W[F++]=te,te=te>>8,W[F++]=te;let ne=Number(b>>BigInt(32)&BigInt(4294967295));return W[F++]=ne,ne=ne>>8,W[F++]=ne,ne=ne>>8,W[F++]=ne,ne=ne>>8,W[F++]=ne,F}function oe(W,b,F,N,K){ae(b,N,K,W,F,7);let te=Number(b&BigInt(4294967295));W[F+7]=te,te=te>>8,W[F+6]=te,te=te>>8,W[F+5]=te,te=te>>8,W[F+4]=te;let ne=Number(b>>BigInt(32)&BigInt(4294967295));return W[F+3]=ne,ne=ne>>8,W[F+2]=ne,ne=ne>>8,W[F+1]=ne,ne=ne>>8,W[F]=ne,F+8}a.prototype.writeBigUInt64LE=ue(function(b,F=0){return P(this,b,F,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeBigUInt64BE=ue(function(b,F=0){return oe(this,b,F,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeIntLE=function(b,F,N,K){if(b=+b,F=F>>>0,!K){const ye=Math.pow(2,8*N-1);x(this,b,F,N,ye-1,-ye)}let te=0,ne=1,we=0;for(this[F]=b&255;++te<N&&(ne*=256);)b<0&&we===0&&this[F+te-1]!==0&&(we=1),this[F+te]=(b/ne>>0)-we&255;return F+N},a.prototype.writeIntBE=function(b,F,N,K){if(b=+b,F=F>>>0,!K){const ye=Math.pow(2,8*N-1);x(this,b,F,N,ye-1,-ye)}let te=N-1,ne=1,we=0;for(this[F+te]=b&255;--te>=0&&(ne*=256);)b<0&&we===0&&this[F+te+1]!==0&&(we=1),this[F+te]=(b/ne>>0)-we&255;return F+N},a.prototype.writeInt8=function(b,F,N){return b=+b,F=F>>>0,N||x(this,b,F,1,127,-128),b<0&&(b=255+b+1),this[F]=b&255,F+1},a.prototype.writeInt16LE=function(b,F,N){return b=+b,F=F>>>0,N||x(this,b,F,2,32767,-32768),this[F]=b&255,this[F+1]=b>>>8,F+2},a.prototype.writeInt16BE=function(b,F,N){return b=+b,F=F>>>0,N||x(this,b,F,2,32767,-32768),this[F]=b>>>8,this[F+1]=b&255,F+2},a.prototype.writeInt32LE=function(b,F,N){return b=+b,F=F>>>0,N||x(this,b,F,4,2147483647,-2147483648),this[F]=b&255,this[F+1]=b>>>8,this[F+2]=b>>>16,this[F+3]=b>>>24,F+4},a.prototype.writeInt32BE=function(b,F,N){return b=+b,F=F>>>0,N||x(this,b,F,4,2147483647,-2147483648),b<0&&(b=4294967295+b+1),this[F]=b>>>24,this[F+1]=b>>>16,this[F+2]=b>>>8,this[F+3]=b&255,F+4},a.prototype.writeBigInt64LE=ue(function(b,F=0){return P(this,b,F,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),a.prototype.writeBigInt64BE=ue(function(b,F=0){return oe(this,b,F,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function M(W,b,F,N,K,te){if(F+N>W.length)throw new RangeError("Index out of range");if(F<0)throw new RangeError("Index out of range")}function k(W,b,F,N,K){return b=+b,F=F>>>0,K||M(W,b,F,4),t.write(W,b,F,N,23,4),F+4}a.prototype.writeFloatLE=function(b,F,N){return k(this,b,F,!0,N)},a.prototype.writeFloatBE=function(b,F,N){return k(this,b,F,!1,N)};function q(W,b,F,N,K){return b=+b,F=F>>>0,K||M(W,b,F,8),t.write(W,b,F,N,52,8),F+8}a.prototype.writeDoubleLE=function(b,F,N){return q(this,b,F,!0,N)},a.prototype.writeDoubleBE=function(b,F,N){return q(this,b,F,!1,N)},a.prototype.copy=function(b,F,N,K){if(!a.isBuffer(b))throw new TypeError("argument should be a Buffer");if(N||(N=0),!K&&K!==0&&(K=this.length),F>=b.length&&(F=b.length),F||(F=0),K>0&&K<N&&(K=N),K===N||b.length===0||this.length===0)return 0;if(F<0)throw new RangeError("targetStart out of bounds");if(N<0||N>=this.length)throw new RangeError("Index out of range");if(K<0)throw new RangeError("sourceEnd out of bounds");K>this.length&&(K=this.length),b.length-F<K-N&&(K=b.length-F+N);const te=K-N;return this===b&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(F,N,K):Uint8Array.prototype.set.call(b,this.subarray(N,K),F),te},a.prototype.fill=function(b,F,N,K){if(typeof b=="string"){if(typeof F=="string"?(K=F,F=0,N=this.length):typeof N=="string"&&(K=N,N=this.length),K!==void 0&&typeof K!="string")throw new TypeError("encoding must be a string");if(typeof K=="string"&&!a.isEncoding(K))throw new TypeError("Unknown encoding: "+K);if(b.length===1){const ne=b.charCodeAt(0);(K==="utf8"&&ne<128||K==="latin1")&&(b=ne)}}else typeof b=="number"?b=b&255:typeof b=="boolean"&&(b=Number(b));if(F<0||this.length<F||this.length<N)throw new RangeError("Out of range index");if(N<=F)return this;F=F>>>0,N=N===void 0?this.length:N>>>0,b||(b=0);let te;if(typeof b=="number")for(te=F;te<N;++te)this[te]=b;else{const ne=a.isBuffer(b)?b:a.from(b,K),we=ne.length;if(we===0)throw new TypeError('The value "'+b+'" is invalid for argument "value"');for(te=0;te<N-F;++te)this[te+F]=ne[te%we]}return this};const ee={};function X(W,b,F){ee[W]=class extends F{constructor(){super(),Object.defineProperty(this,"message",{value:b.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${W}]`,this.stack,delete this.name}get code(){return W}set code(K){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:K,writable:!0})}toString(){return`${this.name} [${W}]: ${this.message}`}}}X("ERR_BUFFER_OUT_OF_BOUNDS",function(W){return W?`${W} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),X("ERR_INVALID_ARG_TYPE",function(W,b){return`The "${W}" argument must be of type number. Received type ${typeof b}`},TypeError),X("ERR_OUT_OF_RANGE",function(W,b,F){let N=`The value of "${W}" is out of range.`,K=F;return Number.isInteger(F)&&Math.abs(F)>2**32?K=$(String(F)):typeof F=="bigint"&&(K=String(F),(F>BigInt(2)**BigInt(32)||F<-(BigInt(2)**BigInt(32)))&&(K=$(K)),K+="n"),N+=` It must be ${b}. Received ${K}`,N},RangeError);function $(W){let b="",F=W.length;const N=W[0]==="-"?1:0;for(;F>=N+4;F-=3)b=`_${W.slice(F-3,F)}${b}`;return`${W.slice(0,F)}${b}`}function se(W,b,F){de(b,"offset"),(W[b]===void 0||W[b+F]===void 0)&&fe(b,W.length-(F+1))}function ae(W,b,F,N,K,te){if(W>F||W<b){const ne=typeof b=="bigint"?"n":"";let we;throw te>3?b===0||b===BigInt(0)?we=`>= 0${ne} and < 2${ne} ** ${(te+1)*8}${ne}`:we=`>= -(2${ne} ** ${(te+1)*8-1}${ne}) and < 2 ** ${(te+1)*8-1}${ne}`:we=`>= ${b}${ne} and <= ${F}${ne}`,new ee.ERR_OUT_OF_RANGE("value",we,W)}se(N,K,te)}function de(W,b){if(typeof W!="number")throw new ee.ERR_INVALID_ARG_TYPE(b,"number",W)}function fe(W,b,F){throw Math.floor(W)!==W?(de(W,F),new ee.ERR_OUT_OF_RANGE(F||"offset","an integer",W)):b<0?new ee.ERR_BUFFER_OUT_OF_BOUNDS:new ee.ERR_OUT_OF_RANGE(F||"offset",`>= ${F?1:0} and <= ${b}`,W)}const ge=/[^+/0-9A-Za-z-_]/g;function Qe(W){if(W=W.split("=")[0],W=W.trim().replace(ge,""),W.length<2)return"";for(;W.length%4!==0;)W=W+"=";return W}function Ue(W,b){b=b||1/0;let F;const N=W.length;let K=null;const te=[];for(let ne=0;ne<N;++ne){if(F=W.charCodeAt(ne),F>55295&&F<57344){if(!K){if(F>56319){(b-=3)>-1&&te.push(239,191,189);continue}else if(ne+1===N){(b-=3)>-1&&te.push(239,191,189);continue}K=F;continue}if(F<56320){(b-=3)>-1&&te.push(239,191,189),K=F;continue}F=(K-55296<<10|F-56320)+65536}else K&&(b-=3)>-1&&te.push(239,191,189);if(K=null,F<128){if((b-=1)<0)break;te.push(F)}else if(F<2048){if((b-=2)<0)break;te.push(F>>6|192,F&63|128)}else if(F<65536){if((b-=3)<0)break;te.push(F>>12|224,F>>6&63|128,F&63|128)}else if(F<1114112){if((b-=4)<0)break;te.push(F>>18|240,F>>12&63|128,F>>6&63|128,F&63|128)}else throw new Error("Invalid code point")}return te}function xe(W){const b=[];for(let F=0;F<W.length;++F)b.push(W.charCodeAt(F)&255);return b}function Fe(W,b){let F,N,K;const te=[];for(let ne=0;ne<W.length&&!((b-=2)<0);++ne)F=W.charCodeAt(ne),N=F>>8,K=F%256,te.push(K),te.push(N);return te}function Ne(W){return e.toByteArray(Qe(W))}function Ze(W,b,F,N){let K;for(K=0;K<N&&!(K+F>=b.length||K>=W.length);++K)b[K+F]=W[K];return K}function j(W,b){return W instanceof b||W!=null&&W.constructor!=null&&W.constructor.name!=null&&W.constructor.name===b.name}function O(W){return W!==W}const le=function(){const W="0123456789abcdef",b=new Array(256);for(let F=0;F<16;++F){const N=F*16;for(let K=0;K<16;++K)b[N+K]=W[F]+W[K]}return b}();function ue(W){return typeof BigInt>"u"?Ce:W}function Ce(){throw new Error("BigInt not supported")}})($K);/*!
 * html2canvas 1.4.1 <https://html2canvas.hertzen.com>
 * Copyright (c) 2022 Niklas von Hertzen <https://hertzen.com>
 * Released under MIT License
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var eI=function(r,e){return eI=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},eI(r,e)};function $s(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");eI(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}function Hi(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(c){try{l(n.next(c))}catch(u){o(u)}}function A(c){try{l(n.throw(c))}catch(u){o(u)}}function l(c){c.done?s(c.value):i(c.value).then(a,A)}l((n=n.apply(r,e||[])).next())})}function mi(r,e){var t={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,i,s,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(l){return function(c){return A([l,c])}}function A(l){if(n)throw new TypeError("Generator is already executing.");for(;t;)try{if(n=1,i&&(s=l[0]&2?i.return:l[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,l[1])).done)return s;switch(i=0,s&&(l=[l[0]&2,s.value]),l[0]){case 0:case 1:s=l;break;case 4:return t.label++,{value:l[1],done:!1};case 5:t.label++,i=l[1],l=[0];continue;case 7:l=t.ops.pop(),t.trys.pop();continue;default:if(s=t.trys,!(s=s.length>0&&s[s.length-1])&&(l[0]===6||l[0]===2)){t=0;continue}if(l[0]===3&&(!s||l[1]>s[0]&&l[1]<s[3])){t.label=l[1];break}if(l[0]===6&&t.label<s[1]){t.label=s[1],s=l;break}if(s&&t.label<s[2]){t.label=s[2],t.ops.push(l);break}s[2]&&t.ops.pop(),t.trys.pop();continue}l=e.call(r,t)}catch(c){l=[6,c],i=0}finally{n=s=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}var sc=function(){function r(e,t,n,i){this.left=e,this.top=t,this.width=n,this.height=i}return r.prototype.add=function(e,t,n,i){return new r(this.left+e,this.top+t,this.width+n,this.height+i)},r.fromClientRect=function(e,t){return new r(t.left+e.windowBounds.left,t.top+e.windowBounds.top,t.width,t.height)},r.fromDOMRectList=function(e,t){var n=Array.from(t).find(function(i){return i.width!==0});return n?new r(n.left+e.windowBounds.left,n.top+e.windowBounds.top,n.width,n.height):r.EMPTY},r.EMPTY=new r(0,0,0,0),r}(),Mx=function(r,e){return sc.fromClientRect(r,e.getBoundingClientRect())},hv=function(r){for(var e=[],t=0,n=r.length;t<n;){var i=r.charCodeAt(t++);if(i>=55296&&i<=56319&&t<n){var s=r.charCodeAt(t++);(s&64512)===56320?e.push(((i&1023)<<10)+(s&1023)+65536):(e.push(i),t--)}else e.push(i)}return e},Fn=function(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];if(String.fromCodePoint)return String.fromCodePoint.apply(String,r);var t=r.length;if(!t)return"";for(var n=[],i=-1,s="";++i<t;){var o=r[i];o<=65535?n.push(o):(o-=65536,n.push((o>>10)+55296,o%1024+56320)),(i+1===t||n.length>16384)&&(s+=String.fromCharCode.apply(String,n),n.length=0)}return s},rS="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",A9=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Tg=0;Tg<rS.length;Tg++)A9[rS.charCodeAt(Tg)]=Tg;var iS="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Hd=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Ng=0;Ng<iS.length;Ng++)Hd[iS.charCodeAt(Ng)]=Ng;var l9=function(r){var e=r.length*.75,t=r.length,n,i=0,s,o,a,A;r[r.length-1]==="="&&(e--,r[r.length-2]==="="&&e--);var l=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(e):new Array(e),c=Array.isArray(l)?l:new Uint8Array(l);for(n=0;n<t;n+=4)s=Hd[r.charCodeAt(n)],o=Hd[r.charCodeAt(n+1)],a=Hd[r.charCodeAt(n+2)],A=Hd[r.charCodeAt(n+3)],c[i++]=s<<2|o>>4,c[i++]=(o&15)<<4|a>>2,c[i++]=(a&3)<<6|A&63;return l},c9=function(r){for(var e=r.length,t=[],n=0;n<e;n+=2)t.push(r[n+1]<<8|r[n]);return t},u9=function(r){for(var e=r.length,t=[],n=0;n<e;n+=4)t.push(r[n+3]<<24|r[n+2]<<16|r[n+1]<<8|r[n]);return t},Gl=5,Tx=6+5,fC=2,f9=Tx-Gl,MV=65536>>Gl,d9=1<<Gl,dC=d9-1,h9=1024>>Gl,p9=MV+h9,g9=p9,m9=32,B9=g9+m9,v9=65536>>Tx,y9=1<<f9,C9=y9-1,sS=function(r,e,t){return r.slice?r.slice(e,t):new Uint16Array(Array.prototype.slice.call(r,e,t))},w9=function(r,e,t){return r.slice?r.slice(e,t):new Uint32Array(Array.prototype.slice.call(r,e,t))},F9=function(r,e){var t=l9(r),n=Array.isArray(t)?u9(t):new Uint32Array(t),i=Array.isArray(t)?c9(t):new Uint16Array(t),s=24,o=sS(i,s/2,n[4]/2),a=n[5]===2?sS(i,(s+n[4])/2):w9(n,Math.ceil((s+n[4])/4));return new I9(n[0],n[1],n[2],n[3],o,a)},I9=function(){function r(e,t,n,i,s,o){this.initialValue=e,this.errorValue=t,this.highStart=n,this.highValueIndex=i,this.index=s,this.data=o}return r.prototype.get=function(e){var t;if(e>=0){if(e<55296||e>56319&&e<=65535)return t=this.index[e>>Gl],t=(t<<fC)+(e&dC),this.data[t];if(e<=65535)return t=this.index[MV+(e-55296>>Gl)],t=(t<<fC)+(e&dC),this.data[t];if(e<this.highStart)return t=B9-v9+(e>>Tx),t=this.index[t],t+=e>>Gl&C9,t=this.index[t],t=(t<<fC)+(e&dC),this.data[t];if(e<=1114111)return this.data[this.highValueIndex]}return this.errorValue},r}(),oS="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",U9=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Vg=0;Vg<oS.length;Vg++)U9[oS.charCodeAt(Vg)]=Vg;var x9="KwAAAAAAAAAACA4AUD0AADAgAAACAAAAAAAIABAAGABAAEgAUABYAGAAaABgAGgAYgBqAF8AZwBgAGgAcQB5AHUAfQCFAI0AlQCdAKIAqgCyALoAYABoAGAAaABgAGgAwgDKAGAAaADGAM4A0wDbAOEA6QDxAPkAAQEJAQ8BFwF1AH0AHAEkASwBNAE6AUIBQQFJAVEBWQFhAWgBcAF4ATAAgAGGAY4BlQGXAZ8BpwGvAbUBvQHFAc0B0wHbAeMB6wHxAfkBAQIJAvEBEQIZAiECKQIxAjgCQAJGAk4CVgJeAmQCbAJ0AnwCgQKJApECmQKgAqgCsAK4ArwCxAIwAMwC0wLbAjAA4wLrAvMC+AIAAwcDDwMwABcDHQMlAy0DNQN1AD0DQQNJA0kDSQNRA1EDVwNZA1kDdQB1AGEDdQBpA20DdQN1AHsDdQCBA4kDkQN1AHUAmQOhA3UAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AKYDrgN1AHUAtgO+A8YDzgPWAxcD3gPjA+sD8wN1AHUA+wMDBAkEdQANBBUEHQQlBCoEFwMyBDgEYABABBcDSARQBFgEYARoBDAAcAQzAXgEgASIBJAEdQCXBHUAnwSnBK4EtgS6BMIEyAR1AHUAdQB1AHUAdQCVANAEYABgAGAAYABgAGAAYABgANgEYADcBOQEYADsBPQE/AQEBQwFFAUcBSQFLAU0BWQEPAVEBUsFUwVbBWAAYgVgAGoFcgV6BYIFigWRBWAAmQWfBaYFYABgAGAAYABgAKoFYACxBbAFuQW6BcEFwQXHBcEFwQXPBdMF2wXjBeoF8gX6BQIGCgYSBhoGIgYqBjIGOgZgAD4GRgZMBmAAUwZaBmAAYABgAGAAYABgAGAAYABgAGAAYABgAGIGYABpBnAGYABgAGAAYABgAGAAYABgAGAAYAB4Bn8GhQZgAGAAYAB1AHcDFQSLBmAAYABgAJMGdQA9A3UAmwajBqsGqwaVALMGuwbDBjAAywbSBtIG1QbSBtIG0gbSBtIG0gbdBuMG6wbzBvsGAwcLBxMHAwcbByMHJwcsBywHMQcsB9IGOAdAB0gHTgfSBkgHVgfSBtIG0gbSBtIG0gbSBtIG0gbSBiwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdgAGAALAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdbB2MHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB2kH0gZwB64EdQB1AHUAdQB1AHUAdQB1AHUHfQdgAIUHjQd1AHUAlQedB2AAYAClB6sHYACzB7YHvgfGB3UAzgfWBzMB3gfmB1EB7gf1B/0HlQENAQUIDQh1ABUIHQglCBcDLQg1CD0IRQhNCEEDUwh1AHUAdQBbCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIcAh3CHoIMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIgggwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAALAcsBywHLAcsBywHLAcsBywHLAcsB4oILAcsB44I0gaWCJ4Ipgh1AHUAqgiyCHUAdQB1AHUAdQB1AHUAdQB1AHUAtwh8AXUAvwh1AMUIyQjRCNkI4AjoCHUAdQB1AO4I9gj+CAYJDgkTCS0HGwkjCYIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiAAIAAAAFAAYABgAGIAXwBgAHEAdQBFAJUAogCyAKAAYABgAEIA4ABGANMA4QDxAMEBDwE1AFwBLAE6AQEBUQF4QkhCmEKoQrhCgAHIQsAB0MLAAcABwAHAAeDC6ABoAHDCwMMAAcABwAHAAdDDGMMAAcAB6MM4wwjDWMNow3jDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEjDqABWw6bDqABpg6gAaABoAHcDvwOPA+gAaABfA/8DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DpcPAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcAB9cPKwkyCToJMAB1AHUAdQBCCUoJTQl1AFUJXAljCWcJawkwADAAMAAwAHMJdQB2CX4JdQCECYoJjgmWCXUAngkwAGAAYABxAHUApgn3A64JtAl1ALkJdQDACTAAMAAwADAAdQB1AHUAdQB1AHUAdQB1AHUAowYNBMUIMAAwADAAMADICcsJ0wnZCRUE4QkwAOkJ8An4CTAAMAB1AAAKvwh1AAgKDwoXCh8KdQAwACcKLgp1ADYKqAmICT4KRgowADAAdQB1AE4KMAB1AFYKdQBeCnUAZQowADAAMAAwADAAMAAwADAAMAAVBHUAbQowADAAdQC5CXUKMAAwAHwBxAijBogEMgF9CoQKiASMCpQKmgqIBKIKqgquCogEDQG2Cr4KxgrLCjAAMADTCtsKCgHjCusK8Qr5CgELMAAwADAAMAB1AIsECQsRC3UANAEZCzAAMAAwADAAMAB1ACELKQswAHUANAExCzkLdQBBC0kLMABRC1kLMAAwADAAMAAwADAAdQBhCzAAMAAwAGAAYABpC3ELdwt/CzAAMACHC4sLkwubC58Lpwt1AK4Ltgt1APsDMAAwADAAMAAwADAAMAAwAL4LwwvLC9IL1wvdCzAAMADlC+kL8Qv5C/8LSQswADAAMAAwADAAMAAwADAAMAAHDDAAMAAwADAAMAAODBYMHgx1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1ACYMMAAwADAAdQB1AHUALgx1AHUAdQB1AHUAdQA2DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AD4MdQBGDHUAdQB1AHUAdQB1AEkMdQB1AHUAdQB1AFAMMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQBYDHUAdQB1AF8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUA+wMVBGcMMAAwAHwBbwx1AHcMfwyHDI8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAYABgAJcMMAAwADAAdQB1AJ8MlQClDDAAMACtDCwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB7UMLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AA0EMAC9DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAsBywHLAcsBywHLAcsBywHLQcwAMEMyAwsBywHLAcsBywHLAcsBywHLAcsBywHzAwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1ANQM2QzhDDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMABgAGAAYABgAGAAYABgAOkMYADxDGAA+AwADQYNYABhCWAAYAAODTAAMAAwADAAFg1gAGAAHg37AzAAMAAwADAAYABgACYNYAAsDTQNPA1gAEMNPg1LDWAAYABgAGAAYABgAGAAYABgAGAAUg1aDYsGVglhDV0NcQBnDW0NdQ15DWAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAlQCBDZUAiA2PDZcNMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAnw2nDTAAMAAwADAAMAAwAHUArw23DTAAMAAwADAAMAAwADAAMAAwADAAMAB1AL8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQDHDTAAYABgAM8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA1w11ANwNMAAwAD0B5A0wADAAMAAwADAAMADsDfQN/A0EDgwOFA4wABsOMAAwADAAMAAwADAAMAAwANIG0gbSBtIG0gbSBtIG0gYjDigOwQUuDsEFMw7SBjoO0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGQg5KDlIOVg7SBtIGXg5lDm0OdQ7SBtIGfQ6EDooOjQ6UDtIGmg6hDtIG0gaoDqwO0ga0DrwO0gZgAGAAYADEDmAAYAAkBtIGzA5gANIOYADaDokO0gbSBt8O5w7SBu8O0gb1DvwO0gZgAGAAxA7SBtIG0gbSBtIGYABgAGAAYAAED2AAsAUMD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHJA8sBywHLAcsBywHLAccDywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywPLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAc0D9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHPA/SBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gYUD0QPlQCVAJUAMAAwADAAMACVAJUAlQCVAJUAlQCVAEwPMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA//8EAAQABAAEAAQABAAEAAQABAANAAMAAQABAAIABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQACgATABcAHgAbABoAHgAXABYAEgAeABsAGAAPABgAHABLAEsASwBLAEsASwBLAEsASwBLABgAGAAeAB4AHgATAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYAGwASAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWAA0AEQAeAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAFAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJABYAGgAbABsAGwAeAB0AHQAeAE8AFwAeAA0AHgAeABoAGwBPAE8ADgBQAB0AHQAdAE8ATwAXAE8ATwBPABYAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAFAATwBAAE8ATwBPAEAATwBQAFAATwBQAB4AHgAeAB4AHgAeAB0AHQAdAB0AHgAdAB4ADgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgBQAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkACQAJAAkACQAJAAkABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAFAAHgAeAB4AKwArAFAAUABQAFAAGABQACsAKwArACsAHgAeAFAAHgBQAFAAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUAAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAYAA0AKwArAB4AHgAbACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAB4ABAAEAB4ABAAEABMABAArACsAKwArACsAKwArACsAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAKwArACsAKwBWAFYAVgBWAB4AHgArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AGgAaABoAGAAYAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQAEwAEACsAEwATAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABLAEsASwBLAEsASwBLAEsASwBLABoAGQAZAB4AUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABMAUAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABABQAFAABAAEAB4ABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUAAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAFAABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQAUABQAB4AHgAYABMAUAArACsABAAbABsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAFAABAAEAAQABAAEAFAABAAEAAQAUAAEAAQABAAEAAQAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArACsAHgArAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAUAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEAA0ADQBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUAArACsAKwBQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABABQACsAKwArACsAKwArACsAKwAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUAAaABoAUABQAFAAUABQAEwAHgAbAFAAHgAEACsAKwAEAAQABAArAFAAUABQAFAAUABQACsAKwArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQACsAUABQACsAKwAEACsABAAEAAQABAAEACsAKwArACsABAAEACsAKwAEAAQABAArACsAKwAEACsAKwArACsAKwArACsAUABQAFAAUAArAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLAAQABABQAFAAUAAEAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAArACsAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AGwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAKwArACsAKwArAAQABAAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAAQAUAArAFAAUABQAFAAUABQACsAKwArAFAAUABQACsAUABQAFAAUAArACsAKwBQAFAAKwBQACsAUABQACsAKwArAFAAUAArACsAKwBQAFAAUAArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAAQABAAEAAQABAArACsAKwAEAAQABAArAAQABAAEAAQAKwArAFAAKwArACsAKwArACsABAArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAHgAeAB4AHgAeAB4AGwAeACsAKwArACsAKwAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAUABQAFAAKwArACsAKwArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwAOAFAAUABQAFAAUABQAFAAHgBQAAQABAAEAA4AUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAKwArAAQAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAKwArACsAKwArACsAUAArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABABQAB4AKwArACsAKwBQAFAAUAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQABoAUABQAFAAUABQAFAAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQACsAUAArACsAUABQAFAAUABQAFAAUAArACsAKwAEACsAKwArACsABAAEAAQABAAEAAQAKwAEACsABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgAqACsAKwArACsAGwBcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAeAEsASwBLAEsASwBLAEsASwBLAEsADQANACsAKwArACsAKwBcAFwAKwBcACsAXABcAFwAXABcACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAXAArAFwAXABcAFwAXABcAFwAXABcAFwAKgBcAFwAKgAqACoAKgAqACoAKgAqACoAXAArACsAXABcAFwAXABcACsAXAArACoAKgAqACoAKgAqACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwBcAFwAXABcAFAADgAOAA4ADgAeAA4ADgAJAA4ADgANAAkAEwATABMAEwATAAkAHgATAB4AHgAeAAQABAAeAB4AHgAeAB4AHgBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQAFAADQAEAB4ABAAeAAQAFgARABYAEQAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAAQABAAEAAQADQAEAAQAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAA0ADQAeAB4AHgAeAB4AHgAEAB4AHgAeAB4AHgAeACsAHgAeAA4ADgANAA4AHgAeAB4AHgAeAAkACQArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgBcAEsASwBLAEsASwBLAEsASwBLAEsADQANAB4AHgAeAB4AXABcAFwAXABcAFwAKgAqACoAKgBcAFwAXABcACoAKgAqAFwAKgAqACoAXABcACoAKgAqACoAKgAqACoAXABcAFwAKgAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqAFwAKgBLAEsASwBLAEsASwBLAEsASwBLACoAKgAqACoAKgAqAFAAUABQAFAAUABQACsAUAArACsAKwArACsAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAKwBQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsABAAEAAQAHgANAB4AHgAeAB4AHgAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUAArACsADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWABEAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQANAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAANAA0AKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUAArAAQABAArACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqAA0ADQAVAFwADQAeAA0AGwBcACoAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwAeAB4AEwATAA0ADQAOAB4AEwATAB4ABAAEAAQACQArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAHgArACsAKwATABMASwBLAEsASwBLAEsASwBLAEsASwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAXABcAFwAXABcACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAXAArACsAKwAqACoAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsAHgAeAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKwAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKwArAAQASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACoAKgAqACoAKgAqACoAXAAqACoAKgAqACoAKgArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABABQAFAAUABQAFAAUABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwANAA0AHgANAA0ADQANAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwAeAB4AHgAeAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArAA0ADQANAA0ADQBLAEsASwBLAEsASwBLAEsASwBLACsAKwArAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUAAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAAQAUABQAFAAUABQAFAABABQAFAABAAEAAQAUAArACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQACsAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQACsAKwAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQACsAHgAeAB4AHgAeAB4AHgAOAB4AKwANAA0ADQANAA0ADQANAAkADQANAA0ACAAEAAsABAAEAA0ACQANAA0ADAAdAB0AHgAXABcAFgAXABcAFwAWABcAHQAdAB4AHgAUABQAFAANAAEAAQAEAAQABAAEAAQACQAaABoAGgAaABoAGgAaABoAHgAXABcAHQAVABUAHgAeAB4AHgAeAB4AGAAWABEAFQAVABUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ADQAeAA0ADQANAA0AHgANAA0ADQAHAB4AHgAeAB4AKwAEAAQABAAEAAQABAAEAAQABAAEAFAAUAArACsATwBQAFAAUABQAFAAHgAeAB4AFgARAE8AUABPAE8ATwBPAFAAUABQAFAAUAAeAB4AHgAWABEAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArABsAGwAbABsAGwAbABsAGgAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGgAbABsAGwAbABoAGwAbABoAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAHgAeAFAAGgAeAB0AHgBQAB4AGgAeAB4AHgAeAB4AHgAeAB4AHgBPAB4AUAAbAB4AHgBQAFAAUABQAFAAHgAeAB4AHQAdAB4AUAAeAFAAHgBQAB4AUABPAFAAUAAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgBQAFAAUABQAE8ATwBQAFAAUABQAFAATwBQAFAATwBQAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAUABQAFAATwBPAE8ATwBPAE8ATwBPAE8ATwBQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABPAB4AHgArACsAKwArAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHQAdAB4AHgAeAB0AHQAeAB4AHQAeAB4AHgAdAB4AHQAbABsAHgAdAB4AHgAeAB4AHQAeAB4AHQAdAB0AHQAeAB4AHQAeAB0AHgAdAB0AHQAdAB0AHQAeAB0AHgAeAB4AHgAeAB0AHQAdAB0AHgAeAB4AHgAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB0AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAdAB0AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAWABEAHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AHQAdAB0AHgAeAB0AHgAeAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlAB4AHQAdAB4AHgAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AJQAlAB0AHQAlAB4AJQAlACUAIAAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAdAB0AHQAeAB0AJQAdAB0AHgAdAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAdAB0AHQAdACUAHgAlACUAJQAdACUAJQAdAB0AHQAlACUAHQAdACUAHQAdACUAJQAlAB4AHQAeAB4AHgAeAB0AHQAlAB0AHQAdAB0AHQAdACUAJQAlACUAJQAdACUAJQAgACUAHQAdACUAJQAlACUAJQAlACUAJQAeAB4AHgAlACUAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AFwAXABcAFwAXABcAHgATABMAJQAeAB4AHgAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARABYAEQAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAeAB4AKwArACsAKwArABMADQANAA0AUAATAA0AUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUAANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAA0ADQANAA0ADQANAA0ADQAeAA0AFgANAB4AHgAXABcAHgAeABcAFwAWABEAFgARABYAEQAWABEADQANAA0ADQATAFAADQANAB4ADQANAB4AHgAeAB4AHgAMAAwADQANAA0AHgANAA0AFgANAA0ADQANAA0ADQANAA0AHgANAB4ADQANAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArAA0AEQARACUAJQBHAFcAVwAWABEAFgARABYAEQAWABEAFgARACUAJQAWABEAFgARABYAEQAWABEAFQAWABEAEQAlAFcAVwBXAFcAVwBXAFcAVwBXAAQABAAEAAQABAAEACUAVwBXAFcAVwA2ACUAJQBXAFcAVwBHAEcAJQAlACUAKwBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBRAFcAUQBXAFEAVwBXAFcAVwBXAFcAUQBXAFcAVwBXAFcAVwBRAFEAKwArAAQABAAVABUARwBHAFcAFQBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBRAFcAVwBXAFcAVwBXAFEAUQBXAFcAVwBXABUAUQBHAEcAVwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwAlACUAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACsAKwArACsAKwArACsAKwArACsAKwArAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBPAE8ATwBPAE8ATwBPAE8AJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADQATAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQAHgBQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAeAA0ADQANAA0ADQArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAAQAUABQAFAABABQAFAAUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAeAB4AHgAeAAQAKwArACsAUABQAFAAUABQAFAAHgAeABoAHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADgAOABMAEwArACsAKwArACsAKwArACsABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUAAeAB4AHgBQAA4AUABQAAQAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAB4AWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYACsAKwArAAQAHgAeAB4AHgAeAB4ADQANAA0AHgAeAB4AHgArAFAASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArAB4AHgBcAFwAXABcAFwAKgBcAFwAXABcAFwAXABcAFwAXABcAEsASwBLAEsASwBLAEsASwBLAEsAXABcAFwAXABcACsAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAFAAUABQAAQAUABQAFAAUABQAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAHgANAA0ADQBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAKgAqACoAXABcACoAKgBcAFwAXABcAFwAKgAqAFwAKgBcACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAA0ADQBQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQADQAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAVABVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBUAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVACsAKwArACsAKwArACsAKwArACsAKwArAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAKwArACsAKwBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAKwArACsAKwAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArACsAKwArAFYABABWAFYAVgBWAFYAVgBWAFYAVgBWAB4AVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgArAFYAVgBWAFYAVgArAFYAKwBWAFYAKwBWAFYAKwBWAFYAVgBWAFYAVgBWAFYAVgBWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAEQAWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAaAB4AKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAGAARABEAGAAYABMAEwAWABEAFAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACUAJQAlACUAJQAWABEAFgARABYAEQAWABEAFgARABYAEQAlACUAFgARACUAJQAlACUAJQAlACUAEQAlABEAKwAVABUAEwATACUAFgARABYAEQAWABEAJQAlACUAJQAlACUAJQAlACsAJQAbABoAJQArACsAKwArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAcAKwATACUAJQAbABoAJQAlABYAEQAlACUAEQAlABEAJQBXAFcAVwBXAFcAVwBXAFcAVwBXABUAFQAlACUAJQATACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXABYAJQARACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAWACUAEQAlABYAEQARABYAEQARABUAVwBRAFEAUQBRAFEAUQBRAFEAUQBRAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcARwArACsAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXACsAKwBXAFcAVwBXAFcAVwArACsAVwBXAFcAKwArACsAGgAbACUAJQAlABsAGwArAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAAQAB0AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsADQANAA0AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAA0AUABQAFAAUAArACsAKwArAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwBQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAUABQAFAAUABQAAQABAAEACsABAAEACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAKwBQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAA0ADQANAA0ADQANAA0ADQAeACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAArACsAKwArAFAAUABQAFAAUAANAA0ADQANAA0ADQAUACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsADQANAA0ADQANAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArAAQABAANACsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAB4AHgAeAB4AHgArACsAKwArACsAKwAEAAQABAAEAAQABAAEAA0ADQAeAB4AHgAeAB4AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsASwBLAEsASwBLAEsASwBLAEsASwANAA0ADQANAFAABAAEAFAAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAeAA4AUAArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAADQANAB4ADQAEAAQABAAEAB4ABAAEAEsASwBLAEsASwBLAEsASwBLAEsAUAAOAFAADQANAA0AKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAA0AHgANAA0AHgAEACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAA0AKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsABAAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAUAArACsAKwArACsAKwAEACsAKwArACsAKwBQAFAAUABQAFAABAAEACsAKwAEAAQABAAEAAQABAAEACsAKwArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABABQAFAAUABQAA0ADQANAA0AHgBLAEsASwBLAEsASwBLAEsASwBLAA0ADQArAB4ABABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUAAeAFAAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABAAEAAQADgANAA0AEwATAB4AHgAeAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAFAAUABQAFAABAAEACsAKwAEAA0ADQAeAFAAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKwArACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBcAFwADQANAA0AKgBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQAKwAEAAQAKwArAAQABAAEAAQAUAAEAFAABAAEAA0ADQANACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABABQAA4AUAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAOAB4ADQANAA0ADQAOAB4ABAArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAA0ADQANAFAADgAOAA4ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAFAADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAOABMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAArACsAKwAEACsABAAEACsABAAEAAQABAAEAAQABABQAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAaABoAGgAaAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABIAEgAQwBDAEMAUABQAFAAUABDAFAAUABQAEgAQwBIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABDAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAJAAkACQAJAAkACQAJABYAEQArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwANAA0AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAANACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQANAB4AHgAeAB4AHgAeAFAAUABQAFAADQAeACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAA0AHgAeACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAARwBHABUARwAJACsAKwArACsAKwArACsAKwArACsAKwAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUQBRAFEAKwArACsAKwArACsAKwArACsAKwArACsAKwBRAFEAUQBRACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAHgAEAAQADQAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQABAAEAAQABAAeAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQAHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAKwArAFAAKwArAFAAUAArACsAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUAArAFAAUABQAFAAUABQAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAHgAeAFAAUABQAFAAUAArAFAAKwArACsAUABQAFAAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeACsAKwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4ABAAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAHgAeAA0ADQANAA0AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArAAQABAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwBQAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArABsAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAB4AHgAeAB4ABAAEAAQABAAEAAQABABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArABYAFgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAGgBQAFAAUAAaAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUAArACsAKwArACsAKwBQACsAKwArACsAUAArAFAAKwBQACsAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUAArAFAAKwBQACsAUAArAFAAUAArAFAAKwArAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAKwBQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AJQAlACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeACUAJQAlAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAlACUAJQAlACUAHgAlACUAJQAlACUAIAAgACAAJQAlACAAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACEAIQAhACEAIQAlACUAIAAgACUAJQAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAIAAlACUAJQAlACAAIAAgACUAIAAgACAAJQAlACUAJQAlACUAJQAgACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAlAB4AJQAeACUAJQAlACUAJQAgACUAJQAlACUAHgAlAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACAAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABcAFwAXABUAFQAVAB4AHgAeAB4AJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAgACUAJQAgACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAIAAgACUAJQAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACAAIAAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACAAIAAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAA==",aS=50,Q9=1,TV=2,NV=3,b9=4,E9=5,AS=7,VV=8,lS=9,wA=10,tI=11,cS=12,nI=13,S9=14,zd=15,rI=16,Dg=17,gd=18,_9=19,uS=20,iI=21,md=22,hC=23,kc=24,Bi=25,Xd=26,Yd=27,Lc=28,R9=29,El=30,M9=31,kg=32,Lg=33,sI=34,oI=35,aI=36,ep=37,AI=38,Om=39,Hm=40,pC=41,DV=42,T9=43,N9=[9001,65288],kV="!",yt="",Wg="",lI=F9(x9),na=[El,aI],cI=[Q9,TV,NV,E9],LV=[wA,VV],fS=[Yd,Xd],V9=cI.concat(LV),dS=[AI,Om,Hm,sI,oI],D9=[zd,nI],k9=function(r,e){e===void 0&&(e="strict");var t=[],n=[],i=[];return r.forEach(function(s,o){var a=lI.get(s);if(a>aS?(i.push(!0),a-=aS):i.push(!1),["normal","auto","loose"].indexOf(e)!==-1&&[8208,8211,12316,12448].indexOf(s)!==-1)return n.push(o),t.push(rI);if(a===b9||a===tI){if(o===0)return n.push(o),t.push(El);var A=t[o-1];return V9.indexOf(A)===-1?(n.push(n[o-1]),t.push(A)):(n.push(o),t.push(El))}if(n.push(o),a===M9)return t.push(e==="strict"?iI:ep);if(a===DV||a===R9)return t.push(El);if(a===T9)return s>=131072&&s<=196605||s>=196608&&s<=262141?t.push(ep):t.push(El);t.push(a)}),[n,t,i]},gC=function(r,e,t,n){var i=n[t];if(Array.isArray(r)?r.indexOf(i)!==-1:r===i)for(var s=t;s<=n.length;){s++;var o=n[s];if(o===e)return!0;if(o!==wA)break}if(i===wA)for(var s=t;s>0;){s--;var a=n[s];if(Array.isArray(r)?r.indexOf(a)!==-1:r===a)for(var A=t;A<=n.length;){A++;var o=n[A];if(o===e)return!0;if(o!==wA)break}if(a!==wA)break}return!1},hS=function(r,e){for(var t=r;t>=0;){var n=e[t];if(n===wA)t--;else return n}return 0},L9=function(r,e,t,n,i){if(t[n]===0)return yt;var s=n-1;if(Array.isArray(i)&&i[s]===!0)return yt;var o=s-1,a=s+1,A=e[s],l=o>=0?e[o]:0,c=e[a];if(A===TV&&c===NV)return yt;if(cI.indexOf(A)!==-1)return kV;if(cI.indexOf(c)!==-1||LV.indexOf(c)!==-1)return yt;if(hS(s,e)===VV)return Wg;if(lI.get(r[s])===tI||(A===kg||A===Lg)&&lI.get(r[a])===tI||A===AS||c===AS||A===lS||[wA,nI,zd].indexOf(A)===-1&&c===lS||[Dg,gd,_9,kc,Lc].indexOf(c)!==-1||hS(s,e)===md||gC(hC,md,s,e)||gC([Dg,gd],iI,s,e)||gC(cS,cS,s,e))return yt;if(A===wA)return Wg;if(A===hC||c===hC)return yt;if(c===rI||A===rI)return Wg;if([nI,zd,iI].indexOf(c)!==-1||A===S9||l===aI&&D9.indexOf(A)!==-1||A===Lc&&c===aI||c===uS||na.indexOf(c)!==-1&&A===Bi||na.indexOf(A)!==-1&&c===Bi||A===Yd&&[ep,kg,Lg].indexOf(c)!==-1||[ep,kg,Lg].indexOf(A)!==-1&&c===Xd||na.indexOf(A)!==-1&&fS.indexOf(c)!==-1||fS.indexOf(A)!==-1&&na.indexOf(c)!==-1||[Yd,Xd].indexOf(A)!==-1&&(c===Bi||[md,zd].indexOf(c)!==-1&&e[a+1]===Bi)||[md,zd].indexOf(A)!==-1&&c===Bi||A===Bi&&[Bi,Lc,kc].indexOf(c)!==-1)return yt;if([Bi,Lc,kc,Dg,gd].indexOf(c)!==-1)for(var u=s;u>=0;){var f=e[u];if(f===Bi)return yt;if([Lc,kc].indexOf(f)!==-1)u--;else break}if([Yd,Xd].indexOf(c)!==-1)for(var u=[Dg,gd].indexOf(A)!==-1?o:s;u>=0;){var f=e[u];if(f===Bi)return yt;if([Lc,kc].indexOf(f)!==-1)u--;else break}if(AI===A&&[AI,Om,sI,oI].indexOf(c)!==-1||[Om,sI].indexOf(A)!==-1&&[Om,Hm].indexOf(c)!==-1||[Hm,oI].indexOf(A)!==-1&&c===Hm||dS.indexOf(A)!==-1&&[uS,Xd].indexOf(c)!==-1||dS.indexOf(c)!==-1&&A===Yd||na.indexOf(A)!==-1&&na.indexOf(c)!==-1||A===kc&&na.indexOf(c)!==-1||na.concat(Bi).indexOf(A)!==-1&&c===md&&N9.indexOf(r[a])===-1||na.concat(Bi).indexOf(c)!==-1&&A===gd)return yt;if(A===pC&&c===pC){for(var d=t[s],p=1;d>0&&(d--,e[d]===pC);)p++;if(p%2!==0)return yt}return A===kg&&c===Lg?yt:Wg},W9=function(r,e){e||(e={lineBreak:"normal",wordBreak:"normal"});var t=k9(r,e.lineBreak),n=t[0],i=t[1],s=t[2];(e.wordBreak==="break-all"||e.wordBreak==="break-word")&&(i=i.map(function(a){return[Bi,El,DV].indexOf(a)!==-1?ep:a}));var o=e.wordBreak==="keep-all"?s.map(function(a,A){return a&&r[A]>=19968&&r[A]<=40959}):void 0;return[n,i,o]},Z9=function(){function r(e,t,n,i){this.codePoints=e,this.required=t===kV,this.start=n,this.end=i}return r.prototype.slice=function(){return Fn.apply(void 0,this.codePoints.slice(this.start,this.end))},r}(),P9=function(r,e){var t=hv(r),n=W9(t,e),i=n[0],s=n[1],o=n[2],a=t.length,A=0,l=0;return{next:function(){if(l>=a)return{done:!0,value:null};for(var c=yt;l<a&&(c=L9(t,s,i,++l,o))===yt;);if(c!==yt||l===a){var u=new Z9(t,c,A,l);return A=l,{value:u,done:!1}}return{done:!0,value:null}}}},J9=1<<0,G9=1<<1,Vp=1<<2,pS=1<<3,X0=10,gS=47,vh=92,O9=9,H9=32,Zg=34,Bd=61,z9=35,X9=36,Y9=37,Pg=39,Jg=40,vd=41,K9=95,jr=45,j9=33,q9=60,$9=62,e6=64,t6=91,n6=93,r6=61,i6=123,Gg=63,s6=125,mS=124,o6=126,a6=128,BS=65533,mC=42,Tl=43,A6=44,l6=58,c6=59,tp=46,u6=0,f6=8,d6=11,h6=14,p6=31,g6=127,no=-1,WV=48,ZV=97,PV=101,m6=102,B6=117,v6=122,JV=65,GV=69,OV=70,y6=85,C6=90,Cr=function(r){return r>=WV&&r<=57},w6=function(r){return r>=55296&&r<=57343},Wc=function(r){return Cr(r)||r>=JV&&r<=OV||r>=ZV&&r<=m6},F6=function(r){return r>=ZV&&r<=v6},I6=function(r){return r>=JV&&r<=C6},U6=function(r){return F6(r)||I6(r)},x6=function(r){return r>=a6},Og=function(r){return r===X0||r===O9||r===H9},Y0=function(r){return U6(r)||x6(r)||r===K9},vS=function(r){return Y0(r)||Cr(r)||r===jr},Q6=function(r){return r>=u6&&r<=f6||r===d6||r>=h6&&r<=p6||r===g6},uA=function(r,e){return r!==vh?!1:e!==X0},Hg=function(r,e,t){return r===jr?Y0(e)||uA(e,t):Y0(r)?!0:!!(r===vh&&uA(r,e))},BC=function(r,e,t){return r===Tl||r===jr?Cr(e)?!0:e===tp&&Cr(t):Cr(r===tp?e:r)},b6=function(r){var e=0,t=1;(r[e]===Tl||r[e]===jr)&&(r[e]===jr&&(t=-1),e++);for(var n=[];Cr(r[e]);)n.push(r[e++]);var i=n.length?parseInt(Fn.apply(void 0,n),10):0;r[e]===tp&&e++;for(var s=[];Cr(r[e]);)s.push(r[e++]);var o=s.length,a=o?parseInt(Fn.apply(void 0,s),10):0;(r[e]===GV||r[e]===PV)&&e++;var A=1;(r[e]===Tl||r[e]===jr)&&(r[e]===jr&&(A=-1),e++);for(var l=[];Cr(r[e]);)l.push(r[e++]);var c=l.length?parseInt(Fn.apply(void 0,l),10):0;return t*(i+a*Math.pow(10,-o))*Math.pow(10,A*c)},E6={type:2},S6={type:3},_6={type:4},R6={type:13},M6={type:8},T6={type:21},N6={type:9},V6={type:10},D6={type:11},k6={type:12},L6={type:14},zg={type:23},W6={type:1},Z6={type:25},P6={type:24},J6={type:26},G6={type:27},O6={type:28},H6={type:29},z6={type:31},uI={type:32},HV=function(){function r(){this._value=[]}return r.prototype.write=function(e){this._value=this._value.concat(hv(e))},r.prototype.read=function(){for(var e=[],t=this.consumeToken();t!==uI;)e.push(t),t=this.consumeToken();return e},r.prototype.consumeToken=function(){var e=this.consumeCodePoint();switch(e){case Zg:return this.consumeStringToken(Zg);case z9:var t=this.peekCodePoint(0),n=this.peekCodePoint(1),i=this.peekCodePoint(2);if(vS(t)||uA(n,i)){var s=Hg(t,n,i)?G9:J9,o=this.consumeName();return{type:5,value:o,flags:s}}break;case X9:if(this.peekCodePoint(0)===Bd)return this.consumeCodePoint(),R6;break;case Pg:return this.consumeStringToken(Pg);case Jg:return E6;case vd:return S6;case mC:if(this.peekCodePoint(0)===Bd)return this.consumeCodePoint(),L6;break;case Tl:if(BC(e,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(e),this.consumeNumericToken();break;case A6:return _6;case jr:var a=e,A=this.peekCodePoint(0),l=this.peekCodePoint(1);if(BC(a,A,l))return this.reconsumeCodePoint(e),this.consumeNumericToken();if(Hg(a,A,l))return this.reconsumeCodePoint(e),this.consumeIdentLikeToken();if(A===jr&&l===$9)return this.consumeCodePoint(),this.consumeCodePoint(),P6;break;case tp:if(BC(e,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(e),this.consumeNumericToken();break;case gS:if(this.peekCodePoint(0)===mC)for(this.consumeCodePoint();;){var c=this.consumeCodePoint();if(c===mC&&(c=this.consumeCodePoint(),c===gS))return this.consumeToken();if(c===no)return this.consumeToken()}break;case l6:return J6;case c6:return G6;case q9:if(this.peekCodePoint(0)===j9&&this.peekCodePoint(1)===jr&&this.peekCodePoint(2)===jr)return this.consumeCodePoint(),this.consumeCodePoint(),Z6;break;case e6:var u=this.peekCodePoint(0),f=this.peekCodePoint(1),d=this.peekCodePoint(2);if(Hg(u,f,d)){var o=this.consumeName();return{type:7,value:o}}break;case t6:return O6;case vh:if(uA(e,this.peekCodePoint(0)))return this.reconsumeCodePoint(e),this.consumeIdentLikeToken();break;case n6:return H6;case r6:if(this.peekCodePoint(0)===Bd)return this.consumeCodePoint(),M6;break;case i6:return D6;case s6:return k6;case B6:case y6:var p=this.peekCodePoint(0),h=this.peekCodePoint(1);return p===Tl&&(Wc(h)||h===Gg)&&(this.consumeCodePoint(),this.consumeUnicodeRangeToken()),this.reconsumeCodePoint(e),this.consumeIdentLikeToken();case mS:if(this.peekCodePoint(0)===Bd)return this.consumeCodePoint(),N6;if(this.peekCodePoint(0)===mS)return this.consumeCodePoint(),T6;break;case o6:if(this.peekCodePoint(0)===Bd)return this.consumeCodePoint(),V6;break;case no:return uI}return Og(e)?(this.consumeWhiteSpace(),z6):Cr(e)?(this.reconsumeCodePoint(e),this.consumeNumericToken()):Y0(e)?(this.reconsumeCodePoint(e),this.consumeIdentLikeToken()):{type:6,value:Fn(e)}},r.prototype.consumeCodePoint=function(){var e=this._value.shift();return typeof e>"u"?-1:e},r.prototype.reconsumeCodePoint=function(e){this._value.unshift(e)},r.prototype.peekCodePoint=function(e){return e>=this._value.length?-1:this._value[e]},r.prototype.consumeUnicodeRangeToken=function(){for(var e=[],t=this.consumeCodePoint();Wc(t)&&e.length<6;)e.push(t),t=this.consumeCodePoint();for(var n=!1;t===Gg&&e.length<6;)e.push(t),t=this.consumeCodePoint(),n=!0;if(n){var i=parseInt(Fn.apply(void 0,e.map(function(A){return A===Gg?WV:A})),16),s=parseInt(Fn.apply(void 0,e.map(function(A){return A===Gg?OV:A})),16);return{type:30,start:i,end:s}}var o=parseInt(Fn.apply(void 0,e),16);if(this.peekCodePoint(0)===jr&&Wc(this.peekCodePoint(1))){this.consumeCodePoint(),t=this.consumeCodePoint();for(var a=[];Wc(t)&&a.length<6;)a.push(t),t=this.consumeCodePoint();var s=parseInt(Fn.apply(void 0,a),16);return{type:30,start:o,end:s}}else return{type:30,start:o,end:o}},r.prototype.consumeIdentLikeToken=function(){var e=this.consumeName();return e.toLowerCase()==="url"&&this.peekCodePoint(0)===Jg?(this.consumeCodePoint(),this.consumeUrlToken()):this.peekCodePoint(0)===Jg?(this.consumeCodePoint(),{type:19,value:e}):{type:20,value:e}},r.prototype.consumeUrlToken=function(){var e=[];if(this.consumeWhiteSpace(),this.peekCodePoint(0)===no)return{type:22,value:""};var t=this.peekCodePoint(0);if(t===Pg||t===Zg){var n=this.consumeStringToken(this.consumeCodePoint());return n.type===0&&(this.consumeWhiteSpace(),this.peekCodePoint(0)===no||this.peekCodePoint(0)===vd)?(this.consumeCodePoint(),{type:22,value:n.value}):(this.consumeBadUrlRemnants(),zg)}for(;;){var i=this.consumeCodePoint();if(i===no||i===vd)return{type:22,value:Fn.apply(void 0,e)};if(Og(i))return this.consumeWhiteSpace(),this.peekCodePoint(0)===no||this.peekCodePoint(0)===vd?(this.consumeCodePoint(),{type:22,value:Fn.apply(void 0,e)}):(this.consumeBadUrlRemnants(),zg);if(i===Zg||i===Pg||i===Jg||Q6(i))return this.consumeBadUrlRemnants(),zg;if(i===vh)if(uA(i,this.peekCodePoint(0)))e.push(this.consumeEscapedCodePoint());else return this.consumeBadUrlRemnants(),zg;else e.push(i)}},r.prototype.consumeWhiteSpace=function(){for(;Og(this.peekCodePoint(0));)this.consumeCodePoint()},r.prototype.consumeBadUrlRemnants=function(){for(;;){var e=this.consumeCodePoint();if(e===vd||e===no)return;uA(e,this.peekCodePoint(0))&&this.consumeEscapedCodePoint()}},r.prototype.consumeStringSlice=function(e){for(var t=5e4,n="";e>0;){var i=Math.min(t,e);n+=Fn.apply(void 0,this._value.splice(0,i)),e-=i}return this._value.shift(),n},r.prototype.consumeStringToken=function(e){var t="",n=0;do{var i=this._value[n];if(i===no||i===void 0||i===e)return t+=this.consumeStringSlice(n),{type:0,value:t};if(i===X0)return this._value.splice(0,n),W6;if(i===vh){var s=this._value[n+1];s!==no&&s!==void 0&&(s===X0?(t+=this.consumeStringSlice(n),n=-1,this._value.shift()):uA(i,s)&&(t+=this.consumeStringSlice(n),t+=Fn(this.consumeEscapedCodePoint()),n=-1))}n++}while(!0)},r.prototype.consumeNumber=function(){var e=[],t=Vp,n=this.peekCodePoint(0);for((n===Tl||n===jr)&&e.push(this.consumeCodePoint());Cr(this.peekCodePoint(0));)e.push(this.consumeCodePoint());n=this.peekCodePoint(0);var i=this.peekCodePoint(1);if(n===tp&&Cr(i))for(e.push(this.consumeCodePoint(),this.consumeCodePoint()),t=pS;Cr(this.peekCodePoint(0));)e.push(this.consumeCodePoint());n=this.peekCodePoint(0),i=this.peekCodePoint(1);var s=this.peekCodePoint(2);if((n===GV||n===PV)&&((i===Tl||i===jr)&&Cr(s)||Cr(i)))for(e.push(this.consumeCodePoint(),this.consumeCodePoint()),t=pS;Cr(this.peekCodePoint(0));)e.push(this.consumeCodePoint());return[b6(e),t]},r.prototype.consumeNumericToken=function(){var e=this.consumeNumber(),t=e[0],n=e[1],i=this.peekCodePoint(0),s=this.peekCodePoint(1),o=this.peekCodePoint(2);if(Hg(i,s,o)){var a=this.consumeName();return{type:15,number:t,flags:n,unit:a}}return i===Y9?(this.consumeCodePoint(),{type:16,number:t,flags:n}):{type:17,number:t,flags:n}},r.prototype.consumeEscapedCodePoint=function(){var e=this.consumeCodePoint();if(Wc(e)){for(var t=Fn(e);Wc(this.peekCodePoint(0))&&t.length<6;)t+=Fn(this.consumeCodePoint());Og(this.peekCodePoint(0))&&this.consumeCodePoint();var n=parseInt(t,16);return n===0||w6(n)||n>1114111?BS:n}return e===no?BS:e},r.prototype.consumeName=function(){for(var e="";;){var t=this.consumeCodePoint();if(vS(t))e+=Fn(t);else if(uA(t,this.peekCodePoint(0)))e+=Fn(this.consumeEscapedCodePoint());else return this.reconsumeCodePoint(t),e}},r}(),zV=function(){function r(e){this._tokens=e}return r.create=function(e){var t=new HV;return t.write(e),new r(t.read())},r.parseValue=function(e){return r.create(e).parseComponentValue()},r.parseValues=function(e){return r.create(e).parseComponentValues()},r.prototype.parseComponentValue=function(){for(var e=this.consumeToken();e.type===31;)e=this.consumeToken();if(e.type===32)throw new SyntaxError("Error parsing CSS component value, unexpected EOF");this.reconsumeToken(e);var t=this.consumeComponentValue();do e=this.consumeToken();while(e.type===31);if(e.type===32)return t;throw new SyntaxError("Error parsing CSS component value, multiple values found when expecting only one")},r.prototype.parseComponentValues=function(){for(var e=[];;){var t=this.consumeComponentValue();if(t.type===32)return e;e.push(t),e.push()}},r.prototype.consumeComponentValue=function(){var e=this.consumeToken();switch(e.type){case 11:case 28:case 2:return this.consumeSimpleBlock(e.type);case 19:return this.consumeFunction(e)}return e},r.prototype.consumeSimpleBlock=function(e){for(var t={type:e,values:[]},n=this.consumeToken();;){if(n.type===32||X6(n,e))return t;this.reconsumeToken(n),t.values.push(this.consumeComponentValue()),n=this.consumeToken()}},r.prototype.consumeFunction=function(e){for(var t={name:e.value,values:[],type:18};;){var n=this.consumeToken();if(n.type===32||n.type===3)return t;this.reconsumeToken(n),t.values.push(this.consumeComponentValue())}},r.prototype.consumeToken=function(){var e=this._tokens.shift();return typeof e>"u"?uI:e},r.prototype.reconsumeToken=function(e){this._tokens.unshift(e)},r}(),Dp=function(r){return r.type===15},pv=function(r){return r.type===17},Cn=function(r){return r.type===20},fI=function(r,e){return Cn(r)&&r.value===e},gv=function(r){return r.type!==31&&r.type!==4},Go=function(r){var e=[],t=[];return r.forEach(function(n){if(n.type===4){if(t.length===0)throw new Error("Error parsing function args, zero tokens for arg");e.push(t),t=[];return}n.type!==31&&t.push(n)}),t.length&&e.push(t),e},X6=function(r,e){return e===11&&r.type===12||e===28&&r.type===29?!0:e===2&&r.type===3},qA=function(r){return r.type===17||r.type===15},Vn=function(r){return r.type===16||qA(r)},XV=function(r){return r.length>1?[r[0],r[1]]:[r[0]]},ur={type:17,number:0,flags:Vp},Nx={type:16,number:50,flags:Vp},FA={type:16,number:100,flags:Vp},Kd=function(r,e,t){var n=r[0],i=r[1];return[Kt(n,e),Kt(typeof i<"u"?i:n,t)]},Kt=function(r,e){if(r.type===16)return r.number/100*e;if(Dp(r))switch(r.unit){case"rem":case"em":return 16*r.number;case"px":default:return r.number}return r.number},YV="deg",KV="grad",jV="rad",qV="turn",mv={name:"angle",parse:function(r,e){if(e.type===15)switch(e.unit){case YV:return Math.PI*e.number/180;case KV:return Math.PI/200*e.number;case jV:return e.number;case qV:return Math.PI*2*e.number}throw new Error("Unsupported angle type")}},$V=function(r){return r.type===15&&(r.unit===YV||r.unit===KV||r.unit===jV||r.unit===qV)},eD=function(r){var e=r.filter(Cn).map(function(t){return t.value}).join(" ");switch(e){case"to bottom right":case"to right bottom":case"left top":case"top left":return[ur,ur];case"to top":case"bottom":return is(0);case"to bottom left":case"to left bottom":case"right top":case"top right":return[ur,FA];case"to right":case"left":return is(90);case"to top left":case"to left top":case"right bottom":case"bottom right":return[FA,FA];case"to bottom":case"top":return is(180);case"to top right":case"to right top":case"left bottom":case"bottom left":return[FA,ur];case"to left":case"right":return is(270)}return 0},is=function(r){return Math.PI*r/180},LA={name:"color",parse:function(r,e){if(e.type===18){var t=Y6[e.name];if(typeof t>"u")throw new Error('Attempting to parse an unsupported color function "'+e.name+'"');return t(r,e.values)}if(e.type===5){if(e.value.length===3){var n=e.value.substring(0,1),i=e.value.substring(1,2),s=e.value.substring(2,3);return IA(parseInt(n+n,16),parseInt(i+i,16),parseInt(s+s,16),1)}if(e.value.length===4){var n=e.value.substring(0,1),i=e.value.substring(1,2),s=e.value.substring(2,3),o=e.value.substring(3,4);return IA(parseInt(n+n,16),parseInt(i+i,16),parseInt(s+s,16),parseInt(o+o,16)/255)}if(e.value.length===6){var n=e.value.substring(0,2),i=e.value.substring(2,4),s=e.value.substring(4,6);return IA(parseInt(n,16),parseInt(i,16),parseInt(s,16),1)}if(e.value.length===8){var n=e.value.substring(0,2),i=e.value.substring(2,4),s=e.value.substring(4,6),o=e.value.substring(6,8);return IA(parseInt(n,16),parseInt(i,16),parseInt(s,16),parseInt(o,16)/255)}}if(e.type===20){var a=np[e.value.toUpperCase()];if(typeof a<"u")return a}return np.TRANSPARENT}},Gu=function(r){return(255&r)===0},er=function(r){var e=255&r,t=255&r>>8,n=255&r>>16,i=255&r>>24;return e<255?"rgba("+i+","+n+","+t+","+e/255+")":"rgb("+i+","+n+","+t+")"},IA=function(r,e,t,n){return(r<<24|e<<16|t<<8|Math.round(n*255)<<0)>>>0},yS=function(r,e){if(r.type===17)return r.number;if(r.type===16){var t=e===3?1:255;return e===3?r.number/100*t:Math.round(r.number/100*t)}return 0},CS=function(r,e){var t=e.filter(gv);if(t.length===3){var n=t.map(yS),i=n[0],s=n[1],o=n[2];return IA(i,s,o,1)}if(t.length===4){var a=t.map(yS),i=a[0],s=a[1],o=a[2],A=a[3];return IA(i,s,o,A)}return 0};function vC(r,e,t){return t<0&&(t+=1),t>=1&&(t-=1),t<1/6?(e-r)*t*6+r:t<1/2?e:t<2/3?(e-r)*6*(2/3-t)+r:r}var wS=function(r,e){var t=e.filter(gv),n=t[0],i=t[1],s=t[2],o=t[3],a=(n.type===17?is(n.number):mv.parse(r,n))/(Math.PI*2),A=Vn(i)?i.number/100:0,l=Vn(s)?s.number/100:0,c=typeof o<"u"&&Vn(o)?Kt(o,1):1;if(A===0)return IA(l*255,l*255,l*255,1);var u=l<=.5?l*(A+1):l+A-l*A,f=l*2-u,d=vC(f,u,a+1/3),p=vC(f,u,a),h=vC(f,u,a-1/3);return IA(d*255,p*255,h*255,c)},Y6={hsl:wS,hsla:wS,rgb:CS,rgba:CS},FS=function(r,e){return LA.parse(r,zV.create(e).parseComponentValue())},np={ALICEBLUE:4042850303,ANTIQUEWHITE:4209760255,AQUA:16777215,AQUAMARINE:2147472639,AZURE:4043309055,BEIGE:4126530815,BISQUE:4293182719,BLACK:255,BLANCHEDALMOND:4293643775,BLUE:65535,BLUEVIOLET:2318131967,BROWN:2771004159,BURLYWOOD:3736635391,CADETBLUE:1604231423,CHARTREUSE:2147418367,CHOCOLATE:3530104575,CORAL:4286533887,CORNFLOWERBLUE:1687547391,CORNSILK:4294499583,CRIMSON:3692313855,CYAN:16777215,DARKBLUE:35839,DARKCYAN:9145343,DARKGOLDENROD:3095837695,DARKGRAY:2846468607,DARKGREEN:6553855,DARKGREY:2846468607,DARKKHAKI:3182914559,DARKMAGENTA:2332068863,DARKOLIVEGREEN:1433087999,DARKORANGE:4287365375,DARKORCHID:2570243327,DARKRED:2332033279,DARKSALMON:3918953215,DARKSEAGREEN:2411499519,DARKSLATEBLUE:1211993087,DARKSLATEGRAY:793726975,DARKSLATEGREY:793726975,DARKTURQUOISE:13554175,DARKVIOLET:2483082239,DEEPPINK:4279538687,DEEPSKYBLUE:12582911,DIMGRAY:1768516095,DIMGREY:1768516095,DODGERBLUE:512819199,FIREBRICK:2988581631,FLORALWHITE:4294635775,FORESTGREEN:579543807,FUCHSIA:4278255615,GAINSBORO:3705462015,GHOSTWHITE:4177068031,GOLD:4292280575,GOLDENROD:3668254975,GRAY:2155905279,GREEN:8388863,GREENYELLOW:2919182335,GREY:2155905279,HONEYDEW:4043305215,HOTPINK:4285117695,INDIANRED:3445382399,INDIGO:1258324735,IVORY:4294963455,KHAKI:4041641215,LAVENDER:3873897215,LAVENDERBLUSH:4293981695,LAWNGREEN:2096890111,LEMONCHIFFON:4294626815,LIGHTBLUE:2916673279,LIGHTCORAL:4034953471,LIGHTCYAN:3774873599,LIGHTGOLDENRODYELLOW:4210742015,LIGHTGRAY:3553874943,LIGHTGREEN:2431553791,LIGHTGREY:3553874943,LIGHTPINK:4290167295,LIGHTSALMON:4288707327,LIGHTSEAGREEN:548580095,LIGHTSKYBLUE:2278488831,LIGHTSLATEGRAY:2005441023,LIGHTSLATEGREY:2005441023,LIGHTSTEELBLUE:2965692159,LIGHTYELLOW:4294959359,LIME:16711935,LIMEGREEN:852308735,LINEN:4210091775,MAGENTA:4278255615,MAROON:2147483903,MEDIUMAQUAMARINE:1724754687,MEDIUMBLUE:52735,MEDIUMORCHID:3126187007,MEDIUMPURPLE:2473647103,MEDIUMSEAGREEN:1018393087,MEDIUMSLATEBLUE:2070474495,MEDIUMSPRINGGREEN:16423679,MEDIUMTURQUOISE:1221709055,MEDIUMVIOLETRED:3340076543,MIDNIGHTBLUE:421097727,MINTCREAM:4127193855,MISTYROSE:4293190143,MOCCASIN:4293178879,NAVAJOWHITE:4292783615,NAVY:33023,OLDLACE:4260751103,OLIVE:2155872511,OLIVEDRAB:1804477439,ORANGE:4289003775,ORANGERED:4282712319,ORCHID:3664828159,PALEGOLDENROD:4008225535,PALEGREEN:2566625535,PALETURQUOISE:2951671551,PALEVIOLETRED:3681588223,PAPAYAWHIP:4293907967,PEACHPUFF:4292524543,PERU:3448061951,PINK:4290825215,PLUM:3718307327,POWDERBLUE:2967529215,PURPLE:2147516671,REBECCAPURPLE:1714657791,RED:4278190335,ROSYBROWN:3163525119,ROYALBLUE:1097458175,SADDLEBROWN:2336560127,SALMON:4202722047,SANDYBROWN:4104413439,SEAGREEN:780883967,SEASHELL:4294307583,SIENNA:2689740287,SILVER:3233857791,SKYBLUE:2278484991,SLATEBLUE:1784335871,SLATEGRAY:1887473919,SLATEGREY:1887473919,SNOW:4294638335,SPRINGGREEN:16744447,STEELBLUE:1182971135,TAN:3535047935,TEAL:8421631,THISTLE:3636451583,TOMATO:4284696575,TRANSPARENT:0,TURQUOISE:1088475391,VIOLET:4001558271,WHEAT:4125012991,WHITE:4294967295,WHITESMOKE:4126537215,YELLOW:4294902015,YELLOWGREEN:2597139199},K6={name:"background-clip",initialValue:"border-box",prefix:!1,type:1,parse:function(r,e){return e.map(function(t){if(Cn(t))switch(t.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},j6={name:"background-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},Bv=function(r,e){var t=LA.parse(r,e[0]),n=e[1];return n&&Vn(n)?{color:t,stop:n}:{color:t,stop:null}},IS=function(r,e){var t=r[0],n=r[r.length-1];t.stop===null&&(t.stop=ur),n.stop===null&&(n.stop=FA);for(var i=[],s=0,o=0;o<r.length;o++){var a=r[o].stop;if(a!==null){var A=Kt(a,e);A>s?i.push(A):i.push(s),s=A}else i.push(null)}for(var l=null,o=0;o<i.length;o++){var c=i[o];if(c===null)l===null&&(l=o);else if(l!==null){for(var u=o-l,f=i[l-1],d=(c-f)/(u+1),p=1;p<=u;p++)i[l+p-1]=d*p;l=null}}return r.map(function(h,m){var g=h.color;return{color:g,stop:Math.max(Math.min(1,i[m]/e),0)}})},q6=function(r,e,t){var n=e/2,i=t/2,s=Kt(r[0],e)-n,o=i-Kt(r[1],t);return(Math.atan2(o,s)+Math.PI*2)%(Math.PI*2)},$6=function(r,e,t){var n=typeof r=="number"?r:q6(r,e,t),i=Math.abs(e*Math.sin(n))+Math.abs(t*Math.cos(n)),s=e/2,o=t/2,a=i/2,A=Math.sin(n-Math.PI/2)*a,l=Math.cos(n-Math.PI/2)*a;return[i,s-l,s+l,o-A,o+A]},Ds=function(r,e){return Math.sqrt(r*r+e*e)},US=function(r,e,t,n,i){var s=[[0,0],[0,e],[r,0],[r,e]];return s.reduce(function(o,a){var A=a[0],l=a[1],c=Ds(t-A,n-l);return(i?c<o.optimumDistance:c>o.optimumDistance)?{optimumCorner:a,optimumDistance:c}:o},{optimumDistance:i?1/0:-1/0,optimumCorner:null}).optimumCorner},e8=function(r,e,t,n,i){var s=0,o=0;switch(r.size){case 0:r.shape===0?s=o=Math.min(Math.abs(e),Math.abs(e-n),Math.abs(t),Math.abs(t-i)):r.shape===1&&(s=Math.min(Math.abs(e),Math.abs(e-n)),o=Math.min(Math.abs(t),Math.abs(t-i)));break;case 2:if(r.shape===0)s=o=Math.min(Ds(e,t),Ds(e,t-i),Ds(e-n,t),Ds(e-n,t-i));else if(r.shape===1){var a=Math.min(Math.abs(t),Math.abs(t-i))/Math.min(Math.abs(e),Math.abs(e-n)),A=US(n,i,e,t,!0),l=A[0],c=A[1];s=Ds(l-e,(c-t)/a),o=a*s}break;case 1:r.shape===0?s=o=Math.max(Math.abs(e),Math.abs(e-n),Math.abs(t),Math.abs(t-i)):r.shape===1&&(s=Math.max(Math.abs(e),Math.abs(e-n)),o=Math.max(Math.abs(t),Math.abs(t-i)));break;case 3:if(r.shape===0)s=o=Math.max(Ds(e,t),Ds(e,t-i),Ds(e-n,t),Ds(e-n,t-i));else if(r.shape===1){var a=Math.max(Math.abs(t),Math.abs(t-i))/Math.max(Math.abs(e),Math.abs(e-n)),u=US(n,i,e,t,!1),l=u[0],c=u[1];s=Ds(l-e,(c-t)/a),o=a*s}break}return Array.isArray(r.size)&&(s=Kt(r.size[0],n),o=r.size.length===2?Kt(r.size[1],i):s),[s,o]},t8=function(r,e){var t=is(180),n=[];return Go(e).forEach(function(i,s){if(s===0){var o=i[0];if(o.type===20&&o.value==="to"){t=eD(i);return}else if($V(o)){t=mv.parse(r,o);return}}var a=Bv(r,i);n.push(a)}),{angle:t,stops:n,type:1}},Xg=function(r,e){var t=is(180),n=[];return Go(e).forEach(function(i,s){if(s===0){var o=i[0];if(o.type===20&&["top","left","right","bottom"].indexOf(o.value)!==-1){t=eD(i);return}else if($V(o)){t=(mv.parse(r,o)+is(270))%is(360);return}}var a=Bv(r,i);n.push(a)}),{angle:t,stops:n,type:1}},n8=function(r,e){var t=is(180),n=[],i=1,s=0,o=3,a=[];return Go(e).forEach(function(A,l){var c=A[0];if(l===0){if(Cn(c)&&c.value==="linear"){i=1;return}else if(Cn(c)&&c.value==="radial"){i=2;return}}if(c.type===18){if(c.name==="from"){var u=LA.parse(r,c.values[0]);n.push({stop:ur,color:u})}else if(c.name==="to"){var u=LA.parse(r,c.values[0]);n.push({stop:FA,color:u})}else if(c.name==="color-stop"){var f=c.values.filter(gv);if(f.length===2){var u=LA.parse(r,f[1]),d=f[0];pv(d)&&n.push({stop:{type:16,number:d.number*100,flags:d.flags},color:u})}}}}),i===1?{angle:(t+is(180))%is(360),stops:n,type:i}:{size:o,shape:s,stops:n,position:a,type:i}},tD="closest-side",nD="farthest-side",rD="closest-corner",iD="farthest-corner",sD="circle",oD="ellipse",aD="cover",AD="contain",r8=function(r,e){var t=0,n=3,i=[],s=[];return Go(e).forEach(function(o,a){var A=!0;if(a===0){var l=!1;A=o.reduce(function(u,f){if(l)if(Cn(f))switch(f.value){case"center":return s.push(Nx),u;case"top":case"left":return s.push(ur),u;case"right":case"bottom":return s.push(FA),u}else(Vn(f)||qA(f))&&s.push(f);else if(Cn(f))switch(f.value){case sD:return t=0,!1;case oD:return t=1,!1;case"at":return l=!0,!1;case tD:return n=0,!1;case aD:case nD:return n=1,!1;case AD:case rD:return n=2,!1;case iD:return n=3,!1}else if(qA(f)||Vn(f))return Array.isArray(n)||(n=[]),n.push(f),!1;return u},A)}if(A){var c=Bv(r,o);i.push(c)}}),{size:n,shape:t,stops:i,position:s,type:2}},Yg=function(r,e){var t=0,n=3,i=[],s=[];return Go(e).forEach(function(o,a){var A=!0;if(a===0?A=o.reduce(function(c,u){if(Cn(u))switch(u.value){case"center":return s.push(Nx),!1;case"top":case"left":return s.push(ur),!1;case"right":case"bottom":return s.push(FA),!1}else if(Vn(u)||qA(u))return s.push(u),!1;return c},A):a===1&&(A=o.reduce(function(c,u){if(Cn(u))switch(u.value){case sD:return t=0,!1;case oD:return t=1,!1;case AD:case tD:return n=0,!1;case nD:return n=1,!1;case rD:return n=2,!1;case aD:case iD:return n=3,!1}else if(qA(u)||Vn(u))return Array.isArray(n)||(n=[]),n.push(u),!1;return c},A)),A){var l=Bv(r,o);i.push(l)}}),{size:n,shape:t,stops:i,position:s,type:2}},i8=function(r){return r.type===1},s8=function(r){return r.type===2},Vx={name:"image",parse:function(r,e){if(e.type===22){var t={url:e.value,type:0};return r.cache.addImage(e.value),t}if(e.type===18){var n=lD[e.name];if(typeof n>"u")throw new Error('Attempting to parse an unsupported image function "'+e.name+'"');return n(r,e.values)}throw new Error("Unsupported image type "+e.type)}};function o8(r){return!(r.type===20&&r.value==="none")&&(r.type!==18||!!lD[r.name])}var lD={"linear-gradient":t8,"-moz-linear-gradient":Xg,"-ms-linear-gradient":Xg,"-o-linear-gradient":Xg,"-webkit-linear-gradient":Xg,"radial-gradient":r8,"-moz-radial-gradient":Yg,"-ms-radial-gradient":Yg,"-o-radial-gradient":Yg,"-webkit-radial-gradient":Yg,"-webkit-gradient":n8},a8={name:"background-image",initialValue:"none",type:1,prefix:!1,parse:function(r,e){if(e.length===0)return[];var t=e[0];return t.type===20&&t.value==="none"?[]:e.filter(function(n){return gv(n)&&o8(n)}).map(function(n){return Vx.parse(r,n)})}},A8={name:"background-origin",initialValue:"border-box",prefix:!1,type:1,parse:function(r,e){return e.map(function(t){if(Cn(t))switch(t.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},l8={name:"background-position",initialValue:"0% 0%",type:1,prefix:!1,parse:function(r,e){return Go(e).map(function(t){return t.filter(Vn)}).map(XV)}},c8={name:"background-repeat",initialValue:"repeat",prefix:!1,type:1,parse:function(r,e){return Go(e).map(function(t){return t.filter(Cn).map(function(n){return n.value}).join(" ")}).map(u8)}},u8=function(r){switch(r){case"no-repeat":return 1;case"repeat-x":case"repeat no-repeat":return 2;case"repeat-y":case"no-repeat repeat":return 3;case"repeat":default:return 0}},Ou;(function(r){r.AUTO="auto",r.CONTAIN="contain",r.COVER="cover"})(Ou||(Ou={}));var f8={name:"background-size",initialValue:"0",prefix:!1,type:1,parse:function(r,e){return Go(e).map(function(t){return t.filter(d8)})}},d8=function(r){return Cn(r)||Vn(r)},vv=function(r){return{name:"border-"+r+"-color",initialValue:"transparent",prefix:!1,type:3,format:"color"}},h8=vv("top"),p8=vv("right"),g8=vv("bottom"),m8=vv("left"),yv=function(r){return{name:"border-radius-"+r,initialValue:"0 0",prefix:!1,type:1,parse:function(e,t){return XV(t.filter(Vn))}}},B8=yv("top-left"),v8=yv("top-right"),y8=yv("bottom-right"),C8=yv("bottom-left"),Cv=function(r){return{name:"border-"+r+"-style",initialValue:"solid",prefix:!1,type:2,parse:function(e,t){switch(t){case"none":return 0;case"dashed":return 2;case"dotted":return 3;case"double":return 4}return 1}}},w8=Cv("top"),F8=Cv("right"),I8=Cv("bottom"),U8=Cv("left"),wv=function(r){return{name:"border-"+r+"-width",initialValue:"0",type:0,prefix:!1,parse:function(e,t){return Dp(t)?t.number:0}}},x8=wv("top"),Q8=wv("right"),b8=wv("bottom"),E8=wv("left"),S8={name:"color",initialValue:"transparent",prefix:!1,type:3,format:"color"},_8={name:"direction",initialValue:"ltr",prefix:!1,type:2,parse:function(r,e){switch(e){case"rtl":return 1;case"ltr":default:return 0}}},R8={name:"display",initialValue:"inline-block",prefix:!1,type:1,parse:function(r,e){return e.filter(Cn).reduce(function(t,n){return t|M8(n.value)},0)}},M8=function(r){switch(r){case"block":case"-webkit-box":return 2;case"inline":return 4;case"run-in":return 8;case"flow":return 16;case"flow-root":return 32;case"table":return 64;case"flex":case"-webkit-flex":return 128;case"grid":case"-ms-grid":return 256;case"ruby":return 512;case"subgrid":return 1024;case"list-item":return 2048;case"table-row-group":return 4096;case"table-header-group":return 8192;case"table-footer-group":return 16384;case"table-row":return 32768;case"table-cell":return 65536;case"table-column-group":return 131072;case"table-column":return 262144;case"table-caption":return 524288;case"ruby-base":return 1048576;case"ruby-text":return 2097152;case"ruby-base-container":return 4194304;case"ruby-text-container":return 8388608;case"contents":return 16777216;case"inline-block":return 33554432;case"inline-list-item":return 67108864;case"inline-table":return 134217728;case"inline-flex":return 268435456;case"inline-grid":return 536870912}return 0},T8={name:"float",initialValue:"none",prefix:!1,type:2,parse:function(r,e){switch(e){case"left":return 1;case"right":return 2;case"inline-start":return 3;case"inline-end":return 4}return 0}},N8={name:"letter-spacing",initialValue:"0",prefix:!1,type:0,parse:function(r,e){return e.type===20&&e.value==="normal"?0:e.type===17||e.type===15?e.number:0}},K0;(function(r){r.NORMAL="normal",r.STRICT="strict"})(K0||(K0={}));var V8={name:"line-break",initialValue:"normal",prefix:!1,type:2,parse:function(r,e){switch(e){case"strict":return K0.STRICT;case"normal":default:return K0.NORMAL}}},D8={name:"line-height",initialValue:"normal",prefix:!1,type:4},xS=function(r,e){return Cn(r)&&r.value==="normal"?1.2*e:r.type===17?e*r.number:Vn(r)?Kt(r,e):e},k8={name:"list-style-image",initialValue:"none",type:0,prefix:!1,parse:function(r,e){return e.type===20&&e.value==="none"?null:Vx.parse(r,e)}},L8={name:"list-style-position",initialValue:"outside",prefix:!1,type:2,parse:function(r,e){switch(e){case"inside":return 0;case"outside":default:return 1}}},W8={name:"list-style-type",initialValue:"none",prefix:!1,type:2,parse:function(r,e){switch(e){case"disc":return 0;case"circle":return 1;case"square":return 2;case"decimal":return 3;case"cjk-decimal":return 4;case"decimal-leading-zero":return 5;case"lower-roman":return 6;case"upper-roman":return 7;case"lower-greek":return 8;case"lower-alpha":return 9;case"upper-alpha":return 10;case"arabic-indic":return 11;case"armenian":return 12;case"bengali":return 13;case"cambodian":return 14;case"cjk-earthly-branch":return 15;case"cjk-heavenly-stem":return 16;case"cjk-ideographic":return 17;case"devanagari":return 18;case"ethiopic-numeric":return 19;case"georgian":return 20;case"gujarati":return 21;case"gurmukhi":return 22;case"hebrew":return 22;case"hiragana":return 23;case"hiragana-iroha":return 24;case"japanese-formal":return 25;case"japanese-informal":return 26;case"kannada":return 27;case"katakana":return 28;case"katakana-iroha":return 29;case"khmer":return 30;case"korean-hangul-formal":return 31;case"korean-hanja-formal":return 32;case"korean-hanja-informal":return 33;case"lao":return 34;case"lower-armenian":return 35;case"malayalam":return 36;case"mongolian":return 37;case"myanmar":return 38;case"oriya":return 39;case"persian":return 40;case"simp-chinese-formal":return 41;case"simp-chinese-informal":return 42;case"tamil":return 43;case"telugu":return 44;case"thai":return 45;case"tibetan":return 46;case"trad-chinese-formal":return 47;case"trad-chinese-informal":return 48;case"upper-armenian":return 49;case"disclosure-open":return 50;case"disclosure-closed":return 51;case"none":default:return-1}}},Fv=function(r){return{name:"margin-"+r,initialValue:"0",prefix:!1,type:4}},Z8=Fv("top"),P8=Fv("right"),J8=Fv("bottom"),G8=Fv("left"),O8={name:"overflow",initialValue:"visible",prefix:!1,type:1,parse:function(r,e){return e.filter(Cn).map(function(t){switch(t.value){case"hidden":return 1;case"scroll":return 2;case"clip":return 3;case"auto":return 4;case"visible":default:return 0}})}},H8={name:"overflow-wrap",initialValue:"normal",prefix:!1,type:2,parse:function(r,e){switch(e){case"break-word":return"break-word";case"normal":default:return"normal"}}},Iv=function(r){return{name:"padding-"+r,initialValue:"0",prefix:!1,type:3,format:"length-percentage"}},z8=Iv("top"),X8=Iv("right"),Y8=Iv("bottom"),K8=Iv("left"),j8={name:"text-align",initialValue:"left",prefix:!1,type:2,parse:function(r,e){switch(e){case"right":return 2;case"center":case"justify":return 1;case"left":default:return 0}}},q8={name:"position",initialValue:"static",prefix:!1,type:2,parse:function(r,e){switch(e){case"relative":return 1;case"absolute":return 2;case"fixed":return 3;case"sticky":return 4}return 0}},$8={name:"text-shadow",initialValue:"none",type:1,prefix:!1,parse:function(r,e){return e.length===1&&fI(e[0],"none")?[]:Go(e).map(function(t){for(var n={color:np.TRANSPARENT,offsetX:ur,offsetY:ur,blur:ur},i=0,s=0;s<t.length;s++){var o=t[s];qA(o)?(i===0?n.offsetX=o:i===1?n.offsetY=o:n.blur=o,i++):n.color=LA.parse(r,o)}return n})}},ej={name:"text-transform",initialValue:"none",prefix:!1,type:2,parse:function(r,e){switch(e){case"uppercase":return 2;case"lowercase":return 1;case"capitalize":return 3}return 0}},tj={name:"transform",initialValue:"none",prefix:!0,type:0,parse:function(r,e){if(e.type===20&&e.value==="none")return null;if(e.type===18){var t=ij[e.name];if(typeof t>"u")throw new Error('Attempting to parse an unsupported transform function "'+e.name+'"');return t(e.values)}return null}},nj=function(r){var e=r.filter(function(t){return t.type===17}).map(function(t){return t.number});return e.length===6?e:null},rj=function(r){var e=r.filter(function(A){return A.type===17}).map(function(A){return A.number}),t=e[0],n=e[1];e[2],e[3];var i=e[4],s=e[5];e[6],e[7],e[8],e[9],e[10],e[11];var o=e[12],a=e[13];return e[14],e[15],e.length===16?[t,n,i,s,o,a]:null},ij={matrix:nj,matrix3d:rj},QS={type:16,number:50,flags:Vp},sj=[QS,QS],oj={name:"transform-origin",initialValue:"50% 50%",prefix:!0,type:1,parse:function(r,e){var t=e.filter(Vn);return t.length!==2?sj:[t[0],t[1]]}},aj={name:"visible",initialValue:"none",prefix:!1,type:2,parse:function(r,e){switch(e){case"hidden":return 1;case"collapse":return 2;case"visible":default:return 0}}},yh;(function(r){r.NORMAL="normal",r.BREAK_ALL="break-all",r.KEEP_ALL="keep-all"})(yh||(yh={}));var Aj={name:"word-break",initialValue:"normal",prefix:!1,type:2,parse:function(r,e){switch(e){case"break-all":return yh.BREAK_ALL;case"keep-all":return yh.KEEP_ALL;case"normal":default:return yh.NORMAL}}},lj={name:"z-index",initialValue:"auto",prefix:!1,type:0,parse:function(r,e){if(e.type===20)return{auto:!0,order:0};if(pv(e))return{auto:!1,order:e.number};throw new Error("Invalid z-index number parsed")}},cD={name:"time",parse:function(r,e){if(e.type===15)switch(e.unit.toLowerCase()){case"s":return 1e3*e.number;case"ms":return e.number}throw new Error("Unsupported time type")}},cj={name:"opacity",initialValue:"1",type:0,prefix:!1,parse:function(r,e){return pv(e)?e.number:1}},uj={name:"text-decoration-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},fj={name:"text-decoration-line",initialValue:"none",prefix:!1,type:1,parse:function(r,e){return e.filter(Cn).map(function(t){switch(t.value){case"underline":return 1;case"overline":return 2;case"line-through":return 3;case"none":return 4}return 0}).filter(function(t){return t!==0})}},dj={name:"font-family",initialValue:"",prefix:!1,type:1,parse:function(r,e){var t=[],n=[];return e.forEach(function(i){switch(i.type){case 20:case 0:t.push(i.value);break;case 17:t.push(i.number.toString());break;case 4:n.push(t.join(" ")),t.length=0;break}}),t.length&&n.push(t.join(" ")),n.map(function(i){return i.indexOf(" ")===-1?i:"'"+i+"'"})}},hj={name:"font-size",initialValue:"0",prefix:!1,type:3,format:"length"},pj={name:"font-weight",initialValue:"normal",type:0,prefix:!1,parse:function(r,e){if(pv(e))return e.number;if(Cn(e))switch(e.value){case"bold":return 700;case"normal":default:return 400}return 400}},gj={name:"font-variant",initialValue:"none",type:1,prefix:!1,parse:function(r,e){return e.filter(Cn).map(function(t){return t.value})}},mj={name:"font-style",initialValue:"normal",prefix:!1,type:2,parse:function(r,e){switch(e){case"oblique":return"oblique";case"italic":return"italic";case"normal":default:return"normal"}}},Xn=function(r,e){return(r&e)!==0},Bj={name:"duration",initialValue:"0s",prefix:!1,type:1,parse:function(r,e){return e.filter(Dp).map(function(t){return cD.parse(r,t)})}},vj={name:"box-shadow",initialValue:"none",type:1,prefix:!1,parse:function(r,e){return e.length===1&&fI(e[0],"none")?[]:Go(e).map(function(t){for(var n={color:255,offsetX:ur,offsetY:ur,blur:ur,spread:ur,inset:!1},i=0,s=0;s<t.length;s++){var o=t[s];fI(o,"inset")?n.inset=!0:qA(o)?(i===0?n.offsetX=o:i===1?n.offsetY=o:i===2?n.blur=o:n.spread=o,i++):n.color=LA.parse(r,o)}return n})}},yj={name:"paint-order",initialValue:"normal",prefix:!1,type:1,parse:function(r,e){var t=[0,1,2],n=[];return e.filter(Cn).forEach(function(i){switch(i.value){case"stroke":n.push(1);break;case"fill":n.push(0);break;case"markers":n.push(2);break}}),t.forEach(function(i){n.indexOf(i)===-1&&n.push(i)}),n}},Cj={name:"-webkit-text-stroke-color",initialValue:"currentcolor",prefix:!1,type:3,format:"color"},wj={name:"-webkit-text-stroke-width",initialValue:"0",type:0,prefix:!1,parse:function(r,e){return Dp(e)?e.number:0}},Fj=function(){function r(e,t){var n,i;this.animationDuration=Oe(e,Bj,t.animationDuration),this.backgroundClip=Oe(e,K6,t.backgroundClip),this.backgroundColor=Oe(e,j6,t.backgroundColor),this.backgroundImage=Oe(e,a8,t.backgroundImage),this.backgroundOrigin=Oe(e,A8,t.backgroundOrigin),this.backgroundPosition=Oe(e,l8,t.backgroundPosition),this.backgroundRepeat=Oe(e,c8,t.backgroundRepeat),this.backgroundSize=Oe(e,f8,t.backgroundSize),this.borderTopColor=Oe(e,h8,t.borderTopColor),this.borderRightColor=Oe(e,p8,t.borderRightColor),this.borderBottomColor=Oe(e,g8,t.borderBottomColor),this.borderLeftColor=Oe(e,m8,t.borderLeftColor),this.borderTopLeftRadius=Oe(e,B8,t.borderTopLeftRadius),this.borderTopRightRadius=Oe(e,v8,t.borderTopRightRadius),this.borderBottomRightRadius=Oe(e,y8,t.borderBottomRightRadius),this.borderBottomLeftRadius=Oe(e,C8,t.borderBottomLeftRadius),this.borderTopStyle=Oe(e,w8,t.borderTopStyle),this.borderRightStyle=Oe(e,F8,t.borderRightStyle),this.borderBottomStyle=Oe(e,I8,t.borderBottomStyle),this.borderLeftStyle=Oe(e,U8,t.borderLeftStyle),this.borderTopWidth=Oe(e,x8,t.borderTopWidth),this.borderRightWidth=Oe(e,Q8,t.borderRightWidth),this.borderBottomWidth=Oe(e,b8,t.borderBottomWidth),this.borderLeftWidth=Oe(e,E8,t.borderLeftWidth),this.boxShadow=Oe(e,vj,t.boxShadow),this.color=Oe(e,S8,t.color),this.direction=Oe(e,_8,t.direction),this.display=Oe(e,R8,t.display),this.float=Oe(e,T8,t.cssFloat),this.fontFamily=Oe(e,dj,t.fontFamily),this.fontSize=Oe(e,hj,t.fontSize),this.fontStyle=Oe(e,mj,t.fontStyle),this.fontVariant=Oe(e,gj,t.fontVariant),this.fontWeight=Oe(e,pj,t.fontWeight),this.letterSpacing=Oe(e,N8,t.letterSpacing),this.lineBreak=Oe(e,V8,t.lineBreak),this.lineHeight=Oe(e,D8,t.lineHeight),this.listStyleImage=Oe(e,k8,t.listStyleImage),this.listStylePosition=Oe(e,L8,t.listStylePosition),this.listStyleType=Oe(e,W8,t.listStyleType),this.marginTop=Oe(e,Z8,t.marginTop),this.marginRight=Oe(e,P8,t.marginRight),this.marginBottom=Oe(e,J8,t.marginBottom),this.marginLeft=Oe(e,G8,t.marginLeft),this.opacity=Oe(e,cj,t.opacity);var s=Oe(e,O8,t.overflow);this.overflowX=s[0],this.overflowY=s[s.length>1?1:0],this.overflowWrap=Oe(e,H8,t.overflowWrap),this.paddingTop=Oe(e,z8,t.paddingTop),this.paddingRight=Oe(e,X8,t.paddingRight),this.paddingBottom=Oe(e,Y8,t.paddingBottom),this.paddingLeft=Oe(e,K8,t.paddingLeft),this.paintOrder=Oe(e,yj,t.paintOrder),this.position=Oe(e,q8,t.position),this.textAlign=Oe(e,j8,t.textAlign),this.textDecorationColor=Oe(e,uj,(n=t.textDecorationColor)!==null&&n!==void 0?n:t.color),this.textDecorationLine=Oe(e,fj,(i=t.textDecorationLine)!==null&&i!==void 0?i:t.textDecoration),this.textShadow=Oe(e,$8,t.textShadow),this.textTransform=Oe(e,ej,t.textTransform),this.transform=Oe(e,tj,t.transform),this.transformOrigin=Oe(e,oj,t.transformOrigin),this.visibility=Oe(e,aj,t.visibility),this.webkitTextStrokeColor=Oe(e,Cj,t.webkitTextStrokeColor),this.webkitTextStrokeWidth=Oe(e,wj,t.webkitTextStrokeWidth),this.wordBreak=Oe(e,Aj,t.wordBreak),this.zIndex=Oe(e,lj,t.zIndex)}return r.prototype.isVisible=function(){return this.display>0&&this.opacity>0&&this.visibility===0},r.prototype.isTransparent=function(){return Gu(this.backgroundColor)},r.prototype.isTransformed=function(){return this.transform!==null},r.prototype.isPositioned=function(){return this.position!==0},r.prototype.isPositionedWithZIndex=function(){return this.isPositioned()&&!this.zIndex.auto},r.prototype.isFloating=function(){return this.float!==0},r.prototype.isInlineLevel=function(){return Xn(this.display,4)||Xn(this.display,33554432)||Xn(this.display,268435456)||Xn(this.display,536870912)||Xn(this.display,67108864)||Xn(this.display,134217728)},r}(),Oe=function(r,e,t){var n=new HV,i=t!==null&&typeof t<"u"?t.toString():e.initialValue;n.write(i);var s=new zV(n.read());switch(e.type){case 2:var o=s.parseComponentValue();return e.parse(r,Cn(o)?o.value:e.initialValue);case 0:return e.parse(r,s.parseComponentValue());case 1:return e.parse(r,s.parseComponentValues());case 4:return s.parseComponentValue();case 3:switch(e.format){case"angle":return mv.parse(r,s.parseComponentValue());case"color":return LA.parse(r,s.parseComponentValue());case"image":return Vx.parse(r,s.parseComponentValue());case"length":var a=s.parseComponentValue();return qA(a)?a:ur;case"length-percentage":var A=s.parseComponentValue();return Vn(A)?A:ur;case"time":return cD.parse(r,s.parseComponentValue())}break}},Ij="data-html2canvas-debug",Uj=function(r){var e=r.getAttribute(Ij);switch(e){case"all":return 1;case"clone":return 2;case"parse":return 3;case"render":return 4;default:return 0}},bS=function(r,e){var t=Uj(r);return t===1||e===t},Oo=function(){function r(e,t){if(this.context=e,this.textNodes=[],this.elements=[],this.flags=0,bS(t,3))debugger;this.styles=new Fj(e,window.getComputedStyle(t,null)),U7(t)&&(this.styles.animationDuration.some(function(n){return n>0})&&(t.style.animationDuration="0s"),this.styles.transform!==null&&(t.style.transform="none")),this.bounds=Mx(this.context,t),bS(t,4)&&(this.flags|=16)}return r}(),xj="AAAAAAAAAAAAEA4AGBkAAFAaAAACAAAAAAAIABAAGAAwADgACAAQAAgAEAAIABAACAAQAAgAEAAIABAACAAQAAgAEAAIABAAQABIAEQATAAIABAACAAQAAgAEAAIABAAVABcAAgAEAAIABAACAAQAGAAaABwAHgAgACIAI4AlgAIABAAmwCjAKgAsAC2AL4AvQDFAMoA0gBPAVYBWgEIAAgACACMANoAYgFkAWwBdAF8AX0BhQGNAZUBlgGeAaMBlQGWAasBswF8AbsBwwF0AcsBYwHTAQgA2wG/AOMBdAF8AekB8QF0AfkB+wHiAHQBfAEIAAMC5gQIAAsCEgIIAAgAFgIeAggAIgIpAggAMQI5AkACygEIAAgASAJQAlgCYAIIAAgACAAKBQoFCgUTBRMFGQUrBSsFCAAIAAgACAAIAAgACAAIAAgACABdAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABoAmgCrwGvAQgAbgJ2AggAHgEIAAgACADnAXsCCAAIAAgAgwIIAAgACAAIAAgACACKAggAkQKZAggAPADJAAgAoQKkAqwCsgK6AsICCADJAggA0AIIAAgACAAIANYC3gIIAAgACAAIAAgACABAAOYCCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAkASoB+QIEAAgACAA8AEMCCABCBQgACABJBVAFCAAIAAgACAAIAAgACAAIAAgACABTBVoFCAAIAFoFCABfBWUFCAAIAAgACAAIAAgAbQUIAAgACAAIAAgACABzBXsFfQWFBYoFigWKBZEFigWKBYoFmAWfBaYFrgWxBbkFCAAIAAgACAAIAAgACAAIAAgACAAIAMEFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAMgFCADQBQgACAAIAAgACAAIAAgACAAIAAgACAAIAO4CCAAIAAgAiQAIAAgACABAAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAD0AggACAD8AggACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIANYFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAMDvwAIAAgAJAIIAAgACAAIAAgACAAIAAgACwMTAwgACAB9BOsEGwMjAwgAKwMyAwsFYgE3A/MEPwMIAEUDTQNRAwgAWQOsAGEDCAAIAAgACAAIAAgACABpAzQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFIQUoBSwFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABtAwgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABMAEwACAAIAAgACAAIABgACAAIAAgACAC/AAgACAAyAQgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACAAIAAwAAgACAAIAAgACAAIAAgACAAIAAAARABIAAgACAAIABQASAAIAAgAIABwAEAAjgCIABsAqAC2AL0AigDQAtwC+IJIQqVAZUBWQqVAZUBlQGVAZUBlQGrC5UBlQGVAZUBlQGVAZUBlQGVAXsKlQGVAbAK6wsrDGUMpQzlDJUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAfAKAAuZA64AtwCJALoC6ADwAAgAuACgA/oEpgO6AqsD+AAIAAgAswMIAAgACAAIAIkAuwP5AfsBwwPLAwgACAAIAAgACADRA9kDCAAIAOED6QMIAAgACAAIAAgACADuA/YDCAAIAP4DyQAIAAgABgQIAAgAXQAOBAgACAAIAAgACAAIABMECAAIAAgACAAIAAgACAD8AAQBCAAIAAgAGgQiBCoECAExBAgAEAEIAAgACAAIAAgACAAIAAgACAAIAAgACAA4BAgACABABEYECAAIAAgATAQYAQgAVAQIAAgACAAIAAgACAAIAAgACAAIAFoECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAOQEIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAB+BAcACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAEABhgSMBAgACAAIAAgAlAQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAwAEAAQABAADAAMAAwADAAQABAAEAAQABAAEAAQABHATAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAdQMIAAgACAAIAAgACAAIAMkACAAIAAgAfQMIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACFA4kDCAAIAAgACAAIAOcBCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAIcDCAAIAAgACAAIAAgACAAIAAgACAAIAJEDCAAIAAgACADFAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABgBAgAZgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAbAQCBXIECAAIAHkECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABAAJwEQACjBKoEsgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAC6BMIECAAIAAgACAAIAAgACABmBAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAxwQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAGYECAAIAAgAzgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBd0FXwUIAOIF6gXxBYoF3gT5BQAGCAaKBYoFigWKBYoFigWKBYoFigWKBYoFigXWBIoFigWKBYoFigWKBYoFigWKBYsFEAaKBYoFigWKBYoFigWKBRQGCACKBYoFigWKBQgACAAIANEECAAIABgGigUgBggAJgYIAC4GMwaKBYoF0wQ3Bj4GigWKBYoFigWKBYoFigWKBYoFigWKBYoFigUIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWLBf///////wQABAAEAAQABAAEAAQABAAEAAQAAwAEAAQAAgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAQADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUAAAAFAAUAAAAFAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAQAAAAUABQAFAAUABQAFAAAAAAAFAAUAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAFAAUAAQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAAABwAHAAcAAAAHAAcABwAFAAEAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAcABwAFAAUAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAQABAAAAAAAAAAAAAAAFAAUABQAFAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAHAAcAAAAHAAcAAAAAAAUABQAHAAUAAQAHAAEABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwABAAUABQAFAAUAAAAAAAAAAAAAAAEAAQABAAEAAQABAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABQANAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAABQAHAAUABQAFAAAAAAAAAAcABQAFAAUABQAFAAQABAAEAAQABAAEAAQABAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUAAAAFAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAUAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAcABwAFAAcABwAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUABwAHAAUABQAFAAUAAAAAAAcABwAAAAAABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAAAAAAAAAAABQAFAAAAAAAFAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAFAAUABQAFAAUAAAAFAAUABwAAAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABwAFAAUABQAFAAAAAAAHAAcAAAAAAAcABwAFAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAAAAAAAAAHAAcABwAAAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAUABQAFAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAHAAcABQAHAAcAAAAFAAcABwAAAAcABwAFAAUAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAFAAcABwAFAAUABQAAAAUAAAAHAAcABwAHAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAHAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUAAAAFAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAUAAAAFAAUAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABwAFAAUABQAFAAUABQAAAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABQAFAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAFAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAHAAUABQAFAAUABQAFAAUABwAHAAcABwAHAAcABwAHAAUABwAHAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABwAHAAcABwAFAAUABwAHAAcAAAAAAAAAAAAHAAcABQAHAAcABwAHAAcABwAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAUABQAFAAUABQAFAAUAAAAFAAAABQAAAAAABQAFAAUABQAFAAUABQAFAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAUABQAFAAUABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABwAFAAcABwAHAAcABwAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAUABQAFAAUABwAHAAUABQAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABQAFAAcABwAHAAUABwAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAcABQAFAAUABQAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAAAAAABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAAAAAAAAAFAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAUABQAHAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAFAAUABQAFAAcABwAFAAUABwAHAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAcABwAFAAUABwAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABQAAAAAABQAFAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAcABwAAAAAAAAAAAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAcABwAFAAcABwAAAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAFAAUABQAAAAUABQAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABwAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAHAAcABQAHAAUABQAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAAABwAHAAAAAAAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAFAAUABwAFAAcABwAFAAcABQAFAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAAAAAABwAHAAcABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAFAAcABwAFAAUABQAFAAUABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAUABQAFAAcABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABQAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAAAAAAFAAUABwAHAAcABwAFAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAHAAUABQAFAAUABQAFAAUABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAABQAAAAUABQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAHAAcAAAAFAAUAAAAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABQAFAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAABQAFAAUABQAFAAUABQAAAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAFAAUABQAFAAUADgAOAA4ADgAOAA4ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAMAAwADAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAAAAAAAAAAAAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAAAAAAAAAAAAsADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwACwAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAADgAOAA4AAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAAAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4AAAAOAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAAAAAAAAAAAA4AAAAOAAAAAAAAAAAADgAOAA4AAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAA=",ES="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",jd=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Kg=0;Kg<ES.length;Kg++)jd[ES.charCodeAt(Kg)]=Kg;var Qj=function(r){var e=r.length*.75,t=r.length,n,i=0,s,o,a,A;r[r.length-1]==="="&&(e--,r[r.length-2]==="="&&e--);var l=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(e):new Array(e),c=Array.isArray(l)?l:new Uint8Array(l);for(n=0;n<t;n+=4)s=jd[r.charCodeAt(n)],o=jd[r.charCodeAt(n+1)],a=jd[r.charCodeAt(n+2)],A=jd[r.charCodeAt(n+3)],c[i++]=s<<2|o>>4,c[i++]=(o&15)<<4|a>>2,c[i++]=(a&3)<<6|A&63;return l},bj=function(r){for(var e=r.length,t=[],n=0;n<e;n+=2)t.push(r[n+1]<<8|r[n]);return t},Ej=function(r){for(var e=r.length,t=[],n=0;n<e;n+=4)t.push(r[n+3]<<24|r[n+2]<<16|r[n+1]<<8|r[n]);return t},Ol=5,Dx=6+5,yC=2,Sj=Dx-Ol,uD=65536>>Ol,_j=1<<Ol,CC=_j-1,Rj=1024>>Ol,Mj=uD+Rj,Tj=Mj,Nj=32,Vj=Tj+Nj,Dj=65536>>Dx,kj=1<<Sj,Lj=kj-1,SS=function(r,e,t){return r.slice?r.slice(e,t):new Uint16Array(Array.prototype.slice.call(r,e,t))},Wj=function(r,e,t){return r.slice?r.slice(e,t):new Uint32Array(Array.prototype.slice.call(r,e,t))},Zj=function(r,e){var t=Qj(r),n=Array.isArray(t)?Ej(t):new Uint32Array(t),i=Array.isArray(t)?bj(t):new Uint16Array(t),s=24,o=SS(i,s/2,n[4]/2),a=n[5]===2?SS(i,(s+n[4])/2):Wj(n,Math.ceil((s+n[4])/4));return new Pj(n[0],n[1],n[2],n[3],o,a)},Pj=function(){function r(e,t,n,i,s,o){this.initialValue=e,this.errorValue=t,this.highStart=n,this.highValueIndex=i,this.index=s,this.data=o}return r.prototype.get=function(e){var t;if(e>=0){if(e<55296||e>56319&&e<=65535)return t=this.index[e>>Ol],t=(t<<yC)+(e&CC),this.data[t];if(e<=65535)return t=this.index[uD+(e-55296>>Ol)],t=(t<<yC)+(e&CC),this.data[t];if(e<this.highStart)return t=Vj-Dj+(e>>Dx),t=this.index[t],t+=e>>Ol&Lj,t=this.index[t],t=(t<<yC)+(e&CC),this.data[t];if(e<=1114111)return this.data[this.highValueIndex]}return this.errorValue},r}(),_S="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Jj=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var jg=0;jg<_S.length;jg++)Jj[_S.charCodeAt(jg)]=jg;var Gj=1,wC=2,FC=3,RS=4,MS=5,Oj=7,TS=8,IC=9,UC=10,NS=11,VS=12,DS=13,kS=14,xC=15,Hj=function(r){for(var e=[],t=0,n=r.length;t<n;){var i=r.charCodeAt(t++);if(i>=55296&&i<=56319&&t<n){var s=r.charCodeAt(t++);(s&64512)===56320?e.push(((i&1023)<<10)+(s&1023)+65536):(e.push(i),t--)}else e.push(i)}return e},zj=function(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];if(String.fromCodePoint)return String.fromCodePoint.apply(String,r);var t=r.length;if(!t)return"";for(var n=[],i=-1,s="";++i<t;){var o=r[i];o<=65535?n.push(o):(o-=65536,n.push((o>>10)+55296,o%1024+56320)),(i+1===t||n.length>16384)&&(s+=String.fromCharCode.apply(String,n),n.length=0)}return s},Xj=Zj(xj),Yi="",QC="",Yj=function(r){return Xj.get(r)},Kj=function(r,e,t){var n=t-2,i=e[n],s=e[t-1],o=e[t];if(s===wC&&o===FC)return Yi;if(s===wC||s===FC||s===RS||o===wC||o===FC||o===RS)return QC;if(s===TS&&[TS,IC,NS,VS].indexOf(o)!==-1||(s===NS||s===IC)&&(o===IC||o===UC)||(s===VS||s===UC)&&o===UC||o===DS||o===MS||o===Oj||s===Gj)return Yi;if(s===DS&&o===kS){for(;i===MS;)i=e[--n];if(i===kS)return Yi}if(s===xC&&o===xC){for(var a=0;i===xC;)a++,i=e[--n];if(a%2===0)return Yi}return QC},jj=function(r){var e=Hj(r),t=e.length,n=0,i=0,s=e.map(Yj);return{next:function(){if(n>=t)return{done:!0,value:null};for(var o=Yi;n<t&&(o=Kj(e,s,++n))===Yi;);if(o!==Yi||n===t){var a=zj.apply(null,e.slice(i,n));return i=n,{value:a,done:!1}}return{done:!0,value:null}}}},qj=function(r){for(var e=jj(r),t=[],n;!(n=e.next()).done;)n.value&&t.push(n.value.slice());return t},$j=function(r){var e=123;if(r.createRange){var t=r.createRange();if(t.getBoundingClientRect){var n=r.createElement("boundtest");n.style.height=e+"px",n.style.display="block",r.body.appendChild(n),t.selectNode(n);var i=t.getBoundingClientRect(),s=Math.round(i.height);if(r.body.removeChild(n),s===e)return!0}}return!1},e7=function(r){var e=r.createElement("boundtest");e.style.width="50px",e.style.display="block",e.style.fontSize="12px",e.style.letterSpacing="0px",e.style.wordSpacing="0px",r.body.appendChild(e);var t=r.createRange();e.innerHTML=typeof"".repeat=="function"?"&#128104;".repeat(10):"";var n=e.firstChild,i=hv(n.data).map(function(A){return Fn(A)}),s=0,o={},a=i.every(function(A,l){t.setStart(n,s),t.setEnd(n,s+A.length);var c=t.getBoundingClientRect();s+=A.length;var u=c.x>o.x||c.y>o.y;return o=c,l===0?!0:u});return r.body.removeChild(e),a},t7=function(){return typeof new Image().crossOrigin<"u"},n7=function(){return typeof new XMLHttpRequest().responseType=="string"},r7=function(r){var e=new Image,t=r.createElement("canvas"),n=t.getContext("2d");if(!n)return!1;e.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{n.drawImage(e,0,0),t.toDataURL()}catch{return!1}return!0},LS=function(r){return r[0]===0&&r[1]===255&&r[2]===0&&r[3]===255},i7=function(r){var e=r.createElement("canvas"),t=100;e.width=t,e.height=t;var n=e.getContext("2d");if(!n)return Promise.reject(!1);n.fillStyle="rgb(0, 255, 0)",n.fillRect(0,0,t,t);var i=new Image,s=e.toDataURL();i.src=s;var o=dI(t,t,0,0,i);return n.fillStyle="red",n.fillRect(0,0,t,t),WS(o).then(function(a){n.drawImage(a,0,0);var A=n.getImageData(0,0,t,t).data;n.fillStyle="red",n.fillRect(0,0,t,t);var l=r.createElement("div");return l.style.backgroundImage="url("+s+")",l.style.height=t+"px",LS(A)?WS(dI(t,t,0,0,l)):Promise.reject(!1)}).then(function(a){return n.drawImage(a,0,0),LS(n.getImageData(0,0,t,t).data)}).catch(function(){return!1})},dI=function(r,e,t,n,i){var s="http://www.w3.org/2000/svg",o=document.createElementNS(s,"svg"),a=document.createElementNS(s,"foreignObject");return o.setAttributeNS(null,"width",r.toString()),o.setAttributeNS(null,"height",e.toString()),a.setAttributeNS(null,"width","100%"),a.setAttributeNS(null,"height","100%"),a.setAttributeNS(null,"x",t.toString()),a.setAttributeNS(null,"y",n.toString()),a.setAttributeNS(null,"externalResourcesRequired","true"),o.appendChild(a),a.appendChild(i),o},WS=function(r){return new Promise(function(e,t){var n=new Image;n.onload=function(){return e(n)},n.onerror=t,n.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(r))})},yi={get SUPPORT_RANGE_BOUNDS(){var r=$j(document);return Object.defineProperty(yi,"SUPPORT_RANGE_BOUNDS",{value:r}),r},get SUPPORT_WORD_BREAKING(){var r=yi.SUPPORT_RANGE_BOUNDS&&e7(document);return Object.defineProperty(yi,"SUPPORT_WORD_BREAKING",{value:r}),r},get SUPPORT_SVG_DRAWING(){var r=r7(document);return Object.defineProperty(yi,"SUPPORT_SVG_DRAWING",{value:r}),r},get SUPPORT_FOREIGNOBJECT_DRAWING(){var r=typeof Array.from=="function"&&typeof window.fetch=="function"?i7(document):Promise.resolve(!1);return Object.defineProperty(yi,"SUPPORT_FOREIGNOBJECT_DRAWING",{value:r}),r},get SUPPORT_CORS_IMAGES(){var r=t7();return Object.defineProperty(yi,"SUPPORT_CORS_IMAGES",{value:r}),r},get SUPPORT_RESPONSE_TYPE(){var r=n7();return Object.defineProperty(yi,"SUPPORT_RESPONSE_TYPE",{value:r}),r},get SUPPORT_CORS_XHR(){var r="withCredentials"in new XMLHttpRequest;return Object.defineProperty(yi,"SUPPORT_CORS_XHR",{value:r}),r},get SUPPORT_NATIVE_TEXT_SEGMENTATION(){var r=!!(typeof Intl<"u"&&Intl.Segmenter);return Object.defineProperty(yi,"SUPPORT_NATIVE_TEXT_SEGMENTATION",{value:r}),r}},Ch=function(){function r(e,t){this.text=e,this.bounds=t}return r}(),s7=function(r,e,t,n){var i=A7(e,t),s=[],o=0;return i.forEach(function(a){if(t.textDecorationLine.length||a.trim().length>0)if(yi.SUPPORT_RANGE_BOUNDS){var A=ZS(n,o,a.length).getClientRects();if(A.length>1){var l=kx(a),c=0;l.forEach(function(f){s.push(new Ch(f,sc.fromDOMRectList(r,ZS(n,c+o,f.length).getClientRects()))),c+=f.length})}else s.push(new Ch(a,sc.fromDOMRectList(r,A)))}else{var u=n.splitText(a.length);s.push(new Ch(a,o7(r,n))),n=u}else yi.SUPPORT_RANGE_BOUNDS||(n=n.splitText(a.length));o+=a.length}),s},o7=function(r,e){var t=e.ownerDocument;if(t){var n=t.createElement("html2canvaswrapper");n.appendChild(e.cloneNode(!0));var i=e.parentNode;if(i){i.replaceChild(n,e);var s=Mx(r,n);return n.firstChild&&i.replaceChild(n.firstChild,n),s}}return sc.EMPTY},ZS=function(r,e,t){var n=r.ownerDocument;if(!n)throw new Error("Node has no owner document");var i=n.createRange();return i.setStart(r,e),i.setEnd(r,e+t),i},kx=function(r){if(yi.SUPPORT_NATIVE_TEXT_SEGMENTATION){var e=new Intl.Segmenter(void 0,{granularity:"grapheme"});return Array.from(e.segment(r)).map(function(t){return t.segment})}return qj(r)},a7=function(r,e){if(yi.SUPPORT_NATIVE_TEXT_SEGMENTATION){var t=new Intl.Segmenter(void 0,{granularity:"word"});return Array.from(t.segment(r)).map(function(n){return n.segment})}return c7(r,e)},A7=function(r,e){return e.letterSpacing!==0?kx(r):a7(r,e)},l7=[32,160,4961,65792,65793,4153,4241],c7=function(r,e){for(var t=P9(r,{lineBreak:e.lineBreak,wordBreak:e.overflowWrap==="break-word"?"break-word":e.wordBreak}),n=[],i,s=function(){if(i.value){var o=i.value.slice(),a=hv(o),A="";a.forEach(function(l){l7.indexOf(l)===-1?A+=Fn(l):(A.length&&n.push(A),n.push(Fn(l)),A="")}),A.length&&n.push(A)}};!(i=t.next()).done;)s();return n},u7=function(){function r(e,t,n){this.text=f7(t.data,n.textTransform),this.textBounds=s7(e,this.text,n,t)}return r}(),f7=function(r,e){switch(e){case 1:return r.toLowerCase();case 3:return r.replace(d7,h7);case 2:return r.toUpperCase();default:return r}},d7=/(^|\s|:|-|\(|\))([a-z])/g,h7=function(r,e,t){return r.length>0?e+t.toUpperCase():r},fD=function(r){$s(e,r);function e(t,n){var i=r.call(this,t,n)||this;return i.src=n.currentSrc||n.src,i.intrinsicWidth=n.naturalWidth,i.intrinsicHeight=n.naturalHeight,i.context.cache.addImage(i.src),i}return e}(Oo),dD=function(r){$s(e,r);function e(t,n){var i=r.call(this,t,n)||this;return i.canvas=n,i.intrinsicWidth=n.width,i.intrinsicHeight=n.height,i}return e}(Oo),hD=function(r){$s(e,r);function e(t,n){var i=r.call(this,t,n)||this,s=new XMLSerializer,o=Mx(t,n);return n.setAttribute("width",o.width+"px"),n.setAttribute("height",o.height+"px"),i.svg="data:image/svg+xml,"+encodeURIComponent(s.serializeToString(n)),i.intrinsicWidth=n.width.baseVal.value,i.intrinsicHeight=n.height.baseVal.value,i.context.cache.addImage(i.svg),i}return e}(Oo),pD=function(r){$s(e,r);function e(t,n){var i=r.call(this,t,n)||this;return i.value=n.value,i}return e}(Oo),hI=function(r){$s(e,r);function e(t,n){var i=r.call(this,t,n)||this;return i.start=n.start,i.reversed=typeof n.reversed=="boolean"&&n.reversed===!0,i}return e}(Oo),p7=[{type:15,flags:0,unit:"px",number:3}],g7=[{type:16,flags:0,number:50}],m7=function(r){return r.width>r.height?new sc(r.left+(r.width-r.height)/2,r.top,r.height,r.height):r.width<r.height?new sc(r.left,r.top+(r.height-r.width)/2,r.width,r.width):r},B7=function(r){var e=r.type===v7?new Array(r.value.length+1).join(""):r.value;return e.length===0?r.placeholder||"":e},j0="checkbox",q0="radio",v7="password",PS=707406591,Lx=function(r){$s(e,r);function e(t,n){var i=r.call(this,t,n)||this;switch(i.type=n.type.toLowerCase(),i.checked=n.checked,i.value=B7(n),(i.type===j0||i.type===q0)&&(i.styles.backgroundColor=3739148031,i.styles.borderTopColor=i.styles.borderRightColor=i.styles.borderBottomColor=i.styles.borderLeftColor=2779096575,i.styles.borderTopWidth=i.styles.borderRightWidth=i.styles.borderBottomWidth=i.styles.borderLeftWidth=1,i.styles.borderTopStyle=i.styles.borderRightStyle=i.styles.borderBottomStyle=i.styles.borderLeftStyle=1,i.styles.backgroundClip=[0],i.styles.backgroundOrigin=[0],i.bounds=m7(i.bounds)),i.type){case j0:i.styles.borderTopRightRadius=i.styles.borderTopLeftRadius=i.styles.borderBottomRightRadius=i.styles.borderBottomLeftRadius=p7;break;case q0:i.styles.borderTopRightRadius=i.styles.borderTopLeftRadius=i.styles.borderBottomRightRadius=i.styles.borderBottomLeftRadius=g7;break}return i}return e}(Oo),gD=function(r){$s(e,r);function e(t,n){var i=r.call(this,t,n)||this,s=n.options[n.selectedIndex||0];return i.value=s&&s.text||"",i}return e}(Oo),mD=function(r){$s(e,r);function e(t,n){var i=r.call(this,t,n)||this;return i.value=n.value,i}return e}(Oo),BD=function(r){$s(e,r);function e(t,n){var i=r.call(this,t,n)||this;i.src=n.src,i.width=parseInt(n.width,10)||0,i.height=parseInt(n.height,10)||0,i.backgroundColor=i.styles.backgroundColor;try{if(n.contentWindow&&n.contentWindow.document&&n.contentWindow.document.documentElement){i.tree=C7(t,n.contentWindow.document.documentElement);var s=n.contentWindow.document.documentElement?FS(t,getComputedStyle(n.contentWindow.document.documentElement).backgroundColor):np.TRANSPARENT,o=n.contentWindow.document.body?FS(t,getComputedStyle(n.contentWindow.document.body).backgroundColor):np.TRANSPARENT;i.backgroundColor=Gu(s)?Gu(o)?i.styles.backgroundColor:o:s}}catch{}return i}return e}(Oo),y7=["OL","UL","MENU"],zm=function(r,e,t,n){for(var i=e.firstChild,s=void 0;i;i=s)if(s=i.nextSibling,I7(i)&&i.data.trim().length>0)t.textNodes.push(new u7(r,i,t.styles));else if(yD(i))if(T7(i)&&i.assignedNodes)i.assignedNodes().forEach(function(a){return zm(r,a,t,n)});else{var o=vD(r,i);o.styles.isVisible()&&(w7(i,o,n)?o.flags|=4:F7(o.styles)&&(o.flags|=2),y7.indexOf(i.tagName)!==-1&&(o.flags|=8),t.elements.push(o),i.slot,i.shadowRoot?zm(r,i.shadowRoot,o,n):!wD(i)&&!CD(i)&&!FD(i)&&zm(r,i,o,n))}},vD=function(r,e){return R7(e)?new fD(r,e):_7(e)?new dD(r,e):CD(e)?new hD(r,e):Q7(e)?new pD(r,e):b7(e)?new hI(r,e):E7(e)?new Lx(r,e):FD(e)?new gD(r,e):wD(e)?new mD(r,e):M7(e)?new BD(r,e):new Oo(r,e)},C7=function(r,e){var t=vD(r,e);return t.flags|=4,zm(r,e,t,t),t},w7=function(r,e,t){return e.styles.isPositionedWithZIndex()||e.styles.opacity<1||e.styles.isTransformed()||S7(r)&&t.styles.isTransparent()},F7=function(r){return r.isPositioned()||r.isFloating()},I7=function(r){return r.nodeType===Node.TEXT_NODE},yD=function(r){return r.nodeType===Node.ELEMENT_NODE},U7=function(r){return yD(r)&&typeof r.style<"u"&&!x7(r)},x7=function(r){return typeof r.className=="object"},Q7=function(r){return r.tagName==="LI"},b7=function(r){return r.tagName==="OL"},E7=function(r){return r.tagName==="INPUT"},CD=function(r){return r.tagName==="svg"},S7=function(r){return r.tagName==="BODY"},_7=function(r){return r.tagName==="CANVAS"},R7=function(r){return r.tagName==="IMG"},M7=function(r){return r.tagName==="IFRAME"},wD=function(r){return r.tagName==="TEXTAREA"},FD=function(r){return r.tagName==="SELECT"},T7=function(r){return r.tagName==="SLOT"},JS={integers:[1e3,900,500,400,100,90,50,40,10,9,5,4,1],values:["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"]},GS={integers:[9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},N7={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,400,300,200,100,90,80,70,60,50,40,30,20,19,18,17,16,15,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},V7={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},Zc=function(r,e,t,n,i,s){return r<e||r>t?Wx(r,i,s.length>0):n.integers.reduce(function(o,a,A){for(;r>=a;)r-=a,o+=n.values[A];return o},"")+s},ID=function(r,e,t,n){var i="";do t||r--,i=n(r)+i,r/=e;while(r*e>=e);return i},wn=function(r,e,t,n,i){var s=t-e+1;return(r<0?"-":"")+(ID(Math.abs(r),s,n,function(o){return Fn(Math.floor(o%s)+e)})+i)},pl=function(r,e,t){t===void 0&&(t=". ");var n=e.length;return ID(Math.abs(r),n,!1,function(i){return e[Math.floor(i%n)]})+t},ou=1<<0,aA=1<<1,AA=1<<2,qd=1<<3,ra=function(r,e,t,n,i,s){if(r<-9999||r>9999)return Wx(r,4,i.length>0);var o=Math.abs(r),a=i;if(o===0)return e[0]+a;for(var A=0;o>0&&A<=4;A++){var l=o%10;l===0&&Xn(s,ou)&&a!==""?a=e[l]+a:l>1||l===1&&A===0||l===1&&A===1&&Xn(s,aA)||l===1&&A===1&&Xn(s,AA)&&r>100||l===1&&A>1&&Xn(s,qd)?a=e[l]+(A>0?t[A-1]:"")+a:l===1&&A>0&&(a=t[A-1]+a),o=Math.floor(o/10)}return(r<0?n:"")+a},OS="",HS="",zS="",bC="",Wx=function(r,e,t){var n=t?". ":"",i=t?"":"",s=t?", ":"",o=t?" ":"";switch(e){case 0:return""+o;case 1:return""+o;case 2:return""+o;case 5:var a=wn(r,48,57,!0,n);return a.length<4?"0"+a:a;case 4:return pl(r,"",i);case 6:return Zc(r,1,3999,JS,3,n).toLowerCase();case 7:return Zc(r,1,3999,JS,3,n);case 8:return wn(r,945,969,!1,n);case 9:return wn(r,97,122,!1,n);case 10:return wn(r,65,90,!1,n);case 11:return wn(r,1632,1641,!0,n);case 12:case 49:return Zc(r,1,9999,GS,3,n);case 35:return Zc(r,1,9999,GS,3,n).toLowerCase();case 13:return wn(r,2534,2543,!0,n);case 14:case 30:return wn(r,6112,6121,!0,n);case 15:return pl(r,"",i);case 16:return pl(r,"",i);case 17:case 48:return ra(r,"",OS,"",i,aA|AA|qd);case 47:return ra(r,"",HS,"",i,ou|aA|AA|qd);case 42:return ra(r,"",OS,"",i,aA|AA|qd);case 41:return ra(r,"",HS,"",i,ou|aA|AA|qd);case 26:return ra(r,"","",zS,i,0);case 25:return ra(r,"","",zS,i,ou|aA|AA);case 31:return ra(r,"","",bC,s,ou|aA|AA);case 33:return ra(r,"","",bC,s,0);case 32:return ra(r,"","",bC,s,ou|aA|AA);case 18:return wn(r,2406,2415,!0,n);case 20:return Zc(r,1,19999,V7,3,n);case 21:return wn(r,2790,2799,!0,n);case 22:return wn(r,2662,2671,!0,n);case 22:return Zc(r,1,10999,N7,3,n);case 23:return pl(r,"");case 24:return pl(r,"");case 27:return wn(r,3302,3311,!0,n);case 28:return pl(r,"",i);case 29:return pl(r,"",i);case 34:return wn(r,3792,3801,!0,n);case 37:return wn(r,6160,6169,!0,n);case 38:return wn(r,4160,4169,!0,n);case 39:return wn(r,2918,2927,!0,n);case 40:return wn(r,1776,1785,!0,n);case 43:return wn(r,3046,3055,!0,n);case 44:return wn(r,3174,3183,!0,n);case 45:return wn(r,3664,3673,!0,n);case 46:return wn(r,3872,3881,!0,n);case 3:default:return wn(r,48,57,!0,n)}},XS;(function(r){r[r.BEFORE=0]="BEFORE",r[r.AFTER=1]="AFTER"})(XS||(XS={}));var D7=function(){function r(){}return r.getOrigin=function(e){var t=r._link;return t?(t.href=e,t.href=t.href,t.protocol+t.hostname+t.port):"about:blank"},r.isSameOrigin=function(e){return r.getOrigin(e)===r._origin},r.setContext=function(e){r._link=e.document.createElement("a"),r._origin=r.getOrigin(e.location.href)},r._origin="about:blank",r}(),ke=function(){function r(e,t){this.type=0,this.x=e,this.y=t}return r.prototype.add=function(e,t){return new r(this.x+e,this.y+t)},r}(),Pc=function(r,e,t){return new ke(r.x+(e.x-r.x)*t,r.y+(e.y-r.y)*t)},qg=function(){function r(e,t,n,i){this.type=1,this.start=e,this.startControl=t,this.endControl=n,this.end=i}return r.prototype.subdivide=function(e,t){var n=Pc(this.start,this.startControl,e),i=Pc(this.startControl,this.endControl,e),s=Pc(this.endControl,this.end,e),o=Pc(n,i,e),a=Pc(i,s,e),A=Pc(o,a,e);return t?new r(this.start,n,o,A):new r(A,a,s,this.end)},r.prototype.add=function(e,t){return new r(this.start.add(e,t),this.startControl.add(e,t),this.endControl.add(e,t),this.end.add(e,t))},r.prototype.reverse=function(){return new r(this.end,this.endControl,this.startControl,this.start)},r}(),ts=function(r){return r.type===1},k7=function(){function r(e){var t=e.styles,n=e.bounds,i=Kd(t.borderTopLeftRadius,n.width,n.height),s=i[0],o=i[1],a=Kd(t.borderTopRightRadius,n.width,n.height),A=a[0],l=a[1],c=Kd(t.borderBottomRightRadius,n.width,n.height),u=c[0],f=c[1],d=Kd(t.borderBottomLeftRadius,n.width,n.height),p=d[0],h=d[1],m=[];m.push((s+A)/n.width),m.push((p+u)/n.width),m.push((o+h)/n.height),m.push((l+f)/n.height);var g=Math.max.apply(Math,m);g>1&&(s/=g,o/=g,A/=g,l/=g,u/=g,f/=g,p/=g,h/=g);var B=n.width-A,v=n.height-f,w=n.width-u,C=n.height-h,I=t.borderTopWidth,E=t.borderRightWidth,U=t.borderBottomWidth,S=t.borderLeftWidth,V=Kt(t.paddingTop,e.bounds.width),J=Kt(t.paddingRight,e.bounds.width),z=Kt(t.paddingBottom,e.bounds.width),R=Kt(t.paddingLeft,e.bounds.width);this.topLeftBorderDoubleOuterBox=s>0||o>0?nn(n.left+S/3,n.top+I/3,s-S/3,o-I/3,Nt.TOP_LEFT):new ke(n.left+S/3,n.top+I/3),this.topRightBorderDoubleOuterBox=s>0||o>0?nn(n.left+B,n.top+I/3,A-E/3,l-I/3,Nt.TOP_RIGHT):new ke(n.left+n.width-E/3,n.top+I/3),this.bottomRightBorderDoubleOuterBox=u>0||f>0?nn(n.left+w,n.top+v,u-E/3,f-U/3,Nt.BOTTOM_RIGHT):new ke(n.left+n.width-E/3,n.top+n.height-U/3),this.bottomLeftBorderDoubleOuterBox=p>0||h>0?nn(n.left+S/3,n.top+C,p-S/3,h-U/3,Nt.BOTTOM_LEFT):new ke(n.left+S/3,n.top+n.height-U/3),this.topLeftBorderDoubleInnerBox=s>0||o>0?nn(n.left+S*2/3,n.top+I*2/3,s-S*2/3,o-I*2/3,Nt.TOP_LEFT):new ke(n.left+S*2/3,n.top+I*2/3),this.topRightBorderDoubleInnerBox=s>0||o>0?nn(n.left+B,n.top+I*2/3,A-E*2/3,l-I*2/3,Nt.TOP_RIGHT):new ke(n.left+n.width-E*2/3,n.top+I*2/3),this.bottomRightBorderDoubleInnerBox=u>0||f>0?nn(n.left+w,n.top+v,u-E*2/3,f-U*2/3,Nt.BOTTOM_RIGHT):new ke(n.left+n.width-E*2/3,n.top+n.height-U*2/3),this.bottomLeftBorderDoubleInnerBox=p>0||h>0?nn(n.left+S*2/3,n.top+C,p-S*2/3,h-U*2/3,Nt.BOTTOM_LEFT):new ke(n.left+S*2/3,n.top+n.height-U*2/3),this.topLeftBorderStroke=s>0||o>0?nn(n.left+S/2,n.top+I/2,s-S/2,o-I/2,Nt.TOP_LEFT):new ke(n.left+S/2,n.top+I/2),this.topRightBorderStroke=s>0||o>0?nn(n.left+B,n.top+I/2,A-E/2,l-I/2,Nt.TOP_RIGHT):new ke(n.left+n.width-E/2,n.top+I/2),this.bottomRightBorderStroke=u>0||f>0?nn(n.left+w,n.top+v,u-E/2,f-U/2,Nt.BOTTOM_RIGHT):new ke(n.left+n.width-E/2,n.top+n.height-U/2),this.bottomLeftBorderStroke=p>0||h>0?nn(n.left+S/2,n.top+C,p-S/2,h-U/2,Nt.BOTTOM_LEFT):new ke(n.left+S/2,n.top+n.height-U/2),this.topLeftBorderBox=s>0||o>0?nn(n.left,n.top,s,o,Nt.TOP_LEFT):new ke(n.left,n.top),this.topRightBorderBox=A>0||l>0?nn(n.left+B,n.top,A,l,Nt.TOP_RIGHT):new ke(n.left+n.width,n.top),this.bottomRightBorderBox=u>0||f>0?nn(n.left+w,n.top+v,u,f,Nt.BOTTOM_RIGHT):new ke(n.left+n.width,n.top+n.height),this.bottomLeftBorderBox=p>0||h>0?nn(n.left,n.top+C,p,h,Nt.BOTTOM_LEFT):new ke(n.left,n.top+n.height),this.topLeftPaddingBox=s>0||o>0?nn(n.left+S,n.top+I,Math.max(0,s-S),Math.max(0,o-I),Nt.TOP_LEFT):new ke(n.left+S,n.top+I),this.topRightPaddingBox=A>0||l>0?nn(n.left+Math.min(B,n.width-E),n.top+I,B>n.width+E?0:Math.max(0,A-E),Math.max(0,l-I),Nt.TOP_RIGHT):new ke(n.left+n.width-E,n.top+I),this.bottomRightPaddingBox=u>0||f>0?nn(n.left+Math.min(w,n.width-S),n.top+Math.min(v,n.height-U),Math.max(0,u-E),Math.max(0,f-U),Nt.BOTTOM_RIGHT):new ke(n.left+n.width-E,n.top+n.height-U),this.bottomLeftPaddingBox=p>0||h>0?nn(n.left+S,n.top+Math.min(C,n.height-U),Math.max(0,p-S),Math.max(0,h-U),Nt.BOTTOM_LEFT):new ke(n.left+S,n.top+n.height-U),this.topLeftContentBox=s>0||o>0?nn(n.left+S+R,n.top+I+V,Math.max(0,s-(S+R)),Math.max(0,o-(I+V)),Nt.TOP_LEFT):new ke(n.left+S+R,n.top+I+V),this.topRightContentBox=A>0||l>0?nn(n.left+Math.min(B,n.width+S+R),n.top+I+V,B>n.width+S+R?0:A-S+R,l-(I+V),Nt.TOP_RIGHT):new ke(n.left+n.width-(E+J),n.top+I+V),this.bottomRightContentBox=u>0||f>0?nn(n.left+Math.min(w,n.width-(S+R)),n.top+Math.min(v,n.height+I+V),Math.max(0,u-(E+J)),f-(U+z),Nt.BOTTOM_RIGHT):new ke(n.left+n.width-(E+J),n.top+n.height-(U+z)),this.bottomLeftContentBox=p>0||h>0?nn(n.left+S+R,n.top+C,Math.max(0,p-(S+R)),h-(U+z),Nt.BOTTOM_LEFT):new ke(n.left+S+R,n.top+n.height-(U+z))}return r}(),Nt;(function(r){r[r.TOP_LEFT=0]="TOP_LEFT",r[r.TOP_RIGHT=1]="TOP_RIGHT",r[r.BOTTOM_RIGHT=2]="BOTTOM_RIGHT",r[r.BOTTOM_LEFT=3]="BOTTOM_LEFT"})(Nt||(Nt={}));var nn=function(r,e,t,n,i){var s=4*((Math.sqrt(2)-1)/3),o=t*s,a=n*s,A=r+t,l=e+n;switch(i){case Nt.TOP_LEFT:return new qg(new ke(r,l),new ke(r,l-a),new ke(A-o,e),new ke(A,e));case Nt.TOP_RIGHT:return new qg(new ke(r,e),new ke(r+o,e),new ke(A,l-a),new ke(A,l));case Nt.BOTTOM_RIGHT:return new qg(new ke(A,e),new ke(A,e+a),new ke(r+o,l),new ke(r,l));case Nt.BOTTOM_LEFT:default:return new qg(new ke(A,l),new ke(A-o,l),new ke(r,e+a),new ke(r,e))}},$0=function(r){return[r.topLeftBorderBox,r.topRightBorderBox,r.bottomRightBorderBox,r.bottomLeftBorderBox]},L7=function(r){return[r.topLeftContentBox,r.topRightContentBox,r.bottomRightContentBox,r.bottomLeftContentBox]},eB=function(r){return[r.topLeftPaddingBox,r.topRightPaddingBox,r.bottomRightPaddingBox,r.bottomLeftPaddingBox]},W7=function(){function r(e,t,n){this.offsetX=e,this.offsetY=t,this.matrix=n,this.type=0,this.target=6}return r}(),$g=function(){function r(e,t){this.path=e,this.target=t,this.type=1}return r}(),Z7=function(){function r(e){this.opacity=e,this.type=2,this.target=6}return r}(),P7=function(r){return r.type===0},UD=function(r){return r.type===1},J7=function(r){return r.type===2},YS=function(r,e){return r.length===e.length?r.some(function(t,n){return t===e[n]}):!1},G7=function(r,e,t,n,i){return r.map(function(s,o){switch(o){case 0:return s.add(e,t);case 1:return s.add(e+n,t);case 2:return s.add(e+n,t+i);case 3:return s.add(e,t+i)}return s})},xD=function(){function r(e){this.element=e,this.inlineLevel=[],this.nonInlineLevel=[],this.negativeZIndex=[],this.zeroOrAutoZIndexOrTransformedOrOpacity=[],this.positiveZIndex=[],this.nonPositionedFloats=[],this.nonPositionedInlineLevel=[]}return r}(),QD=function(){function r(e,t){if(this.container=e,this.parent=t,this.effects=[],this.curves=new k7(this.container),this.container.styles.opacity<1&&this.effects.push(new Z7(this.container.styles.opacity)),this.container.styles.transform!==null){var n=this.container.bounds.left+this.container.styles.transformOrigin[0].number,i=this.container.bounds.top+this.container.styles.transformOrigin[1].number,s=this.container.styles.transform;this.effects.push(new W7(n,i,s))}if(this.container.styles.overflowX!==0){var o=$0(this.curves),a=eB(this.curves);YS(o,a)?this.effects.push(new $g(o,6)):(this.effects.push(new $g(o,2)),this.effects.push(new $g(a,4)))}}return r.prototype.getEffects=function(e){for(var t=[2,3].indexOf(this.container.styles.position)===-1,n=this.parent,i=this.effects.slice(0);n;){var s=n.effects.filter(function(A){return!UD(A)});if(t||n.container.styles.position!==0||!n.parent){if(i.unshift.apply(i,s),t=[2,3].indexOf(n.container.styles.position)===-1,n.container.styles.overflowX!==0){var o=$0(n.curves),a=eB(n.curves);YS(o,a)||i.unshift(new $g(a,6))}}else i.unshift.apply(i,s);n=n.parent}return i.filter(function(A){return Xn(A.target,e)})},r}(),pI=function(r,e,t,n){r.container.elements.forEach(function(i){var s=Xn(i.flags,4),o=Xn(i.flags,2),a=new QD(i,r);Xn(i.styles.display,2048)&&n.push(a);var A=Xn(i.flags,8)?[]:n;if(s||o){var l=s||i.styles.isPositioned()?t:e,c=new xD(a);if(i.styles.isPositioned()||i.styles.opacity<1||i.styles.isTransformed()){var u=i.styles.zIndex.order;if(u<0){var f=0;l.negativeZIndex.some(function(p,h){return u>p.element.container.styles.zIndex.order?(f=h,!1):f>0}),l.negativeZIndex.splice(f,0,c)}else if(u>0){var d=0;l.positiveZIndex.some(function(p,h){return u>=p.element.container.styles.zIndex.order?(d=h+1,!1):d>0}),l.positiveZIndex.splice(d,0,c)}else l.zeroOrAutoZIndexOrTransformedOrOpacity.push(c)}else i.styles.isFloating()?l.nonPositionedFloats.push(c):l.nonPositionedInlineLevel.push(c);pI(a,c,s?c:t,A)}else i.styles.isInlineLevel()?e.inlineLevel.push(a):e.nonInlineLevel.push(a),pI(a,e,t,A);Xn(i.flags,8)&&bD(i,A)})},bD=function(r,e){for(var t=r instanceof hI?r.start:1,n=r instanceof hI?r.reversed:!1,i=0;i<e.length;i++){var s=e[i];s.container instanceof pD&&typeof s.container.value=="number"&&s.container.value!==0&&(t=s.container.value),s.listValue=Wx(t,s.container.styles.listStyleType,!0),t+=n?-1:1}},O7=function(r){var e=new QD(r,null),t=new xD(e),n=[];return pI(e,t,t,n),bD(e.container,n),t},KS=function(r,e){switch(e){case 0:return ss(r.topLeftBorderBox,r.topLeftPaddingBox,r.topRightBorderBox,r.topRightPaddingBox);case 1:return ss(r.topRightBorderBox,r.topRightPaddingBox,r.bottomRightBorderBox,r.bottomRightPaddingBox);case 2:return ss(r.bottomRightBorderBox,r.bottomRightPaddingBox,r.bottomLeftBorderBox,r.bottomLeftPaddingBox);case 3:default:return ss(r.bottomLeftBorderBox,r.bottomLeftPaddingBox,r.topLeftBorderBox,r.topLeftPaddingBox)}},H7=function(r,e){switch(e){case 0:return ss(r.topLeftBorderBox,r.topLeftBorderDoubleOuterBox,r.topRightBorderBox,r.topRightBorderDoubleOuterBox);case 1:return ss(r.topRightBorderBox,r.topRightBorderDoubleOuterBox,r.bottomRightBorderBox,r.bottomRightBorderDoubleOuterBox);case 2:return ss(r.bottomRightBorderBox,r.bottomRightBorderDoubleOuterBox,r.bottomLeftBorderBox,r.bottomLeftBorderDoubleOuterBox);case 3:default:return ss(r.bottomLeftBorderBox,r.bottomLeftBorderDoubleOuterBox,r.topLeftBorderBox,r.topLeftBorderDoubleOuterBox)}},z7=function(r,e){switch(e){case 0:return ss(r.topLeftBorderDoubleInnerBox,r.topLeftPaddingBox,r.topRightBorderDoubleInnerBox,r.topRightPaddingBox);case 1:return ss(r.topRightBorderDoubleInnerBox,r.topRightPaddingBox,r.bottomRightBorderDoubleInnerBox,r.bottomRightPaddingBox);case 2:return ss(r.bottomRightBorderDoubleInnerBox,r.bottomRightPaddingBox,r.bottomLeftBorderDoubleInnerBox,r.bottomLeftPaddingBox);case 3:default:return ss(r.bottomLeftBorderDoubleInnerBox,r.bottomLeftPaddingBox,r.topLeftBorderDoubleInnerBox,r.topLeftPaddingBox)}},X7=function(r,e){switch(e){case 0:return em(r.topLeftBorderStroke,r.topRightBorderStroke);case 1:return em(r.topRightBorderStroke,r.bottomRightBorderStroke);case 2:return em(r.bottomRightBorderStroke,r.bottomLeftBorderStroke);case 3:default:return em(r.bottomLeftBorderStroke,r.topLeftBorderStroke)}},em=function(r,e){var t=[];return ts(r)?t.push(r.subdivide(.5,!1)):t.push(r),ts(e)?t.push(e.subdivide(.5,!0)):t.push(e),t},ss=function(r,e,t,n){var i=[];return ts(r)?i.push(r.subdivide(.5,!1)):i.push(r),ts(t)?i.push(t.subdivide(.5,!0)):i.push(t),ts(n)?i.push(n.subdivide(.5,!0).reverse()):i.push(n),ts(e)?i.push(e.subdivide(.5,!1).reverse()):i.push(e),i},ED=function(r){var e=r.bounds,t=r.styles;return e.add(t.borderLeftWidth,t.borderTopWidth,-(t.borderRightWidth+t.borderLeftWidth),-(t.borderTopWidth+t.borderBottomWidth))},tB=function(r){var e=r.styles,t=r.bounds,n=Kt(e.paddingLeft,t.width),i=Kt(e.paddingRight,t.width),s=Kt(e.paddingTop,t.width),o=Kt(e.paddingBottom,t.width);return t.add(n+e.borderLeftWidth,s+e.borderTopWidth,-(e.borderRightWidth+e.borderLeftWidth+n+i),-(e.borderTopWidth+e.borderBottomWidth+s+o))},Y7=function(r,e){return r===0?e.bounds:r===2?tB(e):ED(e)},K7=function(r,e){return r===0?e.bounds:r===2?tB(e):ED(e)},EC=function(r,e,t){var n=Y7(au(r.styles.backgroundOrigin,e),r),i=K7(au(r.styles.backgroundClip,e),r),s=j7(au(r.styles.backgroundSize,e),t,n),o=s[0],a=s[1],A=Kd(au(r.styles.backgroundPosition,e),n.width-o,n.height-a),l=q7(au(r.styles.backgroundRepeat,e),A,s,n,i),c=Math.round(n.left+A[0]),u=Math.round(n.top+A[1]);return[l,c,u,o,a]},Jc=function(r){return Cn(r)&&r.value===Ou.AUTO},tm=function(r){return typeof r=="number"},j7=function(r,e,t){var n=e[0],i=e[1],s=e[2],o=r[0],a=r[1];if(!o)return[0,0];if(Vn(o)&&a&&Vn(a))return[Kt(o,t.width),Kt(a,t.height)];var A=tm(s);if(Cn(o)&&(o.value===Ou.CONTAIN||o.value===Ou.COVER)){if(tm(s)){var l=t.width/t.height;return l<s!=(o.value===Ou.COVER)?[t.width,t.width/s]:[t.height*s,t.height]}return[t.width,t.height]}var c=tm(n),u=tm(i),f=c||u;if(Jc(o)&&(!a||Jc(a))){if(c&&u)return[n,i];if(!A&&!f)return[t.width,t.height];if(f&&A){var d=c?n:i*s,p=u?i:n/s;return[d,p]}var h=c?n:t.width,m=u?i:t.height;return[h,m]}if(A){var g=0,B=0;return Vn(o)?g=Kt(o,t.width):Vn(a)&&(B=Kt(a,t.height)),Jc(o)?g=B*s:(!a||Jc(a))&&(B=g/s),[g,B]}var v=null,w=null;if(Vn(o)?v=Kt(o,t.width):a&&Vn(a)&&(w=Kt(a,t.height)),v!==null&&(!a||Jc(a))&&(w=c&&u?v/n*i:t.height),w!==null&&Jc(o)&&(v=c&&u?w/i*n:t.width),v!==null&&w!==null)return[v,w];throw new Error("Unable to calculate background-size for element")},au=function(r,e){var t=r[e];return typeof t>"u"?r[0]:t},q7=function(r,e,t,n,i){var s=e[0],o=e[1],a=t[0],A=t[1];switch(r){case 2:return[new ke(Math.round(n.left),Math.round(n.top+o)),new ke(Math.round(n.left+n.width),Math.round(n.top+o)),new ke(Math.round(n.left+n.width),Math.round(A+n.top+o)),new ke(Math.round(n.left),Math.round(A+n.top+o))];case 3:return[new ke(Math.round(n.left+s),Math.round(n.top)),new ke(Math.round(n.left+s+a),Math.round(n.top)),new ke(Math.round(n.left+s+a),Math.round(n.height+n.top)),new ke(Math.round(n.left+s),Math.round(n.height+n.top))];case 1:return[new ke(Math.round(n.left+s),Math.round(n.top+o)),new ke(Math.round(n.left+s+a),Math.round(n.top+o)),new ke(Math.round(n.left+s+a),Math.round(n.top+o+A)),new ke(Math.round(n.left+s),Math.round(n.top+o+A))];default:return[new ke(Math.round(i.left),Math.round(i.top)),new ke(Math.round(i.left+i.width),Math.round(i.top)),new ke(Math.round(i.left+i.width),Math.round(i.height+i.top)),new ke(Math.round(i.left),Math.round(i.height+i.top))]}},$7="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",jS="Hidden Text",eq=function(){function r(e){this._data={},this._document=e}return r.prototype.parseMetrics=function(e,t){var n=this._document.createElement("div"),i=this._document.createElement("img"),s=this._document.createElement("span"),o=this._document.body;n.style.visibility="hidden",n.style.fontFamily=e,n.style.fontSize=t,n.style.margin="0",n.style.padding="0",n.style.whiteSpace="nowrap",o.appendChild(n),i.src=$7,i.width=1,i.height=1,i.style.margin="0",i.style.padding="0",i.style.verticalAlign="baseline",s.style.fontFamily=e,s.style.fontSize=t,s.style.margin="0",s.style.padding="0",s.appendChild(this._document.createTextNode(jS)),n.appendChild(s),n.appendChild(i);var a=i.offsetTop-s.offsetTop+2;n.removeChild(s),n.appendChild(this._document.createTextNode(jS)),n.style.lineHeight="normal",i.style.verticalAlign="super";var A=i.offsetTop-n.offsetTop+2;return o.removeChild(n),{baseline:a,middle:A}},r.prototype.getMetrics=function(e,t){var n=e+" "+t;return typeof this._data[n]>"u"&&(this._data[n]=this.parseMetrics(e,t)),this._data[n]},r}(),SD=function(){function r(e,t){this.context=e,this.options=t}return r}(),tq=1e4;(function(r){$s(e,r);function e(t,n){var i=r.call(this,t,n)||this;return i._activeEffects=[],i.canvas=n.canvas?n.canvas:document.createElement("canvas"),i.ctx=i.canvas.getContext("2d"),n.canvas||(i.canvas.width=Math.floor(n.width*n.scale),i.canvas.height=Math.floor(n.height*n.scale),i.canvas.style.width=n.width+"px",i.canvas.style.height=n.height+"px"),i.fontMetrics=new eq(document),i.ctx.scale(i.options.scale,i.options.scale),i.ctx.translate(-n.x,-n.y),i.ctx.textBaseline="bottom",i._activeEffects=[],i.context.logger.debug("Canvas renderer initialized ("+n.width+"x"+n.height+") with scale "+n.scale),i}return e.prototype.applyEffects=function(t){for(var n=this;this._activeEffects.length;)this.popEffect();t.forEach(function(i){return n.applyEffect(i)})},e.prototype.applyEffect=function(t){this.ctx.save(),J7(t)&&(this.ctx.globalAlpha=t.opacity),P7(t)&&(this.ctx.translate(t.offsetX,t.offsetY),this.ctx.transform(t.matrix[0],t.matrix[1],t.matrix[2],t.matrix[3],t.matrix[4],t.matrix[5]),this.ctx.translate(-t.offsetX,-t.offsetY)),UD(t)&&(this.path(t.path),this.ctx.clip()),this._activeEffects.push(t)},e.prototype.popEffect=function(){this._activeEffects.pop(),this.ctx.restore()},e.prototype.renderStack=function(t){return Hi(this,void 0,void 0,function(){var n;return mi(this,function(i){switch(i.label){case 0:return n=t.element.container.styles,n.isVisible()?[4,this.renderStackContent(t)]:[3,2];case 1:i.sent(),i.label=2;case 2:return[2]}})})},e.prototype.renderNode=function(t){return Hi(this,void 0,void 0,function(){return mi(this,function(n){switch(n.label){case 0:if(Xn(t.container.flags,16))debugger;return t.container.styles.isVisible()?[4,this.renderNodeBackgroundAndBorders(t)]:[3,3];case 1:return n.sent(),[4,this.renderNodeContent(t)];case 2:n.sent(),n.label=3;case 3:return[2]}})})},e.prototype.renderTextWithLetterSpacing=function(t,n,i){var s=this;if(n===0)this.ctx.fillText(t.text,t.bounds.left,t.bounds.top+i);else{var o=kx(t.text);o.reduce(function(a,A){return s.ctx.fillText(A,a,t.bounds.top+i),a+s.ctx.measureText(A).width},t.bounds.left)}},e.prototype.createFontStyle=function(t){var n=t.fontVariant.filter(function(o){return o==="normal"||o==="small-caps"}).join(""),i=oq(t.fontFamily).join(", "),s=Dp(t.fontSize)?""+t.fontSize.number+t.fontSize.unit:t.fontSize.number+"px";return[[t.fontStyle,n,t.fontWeight,s,i].join(" "),i,s]},e.prototype.renderTextNode=function(t,n){return Hi(this,void 0,void 0,function(){var i,s,o,a,A,l,c,u,f=this;return mi(this,function(d){return i=this.createFontStyle(n),s=i[0],o=i[1],a=i[2],this.ctx.font=s,this.ctx.direction=n.direction===1?"rtl":"ltr",this.ctx.textAlign="left",this.ctx.textBaseline="alphabetic",A=this.fontMetrics.getMetrics(o,a),l=A.baseline,c=A.middle,u=n.paintOrder,t.textBounds.forEach(function(p){u.forEach(function(h){switch(h){case 0:f.ctx.fillStyle=er(n.color),f.renderTextWithLetterSpacing(p,n.letterSpacing,l);var m=n.textShadow;m.length&&p.text.trim().length&&(m.slice(0).reverse().forEach(function(g){f.ctx.shadowColor=er(g.color),f.ctx.shadowOffsetX=g.offsetX.number*f.options.scale,f.ctx.shadowOffsetY=g.offsetY.number*f.options.scale,f.ctx.shadowBlur=g.blur.number,f.renderTextWithLetterSpacing(p,n.letterSpacing,l)}),f.ctx.shadowColor="",f.ctx.shadowOffsetX=0,f.ctx.shadowOffsetY=0,f.ctx.shadowBlur=0),n.textDecorationLine.length&&(f.ctx.fillStyle=er(n.textDecorationColor||n.color),n.textDecorationLine.forEach(function(g){switch(g){case 1:f.ctx.fillRect(p.bounds.left,Math.round(p.bounds.top+l),p.bounds.width,1);break;case 2:f.ctx.fillRect(p.bounds.left,Math.round(p.bounds.top),p.bounds.width,1);break;case 3:f.ctx.fillRect(p.bounds.left,Math.ceil(p.bounds.top+c),p.bounds.width,1);break}}));break;case 1:n.webkitTextStrokeWidth&&p.text.trim().length&&(f.ctx.strokeStyle=er(n.webkitTextStrokeColor),f.ctx.lineWidth=n.webkitTextStrokeWidth,f.ctx.lineJoin=window.chrome?"miter":"round",f.ctx.strokeText(p.text,p.bounds.left,p.bounds.top+l)),f.ctx.strokeStyle="",f.ctx.lineWidth=0,f.ctx.lineJoin="miter";break}})}),[2]})})},e.prototype.renderReplacedElement=function(t,n,i){if(i&&t.intrinsicWidth>0&&t.intrinsicHeight>0){var s=tB(t),o=eB(n);this.path(o),this.ctx.save(),this.ctx.clip(),this.ctx.drawImage(i,0,0,t.intrinsicWidth,t.intrinsicHeight,s.left,s.top,s.width,s.height),this.ctx.restore()}},e.prototype.renderNodeContent=function(t){return Hi(this,void 0,void 0,function(){var n,i,s,o,a,A,B,B,l,c,u,f,w,d,p,C,h,m,g,B,v,w,C;return mi(this,function(I){switch(I.label){case 0:this.applyEffects(t.getEffects(4)),n=t.container,i=t.curves,s=n.styles,o=0,a=n.textNodes,I.label=1;case 1:return o<a.length?(A=a[o],[4,this.renderTextNode(A,s)]):[3,4];case 2:I.sent(),I.label=3;case 3:return o++,[3,1];case 4:if(!(n instanceof fD))return[3,8];I.label=5;case 5:return I.trys.push([5,7,,8]),[4,this.context.cache.match(n.src)];case 6:return B=I.sent(),this.renderReplacedElement(n,i,B),[3,8];case 7:return I.sent(),this.context.logger.error("Error loading image "+n.src),[3,8];case 8:if(n instanceof dD&&this.renderReplacedElement(n,i,n.canvas),!(n instanceof hD))return[3,12];I.label=9;case 9:return I.trys.push([9,11,,12]),[4,this.context.cache.match(n.svg)];case 10:return B=I.sent(),this.renderReplacedElement(n,i,B),[3,12];case 11:return I.sent(),this.context.logger.error("Error loading svg "+n.svg.substring(0,255)),[3,12];case 12:return n instanceof BD&&n.tree?(l=new e(this.context,{scale:this.options.scale,backgroundColor:n.backgroundColor,x:0,y:0,width:n.width,height:n.height}),[4,l.render(n.tree)]):[3,14];case 13:c=I.sent(),n.width&&n.height&&this.ctx.drawImage(c,0,0,n.width,n.height,n.bounds.left,n.bounds.top,n.bounds.width,n.bounds.height),I.label=14;case 14:if(n instanceof Lx&&(u=Math.min(n.bounds.width,n.bounds.height),n.type===j0?n.checked&&(this.ctx.save(),this.path([new ke(n.bounds.left+u*.39363,n.bounds.top+u*.79),new ke(n.bounds.left+u*.16,n.bounds.top+u*.5549),new ke(n.bounds.left+u*.27347,n.bounds.top+u*.44071),new ke(n.bounds.left+u*.39694,n.bounds.top+u*.5649),new ke(n.bounds.left+u*.72983,n.bounds.top+u*.23),new ke(n.bounds.left+u*.84,n.bounds.top+u*.34085),new ke(n.bounds.left+u*.39363,n.bounds.top+u*.79)]),this.ctx.fillStyle=er(PS),this.ctx.fill(),this.ctx.restore()):n.type===q0&&n.checked&&(this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(n.bounds.left+u/2,n.bounds.top+u/2,u/4,0,Math.PI*2,!0),this.ctx.fillStyle=er(PS),this.ctx.fill(),this.ctx.restore())),nq(n)&&n.value.length){switch(f=this.createFontStyle(s),w=f[0],d=f[1],p=this.fontMetrics.getMetrics(w,d).baseline,this.ctx.font=w,this.ctx.fillStyle=er(s.color),this.ctx.textBaseline="alphabetic",this.ctx.textAlign=iq(n.styles.textAlign),C=tB(n),h=0,n.styles.textAlign){case 1:h+=C.width/2;break;case 2:h+=C.width;break}m=C.add(h,0,0,-C.height/2+1),this.ctx.save(),this.path([new ke(C.left,C.top),new ke(C.left+C.width,C.top),new ke(C.left+C.width,C.top+C.height),new ke(C.left,C.top+C.height)]),this.ctx.clip(),this.renderTextWithLetterSpacing(new Ch(n.value,m),s.letterSpacing,p),this.ctx.restore(),this.ctx.textBaseline="alphabetic",this.ctx.textAlign="left"}if(!Xn(n.styles.display,2048))return[3,20];if(n.styles.listStyleImage===null)return[3,19];if(g=n.styles.listStyleImage,g.type!==0)return[3,18];B=void 0,v=g.url,I.label=15;case 15:return I.trys.push([15,17,,18]),[4,this.context.cache.match(v)];case 16:return B=I.sent(),this.ctx.drawImage(B,n.bounds.left-(B.width+10),n.bounds.top),[3,18];case 17:return I.sent(),this.context.logger.error("Error loading list-style-image "+v),[3,18];case 18:return[3,20];case 19:t.listValue&&n.styles.listStyleType!==-1&&(w=this.createFontStyle(s)[0],this.ctx.font=w,this.ctx.fillStyle=er(s.color),this.ctx.textBaseline="middle",this.ctx.textAlign="right",C=new sc(n.bounds.left,n.bounds.top+Kt(n.styles.paddingTop,n.bounds.width),n.bounds.width,xS(s.lineHeight,s.fontSize.number)/2+1),this.renderTextWithLetterSpacing(new Ch(t.listValue,C),s.letterSpacing,xS(s.lineHeight,s.fontSize.number)/2+2),this.ctx.textBaseline="bottom",this.ctx.textAlign="left"),I.label=20;case 20:return[2]}})})},e.prototype.renderStackContent=function(t){return Hi(this,void 0,void 0,function(){var n,i,g,s,o,g,a,A,g,l,c,g,u,f,g,d,p,g,h,m,g;return mi(this,function(B){switch(B.label){case 0:if(Xn(t.element.container.flags,16))debugger;return[4,this.renderNodeBackgroundAndBorders(t.element)];case 1:B.sent(),n=0,i=t.negativeZIndex,B.label=2;case 2:return n<i.length?(g=i[n],[4,this.renderStack(g)]):[3,5];case 3:B.sent(),B.label=4;case 4:return n++,[3,2];case 5:return[4,this.renderNodeContent(t.element)];case 6:B.sent(),s=0,o=t.nonInlineLevel,B.label=7;case 7:return s<o.length?(g=o[s],[4,this.renderNode(g)]):[3,10];case 8:B.sent(),B.label=9;case 9:return s++,[3,7];case 10:a=0,A=t.nonPositionedFloats,B.label=11;case 11:return a<A.length?(g=A[a],[4,this.renderStack(g)]):[3,14];case 12:B.sent(),B.label=13;case 13:return a++,[3,11];case 14:l=0,c=t.nonPositionedInlineLevel,B.label=15;case 15:return l<c.length?(g=c[l],[4,this.renderStack(g)]):[3,18];case 16:B.sent(),B.label=17;case 17:return l++,[3,15];case 18:u=0,f=t.inlineLevel,B.label=19;case 19:return u<f.length?(g=f[u],[4,this.renderNode(g)]):[3,22];case 20:B.sent(),B.label=21;case 21:return u++,[3,19];case 22:d=0,p=t.zeroOrAutoZIndexOrTransformedOrOpacity,B.label=23;case 23:return d<p.length?(g=p[d],[4,this.renderStack(g)]):[3,26];case 24:B.sent(),B.label=25;case 25:return d++,[3,23];case 26:h=0,m=t.positiveZIndex,B.label=27;case 27:return h<m.length?(g=m[h],[4,this.renderStack(g)]):[3,30];case 28:B.sent(),B.label=29;case 29:return h++,[3,27];case 30:return[2]}})})},e.prototype.mask=function(t){this.ctx.beginPath(),this.ctx.moveTo(0,0),this.ctx.lineTo(this.canvas.width,0),this.ctx.lineTo(this.canvas.width,this.canvas.height),this.ctx.lineTo(0,this.canvas.height),this.ctx.lineTo(0,0),this.formatPath(t.slice(0).reverse()),this.ctx.closePath()},e.prototype.path=function(t){this.ctx.beginPath(),this.formatPath(t),this.ctx.closePath()},e.prototype.formatPath=function(t){var n=this;t.forEach(function(i,s){var o=ts(i)?i.start:i;s===0?n.ctx.moveTo(o.x,o.y):n.ctx.lineTo(o.x,o.y),ts(i)&&n.ctx.bezierCurveTo(i.startControl.x,i.startControl.y,i.endControl.x,i.endControl.y,i.end.x,i.end.y)})},e.prototype.renderRepeat=function(t,n,i,s){this.path(t),this.ctx.fillStyle=n,this.ctx.translate(i,s),this.ctx.fill(),this.ctx.translate(-i,-s)},e.prototype.resizeImage=function(t,n,i){var s;if(t.width===n&&t.height===i)return t;var o=(s=this.canvas.ownerDocument)!==null&&s!==void 0?s:document,a=o.createElement("canvas");a.width=Math.max(1,n),a.height=Math.max(1,i);var A=a.getContext("2d");return A.drawImage(t,0,0,t.width,t.height,0,0,n,i),a},e.prototype.renderBackgroundImage=function(t){return Hi(this,void 0,void 0,function(){var n,i,s,o,a,A;return mi(this,function(l){switch(l.label){case 0:n=t.styles.backgroundImage.length-1,i=function(c){var u,f,d,V,_,L,R,y,U,p,V,_,L,R,y,h,m,g,B,v,w,C,I,E,U,S,V,J,z,R,y,Q,_,L,T,Z,G,D,x,P,oe,M;return mi(this,function(k){switch(k.label){case 0:if(c.type!==0)return[3,5];u=void 0,f=c.url,k.label=1;case 1:return k.trys.push([1,3,,4]),[4,s.context.cache.match(f)];case 2:return u=k.sent(),[3,4];case 3:return k.sent(),s.context.logger.error("Error loading background-image "+f),[3,4];case 4:return u&&(d=EC(t,n,[u.width,u.height,u.width/u.height]),V=d[0],_=d[1],L=d[2],R=d[3],y=d[4],U=s.ctx.createPattern(s.resizeImage(u,R,y),"repeat"),s.renderRepeat(V,U,_,L)),[3,6];case 5:i8(c)?(p=EC(t,n,[null,null,null]),V=p[0],_=p[1],L=p[2],R=p[3],y=p[4],h=$6(c.angle,R,y),m=h[0],g=h[1],B=h[2],v=h[3],w=h[4],C=document.createElement("canvas"),C.width=R,C.height=y,I=C.getContext("2d"),E=I.createLinearGradient(g,v,B,w),IS(c.stops,m).forEach(function(q){return E.addColorStop(q.stop,er(q.color))}),I.fillStyle=E,I.fillRect(0,0,R,y),R>0&&y>0&&(U=s.ctx.createPattern(C,"repeat"),s.renderRepeat(V,U,_,L))):s8(c)&&(S=EC(t,n,[null,null,null]),V=S[0],J=S[1],z=S[2],R=S[3],y=S[4],Q=c.position.length===0?[Nx]:c.position,_=Kt(Q[0],R),L=Kt(Q[Q.length-1],y),T=e8(c,_,L,R,y),Z=T[0],G=T[1],Z>0&&G>0&&(D=s.ctx.createRadialGradient(J+_,z+L,0,J+_,z+L,Z),IS(c.stops,Z*2).forEach(function(q){return D.addColorStop(q.stop,er(q.color))}),s.path(V),s.ctx.fillStyle=D,Z!==G?(x=t.bounds.left+.5*t.bounds.width,P=t.bounds.top+.5*t.bounds.height,oe=G/Z,M=1/oe,s.ctx.save(),s.ctx.translate(x,P),s.ctx.transform(1,0,0,oe,0,0),s.ctx.translate(-x,-P),s.ctx.fillRect(J,M*(z-P)+P,R,y*M),s.ctx.restore()):s.ctx.fill())),k.label=6;case 6:return n--,[2]}})},s=this,o=0,a=t.styles.backgroundImage.slice(0).reverse(),l.label=1;case 1:return o<a.length?(A=a[o],[5,i(A)]):[3,4];case 2:l.sent(),l.label=3;case 3:return o++,[3,1];case 4:return[2]}})})},e.prototype.renderSolidBorder=function(t,n,i){return Hi(this,void 0,void 0,function(){return mi(this,function(s){return this.path(KS(i,n)),this.ctx.fillStyle=er(t),this.ctx.fill(),[2]})})},e.prototype.renderDoubleBorder=function(t,n,i,s){return Hi(this,void 0,void 0,function(){var o,a;return mi(this,function(A){switch(A.label){case 0:return n<3?[4,this.renderSolidBorder(t,i,s)]:[3,2];case 1:return A.sent(),[2];case 2:return o=H7(s,i),this.path(o),this.ctx.fillStyle=er(t),this.ctx.fill(),a=z7(s,i),this.path(a),this.ctx.fill(),[2]}})})},e.prototype.renderNodeBackgroundAndBorders=function(t){return Hi(this,void 0,void 0,function(){var n,i,s,o,a,A,l,c,u=this;return mi(this,function(f){switch(f.label){case 0:return this.applyEffects(t.getEffects(2)),n=t.container.styles,i=!Gu(n.backgroundColor)||n.backgroundImage.length,s=[{style:n.borderTopStyle,color:n.borderTopColor,width:n.borderTopWidth},{style:n.borderRightStyle,color:n.borderRightColor,width:n.borderRightWidth},{style:n.borderBottomStyle,color:n.borderBottomColor,width:n.borderBottomWidth},{style:n.borderLeftStyle,color:n.borderLeftColor,width:n.borderLeftWidth}],o=rq(au(n.backgroundClip,0),t.curves),i||n.boxShadow.length?(this.ctx.save(),this.path(o),this.ctx.clip(),Gu(n.backgroundColor)||(this.ctx.fillStyle=er(n.backgroundColor),this.ctx.fill()),[4,this.renderBackgroundImage(t.container)]):[3,2];case 1:f.sent(),this.ctx.restore(),n.boxShadow.slice(0).reverse().forEach(function(d){u.ctx.save();var p=$0(t.curves),h=d.inset?0:tq,m=G7(p,-h+(d.inset?1:-1)*d.spread.number,(d.inset?1:-1)*d.spread.number,d.spread.number*(d.inset?-2:2),d.spread.number*(d.inset?-2:2));d.inset?(u.path(p),u.ctx.clip(),u.mask(m)):(u.mask(p),u.ctx.clip(),u.path(m)),u.ctx.shadowOffsetX=d.offsetX.number+h,u.ctx.shadowOffsetY=d.offsetY.number,u.ctx.shadowColor=er(d.color),u.ctx.shadowBlur=d.blur.number,u.ctx.fillStyle=d.inset?er(d.color):"rgba(0,0,0,1)",u.ctx.fill(),u.ctx.restore()}),f.label=2;case 2:a=0,A=0,l=s,f.label=3;case 3:return A<l.length?(c=l[A],c.style!==0&&!Gu(c.color)&&c.width>0?c.style!==2?[3,5]:[4,this.renderDashedDottedBorder(c.color,c.width,a,t.curves,2)]:[3,11]):[3,13];case 4:return f.sent(),[3,11];case 5:return c.style!==3?[3,7]:[4,this.renderDashedDottedBorder(c.color,c.width,a,t.curves,3)];case 6:return f.sent(),[3,11];case 7:return c.style!==4?[3,9]:[4,this.renderDoubleBorder(c.color,c.width,a,t.curves)];case 8:return f.sent(),[3,11];case 9:return[4,this.renderSolidBorder(c.color,a,t.curves)];case 10:f.sent(),f.label=11;case 11:a++,f.label=12;case 12:return A++,[3,3];case 13:return[2]}})})},e.prototype.renderDashedDottedBorder=function(t,n,i,s,o){return Hi(this,void 0,void 0,function(){var a,A,l,c,u,f,d,p,h,m,g,B,v,w,C,I,C,I;return mi(this,function(E){return this.ctx.save(),a=X7(s,i),A=KS(s,i),o===2&&(this.path(A),this.ctx.clip()),ts(A[0])?(l=A[0].start.x,c=A[0].start.y):(l=A[0].x,c=A[0].y),ts(A[1])?(u=A[1].end.x,f=A[1].end.y):(u=A[1].x,f=A[1].y),i===0||i===2?d=Math.abs(l-u):d=Math.abs(c-f),this.ctx.beginPath(),o===3?this.formatPath(a):this.formatPath(A.slice(0,2)),p=n<3?n*3:n*2,h=n<3?n*2:n,o===3&&(p=n,h=n),m=!0,d<=p*2?m=!1:d<=p*2+h?(g=d/(2*p+h),p*=g,h*=g):(B=Math.floor((d+h)/(p+h)),v=(d-B*p)/(B-1),w=(d-(B+1)*p)/B,h=w<=0||Math.abs(h-v)<Math.abs(h-w)?v:w),m&&(o===3?this.ctx.setLineDash([0,p+h]):this.ctx.setLineDash([p,h])),o===3?(this.ctx.lineCap="round",this.ctx.lineWidth=n):this.ctx.lineWidth=n*2+1.1,this.ctx.strokeStyle=er(t),this.ctx.stroke(),this.ctx.setLineDash([]),o===2&&(ts(A[0])&&(C=A[3],I=A[0],this.ctx.beginPath(),this.formatPath([new ke(C.end.x,C.end.y),new ke(I.start.x,I.start.y)]),this.ctx.stroke()),ts(A[1])&&(C=A[1],I=A[2],this.ctx.beginPath(),this.formatPath([new ke(C.end.x,C.end.y),new ke(I.start.x,I.start.y)]),this.ctx.stroke())),this.ctx.restore(),[2]})})},e.prototype.render=function(t){return Hi(this,void 0,void 0,function(){var n;return mi(this,function(i){switch(i.label){case 0:return this.options.backgroundColor&&(this.ctx.fillStyle=er(this.options.backgroundColor),this.ctx.fillRect(this.options.x,this.options.y,this.options.width,this.options.height)),n=O7(t),[4,this.renderStack(n)];case 1:return i.sent(),this.applyEffects([]),[2,this.canvas]}})})},e})(SD);var nq=function(r){return r instanceof mD||r instanceof gD?!0:r instanceof Lx&&r.type!==q0&&r.type!==j0},rq=function(r,e){switch(r){case 0:return $0(e);case 2:return L7(e);case 1:default:return eB(e)}},iq=function(r){switch(r){case 1:return"center";case 2:return"right";case 0:default:return"left"}},sq=["-apple-system","system-ui"],oq=function(r){return/iPhone OS 15_(0|1)/.test(window.navigator.userAgent)?r.filter(function(e){return sq.indexOf(e)===-1}):r};(function(r){$s(e,r);function e(t,n){var i=r.call(this,t,n)||this;return i.canvas=n.canvas?n.canvas:document.createElement("canvas"),i.ctx=i.canvas.getContext("2d"),i.options=n,i.canvas.width=Math.floor(n.width*n.scale),i.canvas.height=Math.floor(n.height*n.scale),i.canvas.style.width=n.width+"px",i.canvas.style.height=n.height+"px",i.ctx.scale(i.options.scale,i.options.scale),i.ctx.translate(-n.x,-n.y),i.context.logger.debug("EXPERIMENTAL ForeignObject renderer initialized ("+n.width+"x"+n.height+" at "+n.x+","+n.y+") with scale "+n.scale),i}return e.prototype.render=function(t){return Hi(this,void 0,void 0,function(){var n,i;return mi(this,function(s){switch(s.label){case 0:return n=dI(this.options.width*this.options.scale,this.options.height*this.options.scale,this.options.scale,this.options.scale,t),[4,aq(n)];case 1:return i=s.sent(),this.options.backgroundColor&&(this.ctx.fillStyle=er(this.options.backgroundColor),this.ctx.fillRect(0,0,this.options.width*this.options.scale,this.options.height*this.options.scale)),this.ctx.drawImage(i,-this.options.x*this.options.scale,-this.options.y*this.options.scale),[2,this.canvas]}})})},e})(SD);var aq=function(r){return new Promise(function(e,t){var n=new Image;n.onload=function(){e(n)},n.onerror=t,n.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(r))})};typeof window<"u"&&D7.setContext(window);/*!
 * @pixiv/three-vrm v1.0.9
 * VRM file loader for three.js.
 *
 * Copyright (c) 2019-2023 pixiv Inc.
 * @pixiv/three-vrm is distributed under MIT License
 * https://github.com/pixiv/three-vrm/blob/release/LICENSE
 *//*!
 * @pixiv/three-vrm-core v1.0.9
 * The implementation of core features of VRM, for @pixiv/three-vrm
 *
 * Copyright (c) 2020-2023 pixiv Inc.
 * @pixiv/three-vrm-core is distributed under MIT License
 * https://github.com/pixiv/three-vrm/blob/release/LICENSE
 */class qS extends St{constructor(e){super(),this.weight=0,this.isBinary=!1,this.overrideBlink="none",this.overrideLookAt="none",this.overrideMouth="none",this._binds=[],this.name=`VRMExpression_${e}`,this.expressionName=e,this.type="VRMExpression",this.visible=!1}get overrideBlinkAmount(){return this.overrideBlink==="block"?0<this.weight?1:0:this.overrideBlink==="blend"?this.weight:0}get overrideLookAtAmount(){return this.overrideLookAt==="block"?0<this.weight?1:0:this.overrideLookAt==="blend"?this.weight:0}get overrideMouthAmount(){return this.overrideMouth==="block"?0<this.weight?1:0:this.overrideMouth==="blend"?this.weight:0}addBind(e){this._binds.push(e)}applyWeight(e){var t;let n=this.isBinary?this.weight<=.5?0:1:this.weight;n*=(t=e==null?void 0:e.multiplier)!==null&&t!==void 0?t:1,this._binds.forEach(i=>i.applyWeight(n))}clearAppliedWeight(){this._binds.forEach(e=>e.clearAppliedWeight())}}function _t(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(c){try{l(n.next(c))}catch(u){o(u)}}function A(c){try{l(n.throw(c))}catch(u){o(u)}}function l(c){c.done?s(c.value):i(c.value).then(a,A)}l((n=n.apply(r,e||[])).next())})}function _D(r,e,t){var n,i;const s=r.parser.json,o=(n=s.nodes)===null||n===void 0?void 0:n[e];if(o==null)return console.warn(`extractPrimitivesInternal: Attempt to use nodes[${e}] of glTF but the node doesn't exist`),null;const a=o.mesh;if(a==null)return null;const A=(i=s.meshes)===null||i===void 0?void 0:i[a];if(A==null)return console.warn(`extractPrimitivesInternal: Attempt to use meshes[${a}] of glTF but the mesh doesn't exist`),null;const l=A.primitives.length,c=[];return t.traverse(u=>{c.length<l&&u.isMesh&&c.push(u)}),c}function $S(r,e){return _t(this,void 0,void 0,function*(){const t=yield r.parser.getDependency("node",e);return _D(r,e,t)})}function e_(r){return _t(this,void 0,void 0,function*(){const e=yield r.parser.getDependencies("node"),t=new Map;return e.forEach((n,i)=>{const s=_D(r,i,n);s!=null&&t.set(i,s)}),t})}function t_(r,e){var t,n;const i=parseInt(es,10);let s=null;if(i>=133)s=(n=(t=r.associations.get(e))===null||t===void 0?void 0:t.materials)!==null&&n!==void 0?n:null;else{const a=r.associations.get(e);(a==null?void 0:a.type)==="materials"&&(s=a.index)}return s}const Zr={Aa:"aa",Ih:"ih",Ou:"ou",Ee:"ee",Oh:"oh",Blink:"blink",Happy:"happy",Angry:"angry",Sad:"sad",Relaxed:"relaxed",LookUp:"lookUp",Surprised:"surprised",LookDown:"lookDown",LookLeft:"lookLeft",LookRight:"lookRight",BlinkLeft:"blinkLeft",BlinkRight:"blinkRight",Neutral:"neutral"};function RD(r){return Math.max(Math.min(r,1),0)}class nB{constructor(){this.blinkExpressionNames=["blink","blinkLeft","blinkRight"],this.lookAtExpressionNames=["lookLeft","lookRight","lookUp","lookDown"],this.mouthExpressionNames=["aa","ee","ih","oh","ou"],this._expressions=[],this._expressionMap={}}get expressions(){return this._expressions.concat()}get expressionMap(){return Object.assign({},this._expressionMap)}get presetExpressionMap(){const e={},t=new Set(Object.values(Zr));return Object.entries(this._expressionMap).forEach(([n,i])=>{t.has(n)&&(e[n]=i)}),e}get customExpressionMap(){const e={},t=new Set(Object.values(Zr));return Object.entries(this._expressionMap).forEach(([n,i])=>{t.has(n)||(e[n]=i)}),e}copy(e){return this._expressions.concat().forEach(n=>{this.unregisterExpression(n)}),e._expressions.forEach(n=>{this.registerExpression(n)}),this.blinkExpressionNames=e.blinkExpressionNames.concat(),this.lookAtExpressionNames=e.lookAtExpressionNames.concat(),this.mouthExpressionNames=e.mouthExpressionNames.concat(),this}clone(){return new nB().copy(this)}getExpression(e){var t;return(t=this._expressionMap[e])!==null&&t!==void 0?t:null}registerExpression(e){this._expressions.push(e),this._expressionMap[e.expressionName]=e}unregisterExpression(e){const t=this._expressions.indexOf(e);t===-1&&console.warn("VRMExpressionManager: The specified expressions is not registered"),this._expressions.splice(t,1),delete this._expressionMap[e.expressionName]}getValue(e){var t;const n=this.getExpression(e);return(t=n==null?void 0:n.weight)!==null&&t!==void 0?t:null}setValue(e,t){const n=this.getExpression(e);n&&(n.weight=RD(t))}getExpressionTrackName(e){const t=this.getExpression(e);return t?`${t.name}.weight`:null}update(){const e=this._calculateWeightMultipliers();this._expressions.forEach(t=>{t.clearAppliedWeight()}),this._expressions.forEach(t=>{let n=1;const i=t.expressionName;this.blinkExpressionNames.indexOf(i)!==-1&&(n*=e.blink),this.lookAtExpressionNames.indexOf(i)!==-1&&(n*=e.lookAt),this.mouthExpressionNames.indexOf(i)!==-1&&(n*=e.mouth),t.applyWeight({multiplier:n})})}_calculateWeightMultipliers(){let e=1,t=1,n=1;return this._expressions.forEach(i=>{e-=i.overrideBlinkAmount,t-=i.overrideLookAtAmount,n-=i.overrideMouthAmount}),e=Math.max(0,e),t=Math.max(0,t),n=Math.max(0,n),{blink:e,lookAt:t,mouth:n}}}const yd={Color:"color",EmissionColor:"emissionColor",ShadeColor:"shadeColor",MatcapColor:"matcapColor",RimColor:"rimColor",OutlineColor:"outlineColor"},Aq={_Color:yd.Color,_EmissionColor:yd.EmissionColor,_ShadeColor:yd.ShadeColor,_RimColor:yd.RimColor,_OutlineColor:yd.OutlineColor},lq=new Ve;class rp{constructor({material:e,type:t,targetValue:n}){var i,s,o;this.material=e,this.type=t,this.targetValue=n;const a=(i=Object.entries(rp._propertyNameMapMap).find(([l])=>e[l]===!0))===null||i===void 0?void 0:i[1],A=(s=a==null?void 0:a[t])!==null&&s!==void 0?s:null;if(A==null)console.warn(`Tried to add a material color bind to the material ${(o=e.name)!==null&&o!==void 0?o:"(no name)"}, the type ${t} but the material or the type is not supported.`),this._state=null;else{const c=e[A].clone(),u=new Ve(n.r-c.r,n.g-c.g,n.b-c.b);this._state={propertyName:A,initialValue:c,deltaValue:u}}}applyWeight(e){if(this._state==null)return;const{propertyName:t,deltaValue:n}=this._state,i=this.material[t];i!==void 0&&(i.add(lq.copy(n).multiplyScalar(e)),typeof this.material.shouldApplyUniforms=="boolean"&&(this.material.shouldApplyUniforms=!0))}clearAppliedWeight(){if(this._state==null)return;const{propertyName:e,initialValue:t}=this._state,n=this.material[e];n!==void 0&&(n.copy(t),typeof this.material.shouldApplyUniforms=="boolean"&&(this.material.shouldApplyUniforms=!0))}}rp._propertyNameMapMap={isMeshStandardMaterial:{color:"color",emissionColor:"emissive"},isMeshBasicMaterial:{color:"color"},isMToonMaterial:{color:"color",emissionColor:"emissive",outlineColor:"outlineColorFactor",matcapColor:"matcapFactor",rimColor:"parametricRimColorFactor",shadeColor:"shadeColorFactor"}};class n_{constructor({primitives:e,index:t,weight:n}){this.primitives=e,this.index=t,this.weight=n}applyWeight(e){this.primitives.forEach(t=>{var n;((n=t.morphTargetInfluences)===null||n===void 0?void 0:n[this.index])!=null&&(t.morphTargetInfluences[this.index]+=this.weight*e)})}clearAppliedWeight(){this.primitives.forEach(e=>{var t;((t=e.morphTargetInfluences)===null||t===void 0?void 0:t[this.index])!=null&&(e.morphTargetInfluences[this.index]=0)})}}const r_=new Je;class ip{constructor({material:e,scale:t,offset:n}){var i,s;this.material=e,this.scale=t,this.offset=n;const o=(i=Object.entries(ip._propertyNamesMap).find(([a])=>e[a]===!0))===null||i===void 0?void 0:i[1];o==null?(console.warn(`Tried to add a texture transform bind to the material ${(s=e.name)!==null&&s!==void 0?s:"(no name)"} but the material is not supported.`),this._properties=[]):(this._properties=[],o.forEach(a=>{var A;const l=(A=e[a])===null||A===void 0?void 0:A.clone();if(!l)return null;e[a]=l;const c=l.offset.clone(),u=l.repeat.clone(),f=n.clone().sub(c),d=t.clone().sub(u);this._properties.push({name:a,initialOffset:c,deltaOffset:f,initialScale:u,deltaScale:d})}))}applyWeight(e){this._properties.forEach(t=>{const n=this.material[t.name];n!==void 0&&(n.offset.add(r_.copy(t.deltaOffset).multiplyScalar(e)),n.repeat.add(r_.copy(t.deltaScale).multiplyScalar(e)),n.needsUpdate=!0)})}clearAppliedWeight(){this._properties.forEach(e=>{const t=this.material[e.name];t!==void 0&&(t.offset.copy(e.initialOffset),t.repeat.copy(e.initialScale),t.needsUpdate=!0)})}}ip._propertyNamesMap={isMeshStandardMaterial:["map","emissiveMap","bumpMap","normalMap","displacementMap","roughnessMap","metalnessMap","alphaMap"],isMeshBasicMaterial:["map","specularMap","alphaMap"],isMToonMaterial:["map","normalMap","emissiveMap","shadeMultiplyTexture","rimMultiplyTexture","outlineWidthMultiplyTexture","uvAnimationMaskTexture"]};const cq=new Set(["1.0","1.0-beta"]);class Uv{constructor(e){this.parser=e}get name(){return"VRMExpressionLoaderPlugin"}afterRoot(e){return _t(this,void 0,void 0,function*(){e.userData.vrmExpressionManager=yield this._import(e)})}_import(e){return _t(this,void 0,void 0,function*(){const t=yield this._v1Import(e);if(t)return t;const n=yield this._v0Import(e);return n||null})}_v1Import(e){var t,n;return _t(this,void 0,void 0,function*(){const i=this.parser.json;if(!(((t=i.extensionsUsed)===null||t===void 0?void 0:t.indexOf("VRMC_vrm"))!==-1))return null;const o=(n=i.extensions)===null||n===void 0?void 0:n.VRMC_vrm;if(!o)return null;const a=o.specVersion;if(!cq.has(a))return console.warn(`VRMExpressionLoaderPlugin: Unknown VRMC_vrm specVersion "${a}"`),null;const A=o.expressions;if(!A)return null;const l=new Set(Object.values(Zr)),c=new Map;A.preset!=null&&Object.entries(A.preset).forEach(([f,d])=>{if(d!=null){if(!l.has(f)){console.warn(`VRMExpressionLoaderPlugin: Unknown preset name "${f}" detected. Ignoring the expression`);return}c.set(f,d)}}),A.custom!=null&&Object.entries(A.custom).forEach(([f,d])=>{if(l.has(f)){console.warn(`VRMExpressionLoaderPlugin: Custom expression cannot have preset name "${f}". Ignoring the expression`);return}c.set(f,d)});const u=new nB;return yield Promise.all(Array.from(c.entries()).map(([f,d])=>_t(this,void 0,void 0,function*(){var p,h,m,g,B,v,w;const C=new qS(f);if(e.scene.add(C),C.isBinary=(p=d.isBinary)!==null&&p!==void 0?p:!1,C.overrideBlink=(h=d.overrideBlink)!==null&&h!==void 0?h:"none",C.overrideLookAt=(m=d.overrideLookAt)!==null&&m!==void 0?m:"none",C.overrideMouth=(g=d.overrideMouth)!==null&&g!==void 0?g:"none",(B=d.morphTargetBinds)===null||B===void 0||B.forEach(I=>_t(this,void 0,void 0,function*(){var E;if(I.node===void 0||I.index===void 0)return;const U=yield $S(e,I.node),S=I.index;if(!U.every(V=>Array.isArray(V.morphTargetInfluences)&&S<V.morphTargetInfluences.length)){console.warn(`VRMExpressionLoaderPlugin: ${d.name} attempts to index morph #${S} but not found.`);return}C.addBind(new n_({primitives:U,index:S,weight:(E=I.weight)!==null&&E!==void 0?E:1}))})),d.materialColorBinds||d.textureTransformBinds){const I=[];e.scene.traverse(E=>{const U=E.material;U&&I.push(U)}),(v=d.materialColorBinds)===null||v===void 0||v.forEach(E=>_t(this,void 0,void 0,function*(){I.filter(S=>{const V=t_(this.parser,S);return E.material===V}).forEach(S=>{C.addBind(new rp({material:S,type:E.type,targetValue:new Ve().fromArray(E.targetValue)}))})})),(w=d.textureTransformBinds)===null||w===void 0||w.forEach(E=>_t(this,void 0,void 0,function*(){I.filter(S=>{const V=t_(this.parser,S);return E.material===V}).forEach(S=>{var V,J;C.addBind(new ip({material:S,offset:new Je().fromArray((V=E.offset)!==null&&V!==void 0?V:[0,0]),scale:new Je().fromArray((J=E.scale)!==null&&J!==void 0?J:[1,1])}))})}))}u.registerExpression(C)}))),u})}_v0Import(e){var t;return _t(this,void 0,void 0,function*(){const n=this.parser.json,i=(t=n.extensions)===null||t===void 0?void 0:t.VRM;if(!i)return null;const s=i.blendShapeMaster;if(!s)return null;const o=new nB,a=s.blendShapeGroups;if(!a)return o;const A=new Set;return yield Promise.all(a.map(l=>_t(this,void 0,void 0,function*(){var c;const u=l.presetName,f=u!=null&&Uv.v0v1PresetNameMap[u]||null,d=f??l.name;if(d==null){console.warn("VRMExpressionLoaderPlugin: One of custom expressions has no name. Ignoring the expression");return}if(A.has(d)){console.warn(`VRMExpressionLoaderPlugin: An expression preset ${u} has duplicated entries. Ignoring the expression`);return}A.add(d);const p=new qS(d);e.scene.add(p),p.isBinary=(c=l.isBinary)!==null&&c!==void 0?c:!1,l.binds&&l.binds.forEach(m=>_t(this,void 0,void 0,function*(){var g;if(m.mesh===void 0||m.index===void 0)return;const B=[];(g=n.nodes)===null||g===void 0||g.forEach((w,C)=>{w.mesh===m.mesh&&B.push(C)});const v=m.index;yield Promise.all(B.map(w=>_t(this,void 0,void 0,function*(){var C;const I=yield $S(e,w);if(!I.every(E=>Array.isArray(E.morphTargetInfluences)&&v<E.morphTargetInfluences.length)){console.warn(`VRMExpressionLoaderPlugin: ${l.name} attempts to index ${v}th morph but not found.`);return}p.addBind(new n_({primitives:I,index:v,weight:.01*((C=m.weight)!==null&&C!==void 0?C:100)}))})))}));const h=l.materialValues;h&&h.length!==0&&h.forEach(m=>{if(m.materialName===void 0||m.propertyName===void 0||m.targetValue===void 0)return;const g=[];e.scene.traverse(v=>{if(v.material){const w=v.material;Array.isArray(w)?g.push(...w.filter(C=>(C.name===m.materialName||C.name===m.materialName+" (Outline)")&&g.indexOf(C)===-1)):w.name===m.materialName&&g.indexOf(w)===-1&&g.push(w)}});const B=m.propertyName;g.forEach(v=>{if(B==="_MainTex_ST"){const C=new Je(m.targetValue[0],m.targetValue[1]),I=new Je(m.targetValue[2],m.targetValue[3]);p.addBind(new ip({material:v,scale:C,offset:I}));return}const w=Aq[B];if(w){p.addBind(new rp({material:v,type:w,targetValue:new Ve(...m.targetValue.slice(0,3))}));return}console.warn(B+" is not supported")})}),o.registerExpression(p)}))),o})}}Uv.v0v1PresetNameMap={a:"aa",e:"ee",i:"ih",o:"oh",u:"ou",blink:"blink",joy:"happy",angry:"angry",sorrow:"sad",fun:"relaxed",lookup:"lookUp",lookdown:"lookDown",lookleft:"lookLeft",lookright:"lookRight",blink_l:"blinkLeft",blink_r:"blinkRight",neutral:"neutral"};class Bo{constructor(e,t){this._firstPersonOnlyLayer=Bo.DEFAULT_FIRSTPERSON_ONLY_LAYER,this._thirdPersonOnlyLayer=Bo.DEFAULT_THIRDPERSON_ONLY_LAYER,this._initializedLayers=!1,this.humanoid=e,this.meshAnnotations=t}copy(e){if(this.humanoid!==e.humanoid)throw new Error("VRMFirstPerson: humanoid must be same in order to copy");return this.meshAnnotations=e.meshAnnotations.map(t=>({meshes:t.meshes.concat(),type:t.type})),this}clone(){return new Bo(this.humanoid,this.meshAnnotations).copy(this)}get firstPersonOnlyLayer(){return this._firstPersonOnlyLayer}get thirdPersonOnlyLayer(){return this._thirdPersonOnlyLayer}setup({firstPersonOnlyLayer:e=Bo.DEFAULT_FIRSTPERSON_ONLY_LAYER,thirdPersonOnlyLayer:t=Bo.DEFAULT_THIRDPERSON_ONLY_LAYER}={}){this._initializedLayers||(this._firstPersonOnlyLayer=e,this._thirdPersonOnlyLayer=t,this.meshAnnotations.forEach(n=>{n.meshes.forEach(i=>{n.type==="firstPersonOnly"?(i.layers.set(this._firstPersonOnlyLayer),i.traverse(s=>s.layers.set(this._firstPersonOnlyLayer))):n.type==="thirdPersonOnly"?(i.layers.set(this._thirdPersonOnlyLayer),i.traverse(s=>s.layers.set(this._thirdPersonOnlyLayer))):n.type==="auto"&&this._createHeadlessModel(i)})}),this._initializedLayers=!0)}_excludeTriangles(e,t,n,i){let s=0;if(t!=null&&t.length>0)for(let o=0;o<e.length;o+=3){const a=e[o],A=e[o+1],l=e[o+2],c=t[a],u=n[a];if(c[0]>0&&i.includes(u[0])||c[1]>0&&i.includes(u[1])||c[2]>0&&i.includes(u[2])||c[3]>0&&i.includes(u[3]))continue;const f=t[A],d=n[A];if(f[0]>0&&i.includes(d[0])||f[1]>0&&i.includes(d[1])||f[2]>0&&i.includes(d[2])||f[3]>0&&i.includes(d[3]))continue;const p=t[l],h=n[l];p[0]>0&&i.includes(h[0])||p[1]>0&&i.includes(h[1])||p[2]>0&&i.includes(h[2])||p[3]>0&&i.includes(h[3])||(e[s++]=a,e[s++]=A,e[s++]=l)}return s}_createErasedMesh(e,t){const n=new lv(e.geometry.clone(),e.material);n.name=`${e.name}(erase)`,n.frustumCulled=e.frustumCulled,n.layers.set(this._firstPersonOnlyLayer);const i=n.geometry,s=i.getAttribute("skinIndex"),o=s instanceof X1?[]:s.array,a=[];for(let h=0;h<o.length;h+=4)a.push([o[h],o[h+1],o[h+2],o[h+3]]);const A=i.getAttribute("skinWeight"),l=A instanceof X1?[]:A.array,c=[];for(let h=0;h<l.length;h+=4)c.push([l[h],l[h+1],l[h+2],l[h+3]]);const u=i.getIndex();if(!u)throw new Error("The geometry doesn't have an index buffer");const f=Array.from(u.array),d=this._excludeTriangles(f,c,a,t),p=[];for(let h=0;h<d;h++)p[h]=f[h];return i.setIndex(p),e.onBeforeRender&&(n.onBeforeRender=e.onBeforeRender),n.bind(new dc(e.skeleton.bones,e.skeleton.boneInverses),new Le),n}_createHeadlessModelForSkinnedMesh(e,t){const n=[];if(t.skeleton.bones.forEach((s,o)=>{this._isEraseTarget(s)&&n.push(o)}),!n.length){t.layers.enable(this._thirdPersonOnlyLayer),t.layers.enable(this._firstPersonOnlyLayer);return}t.layers.set(this._thirdPersonOnlyLayer);const i=this._createErasedMesh(t,n);e.add(i)}_createHeadlessModel(e){if(e.type==="Group")if(e.layers.set(this._thirdPersonOnlyLayer),this._isEraseTarget(e))e.traverse(t=>t.layers.set(this._thirdPersonOnlyLayer));else{const t=new Qr;t.name=`_headless_${e.name}`,t.layers.set(this._firstPersonOnlyLayer),e.parent.add(t),e.children.filter(n=>n.type==="SkinnedMesh").forEach(n=>{const i=n;this._createHeadlessModelForSkinnedMesh(t,i)})}else if(e.type==="SkinnedMesh"){const t=e;this._createHeadlessModelForSkinnedMesh(e.parent,t)}else this._isEraseTarget(e)&&(e.layers.set(this._thirdPersonOnlyLayer),e.traverse(t=>t.layers.set(this._thirdPersonOnlyLayer)))}_isEraseTarget(e){return e===this.humanoid.getRawBoneNode("head")?!0:e.parent?this._isEraseTarget(e.parent):!1}}Bo.DEFAULT_FIRSTPERSON_ONLY_LAYER=9;Bo.DEFAULT_THIRDPERSON_ONLY_LAYER=10;const uq=new Set(["1.0","1.0-beta"]);class fq{constructor(e){this.parser=e}get name(){return"VRMFirstPersonLoaderPlugin"}afterRoot(e){return _t(this,void 0,void 0,function*(){const t=e.userData.vrmHumanoid;if(t!==null){if(t===void 0)throw new Error("VRMFirstPersonLoaderPlugin: vrmHumanoid is undefined. VRMHumanoidLoaderPlugin have to be used first");e.userData.vrmFirstPerson=yield this._import(e,t)}})}_import(e,t){return _t(this,void 0,void 0,function*(){if(t==null)return null;const n=yield this._v1Import(e,t);if(n)return n;const i=yield this._v0Import(e,t);return i||null})}_v1Import(e,t){var n,i;return _t(this,void 0,void 0,function*(){const s=this.parser.json;if(!(((n=s.extensionsUsed)===null||n===void 0?void 0:n.indexOf("VRMC_vrm"))!==-1))return null;const a=(i=s.extensions)===null||i===void 0?void 0:i.VRMC_vrm;if(!a)return null;const A=a.specVersion;if(!uq.has(A))return console.warn(`VRMFirstPersonLoaderPlugin: Unknown VRMC_vrm specVersion "${A}"`),null;const l=a.firstPerson;if(!l)return null;const c=[],u=yield e_(e);return Array.from(u.entries()).forEach(([f,d])=>{var p;const h=l.meshAnnotations?l.meshAnnotations.find(m=>m.node===f):void 0;c.push({meshes:d,type:(p=h==null?void 0:h.type)!==null&&p!==void 0?p:"both"})}),new Bo(t,c)})}_v0Import(e,t){var n;return _t(this,void 0,void 0,function*(){const i=this.parser.json,s=(n=i.extensions)===null||n===void 0?void 0:n.VRM;if(!s)return null;const o=s.firstPerson;if(!o)return null;const a=[],A=yield e_(e);return Array.from(A.entries()).forEach(([l,c])=>{const u=i.nodes[l],f=o.meshAnnotations?o.meshAnnotations.find(d=>d.mesh===u.mesh):void 0;a.push({meshes:c,type:this._convertV0FlagToV1Type(f==null?void 0:f.firstPersonFlag)})}),new Bo(t,a)})}_convertV0FlagToV1Type(e){return e==="FirstPersonOnly"?"firstPersonOnly":e==="ThirdPersonOnly"?"thirdPersonOnly":e==="Auto"?"auto":"both"}}const i_=new H,s_=new H,dq=new $e;class o_ extends Qr{constructor(e){super(),this.vrmHumanoid=e,this._boneAxesMap=new Map,Object.values(e.humanBones).forEach(t=>{const n=new kK(1);n.matrixAutoUpdate=!1,n.material.depthTest=!1,n.material.depthWrite=!1,this.add(n),this._boneAxesMap.set(t,n)})}dispose(){Array.from(this._boneAxesMap.values()).forEach(e=>{e.geometry.dispose(),e.material.dispose()})}updateMatrixWorld(e){Array.from(this._boneAxesMap.entries()).forEach(([t,n])=>{t.node.updateWorldMatrix(!0,!1),t.node.matrixWorld.decompose(i_,dq,s_);const i=i_.set(.1,.1,.1).divide(s_);n.matrix.copy(t.node.matrixWorld).scale(i)}),super.updateMatrixWorld(e)}}const SC=["hips","spine","chest","upperChest","neck","head","leftEye","rightEye","jaw","leftUpperLeg","leftLowerLeg","leftFoot","leftToes","rightUpperLeg","rightLowerLeg","rightFoot","rightToes","leftShoulder","leftUpperArm","leftLowerArm","leftHand","rightShoulder","rightUpperArm","rightLowerArm","rightHand","leftThumbMetacarpal","leftThumbProximal","leftThumbDistal","leftIndexProximal","leftIndexIntermediate","leftIndexDistal","leftMiddleProximal","leftMiddleIntermediate","leftMiddleDistal","leftRingProximal","leftRingIntermediate","leftRingDistal","leftLittleProximal","leftLittleIntermediate","leftLittleDistal","rightThumbMetacarpal","rightThumbProximal","rightThumbDistal","rightIndexProximal","rightIndexIntermediate","rightIndexDistal","rightMiddleProximal","rightMiddleIntermediate","rightMiddleDistal","rightRingProximal","rightRingIntermediate","rightRingDistal","rightLittleProximal","rightLittleIntermediate","rightLittleDistal"],a_={Hips:"hips",Spine:"spine",Chest:"chest",UpperChest:"upperChest",Neck:"neck",Head:"head",LeftEye:"leftEye",RightEye:"rightEye",Jaw:"jaw",LeftUpperLeg:"leftUpperLeg",LeftLowerLeg:"leftLowerLeg",LeftFoot:"leftFoot",LeftToes:"leftToes",RightUpperLeg:"rightUpperLeg",RightLowerLeg:"rightLowerLeg",RightFoot:"rightFoot",RightToes:"rightToes",LeftShoulder:"leftShoulder",LeftUpperArm:"leftUpperArm",LeftLowerArm:"leftLowerArm",LeftHand:"leftHand",RightShoulder:"rightShoulder",RightUpperArm:"rightUpperArm",RightLowerArm:"rightLowerArm",RightHand:"rightHand",LeftThumbMetacarpal:"leftThumbMetacarpal",LeftThumbProximal:"leftThumbProximal",LeftThumbDistal:"leftThumbDistal",LeftIndexProximal:"leftIndexProximal",LeftIndexIntermediate:"leftIndexIntermediate",LeftIndexDistal:"leftIndexDistal",LeftMiddleProximal:"leftMiddleProximal",LeftMiddleIntermediate:"leftMiddleIntermediate",LeftMiddleDistal:"leftMiddleDistal",LeftRingProximal:"leftRingProximal",LeftRingIntermediate:"leftRingIntermediate",LeftRingDistal:"leftRingDistal",LeftLittleProximal:"leftLittleProximal",LeftLittleIntermediate:"leftLittleIntermediate",LeftLittleDistal:"leftLittleDistal",RightThumbMetacarpal:"rightThumbMetacarpal",RightThumbProximal:"rightThumbProximal",RightThumbDistal:"rightThumbDistal",RightIndexProximal:"rightIndexProximal",RightIndexIntermediate:"rightIndexIntermediate",RightIndexDistal:"rightIndexDistal",RightMiddleProximal:"rightMiddleProximal",RightMiddleIntermediate:"rightMiddleIntermediate",RightMiddleDistal:"rightMiddleDistal",RightRingProximal:"rightRingProximal",RightRingIntermediate:"rightRingIntermediate",RightRingDistal:"rightRingDistal",RightLittleProximal:"rightLittleProximal",RightLittleIntermediate:"rightLittleIntermediate",RightLittleDistal:"rightLittleDistal"},hq={hips:null,spine:"hips",chest:"spine",upperChest:"chest",neck:"upperChest",head:"neck",leftEye:"head",rightEye:"head",jaw:"head",leftUpperLeg:"hips",leftLowerLeg:"leftUpperLeg",leftFoot:"leftLowerLeg",leftToes:"leftFoot",rightUpperLeg:"hips",rightLowerLeg:"rightUpperLeg",rightFoot:"rightLowerLeg",rightToes:"rightFoot",leftShoulder:"upperChest",leftUpperArm:"leftShoulder",leftLowerArm:"leftUpperArm",leftHand:"leftLowerArm",rightShoulder:"upperChest",rightUpperArm:"rightShoulder",rightLowerArm:"rightUpperArm",rightHand:"rightLowerArm",leftThumbMetacarpal:"leftHand",leftThumbProximal:"leftThumbMetacarpal",leftThumbDistal:"leftThumbProximal",leftIndexProximal:"leftHand",leftIndexIntermediate:"leftIndexProximal",leftIndexDistal:"leftIndexIntermediate",leftMiddleProximal:"leftHand",leftMiddleIntermediate:"leftMiddleProximal",leftMiddleDistal:"leftMiddleIntermediate",leftRingProximal:"leftHand",leftRingIntermediate:"leftRingProximal",leftRingDistal:"leftRingIntermediate",leftLittleProximal:"leftHand",leftLittleIntermediate:"leftLittleProximal",leftLittleDistal:"leftLittleIntermediate",rightThumbMetacarpal:"rightHand",rightThumbProximal:"rightThumbMetacarpal",rightThumbDistal:"rightThumbProximal",rightIndexProximal:"rightHand",rightIndexIntermediate:"rightIndexProximal",rightIndexDistal:"rightIndexIntermediate",rightMiddleProximal:"rightHand",rightMiddleIntermediate:"rightMiddleProximal",rightMiddleDistal:"rightMiddleIntermediate",rightRingProximal:"rightHand",rightRingIntermediate:"rightRingProximal",rightRingDistal:"rightRingIntermediate",rightLittleProximal:"rightHand",rightLittleIntermediate:"rightLittleProximal",rightLittleDistal:"rightLittleIntermediate"};function MD(r){return r.invert?r.invert():r.inverse(),r}const gl=new H,ml=new $e;class gI{constructor(e){this.humanBones=e,this.restPose=this.getAbsolutePose()}getAbsolutePose(){const e={};return Object.keys(this.humanBones).forEach(t=>{const n=t,i=this.getBoneNode(n);i&&(gl.copy(i.position),ml.copy(i.quaternion),e[n]={position:gl.toArray(),rotation:ml.toArray()})}),e}getPose(){const e={};return Object.keys(this.humanBones).forEach(t=>{const n=t,i=this.getBoneNode(n);if(!i)return;gl.set(0,0,0),ml.identity();const s=this.restPose[n];s!=null&&s.position&&gl.fromArray(s.position).negate(),s!=null&&s.rotation&&MD(ml.fromArray(s.rotation)),gl.add(i.position),ml.premultiply(i.quaternion),e[n]={position:gl.toArray(),rotation:ml.toArray()}}),e}setPose(e){Object.entries(e).forEach(([t,n])=>{const i=t,s=this.getBoneNode(i);if(!s)return;const o=this.restPose[i];o&&(n!=null&&n.position&&(s.position.fromArray(n.position),o.position&&s.position.add(gl.fromArray(o.position))),n!=null&&n.rotation&&(s.quaternion.fromArray(n.rotation),o.rotation&&s.quaternion.multiply(ml.fromArray(o.rotation))))})}resetPose(){Object.entries(this.restPose).forEach(([e,t])=>{const n=this.getBoneNode(e);n&&(t!=null&&t.position&&n.position.fromArray(t.position),t!=null&&t.rotation&&n.quaternion.fromArray(t.rotation))})}getBone(e){var t;return(t=this.humanBones[e])!==null&&t!==void 0?t:void 0}getBoneNode(e){var t,n;return(n=(t=this.humanBones[e])===null||t===void 0?void 0:t.node)!==null&&n!==void 0?n:null}}const pq=new H,gq=new $e,mq=new H;class rB extends gI{constructor(e){const{rigBones:t,root:n,parentWorldRotations:i,boneRotations:s}=rB._setupTransforms(e);super(t),this.original=e,this.root=n,this._parentWorldRotations=i,this._boneRotations=s}static _setupTransforms(e){const t=new St;t.name="VRMHumanoidRig";const n={},i={},s={};SC.forEach(A=>{const l=e.getBoneNode(A);if(l){const c=new H,u=new $e;l.updateWorldMatrix(!0,!1),l.matrixWorld.decompose(c,u,pq),n[A]=c,i[A]=u,s[A]=l.quaternion.clone()}});const o={},a={};return SC.forEach(A=>{var l;const c=e.getBoneNode(A);if(c){const u=n[A];let f=A,d,p;for(;d==null&&(f=hq[f],f!=null);)d=n[f],p=i[f];const h=new St;h.name="Normalized_"+c.name,(f?(l=a[f])===null||l===void 0?void 0:l.node:t).add(h),h.position.copy(u),d&&h.position.sub(d),a[A]={node:h},o[A]=p??new $e}}),{rigBones:a,root:t,parentWorldRotations:o,boneRotations:s}}update(){SC.forEach(e=>{const t=this.original.getBoneNode(e);if(t!=null){const n=this.getBoneNode(e),i=this._parentWorldRotations[e],s=gq.copy(i).invert(),o=this._boneRotations[e];if(t.quaternion.copy(n.quaternion).multiply(i).premultiply(s).multiply(o),e==="hips"){const a=n.getWorldPosition(mq);t.parent.updateWorldMatrix(!0,!1);const A=t.parent.matrixWorld,l=a.applyMatrix4(A.invert());t.position.copy(l)}}})}}class iB{constructor(e,t){var n;this.autoUpdateHumanBones=(n=t==null?void 0:t.autoUpdateHumanBones)!==null&&n!==void 0?n:!0,this._rawHumanBones=new gI(e),this._normalizedHumanBones=new rB(this._rawHumanBones)}get restPose(){return console.warn("VRMHumanoid: restPose is deprecated. Use either rawRestPose or normalizedRestPose instead."),this.rawRestPose}get rawRestPose(){return this._rawHumanBones.restPose}get normalizedRestPose(){return this._normalizedHumanBones.restPose}get humanBones(){return this._rawHumanBones.humanBones}get rawHumanBones(){return this._rawHumanBones.humanBones}get normalizedHumanBones(){return this._normalizedHumanBones.humanBones}get normalizedHumanBonesRoot(){return this._normalizedHumanBones.root}copy(e){return this.autoUpdateHumanBones=e.autoUpdateHumanBones,this._rawHumanBones=new gI(e.humanBones),this._normalizedHumanBones=new rB(this._rawHumanBones),this}clone(){return new iB(this.humanBones,{autoUpdateHumanBones:this.autoUpdateHumanBones}).copy(this)}getAbsolutePose(){return console.warn("VRMHumanoid: getAbsolutePose() is deprecated. Use either getRawAbsolutePose() or getNormalizedAbsolutePose() instead."),this.getRawAbsolutePose()}getRawAbsolutePose(){return this._rawHumanBones.getAbsolutePose()}getNormalizedAbsolutePose(){return this._normalizedHumanBones.getAbsolutePose()}getPose(){return console.warn("VRMHumanoid: getPose() is deprecated. Use either getRawPose() or getNormalizedPose() instead."),this.getRawPose()}getRawPose(){return this._rawHumanBones.getPose()}getNormalizedPose(){return this._normalizedHumanBones.getPose()}setPose(e){return console.warn("VRMHumanoid: setPose() is deprecated. Use either setRawPose() or setNormalizedPose() instead."),this.setRawPose(e)}setRawPose(e){return this._rawHumanBones.setPose(e)}setNormalizedPose(e){return this._normalizedHumanBones.setPose(e)}resetPose(){return console.warn("VRMHumanoid: resetPose() is deprecated. Use either resetRawPose() or resetNormalizedPose() instead."),this.resetRawPose()}resetRawPose(){return this._rawHumanBones.resetPose()}resetNormalizedPose(){return this._normalizedHumanBones.resetPose()}getBone(e){return console.warn("VRMHumanoid: getBone() is deprecated. Use either getRawBone() or getNormalizedBone() instead."),this.getRawBone(e)}getRawBone(e){return this._rawHumanBones.getBone(e)}getNormalizedBone(e){return this._normalizedHumanBones.getBone(e)}getBoneNode(e){return console.warn("VRMHumanoid: getBoneNode() is deprecated. Use either getRawBoneNode() or getNormalizedBoneNode() instead."),this.getRawBoneNode(e)}getRawBoneNode(e){return this._rawHumanBones.getBoneNode(e)}getNormalizedBoneNode(e){return this._normalizedHumanBones.getBoneNode(e)}update(){this.autoUpdateHumanBones&&this._normalizedHumanBones.update()}}const Bq={Hips:"hips",Spine:"spine",Head:"head",LeftUpperLeg:"leftUpperLeg",LeftLowerLeg:"leftLowerLeg",LeftFoot:"leftFoot",RightUpperLeg:"rightUpperLeg",RightLowerLeg:"rightLowerLeg",RightFoot:"rightFoot",LeftUpperArm:"leftUpperArm",LeftLowerArm:"leftLowerArm",LeftHand:"leftHand",RightUpperArm:"rightUpperArm",RightLowerArm:"rightLowerArm",RightHand:"rightHand"},vq=new Set(["1.0","1.0-beta"]),A_={leftThumbProximal:"leftThumbMetacarpal",leftThumbIntermediate:"leftThumbProximal",rightThumbProximal:"rightThumbMetacarpal",rightThumbIntermediate:"rightThumbProximal"};class yq{constructor(e,t){this.parser=e,this.helperRoot=t==null?void 0:t.helperRoot,this.autoUpdateHumanBones=t==null?void 0:t.autoUpdateHumanBones}get name(){return"VRMHumanoidLoaderPlugin"}afterRoot(e){return _t(this,void 0,void 0,function*(){e.userData.vrmHumanoid=yield this._import(e)})}_import(e){return _t(this,void 0,void 0,function*(){const t=yield this._v1Import(e);if(t)return t;const n=yield this._v0Import(e);return n||null})}_v1Import(e){var t,n;return _t(this,void 0,void 0,function*(){const i=this.parser.json;if(!(((t=i.extensionsUsed)===null||t===void 0?void 0:t.indexOf("VRMC_vrm"))!==-1))return null;const o=(n=i.extensions)===null||n===void 0?void 0:n.VRMC_vrm;if(!o)return null;const a=o.specVersion;if(!vq.has(a))return console.warn(`VRMHumanoidLoaderPlugin: Unknown VRMC_vrm specVersion "${a}"`),null;const A=o.humanoid;if(!A)return null;const l=A.humanBones.leftThumbIntermediate!=null||A.humanBones.rightThumbIntermediate!=null,c={};A.humanBones!=null&&(yield Promise.all(Object.entries(A.humanBones).map(([f,d])=>_t(this,void 0,void 0,function*(){let p=f;const h=d.node;if(l){const g=A_[p];g!=null&&(p=g)}const m=yield this.parser.getDependency("node",h);if(m==null){console.warn(`A glTF node bound to the humanoid bone ${p} (index = ${h}) does not exist`);return}c[p]={node:m}}))));const u=new iB(this._ensureRequiredBonesExist(c),{autoUpdateHumanBones:this.autoUpdateHumanBones});if(e.scene.add(u.normalizedHumanBonesRoot),this.helperRoot){const f=new o_(u);this.helperRoot.add(f),f.renderOrder=this.helperRoot.renderOrder}return u})}_v0Import(e){var t;return _t(this,void 0,void 0,function*(){const i=(t=this.parser.json.extensions)===null||t===void 0?void 0:t.VRM;if(!i)return null;const s=i.humanoid;if(!s)return null;const o={};s.humanBones!=null&&(yield Promise.all(s.humanBones.map(A=>_t(this,void 0,void 0,function*(){const l=A.bone,c=A.node;if(l==null||c==null)return;const u=yield this.parser.getDependency("node",c);if(u==null){console.warn(`A glTF node bound to the humanoid bone ${l} (index = ${c}) does not exist`);return}const f=A_[l],d=f??l;if(o[d]!=null){console.warn(`Multiple bone entries for ${d} detected (index = ${c}), ignoring duplicated entries.`);return}o[d]={node:u}}))));const a=new iB(this._ensureRequiredBonesExist(o),{autoUpdateHumanBones:this.autoUpdateHumanBones});if(e.scene.add(a.normalizedHumanBonesRoot),this.helperRoot){const A=new o_(a);this.helperRoot.add(A),A.renderOrder=this.helperRoot.renderOrder}return a})}_ensureRequiredBonesExist(e){const t=Object.values(Bq).filter(n=>e[n]==null);if(t.length>0)throw new Error(`VRMHumanoidLoaderPlugin: These humanoid bones are required but not exist: ${t.join(", ")}`);return e}}class l_ extends Xt{constructor(){super(),this._currentTheta=0,this._currentRadius=0,this.theta=0,this.radius=0,this._currentTheta=0,this._currentRadius=0,this._attrPos=new pt(new Float32Array(65*3),3),this.setAttribute("position",this._attrPos),this._attrIndex=new pt(new Uint16Array(3*63),1),this.setIndex(this._attrIndex),this._buildIndex(),this.update()}update(){let e=!1;this._currentTheta!==this.theta&&(this._currentTheta=this.theta,e=!0),this._currentRadius!==this.radius&&(this._currentRadius=this.radius,e=!0),e&&this._buildPosition()}_buildPosition(){this._attrPos.setXYZ(0,0,0,0);for(let e=0;e<64;e++){const t=e/63*this._currentTheta;this._attrPos.setXYZ(e+1,this._currentRadius*Math.sin(t),0,this._currentRadius*Math.cos(t))}this._attrPos.needsUpdate=!0}_buildIndex(){for(let e=0;e<63;e++)this._attrIndex.setXYZ(e*3,0,e+1,e+2);this._attrIndex.needsUpdate=!0}}class Cq extends Xt{constructor(){super(),this.radius=0,this._currentRadius=0,this.tail=new H,this._currentTail=new H,this._attrPos=new pt(new Float32Array(294),3),this.setAttribute("position",this._attrPos),this._attrIndex=new pt(new Uint16Array(194),1),this.setIndex(this._attrIndex),this._buildIndex(),this.update()}update(){let e=!1;this._currentRadius!==this.radius&&(this._currentRadius=this.radius,e=!0),this._currentTail.equals(this.tail)||(this._currentTail.copy(this.tail),e=!0),e&&this._buildPosition()}_buildPosition(){for(let e=0;e<32;e++){const t=e/16*Math.PI;this._attrPos.setXYZ(e,Math.cos(t),Math.sin(t),0),this._attrPos.setXYZ(32+e,0,Math.cos(t),Math.sin(t)),this._attrPos.setXYZ(64+e,Math.sin(t),0,Math.cos(t))}this.scale(this._currentRadius,this._currentRadius,this._currentRadius),this.translate(this._currentTail.x,this._currentTail.y,this._currentTail.z),this._attrPos.setXYZ(96,0,0,0),this._attrPos.setXYZ(97,this._currentTail.x,this._currentTail.y,this._currentTail.z),this._attrPos.needsUpdate=!0}_buildIndex(){for(let e=0;e<32;e++){const t=(e+1)%32;this._attrIndex.setXY(e*2,e,t),this._attrIndex.setXY(64+e*2,32+e,32+t),this._attrIndex.setXY(128+e*2,64+e,64+t)}this._attrIndex.setXY(192,96,97),this._attrIndex.needsUpdate=!0}}const nm=new $e,c_=new $e,Cd=new H,u_=new H,f_=Math.sqrt(2)/2,wq=new $e(0,0,-f_,f_),Fq=new H(0,1,0);class Iq extends Qr{constructor(e){super(),this.matrixAutoUpdate=!1,this.vrmLookAt=e;{const t=new l_;t.radius=.5;const n=new Io({color:65280,transparent:!0,opacity:.5,side:Va,depthTest:!1,depthWrite:!1});this._meshPitch=new bn(t,n),this.add(this._meshPitch)}{const t=new l_;t.radius=.5;const n=new Io({color:16711680,transparent:!0,opacity:.5,side:Va,depthTest:!1,depthWrite:!1});this._meshYaw=new bn(t,n),this.add(this._meshYaw)}{const t=new Cq;t.radius=.1;const n=new Ja({color:16777215,depthTest:!1,depthWrite:!1});this._lineTarget=new Rp(t,n),this._lineTarget.frustumCulled=!1,this.add(this._lineTarget)}}dispose(){this._meshYaw.geometry.dispose(),this._meshYaw.material.dispose(),this._meshPitch.geometry.dispose(),this._meshPitch.material.dispose(),this._lineTarget.geometry.dispose(),this._lineTarget.material.dispose()}updateMatrixWorld(e){const t=It.DEG2RAD*this.vrmLookAt.yaw;this._meshYaw.geometry.theta=t,this._meshYaw.geometry.update();const n=It.DEG2RAD*this.vrmLookAt.pitch;this._meshPitch.geometry.theta=n,this._meshPitch.geometry.update(),this.vrmLookAt.getLookAtWorldPosition(Cd),this.vrmLookAt.getLookAtWorldQuaternion(nm),nm.multiply(this.vrmLookAt.getFaceFrontQuaternion(c_)),this._meshYaw.position.copy(Cd),this._meshYaw.quaternion.copy(nm),this._meshPitch.position.copy(Cd),this._meshPitch.quaternion.copy(nm),this._meshPitch.quaternion.multiply(c_.setFromAxisAngle(Fq,t)),this._meshPitch.quaternion.multiply(wq);const{target:i,autoUpdate:s}=this.vrmLookAt;i!=null&&s&&(i.getWorldPosition(u_).sub(Cd),this._lineTarget.geometry.tail.copy(u_),this._lineTarget.geometry.update(),this._lineTarget.position.copy(Cd)),super.updateMatrixWorld(e)}}const Uq=new H,xq=new H;function mI(r,e){return r.matrixWorld.decompose(Uq,e,xq),e}function Xm(r){return[Math.atan2(-r.z,r.x),Math.atan2(r.y,Math.sqrt(r.x*r.x+r.z*r.z))]}function d_(r){const e=Math.round(r/2/Math.PI);return r-2*Math.PI*e}const h_=new H(0,0,1),Qq=new H,bq=new H,Eq=new H,Sq=new $e,_C=new $e,p_=new $e,_q=new $e,RC=new xr;class xv{constructor(e,t){this.offsetFromHeadBone=new H,this.autoUpdate=!0,this.faceFront=new H(0,0,1),this.humanoid=e,this.applier=t,this._yaw=0,this._pitch=0,this._needsUpdate=!0,this._restHeadWorldQuaternion=this.getLookAtWorldQuaternion(new $e)}get yaw(){return this._yaw}set yaw(e){this._yaw=e,this._needsUpdate=!0}get pitch(){return this._pitch}set pitch(e){this._pitch=e,this._needsUpdate=!0}get euler(){return console.warn("VRMLookAt: euler is deprecated. use getEuler() instead."),this.getEuler(new xr)}getEuler(e){return e.set(It.DEG2RAD*this._pitch,It.DEG2RAD*this._yaw,0,"YXZ")}copy(e){if(this.humanoid!==e.humanoid)throw new Error("VRMLookAt: humanoid must be same in order to copy");return this.offsetFromHeadBone.copy(e.offsetFromHeadBone),this.applier=e.applier,this.autoUpdate=e.autoUpdate,this.target=e.target,this.faceFront.copy(e.faceFront),this}clone(){return new xv(this.humanoid,this.applier).copy(this)}reset(){this._yaw=0,this._pitch=0,this._needsUpdate=!0}getLookAtWorldPosition(e){const t=this.humanoid.getRawBoneNode("head");return e.copy(this.offsetFromHeadBone).applyMatrix4(t.matrixWorld)}getLookAtWorldQuaternion(e){const t=this.humanoid.getRawBoneNode("head");return mI(t,e)}getFaceFrontQuaternion(e){if(this.faceFront.distanceToSquared(h_)<.01)return e.copy(this._restHeadWorldQuaternion).invert();const[t,n]=Xm(this.faceFront);return RC.set(0,.5*Math.PI+t,n,"YZX"),e.setFromEuler(RC).premultiply(_q.copy(this._restHeadWorldQuaternion).invert())}getLookAtWorldDirection(e){return this.getLookAtWorldQuaternion(_C),this.getFaceFrontQuaternion(p_),e.copy(h_).applyQuaternion(_C).applyQuaternion(p_).applyEuler(this.getEuler(RC))}lookAt(e){const t=Sq.copy(this._restHeadWorldQuaternion).multiply(MD(this.getLookAtWorldQuaternion(_C))),n=this.getLookAtWorldPosition(bq),i=Eq.copy(e).sub(n).applyQuaternion(t).normalize(),[s,o]=Xm(this.faceFront),[a,A]=Xm(i),l=d_(a-s),c=d_(o-A);this._yaw=It.RAD2DEG*l,this._pitch=It.RAD2DEG*c,this._needsUpdate=!0}update(e){this.target!=null&&this.autoUpdate&&this.lookAt(this.target.getWorldPosition(Qq)),this._needsUpdate&&(this._needsUpdate=!1,this.applier.applyYawPitch(this._yaw,this._pitch))}}xv.EULER_ORDER="YXZ";const Rq=new H(0,0,1),ro=new $e,Gc=new $e,Ji=new xr(0,0,0,"YXZ");class Ym{constructor(e,t,n,i,s){this.humanoid=e,this.rangeMapHorizontalInner=t,this.rangeMapHorizontalOuter=n,this.rangeMapVerticalDown=i,this.rangeMapVerticalUp=s,this.faceFront=new H(0,0,1),this._restQuatLeftEye=new $e,this._restQuatRightEye=new $e,this._restLeftEyeParentWorldQuat=new $e,this._restRightEyeParentWorldQuat=new $e;const o=this.humanoid.getRawBoneNode("leftEye"),a=this.humanoid.getRawBoneNode("rightEye");o&&(this._restQuatLeftEye.copy(o.quaternion),mI(o.parent,this._restLeftEyeParentWorldQuat)),a&&(this._restQuatRightEye.copy(a.quaternion),mI(a.parent,this._restRightEyeParentWorldQuat))}applyYawPitch(e,t){const n=this.humanoid.getRawBoneNode("leftEye"),i=this.humanoid.getRawBoneNode("rightEye"),s=this.humanoid.getNormalizedBoneNode("leftEye"),o=this.humanoid.getNormalizedBoneNode("rightEye");n&&(t<0?Ji.x=-It.DEG2RAD*this.rangeMapVerticalDown.map(-t):Ji.x=It.DEG2RAD*this.rangeMapVerticalUp.map(t),e<0?Ji.y=-It.DEG2RAD*this.rangeMapHorizontalInner.map(-e):Ji.y=It.DEG2RAD*this.rangeMapHorizontalOuter.map(e),ro.setFromEuler(Ji),this._getWorldFaceFrontQuat(Gc),s.quaternion.copy(Gc).multiply(ro).multiply(Gc.invert()),ro.copy(this._restLeftEyeParentWorldQuat),n.quaternion.copy(s.quaternion).multiply(ro).premultiply(ro.invert()).multiply(this._restQuatLeftEye)),i&&(t<0?Ji.x=-It.DEG2RAD*this.rangeMapVerticalDown.map(-t):Ji.x=It.DEG2RAD*this.rangeMapVerticalUp.map(t),e<0?Ji.y=-It.DEG2RAD*this.rangeMapHorizontalOuter.map(-e):Ji.y=It.DEG2RAD*this.rangeMapHorizontalInner.map(e),ro.setFromEuler(Ji),this._getWorldFaceFrontQuat(Gc),o.quaternion.copy(Gc).multiply(ro).multiply(Gc.invert()),ro.copy(this._restRightEyeParentWorldQuat),i.quaternion.copy(o.quaternion).multiply(ro).premultiply(ro.invert()).multiply(this._restQuatRightEye))}lookAt(e){console.warn("VRMLookAtBoneApplier: lookAt() is deprecated. use apply() instead.");const t=It.RAD2DEG*e.y,n=It.RAD2DEG*e.x;this.applyYawPitch(t,n)}_getWorldFaceFrontQuat(e){if(this.faceFront.distanceToSquared(Rq)<.01)return e.identity();const[t,n]=Xm(this.faceFront);return Ji.set(0,.5*Math.PI+t,n,"YZX"),e.setFromEuler(Ji)}}Ym.type="bone";class BI{constructor(e,t,n,i,s){this.expressions=e,this.rangeMapHorizontalInner=t,this.rangeMapHorizontalOuter=n,this.rangeMapVerticalDown=i,this.rangeMapVerticalUp=s}applyYawPitch(e,t){t<0?(this.expressions.setValue("lookDown",0),this.expressions.setValue("lookUp",this.rangeMapVerticalUp.map(-t))):(this.expressions.setValue("lookUp",0),this.expressions.setValue("lookDown",this.rangeMapVerticalDown.map(t))),e<0?(this.expressions.setValue("lookLeft",0),this.expressions.setValue("lookRight",this.rangeMapHorizontalOuter.map(-e))):(this.expressions.setValue("lookRight",0),this.expressions.setValue("lookLeft",this.rangeMapHorizontalOuter.map(e)))}lookAt(e){console.warn("VRMLookAtBoneApplier: lookAt() is deprecated. use apply() instead.");const t=It.RAD2DEG*e.y,n=It.RAD2DEG*e.x;this.applyYawPitch(t,n)}}BI.type="expression";class g_{constructor(e,t){this.inputMaxValue=e,this.outputScale=t}map(e){return this.outputScale*RD(e/this.inputMaxValue)}}const Mq=new Set(["1.0","1.0-beta"]);class Tq{constructor(e,t){this.parser=e,this.helperRoot=t==null?void 0:t.helperRoot}get name(){return"VRMLookAtLoaderPlugin"}afterRoot(e){return _t(this,void 0,void 0,function*(){const t=e.userData.vrmHumanoid;if(t===null)return;if(t===void 0)throw new Error("VRMLookAtLoaderPlugin: vrmHumanoid is undefined. VRMHumanoidLoaderPlugin have to be used first");const n=e.userData.vrmExpressionManager;if(n!==null){if(n===void 0)throw new Error("VRMLookAtLoaderPlugin: vrmExpressionManager is undefined. VRMExpressionLoaderPlugin have to be used first");e.userData.vrmLookAt=yield this._import(e,t,n)}})}_import(e,t,n){return _t(this,void 0,void 0,function*(){if(t==null||n==null)return null;const i=yield this._v1Import(e,t,n);if(i)return i;const s=yield this._v0Import(e,t,n);return s||null})}_v1Import(e,t,n){var i,s,o;return _t(this,void 0,void 0,function*(){const a=this.parser.json;if(!(((i=a.extensionsUsed)===null||i===void 0?void 0:i.indexOf("VRMC_vrm"))!==-1))return null;const l=(s=a.extensions)===null||s===void 0?void 0:s.VRMC_vrm;if(!l)return null;const c=l.specVersion;if(!Mq.has(c))return console.warn(`VRMLookAtLoaderPlugin: Unknown VRMC_vrm specVersion "${c}"`),null;const u=l.lookAt;if(!u)return null;const f=u.type==="expression"?1:10,d=this._v1ImportRangeMap(u.rangeMapHorizontalInner,f),p=this._v1ImportRangeMap(u.rangeMapHorizontalOuter,f),h=this._v1ImportRangeMap(u.rangeMapVerticalDown,f),m=this._v1ImportRangeMap(u.rangeMapVerticalUp,f);let g;u.type==="expression"?g=new BI(n,d,p,h,m):g=new Ym(t,d,p,h,m);const B=this._importLookAt(t,g);return B.offsetFromHeadBone.fromArray((o=u.offsetFromHeadBone)!==null&&o!==void 0?o:[0,.06,0]),B})}_v1ImportRangeMap(e,t){var n,i;return new g_((n=e==null?void 0:e.inputMaxValue)!==null&&n!==void 0?n:90,(i=e==null?void 0:e.outputScale)!==null&&i!==void 0?i:t)}_v0Import(e,t,n){var i,s,o,a;return _t(this,void 0,void 0,function*(){const l=(i=this.parser.json.extensions)===null||i===void 0?void 0:i.VRM;if(!l)return null;const c=l.firstPerson;if(!c)return null;const u=c.lookAtTypeName==="BlendShape"?1:10,f=this._v0ImportDegreeMap(c.lookAtHorizontalInner,u),d=this._v0ImportDegreeMap(c.lookAtHorizontalOuter,u),p=this._v0ImportDegreeMap(c.lookAtVerticalDown,u),h=this._v0ImportDegreeMap(c.lookAtVerticalUp,u);let m;c.lookAtTypeName==="BlendShape"?m=new BI(n,f,d,p,h):m=new Ym(t,f,d,p,h);const g=this._importLookAt(t,m);return c.firstPersonBoneOffset?g.offsetFromHeadBone.set((s=c.firstPersonBoneOffset.x)!==null&&s!==void 0?s:0,(o=c.firstPersonBoneOffset.y)!==null&&o!==void 0?o:.06,-((a=c.firstPersonBoneOffset.z)!==null&&a!==void 0?a:0)):g.offsetFromHeadBone.set(0,.06,0),g.faceFront.set(0,0,-1),m instanceof Ym&&m.faceFront.set(0,0,-1),g})}_v0ImportDegreeMap(e,t){var n,i;const s=e==null?void 0:e.curve;return JSON.stringify(s)!=="[0,0,0,1,1,1,1,0]"&&console.warn("Curves of LookAtDegreeMap defined in VRM 0.0 are not supported"),new g_((n=e==null?void 0:e.xRange)!==null&&n!==void 0?n:90,(i=e==null?void 0:e.yRange)!==null&&i!==void 0?i:t)}_importLookAt(e,t){const n=new xv(e,t);if(this.helperRoot){const i=new Iq(n);this.helperRoot.add(i),i.renderOrder=this.helperRoot.renderOrder}return n}}function Nq(r,e){return typeof r!="string"||r===""?"":(/^https?:\/\//i.test(e)&&/^\//.test(r)&&(e=e.replace(/(^https?:\/\/[^/]+).*/i,"$1")),/^(https?:)?\/\//i.test(r)||/^data:.*,.*$/i.test(r)||/^blob:.*$/i.test(r)?r:e+r)}const Vq=new Set(["1.0","1.0-beta"]);class Dq{constructor(e,t){var n,i,s;this.parser=e,this.needThumbnailImage=(n=t==null?void 0:t.needThumbnailImage)!==null&&n!==void 0?n:!0,this.acceptLicenseUrls=(i=t==null?void 0:t.acceptLicenseUrls)!==null&&i!==void 0?i:["https://vrm.dev/licenses/1.0/"],this.acceptV0Meta=(s=t==null?void 0:t.acceptV0Meta)!==null&&s!==void 0?s:!0}get name(){return"VRMMetaLoaderPlugin"}afterRoot(e){return _t(this,void 0,void 0,function*(){e.userData.vrmMeta=yield this._import(e)})}_import(e){return _t(this,void 0,void 0,function*(){const t=yield this._v1Import(e);if(t!=null)return t;const n=yield this._v0Import(e);return n??null})}_v1Import(e){var t,n,i;return _t(this,void 0,void 0,function*(){const s=this.parser.json;if(!(((t=s.extensionsUsed)===null||t===void 0?void 0:t.indexOf("VRMC_vrm"))!==-1))return null;const a=(n=s.extensions)===null||n===void 0?void 0:n.VRMC_vrm;if(a==null)return null;const A=a.specVersion;if(!Vq.has(A))return console.warn(`VRMMetaLoaderPlugin: Unknown VRMC_vrm specVersion "${A}"`),null;const l=a.meta;if(!l)return null;const c=l.licenseUrl;if(!new Set(this.acceptLicenseUrls).has(c))throw new Error(`VRMMetaLoaderPlugin: The license url "${c}" is not accepted`);let f;return this.needThumbnailImage&&l.thumbnailImage!=null&&(f=(i=yield this._extractGLTFImage(l.thumbnailImage))!==null&&i!==void 0?i:void 0),{metaVersion:"1",name:l.name,version:l.version,authors:l.authors,copyrightInformation:l.copyrightInformation,contactInformation:l.contactInformation,references:l.references,thirdPartyLicenses:l.thirdPartyLicenses,thumbnailImage:f,licenseUrl:l.licenseUrl,avatarPermission:l.avatarPermission,allowExcessivelyViolentUsage:l.allowExcessivelyViolentUsage,allowExcessivelySexualUsage:l.allowExcessivelySexualUsage,commercialUsage:l.commercialUsage,allowPoliticalOrReligiousUsage:l.allowPoliticalOrReligiousUsage,allowAntisocialOrHateUsage:l.allowAntisocialOrHateUsage,creditNotation:l.creditNotation,allowRedistribution:l.allowRedistribution,modification:l.modification,otherLicenseUrl:l.otherLicenseUrl}})}_v0Import(e){var t;return _t(this,void 0,void 0,function*(){const i=(t=this.parser.json.extensions)===null||t===void 0?void 0:t.VRM;if(!i)return null;const s=i.meta;if(!s)return null;if(!this.acceptV0Meta)throw new Error("VRMMetaLoaderPlugin: Attempted to load VRM0.0 meta but acceptV0Meta is false");let o;return this.needThumbnailImage&&s.texture!=null&&s.texture!==-1&&(o=yield this.parser.getDependency("texture",s.texture)),{metaVersion:"0",allowedUserName:s.allowedUserName,author:s.author,commercialUssageName:s.commercialUssageName,contactInformation:s.contactInformation,licenseName:s.licenseName,otherLicenseUrl:s.otherLicenseUrl,otherPermissionUrl:s.otherPermissionUrl,reference:s.reference,sexualUssageName:s.sexualUssageName,texture:o??void 0,title:s.title,version:s.version,violentUssageName:s.violentUssageName}})}_extractGLTFImage(e){var t;return _t(this,void 0,void 0,function*(){const i=(t=this.parser.json.images)===null||t===void 0?void 0:t[e];if(i==null)return console.warn(`VRMMetaLoaderPlugin: Attempt to use images[${e}] of glTF as a thumbnail but the image doesn't exist`),null;let s=i.uri;if(i.bufferView!=null){const a=yield this.parser.getDependency("bufferView",i.bufferView),A=new Blob([a],{type:i.mimeType});s=URL.createObjectURL(A)}return s==null?(console.warn(`VRMMetaLoaderPlugin: Attempt to use images[${e}] of glTF as a thumbnail but the image couldn't load properly`),null):yield new bV().loadAsync(Nq(s,this.parser.options.path)).catch(a=>(console.error(a),console.warn("VRMMetaLoaderPlugin: Failed to load a thumbnail image"),null))})}}class kq{constructor(e){this.scene=e.scene,this.meta=e.meta,this.humanoid=e.humanoid,this.expressionManager=e.expressionManager,this.firstPerson=e.firstPerson,this.lookAt=e.lookAt}update(e){this.humanoid.update(),this.lookAt&&this.lookAt.update(e),this.expressionManager&&this.expressionManager.update()}}class Lq extends kq{constructor(e){super(e),this.materials=e.materials,this.springBoneManager=e.springBoneManager,this.nodeConstraintManager=e.nodeConstraintManager}update(e){super.update(e),this.nodeConstraintManager&&this.nodeConstraintManager.update(),this.springBoneManager&&this.springBoneManager.update(e),this.materials&&this.materials.forEach(t=>{t.update&&t.update(e)})}}function rm(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(c){try{l(n.next(c))}catch(u){o(u)}}function A(c){try{l(n.throw(c))}catch(u){o(u)}}function l(c){c.done?s(c.value):i(c.value).then(a,A)}l((n=n.apply(r,e||[])).next())})}/*!
 * @pixiv/three-vrm-materials-mtoon v1.0.9
 * MToon (toon material) module for @pixiv/three-vrm
 *
 * Copyright (c) 2020-2023 pixiv Inc.
 * @pixiv/three-vrm-materials-mtoon is distributed under MIT License
 * https://github.com/pixiv/three-vrm/blob/release/LICENSE
 */function Nl(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(c){try{l(n.next(c))}catch(u){o(u)}}function A(c){try{l(n.throw(c))}catch(u){o(u)}}function l(c){c.done?s(c.value):i(c.value).then(a,A)}l((n=n.apply(r,e||[])).next())})}var Wq=`// #define PHONG

varying vec3 vViewPosition;

#ifndef FLAT_SHADED
  varying vec3 vNormal;
#endif

#include <common>

// #include <uv_pars_vertex>
#ifdef MTOON_USE_UV
  varying vec2 vUv;
  uniform mat3 uvTransform;
#endif

#include <uv2_pars_vertex>
// #include <displacementmap_pars_vertex>
// #include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>

#ifdef USE_OUTLINEWIDTHMULTIPLYTEXTURE
  uniform sampler2D outlineWidthMultiplyTexture;
  uniform mat3 outlineWidthMultiplyTextureUvTransform;
#endif

uniform float outlineWidthFactor;

void main() {

  // #include <uv_vertex>
  #ifdef MTOON_USE_UV
    vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
  #endif

  #include <uv2_vertex>
  #include <color_vertex>

  #include <beginnormal_vertex>
  #include <morphnormal_vertex>
  #include <skinbase_vertex>
  #include <skinnormal_vertex>

  // we need this to compute the outline properly
  objectNormal = normalize( objectNormal );

  #include <defaultnormal_vertex>

  #ifndef FLAT_SHADED // Normal computed with derivatives when FLAT_SHADED
    vNormal = normalize( transformedNormal );
  #endif

  #include <begin_vertex>

  #include <morphtarget_vertex>
  #include <skinning_vertex>
  // #include <displacementmap_vertex>
  #include <project_vertex>
  #include <logdepthbuf_vertex>
  #include <clipping_planes_vertex>

  vViewPosition = - mvPosition.xyz;

  float outlineTex = 1.0;

  #ifdef OUTLINE
    #ifdef USE_OUTLINEWIDTHMULTIPLYTEXTURE
      vec2 outlineWidthMultiplyTextureUv = ( outlineWidthMultiplyTextureUvTransform * vec3( vUv, 1 ) ).xy;
      outlineTex = texture2D( outlineWidthMultiplyTexture, outlineWidthMultiplyTextureUv ).g;
    #endif

    #ifdef OUTLINE_WIDTH_WORLD
      float worldNormalLength = length( transformedNormal );
      vec3 outlineOffset = outlineWidthFactor * outlineTex * worldNormalLength * objectNormal;
      gl_Position = projectionMatrix * modelViewMatrix * vec4( outlineOffset + transformed, 1.0 );
    #endif

    #ifdef OUTLINE_WIDTH_SCREEN
      vec3 clipNormal = ( projectionMatrix * modelViewMatrix * vec4( objectNormal, 0.0 ) ).xyz;
      vec2 projectedNormal = normalize( clipNormal.xy );
      projectedNormal.x *= projectionMatrix[ 0 ].x / projectionMatrix[ 1 ].y;
      gl_Position.xy += 2.0 * outlineWidthFactor * outlineTex * projectedNormal.xy;
    #endif

    gl_Position.z += 1E-6 * gl_Position.w; // anti-artifact magic
  #endif

  #include <worldpos_vertex>
  // #include <envmap_vertex>
  #include <shadowmap_vertex>
  #include <fog_vertex>

}`,Zq=`// #define PHONG

uniform vec3 litFactor;

uniform float opacity;

uniform vec3 shadeColorFactor;
#ifdef USE_SHADEMULTIPLYTEXTURE
  uniform sampler2D shadeMultiplyTexture;
  uniform mat3 shadeMultiplyTextureUvTransform;
#endif

uniform float shadingShiftFactor;
uniform float shadingToonyFactor;

#ifdef USE_SHADINGSHIFTTEXTURE
  uniform sampler2D shadingShiftTexture;
  uniform mat3 shadingShiftTextureUvTransform;
  uniform float shadingShiftTextureScale;
#endif

uniform float giEqualizationFactor;

uniform vec3 parametricRimColorFactor;
#ifdef USE_RIMMULTIPLYTEXTURE
  uniform sampler2D rimMultiplyTexture;
  uniform mat3 rimMultiplyTextureUvTransform;
#endif
uniform float rimLightingMixFactor;
uniform float parametricRimFresnelPowerFactor;
uniform float parametricRimLiftFactor;

#ifdef USE_MATCAPTEXTURE
  uniform vec3 matcapFactor;
  uniform sampler2D matcapTexture;
  uniform mat3 matcapTextureUvTransform;
#endif

uniform vec3 emissive;
uniform float emissiveIntensity;

uniform vec3 outlineColorFactor;
uniform float outlineLightingMixFactor;

#ifdef USE_UVANIMATIONMASKTEXTURE
  uniform sampler2D uvAnimationMaskTexture;
  uniform mat3 uvAnimationMaskTextureUvTransform;
#endif

uniform float uvAnimationScrollXOffset;
uniform float uvAnimationScrollYOffset;
uniform float uvAnimationRotationPhase;

#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>

// #include <uv_pars_fragment>
#if ( defined( MTOON_USE_UV ) && !defined( MTOON_UVS_VERTEX_ONLY ) )
  varying vec2 vUv;
#endif

#include <uv2_pars_fragment>
#include <map_pars_fragment>

#ifdef USE_MAP
  uniform mat3 mapUvTransform;
#endif

// #include <alphamap_pars_fragment>

#if THREE_VRM_THREE_REVISION >= 132
  #include <alphatest_pars_fragment>
#endif

#include <aomap_pars_fragment>
// #include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>

#ifdef USE_EMISSIVEMAP
  uniform mat3 emissiveMapUvTransform;
#endif

// #include <envmap_common_pars_fragment>
// #include <envmap_pars_fragment>
// #include <cube_uv_reflection_fragment>
#include <fog_pars_fragment>

// #include <bsdfs>
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
  return RECIPROCAL_PI * diffuseColor;
}

#include <lights_pars_begin>

#if THREE_VRM_THREE_REVISION >= 132
  #include <normal_pars_fragment>
#endif

// #include <lights_phong_pars_fragment>
varying vec3 vViewPosition;

#if THREE_VRM_THREE_REVISION < 132
  #ifndef FLAT_SHADED
    varying vec3 vNormal;
  #endif
#endif

struct MToonMaterial {
  vec3 diffuseColor;
  vec3 shadeColor;
  float shadingShift;
};

float linearstep( float a, float b, float t ) {
  return clamp( ( t - a ) / ( b - a ), 0.0, 1.0 );
}

/**
 * Convert NdotL into toon shading factor using shadingShift and shadingToony
 */
float getShading(
  const in float dotNL,
  const in float shadow,
  const in float shadingShift
) {
  float shading = dotNL;
  shading = shading + shadingShift;
  shading = linearstep( -1.0 + shadingToonyFactor, 1.0 - shadingToonyFactor, shading );
  shading *= shadow;
  return shading;
}

/**
 * Mix diffuseColor and shadeColor using shading factor and light color
 */
vec3 getDiffuse(
  const in MToonMaterial material,
  const in float shading,
  in vec3 lightColor
) {
  #ifdef DEBUG_LITSHADERATE
    return vec3( BRDF_Lambert( shading * lightColor ) );
  #endif

  #if THREE_VRM_THREE_REVISION < 132
    #ifndef PHYSICALLY_CORRECT_LIGHTS
      lightColor *= PI;
    #endif
  #endif

  vec3 col = lightColor * BRDF_Lambert( mix( material.shadeColor, material.diffuseColor, shading ) );

  // The "comment out if you want to PBR absolutely" line
  #ifdef V0_COMPAT_SHADE
    col = min( col, material.diffuseColor );
  #endif

  return col;
}

void RE_Direct_MToon( const in IncidentLight directLight, const in GeometricContext geometry, const in MToonMaterial material, const in float shadow, inout ReflectedLight reflectedLight ) {
  float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
  vec3 irradiance = directLight.color;

  #if THREE_VRM_THREE_REVISION < 132
    #ifndef PHYSICALLY_CORRECT_LIGHTS
      irradiance *= PI;
    #endif
  #endif

  // directSpecular will be used for rim lighting, not an actual specular
  reflectedLight.directSpecular += irradiance;

  irradiance *= dotNL;

  float shading = getShading( dotNL, shadow, material.shadingShift );

  // toon shaded diffuse
  reflectedLight.directDiffuse += getDiffuse( material, shading, directLight.color );
}

void RE_IndirectDiffuse_MToon( const in vec3 irradiance, const in GeometricContext geometry, const in MToonMaterial material, inout ReflectedLight reflectedLight ) {
  // indirect diffuse will use diffuseColor, no shadeColor involved
  reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );

  // directSpecular will be used for rim lighting, not an actual specular
  reflectedLight.directSpecular += irradiance;
}

#define RE_Direct RE_Direct_MToon
#define RE_IndirectDiffuse RE_IndirectDiffuse_MToon
#define Material_LightProbeLOD( material ) (0)

#include <shadowmap_pars_fragment>
// #include <bumpmap_pars_fragment>

// #include <normalmap_pars_fragment>
#ifdef USE_NORMALMAP

  uniform sampler2D normalMap;
  uniform mat3 normalMapUvTransform;
  uniform vec2 normalScale;

#endif

#ifdef OBJECTSPACE_NORMALMAP

  uniform mat3 normalMatrix;

#endif

#if ! defined ( USE_TANGENT ) && defined ( TANGENTSPACE_NORMALMAP )

  // Per-Pixel Tangent Space Normal Mapping
  // http://hacksoflife.blogspot.ch/2009/11/per-pixel-tangent-space-normal-mapping.html

  // three-vrm specific change: it requires \`uv\` as an input in order to support uv scrolls

  // Temporary compat against shader change @ Three.js r126
  // See: #21205, #21307, #21299
  #if THREE_VRM_THREE_REVISION >= 126

    vec3 perturbNormal2Arb( vec2 uv, vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {

      vec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );
      vec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );
      vec2 st0 = dFdx( uv.st );
      vec2 st1 = dFdy( uv.st );

      vec3 N = normalize( surf_norm );

      vec3 q1perp = cross( q1, N );
      vec3 q0perp = cross( N, q0 );

      vec3 T = q1perp * st0.x + q0perp * st1.x;
      vec3 B = q1perp * st0.y + q0perp * st1.y;

      // three-vrm specific change: Workaround for the issue that happens when delta of uv = 0.0
      // TODO: Is this still required? Or shall I make a PR about it?
      if ( length( T ) == 0.0 || length( B ) == 0.0 ) {
        return surf_norm;
      }

      float det = max( dot( T, T ), dot( B, B ) );
      float scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );

      return normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );

    }

  #else

    vec3 perturbNormal2Arb( vec2 uv, vec3 eye_pos, vec3 surf_norm, vec3 mapN ) {

      // Workaround for Adreno 3XX dFd*( vec3 ) bug. See #9988

      vec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );
      vec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );
      vec2 st0 = dFdx( uv.st );
      vec2 st1 = dFdy( uv.st );

      float scale = sign( st1.t * st0.s - st0.t * st1.s ); // we do not care about the magnitude

      vec3 S = ( q0 * st1.t - q1 * st0.t ) * scale;
      vec3 T = ( - q0 * st1.s + q1 * st0.s ) * scale;

      // three-vrm specific change: Workaround for the issue that happens when delta of uv = 0.0
      // TODO: Is this still required? Or shall I make a PR about it?

      if ( length( S ) == 0.0 || length( T ) == 0.0 ) {
        return surf_norm;
      }

      S = normalize( S );
      T = normalize( T );
      vec3 N = normalize( surf_norm );

      #ifdef DOUBLE_SIDED

        // Workaround for Adreno GPUs gl_FrontFacing bug. See #15850 and #10331

        bool frontFacing = dot( cross( S, T ), N ) > 0.0;

        mapN.xy *= ( float( frontFacing ) * 2.0 - 1.0 );

      #else

        mapN.xy *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );

      #endif

      mat3 tsn = mat3( S, T, N );
      return normalize( tsn * mapN );

    }

  #endif

#endif

// #include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>

// == post correction ==========================================================
void postCorrection() {
  #include <tonemapping_fragment>
  #include <encodings_fragment>
  #include <fog_fragment>
  #include <premultiplied_alpha_fragment>
  #include <dithering_fragment>
}

// == main procedure ===========================================================
void main() {
  #include <clipping_planes_fragment>

  vec2 uv = vec2(0.5, 0.5);

  #if ( defined( MTOON_USE_UV ) && !defined( MTOON_UVS_VERTEX_ONLY ) )
    uv = vUv;

    float uvAnimMask = 1.0;
    #ifdef USE_UVANIMATIONMASKTEXTURE
      vec2 uvAnimationMaskTextureUv = ( uvAnimationMaskTextureUvTransform * vec3( uv, 1 ) ).xy;
      uvAnimMask = texture2D( uvAnimationMaskTexture, uvAnimationMaskTextureUv ).b;
    #endif

    uv = uv + vec2( uvAnimationScrollXOffset, uvAnimationScrollYOffset ) * uvAnimMask;
    float uvRotCos = cos( uvAnimationRotationPhase * uvAnimMask );
    float uvRotSin = sin( uvAnimationRotationPhase * uvAnimMask );
    uv = mat2( uvRotCos, -uvRotSin, uvRotSin, uvRotCos ) * ( uv - 0.5 ) + 0.5;
  #endif

  #ifdef DEBUG_UV
    gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
    #if ( defined( MTOON_USE_UV ) && !defined( MTOON_UVS_VERTEX_ONLY ) )
      gl_FragColor = vec4( uv, 0.0, 1.0 );
    #endif
    return;
  #endif

  vec4 diffuseColor = vec4( litFactor, opacity );
  ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
  vec3 totalEmissiveRadiance = emissive * emissiveIntensity;

  #include <logdepthbuf_fragment>

  // #include <map_fragment>
  #ifdef USE_MAP
    vec2 mapUv = ( mapUvTransform * vec3( uv, 1 ) ).xy;
    #if THREE_VRM_THREE_REVISION >= 137
      vec4 sampledDiffuseColor = texture2D( map, mapUv );
      #ifdef DECODE_VIDEO_TEXTURE
        sampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );
      #endif
      diffuseColor *= sampledDiffuseColor;
    #else
      // COMPAT: pre-r137
      vec4 texelColor = texture2D( map, mapUv );
      texelColor = mapTexelToLinear( texelColor );
      diffuseColor *= texelColor;
    #endif
  #endif

  // #include <color_fragment>
  #if ( defined( USE_COLOR ) && !defined( IGNORE_VERTEX_COLOR ) )
    diffuseColor.rgb *= vColor;
  #endif

  // #include <alphamap_fragment>

  #include <alphatest_fragment>

  // #include <specularmap_fragment>
  #include <normal_fragment_begin>

  #ifdef OUTLINE
    normal *= -1.0;
  #endif

  // #include <normal_fragment_maps>

  #ifdef OBJECTSPACE_NORMALMAP

    vec2 normalMapUv = ( normalMapUvTransform * vec3( uv, 1 ) ).xy;
    normal = texture2D( normalMap, normalMapUv ).xyz * 2.0 - 1.0; // overrides both flatShading and attribute normals

    #ifdef FLIP_SIDED

      normal = - normal;

    #endif

    #ifdef DOUBLE_SIDED

      // Temporary compat against shader change @ Three.js r126
      // See: #21205, #21307, #21299
      #if THREE_VRM_THREE_REVISION >= 126

        normal = normal * faceDirection;

      #else

        normal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );

      #endif

    #endif

    normal = normalize( normalMatrix * normal );

  #elif defined( TANGENTSPACE_NORMALMAP )

    vec2 normalMapUv = ( normalMapUvTransform * vec3( uv, 1 ) ).xy;
    vec3 mapN = texture2D( normalMap, normalMapUv ).xyz * 2.0 - 1.0;
    mapN.xy *= normalScale;

    #ifdef USE_TANGENT

      normal = normalize( vTBN * mapN );

    #else

      // Temporary compat against shader change @ Three.js r126
      // See: #21205, #21307, #21299
      #if THREE_VRM_THREE_REVISION >= 126

        normal = perturbNormal2Arb( uv, -vViewPosition, normal, mapN, faceDirection );

      #else

        normal = perturbNormal2Arb( uv, -vViewPosition, normal, mapN );

      #endif

    #endif

  #endif

  // #include <emissivemap_fragment>
  #ifdef USE_EMISSIVEMAP
    vec2 emissiveMapUv = ( emissiveMapUvTransform * vec3( uv, 1 ) ).xy;
    #if THREE_VRM_THREE_REVISION >= 137
      totalEmissiveRadiance *= texture2D( emissiveMap, emissiveMapUv ).rgb;
    #else
      // COMPAT: pre-r137
      totalEmissiveRadiance *= emissiveMapTexelToLinear( texture2D( emissiveMap, emissiveMapUv ) ).rgb;
    #endif
  #endif

  #ifdef DEBUG_NORMAL
    gl_FragColor = vec4( 0.5 + 0.5 * normal, 1.0 );
    return;
  #endif

  // -- MToon: lighting --------------------------------------------------------
  // accumulation
  // #include <lights_phong_fragment>
  MToonMaterial material;

  material.diffuseColor = diffuseColor.rgb;

  material.shadeColor = shadeColorFactor;
  #ifdef USE_SHADEMULTIPLYTEXTURE
    vec2 shadeMultiplyTextureUv = ( shadeMultiplyTextureUvTransform * vec3( uv, 1 ) ).xy;
    #if THREE_VRM_THREE_REVISION >= 137
      material.shadeColor *= texture2D( shadeMultiplyTexture, shadeMultiplyTextureUv ).rgb;
    #else
      // COMPAT: pre-r137
      material.shadeColor *= shadeMultiplyTextureTexelToLinear( texture2D( shadeMultiplyTexture, shadeMultiplyTextureUv) ).rgb;
    #endif
  #endif

  #if ( defined( USE_COLOR ) && !defined( IGNORE_VERTEX_COLOR ) )
    material.shadeColor.rgb *= vColor;
  #endif

  material.shadingShift = shadingShiftFactor;
  #ifdef USE_SHADINGSHIFTTEXTURE
    vec2 shadingShiftTextureUv = ( shadingShiftTextureUvTransform * vec3( uv, 1 ) ).xy;
    material.shadingShift += texture2D( shadingShiftTexture, shadingShiftTextureUv ).r * shadingShiftTextureScale;
  #endif

  // #include <lights_fragment_begin>

  // MToon Specific changes:
  // Since we want to take shadows into account of shading instead of irradiance,
  // we had to modify the codes that multiplies the results of shadowmap into color of direct lights.

  GeometricContext geometry;

  geometry.position = - vViewPosition;
  geometry.normal = normal;
  geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );

  #ifdef CLEARCOAT

    geometry.clearcoatNormal = clearcoatNormal;

  #endif

  IncidentLight directLight;

  // since these variables will be used in unrolled loop, we have to define in prior
  float shadow;

  #if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )

    PointLight pointLight;
    #if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
    PointLightShadow pointLightShadow;
    #endif

    #pragma unroll_loop_start
    for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {

      pointLight = pointLights[ i ];

      #if THREE_VRM_THREE_REVISION >= 132
        getPointLightInfo( pointLight, geometry, directLight );
      #else
        getPointDirectLightIrradiance( pointLight, geometry, directLight );
      #endif

      shadow = 1.0;
      #if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
      pointLightShadow = pointLightShadows[ i ];
      shadow = all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
      #endif

      RE_Direct( directLight, geometry, material, shadow, reflectedLight );

    }
    #pragma unroll_loop_end

  #endif

  #if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )

    SpotLight spotLight;
    #if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
    SpotLightShadow spotLightShadow;
    #endif

    #pragma unroll_loop_start
    for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {

      spotLight = spotLights[ i ];

      #if THREE_VRM_THREE_REVISION >= 132
        getSpotLightInfo( spotLight, geometry, directLight );
      #else
        getSpotDirectLightIrradiance( spotLight, geometry, directLight );
      #endif

      shadow = 1.0;
      #if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
      spotLightShadow = spotLightShadows[ i ];
      shadow = all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;
      #endif

      RE_Direct( directLight, geometry, material, shadow, reflectedLight );

    }
    #pragma unroll_loop_end

  #endif

  #if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )

    DirectionalLight directionalLight;
    #if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
    DirectionalLightShadow directionalLightShadow;
    #endif

    #pragma unroll_loop_start
    for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {

      directionalLight = directionalLights[ i ];

      #if THREE_VRM_THREE_REVISION >= 132
        getDirectionalLightInfo( directionalLight, geometry, directLight );
      #else
        getDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );
      #endif

      shadow = 1.0;
      #if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
      directionalLightShadow = directionalLightShadows[ i ];
      shadow = all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
      #endif

      RE_Direct( directLight, geometry, material, shadow, reflectedLight );

    }
    #pragma unroll_loop_end

  #endif

  // #if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )

  //   RectAreaLight rectAreaLight;

  //   #pragma unroll_loop_start
  //   for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {

  //     rectAreaLight = rectAreaLights[ i ];
  //     RE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );

  //   }
  //   #pragma unroll_loop_end

  // #endif

  #if defined( RE_IndirectDiffuse )

    vec3 iblIrradiance = vec3( 0.0 );

    vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );

    #if THREE_VRM_THREE_REVISION >= 133
      irradiance += getLightProbeIrradiance( lightProbe, geometry.normal );
    #else
      irradiance += getLightProbeIrradiance( lightProbe, geometry );
    #endif

    #if ( NUM_HEMI_LIGHTS > 0 )

      #pragma unroll_loop_start
      for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {

        #if THREE_VRM_THREE_REVISION >= 133
          irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );
        #else
          irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );
        #endif

      }
      #pragma unroll_loop_end

    #endif

  #endif

  // #if defined( RE_IndirectSpecular )

  //   vec3 radiance = vec3( 0.0 );
  //   vec3 clearcoatRadiance = vec3( 0.0 );

  // #endif

  #include <lights_fragment_maps>
  #include <lights_fragment_end>

  // modulation
  #include <aomap_fragment>

  vec3 col = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;

  #ifdef DEBUG_LITSHADERATE
    gl_FragColor = vec4( col, diffuseColor.a );
    postCorrection();
    return;
  #endif

  // -- MToon: rim lighting -----------------------------------------
  vec3 viewDir = normalize( vViewPosition );

  #ifndef PHYSICALLY_CORRECT_LIGHTS
    reflectedLight.directSpecular /= PI;
  #endif
  vec3 rimMix = mix( vec3( 1.0 ), reflectedLight.directSpecular, 1.0 );

  vec3 rim = parametricRimColorFactor * pow( saturate( 1.0 - dot( viewDir, normal ) + parametricRimLiftFactor ), parametricRimFresnelPowerFactor );

  #ifdef USE_MATCAPTEXTURE
    {
      vec3 x = normalize( vec3( viewDir.z, 0.0, -viewDir.x ) );
      vec3 y = cross( viewDir, x ); // guaranteed to be normalized
      vec2 sphereUv = 0.5 + 0.5 * vec2( dot( x, normal ), -dot( y, normal ) );
      sphereUv = ( matcapTextureUvTransform * vec3( sphereUv, 1 ) ).xy;
      #if THREE_VRM_THREE_REVISION >= 137
        vec3 matcap = texture2D( matcapTexture, sphereUv ).rgb;
      #else
        // COMPAT: pre-r137
        vec3 matcap = matcapTextureTexelToLinear( texture2D( matcapTexture, sphereUv ) ).rgb;
      #endif
      rim += matcapFactor * matcap;
    }
  #endif

  #ifdef USE_RIMMULTIPLYTEXTURE
    vec2 rimMultiplyTextureUv = ( rimMultiplyTextureUvTransform * vec3( uv, 1 ) ).xy;
    #if THREE_VRM_THREE_REVISION >= 137
      rim *= texture2D( rimMultiplyTexture, rimMultiplyTextureUv ).rgb;
    #else
      // COMPAT: pre-r137
      rim *= rimMultiplyTextureTexelToLinear( texture2D( rimMultiplyTexture, rimMultiplyTextureUv ) ).rgb;
    #endif
  #endif

  col += rimMix * rim;

  // -- MToon: Emission --------------------------------------------------------
  col += totalEmissiveRadiance;

  // #include <envmap_fragment>

  // -- Almost done! -----------------------------------------------------------
  #if defined( OUTLINE )
    col = outlineColorFactor.rgb * mix( vec3( 1.0 ), col, outlineLightingMixFactor );
  #endif

  gl_FragColor = vec4( col, diffuseColor.a );
  postCorrection();
}
`;const Pq={None:"none",Normal:"normal",LitShadeRate:"litShadeRate",UV:"uv"},MC={None:"none",WorldCoordinates:"worldCoordinates",ScreenCoordinates:"screenCoordinates"},Jq=3002,Gq=3004,Oq=3005,Hq=3006,zq=3007,Xq=r=>{if(parseInt(es,10)>=136)switch(r){case gs:return["Linear","( value )"];case lt:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",r),["Linear","( value )"]}else switch(r){case gs:return["Linear","( value )"];case lt:return["sRGB","( value )"];case Jq:return["RGBE","( value )"];case Gq:return["RGBM","( value, 7.0 )"];case Oq:return["RGBM","( value, 16.0 )"];case Hq:return["RGBD","( value, 256.0 )"];case zq:return["Gamma","( value, float( GAMMA_FACTOR ) )"];default:throw new Error("unsupported encoding: "+r)}},TC=(r,e)=>{const t=Xq(e);return"vec4 "+r+"( vec4 value ) { return "+t[0]+"ToLinear"+t[1]+"; }"};function NC(r,e){let t;return r&&r.isTexture?t=r.encoding:t=gs,parseInt(es,10)>=133&&e&&r&&r.isTexture&&r.format===ei&&r.type===YA&&r.encoding===lt&&(t=gs),t}class VC extends Ti{constructor(e={}){super({vertexShader:Wq,fragmentShader:Zq}),this.uvAnimationScrollXSpeedFactor=0,this.uvAnimationScrollYSpeedFactor=0,this.uvAnimationRotationSpeedFactor=0,this.fog=!0,this.normalMapType=bp,this._ignoreVertexColor=!0,this._v0CompatShade=!1,this._debugMode=Pq.None,this._outlineWidthMode=MC.None,this._isOutline=!1,e.transparentWithZWrite&&(e.depthWrite=!0),delete e.transparentWithZWrite,e.fog=!0,e.lights=!0,e.clipping=!0,parseInt(es,10)<129&&(e.skinning=e.skinning||!1),parseInt(es,10)<131&&(e.morphTargets=e.morphTargets||!1,e.morphNormals=e.morphNormals||!1),this.uniforms=hV.merge([Me.common,Me.normalmap,Me.emissivemap,Me.fog,Me.lights,{litFactor:{value:new Ve(1,1,1)},mapUvTransform:{value:new an},colorAlpha:{value:1},normalMapUvTransform:{value:new an},shadeColorFactor:{value:new Ve(.97,.81,.86)},shadeMultiplyTexture:{value:null},shadeMultiplyTextureUvTransform:{value:new an},shadingShiftFactor:{value:0},shadingShiftTexture:{value:null},shadingShiftTextureUvTransform:{value:new an},shadingShiftTextureScale:{value:null},shadingToonyFactor:{value:.9},giEqualizationFactor:{value:.9},matcapFactor:{value:new Ve(0,0,0)},matcapTexture:{value:null},matcapTextureUvTransform:{value:new an},parametricRimColorFactor:{value:new Ve(0,0,0)},rimMultiplyTexture:{value:null},rimMultiplyTextureUvTransform:{value:new an},rimLightingMixFactor:{value:0},parametricRimFresnelPowerFactor:{value:1},parametricRimLiftFactor:{value:0},emissive:{value:new Ve(0,0,0)},emissiveIntensity:{value:1},emissiveMapUvTransform:{value:new an},outlineWidthMultiplyTexture:{value:null},outlineWidthMultiplyTextureUvTransform:{value:new an},outlineWidthFactor:{value:.5},outlineColorFactor:{value:new Ve(0,0,0)},outlineLightingMixFactor:{value:1},uvAnimationMaskTexture:{value:null},uvAnimationMaskTextureUvTransform:{value:new an},uvAnimationScrollXOffset:{value:0},uvAnimationScrollYOffset:{value:0},uvAnimationRotationPhase:{value:0}},e.uniforms]),this.setValues(e),this._uploadUniformsWorkaround(),this.customProgramCacheKey=()=>[...Object.entries(this._generateDefines()).map(([t,n])=>`${t}:${n}`),this.matcapTexture?`matcapTextureEncoding:${this.matcapTexture.encoding}`:"",this.shadeMultiplyTexture?`shadeMultiplyTextureEncoding:${this.shadeMultiplyTexture.encoding}`:"",this.rimMultiplyTexture?`rimMultiplyTextureEncoding:${this.rimMultiplyTexture.encoding}`:""].join(","),this.onBeforeCompile=(t,n)=>{const i=n.capabilities.isWebGL2,s=parseInt(es,10),o=Object.entries(Object.assign(Object.assign({},this._generateDefines()),this.defines)).filter(([A,l])=>!!l).map(([A,l])=>`#define ${A} ${l}`).join(`
`)+`
`;let a="";parseInt(es,10)<137&&(a=(this.matcapTexture!==null?TC("matcapTextureTexelToLinear",NC(this.matcapTexture,i))+`
`:"")+(this.shadeMultiplyTexture!==null?TC("shadeMultiplyTextureTexelToLinear",NC(this.shadeMultiplyTexture,i))+`
`:"")+(this.rimMultiplyTexture!==null?TC("rimMultiplyTextureTexelToLinear",NC(this.rimMultiplyTexture,i))+`
`:"")),t.vertexShader=o+t.vertexShader,t.fragmentShader=o+a+t.fragmentShader,s<132&&(t.fragmentShader=t.fragmentShader.replace("#include <normal_pars_fragment>",""),t.fragmentShader=t.fragmentShader.replace("#include <alphatest_pars_fragment>",""))}}get color(){return this.uniforms.litFactor.value}set color(e){this.uniforms.litFactor.value=e}get map(){return this.uniforms.map.value}set map(e){this.uniforms.map.value=e}get normalMap(){return this.uniforms.normalMap.value}set normalMap(e){this.uniforms.normalMap.value=e}get normalScale(){return this.uniforms.normalScale.value}set normalScale(e){this.uniforms.normalScale.value=e}get emissive(){return this.uniforms.emissive.value}set emissive(e){this.uniforms.emissive.value=e}get emissiveIntensity(){return this.uniforms.emissiveIntensity.value}set emissiveIntensity(e){this.uniforms.emissiveIntensity.value=e}get emissiveMap(){return this.uniforms.emissiveMap.value}set emissiveMap(e){this.uniforms.emissiveMap.value=e}get shadeColorFactor(){return this.uniforms.shadeColorFactor.value}set shadeColorFactor(e){this.uniforms.shadeColorFactor.value=e}get shadeMultiplyTexture(){return this.uniforms.shadeMultiplyTexture.value}set shadeMultiplyTexture(e){this.uniforms.shadeMultiplyTexture.value=e}get shadingShiftFactor(){return this.uniforms.shadingShiftFactor.value}set shadingShiftFactor(e){this.uniforms.shadingShiftFactor.value=e}get shadingShiftTexture(){return this.uniforms.shadingShiftTexture.value}set shadingShiftTexture(e){this.uniforms.shadingShiftTexture.value=e}get shadingShiftTextureScale(){return this.uniforms.shadingShiftTextureScale.value}set shadingShiftTextureScale(e){this.uniforms.shadingShiftTextureScale.value=e}get shadingToonyFactor(){return this.uniforms.shadingToonyFactor.value}set shadingToonyFactor(e){this.uniforms.shadingToonyFactor.value=e}get giEqualizationFactor(){return this.uniforms.giEqualizationFactor.value}set giEqualizationFactor(e){this.uniforms.giEqualizationFactor.value=e}get matcapFactor(){return this.uniforms.matcapFactor.value}set matcapFactor(e){this.uniforms.matcapFactor.value=e}get matcapTexture(){return this.uniforms.matcapTexture.value}set matcapTexture(e){this.uniforms.matcapTexture.value=e}get parametricRimColorFactor(){return this.uniforms.parametricRimColorFactor.value}set parametricRimColorFactor(e){this.uniforms.parametricRimColorFactor.value=e}get rimMultiplyTexture(){return this.uniforms.rimMultiplyTexture.value}set rimMultiplyTexture(e){this.uniforms.rimMultiplyTexture.value=e}get rimLightingMixFactor(){return this.uniforms.rimLightingMixFactor.value}set rimLightingMixFactor(e){this.uniforms.rimLightingMixFactor.value=e}get parametricRimFresnelPowerFactor(){return this.uniforms.parametricRimFresnelPowerFactor.value}set parametricRimFresnelPowerFactor(e){this.uniforms.parametricRimFresnelPowerFactor.value=e}get parametricRimLiftFactor(){return this.uniforms.parametricRimLiftFactor.value}set parametricRimLiftFactor(e){this.uniforms.parametricRimLiftFactor.value=e}get outlineWidthMultiplyTexture(){return this.uniforms.outlineWidthMultiplyTexture.value}set outlineWidthMultiplyTexture(e){this.uniforms.outlineWidthMultiplyTexture.value=e}get outlineWidthFactor(){return this.uniforms.outlineWidthFactor.value}set outlineWidthFactor(e){this.uniforms.outlineWidthFactor.value=e}get outlineColorFactor(){return this.uniforms.outlineColorFactor.value}set outlineColorFactor(e){this.uniforms.outlineColorFactor.value=e}get outlineLightingMixFactor(){return this.uniforms.outlineLightingMixFactor.value}set outlineLightingMixFactor(e){this.uniforms.outlineLightingMixFactor.value=e}get uvAnimationMaskTexture(){return this.uniforms.uvAnimationMaskTexture.value}set uvAnimationMaskTexture(e){this.uniforms.uvAnimationMaskTexture.value=e}get uvAnimationScrollXOffset(){return this.uniforms.uvAnimationScrollXOffset.value}set uvAnimationScrollXOffset(e){this.uniforms.uvAnimationScrollXOffset.value=e}get uvAnimationScrollYOffset(){return this.uniforms.uvAnimationScrollYOffset.value}set uvAnimationScrollYOffset(e){this.uniforms.uvAnimationScrollYOffset.value=e}get uvAnimationRotationPhase(){return this.uniforms.uvAnimationRotationPhase.value}set uvAnimationRotationPhase(e){this.uniforms.uvAnimationRotationPhase.value=e}get ignoreVertexColor(){return this._ignoreVertexColor}set ignoreVertexColor(e){this._ignoreVertexColor=e,this.needsUpdate=!0}get v0CompatShade(){return this._v0CompatShade}set v0CompatShade(e){this._v0CompatShade=e,this.needsUpdate=!0}get debugMode(){return this._debugMode}set debugMode(e){this._debugMode=e,this.needsUpdate=!0}get outlineWidthMode(){return this._outlineWidthMode}set outlineWidthMode(e){this._outlineWidthMode=e,this.needsUpdate=!0}get isOutline(){return this._isOutline}set isOutline(e){this._isOutline=e,this.needsUpdate=!0}get isMToonMaterial(){return!0}update(e){this._uploadUniformsWorkaround(),this._updateUVAnimation(e)}copy(e){return super.copy(e),this.map=e.map,this.normalMap=e.normalMap,this.emissiveMap=e.emissiveMap,this.shadeMultiplyTexture=e.shadeMultiplyTexture,this.shadingShiftTexture=e.shadingShiftTexture,this.matcapTexture=e.matcapTexture,this.rimMultiplyTexture=e.rimMultiplyTexture,this.outlineWidthMultiplyTexture=e.outlineWidthMultiplyTexture,this.uvAnimationMaskTexture=e.uvAnimationMaskTexture,this.normalMapType=e.normalMapType,this.uvAnimationScrollXSpeedFactor=e.uvAnimationScrollXSpeedFactor,this.uvAnimationScrollYSpeedFactor=e.uvAnimationScrollYSpeedFactor,this.uvAnimationRotationSpeedFactor=e.uvAnimationRotationSpeedFactor,this.ignoreVertexColor=e.ignoreVertexColor,this.v0CompatShade=e.v0CompatShade,this.debugMode=e.debugMode,this.outlineWidthMode=e.outlineWidthMode,this.isOutline=e.isOutline,this.needsUpdate=!0,this}_updateUVAnimation(e){this.uniforms.uvAnimationScrollXOffset.value+=e*this.uvAnimationScrollXSpeedFactor,this.uniforms.uvAnimationScrollYOffset.value+=e*this.uvAnimationScrollYSpeedFactor,this.uniforms.uvAnimationRotationPhase.value+=e*this.uvAnimationRotationSpeedFactor,this.uniformsNeedUpdate=!0}_uploadUniformsWorkaround(){this.uniforms.opacity.value=this.opacity,this._updateTextureMatrix(this.uniforms.map,this.uniforms.mapUvTransform),this._updateTextureMatrix(this.uniforms.normalMap,this.uniforms.normalMapUvTransform),this._updateTextureMatrix(this.uniforms.emissiveMap,this.uniforms.emissiveMapUvTransform),this._updateTextureMatrix(this.uniforms.shadeMultiplyTexture,this.uniforms.shadeMultiplyTextureUvTransform),this._updateTextureMatrix(this.uniforms.shadingShiftTexture,this.uniforms.shadingShiftTextureUvTransform),this._updateTextureMatrix(this.uniforms.matcapTexture,this.uniforms.matcapTextureUvTransform),this._updateTextureMatrix(this.uniforms.rimMultiplyTexture,this.uniforms.rimMultiplyTextureUvTransform),this._updateTextureMatrix(this.uniforms.outlineWidthMultiplyTexture,this.uniforms.outlineWidthMultiplyTextureUvTransform),this._updateTextureMatrix(this.uniforms.uvAnimationMaskTexture,this.uniforms.uvAnimationMaskTextureUvTransform),parseInt(es,10)>=132&&(this.uniforms.alphaTest.value=this.alphaTest),this.uniformsNeedUpdate=!0}_generateDefines(){const e=parseInt(es,10),t=this.outlineWidthMultiplyTexture!==null,n=this.map!==null||this.emissiveMap!==null||this.shadeMultiplyTexture!==null||this.shadingShiftTexture!==null||this.rimMultiplyTexture!==null||this.uvAnimationMaskTexture!==null;return{THREE_VRM_THREE_REVISION:e,OUTLINE:this._isOutline,MTOON_USE_UV:t||n,MTOON_UVS_VERTEX_ONLY:t&&!n,V0_COMPAT_SHADE:this._v0CompatShade,USE_SHADEMULTIPLYTEXTURE:this.shadeMultiplyTexture!==null,USE_SHADINGSHIFTTEXTURE:this.shadingShiftTexture!==null,USE_MATCAPTEXTURE:this.matcapTexture!==null,USE_RIMMULTIPLYTEXTURE:this.rimMultiplyTexture!==null,USE_OUTLINEWIDTHMULTIPLYTEXTURE:this._isOutline&&this.outlineWidthMultiplyTexture!==null,USE_UVANIMATIONMASKTEXTURE:this.uvAnimationMaskTexture!==null,IGNORE_VERTEX_COLOR:this._ignoreVertexColor===!0,DEBUG_NORMAL:this._debugMode==="normal",DEBUG_LITSHADERATE:this._debugMode==="litShadeRate",DEBUG_UV:this._debugMode==="uv",OUTLINE_WIDTH_WORLD:this._isOutline&&this._outlineWidthMode===MC.WorldCoordinates,OUTLINE_WIDTH_SCREEN:this._isOutline&&this._outlineWidthMode===MC.ScreenCoordinates}}_updateTextureMatrix(e,t){e.value&&(e.value.matrixAutoUpdate&&e.value.updateMatrix(),t.value.copy(e.value.matrix))}}class Yq{constructor(e,t){this._parser=e,this._materialParams=t,this._pendings=[]}get pending(){return Promise.all(this._pendings)}assignPrimitive(e,t){t!=null&&(this._materialParams[e]=t)}assignColor(e,t,n){t!=null&&(this._materialParams[e]=new Ve().fromArray(t),n&&this._materialParams[e].convertSRGBToLinear())}assignTexture(e,t,n){return Nl(this,void 0,void 0,function*(){const i=(()=>Nl(this,void 0,void 0,function*(){t!=null&&(yield this._parser.assignTexture(this._materialParams,e,t),n&&(this._materialParams[e].encoding=lt))}))();return this._pendings.push(i),i})}assignTextureByIndex(e,t,n){return Nl(this,void 0,void 0,function*(){return this.assignTexture(e,t!=null?{index:t}:void 0,n)})}}const Kq=new Set(["1.0","1.0-beta"]);class Hu{constructor(e,t={}){var n,i,s;this.parser=e,this.renderOrderOffset=(n=t.renderOrderOffset)!==null&&n!==void 0?n:0,this.v0CompatShade=(i=t.v0CompatShade)!==null&&i!==void 0?i:!1,this.debugMode=(s=t.debugMode)!==null&&s!==void 0?s:"none",this._mToonMaterialSet=new Set}get name(){return Hu.EXTENSION_NAME}beforeRoot(){return Nl(this,void 0,void 0,function*(){this._removeUnlitExtensionIfMToonExists()})}afterRoot(e){return Nl(this,void 0,void 0,function*(){e.userData.vrmMToonMaterials=Array.from(this._mToonMaterialSet)})}getMaterialType(e){return this._getMToonExtension(e)?VC:null}extendMaterialParams(e,t){const n=this._getMToonExtension(e);return n?this._extendMaterialParams(n,t):null}loadMesh(e){var t;return Nl(this,void 0,void 0,function*(){const n=this.parser,s=(t=n.json.meshes)===null||t===void 0?void 0:t[e];if(s==null)throw new Error(`MToonMaterialLoaderPlugin: Attempt to use meshes[${e}] of glTF but the mesh doesn't exist`);const o=s.primitives,a=yield n.loadMesh(e);if(o.length===1){const A=a,l=o[0].material;l!=null&&this._setupPrimitive(A,l)}else{const A=a;for(let l=0;l<o.length;l++){const c=A.children[l],u=o[l].material;u!=null&&this._setupPrimitive(c,u)}}return a})}_removeUnlitExtensionIfMToonExists(){const n=this.parser.json.materials;n==null||n.map((i,s)=>{var o;this._getMToonExtension(s)&&(!((o=i.extensions)===null||o===void 0)&&o.KHR_materials_unlit)&&delete i.extensions.KHR_materials_unlit})}_getMToonExtension(e){var t,n;const o=(t=this.parser.json.materials)===null||t===void 0?void 0:t[e];if(o==null){console.warn(`MToonMaterialLoaderPlugin: Attempt to use materials[${e}] of glTF but the material doesn't exist`);return}const a=(n=o.extensions)===null||n===void 0?void 0:n[Hu.EXTENSION_NAME];if(a==null)return;const A=a.specVersion;if(!Kq.has(A)){console.warn(`MToonMaterialLoaderPlugin: Unknown ${Hu.EXTENSION_NAME} specVersion "${A}"`);return}return a}_extendMaterialParams(e,t){var n;return Nl(this,void 0,void 0,function*(){delete t.metalness,delete t.roughness;const i=new Yq(this.parser,t);i.assignPrimitive("transparentWithZWrite",e.transparentWithZWrite),i.assignColor("shadeColorFactor",e.shadeColorFactor),i.assignTexture("shadeMultiplyTexture",e.shadeMultiplyTexture,!0),i.assignPrimitive("shadingShiftFactor",e.shadingShiftFactor),i.assignTexture("shadingShiftTexture",e.shadingShiftTexture,!0),i.assignPrimitive("shadingShiftTextureScale",(n=e.shadingShiftTexture)===null||n===void 0?void 0:n.scale),i.assignPrimitive("shadingToonyFactor",e.shadingToonyFactor),i.assignPrimitive("giEqualizationFactor",e.giEqualizationFactor),i.assignColor("matcapFactor",e.matcapFactor),i.assignTexture("matcapTexture",e.matcapTexture,!0),i.assignColor("parametricRimColorFactor",e.parametricRimColorFactor),i.assignTexture("rimMultiplyTexture",e.rimMultiplyTexture,!0),i.assignPrimitive("rimLightingMixFactor",e.rimLightingMixFactor),i.assignPrimitive("parametricRimFresnelPowerFactor",e.parametricRimFresnelPowerFactor),i.assignPrimitive("parametricRimLiftFactor",e.parametricRimLiftFactor),i.assignPrimitive("outlineWidthMode",e.outlineWidthMode),i.assignPrimitive("outlineWidthFactor",e.outlineWidthFactor),i.assignTexture("outlineWidthMultiplyTexture",e.outlineWidthMultiplyTexture,!1),i.assignColor("outlineColorFactor",e.outlineColorFactor),i.assignPrimitive("outlineLightingMixFactor",e.outlineLightingMixFactor),i.assignTexture("uvAnimationMaskTexture",e.uvAnimationMaskTexture,!1),i.assignPrimitive("uvAnimationScrollXSpeedFactor",e.uvAnimationScrollXSpeedFactor),i.assignPrimitive("uvAnimationScrollYSpeedFactor",e.uvAnimationScrollYSpeedFactor),i.assignPrimitive("uvAnimationRotationSpeedFactor",e.uvAnimationRotationSpeedFactor),i.assignPrimitive("v0CompatShade",this.v0CompatShade),i.assignPrimitive("debugMode",this.debugMode),yield i.pending})}_setupPrimitive(e,t){const n=this._getMToonExtension(t);if(n){const i=this._parseRenderOrder(n);e.renderOrder=i+this.renderOrderOffset,this._generateOutline(e),this._addToMaterialSet(e);return}}_generateOutline(e){const t=e.material;if(!(t instanceof VC)||t.outlineWidthMode==="none"||t.outlineWidthFactor<=0)return;e.material=[t];const n=t.clone();n.name+=" (Outline)",n.isOutline=!0,n.side=oi,e.material.push(n);const i=e.geometry,s=i.index?i.index.count:i.attributes.position.count/3;i.addGroup(0,s,0),i.addGroup(0,s,1)}_addToMaterialSet(e){const t=e.material,n=new Set;Array.isArray(t)?t.forEach(i=>n.add(i)):n.add(t);for(const i of n)i instanceof VC&&this._mToonMaterialSet.add(i)}_parseRenderOrder(e){var t;return(e.transparentWithZWrite?0:19)+((t=e.renderQueueOffsetNumber)!==null&&t!==void 0?t:0)}}Hu.EXTENSION_NAME="VRMC_materials_mtoon";/*!
 * @pixiv/three-vrm-materials-hdr-emissive-multiplier v1.0.9
 * Support VRMC_hdr_emissiveMultiplier for @pixiv/three-vrm
 *
 * Copyright (c) 2020-2023 pixiv Inc.
 * @pixiv/three-vrm-materials-hdr-emissive-multiplier is distributed under MIT License
 * https://github.com/pixiv/three-vrm/blob/release/LICENSE
 */function jq(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(c){try{l(n.next(c))}catch(u){o(u)}}function A(c){try{l(n.throw(c))}catch(u){o(u)}}function l(c){c.done?s(c.value):i(c.value).then(a,A)}l((n=n.apply(r,e||[])).next())})}class sp{constructor(e){this.parser=e}get name(){return sp.EXTENSION_NAME}extendMaterialParams(e,t){return jq(this,void 0,void 0,function*(){const n=this._getHDREmissiveMultiplierExtension(e);if(n==null)return;console.warn("VRMMaterialsHDREmissiveMultiplierLoaderPlugin: `VRMC_materials_hdr_emissiveMultiplier` is archived. Use `KHR_materials_emissive_strength` instead.");const i=n.emissiveMultiplier;t.emissiveIntensity=i})}_getHDREmissiveMultiplierExtension(e){var t,n;const o=(t=this.parser.json.materials)===null||t===void 0?void 0:t[e];if(o==null){console.warn(`VRMMaterialsHDREmissiveMultiplierLoaderPlugin: Attempt to use materials[${e}] of glTF but the material doesn't exist`);return}const a=(n=o.extensions)===null||n===void 0?void 0:n[sp.EXTENSION_NAME];if(a!=null)return a}}sp.EXTENSION_NAME="VRMC_materials_hdr_emissiveMultiplier";/*!
 * @pixiv/three-vrm-materials-v0compat v1.0.9
 * VRM0.0 materials compatibility layer plugin for @pixiv/three-vrm
 *
 * Copyright (c) 2020-2023 pixiv Inc.
 * @pixiv/three-vrm-materials-v0compat is distributed under MIT License
 * https://github.com/pixiv/three-vrm/blob/release/LICENSE
 */function qq(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(c){try{l(n.next(c))}catch(u){o(u)}}function A(c){try{l(n.throw(c))}catch(u){o(u)}}function l(c){c.done?s(c.value):i(c.value).then(a,A)}l((n=n.apply(r,e||[])).next())})}function Oc(r){return Math.pow(r,2.2)}class $q{constructor(e){var t;this.parser=e,this._renderQueueMapTransparent=new Map,this._renderQueueMapTransparentZWrite=new Map;const n=this.parser.json;n.extensionsUsed=(t=n.extensionsUsed)!==null&&t!==void 0?t:[],n.extensionsUsed.indexOf("KHR_texture_transform")===-1&&n.extensionsUsed.push("KHR_texture_transform")}get name(){return"VRMMaterialsV0CompatPlugin"}beforeRoot(){var e;return qq(this,void 0,void 0,function*(){const t=this.parser.json,n=(e=t.extensions)===null||e===void 0?void 0:e.VRM,i=n==null?void 0:n.materialProperties;i&&(this._populateRenderQueueMap(i),i.forEach((s,o)=>{var a,A;const l=(a=t.materials)===null||a===void 0?void 0:a[o];if(l==null){console.warn(`VRMMaterialsV0CompatPlugin: Attempt to use materials[${o}] of glTF but the material doesn't exist`);return}if(s.shader==="VRM/MToon"){const c=this._parseV0MToonProperties(s,l);t.materials[o]=c}else if(!((A=s.shader)===null||A===void 0)&&A.startsWith("VRM/Unlit")){const c=this._parseV0UnlitProperties(s,l);t.materials[o]=c}else s.shader==="VRM_USE_GLTFSHADER"||console.warn(`VRMMaterialsV0CompatPlugin: Unknown shader: ${s.shader}`)}))})}_parseV0MToonProperties(e,t){var n,i,s,o,a,A,l,c,u,f,d,p,h,m,g,B,v,w,C,I,E,U,S,V,J,z,R,y,Q,_,L,T,Z,G,D,x,P,oe,M,k,q,ee,X,$;const se=(i=(n=e.keywordMap)===null||n===void 0?void 0:n._ALPHABLEND_ON)!==null&&i!==void 0?i:!1,de=((s=e.floatProperties)===null||s===void 0?void 0:s._ZWrite)===1&&se,fe=this._v0ParseRenderQueue(e),ge=(a=(o=e.keywordMap)===null||o===void 0?void 0:o._ALPHATEST_ON)!==null&&a!==void 0?a:!1,Qe=se?"BLEND":ge?"MASK":"OPAQUE",Ue=ge?(A=e.floatProperties)===null||A===void 0?void 0:A._Cutoff:void 0,Fe=((c=(l=e.floatProperties)===null||l===void 0?void 0:l._CullMode)!==null&&c!==void 0?c:2)===0,Ne=this._portTextureTransform(e),Ze=(f=(u=e.vectorProperties)===null||u===void 0?void 0:u._Color)===null||f===void 0?void 0:f.map((pe,Te)=>Te===3?pe:Oc(pe)),j=(d=e.textureProperties)===null||d===void 0?void 0:d._MainTex,O=j!=null?{index:j,extensions:Object.assign({},Ne)}:void 0,le=(p=e.floatProperties)===null||p===void 0?void 0:p._BumpScale,ue=(h=e.textureProperties)===null||h===void 0?void 0:h._BumpMap,Ce=ue!=null?{index:ue,scale:le,extensions:Object.assign({},Ne)}:void 0,W=(g=(m=e.vectorProperties)===null||m===void 0?void 0:m._EmissionColor)===null||g===void 0?void 0:g.map(Oc),b=(B=e.textureProperties)===null||B===void 0?void 0:B._EmissionMap,F=b!=null?{index:b,extensions:Object.assign({},Ne)}:void 0,N=(w=(v=e.vectorProperties)===null||v===void 0?void 0:v._ShadeColor)===null||w===void 0?void 0:w.map(Oc),K=(C=e.textureProperties)===null||C===void 0?void 0:C._ShadeTexture,te=K!=null?{index:K,extensions:Object.assign({},Ne)}:void 0;let ne=(E=(I=e.floatProperties)===null||I===void 0?void 0:I._ShadeShift)!==null&&E!==void 0?E:0,we=(S=(U=e.floatProperties)===null||U===void 0?void 0:U._ShadeToony)!==null&&S!==void 0?S:.9;we=It.lerp(we,1,.5+.5*ne),ne=-ne-(1-we);const ye=(V=e.floatProperties)===null||V===void 0?void 0:V._IndirectLightIntensity,Se=ye?1-ye:void 0,We=(J=e.textureProperties)===null||J===void 0?void 0:J._SphereAdd,Re=We!=null?[1,1,1]:void 0,re=We!=null?{index:We}:void 0,Be=(z=e.floatProperties)===null||z===void 0?void 0:z._RimLightingMix,ve=(R=e.textureProperties)===null||R===void 0?void 0:R._RimTexture,be=ve!=null?{index:ve,extensions:Object.assign({},Ne)}:void 0,Ge=(Q=(y=e.vectorProperties)===null||y===void 0?void 0:y._RimColor)===null||Q===void 0?void 0:Q.map(Oc),Ye=(_=e.floatProperties)===null||_===void 0?void 0:_._RimFresnelPower,rt=(L=e.floatProperties)===null||L===void 0?void 0:L._RimLift,Yt=["none","worldCoordinates","screenCoordinates"][(Z=(T=e.floatProperties)===null||T===void 0?void 0:T._OutlineWidthMode)!==null&&Z!==void 0?Z:0];let gt=(D=(G=e.floatProperties)===null||G===void 0?void 0:G._OutlineWidth)!==null&&D!==void 0?D:0;gt=.01*gt;const qe=(x=e.textureProperties)===null||x===void 0?void 0:x._OutlineWidthTexture,Wn=qe!=null?{index:qe,extensions:Object.assign({},Ne)}:void 0,ct=(oe=(P=e.vectorProperties)===null||P===void 0?void 0:P._OutlineColor)===null||oe===void 0?void 0:oe.map(Oc),Fs=((M=e.floatProperties)===null||M===void 0?void 0:M._OutlineColorMode)===1?(k=e.floatProperties)===null||k===void 0?void 0:k._OutlineLightingMix:0,Tt=(q=e.textureProperties)===null||q===void 0?void 0:q._UvAnimMaskTexture,Lt=Tt!=null?{index:Tt,extensions:Object.assign({},Ne)}:void 0,Y=(ee=e.floatProperties)===null||ee===void 0?void 0:ee._UvAnimScrollX;let Ae=(X=e.floatProperties)===null||X===void 0?void 0:X._UvAnimScrollY;Ae!=null&&(Ae=-Ae);const he=($=e.floatProperties)===null||$===void 0?void 0:$._UvAnimRotation,ce={specVersion:"1.0",transparentWithZWrite:de,renderQueueOffsetNumber:fe,shadeColorFactor:N,shadeMultiplyTexture:te,shadingShiftFactor:ne,shadingToonyFactor:we,giEqualizationFactor:Se,matcapFactor:Re,matcapTexture:re,rimLightingMixFactor:Be,rimMultiplyTexture:be,parametricRimColorFactor:Ge,parametricRimFresnelPowerFactor:Ye,parametricRimLiftFactor:rt,outlineWidthMode:Yt,outlineWidthFactor:gt,outlineWidthMultiplyTexture:Wn,outlineColorFactor:ct,outlineLightingMixFactor:Fs,uvAnimationMaskTexture:Lt,uvAnimationScrollXSpeedFactor:Y,uvAnimationScrollYSpeedFactor:Ae,uvAnimationRotationSpeedFactor:he};return Object.assign(Object.assign({},t),{pbrMetallicRoughness:{baseColorFactor:Ze,baseColorTexture:O},normalTexture:Ce,emissiveTexture:F,emissiveFactor:W,alphaMode:Qe,alphaCutoff:Ue,doubleSided:Fe,extensions:{VRMC_materials_mtoon:ce}})}_parseV0UnlitProperties(e,t){var n,i,s,o;const a=e.shader==="VRM/UnlitTransparentZWrite",A=e.shader==="VRM/UnlitTransparent"||a,l=this._v0ParseRenderQueue(e),c=e.shader==="VRM/UnlitCutout",u=A?"BLEND":c?"MASK":"OPAQUE",f=c?(n=e.floatProperties)===null||n===void 0?void 0:n._Cutoff:void 0,d=this._portTextureTransform(e),p=(s=(i=e.vectorProperties)===null||i===void 0?void 0:i._Color)===null||s===void 0?void 0:s.map(Oc),h=(o=e.textureProperties)===null||o===void 0?void 0:o._MainTex,m=h!=null?{index:h,extensions:Object.assign({},d)}:void 0,g={specVersion:"1.0",transparentWithZWrite:a,renderQueueOffsetNumber:l,shadeColorFactor:p,shadeMultiplyTexture:m};return Object.assign(Object.assign({},t),{pbrMetallicRoughness:{baseColorFactor:p,baseColorTexture:m},alphaMode:u,alphaCutoff:f,extensions:{VRMC_materials_mtoon:g}})}_portTextureTransform(e){var t,n,i,s,o;const a=(t=e.vectorProperties)===null||t===void 0?void 0:t._MainTex;if(a==null)return{};const A=[(n=a==null?void 0:a[0])!==null&&n!==void 0?n:0,(i=a==null?void 0:a[1])!==null&&i!==void 0?i:0],l=[(s=a==null?void 0:a[2])!==null&&s!==void 0?s:1,(o=a==null?void 0:a[3])!==null&&o!==void 0?o:1];return A[1]=l[1]*(1-A[1])%1,{KHR_texture_transform:{offset:A,scale:l}}}_v0ParseRenderQueue(e){var t,n,i;const s=(n=(t=e.keywordMap)===null||t===void 0?void 0:t._ALPHABLEND_ON)!==null&&n!==void 0?n:!1,o=((i=e.floatProperties)===null||i===void 0?void 0:i._ZWrite)===1;let a=0;if(s){const A=e.renderQueue;A!=null&&(o?a=this._renderQueueMapTransparentZWrite.get(A):a=this._renderQueueMapTransparent.get(A))}return a}_populateRenderQueueMap(e){const t=new Set,n=new Set;e.forEach(i=>{var s,o,a;const A=(o=(s=i.keywordMap)===null||s===void 0?void 0:s._ALPHABLEND_ON)!==null&&o!==void 0?o:!1,l=((a=i.floatProperties)===null||a===void 0?void 0:a._ZWrite)===1;if(A){const c=i.renderQueue;c!=null&&(l?n.add(c):t.add(c))}}),t.size>10&&console.warn(`VRMMaterialsV0CompatPlugin: This VRM uses ${t.size} render queues for Transparent materials while VRM 1.0 only supports up to 10 render queues. The model might not be rendered correctly.`),n.size>10&&console.warn(`VRMMaterialsV0CompatPlugin: This VRM uses ${n.size} render queues for TransparentZWrite materials while VRM 1.0 only supports up to 10 render queues. The model might not be rendered correctly.`),Array.from(t).sort().forEach((i,s)=>{const o=Math.min(Math.max(s-t.size+1,-9),0);this._renderQueueMapTransparent.set(i,o)}),Array.from(n).sort().forEach((i,s)=>{const o=Math.min(Math.max(s,0),9);this._renderQueueMapTransparentZWrite.set(i,o)})}}/*!
 * @pixiv/three-vrm-node-constraint v1.0.9
 * Node constraint module for @pixiv/three-vrm
 *
 * Copyright (c) 2020-2023 pixiv Inc.
 * @pixiv/three-vrm-node-constraint is distributed under MIT License
 * https://github.com/pixiv/three-vrm/blob/release/LICENSE
 */const $a=new H;class DC extends Qr{constructor(e){super(),this._attrPosition=new pt(new Float32Array([0,0,0,0,0,0]),3),this._attrPosition.setUsage(GH);const t=new Xt;t.setAttribute("position",this._attrPosition);const n=new Ja({color:16711935,depthTest:!1,depthWrite:!1});this._line=new Pf(t,n),this.add(this._line),this.constraint=e}updateMatrixWorld(e){$a.setFromMatrixPosition(this.constraint.destination.matrixWorld),this._attrPosition.setXYZ(0,$a.x,$a.y,$a.z),this.constraint.source&&$a.setFromMatrixPosition(this.constraint.source.matrixWorld),this._attrPosition.setXYZ(1,$a.x,$a.y,$a.z),this._attrPosition.needsUpdate=!0,super.updateMatrixWorld(e)}}function m_(r,e){return e.set(r.elements[12],r.elements[13],r.elements[14])}const e$=new H,t$=new H;function n$(r,e){return r.decompose(e$,e,t$),e}function sB(r){return r.invert?r.invert():r.inverse(),r}class Zx{constructor(e,t){this.destination=e,this.source=t,this.weight=1}}const r$=new H,i$=new H,s$=new H,o$=new $e,a$=new $e,A$=new $e;class l$ extends Zx{constructor(e,t){super(e,t),this._aimAxis="PositiveX",this._v3AimAxis=new H(1,0,0),this._dstRestQuat=new $e}get aimAxis(){return this._aimAxis}set aimAxis(e){this._aimAxis=e,this._v3AimAxis.set(e==="PositiveX"?1:e==="NegativeX"?-1:0,e==="PositiveY"?1:e==="NegativeY"?-1:0,e==="PositiveZ"?1:e==="NegativeZ"?-1:0)}get dependencies(){const e=new Set([this.source]);return this.destination.parent&&e.add(this.destination.parent),e}setInitState(){this._dstRestQuat.copy(this.destination.quaternion)}update(){this.destination.updateWorldMatrix(!0,!1),this.source.updateWorldMatrix(!0,!1);const e=o$.identity(),t=a$.identity();this.destination.parent&&(n$(this.destination.parent.matrixWorld,e),sB(t.copy(e)));const n=r$.copy(this._v3AimAxis).applyQuaternion(this._dstRestQuat).applyQuaternion(e),i=m_(this.source.matrixWorld,i$).sub(m_(this.destination.matrixWorld,s$)).normalize(),s=A$.setFromUnitVectors(n,i).premultiply(t).multiply(e).multiply(this._dstRestQuat);this.destination.quaternion.copy(this._dstRestQuat).slerp(s,this.weight)}}function B_(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(c){try{l(n.next(c))}catch(u){o(u)}}function A(c){try{l(n.throw(c))}catch(u){o(u)}}function l(c){c.done?s(c.value):i(c.value).then(a,A)}l((n=n.apply(r,e||[])).next())})}function c$(r,e){const t=[r];let n=r.parent;for(;n!==null;)t.unshift(n),n=n.parent;t.forEach(i=>{e(i)})}class u${constructor(){this._constraints=new Set,this._objectConstraintsMap=new Map}get constraints(){return this._constraints}addConstraint(e){this._constraints.add(e);let t=this._objectConstraintsMap.get(e.destination);t==null&&(t=new Set,this._objectConstraintsMap.set(e.destination,t)),t.add(e)}deleteConstraint(e){this._constraints.delete(e),this._objectConstraintsMap.get(e.destination).delete(e)}setInitState(){const e=new Set,t=new Set;for(const n of this._constraints)this._processConstraint(n,e,t,i=>i.setInitState())}update(){const e=new Set,t=new Set;for(const n of this._constraints)this._processConstraint(n,e,t,i=>i.update())}_processConstraint(e,t,n,i){if(n.has(e))return;if(t.has(e))throw new Error("VRMNodeConstraintManager: Circular dependency detected while updating constraints");t.add(e);const s=e.dependencies;for(const o of s)c$(o,a=>{const A=this._objectConstraintsMap.get(a);if(A)for(const l of A)this._processConstraint(l,t,n,i)});i(e),n.add(e)}}const f$=new $e,d$=new $e;class h$ extends Zx{constructor(e,t){super(e,t),this._dstRestQuat=new $e,this._invSrcRestQuat=new $e}get dependencies(){return new Set([this.source])}setInitState(){this._dstRestQuat.copy(this.destination.quaternion),sB(this._invSrcRestQuat.copy(this.source.quaternion))}update(){const e=f$.copy(this._invSrcRestQuat).multiply(this.source.quaternion),t=d$.copy(this._dstRestQuat).multiply(e);this.destination.quaternion.copy(this._dstRestQuat).slerp(t,this.weight)}}const p$=new H,g$=new $e,m$=new $e;class B$ extends Zx{constructor(e,t){super(e,t),this._rollAxis="X",this._v3RollAxis=new H(1,0,0),this._dstRestQuat=new $e,this._invDstRestQuat=new $e,this._invSrcRestQuatMulDstRestQuat=new $e}get rollAxis(){return this._rollAxis}set rollAxis(e){this._rollAxis=e,this._v3RollAxis.set(e==="X"?1:0,e==="Y"?1:0,e==="Z"?1:0)}get dependencies(){return new Set([this.source])}setInitState(){this._dstRestQuat.copy(this.destination.quaternion),sB(this._invDstRestQuat.copy(this._dstRestQuat)),sB(this._invSrcRestQuatMulDstRestQuat.copy(this.source.quaternion)).multiply(this._dstRestQuat)}update(){const e=g$.copy(this._invDstRestQuat).multiply(this.source.quaternion).multiply(this._invSrcRestQuatMulDstRestQuat),t=p$.copy(this._v3RollAxis).applyQuaternion(e),i=m$.setFromUnitVectors(t,this._v3RollAxis).premultiply(this._dstRestQuat).multiply(e);this.destination.quaternion.copy(this._dstRestQuat).slerp(i,this.weight)}}const v$=new Set(["1.0","1.0-beta"]);class Vl{constructor(e,t){this.parser=e,this.helperRoot=t==null?void 0:t.helperRoot}get name(){return Vl.EXTENSION_NAME}afterRoot(e){return B_(this,void 0,void 0,function*(){e.userData.vrmNodeConstraintManager=yield this._import(e)})}_import(e){var t;return B_(this,void 0,void 0,function*(){const n=this.parser.json;if(!(((t=n.extensionsUsed)===null||t===void 0?void 0:t.indexOf(Vl.EXTENSION_NAME))!==-1))return null;const s=new u$,o=yield this.parser.getDependencies("node");return o.forEach((a,A)=>{var l;const c=n.nodes[A],u=(l=c==null?void 0:c.extensions)===null||l===void 0?void 0:l[Vl.EXTENSION_NAME];if(u==null)return;const f=u.specVersion;if(!v$.has(f)){console.warn(`VRMNodeConstraintLoaderPlugin: Unknown ${Vl.EXTENSION_NAME} specVersion "${f}"`);return}const d=u.constraint;if(d.roll!=null){const p=this._importRollConstraint(a,o,d.roll);s.addConstraint(p)}else if(d.aim!=null){const p=this._importAimConstraint(a,o,d.aim);s.addConstraint(p)}else if(d.rotation!=null){const p=this._importRotationConstraint(a,o,d.rotation);s.addConstraint(p)}}),e.scene.updateMatrixWorld(),s.setInitState(),s})}_importRollConstraint(e,t,n){const{source:i,rollAxis:s,weight:o}=n,a=t[i],A=new B$(e,a);if(s!=null&&(A.rollAxis=s),o!=null&&(A.weight=o),this.helperRoot){const l=new DC(A);this.helperRoot.add(l)}return A}_importAimConstraint(e,t,n){const{source:i,aimAxis:s,weight:o}=n,a=t[i],A=new l$(e,a);if(s!=null&&(A.aimAxis=s),o!=null&&(A.weight=o),this.helperRoot){const l=new DC(A);this.helperRoot.add(l)}return A}_importRotationConstraint(e,t,n){const{source:i,weight:s}=n,o=t[i],a=new h$(e,o);if(s!=null&&(a.weight=s),this.helperRoot){const A=new DC(a);this.helperRoot.add(A)}return a}}Vl.EXTENSION_NAME="VRMC_node_constraint";/*!
 * @pixiv/three-vrm-springbone v1.0.9
 * Spring bone module for @pixiv/three-vrm
 *
 * Copyright (c) 2020-2023 pixiv Inc.
 * @pixiv/three-vrm-springbone is distributed under MIT License
 * https://github.com/pixiv/three-vrm/blob/release/LICENSE
 */class TD{}const kC=new H,Bl=new H;class ND extends TD{constructor(e){var t,n,i;super(),this.offset=(t=e==null?void 0:e.offset)!==null&&t!==void 0?t:new H(0,0,0),this.tail=(n=e==null?void 0:e.tail)!==null&&n!==void 0?n:new H(0,0,0),this.radius=(i=e==null?void 0:e.radius)!==null&&i!==void 0?i:0}get type(){return"capsule"}calculateCollision(e,t,n,i){kC.copy(this.offset).applyMatrix4(e),Bl.copy(this.tail).applyMatrix4(e),Bl.sub(kC);const s=Bl.lengthSq();i.copy(t).sub(kC);const o=Bl.dot(i);o<=0||(s<=o||Bl.multiplyScalar(o/s),i.sub(Bl));const a=n+this.radius,A=i.length()-a;return i.normalize(),A}}class VD extends TD{constructor(e){var t,n;super(),this.offset=(t=e==null?void 0:e.offset)!==null&&t!==void 0?t:new H(0,0,0),this.radius=(n=e==null?void 0:e.radius)!==null&&n!==void 0?n:0}get type(){return"sphere"}calculateCollision(e,t,n,i){i.copy(this.offset).applyMatrix4(e),i.negate().add(t);const s=n+this.radius,o=i.length()-s;return i.normalize(),o}}const io=new H;class y$ extends Xt{constructor(e){super(),this.worldScale=1,this._currentRadius=0,this._currentOffset=new H,this._currentTail=new H,this._shape=e,this._attrPos=new pt(new Float32Array(396),3),this.setAttribute("position",this._attrPos),this._attrIndex=new pt(new Uint16Array(264),1),this.setIndex(this._attrIndex),this._buildIndex(),this.update()}update(){let e=!1;const t=this._shape.radius/this.worldScale;this._currentRadius!==t&&(this._currentRadius=t,e=!0),this._currentOffset.equals(this._shape.offset)||(this._currentOffset.copy(this._shape.offset),e=!0);const n=io.copy(this._shape.tail).divideScalar(this.worldScale);this._currentTail.distanceToSquared(n)>1e-10&&(this._currentTail.copy(n),e=!0),e&&this._buildPosition()}_buildPosition(){io.copy(this._currentTail).sub(this._currentOffset);const e=io.length()/this._currentRadius;for(let i=0;i<=16;i++){const s=i/16*Math.PI;this._attrPos.setXYZ(i,-Math.sin(s),-Math.cos(s),0),this._attrPos.setXYZ(17+i,e+Math.sin(s),Math.cos(s),0),this._attrPos.setXYZ(34+i,-Math.sin(s),0,-Math.cos(s)),this._attrPos.setXYZ(51+i,e+Math.sin(s),0,Math.cos(s))}for(let i=0;i<32;i++){const s=i/16*Math.PI;this._attrPos.setXYZ(68+i,0,Math.sin(s),Math.cos(s)),this._attrPos.setXYZ(100+i,e,Math.sin(s),Math.cos(s))}const t=Math.atan2(io.y,Math.sqrt(io.x*io.x+io.z*io.z)),n=-Math.atan2(io.z,io.x);this.rotateZ(t),this.rotateY(n),this.scale(this._currentRadius,this._currentRadius,this._currentRadius),this.translate(this._currentOffset.x,this._currentOffset.y,this._currentOffset.z),this._attrPos.needsUpdate=!0}_buildIndex(){for(let e=0;e<34;e++){const t=(e+1)%34;this._attrIndex.setXY(e*2,e,t),this._attrIndex.setXY(68+e*2,34+e,34+t)}for(let e=0;e<32;e++){const t=(e+1)%32;this._attrIndex.setXY(136+e*2,68+e,68+t),this._attrIndex.setXY(200+e*2,100+e,100+t)}this._attrIndex.needsUpdate=!0}}class C$ extends Xt{constructor(e){super(),this.worldScale=1,this._currentRadius=0,this._currentOffset=new H,this._shape=e,this._attrPos=new pt(new Float32Array(32*3*3),3),this.setAttribute("position",this._attrPos),this._attrIndex=new pt(new Uint16Array(64*3),1),this.setIndex(this._attrIndex),this._buildIndex(),this.update()}update(){let e=!1;const t=this._shape.radius/this.worldScale;this._currentRadius!==t&&(this._currentRadius=t,e=!0),this._currentOffset.equals(this._shape.offset)||(this._currentOffset.copy(this._shape.offset),e=!0),e&&this._buildPosition()}_buildPosition(){for(let e=0;e<32;e++){const t=e/16*Math.PI;this._attrPos.setXYZ(e,Math.cos(t),Math.sin(t),0),this._attrPos.setXYZ(32+e,0,Math.cos(t),Math.sin(t)),this._attrPos.setXYZ(64+e,Math.sin(t),0,Math.cos(t))}this.scale(this._currentRadius,this._currentRadius,this._currentRadius),this.translate(this._currentOffset.x,this._currentOffset.y,this._currentOffset.z),this._attrPos.needsUpdate=!0}_buildIndex(){for(let e=0;e<32;e++){const t=(e+1)%32;this._attrIndex.setXY(e*2,e,t),this._attrIndex.setXY(64+e*2,32+e,32+t),this._attrIndex.setXY(128+e*2,64+e,64+t)}this._attrIndex.needsUpdate=!0}}const w$=new H;class v_ extends Qr{constructor(e){if(super(),this.matrixAutoUpdate=!1,this.collider=e,this.collider.shape instanceof VD)this._geometry=new C$(this.collider.shape);else if(this.collider.shape instanceof ND)this._geometry=new y$(this.collider.shape);else throw new Error("VRMSpringBoneColliderHelper: Unknown collider shape type detected");const t=new Ja({color:16711935,depthTest:!1,depthWrite:!1});this._line=new Rp(this._geometry,t),this.add(this._line)}dispose(){this._geometry.dispose()}updateMatrixWorld(e){this.collider.updateWorldMatrix(!0,!1),this.matrix.copy(this.collider.matrixWorld);const t=this.matrix.elements;this._geometry.worldScale=w$.set(t[0],t[1],t[2]).length(),this._geometry.update(),super.updateMatrixWorld(e)}}class F$ extends Xt{constructor(e){super(),this.worldScale=1,this._currentRadius=0,this._currentTail=new H,this._springBone=e,this._attrPos=new pt(new Float32Array(294),3),this.setAttribute("position",this._attrPos),this._attrIndex=new pt(new Uint16Array(194),1),this.setIndex(this._attrIndex),this._buildIndex(),this.update()}update(){let e=!1;const t=this._springBone.settings.hitRadius/this.worldScale;this._currentRadius!==t&&(this._currentRadius=t,e=!0),this._currentTail.equals(this._springBone.initialLocalChildPosition)||(this._currentTail.copy(this._springBone.initialLocalChildPosition),e=!0),e&&this._buildPosition()}_buildPosition(){for(let e=0;e<32;e++){const t=e/16*Math.PI;this._attrPos.setXYZ(e,Math.cos(t),Math.sin(t),0),this._attrPos.setXYZ(32+e,0,Math.cos(t),Math.sin(t)),this._attrPos.setXYZ(64+e,Math.sin(t),0,Math.cos(t))}this.scale(this._currentRadius,this._currentRadius,this._currentRadius),this.translate(this._currentTail.x,this._currentTail.y,this._currentTail.z),this._attrPos.setXYZ(96,0,0,0),this._attrPos.setXYZ(97,this._currentTail.x,this._currentTail.y,this._currentTail.z),this._attrPos.needsUpdate=!0}_buildIndex(){for(let e=0;e<32;e++){const t=(e+1)%32;this._attrIndex.setXY(e*2,e,t),this._attrIndex.setXY(64+e*2,32+e,32+t),this._attrIndex.setXY(128+e*2,64+e,64+t)}this._attrIndex.setXY(192,96,97),this._attrIndex.needsUpdate=!0}}const I$=new H;class U$ extends Qr{constructor(e){super(),this.matrixAutoUpdate=!1,this.springBone=e,this._geometry=new F$(this.springBone);const t=new Ja({color:16776960,depthTest:!1,depthWrite:!1});this._line=new Rp(this._geometry,t),this.add(this._line)}dispose(){this._geometry.dispose()}updateMatrixWorld(e){this.springBone.bone.updateWorldMatrix(!0,!1),this.matrix.copy(this.springBone.bone.matrixWorld);const t=this.matrix.elements;this._geometry.worldScale=I$.set(t[0],t[1],t[2]).length(),this._geometry.update(),super.updateMatrixWorld(e)}}class y_ extends St{constructor(e){super(),this.shape=e}}const x$=new Le;function DD(r){return r.invert?r.invert():r.getInverse(x$.copy(r)),r}class Q${constructor(e){this._inverseCache=new Le,this._shouldUpdateInverse=!0,this.matrix=e;const t={set:(n,i,s)=>(this._shouldUpdateInverse=!0,n[i]=s,!0)};this._originalElements=e.elements,e.elements=new Proxy(e.elements,t)}get inverse(){return this._shouldUpdateInverse&&(this._inverseCache.copy(this.matrix),DD(this._inverseCache),this._shouldUpdateInverse=!1),this._inverseCache}revert(){this.matrix.elements=this._originalElements}}const b$=new Le,ia=new H,wd=new H,E$=new H,Hc=new H,C_=new H,Fd=new H,w_=new $e,zc=new Le,S$=new Le;class _${constructor(e,t,n={},i=[]){var s,o,a,A,l,c;this._currentTail=new H,this._prevTail=new H,this._boneAxis=new H,this._worldSpaceBoneLength=0,this._center=null,this._initialLocalMatrix=new Le,this._initialLocalRotation=new $e,this._initialLocalChildPosition=new H,this.bone=e,this.bone.matrixAutoUpdate=!1,this.child=t,this.settings={hitRadius:(s=n.hitRadius)!==null&&s!==void 0?s:0,stiffness:(o=n.stiffness)!==null&&o!==void 0?o:1,gravityPower:(a=n.gravityPower)!==null&&a!==void 0?a:0,gravityDir:(l=(A=n.gravityDir)===null||A===void 0?void 0:A.clone())!==null&&l!==void 0?l:new H(0,-1,0),dragForce:(c=n.dragForce)!==null&&c!==void 0?c:.4},this.colliderGroups=i}get center(){return this._center}set center(e){var t;!((t=this._center)===null||t===void 0)&&t.userData.inverseCacheProxy&&(this._center.userData.inverseCacheProxy.revert(),delete this._center.userData.inverseCacheProxy),this._center=e,this._center&&(this._center.userData.inverseCacheProxy||(this._center.userData.inverseCacheProxy=new Q$(this._center.matrixWorld)))}get initialLocalChildPosition(){return this._initialLocalChildPosition}get _parentMatrixWorld(){return this.bone.parent?this.bone.parent.matrixWorld:b$}setInitState(){this._initialLocalMatrix.copy(this.bone.matrix),this._initialLocalRotation.copy(this.bone.quaternion),this.child?this._initialLocalChildPosition.copy(this.child.position):this._initialLocalChildPosition.copy(this.bone.position).normalize().multiplyScalar(.07);const e=this._getMatrixWorldToCenter(zc);this.bone.localToWorld(this._currentTail.copy(this._initialLocalChildPosition)).applyMatrix4(e),this._prevTail.copy(this._currentTail),this._boneAxis.copy(this._initialLocalChildPosition).normalize()}reset(){this.bone.quaternion.copy(this._initialLocalRotation),this.bone.updateMatrix(),this.bone.matrixWorld.multiplyMatrices(this._parentMatrixWorld,this.bone.matrix);const e=this._getMatrixWorldToCenter(zc);this.bone.localToWorld(this._currentTail.copy(this._initialLocalChildPosition)).applyMatrix4(e),this._prevTail.copy(this._currentTail)}update(e){if(e<=0)return;this._calcWorldSpaceBoneLength(),Hc.setFromMatrixPosition(this.bone.matrixWorld);let t=this._getMatrixWorldToCenter(zc);C_.copy(Hc).applyMatrix4(t);const n=w_.setFromRotationMatrix(t),i=S$.copy(t).multiply(this._parentMatrixWorld),s=wd.copy(this._boneAxis).applyMatrix4(this._initialLocalMatrix).applyMatrix4(i).sub(C_).normalize(),o=E$.copy(this.settings.gravityDir).applyQuaternion(n).normalize(),a=this._getMatrixCenterToWorld(zc);Fd.copy(this._currentTail).add(ia.copy(this._currentTail).sub(this._prevTail).multiplyScalar(1-this.settings.dragForce)).add(ia.copy(s).multiplyScalar(this.settings.stiffness*e)).add(ia.copy(o).multiplyScalar(this.settings.gravityPower*e)).applyMatrix4(a),Fd.sub(Hc).normalize().multiplyScalar(this._worldSpaceBoneLength).add(Hc),this._collision(Fd),t=this._getMatrixWorldToCenter(zc),this._prevTail.copy(this._currentTail),this._currentTail.copy(ia.copy(Fd).applyMatrix4(t));const A=DD(zc.copy(this._parentMatrixWorld).multiply(this._initialLocalMatrix)),l=w_.setFromUnitVectors(this._boneAxis,ia.copy(Fd).applyMatrix4(A).normalize());this.bone.quaternion.copy(this._initialLocalRotation).multiply(l),this.bone.updateMatrix(),this.bone.matrixWorld.multiplyMatrices(this._parentMatrixWorld,this.bone.matrix)}_collision(e){this.colliderGroups.forEach(t=>{t.colliders.forEach(n=>{const i=n.shape.calculateCollision(n.matrixWorld,e,this.settings.hitRadius,ia);i<0&&(e.add(ia.multiplyScalar(-i)),e.sub(Hc).normalize().multiplyScalar(this._worldSpaceBoneLength).add(Hc))})})}_calcWorldSpaceBoneLength(){ia.setFromMatrixPosition(this.bone.matrixWorld),this.child?wd.setFromMatrixPosition(this.child.matrixWorld):(wd.copy(this._initialLocalChildPosition),wd.applyMatrix4(this.bone.matrixWorld)),this._worldSpaceBoneLength=ia.sub(wd).length()}_getMatrixCenterToWorld(e){return this._center?e.copy(this._center.matrixWorld):e.identity(),e}_getMatrixWorldToCenter(e){return this._center?e.copy(this._center.userData.inverseCacheProxy.inverse):e.identity(),e}}function im(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(c){try{l(n.next(c))}catch(u){o(u)}}function A(c){try{l(n.throw(c))}catch(u){o(u)}}function l(c){c.done?s(c.value):i(c.value).then(a,A)}l((n=n.apply(r,e||[])).next())})}function R$(r,e){const t=[];let n=r;for(;n!==null;)t.unshift(n),n=n.parent;t.forEach(i=>{e(i)})}function kD(r,e){r.children.forEach(t=>{e(t)||kD(t,e)})}class F_{constructor(){this._joints=new Set,this._objectSpringBonesMap=new Map}get joints(){return this._joints}get springBones(){return console.warn("VRMSpringBoneManager: springBones is deprecated. use joints instead."),this._joints}get colliderGroups(){const e=new Set;return this._joints.forEach(t=>{t.colliderGroups.forEach(n=>{e.add(n)})}),Array.from(e)}get colliders(){const e=new Set;return this.colliderGroups.forEach(t=>{t.colliders.forEach(n=>{e.add(n)})}),Array.from(e)}addJoint(e){this._joints.add(e);let t=this._objectSpringBonesMap.get(e.bone);t==null&&(t=new Set,this._objectSpringBonesMap.set(e.bone,t)),t.add(e)}addSpringBone(e){console.warn("VRMSpringBoneManager: addSpringBone() is deprecated. use addJoint() instead."),this.addJoint(e)}deleteJoint(e){this._joints.delete(e),this._objectSpringBonesMap.get(e.bone).delete(e)}deleteSpringBone(e){console.warn("VRMSpringBoneManager: deleteSpringBone() is deprecated. use deleteJoint() instead."),this.deleteJoint(e)}setInitState(){const e=new Set,t=new Set,n=new Set;for(const i of this._joints)this._processSpringBone(i,e,t,n,s=>s.setInitState())}reset(){const e=new Set,t=new Set,n=new Set;for(const i of this._joints)this._processSpringBone(i,e,t,n,s=>s.reset())}update(e){const t=new Set,n=new Set,i=new Set;for(const s of this._joints)this._processSpringBone(s,t,n,i,o=>o.update(e)),kD(s.bone,o=>{var a,A;return((A=(a=this._objectSpringBonesMap.get(o))===null||a===void 0?void 0:a.size)!==null&&A!==void 0?A:0)>0?!0:(o.updateWorldMatrix(!1,!1),!1)})}_processSpringBone(e,t,n,i,s){if(n.has(e))return;if(t.has(e))throw new Error("VRMSpringBoneManager: Circular dependency detected while updating springbones");t.add(e);const o=this._getDependencies(e);for(const a of o)R$(a,A=>{const l=this._objectSpringBonesMap.get(A);if(l)for(const c of l)this._processSpringBone(c,t,n,i,s);else i.has(A)||(A.updateWorldMatrix(!1,!1),i.add(A))});e.bone.updateMatrix(),e.bone.updateWorldMatrix(!1,!1),s(e),i.add(e.bone),n.add(e)}_getDependencies(e){const t=new Set,n=e.bone.parent;return n&&t.add(n),e.colliderGroups.forEach(i=>{i.colliders.forEach(s=>{t.add(s)})}),t}}const M$=new Set(["1.0","1.0-beta"]);class Dl{constructor(e,t){this.parser=e,this.jointHelperRoot=t==null?void 0:t.jointHelperRoot,this.colliderHelperRoot=t==null?void 0:t.colliderHelperRoot}get name(){return Dl.EXTENSION_NAME}afterRoot(e){return im(this,void 0,void 0,function*(){e.userData.vrmSpringBoneManager=yield this._import(e)})}_import(e){return im(this,void 0,void 0,function*(){const t=yield this._v1Import(e);if(t!=null)return t;const n=yield this._v0Import(e);return n??null})}_v1Import(e){var t,n,i,s,o;return im(this,void 0,void 0,function*(){const a=e.parser.json;if(!(((t=a.extensionsUsed)===null||t===void 0?void 0:t.indexOf(Dl.EXTENSION_NAME))!==-1))return null;const l=new F_,c=yield e.parser.getDependencies("node"),u=(n=a.extensions)===null||n===void 0?void 0:n[Dl.EXTENSION_NAME];if(!u)return null;const f=u.specVersion;if(!M$.has(f))return console.warn(`VRMSpringBoneLoaderPlugin: Unknown ${Dl.EXTENSION_NAME} specVersion "${f}"`),null;const d=(i=u.colliders)===null||i===void 0?void 0:i.map((h,m)=>{var g,B,v,w,C;const I=c[h.node],E=h.shape;if(E.sphere)return this._importSphereCollider(I,{offset:new H().fromArray((g=E.sphere.offset)!==null&&g!==void 0?g:[0,0,0]),radius:(B=E.sphere.radius)!==null&&B!==void 0?B:0});if(E.capsule)return this._importCapsuleCollider(I,{offset:new H().fromArray((v=E.capsule.offset)!==null&&v!==void 0?v:[0,0,0]),radius:(w=E.capsule.radius)!==null&&w!==void 0?w:0,tail:new H().fromArray((C=E.capsule.tail)!==null&&C!==void 0?C:[0,0,0])});throw new Error(`VRMSpringBoneLoaderPlugin: The collider #${m} has no valid shape`)}),p=(s=u.colliderGroups)===null||s===void 0?void 0:s.map((h,m)=>{var g;return{colliders:((g=h.colliders)!==null&&g!==void 0?g:[]).map(v=>{const w=d==null?void 0:d[v];if(w==null)throw new Error(`VRMSpringBoneLoaderPlugin: The colliderGroup #${m} attempted to use a collider #${v} but not found`);return w}),name:h.name}});return(o=u.springs)===null||o===void 0||o.forEach((h,m)=>{var g;const B=h.joints,v=(g=h.colliderGroups)===null||g===void 0?void 0:g.map(I=>{const E=p==null?void 0:p[I];if(E==null)throw new Error(`VRMSpringBoneLoaderPlugin: The spring #${m} attempted to use a colliderGroup ${I} but not found`);return E}),w=h.center!=null?c[h.center]:void 0;let C;B.forEach(I=>{if(C){const E=C.node,U=c[E],S=I.node,V=c[S],J={hitRadius:C.hitRadius,dragForce:C.dragForce,gravityPower:C.gravityPower,stiffness:C.stiffness,gravityDir:C.gravityDir!=null?new H().fromArray(C.gravityDir):void 0},z=this._importJoint(U,V,J,v);w&&(z.center=w),l.addJoint(z)}C=I})}),l.setInitState(),l})}_v0Import(e){var t,n,i;return im(this,void 0,void 0,function*(){const s=e.parser.json;if(!(((t=s.extensionsUsed)===null||t===void 0?void 0:t.indexOf("VRM"))!==-1))return null;const a=(n=s.extensions)===null||n===void 0?void 0:n.VRM,A=a==null?void 0:a.secondaryAnimation;if(!A)return null;const l=A==null?void 0:A.boneGroups;if(!l)return null;const c=new F_,u=yield e.parser.getDependencies("node"),f=(i=A.colliderGroups)===null||i===void 0?void 0:i.map(d=>{var p;const h=u[d.node];return{colliders:((p=d.colliders)!==null&&p!==void 0?p:[]).map((g,B)=>{var v,w,C;const I=new H(0,0,0);return g.offset&&I.set((v=g.offset.x)!==null&&v!==void 0?v:0,(w=g.offset.y)!==null&&w!==void 0?w:0,g.offset.z?-g.offset.z:0),this._importSphereCollider(h,{offset:I,radius:(C=g.radius)!==null&&C!==void 0?C:0})})}});return l==null||l.forEach((d,p)=>{const h=d.bones;h&&h.forEach(m=>{var g,B,v,w;const C=u[m],I=new H;d.gravityDir?I.set((g=d.gravityDir.x)!==null&&g!==void 0?g:0,(B=d.gravityDir.y)!==null&&B!==void 0?B:0,(v=d.gravityDir.z)!==null&&v!==void 0?v:0):I.set(0,-1,0);const E=d.center!=null?u[d.center]:void 0,U={hitRadius:d.hitRadius,dragForce:d.dragForce,gravityPower:d.gravityPower,stiffness:d.stiffiness,gravityDir:I},S=(w=d.colliderGroups)===null||w===void 0?void 0:w.map(V=>{const J=f==null?void 0:f[V];if(J==null)throw new Error(`VRMSpringBoneLoaderPlugin: The spring #${p} attempted to use a colliderGroup ${V} but not found`);return J});C.traverse(V=>{var J;const z=(J=V.children[0])!==null&&J!==void 0?J:null,R=this._importJoint(V,z,U,S);E&&(R.center=E),c.addJoint(R)})})}),e.scene.updateMatrixWorld(),c.setInitState(),c})}_importJoint(e,t,n,i){const s=new _$(e,t,n,i);if(this.jointHelperRoot){const o=new U$(s);this.jointHelperRoot.add(o),o.renderOrder=this.jointHelperRoot.renderOrder}return s}_importSphereCollider(e,t){const{offset:n,radius:i}=t,s=new VD({offset:n,radius:i}),o=new y_(s);if(e.add(o),this.colliderHelperRoot){const a=new v_(o);this.colliderHelperRoot.add(a),a.renderOrder=this.colliderHelperRoot.renderOrder}return o}_importCapsuleCollider(e,t){const{offset:n,radius:i,tail:s}=t,o=new ND({offset:n,radius:i,tail:s}),a=new y_(o);if(e.add(a),this.colliderHelperRoot){const A=new v_(a);this.colliderHelperRoot.add(A),A.renderOrder=this.colliderHelperRoot.renderOrder}return a}}Dl.EXTENSION_NAME="VRMC_springBone";class T${constructor(e,t){var n,i,s,o,a,A,l,c,u,f;this.parser=e;const d=t==null?void 0:t.helperRoot,p=t==null?void 0:t.autoUpdateHumanBones;this.expressionPlugin=(n=t==null?void 0:t.expressionPlugin)!==null&&n!==void 0?n:new Uv(e),this.firstPersonPlugin=(i=t==null?void 0:t.firstPersonPlugin)!==null&&i!==void 0?i:new fq(e),this.humanoidPlugin=(s=t==null?void 0:t.humanoidPlugin)!==null&&s!==void 0?s:new yq(e,{helperRoot:d,autoUpdateHumanBones:p}),this.lookAtPlugin=(o=t==null?void 0:t.lookAtPlugin)!==null&&o!==void 0?o:new Tq(e,{helperRoot:d}),this.metaPlugin=(a=t==null?void 0:t.metaPlugin)!==null&&a!==void 0?a:new Dq(e),this.mtoonMaterialPlugin=(A=t==null?void 0:t.mtoonMaterialPlugin)!==null&&A!==void 0?A:new Hu(e),this.materialsHDREmissiveMultiplierPlugin=(l=t==null?void 0:t.materialsHDREmissiveMultiplierPlugin)!==null&&l!==void 0?l:new sp(e),this.materialsV0CompatPlugin=(c=t==null?void 0:t.materialsV0CompatPlugin)!==null&&c!==void 0?c:new $q(e),this.springBonePlugin=(u=t==null?void 0:t.springBonePlugin)!==null&&u!==void 0?u:new Dl(e,{colliderHelperRoot:d,jointHelperRoot:d}),this.nodeConstraintPlugin=(f=t==null?void 0:t.nodeConstraintPlugin)!==null&&f!==void 0?f:new Vl(e,{helperRoot:d})}get name(){return"VRMLoaderPlugin"}beforeRoot(){return rm(this,void 0,void 0,function*(){yield this.materialsV0CompatPlugin.beforeRoot(),yield this.mtoonMaterialPlugin.beforeRoot()})}loadMesh(e){return rm(this,void 0,void 0,function*(){return yield this.mtoonMaterialPlugin.loadMesh(e)})}getMaterialType(e){const t=this.mtoonMaterialPlugin.getMaterialType(e);return t??null}extendMaterialParams(e,t){return rm(this,void 0,void 0,function*(){yield this.materialsHDREmissiveMultiplierPlugin.extendMaterialParams(e,t),yield this.mtoonMaterialPlugin.extendMaterialParams(e,t)})}afterRoot(e){return rm(this,void 0,void 0,function*(){yield this.metaPlugin.afterRoot(e),yield this.humanoidPlugin.afterRoot(e),yield this.expressionPlugin.afterRoot(e),yield this.lookAtPlugin.afterRoot(e),yield this.firstPersonPlugin.afterRoot(e),yield this.springBonePlugin.afterRoot(e),yield this.nodeConstraintPlugin.afterRoot(e),yield this.mtoonMaterialPlugin.afterRoot(e);const t=e.userData.vrmMeta,n=e.userData.vrmHumanoid;if(t&&n){const i=new Lq({scene:e.scene,expressionManager:e.userData.vrmExpressionManager,firstPerson:e.userData.vrmFirstPerson,humanoid:n,lookAt:e.userData.vrmLookAt,meta:t,materials:e.userData.vrmMToonMaterials,springBoneManager:e.userData.vrmSpringBoneManager,nodeConstraintManager:e.userData.vrmNodeConstraintManager});e.userData.vrm=i}})}}var Rn;(function(r){r[r.ARRAY_BUFFER=34962]="ARRAY_BUFFER",r[r.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",r[r.BYTE=5120]="BYTE",r[r.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",r[r.SHORT=5122]="SHORT",r[r.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",r[r.UNSIGNED_INT=5125]="UNSIGNED_INT",r[r.FLOAT=5126]="FLOAT",r[r.LINEAR=9729]="LINEAR",r[r.REPEAT=10497]="REPEAT"})(Rn||(Rn={}));const oB="blend_",I_="vrmColliderSphere";class N${parse(e,t,n){const i=e.humanoid,s=e.meta,o=e.materials,a={},A={},l={},c=e.lookAt,u={generator:"UniGLTF-2.0.0",version:"2.0"};if(t)if(i)if(s)if(o){if(!c)throw new Error("lookAt is undefined or null")}else throw new Error("materials is undefined or null");else throw new Error("meta is undefined or null");else throw new Error("humanoid is undefined or null");else throw new Error("avatar is undefined or null");const f=o.filter((X,$,se)=>se.findIndex(ae=>ae.name===X.name.replace(" (Outline)",""))===$).map(X=>X),d=f.map(X=>X.name),p=s.texture?{name:"icon",imageBitmap:s.texture.image}:null,h=f.filter(X=>X.map).map(X=>{if(!X.map)throw new Error(X.name+" map is null");return{name:X.name,imageBitmap:X.map.image}}),m=f.filter(X=>X.userData.shadeTexture).map(X=>{if(!X.userData.shadeTexture)throw new Error(X.userData.shadeTexture+" map is null");return{name:X.name+"_shade",imageBitmap:X.userData.shadeTexture.image}}),g=h.concat(m),B=W$(g,p),v=Z$(B),w=P$(B),C=L$(f,g),I=t.children.filter(X=>X.children.length>0&&X.children[0].type===Pr.Bone)[0],E=LD(I).filter(X=>X.name!==I_),U=E.map(X=>X.name),S=E.map(X=>({children:X.children.filter($=>$.name!==I_).map($=>U.indexOf($.name)),name:X.name,rotation:[X.quaternion.x,X.quaternion.y,X.quaternion.z,X.quaternion.w],scale:[X.scale.x,X.scale.y,X.scale.z],translation:[X.position.x,X.position.y,X.position.z]})),V=[],J=t.children.filter(X=>X.type===Pr.Group||X.type===Pr.SkinnedMesh),z=[];J.forEach(X=>{const $=X.type===Pr.Group?X.children[0]:X,se=$.geometry.attributes;z.push(new sa(se.position,Rn.FLOAT,Vt.POSITION,ks.VEC3,$.name,void 0)),z.push(new sa(se.normal,Rn.FLOAT,Vt.NORMAL,ks.VEC3,$.name,void 0)),z.push(new sa(se.uv,Rn.FLOAT,Vt.UV,ks.VEC2,$.name,void 0)),z.push(new sa(se.skinWeight,Rn.FLOAT,Vt.SKIN_WEIGHT,ks.VEC4,$.name,void 0)),z.push(new sa(se.skinIndex,Rn.UNSIGNED_SHORT,Vt.SKIN_INDEX,ks.VEC4,$.name,void 0)),(X.type===Pr.Group?X.children.map(de=>de):[X]).forEach(de=>{if(!de.geometry.index)throw new Error(de.name+" geometry.index is null");z.push(new sa(de.geometry.index,Rn.UNSIGNED_INT,Vt.INDEX,ks.SCALAR,$.name,de.name))}),$.morphTargetDictionary||($.morphTargetDictionary={},$.morphTargetInfluences=[],$.geometry.morphAttributes={},$.updateMorphTargets()),$.geometry.userData.targetNames=[];for(const de in e.expressionManager.expressionMap){const fe=e.expressionManager.expressionMap[de],ge=fe._binds.map(Ue=>({node:E.length,index:Ue.index,weight:Ue.weight}));let Qe=!1;for(const Ue in Zr)if(de.toLowerCase()===Zr[Ue].toLowerCase()){a[Zr[Ue]]={morphTargetBinds:ge,isBinary:fe.isBinary,overrideBlink:fe.overrideBlink,overrideLookAt:fe.overrideLookAt,overrideMouth:fe.overrideMouth},Qe=!0;break}!Qe&&de.toLowerCase()==="surprise"&&(a.surprised={morphTargetBinds:ge,isBinary:fe.isBinary,overrideBlink:fe.overrideBlink,overrideLookAt:fe.overrideLookAt,overrideMouth:fe.overrideMouth},Qe=!0),Qe===!1&&(A[de]={morphTargetBinds:ge,isBinary:fe.isBinary,overrideBlink:fe.overrideBlink,overrideLookAt:fe.overrideLookAt,overrideMouth:fe.overrideMouth})}for(const de in $.morphTargetDictionary){$.geometry.userData.targetNames.push(de);const fe=$.morphTargetDictionary[de],ge=$.geometry.morphAttributes;z.push(new sa(ge.position[fe],Rn.FLOAT,Vt.BLEND_POSITION,ks.VEC3,$.name,oB+de)),z.push(new sa(ge.normal[fe],Rn.FLOAT,Vt.BLEND_NORMAL,ks.VEC3,$.name,oB+de))}}),Object.keys(a).length>0&&(l.preset=a),Object.keys(A).length>0&&(l.custom=A),J.forEach(X=>{const $=X.type===Pr.Group?X.children[0]:X,se=new Float32Array($.skeleton.boneInverses.map(ae=>ae.elements).flat());z.push(new sa(new pt(se,16),Rn.FLOAT,Vt.BIND_MATRIX,ks.MAT4,$.name,$.name))}),V.push(...z.map(X=>({bufferView:-1,byteOffset:0,componentType:X.valueType,count:X.attribute.count,max:X.max,min:X.min,normalized:!1,type:X.accessorsType})));const R=D$(J,z,d);J.forEach((X,$)=>{S.push({mesh:$,name:X.name,rotation:[X.quaternion.x,X.quaternion.y,X.quaternion.z,X.quaternion.w],scale:[X.scale.x,X.scale.y,X.scale.z],skin:$,translation:[X.position.x,X.position.y,X.position.z]})});const y=k$(J,z,U),Q={offsetFromHeadBone:[0,0,0],rangeMapHorizontalInner:{inputMaxValue:c.applier.rangeMapHorizontalInner.inputMaxValue,outputScale:c.applier.rangeMapHorizontalInner.outputScale},rangeMapHorizontalOuter:{inputMaxValue:c.applier.rangeMapHorizontalOuter.inputMaxValue,outputScale:c.applier.rangeMapHorizontalOuter.outputScale},rangeMapVerticalDown:{inputMaxValue:c.applier.rangeMapVerticalDown.inputMaxValue,outputScale:c.applier.rangeMapVerticalDown.outputScale},rangeMapVerticalUp:{inputMaxValue:c.applier.rangeMapVerticalUp.inputMaxValue,outputScale:c.applier.rangeMapVerticalUp.outputScale},type:"bone"},_={humanBones:{}};for(const X in i.humanBones)_.humanBones[X]={node:U.indexOf(i.humanBones[X].node.name)};const L=s,T=[];T.push(...g.map(X=>({buffer:U_(X.imageBitmap),type:Vt.IMAGE}))),T.push(...z.map(X=>({buffer:X.buffer,type:X.type}))),p&&T.push({buffer:U_(p.imageBitmap),type:Vt.IMAGE});let Z=0,G=0,D=0;const x=T.map((X,$)=>{const se={buffer:0,byteLength:X.buffer.byteLength,byteOffset:Z,target:X.type===Vt.IMAGE||X.type===Vt.BIND_MATRIX?void 0:X.type===Vt.INDEX?Rn.ELEMENT_ARRAY_BUFFER:Rn.ARRAY_BUFFER};return Z+=X.buffer.byteLength,X.type===Vt.IMAGE?B[G++].bufferView=$:V[D++].bufferView=$,se}),P=J$(t,S),oe={accessors:V,asset:u,buffers:[{byteLength:Z}],bufferViews:x,extensions:{VRMC_vrm:{expressions:l,humanoid:_,lookAt:Q,meta:L,specVersion:"1.0"}},extensionsUsed:["KHR_materials_unlit","KHR_texture_transform","VRMC_materials_mtoon","VRMC_vrm"],images:B,materials:C,meshes:R,nodes:S,samplers:v,avatar:0,scenes:P,skins:y,textures:w},M=new x_(yI(JSON.stringify(oe,void 0,2)),"JSON"),k=new x_($d(T.map(X=>X.buffer)),"BIN\0"),q=$d([M.buffer,k.buffer]),ee=$d([yI("glTF"),vI(2,4),vI(q.byteLength+12,4)]);n($d([ee,q]))}}function LD(r){return r.children.length<=0?[r]:[r].concat(r.children.map(e=>LD(e)).flat())}function U_(r){const e=document.createElement("canvas");e.width=r.width,e.height=r.height,e.getContext("2d").drawImage(r,0,0);const t=e.toDataURL("image/png"),n=atob(t.split(",")[1]),i=new ArrayBuffer(n.length),s=new DataView(i);for(let o=0;o<n.length;o++)s.setUint8(o,n.charCodeAt(o));return i}function vI(r,e){const t=new ArrayBuffer(e);return new DataView(t).setUint32(0,r,!0),t}function yI(r){return new TextEncoder().encode(r).buffer}function $d(r){let e=0;for(let i=0;i<r.length;i++)e+=r[i].byteLength;const t=new Uint8Array(e);let n=0;for(let i=0;i<r.length;++i)t.set(new Uint8Array(r[i]),n),n+=r[i].byteLength;return t.buffer}function V$(r,e){const t=e===Rn.UNSIGNED_SHORT?2:4,n=r.array;let i=0;const s=new ArrayBuffer(r.count*r.itemSize*t),o=new DataView(s);for(let a=0;a<r.count;a++)for(let A=0;A<r.itemSize;A++){let l;r.itemSize>4?l=n[a*r.itemSize+A]:A===0?l=r.getX(a):A===1?l=r.getY(a):A===2?l=r.getZ(a):l=r.getW(a),e===Rn.UNSIGNED_SHORT?o.setUint16(i,l,!0):e===Rn.UNSIGNED_INT?o.setUint32(i,l,!0):o.setFloat32(i,l,!0),i+=t}return s}let x_=class{constructor(e,t){this.data=e,this.type=t;const n=this.data;this.buffer=$d([vI(n.byteLength,4),yI(this.type),n])}paddingBinary(e,t){const n=Math.ceil(e.byteLength/4)*4;if(e.byteLength===n)return e;const i=new Uint8Array(n);i.set(new Uint8Array(e),0);for(let s=e.byteLength;s<n;s++)i.set(new Uint8Array(t),s);return i.buffer}},sa=class{constructor(e,t,n,i,s,o){this.attribute=e,this.type=n,this.valueType=t,this.accessorsType=i,this.meshName=s,this.name=o,this.buffer=V$(this.attribute,this.valueType),this.max=n===Vt.POSITION||n===Vt.BLEND_POSITION?[Math.max.apply(null,Array.from(this.attribute.array).filter((a,A)=>A%3===0)),Math.max.apply(null,Array.from(this.attribute.array).filter((a,A)=>A%3===1)),Math.max.apply(null,Array.from(this.attribute.array).filter((a,A)=>A%3===2))]:void 0,this.min=n===Vt.POSITION||n===Vt.BLEND_POSITION?[Math.min.apply(null,Array.from(this.attribute.array).filter((a,A)=>A%3===0)),Math.min.apply(null,Array.from(this.attribute.array).filter((a,A)=>A%3===1)),Math.min.apply(null,Array.from(this.attribute.array).filter((a,A)=>A%3===2))]:void 0}};var Qu;(function(r){r.MeshBasicMaterial="MeshBasicMaterial",r.MeshStandardMaterial="MeshStandardMaterial",r.MToonMaterial="MToonMaterial"})(Qu||(Qu={}));var ks;(function(r){r.SCALAR="SCALAR",r.VEC2="VEC2",r.VEC3="VEC3",r.VEC4="VEC4",r.MAT4="MAT4"})(ks||(ks={}));var Vt;(function(r){r.POSITION="POSITION",r.NORMAL="NORMAL",r.UV="UV",r.INDEX="INDEX",r.SKIN_WEIGHT="SKIN_WEIGHT",r.SKIN_INDEX="SKIN_INDEX",r.BLEND_POSITION="BLEND_POSITION",r.BLEND_NORMAL="BLEND_NORMAL",r.BIND_MATRIX="BIND_MATRIX",r.IMAGE="IMAGE"})(Vt||(Vt={}));var Pr;(function(r){r.Group="Group",r.SkinnedMesh="SkinnedMesh",r.Object3D="Object3D",r.Bone="Bone"})(Pr||(Pr={}));const D$=(r,e,t)=>r.map(n=>{const i=n.type===Pr.Group?n.children[0]:n,s=n.type===Pr.Group?n.children.map(o=>o):[n];return{name:n.name,primitives:s.map(o=>{const a=e.map(l=>l.meshName===i.name?l.type:null),A=Array.isArray(o.material)?o.material[0].name:o.material.name;return{attributes:{JOINTS_0:a.indexOf(Vt.SKIN_INDEX),NORMAL:a.indexOf(Vt.NORMAL),POSITION:a.indexOf(Vt.POSITION),TEXCOORD_0:a.indexOf(Vt.UV),WEIGHTS_0:a.indexOf(Vt.SKIN_WEIGHT)},extras:{targetNames:o.geometry.userData.targetNames},indices:e.map(l=>l.type===Vt.INDEX&&l.meshName===i.name?l.name:null).indexOf(o.name),material:t.indexOf(A),mode:4,targets:i.geometry.userData.targetNames?i.geometry.userData.targetNames.map(l=>({NORMAL:e.map(c=>c.type===Vt.BLEND_NORMAL&&c.meshName===i.name?c.name:null).indexOf(oB+l),POSITION:e.map(c=>c.type===Vt.BLEND_POSITION&&c.meshName===i.name?c.name:null).indexOf(oB+l)})):void 0}})}}),k$=(r,e,t)=>r.map(n=>{const i=n.type===Pr.Group?n.children[0]:n;return{inverseBindMatrices:e.map(s=>s.type===Vt.BIND_MATRIX?s.meshName:null).indexOf(i.name),joints:i.skeleton.bones.map(s=>t.indexOf(s.name)),skeleton:t.indexOf(i.skeleton.bones[0].name)}}),L$=(r,e)=>r.map(t=>{let n,i=null;if(t=t.userData.vrmMaterial?t.userData.vrmMaterial:t,t.type==="ShaderMaterial")i=t.userData.gltfExtensions.VRMC_materials_mtoon,i.shadeMultiplyTexture={index:e.map(c=>c.name).indexOf(t.uniforms.shadeMultiplyTexture.name)},n=t.color?[1,1,1,1]:void 0;else{const l=t;n=l.color?[l.color.r,l.color.g,l.color.b,1]:void 0}let s=-1;t.map?s=e.map(l=>l.name).indexOf(t.name):t.uniforms&&t.uniforms.map&&(s=e.map(l=>l.name).indexOf(t.uniforms.map.name));const o=s>=0?{extensions:{KHR_texture_transform:{offset:[0,0],scale:[1,1]}},index:s,texCoord:0}:void 0,a=(()=>{switch(t.type){case Qu.MeshStandardMaterial:return t.metalness;case Qu.MeshBasicMaterial:return 0;default:return 0}})(),A=(()=>{switch(t.type){case Qu.MeshStandardMaterial:return t.roughness;case Qu.MeshBasicMaterial:return .9;default:return .9}})();return{alphaCutoff:t.alphaTest>0?t.alphaTest:void 0,alphaMode:t.transparent?"BLEND":t.alphaTest>0?"MASK":"OPAQUE",doubleSided:t.side===2,extensions:t.type==="ShaderMaterial"?{KHR_materials_unlit:{},VRMC_materials_mtoon:i}:void 0,name:t.name,pbrMetallicRoughness:{baseColorFactor:n,baseColorTexture:o,metallicFactor:a,roughnessFactor:A}}}),W$=(r,e)=>(e?r.concat(e):r).filter(t=>t&&t.imageBitmap).map(t=>({bufferView:-1,mimeType:"image/png",name:t.name})),Z$=r=>r.map(()=>({magFilter:Rn.LINEAR,minFilter:Rn.LINEAR,wrapS:Rn.REPEAT,wrapT:Rn.REPEAT})),P$=r=>r.map((e,t)=>({sampler:0,source:t})),J$=(r,e)=>{const t=e.map(n=>n.name);return[{nodes:r.children.filter(n=>n.type===Pr.Object3D||n.type===Pr.SkinnedMesh||n.type===Pr.Group||n.type===Pr.Bone).map(n=>t.indexOf(n.name))}]};let LC=new H,Xc=new H;const Q_=[],eh=new DK;eh.firstHitOnly=!0;const G$=.03,O$=.03;let th;const H$=async r=>{const e=[];th=r[0].parent,th.lines!=null&&(th.lines.forEach(i=>{i.visible=!1}),th.lines.length=0),r.forEach(i=>{i.userData.cullLayer!=null&&(i.userData.origIndexBuffer==null&&(i.userData.origIndexBuffer=i.geometry.index.clone()),e[i.userData.cullLayer]==null&&(e[i.userData.cullLayer]=[]),e[i.userData.cullLayer].push(i),i.geometry.setIndex(i.userData.origIndexBuffer))});for(let i=e.length-1;i>=0;i--)e[i]==null&&e.splice(i,1);let t=[];const n=[];for(let i=e.length-1;i>=0;i--){if(t.length!=0||e.length>=1)for(let s=0;s<e[i].length;s++){const o=e[i][s],a=o.userData.origIndexBuffer.array,A=o.geometry.attributes.position.array,l=o.geometry.attributes.normal.array,c=o.geometry.userData.faceNormals;n.push({geom:o.geometry,index:X$(a,A,l,c,t,o.userData.cullDistance)})}t=[...t,...e[i]]}n.forEach(i=>{i.geom.setIndex(i.index)})},z$=r=>{let e=G$,t=O$;return r&&(isNaN(r)?Array.isArray(r)&&(isNaN(r[0])||(e=r[0]),isNaN(r[1])||(t=r[1])):e=r),[e,t]},X$=(r,e,t,n,i,s,o=!1)=>{const a=[],A=z$(s);let l=A[0],c=A[1];eh.far=l+c;for(let f=0;f<r.length/3;f++){Xc=n[f].clone(),n&&Xc.set(n[f].x,n[f].y,n[f].z).normalize();const d=f*3;for(let p=0;p<3;p++){Q_.length=0;const h=r[d+p]*3;if(n==null&&Xc.set(t[h],t[h+1],t[h+2]).normalize(),LC.set(e[h],e[h+1],e[h+2]).add(Xc.clone().multiplyScalar(l)),eh.set(LC,Xc.clone().multiplyScalar(-1)),eh.intersectObjects(i,!1,Q_).length===0){for(let m=0;m<3;m++)a.push(r[d+m]);break}else o&&Y$(LC,Xc.clone().multiplyScalar(-1),eh.far,16711680,th)}}const u=new Uint32Array(a);return new pt(u,1,!1)};function Y$(r,e,t,n,i){i.lines==null&&(i.lines=[]);let s=new H;s.addVectors(r,e.clone().multiplyScalar(t));const o=[];o.push(r),o.push(s);const a=new Xt().setFromPoints(o),A=[];A.push(new Ve(0)),A.push(new Ve(16777215));let l=new Ja({color:n});var c=new Pf(a,l);c.renderOrder=100,i.add(c),i.lines.push(c)}function WD(r){let e,t,n,i=0;for(let a=0;a<r.length;++a){const A=r[a];if(A.isInterleavedBufferAttribute)return console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. InterleavedBufferAttributes are not supported."),null;if(e===void 0&&(e=A.array.constructor),e!==A.array.constructor)return console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. BufferAttribute.array must be of consistent array types across matching attributes."),null;if(t===void 0&&(t=A.itemSize),t!==A.itemSize)return console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. BufferAttribute.itemSize must be consistent across matching attributes."),null;if(n===void 0&&(n=A.normalized),n!==A.normalized)return console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. BufferAttribute.normalized must be consistent across matching attributes."),null;i+=A.array.length}const s=new e(i);let o=0;for(let a=0;a<r.length;++a)s.set(r[a].array,o),o+=r[a].array.length;return new pt(s,t,n)}let WC,eA,sm,Id,ZC,Gi,tA;function K$(r,e,t,n,i){if(WC==null){WC=document.createElement("div"),sm=new G0,eA=new _p(-n/2,n/2,i/2,-i/2,-1e4,1e4),eA.position.z=100,sm.add(eA),tA=new KA(n,i),tA.texture.encoding=lt,Id=new Io({side:Va,transparent:!0,opacity:1,color:new Ve(1,1,1)});const a=new ic(n,i);ZC=new bn(a,Id),sm.add(ZC),Gi=new Fx,Gi.setPixelRatio(1),Gi.setSize(n,i),Gi.setClearColor(new Ve(1,1,1),1),Gi.autoClear=!1,WC.appendChild(Gi.domElement)}else{eA.left=-n/2,eA.right=n/2,eA.top=i/2,eA.bottom=-i/2;const a=new ic(n,i);ZC=new bn(a,Id),tA.width=n,tA.height=i,Gi.setSize(n,i)}Id.map=r,Id.color=e.clone(),Gi.setClearColor(t.clone(),1),Gi.setRenderTarget(tA),Gi.clear(),Gi.render(sm,eA);let s=new Uint8ClampedArray(tA.width*tA.height*4);return Gi.readRenderTargetPixels(tA,0,0,n,i,s),new ImageData(s,n,i)}function ZD({width:r,height:e}){const t=document.createElement("canvas");t.width=r,t.height=e;const n=t.getContext("2d");return n.fillStyle="white",n.fillRect(0,0,t.width,t.height),n}function CI(r,e){return r=r.length==null?r:r[0],r[e]&&r[e].image}function j$(r,e){return r=r.length==null?r:r[0],r[e]&&r[e].clone()}function UA(r,e,t,n,i){const s=(r-e)/(t-e);return n+s*(i-n)}const q$=async({transparentColor:r,meshes:e,atlasSize:t=4096})=>typeof window>"u"?await $$({meshes:e,atlasSize:t}):await eee({backColor:r,meshes:e,atlasSize:t}),$$=async({meshes:r,atlasSize:e=4096})=>{const t=e,n=["diffuse"],i=[];r.forEach(w=>{const C=w.material;let I=i.find(E=>E.material===C);if(!I)i.push({material:C,mesh:w});else{const{dest:E}=Px({meshes:[I.mesh,w]});I.mesh.geometry=E}});const s=Object.fromEntries(n.map(w=>[w,ZD({width:t,height:t})])),o=Math.floor(Math.sqrt(r.length)+1),a=t/o,A=new Map(i.map((w,C)=>{const I=new Je(C%o,Math.floor(C/o)).multiplyScalar(1/o),E=new Je(I.x+1/o,I.y+1/o);return[w.mesh,{min:I,max:E}]})),l={diffuse:["map"],normal:["normalMap"],orm:["ormMap","aoMap","roughnessMap","metalnessMap"]},c=[],u=[];i.forEach(w=>{const{min:C,max:I}=A.get(w.mesh);u.push(I),c.push(C)});const f=new Je(Math.max(...u.map(w=>w.x)),Math.max(...u.map(w=>w.y))),d=new Je(Math.min(...c.map(w=>w.x)),Math.min(...c.map(w=>w.y))),p=1/(f.x-d.x),h=1/(f.y-d.y),m=a*p,g=a*h,B=new Map(i.map(w=>{let{min:C,max:I}=A.get(w.mesh);return C.x=C.x*p,C.y=C.y*h,I.x=I.x*p,I.y=I.y*h,[w.mesh,{min:C,max:I}]}));i.forEach(w=>{const{material:C,mesh:I}=w,{min:E,max:U}=B.get(I);n.forEach(z=>{const R=s[z];R.globalCompositeOperation="source-over";let y=CI(C,l[z].find(Q=>CI(C,Q)));if(y!==""&&y!==void 0)try{const Q=new Uint8ClampedArray(y.data),_=new ImageData(Q,m,g),L=document.createElement("canvas");L.width=m,L.height=g;const T=L.getContext("2d");T.putImageData(_,0,0),T.save(),R.drawImage(L,E.x*t,E.y*t,m,g)}catch(Q){console.error("error",Q)}else R.fillStyle=z==="diffuse"?`#${C.color.clone().getHexString()}`:z==="normal"?"#8080ff":z==="orm"?`#${new Ve(C.aoMapIntensity,C.roughness,C.metalness).getHexString()}`:"#7F7F7F",R.fillRect(E.x*t,E.y*t,m,g)});const S=I.geometry,V=S.attributes.uv;if(V)for(let z=0;z<V.array.length;z+=2)V.array[z]=UA(V.array[z],0,1,E.x,U.x),V.array[z+1]=UA(V.array[z+1],0,1,E.y,U.y);const J=S.attributes.uv2;if(J)for(let z=0;z<J.array.length;z+=2)J.array[z]=UA(J.array[z],0,1,E.x,U.x),J.array[z+1]=UA(J.array[z+1],0,1,E.y,U.y);else S.attributes.uv2=S.attributes.uv});const v=Object.fromEntries(await Promise.all(n.map(async w=>{const C=new En(s[w].canvas);return C.flipY=!1,[w,C]})));return{bakeObjects:i,textures:v,uvs:B}},eee=async({backColor:r,meshes:e,atlasSize:t=4096})=>{const n=t,i=["diffuse"],s=[];let o=null;e.forEach(I=>{I=I.clone();const E=I.material.length==null?I.material:I.material[0];o==null&&(o=E.clone());let U=s.find(S=>{S.material});if(!U)s.push({material:E,mesh:I});else{const{dest:S}=Px({meshes:[U.mesh,I]});U.mesh.geometry=S}});const a=Object.fromEntries(i.map(I=>[I,ZD({width:n,height:n})])),A=Math.floor(Math.sqrt(e.length)+1),l=n/A,c=new Map(s.map((I,E)=>{const U=new Je(E%A,Math.floor(E/A)).multiplyScalar(1/A),S=new Je(U.x+1/A,U.y+1/A);return[I.mesh,{min:U,max:S}]})),u={diffuse:["map"],normal:["normalMap"],orm:["ormMap","aoMap","roughnessMap","metalnessMap"]},f=[],d=[];s.forEach(I=>{const{min:E,max:U}=c.get(I.mesh);d.push(U),f.push(E)});const p=new Je(Math.max(...d.map(I=>I.x)),Math.max(...d.map(I=>I.y))),h=new Je(Math.min(...f.map(I=>I.x)),Math.min(...f.map(I=>I.y))),m=1/(p.x-h.x),g=1/(p.y-h.y),B=l*m,v=l*g,w=new Map(s.map(I=>{let{min:E,max:U}=c.get(I.mesh);return E.x=E.x*m,E.y=E.y*g,U.x=U.x*m,U.y=U.y*g,[I.mesh,{min:E,max:U}]}));s.forEach(I=>{const{material:E,mesh:U}=I,{min:S,max:V}=w.get(U);i.forEach(y=>{var G;const Q=a[y];Q.globalCompositeOperation="source-over";let _,L=new Ve(1,1,1);switch(y){case"diffuse":_=r,(G=E.uniforms)!=null&&G.litFactor&&(L=E.uniforms.litFactor.value);break;case"normal":_=new Ve(8421631);break;case"orm":_=new Ve(E.aoMapIntensity,E.roughness,E.metalness);break;default:_=new Ve(1,1,1);break}let T=j$(E,u[y].find(D=>CI(E,D)));const Z=K$(T,L,_,n,n);createImageBitmap(Z).then(D=>Q.drawImage(D,S.x*n,S.y*n,B,v))});const J=U.geometry.clone();U.geometry=J;const z=J.attributes.uv.clone();if(J.attributes.uv=z,z)for(let y=0;y<J.attributes.uv.array.length;y+=2)z.array[y]=UA(z.array[y],0,1,S.x,V.x),z.array[y+1]=UA(z.array[y+1],0,1,S.y,V.y);const R=J.attributes.uv2;if(R)for(let y=0;y<R.array.length;y+=2)R.array[y]=UA(R.array[y],0,1,S.x,V.x),R.array[y+1]=UA(R.array[y+1],0,1,S.y,V.y);else J.attributes.uv2=J.attributes.uv});const C=Object.fromEntries(await Promise.all(i.map(async I=>{const E=new En(a[I].canvas);return E.flipY=!1,[I,E]})));return{bakeObjects:s,textures:C,uvs:w,vrmMaterial:o}};function tee(r){const e=new Map;for(const n of r.skeleton.bones){const i=n.clone(!1);e.set(n,i)}r.skeleton.bones[0].traverse(n=>{if(n.type!=="Bone")return;const i=e.get(n);for(const s of n.children){const o=e.get(s);o&&i.add(o)}});const t=new dc(r.skeleton.bones.map(n=>e.get(n)));return t.boneInverses=r.skeleton.boneInverses,t.pose(),t}function nee(r){const e=new Map;new H(-1,1,-1);let t=0;r.forEach(a=>{a.skeleton&&a.skeleton.bones.forEach((A,l)=>{var u;if(e.get(A.name)==null){const f={index:t,boneInverses:a.skeleton.boneInverses[l],bone:A.clone(!1),parentName:((u=A.parent)==null?void 0:u.type)=="Bone"?A.parent.name:null};t++,e.set(A.name,f)}})});const n=[],i=[];[...e.values()].forEach(a=>{var A;if(n.push(a.bone),i.push(a.boneInverses),a.parentName!=null){const l=(A=e.get(a.parentName))==null?void 0:A.bone;l&&l.add(a.bone)}});const o=new dc(n,i);return o.pose(),o}function ree(r,e){if(!e.skeleton)return;const t=new Map;if(e.skeleton){e.skeleton.bones.forEach((o,a)=>{const A=r.bones.filter(c=>c.name===o.name),l=A.length>0?r.bones.indexOf(A[0]):-1;t.set(a,l)});const n=[],i=e.geometry.attributes.skinIndex.array;for(let o=0;o<i.length;o++)n[o]=t.get(i[o]);const s=new Uint16Array(n);return new pt(s,4,!1)}}async function iee({transparentColor:r,avatar:e,atlasSize:t=4096},n=!1){const{bakeObjects:i,textures:s,vrmMaterial:o}=await q$({transparentColor:r,atlasSize:t,meshes:HD(e,"SkinnedMesh")}),a=i.map(p=>p.mesh),A=nee(a);a.forEach(p=>{const h=p.geometry;h.attributes.uv2||(h.attributes.uv2=h.attributes.uv),p.skeleton!=null&&p.geometry.setAttribute("skinIndex",ree(A,p));for(let m=0;m<8;m++)delete h.attributes[`morphTarget${m}`],delete h.attributes[`morphNormal${m}`]});const{dest:l}=Px({meshes:a},n),c=new Xt;if(n)for(let p=0;p<l.attributes.position.array.length;p+=3)l.attributes.position.array[p]*=-1,l.attributes.position.array[p+2]*=-1;c.attributes=l.attributes,c.morphAttributes=l.morphAttributes,c.morphTargetsRelative=!0,c.setIndex(l.index);const u=new Mp({map:s.diffuse});o.uniforms.map=s.diffuse,o.uniforms.shadeMultiplyTexture=s.diffuse,u.userData.vrmMaterial=o;const f=new lv(c,u);f.name="CombinedMesh",f.morphTargetInfluences=l.morphTargetInfluences,f.morphTargetDictionary=l.morphTargetDictionary,f.bind(A);const d=new St;return d.name="AvatarRoot",d.animations=l.animations,d.add(f),d.add(A.bones[0]),u.userData.shadeTexture=s.uniformColor,d.userData.atlasMaterial=u,d}function see({meshes:r,sourceMorphTargetDictionaries:e,destMorphTargetDictionary:t}){const n=[];return Object.entries(t).map(([i,s])=>{const o=r.find(A=>e.get(A).hasOwnProperty(i)),a=o.morphTargetDictionary[i];n[s]=o.morphTargetInfluences[a]}),n}function oee({sourceAttributes:r}){const e=new Set,t=Array.from(r.values());t.forEach(i=>{Object.keys(i).forEach(s=>e.add(s))});const n={};return Array.from(e.keys()).map(i=>{n[i]=WD(t.map(s=>s[i]).flat().filter(s=>s!==void 0))}),n}function aee({sourceMorphTargetDictionaries:r}){const e=new Set;Array.from(r.values()).forEach(i=>{Object.keys(i).forEach(s=>e.add(s))});const n={};return Array.from(e.keys()).map((i,s)=>{n[i]=s}),n}function Aee({meshes:r,sourceMorphTargetDictionaries:e,sourceMorphAttributes:t,destMorphTargetDictionary:n},i=!1){const s=new Set;Array.from(t.values()).forEach(c=>{Object.keys(c).forEach(u=>s.add(u))});const a=Array.from(s),A={};a.forEach(c=>{A[c]=[],Object.entries(n).forEach(([u,f])=>{A[c][f]=[],r.forEach(d=>{let p;const h=e.get(d);if(h.hasOwnProperty(u)&&d.geometry.morphAttributes[c]){const m=h[u];p=d.geometry.morphAttributes[c][m]}else{const m=d.geometry.attributes[c],g=new m.array.constructor(new Array(m.array.length).fill(0));p=new pt(g,m.itemSize,m.normalized)}A[c][f].push(p)})})});const l={};return a.forEach(c=>{l[c]=[];for(let u=0;u<Object.entries(n).length;u++)if(l[c][u]=WD(A[c][u]),i){const f=l[c][u].array;for(let d=0;d<f.length;d+=3)f[d]*=-1,f[d+2]*=-1}}),l}function lee({meshes:r}){var e=0,t=[];return r.forEach(n=>{const i=n.geometry.index;for(var s=0;s<i.count;++s)t.push(i.getX(s)+e);e+=n.geometry.attributes.position.count}),t}function Px({meshes:r},e=!1){let t=0;r.forEach(o=>{t+=o.geometry.attributes.uv.count});const n={meshes:r,attributes:new Map(r.map(o=>[o,o.geometry.attributes])),morphAttributes:new Map(r.map(o=>[o,o.geometry.morphAttributes])),morphTargetDictionaries:new Map(r.map(o=>[o,o.morphTargetDictionary||{}])),morphTargetInfluences:new Map(r.map(o=>[o,o.morphTargetInfluences||[]]))},i={attributes:null,morphTargetDictionary:null,morphAttributes:null,morphTargetInfluences:null,index:null,animations:{}};i.attributes=oee({sourceAttributes:n.attributes});const s=aee({sourceMorphTargetDictionaries:n.morphTargetDictionaries});return i.morphTargetDictionary=s,i.morphAttributes=Aee({meshes:r,sourceMorphAttributes:n.morphAttributes,sourceMorphTargetDictionaries:n.morphTargetDictionaries,destMorphTargetDictionary:s},e),i.morphTargetInfluences=see({meshes:r,sourceMorphTargetDictionaries:n.morphTargetDictionaries,destMorphTargetDictionary:s}),i.index=lee({meshes:r}),i.animations={},{source:n,dest:i}}class Jx extends Of{constructor(e){super(e),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(t){return new hee(t)}),this.register(function(t){return new Cee(t)}),this.register(function(t){return new wee(t)}),this.register(function(t){return new gee(t)}),this.register(function(t){return new mee(t)}),this.register(function(t){return new Bee(t)}),this.register(function(t){return new vee(t)}),this.register(function(t){return new dee(t)}),this.register(function(t){return new yee(t)}),this.register(function(t){return new pee(t)}),this.register(function(t){return new uee(t)}),this.register(function(t){return new Fee(t)}),this.register(function(t){return new Iee(t)})}load(e,t,n,i){const s=this;let o;this.resourcePath!==""?o=this.resourcePath:this.path!==""?o=this.path:o=_o.extractUrlBase(e),this.manager.itemStart(e);const a=function(l){i?i(l):console.error(l),s.manager.itemError(e),s.manager.itemEnd(e)},A=new xx(this.manager);A.setPath(this.path),A.setResponseType("arraybuffer"),A.setRequestHeader(this.requestHeader),A.setWithCredentials(this.withCredentials),A.load(e,function(l){try{s.parse(l,o,function(c){t(c),s.manager.itemEnd(e)},a)}catch(c){a(c)}},n,a)}setDRACOLoader(e){return this.dracoLoader=e,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return this.pluginCallbacks.indexOf(e)===-1&&this.pluginCallbacks.push(e),this}unregister(e){return this.pluginCallbacks.indexOf(e)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,t,n,i){let s;const o={},a={};if(typeof e=="string")s=JSON.parse(e);else if(e instanceof ArrayBuffer)if(_o.decodeText(new Uint8Array(e,0,4))===PD){try{o[Qt.KHR_BINARY_GLTF]=new Uee(e)}catch(c){i&&i(c);return}s=JSON.parse(o[Qt.KHR_BINARY_GLTF].content)}else s=JSON.parse(_o.decodeText(new Uint8Array(e)));else s=e;if(s.asset===void 0||s.asset.version[0]<2){i&&i(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}const A=new kee(s,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});A.fileLoader.setRequestHeader(this.requestHeader);for(let l=0;l<this.pluginCallbacks.length;l++){const c=this.pluginCallbacks[l](A);a[c.name]=c,o[c.name]=!0}if(s.extensionsUsed)for(let l=0;l<s.extensionsUsed.length;++l){const c=s.extensionsUsed[l],u=s.extensionsRequired||[];switch(c){case Qt.KHR_MATERIALS_UNLIT:o[c]=new fee;break;case Qt.KHR_DRACO_MESH_COMPRESSION:o[c]=new xee(s,this.dracoLoader);break;case Qt.KHR_TEXTURE_TRANSFORM:o[c]=new Qee;break;case Qt.KHR_MESH_QUANTIZATION:o[c]=new bee;break;default:u.indexOf(c)>=0&&a[c]===void 0&&console.warn('THREE.GLTFLoader: Unknown extension "'+c+'".')}}A.setExtensions(o),A.setPlugins(a),A.parse(n,i)}parseAsync(e,t){const n=this;return new Promise(function(i,s){n.parse(e,t,i,s)})}}function cee(){let r={};return{get:function(e){return r[e]},add:function(e,t){r[e]=t},remove:function(e){delete r[e]},removeAll:function(){r={}}}}const Qt={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class uee{constructor(e){this.parser=e,this.name=Qt.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const e=this.parser,t=this.parser.json.nodes||[];for(let n=0,i=t.length;n<i;n++){const s=t[n];s.extensions&&s.extensions[this.name]&&s.extensions[this.name].light!==void 0&&e._addNodeRef(this.cache,s.extensions[this.name].light)}}_loadLight(e){const t=this.parser,n="light:"+e;let i=t.cache.get(n);if(i)return i;const s=t.json,A=((s.extensions&&s.extensions[this.name]||{}).lights||[])[e];let l;const c=new Ve(16777215);A.color!==void 0&&c.fromArray(A.color);const u=A.range!==void 0?A.range:0;switch(A.type){case"directional":l=new bx(c),l.target.position.set(0,0,-1),l.add(l.target);break;case"point":l=new qF(c),l.distance=u;break;case"spot":l=new EV(c),l.distance=u,A.spot=A.spot||{},A.spot.innerConeAngle=A.spot.innerConeAngle!==void 0?A.spot.innerConeAngle:0,A.spot.outerConeAngle=A.spot.outerConeAngle!==void 0?A.spot.outerConeAngle:Math.PI/4,l.angle=A.spot.outerConeAngle,l.penumbra=1-A.spot.innerConeAngle/A.spot.outerConeAngle,l.target.position.set(0,0,-1),l.add(l.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+A.type)}return l.position.set(0,0,0),l.decay=2,fA(l,A),A.intensity!==void 0&&(l.intensity=A.intensity),l.name=t.createUniqueName(A.name||"light_"+e),i=Promise.resolve(l),t.cache.add(n,i),i}getDependency(e,t){if(e==="light")return this._loadLight(t)}createNodeAttachment(e){const t=this,n=this.parser,s=n.json.nodes[e],a=(s.extensions&&s.extensions[this.name]||{}).light;return a===void 0?null:this._loadLight(a).then(function(A){return n._getNodeRef(t.cache,a,A)})}}class fee{constructor(){this.name=Qt.KHR_MATERIALS_UNLIT}getMaterialType(){return Io}extendParams(e,t,n){const i=[];e.color=new Ve(1,1,1),e.opacity=1;const s=t.pbrMetallicRoughness;if(s){if(Array.isArray(s.baseColorFactor)){const o=s.baseColorFactor;e.color.fromArray(o),e.opacity=o[3]}s.baseColorTexture!==void 0&&i.push(n.assignTexture(e,"map",s.baseColorTexture,lt))}return Promise.all(i)}}class dee{constructor(e){this.parser=e,this.name=Qt.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(e,t){const i=this.parser.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=i.extensions[this.name].emissiveStrength;return s!==void 0&&(t.emissiveIntensity=s),Promise.resolve()}}class hee{constructor(e){this.parser=e,this.name=Qt.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:hc}extendMaterialParams(e,t){const n=this.parser,i=n.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],o=i.extensions[this.name];if(o.clearcoatFactor!==void 0&&(t.clearcoat=o.clearcoatFactor),o.clearcoatTexture!==void 0&&s.push(n.assignTexture(t,"clearcoatMap",o.clearcoatTexture)),o.clearcoatRoughnessFactor!==void 0&&(t.clearcoatRoughness=o.clearcoatRoughnessFactor),o.clearcoatRoughnessTexture!==void 0&&s.push(n.assignTexture(t,"clearcoatRoughnessMap",o.clearcoatRoughnessTexture)),o.clearcoatNormalTexture!==void 0&&(s.push(n.assignTexture(t,"clearcoatNormalMap",o.clearcoatNormalTexture)),o.clearcoatNormalTexture.scale!==void 0)){const a=o.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new Je(a,a)}return Promise.all(s)}}class pee{constructor(e){this.parser=e,this.name=Qt.KHR_MATERIALS_IRIDESCENCE}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:hc}extendMaterialParams(e,t){const n=this.parser,i=n.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],o=i.extensions[this.name];return o.iridescenceFactor!==void 0&&(t.iridescence=o.iridescenceFactor),o.iridescenceTexture!==void 0&&s.push(n.assignTexture(t,"iridescenceMap",o.iridescenceTexture)),o.iridescenceIor!==void 0&&(t.iridescenceIOR=o.iridescenceIor),t.iridescenceThicknessRange===void 0&&(t.iridescenceThicknessRange=[100,400]),o.iridescenceThicknessMinimum!==void 0&&(t.iridescenceThicknessRange[0]=o.iridescenceThicknessMinimum),o.iridescenceThicknessMaximum!==void 0&&(t.iridescenceThicknessRange[1]=o.iridescenceThicknessMaximum),o.iridescenceThicknessTexture!==void 0&&s.push(n.assignTexture(t,"iridescenceThicknessMap",o.iridescenceThicknessTexture)),Promise.all(s)}}class gee{constructor(e){this.parser=e,this.name=Qt.KHR_MATERIALS_SHEEN}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:hc}extendMaterialParams(e,t){const n=this.parser,i=n.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[];t.sheenColor=new Ve(0,0,0),t.sheenRoughness=0,t.sheen=1;const o=i.extensions[this.name];return o.sheenColorFactor!==void 0&&t.sheenColor.fromArray(o.sheenColorFactor),o.sheenRoughnessFactor!==void 0&&(t.sheenRoughness=o.sheenRoughnessFactor),o.sheenColorTexture!==void 0&&s.push(n.assignTexture(t,"sheenColorMap",o.sheenColorTexture,lt)),o.sheenRoughnessTexture!==void 0&&s.push(n.assignTexture(t,"sheenRoughnessMap",o.sheenRoughnessTexture)),Promise.all(s)}}class mee{constructor(e){this.parser=e,this.name=Qt.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:hc}extendMaterialParams(e,t){const n=this.parser,i=n.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],o=i.extensions[this.name];return o.transmissionFactor!==void 0&&(t.transmission=o.transmissionFactor),o.transmissionTexture!==void 0&&s.push(n.assignTexture(t,"transmissionMap",o.transmissionTexture)),Promise.all(s)}}class Bee{constructor(e){this.parser=e,this.name=Qt.KHR_MATERIALS_VOLUME}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:hc}extendMaterialParams(e,t){const n=this.parser,i=n.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],o=i.extensions[this.name];t.thickness=o.thicknessFactor!==void 0?o.thicknessFactor:0,o.thicknessTexture!==void 0&&s.push(n.assignTexture(t,"thicknessMap",o.thicknessTexture)),t.attenuationDistance=o.attenuationDistance||1/0;const a=o.attenuationColor||[1,1,1];return t.attenuationColor=new Ve(a[0],a[1],a[2]),Promise.all(s)}}class vee{constructor(e){this.parser=e,this.name=Qt.KHR_MATERIALS_IOR}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:hc}extendMaterialParams(e,t){const i=this.parser.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=i.extensions[this.name];return t.ior=s.ior!==void 0?s.ior:1.5,Promise.resolve()}}class yee{constructor(e){this.parser=e,this.name=Qt.KHR_MATERIALS_SPECULAR}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:hc}extendMaterialParams(e,t){const n=this.parser,i=n.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],o=i.extensions[this.name];t.specularIntensity=o.specularFactor!==void 0?o.specularFactor:1,o.specularTexture!==void 0&&s.push(n.assignTexture(t,"specularIntensityMap",o.specularTexture));const a=o.specularColorFactor||[1,1,1];return t.specularColor=new Ve(a[0],a[1],a[2]),o.specularColorTexture!==void 0&&s.push(n.assignTexture(t,"specularColorMap",o.specularColorTexture,lt)),Promise.all(s)}}class Cee{constructor(e){this.parser=e,this.name=Qt.KHR_TEXTURE_BASISU}loadTexture(e){const t=this.parser,n=t.json,i=n.textures[e];if(!i.extensions||!i.extensions[this.name])return null;const s=i.extensions[this.name],o=t.options.ktx2Loader;if(!o){if(n.extensionsRequired&&n.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return t.loadTextureImage(e,s.source,o)}}class wee{constructor(e){this.parser=e,this.name=Qt.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(e){const t=this.name,n=this.parser,i=n.json,s=i.textures[e];if(!s.extensions||!s.extensions[t])return null;const o=s.extensions[t],a=i.images[o.source];let A=n.textureLoader;if(a.uri){const l=n.options.manager.getHandler(a.uri);l!==null&&(A=l)}return this.detectSupport().then(function(l){if(l)return n.loadTextureImage(e,o.source,A);if(i.extensionsRequired&&i.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return n.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",t.onload=t.onerror=function(){e(t.height===1)}})),this.isSupported}}class Fee{constructor(e){this.name=Qt.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){const t=this.parser.json,n=t.bufferViews[e];if(n.extensions&&n.extensions[this.name]){const i=n.extensions[this.name],s=this.parser.getDependency("buffer",i.buffer),o=this.parser.options.meshoptDecoder;if(!o||!o.supported){if(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return s.then(function(a){const A=i.byteOffset||0,l=i.byteLength||0,c=i.count,u=i.byteStride,f=new Uint8Array(a,A,l);return o.decodeGltfBufferAsync?o.decodeGltfBufferAsync(c,u,f,i.mode,i.filter).then(function(d){return d.buffer}):o.ready.then(function(){const d=new ArrayBuffer(c*u);return o.decodeGltfBuffer(new Uint8Array(d),c,u,f,i.mode,i.filter),d})})}else return null}}class Iee{constructor(e){this.name=Qt.EXT_MESH_GPU_INSTANCING,this.parser=e}createNodeMesh(e){const t=this.parser.json,n=t.nodes[e];if(!n.extensions||!n.extensions[this.name]||n.mesh===void 0)return null;const i=t.meshes[n.mesh];for(const l of i.primitives)if(l.mode!==Ki.TRIANGLES&&l.mode!==Ki.TRIANGLE_STRIP&&l.mode!==Ki.TRIANGLE_FAN&&l.mode!==void 0)return null;const o=n.extensions[this.name].attributes,a=[],A={};for(const l in o)a.push(this.parser.getDependency("accessor",o[l]).then(c=>(A[l]=c,A[l])));return a.length<1?null:(a.push(this.parser.createNodeMesh(e)),Promise.all(a).then(l=>{const c=l.pop(),u=c.isGroup?c.children:[c],f=l[0].count,d=[];for(const p of u){const h=new Le,m=new H,g=new $e,B=new H(1,1,1),v=new cv(p.geometry,p.material,f);for(let w=0;w<f;w++)A.TRANSLATION&&m.fromBufferAttribute(A.TRANSLATION,w),A.ROTATION&&g.fromBufferAttribute(A.ROTATION,w),A.SCALE&&B.fromBufferAttribute(A.SCALE,w),v.setMatrixAt(w,h.compose(m,g,B));for(const w in A)w!=="TRANSLATION"&&w!=="ROTATION"&&w!=="SCALE"&&p.geometry.setAttribute(w,A[w]);St.prototype.copy.call(v,p),v.frustumCulled=!1,this.parser.assignFinalMaterial(v),d.push(v)}return c.isGroup?(c.clear(),c.add(...d),c):d[0]}))}}const PD="glTF",Ud=12,b_={JSON:1313821514,BIN:5130562};class Uee{constructor(e){this.name=Qt.KHR_BINARY_GLTF,this.content=null,this.body=null;const t=new DataView(e,0,Ud);if(this.header={magic:_o.decodeText(new Uint8Array(e.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==PD)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const n=this.header.length-Ud,i=new DataView(e,Ud);let s=0;for(;s<n;){const o=i.getUint32(s,!0);s+=4;const a=i.getUint32(s,!0);if(s+=4,a===b_.JSON){const A=new Uint8Array(e,Ud+s,o);this.content=_o.decodeText(A)}else if(a===b_.BIN){const A=Ud+s;this.body=e.slice(A,A+o)}s+=o}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class xee{constructor(e,t){if(!t)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=Qt.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=t,this.dracoLoader.preload()}decodePrimitive(e,t){const n=this.json,i=this.dracoLoader,s=e.extensions[this.name].bufferView,o=e.extensions[this.name].attributes,a={},A={},l={};for(const c in o){const u=wI[c]||c.toLowerCase();a[u]=o[c]}for(const c in e.attributes){const u=wI[c]||c.toLowerCase();if(o[c]!==void 0){const f=n.accessors[e.attributes[c]],d=zu[f.componentType];l[u]=d.name,A[u]=f.normalized===!0}}return t.getDependency("bufferView",s).then(function(c){return new Promise(function(u){i.decodeDracoFile(c,function(f){for(const d in f.attributes){const p=f.attributes[d],h=A[d];h!==void 0&&(p.normalized=h)}u(f)},a,l)})})}}class Qee{constructor(){this.name=Qt.KHR_TEXTURE_TRANSFORM}extendTexture(e,t){return t.texCoord!==void 0&&console.warn('THREE.GLTFLoader: Custom UV sets in "'+this.name+'" extension not yet supported.'),t.offset===void 0&&t.rotation===void 0&&t.scale===void 0||(e=e.clone(),t.offset!==void 0&&e.offset.fromArray(t.offset),t.rotation!==void 0&&(e.rotation=t.rotation),t.scale!==void 0&&e.repeat.fromArray(t.scale),e.needsUpdate=!0),e}}class bee{constructor(){this.name=Qt.KHR_MESH_QUANTIZATION}}class JD extends Tp{constructor(e,t,n,i){super(e,t,n,i)}copySampleValue_(e){const t=this.resultBuffer,n=this.sampleValues,i=this.valueSize,s=e*i*3+i;for(let o=0;o!==i;o++)t[o]=n[s+o];return t}interpolate_(e,t,n,i){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,A=a*2,l=a*3,c=i-t,u=(n-t)/c,f=u*u,d=f*u,p=e*l,h=p-l,m=-2*d+3*f,g=d-f,B=1-m,v=g-f+u;for(let w=0;w!==a;w++){const C=o[h+w+a],I=o[h+w+A]*c,E=o[p+w+a],U=o[p+w]*c;s[w]=B*C+v*I+m*E+g*U}return s}}const Eee=new $e;class See extends JD{interpolate_(e,t,n,i){const s=super.interpolate_(e,t,n,i);return Eee.fromArray(s).normalize().toArray(s),s}}const Ki={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},zu={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},E_={9728:Hn,9729:Wr,9984:Z0,9985:px,9986:gh,9987:XA},S_={33071:Gr,33648:Yh,10497:ps},PC={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},wI={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv2",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},nA={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},_ee={CUBICSPLINE:void 0,LINEAR:rc,STEP:vf},JC={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function Ree(r){return r.DefaultMaterial===void 0&&(r.DefaultMaterial=new Mp({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:Do})),r.DefaultMaterial}function xd(r,e,t){for(const n in t.extensions)r[n]===void 0&&(e.userData.gltfExtensions=e.userData.gltfExtensions||{},e.userData.gltfExtensions[n]=t.extensions[n])}function fA(r,e){e.extras!==void 0&&(typeof e.extras=="object"?Object.assign(r.userData,e.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+e.extras))}function Mee(r,e,t){let n=!1,i=!1,s=!1;for(let l=0,c=e.length;l<c;l++){const u=e[l];if(u.POSITION!==void 0&&(n=!0),u.NORMAL!==void 0&&(i=!0),u.COLOR_0!==void 0&&(s=!0),n&&i&&s)break}if(!n&&!i&&!s)return Promise.resolve(r);const o=[],a=[],A=[];for(let l=0,c=e.length;l<c;l++){const u=e[l];if(n){const f=u.POSITION!==void 0?t.getDependency("accessor",u.POSITION):r.attributes.position;o.push(f)}if(i){const f=u.NORMAL!==void 0?t.getDependency("accessor",u.NORMAL):r.attributes.normal;a.push(f)}if(s){const f=u.COLOR_0!==void 0?t.getDependency("accessor",u.COLOR_0):r.attributes.color;A.push(f)}}return Promise.all([Promise.all(o),Promise.all(a),Promise.all(A)]).then(function(l){const c=l[0],u=l[1],f=l[2];return n&&(r.morphAttributes.position=c),i&&(r.morphAttributes.normal=u),s&&(r.morphAttributes.color=f),r.morphTargetsRelative=!0,r})}function Tee(r,e){if(r.updateMorphTargets(),e.weights!==void 0)for(let t=0,n=e.weights.length;t<n;t++)r.morphTargetInfluences[t]=e.weights[t];if(e.extras&&Array.isArray(e.extras.targetNames)){const t=e.extras.targetNames;if(r.morphTargetInfluences.length===t.length){r.morphTargetDictionary={};for(let n=0,i=t.length;n<i;n++)r.morphTargetDictionary[t[n]]=n}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function Nee(r){const e=r.extensions&&r.extensions[Qt.KHR_DRACO_MESH_COMPRESSION];let t;return e?t="draco:"+e.bufferView+":"+e.indices+":"+__(e.attributes):t=r.indices+":"+__(r.attributes)+":"+r.mode,t}function __(r){let e="";const t=Object.keys(r).sort();for(let n=0,i=t.length;n<i;n++)e+=t[n]+":"+r[t[n]]+";";return e}function FI(r){switch(r){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}function Vee(r){return r.search(/\.jpe?g($|\?)/i)>0||r.search(/^data\:image\/jpeg/)===0?"image/jpeg":r.search(/\.webp($|\?)/i)>0||r.search(/^data\:image\/webp/)===0?"image/webp":"image/png"}const Dee=new Le;class kee{constructor(e={},t={}){this.json=e,this.extensions={},this.plugins={},this.options=t,this.cache=new cee,this.associations=new Map,this.primitiveCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let n=!1,i=!1,s=-1;typeof navigator<"u"&&(n=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)===!0,i=navigator.userAgent.indexOf("Firefox")>-1,s=i?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1),typeof createImageBitmap>"u"||n||i&&s<98?this.textureLoader=new Np(this.options.manager):this.textureLoader=new wK(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new xx(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,t){const n=this,i=this.json,s=this.extensions;this.cache.removeAll(),this._invokeAll(function(o){return o._markDefs&&o._markDefs()}),Promise.all(this._invokeAll(function(o){return o.beforeRoot&&o.beforeRoot()})).then(function(){return Promise.all([n.getDependencies("scene"),n.getDependencies("animation"),n.getDependencies("camera")])}).then(function(o){const a={scene:o[0][i.scene||0],scenes:o[0],animations:o[1],cameras:o[2],asset:i.asset,parser:n,userData:{}};xd(s,a,i),fA(a,i),Promise.all(n._invokeAll(function(A){return A.afterRoot&&A.afterRoot(a)})).then(function(){e(a)})}).catch(t)}_markDefs(){const e=this.json.nodes||[],t=this.json.skins||[],n=this.json.meshes||[];for(let i=0,s=t.length;i<s;i++){const o=t[i].joints;for(let a=0,A=o.length;a<A;a++)e[o[a]].isBone=!0}for(let i=0,s=e.length;i<s;i++){const o=e[i];o.mesh!==void 0&&(this._addNodeRef(this.meshCache,o.mesh),o.skin!==void 0&&(n[o.mesh].isSkinnedMesh=!0)),o.camera!==void 0&&this._addNodeRef(this.cameraCache,o.camera)}}_addNodeRef(e,t){t!==void 0&&(e.refs[t]===void 0&&(e.refs[t]=e.uses[t]=0),e.refs[t]++)}_getNodeRef(e,t,n){if(e.refs[t]<=1)return n;const i=n.clone(),s=(o,a)=>{const A=this.associations.get(o);A!=null&&this.associations.set(a,A);for(const[l,c]of o.children.entries())s(c,a.children[l])};return s(n,i),i.name+="_instance_"+e.uses[t]++,i}_invokeOne(e){const t=Object.values(this.plugins);t.push(this);for(let n=0;n<t.length;n++){const i=e(t[n]);if(i)return i}return null}_invokeAll(e){const t=Object.values(this.plugins);t.unshift(this);const n=[];for(let i=0;i<t.length;i++){const s=e(t[i]);s&&n.push(s)}return n}getDependency(e,t){const n=e+":"+t;let i=this.cache.get(n);if(!i){switch(e){case"scene":i=this.loadScene(t);break;case"node":i=this._invokeOne(function(s){return s.loadNode&&s.loadNode(t)});break;case"mesh":i=this._invokeOne(function(s){return s.loadMesh&&s.loadMesh(t)});break;case"accessor":i=this.loadAccessor(t);break;case"bufferView":i=this._invokeOne(function(s){return s.loadBufferView&&s.loadBufferView(t)});break;case"buffer":i=this.loadBuffer(t);break;case"material":i=this._invokeOne(function(s){return s.loadMaterial&&s.loadMaterial(t)});break;case"texture":i=this._invokeOne(function(s){return s.loadTexture&&s.loadTexture(t)});break;case"skin":i=this.loadSkin(t);break;case"animation":i=this._invokeOne(function(s){return s.loadAnimation&&s.loadAnimation(t)});break;case"camera":i=this.loadCamera(t);break;default:if(i=this._invokeOne(function(s){return s!=this&&s.getDependency&&s.getDependency(e,t)}),!i)throw new Error("Unknown type: "+e);break}this.cache.add(n,i)}return i}getDependencies(e){let t=this.cache.get(e);if(!t){const n=this,i=this.json[e+(e==="mesh"?"es":"s")]||[];t=Promise.all(i.map(function(s,o){return n.getDependency(e,o)})),this.cache.add(e,t)}return t}loadBuffer(e){const t=this.json.buffers[e],n=this.fileLoader;if(t.type&&t.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(t.uri===void 0&&e===0)return Promise.resolve(this.extensions[Qt.KHR_BINARY_GLTF].body);const i=this.options;return new Promise(function(s,o){n.load(_o.resolveURL(t.uri,i.path),s,void 0,function(){o(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))})})}loadBufferView(e){const t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then(function(n){const i=t.byteLength||0,s=t.byteOffset||0;return n.slice(s,s+i)})}loadAccessor(e){const t=this,n=this.json,i=this.json.accessors[e];if(i.bufferView===void 0&&i.sparse===void 0){const o=PC[i.type],a=zu[i.componentType],A=i.normalized===!0,l=new a(i.count*o);return Promise.resolve(new pt(l,o,A))}const s=[];return i.bufferView!==void 0?s.push(this.getDependency("bufferView",i.bufferView)):s.push(null),i.sparse!==void 0&&(s.push(this.getDependency("bufferView",i.sparse.indices.bufferView)),s.push(this.getDependency("bufferView",i.sparse.values.bufferView))),Promise.all(s).then(function(o){const a=o[0],A=PC[i.type],l=zu[i.componentType],c=l.BYTES_PER_ELEMENT,u=c*A,f=i.byteOffset||0,d=i.bufferView!==void 0?n.bufferViews[i.bufferView].byteStride:void 0,p=i.normalized===!0;let h,m;if(d&&d!==u){const g=Math.floor(f/d),B="InterleavedBuffer:"+i.bufferView+":"+i.componentType+":"+g+":"+i.count;let v=t.cache.get(B);v||(h=new l(a,g*d,i.count*d/c),v=new nK(h,d/c),t.cache.add(B,v)),m=new Ix(v,A,f%d/c,p)}else a===null?h=new l(i.count*A):h=new l(a,f,i.count*A),m=new pt(h,A,p);if(i.sparse!==void 0){const g=PC.SCALAR,B=zu[i.sparse.indices.componentType],v=i.sparse.indices.byteOffset||0,w=i.sparse.values.byteOffset||0,C=new B(o[1],v,i.sparse.count*g),I=new l(o[2],w,i.sparse.count*A);a!==null&&(m=new pt(m.array.slice(),m.itemSize,m.normalized));for(let E=0,U=C.length;E<U;E++){const S=C[E];if(m.setX(S,I[E*A]),A>=2&&m.setY(S,I[E*A+1]),A>=3&&m.setZ(S,I[E*A+2]),A>=4&&m.setW(S,I[E*A+3]),A>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return m})}loadTexture(e){const t=this.json,n=this.options,s=t.textures[e].source,o=t.images[s];let a=this.textureLoader;if(o.uri){const A=n.manager.getHandler(o.uri);A!==null&&(a=A)}return this.loadTextureImage(e,s,a)}loadTextureImage(e,t,n){const i=this,s=this.json,o=s.textures[e],a=s.images[t],A=(a.uri||a.bufferView)+":"+o.sampler;if(this.textureCache[A])return this.textureCache[A];const l=this.loadImageSource(t,n).then(function(c){c.flipY=!1,c.name=o.name||a.name||"";const f=(s.samplers||{})[o.sampler]||{};return c.magFilter=E_[f.magFilter]||Wr,c.minFilter=E_[f.minFilter]||XA,c.wrapS=S_[f.wrapS]||ps,c.wrapT=S_[f.wrapT]||ps,i.associations.set(c,{textures:e}),c}).catch(function(){return null});return this.textureCache[A]=l,l}loadImageSource(e,t){const n=this,i=this.json,s=this.options;if(this.sourceCache[e]!==void 0)return this.sourceCache[e].then(u=>u.clone());const o=i.images[e],a=self.URL||self.webkitURL;let A=o.uri||"",l=!1;if(o.bufferView!==void 0)A=n.getDependency("bufferView",o.bufferView).then(function(u){l=!0;const f=new Blob([u],{type:o.mimeType});return A=a.createObjectURL(f),A});else if(o.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");const c=Promise.resolve(A).then(function(u){return new Promise(function(f,d){let p=f;t.isImageBitmapLoader===!0&&(p=function(h){const m=new En(h);m.needsUpdate=!0,f(m)}),t.load(_o.resolveURL(u,s.path),p,void 0,d)})}).then(function(u){return l===!0&&a.revokeObjectURL(A),u.userData.mimeType=o.mimeType||Vee(o.uri),u}).catch(function(u){throw console.error("THREE.GLTFLoader: Couldn't load texture",A),u});return this.sourceCache[e]=c,c}assignTexture(e,t,n,i){const s=this;return this.getDependency("texture",n.index).then(function(o){if(!o)return null;if(n.texCoord!==void 0&&n.texCoord!=0&&!(t==="aoMap"&&n.texCoord==1)&&console.warn("THREE.GLTFLoader: Custom UV set "+n.texCoord+" for texture "+t+" not yet supported."),s.extensions[Qt.KHR_TEXTURE_TRANSFORM]){const a=n.extensions!==void 0?n.extensions[Qt.KHR_TEXTURE_TRANSFORM]:void 0;if(a){const A=s.associations.get(o);o=s.extensions[Qt.KHR_TEXTURE_TRANSFORM].extendTexture(o,a),s.associations.set(o,A)}}return i!==void 0&&(o.encoding=i),e[t]=o,o})}assignFinalMaterial(e){const t=e.geometry;let n=e.material;const i=t.attributes.tangent===void 0,s=t.attributes.color!==void 0,o=t.attributes.normal===void 0;if(e.isPoints){const a="PointsMaterial:"+n.uuid;let A=this.cache.get(a);A||(A=new wV,cs.prototype.copy.call(A,n),A.color.copy(n.color),A.map=n.map,A.sizeAttenuation=!1,this.cache.add(a,A)),n=A}else if(e.isLine){const a="LineBasicMaterial:"+n.uuid;let A=this.cache.get(a);A||(A=new Ja,cs.prototype.copy.call(A,n),A.color.copy(n.color),this.cache.add(a,A)),n=A}if(i||s||o){let a="ClonedMaterial:"+n.uuid+":";i&&(a+="derivative-tangents:"),s&&(a+="vertex-colors:"),o&&(a+="flat-shading:");let A=this.cache.get(a);A||(A=n.clone(),s&&(A.vertexColors=!0),o&&(A.flatShading=!0),i&&(A.normalScale&&(A.normalScale.y*=-1),A.clearcoatNormalScale&&(A.clearcoatNormalScale.y*=-1)),this.cache.add(a,A),this.associations.set(A,this.associations.get(n))),n=A}n.aoMap&&t.attributes.uv2===void 0&&t.attributes.uv!==void 0&&t.setAttribute("uv2",t.attributes.uv),e.material=n}getMaterialType(){return Mp}loadMaterial(e){const t=this,n=this.json,i=this.extensions,s=n.materials[e];let o;const a={},A=s.extensions||{},l=[];if(A[Qt.KHR_MATERIALS_UNLIT]){const u=i[Qt.KHR_MATERIALS_UNLIT];o=u.getMaterialType(),l.push(u.extendParams(a,s,t))}else{const u=s.pbrMetallicRoughness||{};if(a.color=new Ve(1,1,1),a.opacity=1,Array.isArray(u.baseColorFactor)){const f=u.baseColorFactor;a.color.fromArray(f),a.opacity=f[3]}u.baseColorTexture!==void 0&&l.push(t.assignTexture(a,"map",u.baseColorTexture,lt)),a.metalness=u.metallicFactor!==void 0?u.metallicFactor:1,a.roughness=u.roughnessFactor!==void 0?u.roughnessFactor:1,u.metallicRoughnessTexture!==void 0&&(l.push(t.assignTexture(a,"metalnessMap",u.metallicRoughnessTexture)),l.push(t.assignTexture(a,"roughnessMap",u.metallicRoughnessTexture))),o=this._invokeOne(function(f){return f.getMaterialType&&f.getMaterialType(e)}),l.push(Promise.all(this._invokeAll(function(f){return f.extendMaterialParams&&f.extendMaterialParams(e,a)})))}s.doubleSided===!0&&(a.side=Va);const c=s.alphaMode||JC.OPAQUE;if(c===JC.BLEND?(a.transparent=!0,a.depthWrite=!1):(a.transparent=!1,c===JC.MASK&&(a.alphaTest=s.alphaCutoff!==void 0?s.alphaCutoff:.5)),s.normalTexture!==void 0&&o!==Io&&(l.push(t.assignTexture(a,"normalMap",s.normalTexture)),a.normalScale=new Je(1,1),s.normalTexture.scale!==void 0)){const u=s.normalTexture.scale;a.normalScale.set(u,u)}return s.occlusionTexture!==void 0&&o!==Io&&(l.push(t.assignTexture(a,"aoMap",s.occlusionTexture)),s.occlusionTexture.strength!==void 0&&(a.aoMapIntensity=s.occlusionTexture.strength)),s.emissiveFactor!==void 0&&o!==Io&&(a.emissive=new Ve().fromArray(s.emissiveFactor)),s.emissiveTexture!==void 0&&o!==Io&&l.push(t.assignTexture(a,"emissiveMap",s.emissiveTexture,lt)),Promise.all(l).then(function(){const u=new o(a);return s.name&&(u.name=s.name),fA(u,s),t.associations.set(u,{materials:e}),s.extensions&&xd(i,u,s),u})}createUniqueName(e){const t=ht.sanitizeNodeName(e||"");let n=t;for(let i=1;this.nodeNamesUsed[n];++i)n=t+"_"+i;return this.nodeNamesUsed[n]=!0,n}loadGeometries(e){const t=this,n=this.extensions,i=this.primitiveCache;function s(a){return n[Qt.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(a,t).then(function(A){return R_(A,a,t)})}const o=[];for(let a=0,A=e.length;a<A;a++){const l=e[a],c=Nee(l),u=i[c];if(u)o.push(u.promise);else{let f;l.extensions&&l.extensions[Qt.KHR_DRACO_MESH_COMPRESSION]?f=s(l):f=R_(new Xt,l,t),i[c]={primitive:l,promise:f},o.push(f)}}return Promise.all(o)}loadMesh(e){const t=this,n=this.json,i=this.extensions,s=n.meshes[e],o=s.primitives,a=[];for(let A=0,l=o.length;A<l;A++){const c=o[A].material===void 0?Ree(this.cache):this.getDependency("material",o[A].material);a.push(c)}return a.push(t.loadGeometries(o)),Promise.all(a).then(function(A){const l=A.slice(0,A.length-1),c=A[A.length-1],u=[];for(let d=0,p=c.length;d<p;d++){const h=c[d],m=o[d];let g;const B=l[d];if(m.mode===Ki.TRIANGLES||m.mode===Ki.TRIANGLE_STRIP||m.mode===Ki.TRIANGLE_FAN||m.mode===void 0)g=s.isSkinnedMesh===!0?new lv(h,B):new bn(h,B),g.isSkinnedMesh===!0&&!g.geometry.attributes.skinWeight.normalized&&g.normalizeSkinWeights(),m.mode===Ki.TRIANGLE_STRIP?g.geometry=M_(g.geometry,LH):m.mode===Ki.TRIANGLE_FAN&&(g.geometry=M_(g.geometry,oV));else if(m.mode===Ki.LINES)g=new Rp(h,B);else if(m.mode===Ki.LINE_STRIP)g=new Pf(h,B);else if(m.mode===Ki.LINE_LOOP)g=new aK(h,B);else if(m.mode===Ki.POINTS)g=new AK(h,B);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+m.mode);Object.keys(g.geometry.morphAttributes).length>0&&Tee(g,s),g.name=t.createUniqueName(s.name||"mesh_"+e),fA(g,s),m.extensions&&xd(i,g,m),t.assignFinalMaterial(g),u.push(g)}for(let d=0,p=u.length;d<p;d++)t.associations.set(u[d],{meshes:e,primitives:d});if(u.length===1)return u[0];const f=new Qr;t.associations.set(f,{meshes:e});for(let d=0,p=u.length;d<p;d++)f.add(u[d]);return f})}loadCamera(e){let t;const n=this.json.cameras[e],i=n[n.type];if(!i){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return n.type==="perspective"?t=new Ir(It.radToDeg(i.yfov),i.aspectRatio||1,i.znear||1,i.zfar||2e6):n.type==="orthographic"&&(t=new _p(-i.xmag,i.xmag,i.ymag,-i.ymag,i.znear,i.zfar)),n.name&&(t.name=this.createUniqueName(n.name)),fA(t,n),Promise.resolve(t)}loadSkin(e){const t=this.json.skins[e],n=[];for(let i=0,s=t.joints.length;i<s;i++)n.push(this.getDependency("node",t.joints[i]));return t.inverseBindMatrices!==void 0?n.push(this.getDependency("accessor",t.inverseBindMatrices)):n.push(null),Promise.all(n).then(function(i){const s=i.pop(),o=i,a=[],A=[];for(let l=0,c=o.length;l<c;l++){const u=o[l];if(u){a.push(u);const f=new Le;s!==null&&f.fromArray(s.array,l*16),A.push(f)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',t.joints[l])}return new dc(a,A)})}loadAnimation(e){const n=this.json.animations[e],i=[],s=[],o=[],a=[],A=[];for(let l=0,c=n.channels.length;l<c;l++){const u=n.channels[l],f=n.samplers[u.sampler],d=u.target,p=d.node,h=n.parameters!==void 0?n.parameters[f.input]:f.input,m=n.parameters!==void 0?n.parameters[f.output]:f.output;i.push(this.getDependency("node",p)),s.push(this.getDependency("accessor",h)),o.push(this.getDependency("accessor",m)),a.push(f),A.push(d)}return Promise.all([Promise.all(i),Promise.all(s),Promise.all(o),Promise.all(a),Promise.all(A)]).then(function(l){const c=l[0],u=l[1],f=l[2],d=l[3],p=l[4],h=[];for(let g=0,B=c.length;g<B;g++){const v=c[g],w=u[g],C=f[g],I=d[g],E=p[g];if(v===void 0)continue;v.updateMatrix();let U;switch(nA[E.path]){case nA.weights:U=Cf;break;case nA.rotation:U=jA;break;case nA.position:case nA.scale:default:U=wf;break}const S=v.name?v.name:v.uuid,V=I.interpolation!==void 0?_ee[I.interpolation]:rc,J=[];nA[E.path]===nA.weights?v.traverse(function(R){R.morphTargetInfluences&&J.push(R.name?R.name:R.uuid)}):J.push(S);let z=C.array;if(C.normalized){const R=FI(z.constructor),y=new Float32Array(z.length);for(let Q=0,_=z.length;Q<_;Q++)y[Q]=z[Q]*R;z=y}for(let R=0,y=J.length;R<y;R++){const Q=new U(J[R]+"."+nA[E.path],w.array,z,V);I.interpolation==="CUBICSPLINE"&&(Q.createInterpolant=function(L){const T=this instanceof jA?See:JD;return new T(this.times,this.values,this.getValueSize()/3,L)},Q.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0),h.push(Q)}}const m=n.name?n.name:"animation_"+e;return new z0(m,void 0,h)})}createNodeMesh(e){const t=this.json,n=this,i=t.nodes[e];return i.mesh===void 0?null:n.getDependency("mesh",i.mesh).then(function(s){const o=n._getNodeRef(n.meshCache,i.mesh,s);return i.weights!==void 0&&o.traverse(function(a){if(a.isMesh)for(let A=0,l=i.weights.length;A<l;A++)a.morphTargetInfluences[A]=i.weights[A]}),o})}loadNode(e){const t=this.json,n=this.extensions,i=this,s=t.nodes[e],o=s.name?i.createUniqueName(s.name):"";return function(){const a=[],A=i._invokeOne(function(f){return f.createNodeMesh&&f.createNodeMesh(e)});A&&a.push(A),s.camera!==void 0&&a.push(i.getDependency("camera",s.camera).then(function(f){return i._getNodeRef(i.cameraCache,s.camera,f)})),i._invokeAll(function(f){return f.createNodeAttachment&&f.createNodeAttachment(e)}).forEach(function(f){a.push(f)});const l=[],c=s.children||[];for(let f=0,d=c.length;f<d;f++)l.push(i.getDependency("node",c[f]));const u=s.skin===void 0?Promise.resolve(null):i.getDependency("skin",s.skin);return Promise.all([Promise.all(a),Promise.all(l),u])}().then(function(a){const A=a[0],l=a[1],c=a[2];let u;if(s.isBone===!0?u=new O0:A.length>1?u=new Qr:A.length===1?u=A[0]:u=new St,u!==A[0])for(let f=0,d=A.length;f<d;f++)u.add(A[f]);if(s.name&&(u.userData.name=s.name,u.name=o),fA(u,s),s.extensions&&xd(n,u,s),s.matrix!==void 0){const f=new Le;f.fromArray(s.matrix),u.applyMatrix4(f)}else s.translation!==void 0&&u.position.fromArray(s.translation),s.rotation!==void 0&&u.quaternion.fromArray(s.rotation),s.scale!==void 0&&u.scale.fromArray(s.scale);i.associations.has(u)||i.associations.set(u,{}),i.associations.get(u).nodes=e,c!==null&&u.traverse(function(f){f.isSkinnedMesh&&f.bind(c,Dee)});for(let f=0,d=l.length;f<d;f++)u.add(l[f]);return u})}loadScene(e){const t=this.extensions,n=this.json.scenes[e],i=this,s=new Qr;n.name&&(s.name=i.createUniqueName(n.name)),fA(s,n),n.extensions&&xd(t,s,n);const o=n.nodes||[],a=[];for(let A=0,l=o.length;A<l;A++)a.push(i.getDependency("node",o[A]));return Promise.all(a).then(function(A){for(let c=0,u=A.length;c<u;c++)s.add(A[c]);const l=c=>{const u=new Map;for(const[f,d]of i.associations)(f instanceof cs||f instanceof En)&&u.set(f,d);return c.traverse(f=>{const d=i.associations.get(f);d!=null&&u.set(f,d)}),u};return i.associations=l(s),s})}}function Lee(r,e,t){const n=e.attributes,i=new ys;if(n.POSITION!==void 0){const a=t.json.accessors[n.POSITION],A=a.min,l=a.max;if(A!==void 0&&l!==void 0){if(i.set(new H(A[0],A[1],A[2]),new H(l[0],l[1],l[2])),a.normalized){const c=FI(zu[a.componentType]);i.min.multiplyScalar(c),i.max.multiplyScalar(c)}}else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}else return;const s=e.targets;if(s!==void 0){const a=new H,A=new H;for(let l=0,c=s.length;l<c;l++){const u=s[l];if(u.POSITION!==void 0){const f=t.json.accessors[u.POSITION],d=f.min,p=f.max;if(d!==void 0&&p!==void 0){if(A.setX(Math.max(Math.abs(d[0]),Math.abs(p[0]))),A.setY(Math.max(Math.abs(d[1]),Math.abs(p[1]))),A.setZ(Math.max(Math.abs(d[2]),Math.abs(p[2]))),f.normalized){const h=FI(zu[f.componentType]);A.multiplyScalar(h)}a.max(A)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}i.expandByVector(a)}r.boundingBox=i;const o=new fc;i.getCenter(o.center),o.radius=i.min.distanceTo(i.max)/2,r.boundingSphere=o}function R_(r,e,t){const n=e.attributes,i=[];function s(o,a){return t.getDependency("accessor",o).then(function(A){r.setAttribute(a,A)})}for(const o in n){const a=wI[o]||o.toLowerCase();a in r.attributes||i.push(s(n[o],a))}if(e.indices!==void 0&&!r.index){const o=t.getDependency("accessor",e.indices).then(function(a){r.setIndex(a)});i.push(o)}return fA(r,e),Lee(r,e,t),Promise.all(i).then(function(){return e.targets!==void 0?Mee(r,e.targets,t):r})}function M_(r,e){let t=r.getIndex();if(t===null){const o=[],a=r.getAttribute("position");if(a!==void 0){for(let A=0;A<a.count;A++)o.push(A);r.setIndex(o),t=r.getIndex()}else return console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),r}const n=t.count-2,i=[];if(e===oV)for(let o=1;o<=n;o++)i.push(t.getX(0)),i.push(t.getX(o)),i.push(t.getX(o+1));else for(let o=0;o<n;o++)o%2===0?(i.push(t.getX(o)),i.push(t.getX(o+1)),i.push(t.getX(o+2))):(i.push(t.getX(o+2)),i.push(t.getX(o+1)),i.push(t.getX(o)));i.length/3!==n&&console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const s=r.clone();return s.setIndex(i),s}function _n(r){return r==null?[]:Array.isArray(r)?r:[r]}const T_=r=>{const e=[];for(const t in r){const n=r[t].vrm;if(n){const i=n.data.cullingLayer;i>=0&&n.data.cullingMeshes.map(s=>{s.userData.cullLayer=i,s.userData.cullDistance=n.data.cullingDistance,e.push(s)})}}H$(e)};function GD(r,e){r.data==null?r.data=e:r.data={...r.data,...e}}function Wee(r,e){if(r.data!=null)return r.data[e]}function II(r){const e=r.scene,t=Wee(r,"animationControl");t&&t.dispose(),e.traverse(n=>{if(n.geometry&&n.geometry.dispose(),n.material)if(n.material.length)for(let i=0;i<n.material.length;++i)n.material[i].dispose();else n.material.dispose()}),e.parent&&e.parent.remove(e)}const Zee=r=>{const e=r.attributes.position,t=r.index,n=new Ui,i=new H,s=new H,o=new H,a=[];for(let A=0;A<t.array.length/3;A++){const l=A*3;i.fromBufferAttribute(e,t.getX(l+0)),s.fromBufferAttribute(e,t.getX(l+1)),o.fromBufferAttribute(e,t.getX(l+2)),n.set(i,s,o),a.push(n.getNormal(new H))}r.userData.faceNormals=a},Pee=r=>{const e=r.geometry,t=e.attributes.position.array,n=e.attributes.normal.array,i=e.attributes.skinIndex.array,s=e.attributes.skinWeight.array,o=[],a=new H,A=new H,l=[];for(let c=0;c<r.skeleton.bones.length;c++)r.skeleton.bones[c].name.includes("Shoulder")?l[c]=3:r.skeleton.bones[c].name.includes("Arm")||r.skeleton.bones[c].name.includes("Hand")||r.skeleton.bones[c].name.includes("Index")||r.skeleton.bones[c].name.includes("Little")||r.skeleton.bones[c].name.includes("Middle")||r.skeleton.bones[c].name.includes("Ring")||r.skeleton.bones[c].name.includes("Thumb")?l[c]=1:r.skeleton.bones[c].name.includes("Foot")||r.skeleton.bones[c].name.includes("Toes")?l[c]=3:l[c]=0;for(let c=0;c<i.length/4;c++){const u=c*4;let f=i[u];for(let h=0;h<4;h++)s[f]<s[u+h]&&(f=i[u+h]);const d=c*3;switch(A.set(t[d],t[d+1],t[d+2]),l[f]){case 0:a.set(r.skeleton.bones[f].getWorldPosition(new H).x,A.y,r.skeleton.bones[f].getWorldPosition(new H).z);break;case 1:a.set(A.x,r.skeleton.bones[f].getWorldPosition(new H).y,r.skeleton.bones[f].getWorldPosition(new H).z);break;case 2:a.set(r.skeleton.bones[f].getWorldPosition(new H).x,r.skeleton.bones[f].getWorldPosition(new H).y,r.skeleton.bones[f].getWorldPosition(new H).z);break}const p=new H;l[f]!==3?p.subVectors(A,a).normalize():p.set(n[d],n[d+1],n[d+2]),o.push(p)}e.userData.boneDirections=o},Jee=r=>{const e=r.humanoid.humanBones;for(const t in e)e[t].node.name=t};function OD({candidates:r,predicate:e,results:t=[]}){if(!r.length)return t;const n=r.shift();return e(n)&&t.push(n),r=r.concat(n.children),OD({candidates:r,predicate:e,results:t})}function HD(r,e){return OD({candidates:[r],predicate:t=>t.type===e})}function Gee(r,e){const t=HD(r,"SkinnedMesh");return{humanBones:Hee(t[0]),materials:[r.userData.atlasMaterial],meta:Oee(e)}}function Oee(r){return{authors:["Webaverse"],metaVersion:"1",version:"v1",name:r,licenseUrl:"https://vrm.dev/licenses/1.0/",commercialUssageName:"personalNonProfit",contactInformation:"https://webaverse.com/",allowExcessivelyViolentUsage:!1,allowExcessivelySexualUsage:!1,allowPoliticalOrReligiousUsage:!1,allowAntisocialOrHateUsage:!1,creditNotation:"required",allowRedistribution:!1,modification:"prohibited"}}function Hee(r){const e={};return r.skeleton.bones.map(t=>{for(const n in a_)if(a_[n]===t.name){e[t.name]={node:t};break}}),e}function zD(r){return Xee(zee(r),r)}function zee(r){return[...new Set([..._n(r.requiredTraits),..._n(r.randomTraits)])]}function Xee(r,e){const t=[];return r.map(n=>{const i=e.traits.find(s=>s.trait===n);if(i){const s=XD(i,e);(s==null?void 0:s.length)>0&&t.push(s[Math.floor(Math.random()*s.length)])}}),t}const Yee=(r,e)=>{var n;const t=e.filter(i=>i.id===r.class);if(t.length>0){const i=t[0],s=[];for(const o in r){const a=i.traits.filter(A=>A.trait===o);if(a.length>0){const A=a[0];((n=r[o].traitInfo)==null?void 0:n.id)!=null?s.push({item:r[o].traitInfo,textureTrait:r[o].textureInfo,colorTrait:r[o].colorInfo,trait:A}):s.push({item:null,trait:A})}}return s}return null};function XD(r,e){const t=[],n=e.thumbnailsDirectory;return r.collection.map((i,s)=>{const o=e.textureCollections.find(A=>A.trait===i.textureCollection),a=e.colorCollections.find(A=>A.trait===i.colorCollection);if(o==null&&a==null){const A=r.name+"_"+s;t.push(GC(A,r,i,n+i.thumbnail))}(o==null?void 0:o.collection.length)>0&&o.collection.map((A,l)=>{const c=r.name+"_"+s+"_txt"+l,u=N_(i,A,l);t.push(GC(c,r,i,n+u,null,A))}),(a==null?void 0:a.collection.length)>0&&a.collection.map((A,l)=>{const c=r.name+"_"+s+"_col"+l,u=N_(i,A,l);t.push(GC(c,r,i,n+u,Kee(A.value[0]),null,A))})}),t}function GC(r,e,t,n,i=null,s=null,o=null){return{key:r,trait:e,item:t,icon:n,iconHSL:i,textureTrait:s,colorTrait:o}}function Kee(r){const e=new Ve(r),t={h:0,s:0,l:0};let n,i,s,o,a,A,l,c,u,f,d;return n=e.r,i=e.g,s=e.b,u=Math.max(n,i,s),f=u-Math.min(n,i,s),d=p=>(u-p)/6/f+1/2,f==0?l=c=0:(c=f/u,o=d(n),a=d(i),A=d(s),n===u?l=A-a:i===u?l=1/3+o-A:s===u&&(l=2/3+a-o),l<0?l+=1:l>1&&(l-=1)),t.h=l,t.s=c,t.l=u,t}function N_(r,e,t){return r.thumbnailOverrides&&r.thumbnailOverrides[t]?r.thumbnailOverrides[t]:e.thumbnail||r.thumbnail}function da(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function YD(r,e){r.prototype=Object.create(e.prototype),r.prototype.constructor=r,r.__proto__=e}/*!
 * GSAP 3.11.4
 * https://greensock.com
 *
 * @license Copyright 2008-2022, GreenSock. All rights reserved.
 * Subject to the terms at https://greensock.com/standard-license or for
 * Club GreenSock members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var _i={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}},If={duration:.5,overwrite:!1,delay:0},Gx,Er,Dn,os=1e8,zt=1/os,UI=Math.PI*2,jee=UI/4,qee=0,KD=Math.sqrt,$ee=Math.cos,ete=Math.sin,or=function(e){return typeof e=="string"},vn=function(e){return typeof e=="function"},Da=function(e){return typeof e=="number"},Ox=function(e){return typeof e>"u"},ko=function(e){return typeof e=="object"},ai=function(e){return e!==!1},jD=function(){return typeof window<"u"},om=function(e){return vn(e)||or(e)},qD=typeof ArrayBuffer=="function"&&ArrayBuffer.isView||function(){},Sr=Array.isArray,xI=/(?:-?\.?\d|\.)+/gi,$D=/[-+=.]*\d+[.e\-+]*\d*[e\-+]*\d*/g,bu=/[-+=.]*\d+[.e-]*\d*[a-z%]*/g,OC=/[-+=.]*\d+\.?\d*(?:e-|e\+)?\d*/gi,ek=/[+-]=-?[.\d]+/,tk=/[^,'"\[\]\s]+/gi,tte=/^[+\-=e\s\d]*\d+[.\d]*([a-z]*|%)\s*$/i,ln,ji,QI,Hx,Ni={},aB={},nk,rk=function(e){return(aB=oc(e,Ni))&&Vi},zx=function(e,t){return console.warn("Invalid property",e,"set to",t,"Missing plugin? gsap.registerPlugin()")},AB=function(e,t){return!t&&console.warn(e)},ik=function(e,t){return e&&(Ni[e]=t)&&aB&&(aB[e]=t)||Ni},op=function(){return 0},nte={suppressEvents:!0,isStart:!0,kill:!1},Km={suppressEvents:!0,kill:!1},rte={suppressEvents:!0},Xx={},WA=[],bI={},sk,Ii={},HC={},V_=30,jm=[],Yx="",Kx=function(e){var t=e[0],n,i;if(ko(t)||vn(t)||(e=[e]),!(n=(t._gsap||{}).harness)){for(i=jm.length;i--&&!jm[i].targetTest(t););n=jm[i]}for(i=e.length;i--;)e[i]&&(e[i]._gsap||(e[i]._gsap=new Qk(e[i],n)))||e.splice(i,1);return e},Hl=function(e){return e._gsap||Kx(as(e))[0]._gsap},ok=function(e,t,n){return(n=e[t])&&vn(n)?e[t]():Ox(n)&&e.getAttribute&&e.getAttribute(t)||n},Ai=function(e,t){return(e=e.split(",")).forEach(t)||e},xn=function(e){return Math.round(e*1e5)/1e5||0},cr=function(e){return Math.round(e*1e7)/1e7||0},Xu=function(e,t){var n=t.charAt(0),i=parseFloat(t.substr(2));return e=parseFloat(e),n==="+"?e+i:n==="-"?e-i:n==="*"?e*i:e/i},ite=function(e,t){for(var n=t.length,i=0;e.indexOf(t[i])<0&&++i<n;);return i<n},lB=function(){var e=WA.length,t=WA.slice(0),n,i;for(bI={},WA.length=0,n=0;n<e;n++)i=t[n],i&&i._lazy&&(i.render(i._lazy[0],i._lazy[1],!0)._lazy=0)},ak=function(e,t,n,i){WA.length&&!Er&&lB(),e.render(t,n,i||Er&&t<0&&(e._initted||e._startAt)),WA.length&&!Er&&lB()},Ak=function(e){var t=parseFloat(e);return(t||t===0)&&(e+"").match(tk).length<2?t:or(e)?e.trim():e},lk=function(e){return e},ms=function(e,t){for(var n in t)n in e||(e[n]=t[n]);return e},ste=function(e){return function(t,n){for(var i in n)i in t||i==="duration"&&e||i==="ease"||(t[i]=n[i])}},oc=function(e,t){for(var n in t)e[n]=t[n];return e},D_=function r(e,t){for(var n in t)n!=="__proto__"&&n!=="constructor"&&n!=="prototype"&&(e[n]=ko(t[n])?r(e[n]||(e[n]={}),t[n]):t[n]);return e},cB=function(e,t){var n={},i;for(i in e)i in t||(n[i]=e[i]);return n},wh=function(e){var t=e.parent||ln,n=e.keyframes?ste(Sr(e.keyframes)):ms;if(ai(e.inherit))for(;t;)n(e,t.vars.defaults),t=t.parent||t._dp;return e},ote=function(e,t){for(var n=e.length,i=n===t.length;i&&n--&&e[n]===t[n];);return n<0},ck=function(e,t,n,i,s){n===void 0&&(n="_first"),i===void 0&&(i="_last");var o=e[i],a;if(s)for(a=t[s];o&&o[s]>a;)o=o._prev;return o?(t._next=o._next,o._next=t):(t._next=e[n],e[n]=t),t._next?t._next._prev=t:e[i]=t,t._prev=o,t.parent=t._dp=e,t},Qv=function(e,t,n,i){n===void 0&&(n="_first"),i===void 0&&(i="_last");var s=t._prev,o=t._next;s?s._next=o:e[n]===t&&(e[n]=o),o?o._prev=s:e[i]===t&&(e[i]=s),t._next=t._prev=t.parent=null},$A=function(e,t){e.parent&&(!t||e.parent.autoRemoveChildren)&&e.parent.remove(e),e._act=0},zl=function(e,t){if(e&&(!t||t._end>e._dur||t._start<0))for(var n=e;n;)n._dirty=1,n=n.parent;return e},ate=function(e){for(var t=e.parent;t&&t.parent;)t._dirty=1,t.totalDuration(),t=t.parent;return e},EI=function(e,t,n,i){return e._startAt&&(Er?e._startAt.revert(Km):e.vars.immediateRender&&!e.vars.autoRevert||e._startAt.render(t,!0,i))},Ate=function r(e){return!e||e._ts&&r(e.parent)},k_=function(e){return e._repeat?Uf(e._tTime,e=e.duration()+e._rDelay)*e:0},Uf=function(e,t){var n=Math.floor(e/=t);return e&&n===e?n-1:n},uB=function(e,t){return(e-t._start)*t._ts+(t._ts>=0?0:t._dirty?t.totalDuration():t._tDur)},bv=function(e){return e._end=cr(e._start+(e._tDur/Math.abs(e._ts||e._rts||zt)||0))},Ev=function(e,t){var n=e._dp;return n&&n.smoothChildTiming&&e._ts&&(e._start=cr(n._time-(e._ts>0?t/e._ts:((e._dirty?e.totalDuration():e._tDur)-t)/-e._ts)),bv(e),n._dirty||zl(n,e)),e},uk=function(e,t){var n;if((t._time||t._initted&&!t._dur)&&(n=uB(e.rawTime(),t),(!t._dur||kp(0,t.totalDuration(),n)-t._tTime>zt)&&t.render(n,!0)),zl(e,t)._dp&&e._initted&&e._time>=e._dur&&e._ts){if(e._dur<e.duration())for(n=e;n._dp;)n.rawTime()>=0&&n.totalTime(n._tTime),n=n._dp;e._zTime=-zt}},vo=function(e,t,n,i){return t.parent&&$A(t),t._start=cr((Da(n)?n:n||e!==ln?zi(e,n,t):e._time)+t._delay),t._end=cr(t._start+(t.totalDuration()/Math.abs(t.timeScale())||0)),ck(e,t,"_first","_last",e._sort?"_start":0),SI(t)||(e._recent=t),i||uk(e,t),e._ts<0&&Ev(e,e._tTime),e},fk=function(e,t){return(Ni.ScrollTrigger||zx("scrollTrigger",t))&&Ni.ScrollTrigger.create(t,e)},dk=function(e,t,n,i,s){if(qx(e,t,s),!e._initted)return 1;if(!n&&e._pt&&!Er&&(e._dur&&e.vars.lazy!==!1||!e._dur&&e.vars.lazy)&&sk!==xi.frame)return WA.push(e),e._lazy=[s,i],1},lte=function r(e){var t=e.parent;return t&&t._ts&&t._initted&&!t._lock&&(t.rawTime()<0||r(t))},SI=function(e){var t=e.data;return t==="isFromStart"||t==="isStart"},cte=function(e,t,n,i){var s=e.ratio,o=t<0||!t&&(!e._start&&lte(e)&&!(!e._initted&&SI(e))||(e._ts<0||e._dp._ts<0)&&!SI(e))?0:1,a=e._rDelay,A=0,l,c,u;if(a&&e._repeat&&(A=kp(0,e._tDur,t),c=Uf(A,a),e._yoyo&&c&1&&(o=1-o),c!==Uf(e._tTime,a)&&(s=1-o,e.vars.repeatRefresh&&e._initted&&e.invalidate())),o!==s||Er||i||e._zTime===zt||!t&&e._zTime){if(!e._initted&&dk(e,t,i,n,A))return;for(u=e._zTime,e._zTime=t||(n?zt:0),n||(n=t&&!u),e.ratio=o,e._from&&(o=1-o),e._time=0,e._tTime=A,l=e._pt;l;)l.r(o,l.d),l=l._next;t<0&&EI(e,t,n,!0),e._onUpdate&&!n&&As(e,"onUpdate"),A&&e._repeat&&!n&&e.parent&&As(e,"onRepeat"),(t>=e._tDur||t<0)&&e.ratio===o&&(o&&$A(e,1),!n&&!Er&&(As(e,o?"onComplete":"onReverseComplete",!0),e._prom&&e._prom()))}else e._zTime||(e._zTime=t)},ute=function(e,t,n){var i;if(n>t)for(i=e._first;i&&i._start<=n;){if(i.data==="isPause"&&i._start>t)return i;i=i._next}else for(i=e._last;i&&i._start>=n;){if(i.data==="isPause"&&i._start<t)return i;i=i._prev}},xf=function(e,t,n,i){var s=e._repeat,o=cr(t)||0,a=e._tTime/e._tDur;return a&&!i&&(e._time*=o/e._dur),e._dur=o,e._tDur=s?s<0?1e10:cr(o*(s+1)+e._rDelay*s):o,a>0&&!i&&Ev(e,e._tTime=e._tDur*a),e.parent&&bv(e),n||zl(e.parent,e),e},L_=function(e){return e instanceof ti?zl(e):xf(e,e._dur)},fte={_start:0,endTime:op,totalDuration:op},zi=function r(e,t,n){var i=e.labels,s=e._recent||fte,o=e.duration()>=os?s.endTime(!1):e._dur,a,A,l;return or(t)&&(isNaN(t)||t in i)?(A=t.charAt(0),l=t.substr(-1)==="%",a=t.indexOf("="),A==="<"||A===">"?(a>=0&&(t=t.replace(/=/,"")),(A==="<"?s._start:s.endTime(s._repeat>=0))+(parseFloat(t.substr(1))||0)*(l?(a<0?s:n).totalDuration()/100:1)):a<0?(t in i||(i[t]=o),i[t]):(A=parseFloat(t.charAt(a-1)+t.substr(a+1)),l&&n&&(A=A/100*(Sr(n)?n[0]:n).totalDuration()),a>1?r(e,t.substr(0,a-1),n)+A:o+A)):t==null?o:+t},Fh=function(e,t,n){var i=Da(t[1]),s=(i?2:1)+(e<2?0:1),o=t[s],a,A;if(i&&(o.duration=t[1]),o.parent=n,e){for(a=o,A=n;A&&!("immediateRender"in a);)a=A.vars.defaults||{},A=ai(A.vars.inherit)&&A.parent;o.immediateRender=ai(a.immediateRender),e<2?o.runBackwards=1:o.startAt=t[s-1]}return new On(t[0],o,t[s+1])},al=function(e,t){return e||e===0?t(e):t},kp=function(e,t,n){return n<e?e:n>t?t:n},Ur=function(e,t){return!or(e)||!(t=tte.exec(e))?"":t[1]},dte=function(e,t,n){return al(n,function(i){return kp(e,t,i)})},_I=[].slice,hk=function(e,t){return e&&ko(e)&&"length"in e&&(!t&&!e.length||e.length-1 in e&&ko(e[0]))&&!e.nodeType&&e!==ji},hte=function(e,t,n){return n===void 0&&(n=[]),e.forEach(function(i){var s;return or(i)&&!t||hk(i,1)?(s=n).push.apply(s,as(i)):n.push(i)})||n},as=function(e,t,n){return Dn&&!t&&Dn.selector?Dn.selector(e):or(e)&&!n&&(QI||!Qf())?_I.call((t||Hx).querySelectorAll(e),0):Sr(e)?hte(e,n):hk(e)?_I.call(e,0):e?[e]:[]},RI=function(e){return e=as(e)[0]||AB("Invalid scope")||{},function(t){var n=e.current||e.nativeElement||e;return as(t,n.querySelectorAll?n:n===e?AB("Invalid scope")||Hx.createElement("div"):e)}},pk=function(e){return e.sort(function(){return .5-Math.random()})},gk=function(e){if(vn(e))return e;var t=ko(e)?e:{each:e},n=Xl(t.ease),i=t.from||0,s=parseFloat(t.base)||0,o={},a=i>0&&i<1,A=isNaN(i)||a,l=t.axis,c=i,u=i;return or(i)?c=u={center:.5,edges:.5,end:1}[i]||0:!a&&A&&(c=i[0],u=i[1]),function(f,d,p){var h=(p||t).length,m=o[h],g,B,v,w,C,I,E,U,S;if(!m){if(S=t.grid==="auto"?0:(t.grid||[1,os])[1],!S){for(E=-os;E<(E=p[S++].getBoundingClientRect().left)&&S<h;);S--}for(m=o[h]=[],g=A?Math.min(S,h)*c-.5:i%S,B=S===os?0:A?h*u/S-.5:i/S|0,E=0,U=os,I=0;I<h;I++)v=I%S-g,w=B-(I/S|0),m[I]=C=l?Math.abs(l==="y"?w:v):KD(v*v+w*w),C>E&&(E=C),C<U&&(U=C);i==="random"&&pk(m),m.max=E-U,m.min=U,m.v=h=(parseFloat(t.amount)||parseFloat(t.each)*(S>h?h-1:l?l==="y"?h/S:S:Math.max(S,h/S))||0)*(i==="edges"?-1:1),m.b=h<0?s-h:s,m.u=Ur(t.amount||t.each)||0,n=n&&h<0?Ik(n):n}return h=(m[f]-m.min)/m.max||0,cr(m.b+(n?n(h):h)*m.v)+m.u}},MI=function(e){var t=Math.pow(10,((e+"").split(".")[1]||"").length);return function(n){var i=cr(Math.round(parseFloat(n)/e)*e*t);return(i-i%1)/t+(Da(n)?0:Ur(n))}},mk=function(e,t){var n=Sr(e),i,s;return!n&&ko(e)&&(i=n=e.radius||os,e.values?(e=as(e.values),(s=!Da(e[0]))&&(i*=i)):e=MI(e.increment)),al(t,n?vn(e)?function(o){return s=e(o),Math.abs(s-o)<=i?s:o}:function(o){for(var a=parseFloat(s?o.x:o),A=parseFloat(s?o.y:0),l=os,c=0,u=e.length,f,d;u--;)s?(f=e[u].x-a,d=e[u].y-A,f=f*f+d*d):f=Math.abs(e[u]-a),f<l&&(l=f,c=u);return c=!i||l<=i?e[c]:o,s||c===o||Da(o)?c:c+Ur(o)}:MI(e))},Bk=function(e,t,n,i){return al(Sr(e)?!t:n===!0?!!(n=0):!i,function(){return Sr(e)?e[~~(Math.random()*e.length)]:(n=n||1e-5)&&(i=n<1?Math.pow(10,(n+"").length-2):1)&&Math.floor(Math.round((e-n/2+Math.random()*(t-e+n*.99))/n)*n*i)/i})},pte=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(i){return t.reduce(function(s,o){return o(s)},i)}},gte=function(e,t){return function(n){return e(parseFloat(n))+(t||Ur(n))}},mte=function(e,t,n){return yk(e,t,0,1,n)},vk=function(e,t,n){return al(n,function(i){return e[~~t(i)]})},Bte=function r(e,t,n){var i=t-e;return Sr(e)?vk(e,r(0,e.length),t):al(n,function(s){return(i+(s-e)%i)%i+e})},vte=function r(e,t,n){var i=t-e,s=i*2;return Sr(e)?vk(e,r(0,e.length-1),t):al(n,function(o){return o=(s+(o-e)%s)%s||0,e+(o>i?s-o:o)})},ap=function(e){for(var t=0,n="",i,s,o,a;~(i=e.indexOf("random(",t));)o=e.indexOf(")",i),a=e.charAt(i+7)==="[",s=e.substr(i+7,o-i-7).match(a?tk:xI),n+=e.substr(t,i-t)+Bk(a?s:+s[0],a?0:+s[1],+s[2]||1e-5),t=o+1;return n+e.substr(t,e.length-t)},yk=function(e,t,n,i,s){var o=t-e,a=i-n;return al(s,function(A){return n+((A-e)/o*a||0)})},yte=function r(e,t,n,i){var s=isNaN(e+t)?0:function(d){return(1-d)*e+d*t};if(!s){var o=or(e),a={},A,l,c,u,f;if(n===!0&&(i=1)&&(n=null),o)e={p:e},t={p:t};else if(Sr(e)&&!Sr(t)){for(c=[],u=e.length,f=u-2,l=1;l<u;l++)c.push(r(e[l-1],e[l]));u--,s=function(p){p*=u;var h=Math.min(f,~~p);return c[h](p-h)},n=t}else i||(e=oc(Sr(e)?[]:{},e));if(!c){for(A in t)jx.call(a,e,A,"get",t[A]);s=function(p){return tQ(p,a)||(o?e.p:e)}}}return al(n,s)},W_=function(e,t,n){var i=e.labels,s=os,o,a,A;for(o in i)a=i[o]-t,a<0==!!n&&a&&s>(a=Math.abs(a))&&(A=o,s=a);return A},As=function(e,t,n){var i=e.vars,s=i[t],o=Dn,a=e._ctx,A,l,c;if(s)return A=i[t+"Params"],l=i.callbackScope||e,n&&WA.length&&lB(),a&&(Dn=a),c=A?s.apply(l,A):s.call(l),Dn=o,c},nh=function(e){return $A(e),e.scrollTrigger&&e.scrollTrigger.kill(!!Er),e.progress()<1&&As(e,"onInterrupt"),e},Eu,Cte=function(e){e=!e.name&&e.default||e;var t=e.name,n=vn(e),i=t&&!n&&e.init?function(){this._props=[]}:e,s={init:op,render:tQ,add:jx,kill:Dte,modifier:Vte,rawVars:0},o={targetTest:0,get:0,getSetter:eQ,aliases:{},register:0};if(Qf(),e!==i){if(Ii[t])return;ms(i,ms(cB(e,s),o)),oc(i.prototype,oc(s,cB(e,o))),Ii[i.prop=t]=i,e.targetTest&&(jm.push(i),Xx[t]=1),t=(t==="css"?"CSS":t.charAt(0).toUpperCase()+t.substr(1))+"Plugin"}ik(t,i),e.register&&e.register(Vi,i,li)},Ot=255,rh={aqua:[0,Ot,Ot],lime:[0,Ot,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,Ot],navy:[0,0,128],white:[Ot,Ot,Ot],olive:[128,128,0],yellow:[Ot,Ot,0],orange:[Ot,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[Ot,0,0],pink:[Ot,192,203],cyan:[0,Ot,Ot],transparent:[Ot,Ot,Ot,0]},zC=function(e,t,n){return e+=e<0?1:e>1?-1:0,(e*6<1?t+(n-t)*e*6:e<.5?n:e*3<2?t+(n-t)*(2/3-e)*6:t)*Ot+.5|0},Ck=function(e,t,n){var i=e?Da(e)?[e>>16,e>>8&Ot,e&Ot]:0:rh.black,s,o,a,A,l,c,u,f,d,p;if(!i){if(e.substr(-1)===","&&(e=e.substr(0,e.length-1)),rh[e])i=rh[e];else if(e.charAt(0)==="#"){if(e.length<6&&(s=e.charAt(1),o=e.charAt(2),a=e.charAt(3),e="#"+s+s+o+o+a+a+(e.length===5?e.charAt(4)+e.charAt(4):"")),e.length===9)return i=parseInt(e.substr(1,6),16),[i>>16,i>>8&Ot,i&Ot,parseInt(e.substr(7),16)/255];e=parseInt(e.substr(1),16),i=[e>>16,e>>8&Ot,e&Ot]}else if(e.substr(0,3)==="hsl"){if(i=p=e.match(xI),!t)A=+i[0]%360/360,l=+i[1]/100,c=+i[2]/100,o=c<=.5?c*(l+1):c+l-c*l,s=c*2-o,i.length>3&&(i[3]*=1),i[0]=zC(A+1/3,s,o),i[1]=zC(A,s,o),i[2]=zC(A-1/3,s,o);else if(~e.indexOf("="))return i=e.match($D),n&&i.length<4&&(i[3]=1),i}else i=e.match(xI)||rh.transparent;i=i.map(Number)}return t&&!p&&(s=i[0]/Ot,o=i[1]/Ot,a=i[2]/Ot,u=Math.max(s,o,a),f=Math.min(s,o,a),c=(u+f)/2,u===f?A=l=0:(d=u-f,l=c>.5?d/(2-u-f):d/(u+f),A=u===s?(o-a)/d+(o<a?6:0):u===o?(a-s)/d+2:(s-o)/d+4,A*=60),i[0]=~~(A+.5),i[1]=~~(l*100+.5),i[2]=~~(c*100+.5)),n&&i.length<4&&(i[3]=1),i},wk=function(e){var t=[],n=[],i=-1;return e.split(ZA).forEach(function(s){var o=s.match(bu)||[];t.push.apply(t,o),n.push(i+=o.length+1)}),t.c=n,t},Z_=function(e,t,n){var i="",s=(e+i).match(ZA),o=t?"hsla(":"rgba(",a=0,A,l,c,u;if(!s)return e;if(s=s.map(function(f){return(f=Ck(f,t,1))&&o+(t?f[0]+","+f[1]+"%,"+f[2]+"%,"+f[3]:f.join(","))+")"}),n&&(c=wk(e),A=n.c,A.join(i)!==c.c.join(i)))for(l=e.replace(ZA,"1").split(bu),u=l.length-1;a<u;a++)i+=l[a]+(~A.indexOf(a)?s.shift()||o+"0,0,0,0)":(c.length?c:s.length?s:n).shift());if(!l)for(l=e.split(ZA),u=l.length-1;a<u;a++)i+=l[a]+s[a];return i+l[u]},ZA=function(){var r="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3,4}){1,2}\\b",e;for(e in rh)r+="|"+e+"\\b";return new RegExp(r+")","gi")}(),wte=/hsl[a]?\(/,Fk=function(e){var t=e.join(" "),n;if(ZA.lastIndex=0,ZA.test(t))return n=wte.test(t),e[1]=Z_(e[1],n),e[0]=Z_(e[0],n,wk(e[1])),!0},Ap,xi=function(){var r=Date.now,e=500,t=33,n=r(),i=n,s=1e3/240,o=s,a=[],A,l,c,u,f,d,p=function h(m){var g=r()-i,B=m===!0,v,w,C,I;if(g>e&&(n+=g-t),i+=g,C=i-n,v=C-o,(v>0||B)&&(I=++u.frame,f=C-u.time*1e3,u.time=C=C/1e3,o+=v+(v>=s?4:s-v),w=1),B||(A=l(h)),w)for(d=0;d<a.length;d++)a[d](C,f,I,m)};return u={time:0,frame:0,tick:function(){p(!0)},deltaRatio:function(m){return f/(1e3/(m||60))},wake:function(){nk&&(!QI&&jD()&&(ji=QI=window,Hx=ji.document||{},Ni.gsap=Vi,(ji.gsapVersions||(ji.gsapVersions=[])).push(Vi.version),rk(aB||ji.GreenSockGlobals||!ji.gsap&&ji||{}),c=ji.requestAnimationFrame),A&&u.sleep(),l=c||function(m){return setTimeout(m,o-u.time*1e3+1|0)},Ap=1,p(2))},sleep:function(){(c?ji.cancelAnimationFrame:clearTimeout)(A),Ap=0,l=op},lagSmoothing:function(m,g){e=m||1/0,t=Math.min(g||33,e)},fps:function(m){s=1e3/(m||240),o=u.time*1e3+s},add:function(m,g,B){var v=g?function(w,C,I,E){m(w,C,I,E),u.remove(v)}:m;return u.remove(m),a[B?"unshift":"push"](v),Qf(),v},remove:function(m,g){~(g=a.indexOf(m))&&a.splice(g,1)&&d>=g&&d--},_listeners:a},u}(),Qf=function(){return!Ap&&xi.wake()},xt={},Fte=/^[\d.\-M][\d.\-,\s]/,Ite=/["']/g,Ute=function(e){for(var t={},n=e.substr(1,e.length-3).split(":"),i=n[0],s=1,o=n.length,a,A,l;s<o;s++)A=n[s],a=s!==o-1?A.lastIndexOf(","):A.length,l=A.substr(0,a),t[i]=isNaN(l)?l.replace(Ite,"").trim():+l,i=A.substr(a+1).trim();return t},xte=function(e){var t=e.indexOf("(")+1,n=e.indexOf(")"),i=e.indexOf("(",t);return e.substring(t,~i&&i<n?e.indexOf(")",n+1):n)},Qte=function(e){var t=(e+"").split("("),n=xt[t[0]];return n&&t.length>1&&n.config?n.config.apply(null,~e.indexOf("{")?[Ute(t[1])]:xte(e).split(",").map(Ak)):xt._CE&&Fte.test(e)?xt._CE("",e):n},Ik=function(e){return function(t){return 1-e(1-t)}},Uk=function r(e,t){for(var n=e._first,i;n;)n instanceof ti?r(n,t):n.vars.yoyoEase&&(!n._yoyo||!n._repeat)&&n._yoyo!==t&&(n.timeline?r(n.timeline,t):(i=n._ease,n._ease=n._yEase,n._yEase=i,n._yoyo=t)),n=n._next},Xl=function(e,t){return e&&(vn(e)?e:xt[e]||Qte(e))||t},pc=function(e,t,n,i){n===void 0&&(n=function(A){return 1-t(1-A)}),i===void 0&&(i=function(A){return A<.5?t(A*2)/2:1-t((1-A)*2)/2});var s={easeIn:t,easeOut:n,easeInOut:i},o;return Ai(e,function(a){xt[a]=Ni[a]=s,xt[o=a.toLowerCase()]=n;for(var A in s)xt[o+(A==="easeIn"?".in":A==="easeOut"?".out":".inOut")]=xt[a+"."+A]=s[A]}),s},xk=function(e){return function(t){return t<.5?(1-e(1-t*2))/2:.5+e((t-.5)*2)/2}},XC=function r(e,t,n){var i=t>=1?t:1,s=(n||(e?.3:.45))/(t<1?t:1),o=s/UI*(Math.asin(1/i)||0),a=function(c){return c===1?1:i*Math.pow(2,-10*c)*ete((c-o)*s)+1},A=e==="out"?a:e==="in"?function(l){return 1-a(1-l)}:xk(a);return s=UI/s,A.config=function(l,c){return r(e,l,c)},A},YC=function r(e,t){t===void 0&&(t=1.70158);var n=function(o){return o?--o*o*((t+1)*o+t)+1:0},i=e==="out"?n:e==="in"?function(s){return 1-n(1-s)}:xk(n);return i.config=function(s){return r(e,s)},i};Ai("Linear,Quad,Cubic,Quart,Quint,Strong",function(r,e){var t=e<5?e+1:e;pc(r+",Power"+(t-1),e?function(n){return Math.pow(n,t)}:function(n){return n},function(n){return 1-Math.pow(1-n,t)},function(n){return n<.5?Math.pow(n*2,t)/2:1-Math.pow((1-n)*2,t)/2})});xt.Linear.easeNone=xt.none=xt.Linear.easeIn;pc("Elastic",XC("in"),XC("out"),XC());(function(r,e){var t=1/e,n=2*t,i=2.5*t,s=function(a){return a<t?r*a*a:a<n?r*Math.pow(a-1.5/e,2)+.75:a<i?r*(a-=2.25/e)*a+.9375:r*Math.pow(a-2.625/e,2)+.984375};pc("Bounce",function(o){return 1-s(1-o)},s)})(7.5625,2.75);pc("Expo",function(r){return r?Math.pow(2,10*(r-1)):0});pc("Circ",function(r){return-(KD(1-r*r)-1)});pc("Sine",function(r){return r===1?1:-$ee(r*jee)+1});pc("Back",YC("in"),YC("out"),YC());xt.SteppedEase=xt.steps=Ni.SteppedEase={config:function(e,t){e===void 0&&(e=1);var n=1/e,i=e+(t?0:1),s=t?1:0,o=1-zt;return function(a){return((i*kp(0,o,a)|0)+s)*n}}};If.ease=xt["quad.out"];Ai("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",function(r){return Yx+=r+","+r+"Params,"});var Qk=function(e,t){this.id=qee++,e._gsap=this,this.target=e,this.harness=t,this.get=t?t.get:ok,this.set=t?t.getSetter:eQ},bf=function(){function r(t){this.vars=t,this._delay=+t.delay||0,(this._repeat=t.repeat===1/0?-2:t.repeat||0)&&(this._rDelay=t.repeatDelay||0,this._yoyo=!!t.yoyo||!!t.yoyoEase),this._ts=1,xf(this,+t.duration,1,1),this.data=t.data,Dn&&(this._ctx=Dn,Dn.data.push(this)),Ap||xi.wake()}var e=r.prototype;return e.delay=function(n){return n||n===0?(this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+n-this._delay),this._delay=n,this):this._delay},e.duration=function(n){return arguments.length?this.totalDuration(this._repeat>0?n+(n+this._rDelay)*this._repeat:n):this.totalDuration()&&this._dur},e.totalDuration=function(n){return arguments.length?(this._dirty=0,xf(this,this._repeat<0?n:(n-this._repeat*this._rDelay)/(this._repeat+1))):this._tDur},e.totalTime=function(n,i){if(Qf(),!arguments.length)return this._tTime;var s=this._dp;if(s&&s.smoothChildTiming&&this._ts){for(Ev(this,n),!s._dp||s.parent||uk(s,this);s&&s.parent;)s.parent._time!==s._start+(s._ts>=0?s._tTime/s._ts:(s.totalDuration()-s._tTime)/-s._ts)&&s.totalTime(s._tTime,!0),s=s.parent;!this.parent&&this._dp.autoRemoveChildren&&(this._ts>0&&n<this._tDur||this._ts<0&&n>0||!this._tDur&&!n)&&vo(this._dp,this,this._start-this._delay)}return(this._tTime!==n||!this._dur&&!i||this._initted&&Math.abs(this._zTime)===zt||!n&&!this._initted&&(this.add||this._ptLookup))&&(this._ts||(this._pTime=n),ak(this,n,i)),this},e.time=function(n,i){return arguments.length?this.totalTime(Math.min(this.totalDuration(),n+k_(this))%(this._dur+this._rDelay)||(n?this._dur:0),i):this._time},e.totalProgress=function(n,i){return arguments.length?this.totalTime(this.totalDuration()*n,i):this.totalDuration()?Math.min(1,this._tTime/this._tDur):this.ratio},e.progress=function(n,i){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&!(this.iteration()&1)?1-n:n)+k_(this),i):this.duration()?Math.min(1,this._time/this._dur):this.ratio},e.iteration=function(n,i){var s=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(n-1)*s,i):this._repeat?Uf(this._tTime,s)+1:1},e.timeScale=function(n){if(!arguments.length)return this._rts===-zt?0:this._rts;if(this._rts===n)return this;var i=this.parent&&this._ts?uB(this.parent._time,this):this._tTime;return this._rts=+n||0,this._ts=this._ps||n===-zt?0:this._rts,this.totalTime(kp(-this._delay,this._tDur,i),!0),bv(this),ate(this)},e.paused=function(n){return arguments.length?(this._ps!==n&&(this._ps=n,n?(this._pTime=this._tTime||Math.max(-this._delay,this.rawTime()),this._ts=this._act=0):(Qf(),this._ts=this._rts,this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,this.progress()===1&&Math.abs(this._zTime)!==zt&&(this._tTime-=zt)))),this):this._ps},e.startTime=function(n){if(arguments.length){this._start=n;var i=this.parent||this._dp;return i&&(i._sort||!this.parent)&&vo(i,this,n-this._delay),this}return this._start},e.endTime=function(n){return this._start+(ai(n)?this.totalDuration():this.duration())/Math.abs(this._ts||1)},e.rawTime=function(n){var i=this.parent||this._dp;return i?n&&(!this._ts||this._repeat&&this._time&&this.totalProgress()<1)?this._tTime%(this._dur+this._rDelay):this._ts?uB(i.rawTime(n),this):this._tTime:this._tTime},e.revert=function(n){n===void 0&&(n=rte);var i=Er;return Er=n,(this._initted||this._startAt)&&(this.timeline&&this.timeline.revert(n),this.totalTime(-.01,n.suppressEvents)),this.data!=="nested"&&n.kill!==!1&&this.kill(),Er=i,this},e.globalTime=function(n){for(var i=this,s=arguments.length?n:i.rawTime();i;)s=i._start+s/(i._ts||1),i=i._dp;return!this.parent&&this._sat?this._sat.vars.immediateRender?-1:this._sat.globalTime(n):s},e.repeat=function(n){return arguments.length?(this._repeat=n===1/0?-2:n,L_(this)):this._repeat===-2?1/0:this._repeat},e.repeatDelay=function(n){if(arguments.length){var i=this._time;return this._rDelay=n,L_(this),i?this.time(i):this}return this._rDelay},e.yoyo=function(n){return arguments.length?(this._yoyo=n,this):this._yoyo},e.seek=function(n,i){return this.totalTime(zi(this,n),ai(i))},e.restart=function(n,i){return this.play().totalTime(n?-this._delay:0,ai(i))},e.play=function(n,i){return n!=null&&this.seek(n,i),this.reversed(!1).paused(!1)},e.reverse=function(n,i){return n!=null&&this.seek(n||this.totalDuration(),i),this.reversed(!0).paused(!1)},e.pause=function(n,i){return n!=null&&this.seek(n,i),this.paused(!0)},e.resume=function(){return this.paused(!1)},e.reversed=function(n){return arguments.length?(!!n!==this.reversed()&&this.timeScale(-this._rts||(n?-zt:0)),this):this._rts<0},e.invalidate=function(){return this._initted=this._act=0,this._zTime=-zt,this},e.isActive=function(){var n=this.parent||this._dp,i=this._start,s;return!!(!n||this._ts&&this._initted&&n.isActive()&&(s=n.rawTime(!0))>=i&&s<this.endTime(!0)-zt)},e.eventCallback=function(n,i,s){var o=this.vars;return arguments.length>1?(i?(o[n]=i,s&&(o[n+"Params"]=s),n==="onUpdate"&&(this._onUpdate=i)):delete o[n],this):o[n]},e.then=function(n){var i=this;return new Promise(function(s){var o=vn(n)?n:lk,a=function(){var l=i.then;i.then=null,vn(o)&&(o=o(i))&&(o.then||o===i)&&(i.then=l),s(o),i.then=l};i._initted&&i.totalProgress()===1&&i._ts>=0||!i._tTime&&i._ts<0?a():i._prom=a})},e.kill=function(){nh(this)},r}();ms(bf.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:!1,parent:null,_initted:!1,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-zt,_prom:0,_ps:!1,_rts:1});var ti=function(r){YD(e,r);function e(n,i){var s;return n===void 0&&(n={}),s=r.call(this,n)||this,s.labels={},s.smoothChildTiming=!!n.smoothChildTiming,s.autoRemoveChildren=!!n.autoRemoveChildren,s._sort=ai(n.sortChildren),ln&&vo(n.parent||ln,da(s),i),n.reversed&&s.reverse(),n.paused&&s.paused(!0),n.scrollTrigger&&fk(da(s),n.scrollTrigger),s}var t=e.prototype;return t.to=function(i,s,o){return Fh(0,arguments,this),this},t.from=function(i,s,o){return Fh(1,arguments,this),this},t.fromTo=function(i,s,o,a){return Fh(2,arguments,this),this},t.set=function(i,s,o){return s.duration=0,s.parent=this,wh(s).repeatDelay||(s.repeat=0),s.immediateRender=!!s.immediateRender,new On(i,s,zi(this,o),1),this},t.call=function(i,s,o){return vo(this,On.delayedCall(0,i,s),o)},t.staggerTo=function(i,s,o,a,A,l,c){return o.duration=s,o.stagger=o.stagger||a,o.onComplete=l,o.onCompleteParams=c,o.parent=this,new On(i,o,zi(this,A)),this},t.staggerFrom=function(i,s,o,a,A,l,c){return o.runBackwards=1,wh(o).immediateRender=ai(o.immediateRender),this.staggerTo(i,s,o,a,A,l,c)},t.staggerFromTo=function(i,s,o,a,A,l,c,u){return a.startAt=o,wh(a).immediateRender=ai(a.immediateRender),this.staggerTo(i,s,a,A,l,c,u)},t.render=function(i,s,o){var a=this._time,A=this._dirty?this.totalDuration():this._tDur,l=this._dur,c=i<=0?0:cr(i),u=this._zTime<0!=i<0&&(this._initted||!l),f,d,p,h,m,g,B,v,w,C,I,E;if(this!==ln&&c>A&&i>=0&&(c=A),c!==this._tTime||o||u){if(a!==this._time&&l&&(c+=this._time-a,i+=this._time-a),f=c,w=this._start,v=this._ts,g=!v,u&&(l||(a=this._zTime),(i||!s)&&(this._zTime=i)),this._repeat){if(I=this._yoyo,m=l+this._rDelay,this._repeat<-1&&i<0)return this.totalTime(m*100+i,s,o);if(f=cr(c%m),c===A?(h=this._repeat,f=l):(h=~~(c/m),h&&h===c/m&&(f=l,h--),f>l&&(f=l)),C=Uf(this._tTime,m),!a&&this._tTime&&C!==h&&(C=h),I&&h&1&&(f=l-f,E=1),h!==C&&!this._lock){var U=I&&C&1,S=U===(I&&h&1);if(h<C&&(U=!U),a=U?0:l,this._lock=1,this.render(a||(E?0:cr(h*m)),s,!l)._lock=0,this._tTime=c,!s&&this.parent&&As(this,"onRepeat"),this.vars.repeatRefresh&&!E&&(this.invalidate()._lock=1),a&&a!==this._time||g!==!this._ts||this.vars.onRepeat&&!this.parent&&!this._act)return this;if(l=this._dur,A=this._tDur,S&&(this._lock=2,a=U?l:-1e-4,this.render(a,!0),this.vars.repeatRefresh&&!E&&this.invalidate()),this._lock=0,!this._ts&&!g)return this;Uk(this,E)}}if(this._hasPause&&!this._forcing&&this._lock<2&&(B=ute(this,cr(a),cr(f)),B&&(c-=f-(f=B._start))),this._tTime=c,this._time=f,this._act=!v,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1,this._zTime=i,a=0),!a&&f&&!s&&(As(this,"onStart"),this._tTime!==c))return this;if(f>=a&&i>=0)for(d=this._first;d;){if(p=d._next,(d._act||f>=d._start)&&d._ts&&B!==d){if(d.parent!==this)return this.render(i,s,o);if(d.render(d._ts>0?(f-d._start)*d._ts:(d._dirty?d.totalDuration():d._tDur)+(f-d._start)*d._ts,s,o),f!==this._time||!this._ts&&!g){B=0,p&&(c+=this._zTime=-zt);break}}d=p}else{d=this._last;for(var V=i<0?i:f;d;){if(p=d._prev,(d._act||V<=d._end)&&d._ts&&B!==d){if(d.parent!==this)return this.render(i,s,o);if(d.render(d._ts>0?(V-d._start)*d._ts:(d._dirty?d.totalDuration():d._tDur)+(V-d._start)*d._ts,s,o||Er&&(d._initted||d._startAt)),f!==this._time||!this._ts&&!g){B=0,p&&(c+=this._zTime=V?-zt:zt);break}}d=p}}if(B&&!s&&(this.pause(),B.render(f>=a?0:-zt)._zTime=f>=a?1:-1,this._ts))return this._start=w,bv(this),this.render(i,s,o);this._onUpdate&&!s&&As(this,"onUpdate",!0),(c===A&&this._tTime>=this.totalDuration()||!c&&a)&&(w===this._start||Math.abs(v)!==Math.abs(this._ts))&&(this._lock||((i||!l)&&(c===A&&this._ts>0||!c&&this._ts<0)&&$A(this,1),!s&&!(i<0&&!a)&&(c||a||!A)&&(As(this,c===A&&i>=0?"onComplete":"onReverseComplete",!0),this._prom&&!(c<A&&this.timeScale()>0)&&this._prom())))}return this},t.add=function(i,s){var o=this;if(Da(s)||(s=zi(this,s,i)),!(i instanceof bf)){if(Sr(i))return i.forEach(function(a){return o.add(a,s)}),this;if(or(i))return this.addLabel(i,s);if(vn(i))i=On.delayedCall(0,i);else return this}return this!==i?vo(this,i,s):this},t.getChildren=function(i,s,o,a){i===void 0&&(i=!0),s===void 0&&(s=!0),o===void 0&&(o=!0),a===void 0&&(a=-os);for(var A=[],l=this._first;l;)l._start>=a&&(l instanceof On?s&&A.push(l):(o&&A.push(l),i&&A.push.apply(A,l.getChildren(!0,s,o)))),l=l._next;return A},t.getById=function(i){for(var s=this.getChildren(1,1,1),o=s.length;o--;)if(s[o].vars.id===i)return s[o]},t.remove=function(i){return or(i)?this.removeLabel(i):vn(i)?this.killTweensOf(i):(Qv(this,i),i===this._recent&&(this._recent=this._last),zl(this))},t.totalTime=function(i,s){return arguments.length?(this._forcing=1,!this._dp&&this._ts&&(this._start=cr(xi.time-(this._ts>0?i/this._ts:(this.totalDuration()-i)/-this._ts))),r.prototype.totalTime.call(this,i,s),this._forcing=0,this):this._tTime},t.addLabel=function(i,s){return this.labels[i]=zi(this,s),this},t.removeLabel=function(i){return delete this.labels[i],this},t.addPause=function(i,s,o){var a=On.delayedCall(0,s||op,o);return a.data="isPause",this._hasPause=1,vo(this,a,zi(this,i))},t.removePause=function(i){var s=this._first;for(i=zi(this,i);s;)s._start===i&&s.data==="isPause"&&$A(s),s=s._next},t.killTweensOf=function(i,s,o){for(var a=this.getTweensOf(i,o),A=a.length;A--;)xA!==a[A]&&a[A].kill(i,s);return this},t.getTweensOf=function(i,s){for(var o=[],a=as(i),A=this._first,l=Da(s),c;A;)A instanceof On?ite(A._targets,a)&&(l?(!xA||A._initted&&A._ts)&&A.globalTime(0)<=s&&A.globalTime(A.totalDuration())>s:!s||A.isActive())&&o.push(A):(c=A.getTweensOf(a,s)).length&&o.push.apply(o,c),A=A._next;return o},t.tweenTo=function(i,s){s=s||{};var o=this,a=zi(o,i),A=s,l=A.startAt,c=A.onStart,u=A.onStartParams,f=A.immediateRender,d,p=On.to(o,ms({ease:s.ease||"none",lazy:!1,immediateRender:!1,time:a,overwrite:"auto",duration:s.duration||Math.abs((a-(l&&"time"in l?l.time:o._time))/o.timeScale())||zt,onStart:function(){if(o.pause(),!d){var m=s.duration||Math.abs((a-(l&&"time"in l?l.time:o._time))/o.timeScale());p._dur!==m&&xf(p,m,0,1).render(p._time,!0,!0),d=1}c&&c.apply(p,u||[])}},s));return f?p.render(0):p},t.tweenFromTo=function(i,s,o){return this.tweenTo(s,ms({startAt:{time:zi(this,i)}},o))},t.recent=function(){return this._recent},t.nextLabel=function(i){return i===void 0&&(i=this._time),W_(this,zi(this,i))},t.previousLabel=function(i){return i===void 0&&(i=this._time),W_(this,zi(this,i),1)},t.currentLabel=function(i){return arguments.length?this.seek(i,!0):this.previousLabel(this._time+zt)},t.shiftChildren=function(i,s,o){o===void 0&&(o=0);for(var a=this._first,A=this.labels,l;a;)a._start>=o&&(a._start+=i,a._end+=i),a=a._next;if(s)for(l in A)A[l]>=o&&(A[l]+=i);return zl(this)},t.invalidate=function(i){var s=this._first;for(this._lock=0;s;)s.invalidate(i),s=s._next;return r.prototype.invalidate.call(this,i)},t.clear=function(i){i===void 0&&(i=!0);for(var s=this._first,o;s;)o=s._next,this.remove(s),s=o;return this._dp&&(this._time=this._tTime=this._pTime=0),i&&(this.labels={}),zl(this)},t.totalDuration=function(i){var s=0,o=this,a=o._last,A=os,l,c,u;if(arguments.length)return o.timeScale((o._repeat<0?o.duration():o.totalDuration())/(o.reversed()?-i:i));if(o._dirty){for(u=o.parent;a;)l=a._prev,a._dirty&&a.totalDuration(),c=a._start,c>A&&o._sort&&a._ts&&!o._lock?(o._lock=1,vo(o,a,c-a._delay,1)._lock=0):A=c,c<0&&a._ts&&(s-=c,(!u&&!o._dp||u&&u.smoothChildTiming)&&(o._start+=c/o._ts,o._time-=c,o._tTime-=c),o.shiftChildren(-c,!1,-1/0),A=0),a._end>s&&a._ts&&(s=a._end),a=l;xf(o,o===ln&&o._time>s?o._time:s,1,1),o._dirty=0}return o._tDur},e.updateRoot=function(i){if(ln._ts&&(ak(ln,uB(i,ln)),sk=xi.frame),xi.frame>=V_){V_+=_i.autoSleep||120;var s=ln._first;if((!s||!s._ts)&&_i.autoSleep&&xi._listeners.length<2){for(;s&&!s._ts;)s=s._next;s||xi.sleep()}}},e}(bf);ms(ti.prototype,{_lock:0,_hasPause:0,_forcing:0});var bte=function(e,t,n,i,s,o,a){var A=new li(this._pt,e,t,0,1,Mk,null,s),l=0,c=0,u,f,d,p,h,m,g,B;for(A.b=n,A.e=i,n+="",i+="",(g=~i.indexOf("random("))&&(i=ap(i)),o&&(B=[n,i],o(B,e,t),n=B[0],i=B[1]),f=n.match(OC)||[];u=OC.exec(i);)p=u[0],h=i.substring(l,u.index),d?d=(d+1)%5:h.substr(-5)==="rgba("&&(d=1),p!==f[c++]&&(m=parseFloat(f[c-1])||0,A._pt={_next:A._pt,p:h||c===1?h:",",s:m,c:p.charAt(1)==="="?Xu(m,p)-m:parseFloat(p)-m,m:d&&d<4?Math.round:0},l=OC.lastIndex);return A.c=l<i.length?i.substring(l,i.length):"",A.fp=a,(ek.test(i)||g)&&(A.e=0),this._pt=A,A},jx=function(e,t,n,i,s,o,a,A,l,c){vn(i)&&(i=i(s||0,e,o));var u=e[t],f=n!=="get"?n:vn(u)?l?e[t.indexOf("set")||!vn(e["get"+t.substr(3)])?t:"get"+t.substr(3)](l):e[t]():u,d=vn(u)?l?Mte:_k:$x,p;if(or(i)&&(~i.indexOf("random(")&&(i=ap(i)),i.charAt(1)==="="&&(p=Xu(f,i)+(Ur(f)||0),(p||p===0)&&(i=p))),!c||f!==i||TI)return!isNaN(f*i)&&i!==""?(p=new li(this._pt,e,t,+f||0,i-(f||0),typeof u=="boolean"?Nte:Rk,0,d),l&&(p.fp=l),a&&p.modifier(a,this,e),this._pt=p):(!u&&!(t in e)&&zx(t,i),bte.call(this,e,t,f,i,d,A||_i.stringFilter,l))},Ete=function(e,t,n,i,s){if(vn(e)&&(e=Ih(e,s,t,n,i)),!ko(e)||e.style&&e.nodeType||Sr(e)||qD(e))return or(e)?Ih(e,s,t,n,i):e;var o={},a;for(a in e)o[a]=Ih(e[a],s,t,n,i);return o},bk=function(e,t,n,i,s,o){var a,A,l,c;if(Ii[e]&&(a=new Ii[e]).init(s,a.rawVars?t[e]:Ete(t[e],i,s,o,n),n,i,o)!==!1&&(n._pt=A=new li(n._pt,s,e,0,1,a.render,a,0,a.priority),n!==Eu))for(l=n._ptLookup[n._targets.indexOf(s)],c=a._props.length;c--;)l[a._props[c]]=A;return a},xA,TI,qx=function r(e,t,n){var i=e.vars,s=i.ease,o=i.startAt,a=i.immediateRender,A=i.lazy,l=i.onUpdate,c=i.onUpdateParams,u=i.callbackScope,f=i.runBackwards,d=i.yoyoEase,p=i.keyframes,h=i.autoRevert,m=e._dur,g=e._startAt,B=e._targets,v=e.parent,w=v&&v.data==="nested"?v.vars.targets:B,C=e._overwrite==="auto"&&!Gx,I=e.timeline,E,U,S,V,J,z,R,y,Q,_,L,T,Z;if(I&&(!p||!s)&&(s="none"),e._ease=Xl(s,If.ease),e._yEase=d?Ik(Xl(d===!0?s:d,If.ease)):0,d&&e._yoyo&&!e._repeat&&(d=e._yEase,e._yEase=e._ease,e._ease=d),e._from=!I&&!!i.runBackwards,!I||p&&!i.stagger){if(y=B[0]?Hl(B[0]).harness:0,T=y&&i[y.prop],E=cB(i,Xx),g&&(g._zTime<0&&g.progress(1),t<0&&f&&a&&!h?g.render(-1,!0):g.revert(f&&m?Km:nte),g._lazy=0),o){if($A(e._startAt=On.set(B,ms({data:"isStart",overwrite:!1,parent:v,immediateRender:!0,lazy:!g&&ai(A),startAt:null,delay:0,onUpdate:l,onUpdateParams:c,callbackScope:u,stagger:0},o))),e._startAt._dp=0,e._startAt._sat=e,t<0&&(Er||!a&&!h)&&e._startAt.revert(Km),a&&m&&t<=0&&n<=0){t&&(e._zTime=t);return}}else if(f&&m&&!g){if(t&&(a=!1),S=ms({overwrite:!1,data:"isFromStart",lazy:a&&!g&&ai(A),immediateRender:a,stagger:0,parent:v},E),T&&(S[y.prop]=T),$A(e._startAt=On.set(B,S)),e._startAt._dp=0,e._startAt._sat=e,t<0&&(Er?e._startAt.revert(Km):e._startAt.render(-1,!0)),e._zTime=t,!a)r(e._startAt,zt,zt);else if(!t)return}for(e._pt=e._ptCache=0,A=m&&ai(A)||A&&!m,U=0;U<B.length;U++){if(J=B[U],R=J._gsap||Kx(B)[U]._gsap,e._ptLookup[U]=_={},bI[R.id]&&WA.length&&lB(),L=w===B?U:w.indexOf(J),y&&(Q=new y).init(J,T||E,e,L,w)!==!1&&(e._pt=V=new li(e._pt,J,Q.name,0,1,Q.render,Q,0,Q.priority),Q._props.forEach(function(G){_[G]=V}),Q.priority&&(z=1)),!y||T)for(S in E)Ii[S]&&(Q=bk(S,E,e,L,J,w))?Q.priority&&(z=1):_[S]=V=jx.call(e,J,S,"get",E[S],L,w,0,i.stringFilter);e._op&&e._op[U]&&e.kill(J,e._op[U]),C&&e._pt&&(xA=e,ln.killTweensOf(J,_,e.globalTime(t)),Z=!e.parent,xA=0),e._pt&&A&&(bI[R.id]=1)}z&&Tk(e),e._onInit&&e._onInit(e)}e._onUpdate=l,e._initted=(!e._op||e._pt)&&!Z,p&&t<=0&&I.render(os,!0,!0)},Ste=function(e,t,n,i,s,o,a){var A=(e._pt&&e._ptCache||(e._ptCache={}))[t],l,c,u,f;if(!A)for(A=e._ptCache[t]=[],u=e._ptLookup,f=e._targets.length;f--;){if(l=u[f][t],l&&l.d&&l.d._pt)for(l=l.d._pt;l&&l.p!==t&&l.fp!==t;)l=l._next;if(!l)return TI=1,e.vars[t]="+=0",qx(e,a),TI=0,1;A.push(l)}for(f=A.length;f--;)c=A[f],l=c._pt||c,l.s=(i||i===0)&&!s?i:l.s+(i||0)+o*l.c,l.c=n-l.s,c.e&&(c.e=xn(n)+Ur(c.e)),c.b&&(c.b=l.s+Ur(c.b))},_te=function(e,t){var n=e[0]?Hl(e[0]).harness:0,i=n&&n.aliases,s,o,a,A;if(!i)return t;s=oc({},t);for(o in i)if(o in s)for(A=i[o].split(","),a=A.length;a--;)s[A[a]]=s[o];return s},Rte=function(e,t,n,i){var s=t.ease||i||"power1.inOut",o,a;if(Sr(t))a=n[e]||(n[e]=[]),t.forEach(function(A,l){return a.push({t:l/(t.length-1)*100,v:A,e:s})});else for(o in t)a=n[o]||(n[o]=[]),o==="ease"||a.push({t:parseFloat(e),v:t[o],e:s})},Ih=function(e,t,n,i,s){return vn(e)?e.call(t,n,i,s):or(e)&&~e.indexOf("random(")?ap(e):e},Ek=Yx+"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase,autoRevert",Sk={};Ai(Ek+",id,stagger,delay,duration,paused,scrollTrigger",function(r){return Sk[r]=1});var On=function(r){YD(e,r);function e(n,i,s,o){var a;typeof i=="number"&&(s.duration=i,i=s,s=null),a=r.call(this,o?i:wh(i))||this;var A=a.vars,l=A.duration,c=A.delay,u=A.immediateRender,f=A.stagger,d=A.overwrite,p=A.keyframes,h=A.defaults,m=A.scrollTrigger,g=A.yoyoEase,B=i.parent||ln,v=(Sr(n)||qD(n)?Da(n[0]):"length"in i)?[n]:as(n),w,C,I,E,U,S,V,J;if(a._targets=v.length?Kx(v):AB("GSAP target "+n+" not found. https://greensock.com",!_i.nullTargetWarn)||[],a._ptLookup=[],a._overwrite=d,p||f||om(l)||om(c)){if(i=a.vars,w=a.timeline=new ti({data:"nested",defaults:h||{},targets:B&&B.data==="nested"?B.vars.targets:v}),w.kill(),w.parent=w._dp=da(a),w._start=0,f||om(l)||om(c)){if(E=v.length,V=f&&gk(f),ko(f))for(U in f)~Ek.indexOf(U)&&(J||(J={}),J[U]=f[U]);for(C=0;C<E;C++)I=cB(i,Sk),I.stagger=0,g&&(I.yoyoEase=g),J&&oc(I,J),S=v[C],I.duration=+Ih(l,da(a),C,S,v),I.delay=(+Ih(c,da(a),C,S,v)||0)-a._delay,!f&&E===1&&I.delay&&(a._delay=c=I.delay,a._start+=c,I.delay=0),w.to(S,I,V?V(C,S,v):0),w._ease=xt.none;w.duration()?l=c=0:a.timeline=0}else if(p){wh(ms(w.vars.defaults,{ease:"none"})),w._ease=Xl(p.ease||i.ease||"none");var z=0,R,y,Q;if(Sr(p))p.forEach(function(_){return w.to(v,_,">")}),w.duration();else{I={};for(U in p)U==="ease"||U==="easeEach"||Rte(U,p[U],I,p.easeEach);for(U in I)for(R=I[U].sort(function(_,L){return _.t-L.t}),z=0,C=0;C<R.length;C++)y=R[C],Q={ease:y.e,duration:(y.t-(C?R[C-1].t:0))/100*l},Q[U]=y.v,w.to(v,Q,z),z+=Q.duration;w.duration()<l&&w.to({},{duration:l-w.duration()})}}l||a.duration(l=w.duration())}else a.timeline=0;return d===!0&&!Gx&&(xA=da(a),ln.killTweensOf(v),xA=0),vo(B,da(a),s),i.reversed&&a.reverse(),i.paused&&a.paused(!0),(u||!l&&!p&&a._start===cr(B._time)&&ai(u)&&Ate(da(a))&&B.data!=="nested")&&(a._tTime=-zt,a.render(Math.max(0,-c)||0)),m&&fk(da(a),m),a}var t=e.prototype;return t.render=function(i,s,o){var a=this._time,A=this._tDur,l=this._dur,c=i<0,u=i>A-zt&&!c?A:i<zt?0:i,f,d,p,h,m,g,B,v,w;if(!l)cte(this,i,s,o);else if(u!==this._tTime||!i||o||!this._initted&&this._tTime||this._startAt&&this._zTime<0!==c){if(f=u,v=this.timeline,this._repeat){if(h=l+this._rDelay,this._repeat<-1&&c)return this.totalTime(h*100+i,s,o);if(f=cr(u%h),u===A?(p=this._repeat,f=l):(p=~~(u/h),p&&p===u/h&&(f=l,p--),f>l&&(f=l)),g=this._yoyo&&p&1,g&&(w=this._yEase,f=l-f),m=Uf(this._tTime,h),f===a&&!o&&this._initted)return this._tTime=u,this;p!==m&&(v&&this._yEase&&Uk(v,g),this.vars.repeatRefresh&&!g&&!this._lock&&(this._lock=o=1,this.render(cr(h*p),!0).invalidate()._lock=0))}if(!this._initted){if(dk(this,c?i:f,o,s,u))return this._tTime=0,this;if(a!==this._time)return this;if(l!==this._dur)return this.render(i,s,o)}if(this._tTime=u,this._time=f,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=B=(w||this._ease)(f/l),this._from&&(this.ratio=B=1-B),f&&!a&&!s&&(As(this,"onStart"),this._tTime!==u))return this;for(d=this._pt;d;)d.r(B,d.d),d=d._next;v&&v.render(i<0?i:!f&&g?-zt:v._dur*v._ease(f/this._dur),s,o)||this._startAt&&(this._zTime=i),this._onUpdate&&!s&&(c&&EI(this,i,s,o),As(this,"onUpdate")),this._repeat&&p!==m&&this.vars.onRepeat&&!s&&this.parent&&As(this,"onRepeat"),(u===this._tDur||!u)&&this._tTime===u&&(c&&!this._onUpdate&&EI(this,i,!0,!0),(i||!l)&&(u===this._tDur&&this._ts>0||!u&&this._ts<0)&&$A(this,1),!s&&!(c&&!a)&&(u||a||g)&&(As(this,u===A?"onComplete":"onReverseComplete",!0),this._prom&&!(u<A&&this.timeScale()>0)&&this._prom()))}return this},t.targets=function(){return this._targets},t.invalidate=function(i){return(!i||!this.vars.runBackwards)&&(this._startAt=0),this._pt=this._op=this._onUpdate=this._lazy=this.ratio=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(i),r.prototype.invalidate.call(this,i)},t.resetTo=function(i,s,o,a){Ap||xi.wake(),this._ts||this.play();var A=Math.min(this._dur,(this._dp._time-this._start)*this._ts),l;return this._initted||qx(this,A),l=this._ease(A/this._dur),Ste(this,i,s,o,a,l,A)?this.resetTo(i,s,o,a):(Ev(this,0),this.parent||ck(this._dp,this,"_first","_last",this._dp._sort?"_start":0),this.render(0))},t.kill=function(i,s){if(s===void 0&&(s="all"),!i&&(!s||s==="all"))return this._lazy=this._pt=0,this.parent?nh(this):this;if(this.timeline){var o=this.timeline.totalDuration();return this.timeline.killTweensOf(i,s,xA&&xA.vars.overwrite!==!0)._first||nh(this),this.parent&&o!==this.timeline.totalDuration()&&xf(this,this._dur*this.timeline._tDur/o,0,1),this}var a=this._targets,A=i?as(i):a,l=this._ptLookup,c=this._pt,u,f,d,p,h,m,g;if((!s||s==="all")&&ote(a,A))return s==="all"&&(this._pt=0),nh(this);for(u=this._op=this._op||[],s!=="all"&&(or(s)&&(h={},Ai(s,function(B){return h[B]=1}),s=h),s=_te(a,s)),g=a.length;g--;)if(~A.indexOf(a[g])){f=l[g],s==="all"?(u[g]=s,p=f,d={}):(d=u[g]=u[g]||{},p=s);for(h in p)m=f&&f[h],m&&((!("kill"in m.d)||m.d.kill(h)===!0)&&Qv(this,m,"_pt"),delete f[h]),d!=="all"&&(d[h]=1)}return this._initted&&!this._pt&&c&&nh(this),this},e.to=function(i,s){return new e(i,s,arguments[2])},e.from=function(i,s){return Fh(1,arguments)},e.delayedCall=function(i,s,o,a){return new e(s,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay:i,onComplete:s,onReverseComplete:s,onCompleteParams:o,onReverseCompleteParams:o,callbackScope:a})},e.fromTo=function(i,s,o){return Fh(2,arguments)},e.set=function(i,s){return s.duration=0,s.repeatDelay||(s.repeat=0),new e(i,s)},e.killTweensOf=function(i,s,o){return ln.killTweensOf(i,s,o)},e}(bf);ms(On.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0});Ai("staggerTo,staggerFrom,staggerFromTo",function(r){On[r]=function(){var e=new ti,t=_I.call(arguments,0);return t.splice(r==="staggerFromTo"?5:4,0,0),e[r].apply(e,t)}});var $x=function(e,t,n){return e[t]=n},_k=function(e,t,n){return e[t](n)},Mte=function(e,t,n,i){return e[t](i.fp,n)},Tte=function(e,t,n){return e.setAttribute(t,n)},eQ=function(e,t){return vn(e[t])?_k:Ox(e[t])&&e.setAttribute?Tte:$x},Rk=function(e,t){return t.set(t.t,t.p,Math.round((t.s+t.c*e)*1e6)/1e6,t)},Nte=function(e,t){return t.set(t.t,t.p,!!(t.s+t.c*e),t)},Mk=function(e,t){var n=t._pt,i="";if(!e&&t.b)i=t.b;else if(e===1&&t.e)i=t.e;else{for(;n;)i=n.p+(n.m?n.m(n.s+n.c*e):Math.round((n.s+n.c*e)*1e4)/1e4)+i,n=n._next;i+=t.c}t.set(t.t,t.p,i,t)},tQ=function(e,t){for(var n=t._pt;n;)n.r(e,n.d),n=n._next},Vte=function(e,t,n,i){for(var s=this._pt,o;s;)o=s._next,s.p===i&&s.modifier(e,t,n),s=o},Dte=function(e){for(var t=this._pt,n,i;t;)i=t._next,t.p===e&&!t.op||t.op===e?Qv(this,t,"_pt"):t.dep||(n=1),t=i;return!n},kte=function(e,t,n,i){i.mSet(e,t,i.m.call(i.tween,n,i.mt),i)},Tk=function(e){for(var t=e._pt,n,i,s,o;t;){for(n=t._next,i=s;i&&i.pr>t.pr;)i=i._next;(t._prev=i?i._prev:o)?t._prev._next=t:s=t,(t._next=i)?i._prev=t:o=t,t=n}e._pt=s},li=function(){function r(t,n,i,s,o,a,A,l,c){this.t=n,this.s=s,this.c=o,this.p=i,this.r=a||Rk,this.d=A||this,this.set=l||$x,this.pr=c||0,this._next=t,t&&(t._prev=this)}var e=r.prototype;return e.modifier=function(n,i,s){this.mSet=this.mSet||this.set,this.set=kte,this.m=n,this.mt=s,this.tween=i},r}();Ai(Yx+"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger",function(r){return Xx[r]=1});Ni.TweenMax=Ni.TweenLite=On;Ni.TimelineLite=Ni.TimelineMax=ti;ln=new ti({sortChildren:!1,defaults:If,autoRemoveChildren:!0,id:"root",smoothChildTiming:!0});_i.stringFilter=Fk;var Ef=[],qm={},Lte=[],P_=0,KC=function(e){return(qm[e]||Lte).map(function(t){return t()})},NI=function(){var e=Date.now(),t=[];e-P_>2&&(KC("matchMediaInit"),Ef.forEach(function(n){var i=n.queries,s=n.conditions,o,a,A,l;for(a in i)o=ji.matchMedia(i[a]).matches,o&&(A=1),o!==s[a]&&(s[a]=o,l=1);l&&(n.revert(),A&&t.push(n))}),KC("matchMediaRevert"),t.forEach(function(n){return n.onMatch(n)}),P_=e,KC("matchMedia"))},Nk=function(){function r(t,n){this.selector=n&&RI(n),this.data=[],this._r=[],this.isReverted=!1,t&&this.add(t)}var e=r.prototype;return e.add=function(n,i,s){vn(n)&&(s=i,i=n,n=vn);var o=this,a=function(){var l=Dn,c=o.selector,u;return l&&l!==o&&l.data.push(o),s&&(o.selector=RI(s)),Dn=o,u=i.apply(o,arguments),vn(u)&&o._r.push(u),Dn=l,o.selector=c,o.isReverted=!1,u};return o.last=a,n===vn?a(o):n?o[n]=a:a},e.ignore=function(n){var i=Dn;Dn=null,n(this),Dn=i},e.getTweens=function(){var n=[];return this.data.forEach(function(i){return i instanceof r?n.push.apply(n,i.getTweens()):i instanceof On&&!(i.parent&&i.parent.data==="nested")&&n.push(i)}),n},e.clear=function(){this._r.length=this.data.length=0},e.kill=function(n,i){var s=this;if(n){var o=this.getTweens();this.data.forEach(function(A){A.data==="isFlip"&&(A.revert(),A.getChildren(!0,!0,!1).forEach(function(l){return o.splice(o.indexOf(l),1)}))}),o.map(function(A){return{g:A.globalTime(0),t:A}}).sort(function(A,l){return l.g-A.g||-1}).forEach(function(A){return A.t.revert(n)}),this.data.forEach(function(A){return!(A instanceof bf)&&A.revert&&A.revert(n)}),this._r.forEach(function(A){return A(n,s)}),this.isReverted=!0}else this.data.forEach(function(A){return A.kill&&A.kill()});if(this.clear(),i){var a=Ef.indexOf(this);~a&&Ef.splice(a,1)}},e.revert=function(n){this.kill(n||{})},r}(),Wte=function(){function r(t){this.contexts=[],this.scope=t}var e=r.prototype;return e.add=function(n,i,s){ko(n)||(n={matches:n});var o=new Nk(0,s||this.scope),a=o.conditions={},A,l,c;this.contexts.push(o),i=o.add("onMatch",i),o.queries=n;for(l in n)l==="all"?c=1:(A=ji.matchMedia(n[l]),A&&(Ef.indexOf(o)<0&&Ef.push(o),(a[l]=A.matches)&&(c=1),A.addListener?A.addListener(NI):A.addEventListener("change",NI)));return c&&i(o),this},e.revert=function(n){this.kill(n||{})},e.kill=function(n){this.contexts.forEach(function(i){return i.kill(n,!0)})},r}(),fB={registerPlugin:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];t.forEach(function(i){return Cte(i)})},timeline:function(e){return new ti(e)},getTweensOf:function(e,t){return ln.getTweensOf(e,t)},getProperty:function(e,t,n,i){or(e)&&(e=as(e)[0]);var s=Hl(e||{}).get,o=n?lk:Ak;return n==="native"&&(n=""),e&&(t?o((Ii[t]&&Ii[t].get||s)(e,t,n,i)):function(a,A,l){return o((Ii[a]&&Ii[a].get||s)(e,a,A,l))})},quickSetter:function(e,t,n){if(e=as(e),e.length>1){var i=e.map(function(c){return Vi.quickSetter(c,t,n)}),s=i.length;return function(c){for(var u=s;u--;)i[u](c)}}e=e[0]||{};var o=Ii[t],a=Hl(e),A=a.harness&&(a.harness.aliases||{})[t]||t,l=o?function(c){var u=new o;Eu._pt=0,u.init(e,n?c+n:c,Eu,0,[e]),u.render(1,u),Eu._pt&&tQ(1,Eu)}:a.set(e,A);return o?l:function(c){return l(e,A,n?c+n:c,a,1)}},quickTo:function(e,t,n){var i,s=Vi.to(e,oc((i={},i[t]="+=0.1",i.paused=!0,i),n||{})),o=function(A,l,c){return s.resetTo(t,A,l,c)};return o.tween=s,o},isTweening:function(e){return ln.getTweensOf(e,!0).length>0},defaults:function(e){return e&&e.ease&&(e.ease=Xl(e.ease,If.ease)),D_(If,e||{})},config:function(e){return D_(_i,e||{})},registerEffect:function(e){var t=e.name,n=e.effect,i=e.plugins,s=e.defaults,o=e.extendTimeline;(i||"").split(",").forEach(function(a){return a&&!Ii[a]&&!Ni[a]&&AB(t+" effect requires "+a+" plugin.")}),HC[t]=function(a,A,l){return n(as(a),ms(A||{},s),l)},o&&(ti.prototype[t]=function(a,A,l){return this.add(HC[t](a,ko(A)?A:(l=A)&&{},this),l)})},registerEase:function(e,t){xt[e]=Xl(t)},parseEase:function(e,t){return arguments.length?Xl(e,t):xt},getById:function(e){return ln.getById(e)},exportRoot:function(e,t){e===void 0&&(e={});var n=new ti(e),i,s;for(n.smoothChildTiming=ai(e.smoothChildTiming),ln.remove(n),n._dp=0,n._time=n._tTime=ln._time,i=ln._first;i;)s=i._next,(t||!(!i._dur&&i instanceof On&&i.vars.onComplete===i._targets[0]))&&vo(n,i,i._start-i._delay),i=s;return vo(ln,n,0),n},context:function(e,t){return e?new Nk(e,t):Dn},matchMedia:function(e){return new Wte(e)},matchMediaRefresh:function(){return Ef.forEach(function(e){var t=e.conditions,n,i;for(i in t)t[i]&&(t[i]=!1,n=1);n&&e.revert()})||NI()},addEventListener:function(e,t){var n=qm[e]||(qm[e]=[]);~n.indexOf(t)||n.push(t)},removeEventListener:function(e,t){var n=qm[e],i=n&&n.indexOf(t);i>=0&&n.splice(i,1)},utils:{wrap:Bte,wrapYoyo:vte,distribute:gk,random:Bk,snap:mk,normalize:mte,getUnit:Ur,clamp:dte,splitColor:Ck,toArray:as,selector:RI,mapRange:yk,pipe:pte,unitize:gte,interpolate:yte,shuffle:pk},install:rk,effects:HC,ticker:xi,updateRoot:ti.updateRoot,plugins:Ii,globalTimeline:ln,core:{PropTween:li,globals:ik,Tween:On,Timeline:ti,Animation:bf,getCache:Hl,_removeLinkedListItem:Qv,reverting:function(){return Er},context:function(e){return e&&Dn&&(Dn.data.push(e),e._ctx=Dn),Dn},suppressOverwrites:function(e){return Gx=e}}};Ai("to,from,fromTo,delayedCall,set,killTweensOf",function(r){return fB[r]=On[r]});xi.add(ti.updateRoot);Eu=fB.to({},{duration:0});var Zte=function(e,t){for(var n=e._pt;n&&n.p!==t&&n.op!==t&&n.fp!==t;)n=n._next;return n},Pte=function(e,t){var n=e._targets,i,s,o;for(i in t)for(s=n.length;s--;)o=e._ptLookup[s][i],o&&(o=o.d)&&(o._pt&&(o=Zte(o,i)),o&&o.modifier&&o.modifier(t[i],e,n[s],i))},jC=function(e,t){return{name:e,rawVars:1,init:function(i,s,o){o._onInit=function(a){var A,l;if(or(s)&&(A={},Ai(s,function(c){return A[c]=1}),s=A),t){A={};for(l in s)A[l]=t(s[l]);s=A}Pte(a,s)}}}},Vi=fB.registerPlugin({name:"attr",init:function(e,t,n,i,s){var o,a,A;this.tween=n;for(o in t)A=e.getAttribute(o)||"",a=this.add(e,"setAttribute",(A||0)+"",t[o],i,s,0,0,o),a.op=o,a.b=A,this._props.push(o)},render:function(e,t){for(var n=t._pt;n;)Er?n.set(n.t,n.p,n.b,n):n.r(e,n.d),n=n._next}},{name:"endArray",init:function(e,t){for(var n=t.length;n--;)this.add(e,n,e[n]||0,t[n],0,0,0,0,0,1)}},jC("roundProps",MI),jC("modifiers"),jC("snap",mk))||fB;On.version=ti.version=Vi.version="3.11.4";nk=1;jD()&&Qf();xt.Power0;xt.Power1;xt.Power2;xt.Power3;xt.Power4;xt.Linear;xt.Quad;xt.Cubic;xt.Quart;xt.Quint;xt.Strong;xt.Elastic;xt.Back;xt.SteppedEase;xt.Bounce;xt.Sine;xt.Expo;xt.Circ;/*!
 * CSSPlugin 3.11.4
 * https://greensock.com
 *
 * Copyright 2008-2022, GreenSock. All rights reserved.
 * Subject to the terms at https://greensock.com/standard-license or for
 * Club GreenSock members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var J_,QA,Yu,nQ,kl,G_,rQ,Jte=function(){return typeof window<"u"},ka={},Ql=180/Math.PI,Ku=Math.PI/180,Yc=Math.atan2,O_=1e8,iQ=/([A-Z])/g,Gte=/(left|right|width|margin|padding|x)/i,Ote=/[\s,\(]\S/,Ia={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"},VI=function(e,t){return t.set(t.t,t.p,Math.round((t.s+t.c*e)*1e4)/1e4+t.u,t)},Hte=function(e,t){return t.set(t.t,t.p,e===1?t.e:Math.round((t.s+t.c*e)*1e4)/1e4+t.u,t)},zte=function(e,t){return t.set(t.t,t.p,e?Math.round((t.s+t.c*e)*1e4)/1e4+t.u:t.b,t)},Xte=function(e,t){var n=t.s+t.c*e;t.set(t.t,t.p,~~(n+(n<0?-.5:.5))+t.u,t)},Vk=function(e,t){return t.set(t.t,t.p,e?t.e:t.b,t)},Dk=function(e,t){return t.set(t.t,t.p,e!==1?t.b:t.e,t)},Yte=function(e,t,n){return e.style[t]=n},Kte=function(e,t,n){return e.style.setProperty(t,n)},jte=function(e,t,n){return e._gsap[t]=n},qte=function(e,t,n){return e._gsap.scaleX=e._gsap.scaleY=n},$te=function(e,t,n,i,s){var o=e._gsap;o.scaleX=o.scaleY=n,o.renderTransform(s,o)},ene=function(e,t,n,i,s){var o=e._gsap;o[t]=n,o.renderTransform(s,o)},un="transform",Ks=un+"Origin",tne=function(e,t){var n=this,i=this.target,s=i.style;if(e in ka){if(this.tfm=this.tfm||{},e!=="transform"&&(e=Ia[e]||e,~e.indexOf(",")?e.split(",").forEach(function(o){return n.tfm[o]=Ba(i,o)}):this.tfm[e]=i._gsap.x?i._gsap[e]:Ba(i,e)),this.props.indexOf(un)>=0)return;i._gsap.svg&&(this.svgo=i.getAttribute("data-svg-origin"),this.props.push(Ks,t,"")),e=un}(s||t)&&this.props.push(e,t,s[e])},kk=function(e){e.translate&&(e.removeProperty("translate"),e.removeProperty("scale"),e.removeProperty("rotate"))},nne=function(){var e=this.props,t=this.target,n=t.style,i=t._gsap,s,o;for(s=0;s<e.length;s+=3)e[s+1]?t[e[s]]=e[s+2]:e[s+2]?n[e[s]]=e[s+2]:n.removeProperty(e[s].replace(iQ,"-$1").toLowerCase());if(this.tfm){for(o in this.tfm)i[o]=this.tfm[o];i.svg&&(i.renderTransform(),t.setAttribute("data-svg-origin",this.svgo||"")),s=rQ(),s&&!s.isStart&&!n[un]&&(kk(n),i.uncache=1)}},Lk=function(e,t){var n={target:e,props:[],revert:nne,save:tne};return t&&t.split(",").forEach(function(i){return n.save(i)}),n},Wk,DI=function(e,t){var n=QA.createElementNS?QA.createElementNS((t||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),e):QA.createElement(e);return n.style?n:QA.createElement(e)},Ro=function r(e,t,n){var i=getComputedStyle(e);return i[t]||i.getPropertyValue(t.replace(iQ,"-$1").toLowerCase())||i.getPropertyValue(t)||!n&&r(e,Sf(t)||t,1)||""},H_="O,Moz,ms,Ms,Webkit".split(","),Sf=function(e,t,n){var i=t||kl,s=i.style,o=5;if(e in s&&!n)return e;for(e=e.charAt(0).toUpperCase()+e.substr(1);o--&&!(H_[o]+e in s););return o<0?null:(o===3?"ms":o>=0?H_[o]:"")+e},kI=function(){Jte()&&window.document&&(J_=window,QA=J_.document,Yu=QA.documentElement,kl=DI("div")||{style:{}},DI("div"),un=Sf(un),Ks=un+"Origin",kl.style.cssText="border-width:0;line-height:0;position:absolute;padding:0",Wk=!!Sf("perspective"),rQ=Vi.core.reverting,nQ=1)},qC=function r(e){var t=DI("svg",this.ownerSVGElement&&this.ownerSVGElement.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),n=this.parentNode,i=this.nextSibling,s=this.style.cssText,o;if(Yu.appendChild(t),t.appendChild(this),this.style.display="block",e)try{o=this.getBBox(),this._gsapBBox=this.getBBox,this.getBBox=r}catch{}else this._gsapBBox&&(o=this._gsapBBox());return n&&(i?n.insertBefore(this,i):n.appendChild(this)),Yu.removeChild(t),this.style.cssText=s,o},z_=function(e,t){for(var n=t.length;n--;)if(e.hasAttribute(t[n]))return e.getAttribute(t[n])},Zk=function(e){var t;try{t=e.getBBox()}catch{t=qC.call(e,!0)}return t&&(t.width||t.height)||e.getBBox===qC||(t=qC.call(e,!0)),t&&!t.width&&!t.x&&!t.y?{x:+z_(e,["x","cx","x1"])||0,y:+z_(e,["y","cy","y1"])||0,width:0,height:0}:t},Pk=function(e){return!!(e.getCTM&&(!e.parentNode||e.ownerSVGElement)&&Zk(e))},lp=function(e,t){if(t){var n=e.style;t in ka&&t!==Ks&&(t=un),n.removeProperty?((t.substr(0,2)==="ms"||t.substr(0,6)==="webkit")&&(t="-"+t),n.removeProperty(t.replace(iQ,"-$1").toLowerCase())):n.removeAttribute(t)}},bA=function(e,t,n,i,s,o){var a=new li(e._pt,t,n,0,1,o?Dk:Vk);return e._pt=a,a.b=i,a.e=s,e._props.push(n),a},X_={deg:1,rad:1,turn:1},rne={grid:1,flex:1},el=function r(e,t,n,i){var s=parseFloat(n)||0,o=(n+"").trim().substr((s+"").length)||"px",a=kl.style,A=Gte.test(t),l=e.tagName.toLowerCase()==="svg",c=(l?"client":"offset")+(A?"Width":"Height"),u=100,f=i==="px",d=i==="%",p,h,m,g;return i===o||!s||X_[i]||X_[o]?s:(o!=="px"&&!f&&(s=r(e,t,n,"px")),g=e.getCTM&&Pk(e),(d||o==="%")&&(ka[t]||~t.indexOf("adius"))?(p=g?e.getBBox()[A?"width":"height"]:e[c],xn(d?s/p*u:s/100*p)):(a[A?"width":"height"]=u+(f?o:i),h=~t.indexOf("adius")||i==="em"&&e.appendChild&&!l?e:e.parentNode,g&&(h=(e.ownerSVGElement||{}).parentNode),(!h||h===QA||!h.appendChild)&&(h=QA.body),m=h._gsap,m&&d&&m.width&&A&&m.time===xi.time&&!m.uncache?xn(s/m.width*u):((d||o==="%")&&!rne[Ro(h,"display")]&&(a.position=Ro(e,"position")),h===e&&(a.position="static"),h.appendChild(kl),p=kl[c],h.removeChild(kl),a.position="absolute",A&&d&&(m=Hl(h),m.time=xi.time,m.width=h[c]),xn(f?p*s/u:p&&s?u/p*s:0))))},Ba=function(e,t,n,i){var s;return nQ||kI(),t in Ia&&t!=="transform"&&(t=Ia[t],~t.indexOf(",")&&(t=t.split(",")[0])),ka[t]&&t!=="transform"?(s=up(e,i),s=t!=="transformOrigin"?s[t]:s.svg?s.origin:hB(Ro(e,Ks))+" "+s.zOrigin+"px"):(s=e.style[t],(!s||s==="auto"||i||~(s+"").indexOf("calc("))&&(s=dB[t]&&dB[t](e,t,n)||Ro(e,t)||ok(e,t)||(t==="opacity"?1:0))),n&&!~(s+"").trim().indexOf(" ")?el(e,t,s,n)+n:s},ine=function(e,t,n,i){if(!n||n==="none"){var s=Sf(t,e,1),o=s&&Ro(e,s,1);o&&o!==n?(t=s,n=o):t==="borderColor"&&(n=Ro(e,"borderTopColor"))}var a=new li(this._pt,e.style,t,0,1,Mk),A=0,l=0,c,u,f,d,p,h,m,g,B,v,w,C;if(a.b=n,a.e=i,n+="",i+="",i==="auto"&&(e.style[t]=i,i=Ro(e,t)||i,e.style[t]=n),c=[n,i],Fk(c),n=c[0],i=c[1],f=n.match(bu)||[],C=i.match(bu)||[],C.length){for(;u=bu.exec(i);)m=u[0],B=i.substring(A,u.index),p?p=(p+1)%5:(B.substr(-5)==="rgba("||B.substr(-5)==="hsla(")&&(p=1),m!==(h=f[l++]||"")&&(d=parseFloat(h)||0,w=h.substr((d+"").length),m.charAt(1)==="="&&(m=Xu(d,m)+w),g=parseFloat(m),v=m.substr((g+"").length),A=bu.lastIndex-v.length,v||(v=v||_i.units[t]||w,A===i.length&&(i+=v,a.e+=v)),w!==v&&(d=el(e,t,h,v)||0),a._pt={_next:a._pt,p:B||l===1?B:",",s:d,c:g-d,m:p&&p<4||t==="zIndex"?Math.round:0});a.c=A<i.length?i.substring(A,i.length):""}else a.r=t==="display"&&i==="none"?Dk:Vk;return ek.test(i)&&(a.e=0),this._pt=a,a},Y_={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},sne=function(e){var t=e.split(" "),n=t[0],i=t[1]||"50%";return(n==="top"||n==="bottom"||i==="left"||i==="right")&&(e=n,n=i,i=e),t[0]=Y_[n]||n,t[1]=Y_[i]||i,t.join(" ")},one=function(e,t){if(t.tween&&t.tween._time===t.tween._dur){var n=t.t,i=n.style,s=t.u,o=n._gsap,a,A,l;if(s==="all"||s===!0)i.cssText="",A=1;else for(s=s.split(","),l=s.length;--l>-1;)a=s[l],ka[a]&&(A=1,a=a==="transformOrigin"?Ks:un),lp(n,a);A&&(lp(n,un),o&&(o.svg&&n.removeAttribute("transform"),up(n,1),o.uncache=1,kk(i)))}},dB={clearProps:function(e,t,n,i,s){if(s.data!=="isFromStart"){var o=e._pt=new li(e._pt,t,n,0,0,one);return o.u=i,o.pr=-10,o.tween=s,e._props.push(n),1}}},cp=[1,0,0,1,0,0],Jk={},Gk=function(e){return e==="matrix(1, 0, 0, 1, 0, 0)"||e==="none"||!e},K_=function(e){var t=Ro(e,un);return Gk(t)?cp:t.substr(7).match($D).map(xn)},sQ=function(e,t){var n=e._gsap||Hl(e),i=e.style,s=K_(e),o,a,A,l;return n.svg&&e.getAttribute("transform")?(A=e.transform.baseVal.consolidate().matrix,s=[A.a,A.b,A.c,A.d,A.e,A.f],s.join(",")==="1,0,0,1,0,0"?cp:s):(s===cp&&!e.offsetParent&&e!==Yu&&!n.svg&&(A=i.display,i.display="block",o=e.parentNode,(!o||!e.offsetParent)&&(l=1,a=e.nextElementSibling,Yu.appendChild(e)),s=K_(e),A?i.display=A:lp(e,"display"),l&&(a?o.insertBefore(e,a):o?o.appendChild(e):Yu.removeChild(e))),t&&s.length>6?[s[0],s[1],s[4],s[5],s[12],s[13]]:s)},LI=function(e,t,n,i,s,o){var a=e._gsap,A=s||sQ(e,!0),l=a.xOrigin||0,c=a.yOrigin||0,u=a.xOffset||0,f=a.yOffset||0,d=A[0],p=A[1],h=A[2],m=A[3],g=A[4],B=A[5],v=t.split(" "),w=parseFloat(v[0])||0,C=parseFloat(v[1])||0,I,E,U,S;n?A!==cp&&(E=d*m-p*h)&&(U=w*(m/E)+C*(-h/E)+(h*B-m*g)/E,S=w*(-p/E)+C*(d/E)-(d*B-p*g)/E,w=U,C=S):(I=Zk(e),w=I.x+(~v[0].indexOf("%")?w/100*I.width:w),C=I.y+(~(v[1]||v[0]).indexOf("%")?C/100*I.height:C)),i||i!==!1&&a.smooth?(g=w-l,B=C-c,a.xOffset=u+(g*d+B*h)-g,a.yOffset=f+(g*p+B*m)-B):a.xOffset=a.yOffset=0,a.xOrigin=w,a.yOrigin=C,a.smooth=!!i,a.origin=t,a.originIsAbsolute=!!n,e.style[Ks]="0px 0px",o&&(bA(o,a,"xOrigin",l,w),bA(o,a,"yOrigin",c,C),bA(o,a,"xOffset",u,a.xOffset),bA(o,a,"yOffset",f,a.yOffset)),e.setAttribute("data-svg-origin",w+" "+C)},up=function(e,t){var n=e._gsap||new Qk(e);if("x"in n&&!t&&!n.uncache)return n;var i=e.style,s=n.scaleX<0,o="px",a="deg",A=getComputedStyle(e),l=Ro(e,Ks)||"0",c,u,f,d,p,h,m,g,B,v,w,C,I,E,U,S,V,J,z,R,y,Q,_,L,T,Z,G,D,x,P,oe,M;return c=u=f=h=m=g=B=v=w=0,d=p=1,n.svg=!!(e.getCTM&&Pk(e)),A.translate&&((A.translate!=="none"||A.scale!=="none"||A.rotate!=="none")&&(i[un]=(A.translate!=="none"?"translate3d("+(A.translate+" 0 0").split(" ").slice(0,3).join(", ")+") ":"")+(A.rotate!=="none"?"rotate("+A.rotate+") ":"")+(A.scale!=="none"?"scale("+A.scale.split(" ").join(",")+") ":"")+(A[un]!=="none"?A[un]:"")),i.scale=i.rotate=i.translate="none"),E=sQ(e,n.svg),n.svg&&(n.uncache?(T=e.getBBox(),l=n.xOrigin-T.x+"px "+(n.yOrigin-T.y)+"px",L=""):L=!t&&e.getAttribute("data-svg-origin"),LI(e,L||l,!!L||n.originIsAbsolute,n.smooth!==!1,E)),C=n.xOrigin||0,I=n.yOrigin||0,E!==cp&&(J=E[0],z=E[1],R=E[2],y=E[3],c=Q=E[4],u=_=E[5],E.length===6?(d=Math.sqrt(J*J+z*z),p=Math.sqrt(y*y+R*R),h=J||z?Yc(z,J)*Ql:0,B=R||y?Yc(R,y)*Ql+h:0,B&&(p*=Math.abs(Math.cos(B*Ku))),n.svg&&(c-=C-(C*J+I*R),u-=I-(C*z+I*y))):(M=E[6],P=E[7],G=E[8],D=E[9],x=E[10],oe=E[11],c=E[12],u=E[13],f=E[14],U=Yc(M,x),m=U*Ql,U&&(S=Math.cos(-U),V=Math.sin(-U),L=Q*S+G*V,T=_*S+D*V,Z=M*S+x*V,G=Q*-V+G*S,D=_*-V+D*S,x=M*-V+x*S,oe=P*-V+oe*S,Q=L,_=T,M=Z),U=Yc(-R,x),g=U*Ql,U&&(S=Math.cos(-U),V=Math.sin(-U),L=J*S-G*V,T=z*S-D*V,Z=R*S-x*V,oe=y*V+oe*S,J=L,z=T,R=Z),U=Yc(z,J),h=U*Ql,U&&(S=Math.cos(U),V=Math.sin(U),L=J*S+z*V,T=Q*S+_*V,z=z*S-J*V,_=_*S-Q*V,J=L,Q=T),m&&Math.abs(m)+Math.abs(h)>359.9&&(m=h=0,g=180-g),d=xn(Math.sqrt(J*J+z*z+R*R)),p=xn(Math.sqrt(_*_+M*M)),U=Yc(Q,_),B=Math.abs(U)>2e-4?U*Ql:0,w=oe?1/(oe<0?-oe:oe):0),n.svg&&(L=e.getAttribute("transform"),n.forceCSS=e.setAttribute("transform","")||!Gk(Ro(e,un)),L&&e.setAttribute("transform",L))),Math.abs(B)>90&&Math.abs(B)<270&&(s?(d*=-1,B+=h<=0?180:-180,h+=h<=0?180:-180):(p*=-1,B+=B<=0?180:-180)),t=t||n.uncache,n.x=c-((n.xPercent=c&&(!t&&n.xPercent||(Math.round(e.offsetWidth/2)===Math.round(-c)?-50:0)))?e.offsetWidth*n.xPercent/100:0)+o,n.y=u-((n.yPercent=u&&(!t&&n.yPercent||(Math.round(e.offsetHeight/2)===Math.round(-u)?-50:0)))?e.offsetHeight*n.yPercent/100:0)+o,n.z=f+o,n.scaleX=xn(d),n.scaleY=xn(p),n.rotation=xn(h)+a,n.rotationX=xn(m)+a,n.rotationY=xn(g)+a,n.skewX=B+a,n.skewY=v+a,n.transformPerspective=w+o,(n.zOrigin=parseFloat(l.split(" ")[2])||0)&&(i[Ks]=hB(l)),n.xOffset=n.yOffset=0,n.force3D=_i.force3D,n.renderTransform=n.svg?Ane:Wk?Ok:ane,n.uncache=0,n},hB=function(e){return(e=e.split(" "))[0]+" "+e[1]},$C=function(e,t,n){var i=Ur(t);return xn(parseFloat(t)+parseFloat(el(e,"x",n+"px",i)))+i},ane=function(e,t){t.z="0px",t.rotationY=t.rotationX="0deg",t.force3D=0,Ok(e,t)},vl="0deg",Qd="0px",yl=") ",Ok=function(e,t){var n=t||this,i=n.xPercent,s=n.yPercent,o=n.x,a=n.y,A=n.z,l=n.rotation,c=n.rotationY,u=n.rotationX,f=n.skewX,d=n.skewY,p=n.scaleX,h=n.scaleY,m=n.transformPerspective,g=n.force3D,B=n.target,v=n.zOrigin,w="",C=g==="auto"&&e&&e!==1||g===!0;if(v&&(u!==vl||c!==vl)){var I=parseFloat(c)*Ku,E=Math.sin(I),U=Math.cos(I),S;I=parseFloat(u)*Ku,S=Math.cos(I),o=$C(B,o,E*S*-v),a=$C(B,a,-Math.sin(I)*-v),A=$C(B,A,U*S*-v+v)}m!==Qd&&(w+="perspective("+m+yl),(i||s)&&(w+="translate("+i+"%, "+s+"%) "),(C||o!==Qd||a!==Qd||A!==Qd)&&(w+=A!==Qd||C?"translate3d("+o+", "+a+", "+A+") ":"translate("+o+", "+a+yl),l!==vl&&(w+="rotate("+l+yl),c!==vl&&(w+="rotateY("+c+yl),u!==vl&&(w+="rotateX("+u+yl),(f!==vl||d!==vl)&&(w+="skew("+f+", "+d+yl),(p!==1||h!==1)&&(w+="scale("+p+", "+h+yl),B.style[un]=w||"translate(0, 0)"},Ane=function(e,t){var n=t||this,i=n.xPercent,s=n.yPercent,o=n.x,a=n.y,A=n.rotation,l=n.skewX,c=n.skewY,u=n.scaleX,f=n.scaleY,d=n.target,p=n.xOrigin,h=n.yOrigin,m=n.xOffset,g=n.yOffset,B=n.forceCSS,v=parseFloat(o),w=parseFloat(a),C,I,E,U,S;A=parseFloat(A),l=parseFloat(l),c=parseFloat(c),c&&(c=parseFloat(c),l+=c,A+=c),A||l?(A*=Ku,l*=Ku,C=Math.cos(A)*u,I=Math.sin(A)*u,E=Math.sin(A-l)*-f,U=Math.cos(A-l)*f,l&&(c*=Ku,S=Math.tan(l-c),S=Math.sqrt(1+S*S),E*=S,U*=S,c&&(S=Math.tan(c),S=Math.sqrt(1+S*S),C*=S,I*=S)),C=xn(C),I=xn(I),E=xn(E),U=xn(U)):(C=u,U=f,I=E=0),(v&&!~(o+"").indexOf("px")||w&&!~(a+"").indexOf("px"))&&(v=el(d,"x",o,"px"),w=el(d,"y",a,"px")),(p||h||m||g)&&(v=xn(v+p-(p*C+h*E)+m),w=xn(w+h-(p*I+h*U)+g)),(i||s)&&(S=d.getBBox(),v=xn(v+i/100*S.width),w=xn(w+s/100*S.height)),S="matrix("+C+","+I+","+E+","+U+","+v+","+w+")",d.setAttribute("transform",S),B&&(d.style[un]=S)},lne=function(e,t,n,i,s){var o=360,a=or(s),A=parseFloat(s)*(a&&~s.indexOf("rad")?Ql:1),l=A-i,c=i+l+"deg",u,f;return a&&(u=s.split("_")[1],u==="short"&&(l%=o,l!==l%(o/2)&&(l+=l<0?o:-o)),u==="cw"&&l<0?l=(l+o*O_)%o-~~(l/o)*o:u==="ccw"&&l>0&&(l=(l-o*O_)%o-~~(l/o)*o)),e._pt=f=new li(e._pt,t,n,i,l,Hte),f.e=c,f.u="deg",e._props.push(n),f},j_=function(e,t){for(var n in t)e[n]=t[n];return e},cne=function(e,t,n){var i=j_({},n._gsap),s="perspective,force3D,transformOrigin,svgOrigin",o=n.style,a,A,l,c,u,f,d,p;i.svg?(l=n.getAttribute("transform"),n.setAttribute("transform",""),o[un]=t,a=up(n,1),lp(n,un),n.setAttribute("transform",l)):(l=getComputedStyle(n)[un],o[un]=t,a=up(n,1),o[un]=l);for(A in ka)l=i[A],c=a[A],l!==c&&s.indexOf(A)<0&&(d=Ur(l),p=Ur(c),u=d!==p?el(n,A,l,p):parseFloat(l),f=parseFloat(c),e._pt=new li(e._pt,a,A,u,f-u,VI),e._pt.u=p||0,e._props.push(A));j_(a,i)};Ai("padding,margin,Width,Radius",function(r,e){var t="Top",n="Right",i="Bottom",s="Left",o=(e<3?[t,n,i,s]:[t+s,t+n,i+n,i+s]).map(function(a){return e<2?r+a:"border"+a+r});dB[e>1?"border"+r:r]=function(a,A,l,c,u){var f,d;if(arguments.length<4)return f=o.map(function(p){return Ba(a,p,l)}),d=f.join(" "),d.split(f[0]).length===5?f[0]:d;f=(c+"").split(" "),d={},o.forEach(function(p,h){return d[p]=f[h]=f[h]||f[(h-1)/2|0]}),a.init(A,d,u)}});var Hk={name:"css",register:kI,targetTest:function(e){return e.style&&e.nodeType},init:function(e,t,n,i,s){var o=this._props,a=e.style,A=n.vars.startAt,l,c,u,f,d,p,h,m,g,B,v,w,C,I,E,U;nQ||kI(),this.styles=this.styles||Lk(e),U=this.styles.props,this.tween=n;for(h in t)if(h!=="autoRound"&&(c=t[h],!(Ii[h]&&bk(h,t,n,i,e,s)))){if(d=typeof c,p=dB[h],d==="function"&&(c=c.call(n,i,e,s),d=typeof c),d==="string"&&~c.indexOf("random(")&&(c=ap(c)),p)p(this,e,h,c,n)&&(E=1);else if(h.substr(0,2)==="--")l=(getComputedStyle(e).getPropertyValue(h)+"").trim(),c+="",ZA.lastIndex=0,ZA.test(l)||(m=Ur(l),g=Ur(c)),g?m!==g&&(l=el(e,h,l,g)+g):m&&(c+=m),this.add(a,"setProperty",l,c,i,s,0,0,h),o.push(h),U.push(h,0,a[h]);else if(d!=="undefined"){if(A&&h in A?(l=typeof A[h]=="function"?A[h].call(n,i,e,s):A[h],or(l)&&~l.indexOf("random(")&&(l=ap(l)),Ur(l+"")||(l+=_i.units[h]||Ur(Ba(e,h))||""),(l+"").charAt(1)==="="&&(l=Ba(e,h))):l=Ba(e,h),f=parseFloat(l),B=d==="string"&&c.charAt(1)==="="&&c.substr(0,2),B&&(c=c.substr(2)),u=parseFloat(c),h in Ia&&(h==="autoAlpha"&&(f===1&&Ba(e,"visibility")==="hidden"&&u&&(f=0),U.push("visibility",0,a.visibility),bA(this,a,"visibility",f?"inherit":"hidden",u?"inherit":"hidden",!u)),h!=="scale"&&h!=="transform"&&(h=Ia[h],~h.indexOf(",")&&(h=h.split(",")[0]))),v=h in ka,v){if(this.styles.save(h),w||(C=e._gsap,C.renderTransform&&!t.parseTransform||up(e,t.parseTransform),I=t.smoothOrigin!==!1&&C.smooth,w=this._pt=new li(this._pt,a,un,0,1,C.renderTransform,C,0,-1),w.dep=1),h==="scale")this._pt=new li(this._pt,C,"scaleY",C.scaleY,(B?Xu(C.scaleY,B+u):u)-C.scaleY||0,VI),this._pt.u=0,o.push("scaleY",h),h+="X";else if(h==="transformOrigin"){U.push(Ks,0,a[Ks]),c=sne(c),C.svg?LI(e,c,0,I,0,this):(g=parseFloat(c.split(" ")[2])||0,g!==C.zOrigin&&bA(this,C,"zOrigin",C.zOrigin,g),bA(this,a,h,hB(l),hB(c)));continue}else if(h==="svgOrigin"){LI(e,c,1,I,0,this);continue}else if(h in Jk){lne(this,C,h,f,B?Xu(f,B+c):c);continue}else if(h==="smoothOrigin"){bA(this,C,"smooth",C.smooth,c);continue}else if(h==="force3D"){C[h]=c;continue}else if(h==="transform"){cne(this,c,e);continue}}else h in a||(h=Sf(h)||h);if(v||(u||u===0)&&(f||f===0)&&!Ote.test(c)&&h in a)m=(l+"").substr((f+"").length),u||(u=0),g=Ur(c)||(h in _i.units?_i.units[h]:m),m!==g&&(f=el(e,h,l,g)),this._pt=new li(this._pt,v?C:a,h,f,(B?Xu(f,B+u):u)-f,!v&&(g==="px"||h==="zIndex")&&t.autoRound!==!1?Xte:VI),this._pt.u=g||0,m!==g&&g!=="%"&&(this._pt.b=l,this._pt.r=zte);else if(h in a)ine.call(this,e,h,l,B?B+c:c);else if(h in e)this.add(e,h,l||e[h],B?B+c:c,i,s);else if(h!=="parseTransform"){zx(h,c);continue}v||(h in a?U.push(h,0,a[h]):U.push(h,1,l||e[h])),o.push(h)}}E&&Tk(this)},render:function(e,t){if(t.tween._time||!rQ())for(var n=t._pt;n;)n.r(e,n.d),n=n._next;else t.styles.revert()},get:Ba,aliases:Ia,getSetter:function(e,t,n){var i=Ia[t];return i&&i.indexOf(",")<0&&(t=i),t in ka&&t!==Ks&&(e._gsap.x||Ba(e,"x"))?n&&G_===n?t==="scale"?qte:jte:(G_=n||{})&&(t==="scale"?$te:ene):e.style&&!Ox(e.style[t])?Yte:~t.indexOf("-")?Kte:eQ(e,t)},core:{_removeProperty:lp,_getMatrix:sQ}};Vi.utils.checkPrefix=Sf;Vi.core.getStyleSaver=Lk;(function(r,e,t,n){var i=Ai(r+","+e+","+t,function(s){ka[s]=1});Ai(e,function(s){_i.units[s]="deg",Jk[s]=1}),Ia[i[13]]=r+","+e,Ai(n,function(s){var o=s.split(":");Ia[o[1]]=i[o[0]]})})("x,y,z,scale,scaleX,scaleY,xPercent,yPercent","rotation,rotationX,rotationY,skewX,skewY","transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective","0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY");Ai("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",function(r){_i.units[r]="px"});Vi.registerPlugin(Hk);var WI=Vi.registerPlugin(Hk)||Vi;WI.core.Tween;const Al=Ie.createContext(),une=r=>{const e=()=>{const Qe=new G0,Ue=new SV(16777215,.5);Qe.add(Ue);const xe=new bx(16777215,.5);return xe.position.set(0,1,1),Qe.add(xe),Qe},[t,n]=Ie.useState(e),[i,s]=Ie.useState(null),[o,a]=Ie.useState([]),[A,l]=Ie.useState(new St),[c,u]=Ie.useState(null),[f,d]=Ie.useState(null),[p,h]=Ie.useState([]),[m,g]=Ie.useState(!1),[B,v]=Ie.useState(!1),[w,C]=Ie.useState(""),[I,E]=Ie.useState(new Ve(1,1,1)),[U,S]=Ie.useState(null),[V,J]=Ie.useState(null),[z,R]=Ie.useState(null),[y,Q]=Ie.useState(null),[_,L]=Ie.useState({x:0,y:0}),[T,Z]=Ie.useState(),[G,D]=Ie.useState(null),[x,P]=Ie.useState(null),[oe,M]=Ie.useState(!1),k=Qe=>{S(Qe)},q=Qe=>{const Ue=Yee(Qe,G);Ue!=null&&(fe(),h(Ue))},ee=Qe=>{const Ue=localStorage.getItem(`${T.id}12223_${Qe}`);if(Ue){const xe=JSON.parse(Ue);q(xe)}else console.log("no local storage for "+Qe+" was found")},X=Qe=>{const Ue=$();localStorage.setItem(`${T.id}12223_${Qe}`,JSON.stringify(Ue))},$=()=>{const Qe={};return T.traits.forEach(Ue=>{var Fe,Ne,Ze;const xe=Ue.trait;Qe[xe]={traitInfo:(Fe=U[xe])==null?void 0:Fe.traitInfo,textureInfo:(Ne=U[xe])==null?void 0:Ne.textureInfo,colorInfo:(Ze=U[xe])==null?void 0:Ze.colorInfo}}),Qe.class=T.id,Qe},se=(Qe,Ue)=>{const xe=ae(Qe)||[];Ue.map(Fe=>{let Ne=!0;for(let Ze=0;Ze<xe.length;Ze++)if(xe[Ze].trait.trait===Fe.trait.trait){xe[Ze]=Fe,Ne=!1;break}Ne===!0&&xe.push(Fe)}),localStorage.setItem(`class2_${Qe}`,JSON.stringify(xe))},ae=Qe=>{const Ue=localStorage.getItem(`class2_${Qe}`);return Ue?JSON.parse(Ue):null},de=()=>{h(zD(T))},fe=()=>{if(U)for(const Qe in U)U[Qe].vrm&&II(U[Qe].vrm);k({})},ge=Qe=>{z&&(WI.to(z.target,{x:Qe.targetX??0,y:Qe.targetY??0,z:Qe.targetZ??0,duration:1}),WI.fromTo(z,{maxDistance:z.getDistance(),minDistance:z.getDistance(),minPolarAngle:z.getPolarAngle(),maxPolarAngle:z.getPolarAngle(),minAzimuthAngle:z.getAzimuthalAngle(),maxAzimuthAngle:z.getAzimuthalAngle()},{maxDistance:Qe.distance,minDistance:Qe.distance,minPolarAngle:Math.PI/2-.11,maxPolarAngle:Math.PI/2-.11,minAzimuthAngle:-.78,maxAzimuthAngle:-.78,duration:1}).then(()=>{z.minPolarAngle=0,z.maxPolarAngle=3.1415,z.minDistance=.5,z.maxDistance=5,z.minAzimuthAngle=1/0,z.maxAzimuthAngle=1/0}))};return ie.jsx(Al.Provider,{value:{awaitDisplay:B,setAwaitDisplay:v,templateInfo:T,setTemplateInfo:Z,blinkManager:V,setBlinkManager:J,manifest:G,setManifest:D,sceneModel:x,setSceneModel:P,lipSync:y,setLipSync:Q,scene:t,setScene:n,currentTraitName:i,setCurrentTraitName:s,currentOptions:o,getSaveAvatar:$,saveAvatarToLocalStorage:X,loadAvatarFromLocalStorage:ee,setCurrentOptions:a,setSelectedOptions:h,getRandomCharacter:de,saveUserSelection:se,loadUserSelection:ae,selectedOptions:p,setRemoveOption:g,removeOption:m,model:A,setModel:l,animationManager:c,setAnimationManager:u,camera:f,setCamera:d,colorStatus:w,setColorStatus:C,skinColor:I,setSkinColor:E,avatar:U,setAvatar:k,resetAvatar:fe,moveCamera:ge,controls:z,setControls:R,initializeScene:e,mousePosition:_,setMousePosition:L,isChangingWholeAvatar:oe,setIsChangingWholeAvatar:M},children:r.children})},zk={NORMAL:"NORMAL",AR:"AR",AR_FRONT:"AR_FRONT",VR:"VR"},Zt={LANDING:"LANDING",CREATE:"CREATE",LOAD:"LOAD",APPEARANCE:"APPEARANCE",BIO:"BIO",SAVE:"SAVE",MINT:"MINT",CHAT:"CHAT"},Ho=et.createContext(),fne=r=>{const[e,t]=et.useState(zk.NORMAL),[n,i]=et.useState(Zt.CREATE),[s,o]=et.useState(!1),[a,A]=et.useState(!1);return ie.jsx(Ho.Provider,{value:{viewMode:n,setViewMode:i,isLoading:s,setIsLoading:o,mouseIsOverUI:a,setMouseIsOverUI:A,currentCameraMode:e,setCurrentCameraMode:t},children:r.children})},dne="modulepreload",hne=function(r,e){return new URL(r,e).href},q_={},pne=function(e,t,n){if(!t||t.length===0)return e();const i=document.getElementsByTagName("link");return Promise.all(t.map(s=>{if(s=hne(s,n),s in q_)return;q_[s]=!0;const o=s.endsWith(".css"),a=o?'[rel="stylesheet"]':"";if(!!n)for(let c=i.length-1;c>=0;c--){const u=i[c];if(u.href===s&&(!o||u.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${s}"]${a}`))return;const l=document.createElement("link");if(l.rel=o?"stylesheet":dne,o||(l.as="script",l.crossOrigin=""),l.href=s,document.head.appendChild(l),o)return new Promise((c,u)=>{l.addEventListener("load",c),l.addEventListener("error",()=>u(new Error(`Unable to preload CSS for ${s}`)))})})).then(()=>e())};function pB(){return pB=Object.assign||function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},pB.apply(this,arguments)}function gne(r,e){if(r==null)return{};var t={},n=Object.keys(r),i,s;for(s=0;s<n.length;s++)i=n[s],!(e.indexOf(i)>=0)&&(t[i]=r[i]);return t}function mne(r){Ie.useEffect(r,[])}function Bne(r,e){e===void 0&&(e={});var t=e,n=t.volume,i=n===void 0?1:n,s=t.playbackRate,o=s===void 0?1:s,a=t.soundEnabled,A=a===void 0?!0:a,l=t.interrupt,c=l===void 0?!1:l,u=t.onload,f=gne(t,["id","volume","playbackRate","soundEnabled","interrupt","onload"]),d=et.useRef(null),p=et.useRef(!1),h=et.useState(null),m=h[0],g=h[1],B=et.useState(null),v=B[0],w=B[1],C=function(){typeof u=="function"&&u.call(this),p.current&&g(this.duration()*1e3),w(this)};mne(function(){return pne(()=>import("./howler-3b43ee5f.js").then(V=>V.h),[],import.meta.url).then(function(V){if(!p.current){var J;d.current=(J=V.Howl)!==null&&J!==void 0?J:V.default.Howl,p.current=!0,new d.current(pB({src:Array.isArray(r)?r:[r],volume:i,rate:o,onload:C},f))}}),function(){p.current=!1}}),et.useEffect(function(){d.current&&v&&w(new d.current(pB({src:Array.isArray(r)?r:[r],volume:i,onload:C},f)))},[JSON.stringify(r)]),et.useEffect(function(){v&&(v.volume(i),v.rate(o))},[i,o]);var I=et.useCallback(function(V){typeof V>"u"&&(V={}),!(!v||!A&&!V.forceSoundEnabled)&&(c&&v.stop(),V.playbackRate&&v.rate(V.playbackRate),v.play(V.id))},[v,A,c]),E=et.useCallback(function(V){v&&v.stop(V)},[v]),U=et.useCallback(function(V){v&&v.pause(V)},[v]),S=[I,{sound:v,stop:E,pause:U,duration:m}];return S}const vne=[{name:"background/cc_bgm.wav",offset:0,duration:123458.58333333334},{name:"background/cc_bgm_balanced.wav",offset:123458.58333333334,duration:123458.60416666666},{name:"effect/character-load.wav",offset:246917.1875,duration:3030},{name:"effect/class-select.wav",offset:249947.1875,duration:2780},{name:"effect/switchingItem.wav",offset:252727.1875,duration:623.75},{name:"ui/back-next-button.wav",offset:253350.9375,duration:155.02083333333334},{name:"ui/class-mouse-over.wav",offset:253505.95833333334,duration:217.52083333333334},{name:"ui/class_click.wav",offset:253723.4791666667,duration:3123.75},{name:"ui/class_pass.wav",offset:256847.2291666667,duration:155},{name:"ui/option_click.wav",offset:257002.2291666667,duration:155.02083333333334},{name:"ui/randomize-button.wav",offset:257157.25000000003,duration:342.5208333333333},{name:"ui/section_click.wav",offset:257499.77083333337,duration:155}],yne=""+new URL("sounds-3322d50e.mp3",import.meta.url).href,zo=Ie.createContext(),Cne=r=>{const e=i=>vne.find(s=>i.test(s.name)),[t]=Bne(yne,{sprite:{switchItem:[e(/switchingItem/).offset,e(/switchingItem/).duration],classSelect:[e(/class-select/).offset,e(/class-select/).duration],characterLoad:[e(/character-load/).offset,e(/character-load/).duration],randomizeButton:[e(/randomize-button/).offset,e(/randomize-button/).duration],classMouseOver:[e(/class-mouse-over/).offset,e(/class-mouse-over/).duration],backNextButton:[e(/back-next-button/).offset,e(/back-next-button/).duration]}}),n=(i,s=0)=>{s===0?t({id:i}):setTimeout(()=>{t({id:i})},s)};return ie.jsx(zo.Provider,{value:{playSound:n},children:r.children})};function us(r){return us=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},us(r)}function Cs(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function wne(r,e){if(us(r)!=="object"||r===null)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e||"default");if(us(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function Xk(r){var e=wne(r,"string");return us(e)==="symbol"?e:String(e)}function $_(r,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,Xk(n.key),n)}}function ws(r,e,t){return e&&$_(r.prototype,e),t&&$_(r,t),Object.defineProperty(r,"prototype",{writable:!1}),r}function PA(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function ZI(r,e){return ZI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},ZI(r,e)}function Sv(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(e&&e.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),e&&ZI(r,e)}function Lp(r,e){if(e&&(us(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return PA(r)}function Lo(r){return Lo=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Lo(r)}function Xo(r,e,t){return e=Xk(e),e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function Yk(r){if(Array.isArray(r))return r}function Fne(r){if(typeof Symbol<"u"&&r[Symbol.iterator]!=null||r["@@iterator"]!=null)return Array.from(r)}function eR(r,e){(e==null||e>r.length)&&(e=r.length);for(var t=0,n=new Array(e);t<e;t++)n[t]=r[t];return n}function Kk(r,e){if(r){if(typeof r=="string")return eR(r,e);var t=Object.prototype.toString.call(r).slice(8,-1);if(t==="Object"&&r.constructor&&(t=r.constructor.name),t==="Map"||t==="Set")return Array.from(r);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return eR(r,e)}}function jk(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ine(r){return Yk(r)||Fne(r)||Kk(r)||jk()}function tR(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function nR(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?tR(Object(t),!0).forEach(function(n){Xo(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):tR(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}var Une={type:"logger",log:function(e){this.output("log",e)},warn:function(e){this.output("warn",e)},error:function(e){this.output("error",e)},output:function(e,t){console&&console[e]&&console[e].apply(console,t)}},xne=function(){function r(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Cs(this,r),this.init(e,t)}return ws(r,[{key:"init",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.prefix=n.prefix||"i18next:",this.logger=t||Une,this.options=n,this.debug=n.debug}},{key:"setDebug",value:function(t){this.debug=t}},{key:"log",value:function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return this.forward(n,"log","",!0)}},{key:"warn",value:function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return this.forward(n,"warn","",!0)}},{key:"error",value:function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return this.forward(n,"error","")}},{key:"deprecate",value:function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return this.forward(n,"warn","WARNING DEPRECATED: ",!0)}},{key:"forward",value:function(t,n,i,s){return s&&!this.debug?null:(typeof t[0]=="string"&&(t[0]="".concat(i).concat(this.prefix," ").concat(t[0])),this.logger[n](t))}},{key:"create",value:function(t){return new r(this.logger,nR(nR({},{prefix:"".concat(this.prefix,":").concat(t,":")}),this.options))}},{key:"clone",value:function(t){return t=t||this.options,t.prefix=t.prefix||this.prefix,new r(this.logger,t)}}]),r}(),Uo=new xne,tl=function(){function r(){Cs(this,r),this.observers={}}return ws(r,[{key:"on",value:function(t,n){var i=this;return t.split(" ").forEach(function(s){i.observers[s]=i.observers[s]||[],i.observers[s].push(n)}),this}},{key:"off",value:function(t,n){if(this.observers[t]){if(!n){delete this.observers[t];return}this.observers[t]=this.observers[t].filter(function(i){return i!==n})}}},{key:"emit",value:function(t){for(var n=arguments.length,i=new Array(n>1?n-1:0),s=1;s<n;s++)i[s-1]=arguments[s];if(this.observers[t]){var o=[].concat(this.observers[t]);o.forEach(function(A){A.apply(void 0,i)})}if(this.observers["*"]){var a=[].concat(this.observers["*"]);a.forEach(function(A){A.apply(A,[t].concat(i))})}}}]),r}();function bd(){var r,e,t=new Promise(function(n,i){r=n,e=i});return t.resolve=r,t.reject=e,t}function rR(r){return r==null?"":""+r}function Qne(r,e,t){r.forEach(function(n){e[n]&&(t[n]=e[n])})}function oQ(r,e,t){function n(a){return a&&a.indexOf("###")>-1?a.replace(/###/g,"."):a}function i(){return!r||typeof r=="string"}for(var s=typeof e!="string"?[].concat(e):e.split(".");s.length>1;){if(i())return{};var o=n(s.shift());!r[o]&&t&&(r[o]=new t),Object.prototype.hasOwnProperty.call(r,o)?r=r[o]:r={}}return i()?{}:{obj:r,k:n(s.shift())}}function iR(r,e,t){var n=oQ(r,e,Object),i=n.obj,s=n.k;i[s]=t}function bne(r,e,t,n){var i=oQ(r,e,Object),s=i.obj,o=i.k;s[o]=s[o]||[],n&&(s[o]=s[o].concat(t)),n||s[o].push(t)}function gB(r,e){var t=oQ(r,e),n=t.obj,i=t.k;if(n)return n[i]}function sR(r,e,t){var n=gB(r,t);return n!==void 0?n:gB(e,t)}function qk(r,e,t){for(var n in e)n!=="__proto__"&&n!=="constructor"&&(n in r?typeof r[n]=="string"||r[n]instanceof String||typeof e[n]=="string"||e[n]instanceof String?t&&(r[n]=e[n]):qk(r[n],e[n],t):r[n]=e[n]);return r}function Kc(r){return r.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}var Ene={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};function Sne(r){return typeof r=="string"?r.replace(/[&<>"'\/]/g,function(e){return Ene[e]}):r}var _v=typeof window<"u"&&window.navigator&&typeof window.navigator.userAgentData>"u"&&window.navigator.userAgent&&window.navigator.userAgent.indexOf("MSIE")>-1,_ne=[" ",",","?","!",";"];function Rne(r,e,t){e=e||"",t=t||"";var n=_ne.filter(function(a){return e.indexOf(a)<0&&t.indexOf(a)<0});if(n.length===0)return!0;var i=new RegExp("(".concat(n.map(function(a){return a==="?"?"\\?":a}).join("|"),")")),s=!i.test(r);if(!s){var o=r.indexOf(t);o>0&&!i.test(r.substring(0,o))&&(s=!0)}return s}function oR(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function am(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?oR(Object(t),!0).forEach(function(n){Xo(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):oR(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function Mne(r){var e=Tne();return function(){var n=Lo(r),i;if(e){var s=Lo(this).constructor;i=Reflect.construct(n,arguments,s)}else i=n.apply(this,arguments);return Lp(this,i)}}function Tne(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function $k(r,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:".";if(r){if(r[e])return r[e];for(var n=e.split(t),i=r,s=0;s<n.length;++s){if(!i||typeof i[n[s]]=="string"&&s+1<n.length)return;if(i[n[s]]===void 0){for(var o=2,a=n.slice(s,s+o).join(t),A=i[a];A===void 0&&n.length>s+o;)o++,a=n.slice(s,s+o).join(t),A=i[a];if(A===void 0)return;if(A===null)return null;if(e.endsWith(a)){if(typeof A=="string")return A;if(a&&typeof A[a]=="string")return A[a]}var l=n.slice(s+o).join(t);return l?$k(A,l,t):void 0}i=i[n[s]]}return i}}var Nne=function(r){Sv(t,r);var e=Mne(t);function t(n){var i,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{ns:["translation"],defaultNS:"translation"};return Cs(this,t),i=e.call(this),_v&&tl.call(PA(i)),i.data=n||{},i.options=s,i.options.keySeparator===void 0&&(i.options.keySeparator="."),i.options.ignoreJSONStructure===void 0&&(i.options.ignoreJSONStructure=!0),i}return ws(t,[{key:"addNamespaces",value:function(i){this.options.ns.indexOf(i)<0&&this.options.ns.push(i)}},{key:"removeNamespaces",value:function(i){var s=this.options.ns.indexOf(i);s>-1&&this.options.ns.splice(s,1)}},{key:"getResource",value:function(i,s,o){var a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},A=a.keySeparator!==void 0?a.keySeparator:this.options.keySeparator,l=a.ignoreJSONStructure!==void 0?a.ignoreJSONStructure:this.options.ignoreJSONStructure,c=[i,s];o&&typeof o!="string"&&(c=c.concat(o)),o&&typeof o=="string"&&(c=c.concat(A?o.split(A):o)),i.indexOf(".")>-1&&(c=i.split("."));var u=gB(this.data,c);return u||!l||typeof o!="string"?u:$k(this.data&&this.data[i]&&this.data[i][s],o,A)}},{key:"addResource",value:function(i,s,o,a){var A=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{silent:!1},l=this.options.keySeparator;l===void 0&&(l=".");var c=[i,s];o&&(c=c.concat(l?o.split(l):o)),i.indexOf(".")>-1&&(c=i.split("."),a=s,s=c[1]),this.addNamespaces(s),iR(this.data,c,a),A.silent||this.emit("added",i,s,o,a)}},{key:"addResources",value:function(i,s,o){var a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{silent:!1};for(var A in o)(typeof o[A]=="string"||Object.prototype.toString.apply(o[A])==="[object Array]")&&this.addResource(i,s,A,o[A],{silent:!0});a.silent||this.emit("added",i,s,o)}},{key:"addResourceBundle",value:function(i,s,o,a,A){var l=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{silent:!1},c=[i,s];i.indexOf(".")>-1&&(c=i.split("."),a=o,o=s,s=c[1]),this.addNamespaces(s);var u=gB(this.data,c)||{};a?qk(u,o,A):u=am(am({},u),o),iR(this.data,c,u),l.silent||this.emit("added",i,s,o)}},{key:"removeResourceBundle",value:function(i,s){this.hasResourceBundle(i,s)&&delete this.data[i][s],this.removeNamespaces(s),this.emit("removed",i,s)}},{key:"hasResourceBundle",value:function(i,s){return this.getResource(i,s)!==void 0}},{key:"getResourceBundle",value:function(i,s){return s||(s=this.options.defaultNS),this.options.compatibilityAPI==="v1"?am(am({},{}),this.getResource(i,s)):this.getResource(i,s)}},{key:"getDataByLanguage",value:function(i){return this.data[i]}},{key:"hasLanguageSomeTranslations",value:function(i){var s=this.getDataByLanguage(i),o=s&&Object.keys(s)||[];return!!o.find(function(a){return s[a]&&Object.keys(s[a]).length>0})}},{key:"toJSON",value:function(){return this.data}}]),t}(tl),eL={processors:{},addPostProcessor:function(e){this.processors[e.name]=e},handle:function(e,t,n,i,s){var o=this;return e.forEach(function(a){o.processors[a]&&(t=o.processors[a].process(t,n,i,s))}),t}};function aR(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function Nr(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?aR(Object(t),!0).forEach(function(n){Xo(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):aR(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function Vne(r){var e=Dne();return function(){var n=Lo(r),i;if(e){var s=Lo(this).constructor;i=Reflect.construct(n,arguments,s)}else i=n.apply(this,arguments);return Lp(this,i)}}function Dne(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var AR={},lR=function(r){Sv(t,r);var e=Vne(t);function t(n){var i,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Cs(this,t),i=e.call(this),_v&&tl.call(PA(i)),Qne(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],n,PA(i)),i.options=s,i.options.keySeparator===void 0&&(i.options.keySeparator="."),i.logger=Uo.create("translator"),i}return ws(t,[{key:"changeLanguage",value:function(i){i&&(this.language=i)}},{key:"exists",value:function(i){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}};if(i==null)return!1;var o=this.resolve(i,s);return o&&o.res!==void 0}},{key:"extractFromKey",value:function(i,s){var o=s.nsSeparator!==void 0?s.nsSeparator:this.options.nsSeparator;o===void 0&&(o=":");var a=s.keySeparator!==void 0?s.keySeparator:this.options.keySeparator,A=s.ns||this.options.defaultNS||[],l=o&&i.indexOf(o)>-1,c=!this.options.userDefinedKeySeparator&&!s.keySeparator&&!this.options.userDefinedNsSeparator&&!s.nsSeparator&&!Rne(i,o,a);if(l&&!c){var u=i.match(this.interpolator.nestingRegexp);if(u&&u.length>0)return{key:i,namespaces:A};var f=i.split(o);(o!==a||o===a&&this.options.ns.indexOf(f[0])>-1)&&(A=f.shift()),i=f.join(a)}return typeof A=="string"&&(A=[A]),{key:i,namespaces:A}}},{key:"translate",value:function(i,s,o){var a=this;if(us(s)!=="object"&&this.options.overloadTranslationOptionHandler&&(s=this.options.overloadTranslationOptionHandler(arguments)),s||(s={}),i==null)return"";Array.isArray(i)||(i=[String(i)]);var A=s.returnDetails!==void 0?s.returnDetails:this.options.returnDetails,l=s.keySeparator!==void 0?s.keySeparator:this.options.keySeparator,c=this.extractFromKey(i[i.length-1],s),u=c.key,f=c.namespaces,d=f[f.length-1],p=s.lng||this.language,h=s.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(p&&p.toLowerCase()==="cimode"){if(h){var m=s.nsSeparator||this.options.nsSeparator;return A?{res:"".concat(d).concat(m).concat(u),usedKey:u,exactUsedKey:u,usedLng:p,usedNS:d}:"".concat(d).concat(m).concat(u)}return A?{res:u,usedKey:u,exactUsedKey:u,usedLng:p,usedNS:d}:u}var g=this.resolve(i,s),B=g&&g.res,v=g&&g.usedKey||u,w=g&&g.exactUsedKey||u,C=Object.prototype.toString.apply(B),I=["[object Number]","[object Function]","[object RegExp]"],E=s.joinArrays!==void 0?s.joinArrays:this.options.joinArrays,U=!this.i18nFormat||this.i18nFormat.handleAsObject,S=typeof B!="string"&&typeof B!="boolean"&&typeof B!="number";if(U&&B&&S&&I.indexOf(C)<0&&!(typeof E=="string"&&C==="[object Array]")){if(!s.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");var V=this.options.returnedObjectHandler?this.options.returnedObjectHandler(v,B,Nr(Nr({},s),{},{ns:f})):"key '".concat(u," (").concat(this.language,")' returned an object instead of string.");return A?(g.res=V,g):V}if(l){var J=C==="[object Array]",z=J?[]:{},R=J?w:v;for(var y in B)if(Object.prototype.hasOwnProperty.call(B,y)){var Q="".concat(R).concat(l).concat(y);z[y]=this.translate(Q,Nr(Nr({},s),{joinArrays:!1,ns:f})),z[y]===Q&&(z[y]=B[y])}B=z}}else if(U&&typeof E=="string"&&C==="[object Array]")B=B.join(E),B&&(B=this.extendTranslation(B,i,s,o));else{var _=!1,L=!1,T=s.count!==void 0&&typeof s.count!="string",Z=t.hasDefaultValue(s),G=T?this.pluralResolver.getSuffix(p,s.count,s):"",D=s["defaultValue".concat(G)]||s.defaultValue;!this.isValidLookup(B)&&Z&&(_=!0,B=D),this.isValidLookup(B)||(L=!0,B=u);var x=s.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey,P=x&&L?void 0:B,oe=Z&&D!==B&&this.options.updateMissing;if(L||_||oe){if(this.logger.log(oe?"updateKey":"missingKey",p,d,u,oe?D:B),l){var M=this.resolve(u,Nr(Nr({},s),{},{keySeparator:!1}));M&&M.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}var k=[],q=this.languageUtils.getFallbackCodes(this.options.fallbackLng,s.lng||this.language);if(this.options.saveMissingTo==="fallback"&&q&&q[0])for(var ee=0;ee<q.length;ee++)k.push(q[ee]);else this.options.saveMissingTo==="all"?k=this.languageUtils.toResolveHierarchy(s.lng||this.language):k.push(s.lng||this.language);var X=function(se,ae,de){var fe=Z&&de!==B?de:P;a.options.missingKeyHandler?a.options.missingKeyHandler(se,d,ae,fe,oe,s):a.backendConnector&&a.backendConnector.saveMissing&&a.backendConnector.saveMissing(se,d,ae,fe,oe,s),a.emit("missingKey",se,d,ae,B)};this.options.saveMissing&&(this.options.saveMissingPlurals&&T?k.forEach(function($){a.pluralResolver.getSuffixes($,s).forEach(function(se){X([$],u+se,s["defaultValue".concat(se)]||D)})}):X(k,u,D))}B=this.extendTranslation(B,i,s,g,o),L&&B===u&&this.options.appendNamespaceToMissingKey&&(B="".concat(d,":").concat(u)),(L||_)&&this.options.parseMissingKeyHandler&&(this.options.compatibilityAPI!=="v1"?B=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?"".concat(d,":").concat(u):u,_?B:void 0):B=this.options.parseMissingKeyHandler(B))}return A?(g.res=B,g):B}},{key:"extendTranslation",value:function(i,s,o,a,A){var l=this;if(this.i18nFormat&&this.i18nFormat.parse)i=this.i18nFormat.parse(i,Nr(Nr({},this.options.interpolation.defaultVariables),o),a.usedLng,a.usedNS,a.usedKey,{resolved:a});else if(!o.skipInterpolation){o.interpolation&&this.interpolator.init(Nr(Nr({},o),{interpolation:Nr(Nr({},this.options.interpolation),o.interpolation)}));var c=typeof i=="string"&&(o&&o.interpolation&&o.interpolation.skipOnVariables!==void 0?o.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables),u;if(c){var f=i.match(this.interpolator.nestingRegexp);u=f&&f.length}var d=o.replace&&typeof o.replace!="string"?o.replace:o;if(this.options.interpolation.defaultVariables&&(d=Nr(Nr({},this.options.interpolation.defaultVariables),d)),i=this.interpolator.interpolate(i,d,o.lng||this.language,o),c){var p=i.match(this.interpolator.nestingRegexp),h=p&&p.length;u<h&&(o.nest=!1)}o.nest!==!1&&(i=this.interpolator.nest(i,function(){for(var B=arguments.length,v=new Array(B),w=0;w<B;w++)v[w]=arguments[w];return A&&A[0]===v[0]&&!o.context?(l.logger.warn("It seems you are nesting recursively key: ".concat(v[0]," in key: ").concat(s[0])),null):l.translate.apply(l,v.concat([s]))},o)),o.interpolation&&this.interpolator.reset()}var m=o.postProcess||this.options.postProcess,g=typeof m=="string"?[m]:m;return i!=null&&g&&g.length&&o.applyPostProcessor!==!1&&(i=eL.handle(g,i,s,this.options&&this.options.postProcessPassResolved?Nr({i18nResolved:a},o):o,this)),i}},{key:"resolve",value:function(i){var s=this,o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a,A,l,c,u;return typeof i=="string"&&(i=[i]),i.forEach(function(f){if(!s.isValidLookup(a)){var d=s.extractFromKey(f,o),p=d.key;A=p;var h=d.namespaces;s.options.fallbackNS&&(h=h.concat(s.options.fallbackNS));var m=o.count!==void 0&&typeof o.count!="string",g=m&&!o.ordinal&&o.count===0&&s.pluralResolver.shouldUseIntlApi(),B=o.context!==void 0&&(typeof o.context=="string"||typeof o.context=="number")&&o.context!=="",v=o.lngs?o.lngs:s.languageUtils.toResolveHierarchy(o.lng||s.language,o.fallbackLng);h.forEach(function(w){s.isValidLookup(a)||(u=w,!AR["".concat(v[0],"-").concat(w)]&&s.utils&&s.utils.hasLoadedNamespace&&!s.utils.hasLoadedNamespace(u)&&(AR["".concat(v[0],"-").concat(w)]=!0,s.logger.warn('key "'.concat(A,'" for languages "').concat(v.join(", "),`" won't get resolved as namespace "`).concat(u,'" was not yet loaded'),"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),v.forEach(function(C){if(!s.isValidLookup(a)){c=C;var I=[p];if(s.i18nFormat&&s.i18nFormat.addLookupKeys)s.i18nFormat.addLookupKeys(I,p,C,w,o);else{var E;m&&(E=s.pluralResolver.getSuffix(C,o.count,o));var U="".concat(s.options.pluralSeparator,"zero");if(m&&(I.push(p+E),g&&I.push(p+U)),B){var S="".concat(p).concat(s.options.contextSeparator).concat(o.context);I.push(S),m&&(I.push(S+E),g&&I.push(S+U))}}for(var V;V=I.pop();)s.isValidLookup(a)||(l=V,a=s.getResource(C,w,V,o))}}))})}}),{res:a,usedKey:A,exactUsedKey:l,usedLng:c,usedNS:u}}},{key:"isValidLookup",value:function(i){return i!==void 0&&!(!this.options.returnNull&&i===null)&&!(!this.options.returnEmptyString&&i==="")}},{key:"getResource",value:function(i,s,o){var a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return this.i18nFormat&&this.i18nFormat.getResource?this.i18nFormat.getResource(i,s,o,a):this.resourceStore.getResource(i,s,o,a)}}],[{key:"hasDefaultValue",value:function(i){var s="defaultValue";for(var o in i)if(Object.prototype.hasOwnProperty.call(i,o)&&s===o.substring(0,s.length)&&i[o]!==void 0)return!0;return!1}}]),t}(tl);function ew(r){return r.charAt(0).toUpperCase()+r.slice(1)}var cR=function(){function r(e){Cs(this,r),this.options=e,this.supportedLngs=this.options.supportedLngs||!1,this.logger=Uo.create("languageUtils")}return ws(r,[{key:"getScriptPartFromCode",value:function(t){if(!t||t.indexOf("-")<0)return null;var n=t.split("-");return n.length===2||(n.pop(),n[n.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(n.join("-"))}},{key:"getLanguagePartFromCode",value:function(t){if(!t||t.indexOf("-")<0)return t;var n=t.split("-");return this.formatLanguageCode(n[0])}},{key:"formatLanguageCode",value:function(t){if(typeof t=="string"&&t.indexOf("-")>-1){var n=["hans","hant","latn","cyrl","cans","mong","arab"],i=t.split("-");return this.options.lowerCaseLng?i=i.map(function(s){return s.toLowerCase()}):i.length===2?(i[0]=i[0].toLowerCase(),i[1]=i[1].toUpperCase(),n.indexOf(i[1].toLowerCase())>-1&&(i[1]=ew(i[1].toLowerCase()))):i.length===3&&(i[0]=i[0].toLowerCase(),i[1].length===2&&(i[1]=i[1].toUpperCase()),i[0]!=="sgn"&&i[2].length===2&&(i[2]=i[2].toUpperCase()),n.indexOf(i[1].toLowerCase())>-1&&(i[1]=ew(i[1].toLowerCase())),n.indexOf(i[2].toLowerCase())>-1&&(i[2]=ew(i[2].toLowerCase()))),i.join("-")}return this.options.cleanCode||this.options.lowerCaseLng?t.toLowerCase():t}},{key:"isSupportedCode",value:function(t){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(t=this.getLanguagePartFromCode(t)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(t)>-1}},{key:"getBestMatchFromCodes",value:function(t){var n=this;if(!t)return null;var i;return t.forEach(function(s){if(!i){var o=n.formatLanguageCode(s);(!n.options.supportedLngs||n.isSupportedCode(o))&&(i=o)}}),!i&&this.options.supportedLngs&&t.forEach(function(s){if(!i){var o=n.getLanguagePartFromCode(s);if(n.isSupportedCode(o))return i=o;i=n.options.supportedLngs.find(function(a){if(a.indexOf(o)===0)return a})}}),i||(i=this.getFallbackCodes(this.options.fallbackLng)[0]),i}},{key:"getFallbackCodes",value:function(t,n){if(!t)return[];if(typeof t=="function"&&(t=t(n)),typeof t=="string"&&(t=[t]),Object.prototype.toString.apply(t)==="[object Array]")return t;if(!n)return t.default||[];var i=t[n];return i||(i=t[this.getScriptPartFromCode(n)]),i||(i=t[this.formatLanguageCode(n)]),i||(i=t[this.getLanguagePartFromCode(n)]),i||(i=t.default),i||[]}},{key:"toResolveHierarchy",value:function(t,n){var i=this,s=this.getFallbackCodes(n||this.options.fallbackLng||[],t),o=[],a=function(l){l&&(i.isSupportedCode(l)?o.push(l):i.logger.warn("rejecting language code not found in supportedLngs: ".concat(l)))};return typeof t=="string"&&t.indexOf("-")>-1?(this.options.load!=="languageOnly"&&a(this.formatLanguageCode(t)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&a(this.getScriptPartFromCode(t)),this.options.load!=="currentOnly"&&a(this.getLanguagePartFromCode(t))):typeof t=="string"&&a(this.formatLanguageCode(t)),s.forEach(function(A){o.indexOf(A)<0&&a(i.formatLanguageCode(A))}),o}}]),r}(),kne=[{lngs:["ach","ak","am","arn","br","fil","gun","ln","mfe","mg","mi","oc","pt","pt-BR","tg","tl","ti","tr","uz","wa"],nr:[1,2],fc:1},{lngs:["af","an","ast","az","bg","bn","ca","da","de","dev","el","en","eo","es","et","eu","fi","fo","fur","fy","gl","gu","ha","hi","hu","hy","ia","it","kk","kn","ku","lb","mai","ml","mn","mr","nah","nap","nb","ne","nl","nn","no","nso","pa","pap","pms","ps","pt-PT","rm","sco","se","si","so","son","sq","sv","sw","ta","te","tk","ur","yo"],nr:[1,2],fc:2},{lngs:["ay","bo","cgg","fa","ht","id","ja","jbo","ka","km","ko","ky","lo","ms","sah","su","th","tt","ug","vi","wo","zh"],nr:[1],fc:3},{lngs:["be","bs","cnr","dz","hr","ru","sr","uk"],nr:[1,2,5],fc:4},{lngs:["ar"],nr:[0,1,2,3,11,100],fc:5},{lngs:["cs","sk"],nr:[1,2,5],fc:6},{lngs:["csb","pl"],nr:[1,2,5],fc:7},{lngs:["cy"],nr:[1,2,3,8],fc:8},{lngs:["fr"],nr:[1,2],fc:9},{lngs:["ga"],nr:[1,2,3,7,11],fc:10},{lngs:["gd"],nr:[1,2,3,20],fc:11},{lngs:["is"],nr:[1,2],fc:12},{lngs:["jv"],nr:[0,1],fc:13},{lngs:["kw"],nr:[1,2,3,4],fc:14},{lngs:["lt"],nr:[1,2,10],fc:15},{lngs:["lv"],nr:[1,2,0],fc:16},{lngs:["mk"],nr:[1,2],fc:17},{lngs:["mnk"],nr:[0,1,2],fc:18},{lngs:["mt"],nr:[1,2,11,20],fc:19},{lngs:["or"],nr:[2,1],fc:2},{lngs:["ro"],nr:[1,2,20],fc:20},{lngs:["sl"],nr:[5,1,2,3],fc:21},{lngs:["he","iw"],nr:[1,2,20,21],fc:22}],Lne={1:function(e){return Number(e>1)},2:function(e){return Number(e!=1)},3:function(e){return 0},4:function(e){return Number(e%10==1&&e%100!=11?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2)},5:function(e){return Number(e==0?0:e==1?1:e==2?2:e%100>=3&&e%100<=10?3:e%100>=11?4:5)},6:function(e){return Number(e==1?0:e>=2&&e<=4?1:2)},7:function(e){return Number(e==1?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2)},8:function(e){return Number(e==1?0:e==2?1:e!=8&&e!=11?2:3)},9:function(e){return Number(e>=2)},10:function(e){return Number(e==1?0:e==2?1:e<7?2:e<11?3:4)},11:function(e){return Number(e==1||e==11?0:e==2||e==12?1:e>2&&e<20?2:3)},12:function(e){return Number(e%10!=1||e%100==11)},13:function(e){return Number(e!==0)},14:function(e){return Number(e==1?0:e==2?1:e==3?2:3)},15:function(e){return Number(e%10==1&&e%100!=11?0:e%10>=2&&(e%100<10||e%100>=20)?1:2)},16:function(e){return Number(e%10==1&&e%100!=11?0:e!==0?1:2)},17:function(e){return Number(e==1||e%10==1&&e%100!=11?0:1)},18:function(e){return Number(e==0?0:e==1?1:2)},19:function(e){return Number(e==1?0:e==0||e%100>1&&e%100<11?1:e%100>10&&e%100<20?2:3)},20:function(e){return Number(e==1?0:e==0||e%100>0&&e%100<20?1:2)},21:function(e){return Number(e%100==1?1:e%100==2?2:e%100==3||e%100==4?3:0)},22:function(e){return Number(e==1?0:e==2?1:(e<0||e>10)&&e%10==0?2:3)}},Wne=["v1","v2","v3"],uR={zero:0,one:1,two:2,few:3,many:4,other:5};function Zne(){var r={};return kne.forEach(function(e){e.lngs.forEach(function(t){r[t]={numbers:e.nr,plurals:Lne[e.fc]}})}),r}var Pne=function(){function r(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Cs(this,r),this.languageUtils=e,this.options=t,this.logger=Uo.create("pluralResolver"),(!this.options.compatibilityJSON||this.options.compatibilityJSON==="v4")&&(typeof Intl>"u"||!Intl.PluralRules)&&(this.options.compatibilityJSON="v3",this.logger.error("Your environment seems not to be Intl API compatible, use an Intl.PluralRules polyfill. Will fallback to the compatibilityJSON v3 format handling.")),this.rules=Zne()}return ws(r,[{key:"addRule",value:function(t,n){this.rules[t]=n}},{key:"getRule",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.shouldUseIntlApi())try{return new Intl.PluralRules(t,{type:n.ordinal?"ordinal":"cardinal"})}catch{return}return this.rules[t]||this.rules[this.languageUtils.getLanguagePartFromCode(t)]}},{key:"needsPlural",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=this.getRule(t,n);return this.shouldUseIntlApi()?i&&i.resolvedOptions().pluralCategories.length>1:i&&i.numbers.length>1}},{key:"getPluralFormsOfKey",value:function(t,n){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.getSuffixes(t,i).map(function(s){return"".concat(n).concat(s)})}},{key:"getSuffixes",value:function(t){var n=this,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=this.getRule(t,i);return s?this.shouldUseIntlApi()?s.resolvedOptions().pluralCategories.sort(function(o,a){return uR[o]-uR[a]}).map(function(o){return"".concat(n.options.prepend).concat(o)}):s.numbers.map(function(o){return n.getSuffix(t,o,i)}):[]}},{key:"getSuffix",value:function(t,n){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},s=this.getRule(t,i);return s?this.shouldUseIntlApi()?"".concat(this.options.prepend).concat(s.select(n)):this.getSuffixRetroCompatible(s,n):(this.logger.warn("no plural rule found for: ".concat(t)),"")}},{key:"getSuffixRetroCompatible",value:function(t,n){var i=this,s=t.noAbs?t.plurals(n):t.plurals(Math.abs(n)),o=t.numbers[s];this.options.simplifyPluralSuffix&&t.numbers.length===2&&t.numbers[0]===1&&(o===2?o="plural":o===1&&(o=""));var a=function(){return i.options.prepend&&o.toString()?i.options.prepend+o.toString():o.toString()};return this.options.compatibilityJSON==="v1"?o===1?"":typeof o=="number"?"_plural_".concat(o.toString()):a():this.options.compatibilityJSON==="v2"||this.options.simplifyPluralSuffix&&t.numbers.length===2&&t.numbers[0]===1?a():this.options.prepend&&s.toString()?this.options.prepend+s.toString():s.toString()}},{key:"shouldUseIntlApi",value:function(){return!Wne.includes(this.options.compatibilityJSON)}}]),r}();function fR(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function Ms(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?fR(Object(t),!0).forEach(function(n){Xo(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):fR(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}var Jne=function(){function r(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Cs(this,r),this.logger=Uo.create("interpolator"),this.options=e,this.format=e.interpolation&&e.interpolation.format||function(t){return t},this.init(e)}return ws(r,[{key:"init",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};t.interpolation||(t.interpolation={escapeValue:!0});var n=t.interpolation;this.escape=n.escape!==void 0?n.escape:Sne,this.escapeValue=n.escapeValue!==void 0?n.escapeValue:!0,this.useRawValueToEscape=n.useRawValueToEscape!==void 0?n.useRawValueToEscape:!1,this.prefix=n.prefix?Kc(n.prefix):n.prefixEscaped||"{{",this.suffix=n.suffix?Kc(n.suffix):n.suffixEscaped||"}}",this.formatSeparator=n.formatSeparator?n.formatSeparator:n.formatSeparator||",",this.unescapePrefix=n.unescapeSuffix?"":n.unescapePrefix||"-",this.unescapeSuffix=this.unescapePrefix?"":n.unescapeSuffix||"",this.nestingPrefix=n.nestingPrefix?Kc(n.nestingPrefix):n.nestingPrefixEscaped||Kc("$t("),this.nestingSuffix=n.nestingSuffix?Kc(n.nestingSuffix):n.nestingSuffixEscaped||Kc(")"),this.nestingOptionsSeparator=n.nestingOptionsSeparator?n.nestingOptionsSeparator:n.nestingOptionsSeparator||",",this.maxReplaces=n.maxReplaces?n.maxReplaces:1e3,this.alwaysFormat=n.alwaysFormat!==void 0?n.alwaysFormat:!1,this.resetRegExp()}},{key:"reset",value:function(){this.options&&this.init(this.options)}},{key:"resetRegExp",value:function(){var t="".concat(this.prefix,"(.+?)").concat(this.suffix);this.regexp=new RegExp(t,"g");var n="".concat(this.prefix).concat(this.unescapePrefix,"(.+?)").concat(this.unescapeSuffix).concat(this.suffix);this.regexpUnescape=new RegExp(n,"g");var i="".concat(this.nestingPrefix,"(.+?)").concat(this.nestingSuffix);this.nestingRegexp=new RegExp(i,"g")}},{key:"interpolate",value:function(t,n,i,s){var o=this,a,A,l,c=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{};function u(m){return m.replace(/\$/g,"$$$$")}var f=function(g){if(g.indexOf(o.formatSeparator)<0){var B=sR(n,c,g);return o.alwaysFormat?o.format(B,void 0,i,Ms(Ms(Ms({},s),n),{},{interpolationkey:g})):B}var v=g.split(o.formatSeparator),w=v.shift().trim(),C=v.join(o.formatSeparator).trim();return o.format(sR(n,c,w),C,i,Ms(Ms(Ms({},s),n),{},{interpolationkey:w}))};this.resetRegExp();var d=s&&s.missingInterpolationHandler||this.options.missingInterpolationHandler,p=s&&s.interpolation&&s.interpolation.skipOnVariables!==void 0?s.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables,h=[{regex:this.regexpUnescape,safeValue:function(g){return u(g)}},{regex:this.regexp,safeValue:function(g){return o.escapeValue?u(o.escape(g)):u(g)}}];return h.forEach(function(m){for(l=0;a=m.regex.exec(t);){var g=a[1].trim();if(A=f(g),A===void 0)if(typeof d=="function"){var B=d(t,a,s);A=typeof B=="string"?B:""}else if(s&&Object.prototype.hasOwnProperty.call(s,g))A="";else if(p){A=a[0];continue}else o.logger.warn("missed to pass in variable ".concat(g," for interpolating ").concat(t)),A="";else typeof A!="string"&&!o.useRawValueToEscape&&(A=rR(A));var v=m.safeValue(A);if(t=t.replace(a[0],v),p?(m.regex.lastIndex+=A.length,m.regex.lastIndex-=a[0].length):m.regex.lastIndex=0,l++,l>=o.maxReplaces)break}}),t}},{key:"nest",value:function(t,n){var i=this,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},o,a,A;function l(d,p){var h=this.nestingOptionsSeparator;if(d.indexOf(h)<0)return d;var m=d.split(new RegExp("".concat(h,"[ ]*{"))),g="{".concat(m[1]);d=m[0],g=this.interpolate(g,A);var B=g.match(/'/g),v=g.match(/"/g);(B&&B.length%2===0&&!v||v.length%2!==0)&&(g=g.replace(/'/g,'"'));try{A=JSON.parse(g),p&&(A=Ms(Ms({},p),A))}catch(w){return this.logger.warn("failed parsing options string in nesting for key ".concat(d),w),"".concat(d).concat(h).concat(g)}return delete A.defaultValue,d}for(;o=this.nestingRegexp.exec(t);){var c=[];A=Ms({},s),A=A.replace&&typeof A.replace!="string"?A.replace:A,A.applyPostProcessor=!1,delete A.defaultValue;var u=!1;if(o[0].indexOf(this.formatSeparator)!==-1&&!/{.*}/.test(o[1])){var f=o[1].split(this.formatSeparator).map(function(d){return d.trim()});o[1]=f.shift(),c=f,u=!0}if(a=n(l.call(this,o[1].trim(),A),A),a&&o[0]===t&&typeof a!="string")return a;typeof a!="string"&&(a=rR(a)),a||(this.logger.warn("missed to resolve ".concat(o[1]," for nesting ").concat(t)),a=""),u&&(a=c.reduce(function(d,p){return i.format(d,p,s.lng,Ms(Ms({},s),{},{interpolationkey:o[1].trim()}))},a.trim())),t=t.replace(o[0],a),this.regexp.lastIndex=0}return t}}]),r}();function dR(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function oa(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?dR(Object(t),!0).forEach(function(n){Xo(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):dR(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function Gne(r){var e=r.toLowerCase().trim(),t={};if(r.indexOf("(")>-1){var n=r.split("(");e=n[0].toLowerCase().trim();var i=n[1].substring(0,n[1].length-1);if(e==="currency"&&i.indexOf(":")<0)t.currency||(t.currency=i.trim());else if(e==="relativetime"&&i.indexOf(":")<0)t.range||(t.range=i.trim());else{var s=i.split(";");s.forEach(function(o){if(o){var a=o.split(":"),A=Ine(a),l=A[0],c=A.slice(1),u=c.join(":").trim().replace(/^'+|'+$/g,"");t[l.trim()]||(t[l.trim()]=u),u==="false"&&(t[l.trim()]=!1),u==="true"&&(t[l.trim()]=!0),isNaN(u)||(t[l.trim()]=parseInt(u,10))}})}}return{formatName:e,formatOptions:t}}function jc(r){var e={};return function(n,i,s){var o=i+JSON.stringify(s),a=e[o];return a||(a=r(i,s),e[o]=a),a(n)}}var One=function(){function r(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Cs(this,r),this.logger=Uo.create("formatter"),this.options=e,this.formats={number:jc(function(t,n){var i=new Intl.NumberFormat(t,oa({},n));return function(s){return i.format(s)}}),currency:jc(function(t,n){var i=new Intl.NumberFormat(t,oa(oa({},n),{},{style:"currency"}));return function(s){return i.format(s)}}),datetime:jc(function(t,n){var i=new Intl.DateTimeFormat(t,oa({},n));return function(s){return i.format(s)}}),relativetime:jc(function(t,n){var i=new Intl.RelativeTimeFormat(t,oa({},n));return function(s){return i.format(s,n.range||"day")}}),list:jc(function(t,n){var i=new Intl.ListFormat(t,oa({},n));return function(s){return i.format(s)}})},this.init(e)}return ws(r,[{key:"init",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}},i=n.interpolation;this.formatSeparator=i.formatSeparator?i.formatSeparator:i.formatSeparator||","}},{key:"add",value:function(t,n){this.formats[t.toLowerCase().trim()]=n}},{key:"addCached",value:function(t,n){this.formats[t.toLowerCase().trim()]=jc(n)}},{key:"format",value:function(t,n,i){var s=this,o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},a=n.split(this.formatSeparator),A=a.reduce(function(l,c){var u=Gne(c),f=u.formatName,d=u.formatOptions;if(s.formats[f]){var p=l;try{var h=o&&o.formatParams&&o.formatParams[o.interpolationkey]||{},m=h.locale||h.lng||o.locale||o.lng||i;p=s.formats[f](l,m,oa(oa(oa({},d),o),h))}catch(g){s.logger.warn(g)}return p}else s.logger.warn("there was no format function for ".concat(f));return l},t);return A}}]),r}();function hR(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function pR(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?hR(Object(t),!0).forEach(function(n){Xo(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):hR(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function Hne(r){var e=zne();return function(){var n=Lo(r),i;if(e){var s=Lo(this).constructor;i=Reflect.construct(n,arguments,s)}else i=n.apply(this,arguments);return Lp(this,i)}}function zne(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Xne(r,e){r.pending[e]!==void 0&&(delete r.pending[e],r.pendingCount--)}var Yne=function(r){Sv(t,r);var e=Hne(t);function t(n,i,s){var o,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return Cs(this,t),o=e.call(this),_v&&tl.call(PA(o)),o.backend=n,o.store=i,o.services=s,o.languageUtils=s.languageUtils,o.options=a,o.logger=Uo.create("backendConnector"),o.waitingReads=[],o.maxParallelReads=a.maxParallelReads||10,o.readingCalls=0,o.maxRetries=a.maxRetries>=0?a.maxRetries:5,o.retryTimeout=a.retryTimeout>=1?a.retryTimeout:350,o.state={},o.queue=[],o.backend&&o.backend.init&&o.backend.init(s,a.backend,a),o}return ws(t,[{key:"queueLoad",value:function(i,s,o,a){var A=this,l={},c={},u={},f={};return i.forEach(function(d){var p=!0;s.forEach(function(h){var m="".concat(d,"|").concat(h);!o.reload&&A.store.hasResourceBundle(d,h)?A.state[m]=2:A.state[m]<0||(A.state[m]===1?c[m]===void 0&&(c[m]=!0):(A.state[m]=1,p=!1,c[m]===void 0&&(c[m]=!0),l[m]===void 0&&(l[m]=!0),f[h]===void 0&&(f[h]=!0)))}),p||(u[d]=!0)}),(Object.keys(l).length||Object.keys(c).length)&&this.queue.push({pending:c,pendingCount:Object.keys(c).length,loaded:{},errors:[],callback:a}),{toLoad:Object.keys(l),pending:Object.keys(c),toLoadLanguages:Object.keys(u),toLoadNamespaces:Object.keys(f)}}},{key:"loaded",value:function(i,s,o){var a=i.split("|"),A=a[0],l=a[1];s&&this.emit("failedLoading",A,l,s),o&&this.store.addResourceBundle(A,l,o),this.state[i]=s?-1:2;var c={};this.queue.forEach(function(u){bne(u.loaded,[A],l),Xne(u,i),s&&u.errors.push(s),u.pendingCount===0&&!u.done&&(Object.keys(u.loaded).forEach(function(f){c[f]||(c[f]={});var d=u.loaded[f];d.length&&d.forEach(function(p){c[f][p]===void 0&&(c[f][p]=!0)})}),u.done=!0,u.errors.length?u.callback(u.errors):u.callback())}),this.emit("loaded",c),this.queue=this.queue.filter(function(u){return!u.done})}},{key:"read",value:function(i,s,o){var a=this,A=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,l=arguments.length>4&&arguments[4]!==void 0?arguments[4]:this.retryTimeout,c=arguments.length>5?arguments[5]:void 0;if(!i.length)return c(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:i,ns:s,fcName:o,tried:A,wait:l,callback:c});return}this.readingCalls++;var u=function(h,m){if(a.readingCalls--,a.waitingReads.length>0){var g=a.waitingReads.shift();a.read(g.lng,g.ns,g.fcName,g.tried,g.wait,g.callback)}if(h&&m&&A<a.maxRetries){setTimeout(function(){a.read.call(a,i,s,o,A+1,l*2,c)},l);return}c(h,m)},f=this.backend[o].bind(this.backend);if(f.length===2){try{var d=f(i,s);d&&typeof d.then=="function"?d.then(function(p){return u(null,p)}).catch(u):u(null,d)}catch(p){u(p)}return}return f(i,s,u)}},{key:"prepareLoading",value:function(i,s){var o=this,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},A=arguments.length>3?arguments[3]:void 0;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),A&&A();typeof i=="string"&&(i=this.languageUtils.toResolveHierarchy(i)),typeof s=="string"&&(s=[s]);var l=this.queueLoad(i,s,a,A);if(!l.toLoad.length)return l.pending.length||A(),null;l.toLoad.forEach(function(c){o.loadOne(c)})}},{key:"load",value:function(i,s,o){this.prepareLoading(i,s,{},o)}},{key:"reload",value:function(i,s,o){this.prepareLoading(i,s,{reload:!0},o)}},{key:"loadOne",value:function(i){var s=this,o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",a=i.split("|"),A=a[0],l=a[1];this.read(A,l,"read",void 0,void 0,function(c,u){c&&s.logger.warn("".concat(o,"loading namespace ").concat(l," for language ").concat(A," failed"),c),!c&&u&&s.logger.log("".concat(o,"loaded namespace ").concat(l," for language ").concat(A),u),s.loaded(i,c,u)})}},{key:"saveMissing",value:function(i,s,o,a,A){var l=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{},c=arguments.length>6&&arguments[6]!==void 0?arguments[6]:function(){};if(this.services.utils&&this.services.utils.hasLoadedNamespace&&!this.services.utils.hasLoadedNamespace(s)){this.logger.warn('did not save key "'.concat(o,'" as the namespace "').concat(s,'" was not yet loaded'),"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(o==null||o==="")){if(this.backend&&this.backend.create){var u=pR(pR({},l),{},{isUpdate:A}),f=this.backend.create.bind(this.backend);if(f.length<6)try{var d;f.length===5?d=f(i,s,o,a,u):d=f(i,s,o,a),d&&typeof d.then=="function"?d.then(function(p){return c(null,p)}).catch(c):c(null,d)}catch(p){c(p)}else f(i,s,o,a,c,u)}!i||!i[0]||this.store.addResource(i[0],s,o,a)}}}]),t}(tl);function gR(){return{debug:!1,initImmediate:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!0,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:function(e){var t={};if(us(e[1])==="object"&&(t=e[1]),typeof e[1]=="string"&&(t.defaultValue=e[1]),typeof e[2]=="string"&&(t.tDescription=e[2]),us(e[2])==="object"||us(e[3])==="object"){var n=e[3]||e[2];Object.keys(n).forEach(function(i){t[i]=n[i]})}return t},interpolation:{escapeValue:!0,format:function(e,t,n,i){return e},prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0}}}function mR(r){return typeof r.ns=="string"&&(r.ns=[r.ns]),typeof r.fallbackLng=="string"&&(r.fallbackLng=[r.fallbackLng]),typeof r.fallbackNS=="string"&&(r.fallbackNS=[r.fallbackNS]),r.supportedLngs&&r.supportedLngs.indexOf("cimode")<0&&(r.supportedLngs=r.supportedLngs.concat(["cimode"])),r}function BR(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function so(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?BR(Object(t),!0).forEach(function(n){Xo(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):BR(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function Kne(r){var e=jne();return function(){var n=Lo(r),i;if(e){var s=Lo(this).constructor;i=Reflect.construct(n,arguments,s)}else i=n.apply(this,arguments);return Lp(this,i)}}function jne(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Am(){}function qne(r){var e=Object.getOwnPropertyNames(Object.getPrototypeOf(r));e.forEach(function(t){typeof r[t]=="function"&&(r[t]=r[t].bind(r))})}var mB=function(r){Sv(t,r);var e=Kne(t);function t(){var n,i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},s=arguments.length>1?arguments[1]:void 0;if(Cs(this,t),n=e.call(this),_v&&tl.call(PA(n)),n.options=mR(i),n.services={},n.logger=Uo,n.modules={external:[]},qne(PA(n)),s&&!n.isInitialized&&!i.isClone){if(!n.options.initImmediate)return n.init(i,s),Lp(n,PA(n));setTimeout(function(){n.init(i,s)},0)}return n}return ws(t,[{key:"init",value:function(){var i=this,s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},o=arguments.length>1?arguments[1]:void 0;typeof s=="function"&&(o=s,s={}),!s.defaultNS&&s.defaultNS!==!1&&s.ns&&(typeof s.ns=="string"?s.defaultNS=s.ns:s.ns.indexOf("translation")<0&&(s.defaultNS=s.ns[0]));var a=gR();this.options=so(so(so({},a),this.options),mR(s)),this.options.compatibilityAPI!=="v1"&&(this.options.interpolation=so(so({},a.interpolation),this.options.interpolation)),s.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=s.keySeparator),s.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=s.nsSeparator);function A(g){return g?typeof g=="function"?new g:g:null}if(!this.options.isClone){this.modules.logger?Uo.init(A(this.modules.logger),this.options):Uo.init(null,this.options);var l;this.modules.formatter?l=this.modules.formatter:typeof Intl<"u"&&(l=One);var c=new cR(this.options);this.store=new Nne(this.options.resources,this.options);var u=this.services;u.logger=Uo,u.resourceStore=this.store,u.languageUtils=c,u.pluralResolver=new Pne(c,{prepend:this.options.pluralSeparator,compatibilityJSON:this.options.compatibilityJSON,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),l&&(!this.options.interpolation.format||this.options.interpolation.format===a.interpolation.format)&&(u.formatter=A(l),u.formatter.init(u,this.options),this.options.interpolation.format=u.formatter.format.bind(u.formatter)),u.interpolator=new Jne(this.options),u.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},u.backendConnector=new Yne(A(this.modules.backend),u.resourceStore,u,this.options),u.backendConnector.on("*",function(g){for(var B=arguments.length,v=new Array(B>1?B-1:0),w=1;w<B;w++)v[w-1]=arguments[w];i.emit.apply(i,[g].concat(v))}),this.modules.languageDetector&&(u.languageDetector=A(this.modules.languageDetector),u.languageDetector.init&&u.languageDetector.init(u,this.options.detection,this.options)),this.modules.i18nFormat&&(u.i18nFormat=A(this.modules.i18nFormat),u.i18nFormat.init&&u.i18nFormat.init(this)),this.translator=new lR(this.services,this.options),this.translator.on("*",function(g){for(var B=arguments.length,v=new Array(B>1?B-1:0),w=1;w<B;w++)v[w-1]=arguments[w];i.emit.apply(i,[g].concat(v))}),this.modules.external.forEach(function(g){g.init&&g.init(i)})}if(this.format=this.options.interpolation.format,o||(o=Am),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){var f=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);f.length>0&&f[0]!=="dev"&&(this.options.lng=f[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined");var d=["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"];d.forEach(function(g){i[g]=function(){var B;return(B=i.store)[g].apply(B,arguments)}});var p=["addResource","addResources","addResourceBundle","removeResourceBundle"];p.forEach(function(g){i[g]=function(){var B;return(B=i.store)[g].apply(B,arguments),i}});var h=bd(),m=function(){var B=function(w,C){i.isInitialized&&!i.initializedStoreOnce&&i.logger.warn("init: i18next is already initialized. You should call init just once!"),i.isInitialized=!0,i.options.isClone||i.logger.log("initialized",i.options),i.emit("initialized",i.options),h.resolve(C),o(w,C)};if(i.languages&&i.options.compatibilityAPI!=="v1"&&!i.isInitialized)return B(null,i.t.bind(i));i.changeLanguage(i.options.lng,B)};return this.options.resources||!this.options.initImmediate?m():setTimeout(m,0),h}},{key:"loadResources",value:function(i){var s=this,o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Am,a=o,A=typeof i=="string"?i:this.language;if(typeof i=="function"&&(a=i),!this.options.resources||this.options.partialBundledLanguages){if(A&&A.toLowerCase()==="cimode")return a();var l=[],c=function(d){if(d){var p=s.services.languageUtils.toResolveHierarchy(d);p.forEach(function(h){l.indexOf(h)<0&&l.push(h)})}};if(A)c(A);else{var u=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);u.forEach(function(f){return c(f)})}this.options.preload&&this.options.preload.forEach(function(f){return c(f)}),this.services.backendConnector.load(l,this.options.ns,function(f){!f&&!s.resolvedLanguage&&s.language&&s.setResolvedLanguage(s.language),a(f)})}else a(null)}},{key:"reloadResources",value:function(i,s,o){var a=bd();return i||(i=this.languages),s||(s=this.options.ns),o||(o=Am),this.services.backendConnector.reload(i,s,function(A){a.resolve(),o(A)}),a}},{key:"use",value:function(i){if(!i)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!i.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return i.type==="backend"&&(this.modules.backend=i),(i.type==="logger"||i.log&&i.warn&&i.error)&&(this.modules.logger=i),i.type==="languageDetector"&&(this.modules.languageDetector=i),i.type==="i18nFormat"&&(this.modules.i18nFormat=i),i.type==="postProcessor"&&eL.addPostProcessor(i),i.type==="formatter"&&(this.modules.formatter=i),i.type==="3rdParty"&&this.modules.external.push(i),this}},{key:"setResolvedLanguage",value:function(i){if(!(!i||!this.languages)&&!(["cimode","dev"].indexOf(i)>-1))for(var s=0;s<this.languages.length;s++){var o=this.languages[s];if(!(["cimode","dev"].indexOf(o)>-1)&&this.store.hasLanguageSomeTranslations(o)){this.resolvedLanguage=o;break}}}},{key:"changeLanguage",value:function(i,s){var o=this;this.isLanguageChangingTo=i;var a=bd();this.emit("languageChanging",i);var A=function(f){o.language=f,o.languages=o.services.languageUtils.toResolveHierarchy(f),o.resolvedLanguage=void 0,o.setResolvedLanguage(f)},l=function(f,d){d?(A(d),o.translator.changeLanguage(d),o.isLanguageChangingTo=void 0,o.emit("languageChanged",d),o.logger.log("languageChanged",d)):o.isLanguageChangingTo=void 0,a.resolve(function(){return o.t.apply(o,arguments)}),s&&s(f,function(){return o.t.apply(o,arguments)})},c=function(f){!i&&!f&&o.services.languageDetector&&(f=[]);var d=typeof f=="string"?f:o.services.languageUtils.getBestMatchFromCodes(f);d&&(o.language||A(d),o.translator.language||o.translator.changeLanguage(d),o.services.languageDetector&&o.services.languageDetector.cacheUserLanguage&&o.services.languageDetector.cacheUserLanguage(d)),o.loadResources(d,function(p){l(p,d)})};return!i&&this.services.languageDetector&&!this.services.languageDetector.async?c(this.services.languageDetector.detect()):!i&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(c):this.services.languageDetector.detect(c):c(i),a}},{key:"getFixedT",value:function(i,s,o){var a=this,A=function l(c,u){var f;if(us(u)!=="object"){for(var d=arguments.length,p=new Array(d>2?d-2:0),h=2;h<d;h++)p[h-2]=arguments[h];f=a.options.overloadTranslationOptionHandler([c,u].concat(p))}else f=so({},u);f.lng=f.lng||l.lng,f.lngs=f.lngs||l.lngs,f.ns=f.ns||l.ns,f.keyPrefix=f.keyPrefix||o||l.keyPrefix;var m=a.options.keySeparator||".",g;return f.keyPrefix&&Array.isArray(c)?g=c.map(function(B){return"".concat(f.keyPrefix).concat(m).concat(B)}):g=f.keyPrefix?"".concat(f.keyPrefix).concat(m).concat(c):c,a.t(g,f)};return typeof i=="string"?A.lng=i:A.lngs=i,A.ns=s,A.keyPrefix=o,A}},{key:"t",value:function(){var i;return this.translator&&(i=this.translator).translate.apply(i,arguments)}},{key:"exists",value:function(){var i;return this.translator&&(i=this.translator).exists.apply(i,arguments)}},{key:"setDefaultNamespace",value:function(i){this.options.defaultNS=i}},{key:"hasLoadedNamespace",value:function(i){var s=this,o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;var a=this.resolvedLanguage||this.languages[0],A=this.options?this.options.fallbackLng:!1,l=this.languages[this.languages.length-1];if(a.toLowerCase()==="cimode")return!0;var c=function(d,p){var h=s.services.backendConnector.state["".concat(d,"|").concat(p)];return h===-1||h===2};if(o.precheck){var u=o.precheck(this,c);if(u!==void 0)return u}return!!(this.hasResourceBundle(a,i)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||c(a,i)&&(!A||c(l,i)))}},{key:"loadNamespaces",value:function(i,s){var o=this,a=bd();return this.options.ns?(typeof i=="string"&&(i=[i]),i.forEach(function(A){o.options.ns.indexOf(A)<0&&o.options.ns.push(A)}),this.loadResources(function(A){a.resolve(),s&&s(A)}),a):(s&&s(),Promise.resolve())}},{key:"loadLanguages",value:function(i,s){var o=bd();typeof i=="string"&&(i=[i]);var a=this.options.preload||[],A=i.filter(function(l){return a.indexOf(l)<0});return A.length?(this.options.preload=a.concat(A),this.loadResources(function(l){o.resolve(),s&&s(l)}),o):(s&&s(),Promise.resolve())}},{key:"dir",value:function(i){if(i||(i=this.resolvedLanguage||(this.languages&&this.languages.length>0?this.languages[0]:this.language)),!i)return"rtl";var s=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],o=this.services&&this.services.languageUtils||new cR(gR());return s.indexOf(o.getLanguagePartFromCode(i))>-1||i.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}},{key:"cloneInstance",value:function(){var i=this,s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Am,a=so(so(so({},this.options),s),{isClone:!0}),A=new t(a);(s.debug!==void 0||s.prefix!==void 0)&&(A.logger=A.logger.clone(s));var l=["store","services","language"];return l.forEach(function(c){A[c]=i[c]}),A.services=so({},this.services),A.services.utils={hasLoadedNamespace:A.hasLoadedNamespace.bind(A)},A.translator=new lR(A.services,A.options),A.translator.on("*",function(c){for(var u=arguments.length,f=new Array(u>1?u-1:0),d=1;d<u;d++)f[d-1]=arguments[d];A.emit.apply(A,[c].concat(f))}),A.init(a,o),A.translator.options=A.options,A.translator.backendConnector.services.utils={hasLoadedNamespace:A.hasLoadedNamespace.bind(A)},A}},{key:"toJSON",value:function(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}]),t}(tl);Xo(mB,"createInstance",function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0;return new mB(r,e)});var Rr=mB.createInstance();Rr.createInstance=mB.createInstance;Rr.createInstance;Rr.dir;Rr.init;Rr.loadResources;Rr.reloadResources;Rr.use;Rr.changeLanguage;Rr.getFixedT;Rr.t;Rr.exists;Rr.setDefaultNamespace;Rr.hasLoadedNamespace;Rr.loadNamespaces;Rr.loadLanguages;function $ne(){if(console&&console.warn){for(var r,e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];typeof t[0]=="string"&&(t[0]="react-i18next:: ".concat(t[0])),(r=console).warn.apply(r,t)}}var vR={};function PI(){for(var r=arguments.length,e=new Array(r),t=0;t<r;t++)e[t]=arguments[t];typeof e[0]=="string"&&vR[e[0]]||(typeof e[0]=="string"&&(vR[e[0]]=new Date),$ne.apply(void 0,e))}function yR(r,e,t){r.loadNamespaces(e,function(){if(r.isInitialized)t();else{var n=function i(){setTimeout(function(){r.off("initialized",i)},0),t()};r.on("initialized",n)}})}function ere(r,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},n=e.languages[0],i=e.options?e.options.fallbackLng:!1,s=e.languages[e.languages.length-1];if(n.toLowerCase()==="cimode")return!0;var o=function(A,l){var c=e.services.backendConnector.state["".concat(A,"|").concat(l)];return c===-1||c===2};return t.bindI18n&&t.bindI18n.indexOf("languageChanging")>-1&&e.services.backendConnector.backend&&e.isLanguageChangingTo&&!o(e.isLanguageChangingTo,r)?!1:!!(e.hasResourceBundle(n,r)||!e.services.backendConnector.backend||e.options.resources&&!e.options.partialBundledLanguages||o(n,r)&&(!i||o(s,r)))}function tre(r,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(!e.languages||!e.languages.length)return PI("i18n.languages were undefined or empty",e.languages),!0;var n=e.options.ignoreJSONStructure!==void 0;return n?e.hasLoadedNamespace(r,{precheck:function(s,o){if(t.bindI18n&&t.bindI18n.indexOf("languageChanging")>-1&&s.services.backendConnector.backend&&s.isLanguageChangingTo&&!o(s.isLanguageChangingTo,r))return!1}}):ere(r,e,t)}var nre=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,rre={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"","&#169;":"","&reg;":"","&#174;":"","&hellip;":"","&#8230;":"","&#x2F;":"/","&#47;":"/"},ire=function(e){return rre[e]},sre=function(e){return e.replace(nre,ire)};function CR(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function wR(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?CR(Object(t),!0).forEach(function(n){Xo(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):CR(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}var JI={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:sre};function ore(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};JI=wR(wR({},JI),r)}function are(){return JI}var tL;function Are(r){tL=r}function lre(){return tL}var cre={type:"3rdParty",init:function(e){ore(e.options.react),Are(e)}},ure=Ie.createContext(),fre=function(){function r(){Cs(this,r),this.usedNamespaces={}}return ws(r,[{key:"addUsedNamespaces",value:function(t){var n=this;t.forEach(function(i){n.usedNamespaces[i]||(n.usedNamespaces[i]=!0)})}},{key:"getUsedNamespaces",value:function(){return Object.keys(this.usedNamespaces)}}]),r}();function dre(r,e){var t=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(t!=null){var n,i,s,o,a=[],A=!0,l=!1;try{if(s=(t=t.call(r)).next,e===0){if(Object(t)!==t)return;A=!1}else for(;!(A=(n=s.call(t)).done)&&(a.push(n.value),a.length!==e);A=!0);}catch(c){l=!0,i=c}finally{try{if(!A&&t.return!=null&&(o=t.return(),Object(o)!==o))return}finally{if(l)throw i}}return a}}function hre(r,e){return Yk(r)||dre(r,e)||Kk(r,e)||jk()}function FR(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function tw(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?FR(Object(t),!0).forEach(function(n){Xo(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):FR(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}var pre=function(e,t){var n=Ie.useRef();return Ie.useEffect(function(){n.current=t?n.current:e},[e,t]),n.current};function nL(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},t=e.i18n,n=Ie.useContext(ure)||{},i=n.i18n,s=n.defaultNS,o=t||i||lre();if(o&&!o.reportNamespaces&&(o.reportNamespaces=new fre),!o){PI("You will need to pass in an i18next instance by using initReactI18next");var a=function(S,V){return typeof V=="string"?V:V&&us(V)==="object"&&typeof V.defaultValue=="string"?V.defaultValue:Array.isArray(S)?S[S.length-1]:S},A=[a,{},!1];return A.t=a,A.i18n={},A.ready=!1,A}o.options.react&&o.options.react.wait!==void 0&&PI("It seems you are still using the old wait option, you may migrate to the new useSuspense behaviour.");var l=tw(tw(tw({},are()),o.options.react),e),c=l.useSuspense,u=l.keyPrefix,f=r||s||o.options&&o.options.defaultNS;f=typeof f=="string"?[f]:f||["translation"],o.reportNamespaces.addUsedNamespaces&&o.reportNamespaces.addUsedNamespaces(f);var d=(o.isInitialized||o.initializedStoreOnce)&&f.every(function(U){return tre(U,o,l)});function p(){return o.getFixedT(null,l.nsMode==="fallback"?f:f[0],u)}var h=Ie.useState(p),m=hre(h,2),g=m[0],B=m[1],v=f.join(),w=pre(v),C=Ie.useRef(!0);Ie.useEffect(function(){var U=l.bindI18n,S=l.bindI18nStore;C.current=!0,!d&&!c&&yR(o,f,function(){C.current&&B(p)}),d&&w&&w!==v&&C.current&&B(p);function V(){C.current&&B(p)}return U&&o&&o.on(U,V),S&&o&&o.store.on(S,V),function(){C.current=!1,U&&o&&U.split(" ").forEach(function(J){return o.off(J,V)}),S&&o&&S.split(" ").forEach(function(J){return o.store.off(J,V)})}},[o,v]);var I=Ie.useRef(!0);Ie.useEffect(function(){C.current&&!I.current&&B(p),I.current=!1},[o,u]);var E=[g,o,d];if(E.t=g,E.i18n=o,E.ready=d,d||!d&&!c)return E;throw new Promise(function(U){yR(o,f,function(){U()})})}var rL=[],gre=rL.forEach,mre=rL.slice;function Bre(r){return gre.call(mre.call(arguments,1),function(e){if(e)for(var t in e)r[t]===void 0&&(r[t]=e[t])}),r}var IR=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/,vre=function(e,t,n){var i=n||{};i.path=i.path||"/";var s=encodeURIComponent(t),o="".concat(e,"=").concat(s);if(i.maxAge>0){var a=i.maxAge-0;if(Number.isNaN(a))throw new Error("maxAge should be a Number");o+="; Max-Age=".concat(Math.floor(a))}if(i.domain){if(!IR.test(i.domain))throw new TypeError("option domain is invalid");o+="; Domain=".concat(i.domain)}if(i.path){if(!IR.test(i.path))throw new TypeError("option path is invalid");o+="; Path=".concat(i.path)}if(i.expires){if(typeof i.expires.toUTCString!="function")throw new TypeError("option expires is invalid");o+="; Expires=".concat(i.expires.toUTCString())}if(i.httpOnly&&(o+="; HttpOnly"),i.secure&&(o+="; Secure"),i.sameSite){var A=typeof i.sameSite=="string"?i.sameSite.toLowerCase():i.sameSite;switch(A){case!0:o+="; SameSite=Strict";break;case"lax":o+="; SameSite=Lax";break;case"strict":o+="; SameSite=Strict";break;case"none":o+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}}return o},UR={create:function(e,t,n,i){var s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{path:"/",sameSite:"strict"};n&&(s.expires=new Date,s.expires.setTime(s.expires.getTime()+n*60*1e3)),i&&(s.domain=i),document.cookie=vre(e,encodeURIComponent(t),s)},read:function(e){for(var t="".concat(e,"="),n=document.cookie.split(";"),i=0;i<n.length;i++){for(var s=n[i];s.charAt(0)===" ";)s=s.substring(1,s.length);if(s.indexOf(t)===0)return s.substring(t.length,s.length)}return null},remove:function(e){this.create(e,"",-1)}},yre={name:"cookie",lookup:function(e){var t;if(e.lookupCookie&&typeof document<"u"){var n=UR.read(e.lookupCookie);n&&(t=n)}return t},cacheUserLanguage:function(e,t){t.lookupCookie&&typeof document<"u"&&UR.create(t.lookupCookie,e,t.cookieMinutes,t.cookieDomain,t.cookieOptions)}},Cre={name:"querystring",lookup:function(e){var t;if(typeof window<"u"){var n=window.location.search;!window.location.search&&window.location.hash&&window.location.hash.indexOf("?")>-1&&(n=window.location.hash.substring(window.location.hash.indexOf("?")));for(var i=n.substring(1),s=i.split("&"),o=0;o<s.length;o++){var a=s[o].indexOf("=");if(a>0){var A=s[o].substring(0,a);A===e.lookupQuerystring&&(t=s[o].substring(a+1))}}}return t}},Ed=null,xR=function(){if(Ed!==null)return Ed;try{Ed=window!=="undefined"&&window.localStorage!==null;var e="i18next.translate.boo";window.localStorage.setItem(e,"foo"),window.localStorage.removeItem(e)}catch{Ed=!1}return Ed},wre={name:"localStorage",lookup:function(e){var t;if(e.lookupLocalStorage&&xR()){var n=window.localStorage.getItem(e.lookupLocalStorage);n&&(t=n)}return t},cacheUserLanguage:function(e,t){t.lookupLocalStorage&&xR()&&window.localStorage.setItem(t.lookupLocalStorage,e)}},Sd=null,QR=function(){if(Sd!==null)return Sd;try{Sd=window!=="undefined"&&window.sessionStorage!==null;var e="i18next.translate.boo";window.sessionStorage.setItem(e,"foo"),window.sessionStorage.removeItem(e)}catch{Sd=!1}return Sd},Fre={name:"sessionStorage",lookup:function(e){var t;if(e.lookupSessionStorage&&QR()){var n=window.sessionStorage.getItem(e.lookupSessionStorage);n&&(t=n)}return t},cacheUserLanguage:function(e,t){t.lookupSessionStorage&&QR()&&window.sessionStorage.setItem(t.lookupSessionStorage,e)}},Ire={name:"navigator",lookup:function(e){var t=[];if(typeof navigator<"u"){if(navigator.languages)for(var n=0;n<navigator.languages.length;n++)t.push(navigator.languages[n]);navigator.userLanguage&&t.push(navigator.userLanguage),navigator.language&&t.push(navigator.language)}return t.length>0?t:void 0}},Ure={name:"htmlTag",lookup:function(e){var t,n=e.htmlTag||(typeof document<"u"?document.documentElement:null);return n&&typeof n.getAttribute=="function"&&(t=n.getAttribute("lang")),t}},xre={name:"path",lookup:function(e){var t;if(typeof window<"u"){var n=window.location.pathname.match(/\/([a-zA-Z-]*)/g);if(n instanceof Array)if(typeof e.lookupFromPathIndex=="number"){if(typeof n[e.lookupFromPathIndex]!="string")return;t=n[e.lookupFromPathIndex].replace("/","")}else t=n[0].replace("/","")}return t}},Qre={name:"subdomain",lookup:function(e){var t=typeof e.lookupFromSubdomainIndex=="number"?e.lookupFromSubdomainIndex+1:1,n=typeof window<"u"&&window.location&&window.location.hostname&&window.location.hostname.match(/^(\w{2,5})\.(([a-z0-9-]{1,63}\.[a-z]{2,6})|localhost)/i);if(n)return n[t]}};function bre(){return{order:["querystring","cookie","localStorage","sessionStorage","navigator","htmlTag"],lookupQuerystring:"lng",lookupCookie:"i18next",lookupLocalStorage:"i18nextLng",lookupSessionStorage:"i18nextLng",caches:["localStorage"],excludeCacheFor:["cimode"]}}var iL=function(){function r(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Cs(this,r),this.type="languageDetector",this.detectors={},this.init(e,t)}return ws(r,[{key:"init",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.services=t,this.options=Bre(n,this.options||{},bre()),this.options.lookupFromUrlIndex&&(this.options.lookupFromPathIndex=this.options.lookupFromUrlIndex),this.i18nOptions=i,this.addDetector(yre),this.addDetector(Cre),this.addDetector(wre),this.addDetector(Fre),this.addDetector(Ire),this.addDetector(Ure),this.addDetector(xre),this.addDetector(Qre)}},{key:"addDetector",value:function(t){this.detectors[t.name]=t}},{key:"detect",value:function(t){var n=this;t||(t=this.options.order);var i=[];return t.forEach(function(s){if(n.detectors[s]){var o=n.detectors[s].lookup(n.options);o&&typeof o=="string"&&(o=[o]),o&&(i=i.concat(o))}}),this.services.languageUtils.getBestMatchFromCodes?i:i.length>0?i[0]:null}},{key:"cacheUserLanguage",value:function(t,n){var i=this;n||(n=this.options.caches),n&&(this.options.excludeCacheFor&&this.options.excludeCacheFor.indexOf(t)>-1||n.forEach(function(s){i.detectors[s]&&i.detectors[s].cacheUserLanguage(t,i.options)}))}}]),r}();iL.type="languageDetector";const Ere={translation:{pageTitles:{chooseClass:"Choose Character Class",chooseAppearance:"Choose Appearance",createBio:"Create Bio",saveCharacter:"Save Your Character",chat:"Chat With Your Character"},classes:{beastPainter:{name:"Beast Painter",description:"Paints beasts"},engineer:{name:"Engineer",description:"Builds things"},dropHunter:{name:"Drop Hunter",description:"Hunts drops"},theDegen:{name:"The Degen",description:"Degens"},neuralHacker:{name:"Neural Hacker",description:"Hacks neural networks"},liskWitch:{name:"Lisk Witch",description:"Witches lisk"},bruiser:{name:"Bruiser",description:"Bruises things"}},callToAction:{next:"Next",back:"Back",randomize:"Randomize",chat:"Chat",send:"Send"},editor:{title:"Appearance",head:"Head",body:"Body",eyes:"Eyes",outer:"Outer",chest:"Chest",legs:"Legs",feet:"Feet",accessories:"Accessories"},labels:{name:"Name",voice:"Voice",favoriteColor:"Favorite Color",preferredGreeting:"Preferred Greeting",bio:"Bio",question:"Question",yourName:"Your Name",conversation:"Conversation"},text:{unoptimized:"Unoptimized",apiUnderMaintnance:"Voice generation API is temporarily disabled for maintenance!"}}},Sre={translation:{pageTitles:{chooseClass:"  ",chooseAppearance:" ",createBio:" ",saveCharacter:" ",chat:"   "},classes:{beastPainter:{name:"",description:" "},engineer:{name:"",description:" "},dropHunter:{name:"  ",description:"  "},theDegen:{name:"",description:""},neuralHacker:{name:" ",description:" . "},liskWitch:{name:" ",description:" "},bruiser:{name:"",description:" "}},callToAction:{next:"",back:"",randomize:"",chat:"",send:""},editor:{title:"",head:"",body:"",eyes:"",outer:"",chest:"",legs:"",feet:"",accessories:""},labels:{name:"",voice:"",favoriteColor:" ",preferredGreeting:" ",bio:"",question:"",yourName:" ",conversation:""},text:{unoptimized:"",apiUnderMaintnance:"API       ."}}},_re={translation:{pageTitles:{chooseClass:"",chooseAppearance:"",createBio:"",saveCharacter:"",chat:""},classes:{beastPainter:{name:"",description:""},engineer:{name:"",description:""},dropHunter:{name:"",description:""},theDegen:{name:"",description:""},neuralHacker:{name:"",description:""},liskWitch:{name:"Lisk ",description:" Lisk"},bruiser:{name:"",description:""}},callToAction:{next:"",back:"",randomize:"",chat:"",send:""},editor:{title:"",head:"",body:"",eyes:"",outer:"",chest:"",legs:"",feet:"",accessories:""},labels:{name:"",voice:"",favoriteColor:"",preferredGreeting:"",bio:"",question:"",yourName:"",conversation:""},text:{unoptimized:"",apiUnderMaintnance:"API!"}}},Rre={en:Ere,ru:Sre,zh:_re};Rr.use(iL).use(cre).init({debug:!0,fallbackLng:"en",interpolation:{escapeValue:!1},resources:Rre});const eo=Ie.createContext(),Mre=r=>{const{t:e}=nL();return ie.jsx(eo.Provider,{value:{t:e},children:r.children})};class Tre{constructor(e=.5,t=.5,n=1,i=5){this.vrmBlinkers=[],this.mode="ready",this.clock=new FK,this.closeTime=e,this.openTime=t,this.continuity=n,this.randomness=i,this._eyeOpen=1,this._blinkCounter=0,this.update()}addBlinker(e){this.vrmBlinkers.push(e)}update(){setInterval(()=>{const e=this.clock.getDelta();switch(this.mode){case"closing":this._eyeOpen>0?this._eyeOpen-=e/this.closeTime:(this._eyeOpen=0,this.mode="open"),this._updateBlinkers();break;case"open":this._eyeOpen<1?this._eyeOpen+=e/this.openTime:(this._eyeOpen=1,this.mode="ready"),this._updateBlinkers();break;case"ready":this._blinkCounter+=e,this._blinkCounter>=this.continuity&&(Math.floor(Math.random()*this.randomness)===0&&(this.mode="closing"),this._blinkCounter=0);break}},1e3/30)}_updateBlinkers(){this.vrmBlinkers.forEach(e=>{e.expressionManager.setValue(Zr.Blink,1-this._eyeOpen),e.expressionManager.update()})}}const nw=new H;class Nre{constructor(e,t){this.neckBones=[],this.spineBones=[],this.leftEyeBones=[],this.rightEyesBones=[],this.curMousePos=new Je,this.hotzoneSection=i(),this.enabled=!0,this.lookInterest=1,this.hasInterest=!0,this.interestSpeed=.3,this.onCanvas=!0,this.camera=null,this.maxLookPercent={neck:{maxy:15,miny:10,maxx:30,minx:10},spine:{maxy:0,miny:0,maxx:30,minx:10},left:{maxy:15,miny:20,maxx:35,minx:35},right:{maxy:15,miny:20,maxx:35,minx:35}},window.addEventListener("mousemove",s=>{this.curMousePos={x:s.clientX,y:s.clientY}});const n=document.getElementById(t);n&&(n.addEventListener("mouseleave",()=>{this.onCanvas=!1}),n.addEventListener("mouseenter",()=>{this.onCanvas=!0})),window.addEventListener("resize",()=>{this.hotzoneSection=i()});function i(){const s=window.innerWidth*e/100,o=(window.innerWidth-s)/2;return{xStart:o,xEnd:window.innerWidth-o,yStart:50,yEnd:window.innerHeight-80}}}setCamera(e){this.camera=e}addVRM(e){e.scene.traverse(t=>{if(t.isBone)switch(t.name){case"neck":this.neckBones.push(t);break;case"spine":this.spineBones.push(t);break;case"leftEye":this.leftEyeBones.push(t);break;case"rightEye":this.rightEyesBones.push(t);break}})}_getMouseDegrees(e,t,n){let i=0,s=0,o,a,A,l,c={x:window.innerWidth,y:window.innerHeight};return e<=c.x/2&&(o=c.x/2-e,a=o/(c.x/2)*100,i=n.maxx*a/100*-1),e>=c.x/2&&(o=e-c.x/2,a=o/(c.x/2)*100,i=n.minx*a/100),t<=c.y/2&&(A=c.y/2-t,l=A/(c.y/2)*100,s=n.maxy*.5*l/100*-1),t>=c.y/2&&(A=t-c.y/2,l=A/(c.y/2)*100,s=n.miny*l/100),{x:i,y:s}}lerp(e,t,n){return(1-n)*e+n*t}_moveJoint(e,t){if(Object.keys(e).length!==0){const n=(this.camera.position.y-1.8)*window.innerHeight/2;let i=this._getMouseDegrees(this.curMousePos.x,this.curMousePos.y-n,t);const s=.8;e.rotation.y=this.lerp(It.degToRad(i.x),e.rotation.y,s),e.rotation.x=this.lerp(It.degToRad(i.y),e.rotation.x,s)}}update(){nw.set(0,0,1),nw.applyQuaternion(this.camera.quaternion);const e=nw.z>0;this.curMousePos.x>this.hotzoneSection.xStart&&this.curMousePos.x<this.hotzoneSection.xEnd&&this.curMousePos.y>this.hotzoneSection.yStart&&this.curMousePos.y<this.hotzoneSection.yEnd&&e&&(this.neckBones.forEach(t=>{this._moveJoint(t,this.maxLookPercent.neck)}),this.spineBones.forEach(t=>{this._moveJoint(t,this.maxLookPercent.spine)}),this.leftEyeBones.forEach(t=>{this._moveJoint(t,this.maxLookPercent.left)}),this.rightEyesBones.forEach(t=>{this._moveJoint(t,this.maxLookPercent.right)}))}}const Vre=`       
  uniform vec3 cameraDir;
  uniform vec3 eye;
  
  varying vec3 vWorldPosition;
  varying vec3 vSurfaceNormal;

  varying vec2 vUv;

  void main() {
    vUv = uv;
    vec3 pos = position;
    vSurfaceNormal = normalize(normal);
    vWorldPosition = (modelMatrix * vec4( pos, 1.0 )).xyz;
    gl_Position = projectionMatrix * modelViewMatrix * vec4( pos, 1.0 ); 
  }
`,Dre=` 
  uniform float switchItemDuration;
  uniform float switchItemTime;
  uniform vec3 cameraDir;
  uniform vec3 eye;

  uniform sampler2D auraTexture;

  varying vec3 vSurfaceNormal;
  varying vec3 vWorldPosition;
  varying vec2 vUv;
  void main() {
    float aura = texture2D(
      auraTexture, 
      vec2(
        vUv.x * 2.0,
        vUv.y * 1.0 * (switchItemDuration - switchItemTime)
      )
    ).r;
    
    float dissolveThreshold = 0.1;
    float auraStep = switchItemTime <= dissolveThreshold ? 0. : clamp(switchItemTime, dissolveThreshold, 1.0);
    aura = smoothstep(0.0, auraStep, aura);
    

    vec3 eyeDirection = normalize(eye - vWorldPosition);
    
    float EdotN = max(0.0, dot(eyeDirection, vSurfaceNormal));
    float rimStrength = 0.7;
    float rim = mix(0.0, 1.0, pow(1. - EdotN, rimStrength));
    float glowIntensity = 2.0;

    vec3 rimColor = mix(vec3(0.00960, 0.833, 0.960), vec3(0., 0., 0.960), rim);
    gl_FragColor.rgb = rimColor * (1. - rim) * glowIntensity;
    gl_FragColor.a = clamp((1. - rim) * glowIntensity, 0.0, 1.0);
    gl_FragColor.a *= (switchItemDuration - switchItemTime);
    gl_FragColor *= aura;
  }
`,kre=`       
  uniform vec4 cameraBillboardQuaternion;

  attribute vec2 scales;
  attribute float opacity;
  attribute vec3 positions;

  varying vec2 vUv;
  varying float vOpacity;
  varying vec3 vWorldPosition;

  vec3 rotateVecQuat(vec3 position, vec4 q) {
      vec3 v = position.xyz;
      return v + 2.0 * cross(q.xyz, cross(q.xyz, v) + q.w * v);
  }
  
  void main() {  
    vUv = uv;
    vOpacity = opacity;
    
    vec3 pos = position;
    pos = rotateVecQuat(pos, cameraBillboardQuaternion);
    pos.xz *= scales.x;
    pos.y *= scales.y;
    pos += positions;
    vec4 modelPosition = modelMatrix * vec4(pos, 1.0);
    vWorldPosition = modelPosition.xyz;
    vec4 viewPosition = viewMatrix * modelPosition;
    vec4 projectionPosition = projectionMatrix * viewPosition;
    gl_Position = projectionPosition;
  }
`,Lre=` 
  varying vec2 vUv;
  varying float vOpacity;
  varying vec3 vWorldPosition;

  void main() {
    float angle = 0.;
    vec2 trig = vec2(cos(angle), sin(angle));
    
    vec2 pos = (vUv - 0.5) * mat2(trig.x, trig.y, -trig.y, trig.x);
    float size = 0.1;
    
    float dist = length(max(abs(pos) - size, 0.));
    float glow = 1. / (dist * 25. + .5);

    gl_FragColor = vec4(glow);
    gl_FragColor.rgb *= vec3(0.00960, 0.833, 0.960);
    float avatarGroundPosition = 0.;
    if (glow < 0.1 || vWorldPosition.y < avatarGroundPosition) {
      discard;
    }
    gl_FragColor.a *= vOpacity;
  }
`,Wre=`       
  attribute vec2 scales;
  attribute float opacity;
  attribute vec3 positions;

  varying vec2 vUv;
  varying float vOpacity;
  varying vec3 vWorldPosition;
  varying vec3 vSurfaceNormal;
  

  void main() {  
    vUv = uv;
    vOpacity = opacity;
    vSurfaceNormal = normalize(normal);
    
    vec3 pos = position;
    pos.xz *= scales.x;
    pos.y *= scales.y;
    pos += positions;
    vec4 modelPosition = modelMatrix * vec4(pos, 1.0);
    vWorldPosition = modelPosition.xyz;
    vec4 viewPosition = viewMatrix * modelPosition;
    vec4 projectionPosition = projectionMatrix * viewPosition;
    gl_Position = projectionPosition;
  }
`,Zre=` 
  uniform float radius;

  varying vec2 vUv;
  varying float vOpacity;
  varying vec3 vWorldPosition;
  varying vec3 vSurfaceNormal;

  void main() {

    vec3 eyeDirection = normalize(vec3(0., 10., 0.) - vWorldPosition);
      
    float EdotN = max(0.0, dot(eyeDirection, vSurfaceNormal));
    float rimStrength = 10.0;
    float rim = distance(vWorldPosition.xz, vec2(0.)) / radius;
    rim = pow(rim, rimStrength);
    
  
    gl_FragColor.rgb = vec3(rim) * vec3(0.00960, 0.833, 0.960) * 2.0;
    gl_FragColor.a = rim;
    gl_FragColor.a = smoothstep(0.3, 0.8, gl_FragColor.a);
    gl_FragColor.a *= vOpacity;
  }
`,Pre=`       
  uniform vec4 cameraBillboardQuaternion;

  varying vec2 vUv;
  varying vec3 vWorldPosition;
  
  vec3 rotateVecQuat(vec3 position, vec4 q) {
      vec3 v = position.xyz;
      return v + 2.0 * cross(q.xyz, cross(q.xyz, v) + q.w * v);
  }
  void main() {  
    vUv = uv;
    
    vec3 pos = position;
    pos = rotateVecQuat(pos, cameraBillboardQuaternion);
    vec4 modelPosition = modelMatrix * vec4(pos, 1.0);
    vWorldPosition = modelPosition.xyz;
    vec4 viewPosition = viewMatrix * modelPosition;
    vec4 projectionPosition = projectionMatrix * viewPosition;
    gl_Position = projectionPosition;
  }
`,Jre=` 
  varying vec2 vUv;
  varying vec3 vWorldPosition;

  void main() {
    float col = smoothstep(0.5, 0.2, length(vUv - 0.5));
    gl_FragColor.rgb = mix(vec3(0., 0., 0.960), vec3(0.00960, 0.833, 0.960), col);
    gl_FragColor.a = col;
    gl_FragColor.a *= clamp(vWorldPosition.y * 10., 0.0, 1.0);
  }
`,Gre=`       
  varying vec3 vWorldPosition;
  varying vec3 vSurfaceNormal;

  varying vec2 vUv;

  void main() {
    vUv = uv;
    vec3 pos = position;
    vSurfaceNormal = normalize(normal);
    vWorldPosition = (modelMatrix * vec4( pos, 1.0 )).xyz;
    gl_Position = projectionMatrix * modelViewMatrix * vec4( pos, 1.0 ); 
  }
`,Ore=` 
  uniform vec3 cameraDir;
  uniform vec3 eye;

  uniform float opacity;

  varying vec3 vSurfaceNormal;
  varying vec3 vWorldPosition;
  varying vec2 vUv;
  void main() {
    vec3 eyeDirection = normalize(eye - vWorldPosition);
    
    float EdotN = max(0.0, dot(eyeDirection, vSurfaceNormal));
    float rimStrength = 0.7;
    float rim = mix(0.0, 1.0, pow(1. - EdotN, rimStrength));
    float glowIntensity = 2.0;

    vec3 rimColor = mix(vec3(1.0), vec3(0.400, 0.723, 0.910), rim);
    gl_FragColor = vec4(rimColor, pow(1. - rim, 2.0));
    gl_FragColor *= pow(1. - vUv.y, 3.0);
    gl_FragColor *= opacity;
  }
`,aQ=(r,e,t)=>{const n=new Xt;["position","normal","uv"].forEach(o=>{n.setAttribute(o,r.attributes[o])}),n.setIndex(r.index);const i=new Float32Array(t*3),s=new H0(i,3);n.setAttribute("positions",s);for(const o of e){const{name:a,itemSize:A}=o,l=new Float32Array(t*A);n.setAttribute(a,new H0(l,A))}return n},Hre=r=>{const n=new uv(.45,.45,5,50,50,!0),i=new Ti({uniforms:{auraTexture:{value:null}},vertexShader:Vre,fragmentShader:Dre,transparent:!0,blending:nc});i.uniforms.cameraDir=r.cameraDir,i.uniforms.eye=r.eye,i.uniforms.switchItemTime=r.switchItemTime,i.uniforms.switchItemDuration=r.switchItemDuration;const s=new bn(n,i);return s.frustumCulled=!1,s.position.y=5*.46,s},zre=()=>{const e=[];e.push({name:"opacity",itemSize:1}),e.push({name:"scales",itemSize:2});const t=.3,n=new ic(t,t),i=aQ(n,e,20),s=new Ti({uniforms:{cameraBillboardQuaternion:{value:new $e}},vertexShader:kre,fragmentShader:Lre,depthWrite:!1,blending:nc}),o=new cv(i,s,20);return o.info={particleCount:20,velocity:[20]},o},Xre=r=>{const t=[];t.push({name:"opacity",itemSize:1}),t.push({name:"scales",itemSize:2});const n=.43,i=new Ux(n,32,32),s=aQ(i,t,10),o=new Ti({uniforms:{radius:{value:n}},vertexShader:Wre,fragmentShader:Zre,depthWrite:!1,blending:nc});o.uniforms.cameraDir=r.cameraDir,o.uniforms.eye=r.eye,o.uniforms.fadeInAvatarTime=r.fadeInAvatarTime;const a=new cv(s,o,10);return a.info={particleCount:10,velocity:[10],currentIndex:0},a},Yre=r=>{const t=new ic(1,1),n=new Ti({uniforms:{cameraBillboardQuaternion:{value:new $e}},vertexShader:Pre,fragmentShader:Jre,depthWrite:!1,blending:nc});return new bn(t,n)},Kre=r=>{const t=[],s=new uv(.645,.43,2.5,50,50,!0),o=aQ(s,t,2),a=new Ti({uniforms:{opacity:{value:0}},vertexShader:Gre,fragmentShader:Ore,transparent:!0,blending:nc});a.uniforms.cameraDir=r.cameraDir,a.uniforms.eye=r.eye;const A=new cv(o,a,2);return A.fadeIn=!1,A.frustumCulled=!1,A.position.y=2.5*.46,A},bR=100,jre=0,BB=1.5,qre=.1,$m=0,ER=1,SR=.05,GI=0,$re=1,eie=.015,Kr={normal:0,switchItem:1,fadeOutAvatar:2,loadingAvatar:3,fadeInAvatar:4},tie=new Np,sL=tie.load("/textures/beam2.png");sL.wrapS=ps;class nie{constructor(e,t,n){this.scene=e,this.camera=t,this.globalUniforms=n,this.eye=new H,this.cameraDir=new H,this.beamMesh=null,this.initBeam(),this.pixelMesh=null,this.initPixel(),this.ringMesh=null,this.initRing(),this.teleportMesh=null,this.initTeleport(),this.spotLight=null,this.initSpotLight()}emitBeam(){this.beamMesh.visible=!0}emitPixel(){this.stopUpdatePixelMesh=!1;const e=this.pixelMesh.geometry.getAttribute("scales"),t=this.pixelMesh.geometry.getAttribute("positions"),n=this.pixelMesh.geometry.getAttribute("opacity"),i=this.pixelMesh.info.particleCount,s=.25;for(let o=0;o<i;o++){o%2===0?e.setXY(o,.2,.2):e.setXY(o,.1,3+Math.random());const a=o/i*Math.PI*2;t.setXYZ(o,Math.cos(a)*s,(Math.random()-.5)*2,Math.sin(a)*s),n.setX(o,1+Math.random()),this.pixelMesh.info.velocity[o]=.02+Math.random()*.03}e.needsUpdate=!0,t.needsUpdate=!0,n.needsUpdate=!0}emitRespawnPixel(){this.stopUpdatePixelMesh=!1;const e=this.pixelMesh.geometry.getAttribute("scales"),t=this.pixelMesh.geometry.getAttribute("positions"),n=this.pixelMesh.geometry.getAttribute("opacity"),i=this.pixelMesh.info.particleCount,s=.25;for(let o=0;o<i;o++)if(n.getX(o)<.01){o%2===0?e.setXY(o,.2,.2):e.setXY(o,.1,3+Math.random());const a=o/i*Math.PI*2;t.setXYZ(o,Math.cos(a)*s,Math.random()*-1,Math.sin(a)*s),n.setX(o,1+Math.random()),this.pixelMesh.info.velocity[o]=.05+Math.random()*.05;break}e.needsUpdate=!0,t.needsUpdate=!0,n.needsUpdate=!0}emitRing(e){this.ringMesh.visible=!0;const t=this.ringMesh.geometry.getAttribute("scales"),n=this.ringMesh.geometry.getAttribute("positions"),i=this.ringMesh.geometry.getAttribute("opacity"),s=this.ringMesh.info.particleCount,o=this.ringMesh.info.currentIndex,a=o-1<0?s-1:o-1,A=.1;(n.getY(a)>A+e||i.getX(a)<=0)&&(n.setXYZ(o,0,A,0),t.setXY(o,1,.06),i.setX(o,1),this.ringMesh.info.velocity[o]=.1,this.ringMesh.info.currentIndex++,this.ringMesh.info.currentIndex>=s&&(this.ringMesh.info.currentIndex=0)),t.needsUpdate=!0,n.needsUpdate=!0,i.needsUpdate=!0}emitTeleport(){this.teleportMesh.visible=!0}emitSpotLight(){this.spotLight.visible=!0,this.spotLight.fadeIn=!0}removeSpotLight(){this.spotLight.fadeIn=!1}update(){this.beamMesh.visible&&this.beamMesh.update(),!this.stopUpdatePixelMesh&&this.pixelMesh.update(),this.ringMesh.visible&&this.ringMesh.update(),this.teleportMesh.visible&&this.teleportMesh.update(),this.spotLight.visible&&this.spotLight.update()}initBeam(){this.beamMesh=Hre(this.globalUniforms),this.beamMesh.material.uniforms.auraTexture.value=sL,this.beamMesh.update=()=>this.updateBeam(),this.scene.add(this.beamMesh)}initPixel(){this.pixelMesh=zre(),this.pixelMesh.update=()=>this.updatePixel(),this.scene.add(this.pixelMesh)}initRing(){this.ringMesh=Xre(this.globalUniforms),this.ringMesh.update=()=>this.updateRing(),this.scene.add(this.ringMesh)}initTeleport(){this.teleportMesh=Yre(this.globalUniforms),this.teleportMesh.update=()=>this.updateTeleport(),this.teleportMesh.visible=!1,this.scene.add(this.teleportMesh)}initSpotLight(){this.spotLight=Kre(this.globalUniforms),this.spotLight.update=()=>this.updateSpotLight(),this.spotLight.visible=!1,this.scene.add(this.spotLight)}updateBeam(){this.beamMesh&&this.globalUniforms.transitionEffectType.value!==Kr.switchItem&&(this.beamMesh.visible=!1)}updatePixel(){if(this.pixelMesh){let e=0;const t=this.pixelMesh.geometry.getAttribute("positions"),n=this.pixelMesh.geometry.getAttribute("opacity"),i=this.pixelMesh.info.particleCount;for(let s=0;s<i;s++)n.getX(s)>.01?(t.setY(s,t.getY(s)+this.pixelMesh.info.velocity[s]),n.setX(s,n.getX(s)/1.3)):(n.setX(s,0),e++);e>=i&&(this.stopUpdatePixelMesh=!0),t.needsUpdate=!0,n.needsUpdate=!0,this.pixelMesh.material.uniforms.cameraBillboardQuaternion.value.copy(this.camera.quaternion)}}updateRing(){if(this.ringMesh){const e=this.ringMesh.geometry.getAttribute("positions"),t=this.ringMesh.geometry.getAttribute("opacity"),n=this.ringMesh.info.particleCount;for(let i=0;i<n;i++)t.getX(i)>.01?(e.setY(i,e.getY(i)+this.ringMesh.info.velocity[i]),t.setX(i,t.getX(i)/1.27)):t.setX(i,0);e.needsUpdate=!0,t.needsUpdate=!0,this.globalUniforms.transitionEffectType.value!==Kr.fadeInAvatar&&(this.ringMesh.visible=!1)}}updateTeleport(){if(this.teleportMesh){if(this.globalUniforms.transitionEffectType.value===Kr.fadeOutAvatar){const e=this.globalUniforms.fadeOutAvatarTime.value,t=.2;if(e<t){const n=e*(1/t),i=.6,s=5;this.teleportMesh.scale.set(i,n*s,i),this.teleportMesh.position.y=n*s*.35}else this.teleportMesh.scale.x>0?(this.teleportMesh.scale.x=this.teleportMesh.scale.x-.2,this.teleportMesh.scale.z=this.teleportMesh.scale.z-.2):this.teleportMesh.visible=!1}else this.teleportMesh.visible=!1;this.teleportMesh.material.uniforms.cameraBillboardQuaternion.value.copy(this.camera.quaternion)}}updateSpotLight(){this.spotLight&&(this.spotLight.fadeIn?this.spotLight.material.uniforms.opacity.value<1&&(this.spotLight.material.uniforms.opacity.value=1):this.spotLight.material.uniforms.opacity.value>0?this.spotLight.material.uniforms.opacity.value-=.025:(this.spotLight.material.uniforms.opacity.value=0,this.spotLight.visible=!1))}}const oL=new Np,OI=oL.load("/textures/pixel9.png");OI.wrapS=OI.wrapT=ps;const HI=oL.load("/textures/noise3.jpg");HI.wrapS=HI.wrapT=ps;const Ft={switchItemDuration:{value:BB},switchItemTime:{value:BB},eye:{value:new H},cameraDir:{value:new H},fadeOutAvatarTime:{value:$m},fadeInAvatarTime:{value:GI},transitionEffectType:{value:Kr.normal}},_R={pixelTexture:{value:OI},noiseTexture:{value:HI}};class rie extends EventTarget{constructor(){super();je(this,"setTransitionEffect",t=>{this.transitionEffectType=t});je(this,"getTransitionEffect",t=>this.transitionEffectType===t);this.cameraDir=new H,this.frameRate=1e3/30,this.initParticle=!1,this.transitionEffectType=null,this.transitionTime=bR,this.update()}setCustomShader(t){t.vertexShader=t.vertexShader.replace("varying vec3 vViewPosition;",`
      varying vec3 vViewPosition;
      varying vec3 vWorldPosition;
      varying vec3 vSurfaceNormal;
      `),t.vertexShader=t.vertexShader.replace("void main() {",`
      void main() {
        vSurfaceNormal = normalize(normal);
      `),t.vertexShader=t.vertexShader.replace("#include <worldpos_vertex>",`
      #include <worldpos_vertex>
      vWorldPosition = (modelMatrix * vec4( transformed, 1.0 )).xyz;
      `),t.fragmentShader=t.fragmentShader.replace("uniform vec3 litFactor;",`
      uniform vec3 litFactor;
      uniform vec3 cameraDir;
      uniform vec3 eye;
      uniform float switchItemTime;
      uniform float switchItemDuration;
      uniform sampler2D pixelTexture;
      uniform sampler2D noiseTexture;
      uniform float transitionEffectType;

      uniform float fadeInAvatarTime;
      
      varying vec3 vWorldPosition;
      varying vec3 vSurfaceNormal;

      vec4 textureRemap(vec4 In, vec2 InMinMax, vec2 OutMinMax) {
        return OutMinMax.x + (In - InMinMax.x) * (OutMinMax.y - OutMinMax.x) / (InMinMax.y - InMinMax.x);
      }

      float getRim(vec3 normal, float rimStrength, float glowIntensity) {
        vec3 eyeDirection = normalize(eye - vWorldPosition);
        float EdotN = max(0.0, dot(eyeDirection, normal));
        float bodyRim = pow(1. - EdotN, rimStrength);
        return bodyRim * glowIntensity;
      }

      vec3 getPixelColor(float pixelStrength) {
        float pixelUvScale = 2.0;
        vec2 pixelUv = vec2(
          vWorldPosition.x * pixelUvScale * -cameraDir.z + vWorldPosition.z * pixelUvScale * cameraDir.x,
          vWorldPosition.y * pixelUvScale
        );
        float pixel = texture2D(
          pixelTexture, 
          pixelUv
        ).r;
        return mix(vec3(0.0396, 0.768, 0.990), vec3(0.0142, 0.478, 0.710), pixel * pixelStrength);
      }

      float getDissolveLimit(float noiseUvScale, float noiseStrength, float bottomPosition, float avatarHeight, float time) {
        vec2 noiseUv = vec2(
          vWorldPosition.x * noiseUvScale * -cameraDir.z + vWorldPosition.z * noiseUvScale * cameraDir.x,
          vWorldPosition.y * noiseUvScale
        );
        vec4 noise = texture2D(
          noiseTexture, 
          noiseUv
        );
        
        float noiseCutout = textureRemap(noise, vec2(0.0, 1.0), vec2(-noiseStrength, noiseStrength)).r;
        float cutoutHeight = time * avatarHeight + bottomPosition;
        return cutoutHeight + noiseCutout;
      }

      `),t.fragmentShader=t.fragmentShader.replace("gl_FragColor = vec4( col, diffuseColor.a );",`
      gl_FragColor = vec4(col, diffuseColor.a);
      `),t.fragmentShader=t.fragmentShader.replace("gl_FragColor = vec4( col, diffuseColor.a );",`
      //################################################## normal ###############################################################
      if (transitionEffectType < 0.5) { 

      }
      //################################################## switch item ###############################################################
      else if (transitionEffectType < 1.5) { 
        // vec3 pixelColor = getPixelColor(2.0);

        // float timeProgress = switchItemTime / switchItemDuration;
        // float rim = getRim(
        //   vSurfaceNormal, 
        //   mix(0.1, mix(0.1, 5.0, timeProgress), timeProgress), 
        //   mix(50., 10., timeProgress)
        // );
        
        // col = mix(pixelColor * rim, col, timeProgress);
      }
      //################################################## fade out avatar ###############################################################
      else if (transitionEffectType < 2.5) { 
        discard;
      }
      //################################################## loading avatar ###############################################################
      else if (transitionEffectType < 3.5) { 
        discard;
      }
      //################################################## fade in avatar ###############################################################
      else if (transitionEffectType < 4.5) { 
        if (fadeInAvatarTime < 0.5) { // phase 1
          float timer = fadeInAvatarTime * 2.;
          
          float border = 0.02;
          float limit = getDissolveLimit(
            1.2,
            0.1,
            -0.3 - border,
            2.0 + border,
            timer
          );
          
          float upperBound = limit + border;
  
          if (vWorldPosition.y > limit && vWorldPosition.y < upperBound) {

            vec3 pixelColor = getPixelColor(1.5);
        
            float rim = getRim(
              vSurfaceNormal, 
              0.1,
              10.
            );
      
            col = pixelColor * rim;
          }
          else if (vWorldPosition.y >= upperBound) {
            discard;
          }
          else {

            vec3 pixelColor = getPixelColor(1.5);
            
            float rim = getRim(
              vSurfaceNormal, 
              0.1,
              3.0
            );
            col = pixelColor * rim;
          }
        }
        else { // phase 2
          float timer = fadeInAvatarTime * 2. - 1.;
          
          float bottomPosition = -0.3;
          float avatarHeight = 2.0;
          
          float rim = getRim(
            vSurfaceNormal, 
            mix(0.1, 2.0 * timer, timer),
            mix(3.0, 20. * (1. - timer), timer)
          );
          
          float fadeStrength = 10.;
          rim *= pow((vWorldPosition.y - bottomPosition) / (avatarHeight - bottomPosition), timer * fadeStrength);
          
          vec3 pixelColor = getPixelColor(1.5);
          col = mix(pixelColor * rim, col, timer);

        }
      }

      gl_FragColor = vec4( col, diffuseColor.a );
      `),t.uniforms.pixelTexture=_R.pixelTexture,t.uniforms.noiseTexture=_R.noiseTexture,t.uniforms.cameraDir=Ft.cameraDir,t.uniforms.eye=Ft.eye,t.uniforms.switchItemTime=Ft.switchItemTime,t.uniforms.switchItemDuration=Ft.switchItemDuration,t.uniforms.transitionEffectType=Ft.transitionEffectType,t.uniforms.fadeInAvatarTime=Ft.fadeInAvatarTime}playFadeOutEffect(){Ft.transitionEffectType.value=Kr.fadeOutAvatar,this.particleEffect.emitSpotLight(),this.particleEffect.emitPixel(),this.particleEffect.emitTeleport(),this.transitionTime=this.frameRate*((ER-$m)/SR),this.initialFadeOutTimer()}playFadeInEffect(){Ft.transitionEffectType.value=Kr.fadeInAvatar,this.initialFadeInTimer()}playSwitchItemEffect(){Ft.switchItemTime.value=jre,Ft.transitionEffectType.value=Kr.switchItem,this.transitionTime=bR}setParticle(t,n){this.particleEffect=new nie(t,n,Ft)}initialFadeOutTimer(){Ft.fadeOutAvatarTime.value=$m}initialFadeInTimer(){Ft.fadeInAvatarTime.value=GI}update(){setInterval(()=>{this.scene&&this.camera&&!this.initParticle&&(this.setParticle(this.scene,this.camera),this.initParticle=!0),this.initParticle&&this.particleEffect.update(),Ft.transitionEffectType.value===Kr.switchItem?Ft.switchItemTime.value<BB?Ft.switchItemTime.value+=qre:(Ft.switchItemTime.value=BB,Ft.transitionEffectType.value=Kr.normal,this.setTransitionEffect("normal"),this.dispatchEvent(new Event("fadeintraitend"))):Ft.transitionEffectType.value===Kr.fadeOutAvatar?(Ft.fadeOutAvatarTime.value+=SR,Ft.fadeOutAvatarTime.value>ER&&(Ft.fadeOutAvatarTime.value=$m,Ft.transitionEffectType.value=Kr.loadingAvatar)):Ft.transitionEffectType.value===Kr.loadingAvatar||Ft.transitionEffectType.value===Kr.fadeInAvatar&&(Ft.fadeInAvatarTime.value>.1&&Ft.fadeInAvatarTime.value<.5&&(this.particleEffect.emitRing(.5*(1-Ft.fadeInAvatarTime.value)),this.particleEffect.emitRespawnPixel()),Ft.fadeInAvatarTime.value>=.5&&this.particleEffect.removeSpotLight(),Ft.fadeInAvatarTime.value+=eie,Ft.fadeInAvatarTime.value>$re&&(Ft.fadeInAvatarTime.value=GI,Ft.transitionEffectType.value=Kr.normal,this.setTransitionEffect("normal"),this.dispatchEvent(new Event("fadeinavatarend")))),this.camera&&(this.cameraDir.set(0,0,-1),this.cameraDir.applyQuaternion(this.camera.quaternion),this.cameraDir.normalize(),Ft.cameraDir.value.copy(this.cameraDir),Ft.eye.value.copy(this.camera.position))},this.frameRate)}}/*!
fflate - fast JavaScript compression/decompression
<https://101arrowz.github.io/fflate>
Licensed under MIT. https://github.com/101arrowz/fflate/blob/master/LICENSE
version 0.6.9
*/var RR=function(r){return URL.createObjectURL(new Blob([r],{type:"text/javascript"}))};try{URL.revokeObjectURL(RR(""))}catch{RR=function(e){return"data:application/javascript;charset=UTF-8,"+encodeURI(e)}}var ns=Uint8Array,EA=Uint16Array,zI=Uint32Array,aL=new ns([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),AL=new ns([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),iie=new ns([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),lL=function(r,e){for(var t=new EA(31),n=0;n<31;++n)t[n]=e+=1<<r[n-1];for(var i=new zI(t[30]),n=1;n<30;++n)for(var s=t[n];s<t[n+1];++s)i[s]=s-t[n]<<5|n;return[t,i]},cL=lL(aL,2),uL=cL[0],sie=cL[1];uL[28]=258,sie[258]=28;var oie=lL(AL,0),aie=oie[0],XI=new EA(32768);for(var $t=0;$t<32768;++$t){var rA=($t&43690)>>>1|($t&21845)<<1;rA=(rA&52428)>>>2|(rA&13107)<<2,rA=(rA&61680)>>>4|(rA&3855)<<4,XI[$t]=((rA&65280)>>>8|(rA&255)<<8)>>>1}var Uh=function(r,e,t){for(var n=r.length,i=0,s=new EA(e);i<n;++i)++s[r[i]-1];var o=new EA(e);for(i=0;i<e;++i)o[i]=o[i-1]+s[i-1]<<1;var a;if(t){a=new EA(1<<e);var A=15-e;for(i=0;i<n;++i)if(r[i])for(var l=i<<4|r[i],c=e-r[i],u=o[r[i]-1]++<<c,f=u|(1<<c)-1;u<=f;++u)a[XI[u]>>>A]=l}else for(a=new EA(n),i=0;i<n;++i)r[i]&&(a[i]=XI[o[r[i]-1]++]>>>15-r[i]);return a},Wp=new ns(288);for(var $t=0;$t<144;++$t)Wp[$t]=8;for(var $t=144;$t<256;++$t)Wp[$t]=9;for(var $t=256;$t<280;++$t)Wp[$t]=7;for(var $t=280;$t<288;++$t)Wp[$t]=8;var fL=new ns(32);for(var $t=0;$t<32;++$t)fL[$t]=5;var Aie=Uh(Wp,9,1),lie=Uh(fL,5,1),rw=function(r){for(var e=r[0],t=1;t<r.length;++t)r[t]>e&&(e=r[t]);return e},Ts=function(r,e,t){var n=e/8|0;return(r[n]|r[n+1]<<8)>>(e&7)&t},iw=function(r,e){var t=e/8|0;return(r[t]|r[t+1]<<8|r[t+2]<<16)>>(e&7)},cie=function(r){return(r/8|0)+(r&7&&1)},uie=function(r,e,t){(e==null||e<0)&&(e=0),(t==null||t>r.length)&&(t=r.length);var n=new(r instanceof EA?EA:r instanceof zI?zI:ns)(t-e);return n.set(r.subarray(e,t)),n},fie=function(r,e,t){var n=r.length;if(!n||t&&!t.l&&n<5)return e||new ns(0);var i=!e||t,s=!t||t.i;t||(t={}),e||(e=new ns(n*3));var o=function(k){var q=e.length;if(k>q){var ee=new ns(Math.max(q*2,k));ee.set(e),e=ee}},a=t.f||0,A=t.p||0,l=t.b||0,c=t.l,u=t.d,f=t.m,d=t.n,p=n*8;do{if(!c){t.f=a=Ts(r,A,1);var h=Ts(r,A+1,3);if(A+=3,h)if(h==1)c=Aie,u=lie,f=9,d=5;else if(h==2){var v=Ts(r,A,31)+257,w=Ts(r,A+10,15)+4,C=v+Ts(r,A+5,31)+1;A+=14;for(var I=new ns(C),E=new ns(19),U=0;U<w;++U)E[iie[U]]=Ts(r,A+U*3,7);A+=w*3;for(var S=rw(E),V=(1<<S)-1,J=Uh(E,S,1),U=0;U<C;){var z=J[Ts(r,A,V)];A+=z&15;var m=z>>>4;if(m<16)I[U++]=m;else{var R=0,y=0;for(m==16?(y=3+Ts(r,A,3),A+=2,R=I[U-1]):m==17?(y=3+Ts(r,A,7),A+=3):m==18&&(y=11+Ts(r,A,127),A+=7);y--;)I[U++]=R}}var Q=I.subarray(0,v),_=I.subarray(v);f=rw(Q),d=rw(_),c=Uh(Q,f,1),u=Uh(_,d,1)}else throw"invalid block type";else{var m=cie(A)+4,g=r[m-4]|r[m-3]<<8,B=m+g;if(B>n){if(s)throw"unexpected EOF";break}i&&o(l+g),e.set(r.subarray(m,B),l),t.b=l+=g,t.p=A=B*8;continue}if(A>p){if(s)throw"unexpected EOF";break}}i&&o(l+131072);for(var L=(1<<f)-1,T=(1<<d)-1,Z=A;;Z=A){var R=c[iw(r,A)&L],G=R>>>4;if(A+=R&15,A>p){if(s)throw"unexpected EOF";break}if(!R)throw"invalid length/literal";if(G<256)e[l++]=G;else if(G==256){Z=A,c=null;break}else{var D=G-254;if(G>264){var U=G-257,x=aL[U];D=Ts(r,A,(1<<x)-1)+uL[U],A+=x}var P=u[iw(r,A)&T],oe=P>>>4;if(!P)throw"invalid distance";A+=P&15;var _=aie[oe];if(oe>3){var x=AL[oe];_+=iw(r,A)&(1<<x)-1,A+=x}if(A>p){if(s)throw"unexpected EOF";break}i&&o(l+131072);for(var M=l+D;l<M;l+=4)e[l]=e[l-_],e[l+1]=e[l+1-_],e[l+2]=e[l+2-_],e[l+3]=e[l+3-_];l=M}}t.l=c,t.p=Z,t.b=l,c&&(a=1,t.m=f,t.d=u,t.n=d)}while(!a);return l==e.length?e:uie(e,0,l)},die=new ns(0),hie=function(r){if((r[0]&15)!=8||r[0]>>>4>7||(r[0]<<8|r[1])%31)throw"invalid zlib data";if(r[1]&32)throw"invalid zlib data: preset dictionaries not supported"};function pie(r,e){return fie((hie(r),r.subarray(2,-4)),e)}var gie=typeof TextDecoder<"u"&&new TextDecoder,mie=0;try{gie.decode(die,{stream:!0}),mie=1}catch{}function dL(r,e,t){const n=t.length-r-1;if(e>=t[n])return n-1;if(e<=t[r])return r;let i=r,s=n,o=Math.floor((i+s)/2);for(;e<t[o]||e>=t[o+1];)e<t[o]?s=o:i=o,o=Math.floor((i+s)/2);return o}function Bie(r,e,t,n){const i=[],s=[],o=[];i[0]=1;for(let a=1;a<=t;++a){s[a]=e-n[r+1-a],o[a]=n[r+a]-e;let A=0;for(let l=0;l<a;++l){const c=o[l+1],u=s[a-l],f=i[l]/(c+u);i[l]=A+c*f,A=u*f}i[a]=A}return i}function vie(r,e,t,n){const i=dL(r,n,e),s=Bie(i,n,r,e),o=new bt(0,0,0,0);for(let a=0;a<=r;++a){const A=t[i-r+a],l=s[a],c=A.w*l;o.x+=A.x*c,o.y+=A.y*c,o.z+=A.z*c,o.w+=A.w*l}return o}function yie(r,e,t,n,i){const s=[];for(let u=0;u<=t;++u)s[u]=0;const o=[];for(let u=0;u<=n;++u)o[u]=s.slice(0);const a=[];for(let u=0;u<=t;++u)a[u]=s.slice(0);a[0][0]=1;const A=s.slice(0),l=s.slice(0);for(let u=1;u<=t;++u){A[u]=e-i[r+1-u],l[u]=i[r+u]-e;let f=0;for(let d=0;d<u;++d){const p=l[d+1],h=A[u-d];a[u][d]=p+h;const m=a[d][u-1]/a[u][d];a[d][u]=f+p*m,f=h*m}a[u][u]=f}for(let u=0;u<=t;++u)o[0][u]=a[u][t];for(let u=0;u<=t;++u){let f=0,d=1;const p=[];for(let h=0;h<=t;++h)p[h]=s.slice(0);p[0][0]=1;for(let h=1;h<=n;++h){let m=0;const g=u-h,B=t-h;u>=h&&(p[d][0]=p[f][0]/a[B+1][g],m=p[d][0]*a[g][B]);const v=g>=-1?1:-g,w=u-1<=B?h-1:t-u;for(let I=v;I<=w;++I)p[d][I]=(p[f][I]-p[f][I-1])/a[B+1][g+I],m+=p[d][I]*a[g+I][B];u<=B&&(p[d][h]=-p[f][h-1]/a[B+1][u],m+=p[d][h]*a[u][B]),o[h][u]=m;const C=f;f=d,d=C}}let c=t;for(let u=1;u<=n;++u){for(let f=0;f<=t;++f)o[u][f]*=c;c*=t-u}return o}function Cie(r,e,t,n,i){const s=i<r?i:r,o=[],a=dL(r,n,e),A=yie(a,n,r,s,e),l=[];for(let c=0;c<t.length;++c){const u=t[c].clone(),f=u.w;u.x*=f,u.y*=f,u.z*=f,l[c]=u}for(let c=0;c<=s;++c){const u=l[a-r].clone().multiplyScalar(A[c][0]);for(let f=1;f<=r;++f)u.add(l[a-r+f].clone().multiplyScalar(A[c][f]));o[c]=u}for(let c=s+1;c<=i+1;++c)o[c]=new bt(0,0,0);return o}function wie(r,e){let t=1;for(let i=2;i<=r;++i)t*=i;let n=1;for(let i=2;i<=e;++i)n*=i;for(let i=2;i<=r-e;++i)n*=i;return t/n}function Fie(r){const e=r.length,t=[],n=[];for(let s=0;s<e;++s){const o=r[s];t[s]=new H(o.x,o.y,o.z),n[s]=o.w}const i=[];for(let s=0;s<e;++s){const o=t[s].clone();for(let a=1;a<=s;++a)o.sub(i[s-a].clone().multiplyScalar(wie(s,a)*n[a]));i[s]=o.divideScalar(n[0])}return i}function Iie(r,e,t,n,i){const s=Cie(r,e,t,n,i);return Fie(s)}class Uie extends lK{constructor(e,t,n,i,s){super(),this.degree=e,this.knots=t,this.controlPoints=[],this.startKnot=i||0,this.endKnot=s||this.knots.length-1;for(let o=0;o<n.length;++o){const a=n[o];this.controlPoints[o]=new bt(a.x,a.y,a.z,a.w)}}getPoint(e,t=new H){const n=t,i=this.knots[this.startKnot]+e*(this.knots[this.endKnot]-this.knots[this.startKnot]),s=vie(this.degree,this.knots,this.controlPoints,i);return s.w!==1&&s.divideScalar(s.w),n.set(s.x,s.y,s.z)}getTangent(e,t=new H){const n=t,i=this.knots[0]+e*(this.knots[this.knots.length-1]-this.knots[0]),s=Iie(this.degree,this.knots,this.controlPoints,i,1);return n.copy(s[1]).normalize(),n}}let mt,In,Yr;class xie extends Of{constructor(e){super(e)}load(e,t,n,i){const s=this,o=s.path===""?_o.extractUrlBase(e):s.path,a=new xx(this.manager);a.setPath(s.path),a.setResponseType("arraybuffer"),a.setRequestHeader(s.requestHeader),a.setWithCredentials(s.withCredentials),a.load(e,function(A){try{t(s.parse(A,o))}catch(l){i?i(l):console.error(l),s.manager.itemError(e)}},n,i)}parse(e,t){if(Rie(e))mt=new _ie().parse(e);else{const i=mL(e);if(!Mie(i))throw new Error("THREE.FBXLoader: Unknown format.");if(TR(i)<7e3)throw new Error("THREE.FBXLoader: FBX version not supported, FileVersion: "+TR(i));mt=new Sie().parse(i)}const n=new Np(this.manager).setPath(this.resourcePath||t).setCrossOrigin(this.crossOrigin);return new Qie(n,this.manager).parse(mt)}}class Qie{constructor(e,t){this.textureLoader=e,this.manager=t}parse(){In=this.parseConnections();const e=this.parseImages(),t=this.parseTextures(e),n=this.parseMaterials(t),i=this.parseDeformers(),s=new bie().parse(i);return this.parseScene(i,s,n),Yr}parseConnections(){const e=new Map;return"Connections"in mt&&mt.Connections.connections.forEach(function(n){const i=n[0],s=n[1],o=n[2];e.has(i)||e.set(i,{parents:[],children:[]});const a={ID:s,relationship:o};e.get(i).parents.push(a),e.has(s)||e.set(s,{parents:[],children:[]});const A={ID:i,relationship:o};e.get(s).children.push(A)}),e}parseImages(){const e={},t={};if("Video"in mt.Objects){const n=mt.Objects.Video;for(const i in n){const s=n[i],o=parseInt(i);if(e[o]=s.RelativeFilename||s.Filename,"Content"in s){const a=s.Content instanceof ArrayBuffer&&s.Content.byteLength>0,A=typeof s.Content=="string"&&s.Content!=="";if(a||A){const l=this.parseImage(n[i]);t[s.RelativeFilename||s.Filename]=l}}}}for(const n in e){const i=e[n];t[i]!==void 0?e[n]=t[i]:e[n]=e[n].split("\\").pop()}return e}parseImage(e){const t=e.Content,n=e.RelativeFilename||e.Filename,i=n.slice(n.lastIndexOf(".")+1).toLowerCase();let s;switch(i){case"bmp":s="image/bmp";break;case"jpg":case"jpeg":s="image/jpeg";break;case"png":s="image/png";break;case"tif":s="image/tiff";break;case"tga":this.manager.getHandler(".tga")===null&&console.warn("FBXLoader: TGA loader not found, skipping ",n),s="image/tga";break;default:console.warn('FBXLoader: Image type "'+i+'" is not supported.');return}if(typeof t=="string")return"data:"+s+";base64,"+t;{const o=new Uint8Array(t);return window.URL.createObjectURL(new Blob([o],{type:s}))}}parseTextures(e){const t=new Map;if("Texture"in mt.Objects){const n=mt.Objects.Texture;for(const i in n){const s=this.parseTexture(n[i],e);t.set(parseInt(i),s)}}return t}parseTexture(e,t){const n=this.loadTexture(e,t);n.ID=e.id,n.name=e.attrName;const i=e.WrapModeU,s=e.WrapModeV,o=i!==void 0?i.value:0,a=s!==void 0?s.value:0;if(n.wrapS=o===0?ps:Gr,n.wrapT=a===0?ps:Gr,"Scaling"in e){const A=e.Scaling.value;n.repeat.x=A[0],n.repeat.y=A[1]}if("Translation"in e){const A=e.Translation.value;n.offset.x=A[0],n.offset.y=A[1]}return n}loadTexture(e,t){let n;const i=this.textureLoader.path,s=In.get(e.id).children;s!==void 0&&s.length>0&&t[s[0].ID]!==void 0&&(n=t[s[0].ID],(n.indexOf("blob:")===0||n.indexOf("data:")===0)&&this.textureLoader.setPath(void 0));let o;const a=e.FileName.slice(-3).toLowerCase();if(a==="tga"){const A=this.manager.getHandler(".tga");A===null?(console.warn("FBXLoader: TGA loader not found, creating placeholder texture for",e.RelativeFilename),o=new En):(A.setPath(this.textureLoader.path),o=A.load(n))}else a==="psd"?(console.warn("FBXLoader: PSD textures are not supported, creating placeholder texture for",e.RelativeFilename),o=new En):o=this.textureLoader.load(n);return this.textureLoader.setPath(i),o}parseMaterials(e){const t=new Map;if("Material"in mt.Objects){const n=mt.Objects.Material;for(const i in n){const s=this.parseMaterial(n[i],e);s!==null&&t.set(parseInt(i),s)}}return t}parseMaterial(e,t){const n=e.id,i=e.attrName;let s=e.ShadingModel;if(typeof s=="object"&&(s=s.value),!In.has(n))return null;const o=this.parseParameters(e,t,n);let a;switch(s.toLowerCase()){case"phong":a=new aC;break;case"lambert":a=new cK;break;default:console.warn('THREE.FBXLoader: unknown material type "%s". Defaulting to MeshPhongMaterial.',s),a=new aC;break}return a.setValues(o),a.name=i,a}parseParameters(e,t,n){const i={};e.BumpFactor&&(i.bumpScale=e.BumpFactor.value),e.Diffuse?i.color=new Ve().fromArray(e.Diffuse.value):e.DiffuseColor&&(e.DiffuseColor.type==="Color"||e.DiffuseColor.type==="ColorRGB")&&(i.color=new Ve().fromArray(e.DiffuseColor.value)),e.DisplacementFactor&&(i.displacementScale=e.DisplacementFactor.value),e.Emissive?i.emissive=new Ve().fromArray(e.Emissive.value):e.EmissiveColor&&(e.EmissiveColor.type==="Color"||e.EmissiveColor.type==="ColorRGB")&&(i.emissive=new Ve().fromArray(e.EmissiveColor.value)),e.EmissiveFactor&&(i.emissiveIntensity=parseFloat(e.EmissiveFactor.value)),e.Opacity&&(i.opacity=parseFloat(e.Opacity.value)),i.opacity<1&&(i.transparent=!0),e.ReflectionFactor&&(i.reflectivity=e.ReflectionFactor.value),e.Shininess&&(i.shininess=e.Shininess.value),e.Specular?i.specular=new Ve().fromArray(e.Specular.value):e.SpecularColor&&e.SpecularColor.type==="Color"&&(i.specular=new Ve().fromArray(e.SpecularColor.value));const s=this;return In.get(n).children.forEach(function(o){const a=o.relationship;switch(a){case"Bump":i.bumpMap=s.getTexture(t,o.ID);break;case"Maya|TEX_ao_map":i.aoMap=s.getTexture(t,o.ID);break;case"DiffuseColor":case"Maya|TEX_color_map":i.map=s.getTexture(t,o.ID),i.map!==void 0&&(i.map.encoding=lt);break;case"DisplacementColor":i.displacementMap=s.getTexture(t,o.ID);break;case"EmissiveColor":i.emissiveMap=s.getTexture(t,o.ID),i.emissiveMap!==void 0&&(i.emissiveMap.encoding=lt);break;case"NormalMap":case"Maya|TEX_normal_map":i.normalMap=s.getTexture(t,o.ID);break;case"ReflectionColor":i.envMap=s.getTexture(t,o.ID),i.envMap!==void 0&&(i.envMap.mapping=W0,i.envMap.encoding=lt);break;case"SpecularColor":i.specularMap=s.getTexture(t,o.ID),i.specularMap!==void 0&&(i.specularMap.encoding=lt);break;case"TransparentColor":case"TransparencyFactor":i.alphaMap=s.getTexture(t,o.ID),i.transparent=!0;break;case"AmbientColor":case"ShininessExponent":case"SpecularFactor":case"VectorDisplacementColor":default:console.warn("THREE.FBXLoader: %s map is not supported in three.js, skipping texture.",a);break}}),i}getTexture(e,t){return"LayeredTexture"in mt.Objects&&t in mt.Objects.LayeredTexture&&(console.warn("THREE.FBXLoader: layered textures are not supported in three.js. Discarding all but first layer."),t=In.get(t).children[0].ID),e.get(t)}parseDeformers(){const e={},t={};if("Deformer"in mt.Objects){const n=mt.Objects.Deformer;for(const i in n){const s=n[i],o=In.get(parseInt(i));if(s.attrType==="Skin"){const a=this.parseSkeleton(o,n);a.ID=i,o.parents.length>1&&console.warn("THREE.FBXLoader: skeleton attached to more than one geometry is not supported."),a.geometryID=o.parents[0].ID,e[i]=a}else if(s.attrType==="BlendShape"){const a={id:i};a.rawTargets=this.parseMorphTargets(o,n),a.id=i,o.parents.length>1&&console.warn("THREE.FBXLoader: morph target attached to more than one geometry is not supported."),t[i]=a}}}return{skeletons:e,morphTargets:t}}parseSkeleton(e,t){const n=[];return e.children.forEach(function(i){const s=t[i.ID];if(s.attrType!=="Cluster")return;const o={ID:i.ID,indices:[],weights:[],transformLink:new Le().fromArray(s.TransformLink.a)};"Indexes"in s&&(o.indices=s.Indexes.a,o.weights=s.Weights.a),n.push(o)}),{rawBones:n,bones:[]}}parseMorphTargets(e,t){const n=[];for(let i=0;i<e.children.length;i++){const s=e.children[i],o=t[s.ID],a={name:o.attrName,initialWeight:o.DeformPercent,id:o.id,fullWeights:o.FullWeights.a};if(o.attrType!=="BlendShapeChannel")return;a.geoID=In.get(parseInt(s.ID)).children.filter(function(A){return A.relationship===void 0})[0].ID,n.push(a)}return n}parseScene(e,t,n){Yr=new Qr;const i=this.parseModels(e.skeletons,t,n),s=mt.Objects.Model,o=this;i.forEach(function(A){const l=s[A.ID];o.setLookAtProperties(A,l),In.get(A.ID).parents.forEach(function(u){const f=i.get(u.ID);f!==void 0&&f.add(A)}),A.parent===null&&Yr.add(A)}),this.bindSkeleton(e.skeletons,t,i),this.createAmbientLight(),Yr.traverse(function(A){if(A.userData.transformData){A.parent&&(A.userData.transformData.parentMatrix=A.parent.matrix,A.userData.transformData.parentMatrixWorld=A.parent.matrixWorld);const l=pL(A.userData.transformData);A.applyMatrix4(l),A.updateWorldMatrix()}});const a=new Eie().parse();Yr.children.length===1&&Yr.children[0].isGroup&&(Yr.children[0].animations=a,Yr=Yr.children[0]),Yr.animations=a}parseModels(e,t,n){const i=new Map,s=mt.Objects.Model;for(const o in s){const a=parseInt(o),A=s[o],l=In.get(a);let c=this.buildSkeleton(l,e,a,A.attrName);if(!c){switch(A.attrType){case"Camera":c=this.createCamera(l);break;case"Light":c=this.createLight(l);break;case"Mesh":c=this.createMesh(l,t,n);break;case"NurbsCurve":c=this.createCurve(l,t);break;case"LimbNode":case"Root":c=new O0;break;case"Null":default:c=new Qr;break}c.name=A.attrName?ht.sanitizeNodeName(A.attrName):"",c.ID=a}this.getTransformData(c,A),i.set(a,c)}return i}buildSkeleton(e,t,n,i){let s=null;return e.parents.forEach(function(o){for(const a in t){const A=t[a];A.rawBones.forEach(function(l,c){if(l.ID===o.ID){const u=s;s=new O0,s.matrixWorld.copy(l.transformLink),s.name=i?ht.sanitizeNodeName(i):"",s.ID=n,A.bones[c]=s,u!==null&&s.add(u)}})}}),s}createCamera(e){let t,n;if(e.children.forEach(function(i){const s=mt.Objects.NodeAttribute[i.ID];s!==void 0&&(n=s)}),n===void 0)t=new St;else{let i=0;n.CameraProjectionType!==void 0&&n.CameraProjectionType.value===1&&(i=1);let s=1;n.NearPlane!==void 0&&(s=n.NearPlane.value/1e3);let o=1e3;n.FarPlane!==void 0&&(o=n.FarPlane.value/1e3);let a=window.innerWidth,A=window.innerHeight;n.AspectWidth!==void 0&&n.AspectHeight!==void 0&&(a=n.AspectWidth.value,A=n.AspectHeight.value);const l=a/A;let c=45;n.FieldOfView!==void 0&&(c=n.FieldOfView.value);const u=n.FocalLength?n.FocalLength.value:null;switch(i){case 0:t=new Ir(c,l,s,o),u!==null&&t.setFocalLength(u);break;case 1:t=new _p(-a/2,a/2,A/2,-A/2,s,o);break;default:console.warn("THREE.FBXLoader: Unknown camera type "+i+"."),t=new St;break}}return t}createLight(e){let t,n;if(e.children.forEach(function(i){const s=mt.Objects.NodeAttribute[i.ID];s!==void 0&&(n=s)}),n===void 0)t=new St;else{let i;n.LightType===void 0?i=0:i=n.LightType.value;let s=16777215;n.Color!==void 0&&(s=new Ve().fromArray(n.Color.value));let o=n.Intensity===void 0?1:n.Intensity.value/100;n.CastLightOnObject!==void 0&&n.CastLightOnObject.value===0&&(o=0);let a=0;n.FarAttenuationEnd!==void 0&&(n.EnableFarAttenuation!==void 0&&n.EnableFarAttenuation.value===0?a=0:a=n.FarAttenuationEnd.value);const A=1;switch(i){case 0:t=new qF(s,o,a,A);break;case 1:t=new bx(s,o);break;case 2:let l=Math.PI/3;n.InnerAngle!==void 0&&(l=It.degToRad(n.InnerAngle.value));let c=0;n.OuterAngle!==void 0&&(c=It.degToRad(n.OuterAngle.value),c=Math.max(c,1)),t=new EV(s,o,a,l,c,A);break;default:console.warn("THREE.FBXLoader: Unknown light type "+n.LightType.value+", defaulting to a PointLight."),t=new qF(s,o);break}n.CastShadows!==void 0&&n.CastShadows.value===1&&(t.castShadow=!0)}return t}createMesh(e,t,n){let i,s=null,o=null;const a=[];return e.children.forEach(function(A){t.has(A.ID)&&(s=t.get(A.ID)),n.has(A.ID)&&a.push(n.get(A.ID))}),a.length>1?o=a:a.length>0?o=a[0]:(o=new aC({color:13421772}),a.push(o)),"color"in s.attributes&&a.forEach(function(A){A.vertexColors=!0}),s.FBX_Deformer?(i=new lv(s,o),i.normalizeSkinWeights()):i=new bn(s,o),i}createCurve(e,t){const n=e.children.reduce(function(s,o){return t.has(o.ID)&&(s=t.get(o.ID)),s},null),i=new Ja({color:3342591,linewidth:1});return new Pf(n,i)}getTransformData(e,t){const n={};"InheritType"in t&&(n.inheritType=parseInt(t.InheritType.value)),"RotationOrder"in t?n.eulerOrder=gL(t.RotationOrder.value):n.eulerOrder="ZYX","Lcl_Translation"in t&&(n.translation=t.Lcl_Translation.value),"PreRotation"in t&&(n.preRotation=t.PreRotation.value),"Lcl_Rotation"in t&&(n.rotation=t.Lcl_Rotation.value),"PostRotation"in t&&(n.postRotation=t.PostRotation.value),"Lcl_Scaling"in t&&(n.scale=t.Lcl_Scaling.value),"ScalingOffset"in t&&(n.scalingOffset=t.ScalingOffset.value),"ScalingPivot"in t&&(n.scalingPivot=t.ScalingPivot.value),"RotationOffset"in t&&(n.rotationOffset=t.RotationOffset.value),"RotationPivot"in t&&(n.rotationPivot=t.RotationPivot.value),e.userData.transformData=n}setLookAtProperties(e,t){"LookAtProperty"in t&&In.get(e.ID).children.forEach(function(i){if(i.relationship==="LookAtProperty"){const s=mt.Objects.Model[i.ID];if("Lcl_Translation"in s){const o=s.Lcl_Translation.value;e.target!==void 0?(e.target.position.fromArray(o),Yr.add(e.target)):e.lookAt(new H().fromArray(o))}}})}bindSkeleton(e,t,n){const i=this.parsePoseNodes();for(const s in e){const o=e[s];In.get(parseInt(o.ID)).parents.forEach(function(A){if(t.has(A.ID)){const l=A.ID;In.get(l).parents.forEach(function(u){n.has(u.ID)&&n.get(u.ID).bind(new dc(o.bones),i[u.ID])})}})}}parsePoseNodes(){const e={};if("Pose"in mt.Objects){const t=mt.Objects.Pose;for(const n in t)if(t[n].attrType==="BindPose"&&t[n].NbPoseNodes>0){const i=t[n].PoseNode;Array.isArray(i)?i.forEach(function(s){e[s.Node]=new Le().fromArray(s.Matrix.a)}):e[i.Node]=new Le().fromArray(i.Matrix.a)}}return e}createAmbientLight(){if("GlobalSettings"in mt&&"AmbientColor"in mt.GlobalSettings){const e=mt.GlobalSettings.AmbientColor.value,t=e[0],n=e[1],i=e[2];if(t!==0||n!==0||i!==0){const s=new Ve(t,n,i);Yr.add(new SV(s,1))}}}}class bie{constructor(){this.negativeMaterialIndices=!1}parse(e){const t=new Map;if("Geometry"in mt.Objects){const n=mt.Objects.Geometry;for(const i in n){const s=In.get(parseInt(i)),o=this.parseGeometry(s,n[i],e);t.set(parseInt(i),o)}}return this.negativeMaterialIndices===!0&&console.warn("THREE.FBXLoader: The FBX file contains invalid (negative) material indices. The asset might not render as expected."),t}parseGeometry(e,t,n){switch(t.attrType){case"Mesh":return this.parseMeshGeometry(e,t,n);case"NurbsCurve":return this.parseNurbsGeometry(t)}}parseMeshGeometry(e,t,n){const i=n.skeletons,s=[],o=e.parents.map(function(u){return mt.Objects.Model[u.ID]});if(o.length===0)return;const a=e.children.reduce(function(u,f){return i[f.ID]!==void 0&&(u=i[f.ID]),u},null);e.children.forEach(function(u){n.morphTargets[u.ID]!==void 0&&s.push(n.morphTargets[u.ID])});const A=o[0],l={};"RotationOrder"in A&&(l.eulerOrder=gL(A.RotationOrder.value)),"InheritType"in A&&(l.inheritType=parseInt(A.InheritType.value)),"GeometricTranslation"in A&&(l.translation=A.GeometricTranslation.value),"GeometricRotation"in A&&(l.rotation=A.GeometricRotation.value),"GeometricScaling"in A&&(l.scale=A.GeometricScaling.value);const c=pL(l);return this.genGeometry(t,a,s,c)}genGeometry(e,t,n,i){const s=new Xt;e.attrName&&(s.name=e.attrName);const o=this.parseGeoNode(e,t),a=this.genBuffers(o),A=new cn(a.vertex,3);if(A.applyMatrix4(i),s.setAttribute("position",A),a.colors.length>0&&s.setAttribute("color",new cn(a.colors,3)),t&&(s.setAttribute("skinIndex",new yx(a.weightsIndices,4)),s.setAttribute("skinWeight",new cn(a.vertexWeights,4)),s.FBX_Deformer=t),a.normal.length>0){const l=new an().getNormalMatrix(i),c=new cn(a.normal,3);c.applyNormalMatrix(l),s.setAttribute("normal",c)}if(a.uvs.forEach(function(l,c){let u="uv"+(c+1).toString();c===0&&(u="uv"),s.setAttribute(u,new cn(a.uvs[c],2))}),o.material&&o.material.mappingType!=="AllSame"){let l=a.materialIndex[0],c=0;if(a.materialIndex.forEach(function(u,f){u!==l&&(s.addGroup(c,f-c,l),l=u,c=f)}),s.groups.length>0){const u=s.groups[s.groups.length-1],f=u.start+u.count;f!==a.materialIndex.length&&s.addGroup(f,a.materialIndex.length-f,l)}s.groups.length===0&&s.addGroup(0,a.materialIndex.length,a.materialIndex[0])}return this.addMorphTargets(s,e,n,i),s}parseGeoNode(e,t){const n={};if(n.vertexPositions=e.Vertices!==void 0?e.Vertices.a:[],n.vertexIndices=e.PolygonVertexIndex!==void 0?e.PolygonVertexIndex.a:[],e.LayerElementColor&&(n.color=this.parseVertexColors(e.LayerElementColor[0])),e.LayerElementMaterial&&(n.material=this.parseMaterialIndices(e.LayerElementMaterial[0])),e.LayerElementNormal&&(n.normal=this.parseNormals(e.LayerElementNormal[0])),e.LayerElementUV){n.uv=[];let i=0;for(;e.LayerElementUV[i];)e.LayerElementUV[i].UV&&n.uv.push(this.parseUVs(e.LayerElementUV[i])),i++}return n.weightTable={},t!==null&&(n.skeleton=t,t.rawBones.forEach(function(i,s){i.indices.forEach(function(o,a){n.weightTable[o]===void 0&&(n.weightTable[o]=[]),n.weightTable[o].push({id:s,weight:i.weights[a]})})})),n}genBuffers(e){const t={vertex:[],normal:[],colors:[],uvs:[],materialIndex:[],vertexWeights:[],weightsIndices:[]};let n=0,i=0,s=!1,o=[],a=[],A=[],l=[],c=[],u=[];const f=this;return e.vertexIndices.forEach(function(d,p){let h,m=!1;d<0&&(d=d^-1,m=!0);let g=[],B=[];if(o.push(d*3,d*3+1,d*3+2),e.color){const v=lm(p,n,d,e.color);A.push(v[0],v[1],v[2])}if(e.skeleton){if(e.weightTable[d]!==void 0&&e.weightTable[d].forEach(function(v){B.push(v.weight),g.push(v.id)}),B.length>4){s||(console.warn("THREE.FBXLoader: Vertex has more than 4 skinning weights assigned to vertex. Deleting additional weights."),s=!0);const v=[0,0,0,0],w=[0,0,0,0];B.forEach(function(C,I){let E=C,U=g[I];w.forEach(function(S,V,J){if(E>S){J[V]=E,E=S;const z=v[V];v[V]=U,U=z}})}),g=v,B=w}for(;B.length<4;)B.push(0),g.push(0);for(let v=0;v<4;++v)c.push(B[v]),u.push(g[v])}if(e.normal){const v=lm(p,n,d,e.normal);a.push(v[0],v[1],v[2])}e.material&&e.material.mappingType!=="AllSame"&&(h=lm(p,n,d,e.material)[0],h<0&&(f.negativeMaterialIndices=!0,h=0)),e.uv&&e.uv.forEach(function(v,w){const C=lm(p,n,d,v);l[w]===void 0&&(l[w]=[]),l[w].push(C[0]),l[w].push(C[1])}),i++,m&&(i>4&&console.warn("THREE.FBXLoader: Polygons with more than four sides are not supported. Make sure to triangulate the geometry during export."),f.genFace(t,e,o,h,a,A,l,c,u,i),n++,i=0,o=[],a=[],A=[],l=[],c=[],u=[])}),t}genFace(e,t,n,i,s,o,a,A,l,c){for(let u=2;u<c;u++)e.vertex.push(t.vertexPositions[n[0]]),e.vertex.push(t.vertexPositions[n[1]]),e.vertex.push(t.vertexPositions[n[2]]),e.vertex.push(t.vertexPositions[n[(u-1)*3]]),e.vertex.push(t.vertexPositions[n[(u-1)*3+1]]),e.vertex.push(t.vertexPositions[n[(u-1)*3+2]]),e.vertex.push(t.vertexPositions[n[u*3]]),e.vertex.push(t.vertexPositions[n[u*3+1]]),e.vertex.push(t.vertexPositions[n[u*3+2]]),t.skeleton&&(e.vertexWeights.push(A[0]),e.vertexWeights.push(A[1]),e.vertexWeights.push(A[2]),e.vertexWeights.push(A[3]),e.vertexWeights.push(A[(u-1)*4]),e.vertexWeights.push(A[(u-1)*4+1]),e.vertexWeights.push(A[(u-1)*4+2]),e.vertexWeights.push(A[(u-1)*4+3]),e.vertexWeights.push(A[u*4]),e.vertexWeights.push(A[u*4+1]),e.vertexWeights.push(A[u*4+2]),e.vertexWeights.push(A[u*4+3]),e.weightsIndices.push(l[0]),e.weightsIndices.push(l[1]),e.weightsIndices.push(l[2]),e.weightsIndices.push(l[3]),e.weightsIndices.push(l[(u-1)*4]),e.weightsIndices.push(l[(u-1)*4+1]),e.weightsIndices.push(l[(u-1)*4+2]),e.weightsIndices.push(l[(u-1)*4+3]),e.weightsIndices.push(l[u*4]),e.weightsIndices.push(l[u*4+1]),e.weightsIndices.push(l[u*4+2]),e.weightsIndices.push(l[u*4+3])),t.color&&(e.colors.push(o[0]),e.colors.push(o[1]),e.colors.push(o[2]),e.colors.push(o[(u-1)*3]),e.colors.push(o[(u-1)*3+1]),e.colors.push(o[(u-1)*3+2]),e.colors.push(o[u*3]),e.colors.push(o[u*3+1]),e.colors.push(o[u*3+2])),t.material&&t.material.mappingType!=="AllSame"&&(e.materialIndex.push(i),e.materialIndex.push(i),e.materialIndex.push(i)),t.normal&&(e.normal.push(s[0]),e.normal.push(s[1]),e.normal.push(s[2]),e.normal.push(s[(u-1)*3]),e.normal.push(s[(u-1)*3+1]),e.normal.push(s[(u-1)*3+2]),e.normal.push(s[u*3]),e.normal.push(s[u*3+1]),e.normal.push(s[u*3+2])),t.uv&&t.uv.forEach(function(f,d){e.uvs[d]===void 0&&(e.uvs[d]=[]),e.uvs[d].push(a[d][0]),e.uvs[d].push(a[d][1]),e.uvs[d].push(a[d][(u-1)*2]),e.uvs[d].push(a[d][(u-1)*2+1]),e.uvs[d].push(a[d][u*2]),e.uvs[d].push(a[d][u*2+1])})}addMorphTargets(e,t,n,i){if(n.length===0)return;e.morphTargetsRelative=!0,e.morphAttributes.position=[];const s=this;n.forEach(function(o){o.rawTargets.forEach(function(a){const A=mt.Objects.Geometry[a.geoID];A!==void 0&&s.genMorphGeometry(e,t,A,i,a.name)})})}genMorphGeometry(e,t,n,i,s){const o=t.PolygonVertexIndex!==void 0?t.PolygonVertexIndex.a:[],a=n.Vertices!==void 0?n.Vertices.a:[],A=n.Indexes!==void 0?n.Indexes.a:[],l=e.attributes.position.count*3,c=new Float32Array(l);for(let p=0;p<A.length;p++){const h=A[p]*3;c[h]=a[p*3],c[h+1]=a[p*3+1],c[h+2]=a[p*3+2]}const u={vertexIndices:o,vertexPositions:c},f=this.genBuffers(u),d=new cn(f.vertex,3);d.name=s||n.attrName,d.applyMatrix4(i),e.morphAttributes.position.push(d)}parseNormals(e){const t=e.MappingInformationType,n=e.ReferenceInformationType,i=e.Normals.a;let s=[];return n==="IndexToDirect"&&("NormalIndex"in e?s=e.NormalIndex.a:"NormalsIndex"in e&&(s=e.NormalsIndex.a)),{dataSize:3,buffer:i,indices:s,mappingType:t,referenceType:n}}parseUVs(e){const t=e.MappingInformationType,n=e.ReferenceInformationType,i=e.UV.a;let s=[];return n==="IndexToDirect"&&(s=e.UVIndex.a),{dataSize:2,buffer:i,indices:s,mappingType:t,referenceType:n}}parseVertexColors(e){const t=e.MappingInformationType,n=e.ReferenceInformationType,i=e.Colors.a;let s=[];return n==="IndexToDirect"&&(s=e.ColorIndex.a),{dataSize:4,buffer:i,indices:s,mappingType:t,referenceType:n}}parseMaterialIndices(e){const t=e.MappingInformationType,n=e.ReferenceInformationType;if(t==="NoMappingInformation")return{dataSize:1,buffer:[0],indices:[0],mappingType:"AllSame",referenceType:n};const i=e.Materials.a,s=[];for(let o=0;o<i.length;++o)s.push(o);return{dataSize:1,buffer:i,indices:s,mappingType:t,referenceType:n}}parseNurbsGeometry(e){const t=parseInt(e.Order);if(isNaN(t))return console.error("THREE.FBXLoader: Invalid Order %s given for geometry ID: %s",e.Order,e.id),new Xt;const n=t-1,i=e.KnotVector.a,s=[],o=e.Points.a;for(let u=0,f=o.length;u<f;u+=4)s.push(new bt().fromArray(o,u));let a,A;if(e.Form==="Closed")s.push(s[0]);else if(e.Form==="Periodic"){a=n,A=i.length-1-a;for(let u=0;u<n;++u)s.push(s[u])}const c=new Uie(n,i,s,a,A).getPoints(s.length*12);return new Xt().setFromPoints(c)}}class Eie{parse(){const e=[],t=this.parseClips();if(t!==void 0)for(const n in t){const i=t[n],s=this.addClip(i);e.push(s)}return e}parseClips(){if(mt.Objects.AnimationCurve===void 0)return;const e=this.parseAnimationCurveNodes();this.parseAnimationCurves(e);const t=this.parseAnimationLayers(e);return this.parseAnimStacks(t)}parseAnimationCurveNodes(){const e=mt.Objects.AnimationCurveNode,t=new Map;for(const n in e){const i=e[n];if(i.attrName.match(/S|R|T|DeformPercent/)!==null){const s={id:i.id,attr:i.attrName,curves:{}};t.set(s.id,s)}}return t}parseAnimationCurves(e){const t=mt.Objects.AnimationCurve;for(const n in t){const i={id:t[n].id,times:t[n].KeyTime.a.map(Tie),values:t[n].KeyValueFloat.a},s=In.get(i.id);if(s!==void 0){const o=s.parents[0].ID,a=s.parents[0].relationship;a.match(/X/)?e.get(o).curves.x=i:a.match(/Y/)?e.get(o).curves.y=i:a.match(/Z/)?e.get(o).curves.z=i:a.match(/d|DeformPercent/)&&e.has(o)&&(e.get(o).curves.morph=i)}}}parseAnimationLayers(e){const t=mt.Objects.AnimationLayer,n=new Map;for(const i in t){const s=[],o=In.get(parseInt(i));o!==void 0&&(o.children.forEach(function(A,l){if(e.has(A.ID)){const c=e.get(A.ID);if(c.curves.x!==void 0||c.curves.y!==void 0||c.curves.z!==void 0){if(s[l]===void 0){const u=In.get(A.ID).parents.filter(function(f){return f.relationship!==void 0})[0].ID;if(u!==void 0){const f=mt.Objects.Model[u.toString()];if(f===void 0){console.warn("THREE.FBXLoader: Encountered a unused curve.",A);return}const d={modelName:f.attrName?ht.sanitizeNodeName(f.attrName):"",ID:f.id,initialPosition:[0,0,0],initialRotation:[0,0,0],initialScale:[1,1,1]};Yr.traverse(function(p){p.ID===f.id&&(d.transform=p.matrix,p.userData.transformData&&(d.eulerOrder=p.userData.transformData.eulerOrder))}),d.transform||(d.transform=new Le),"PreRotation"in f&&(d.preRotation=f.PreRotation.value),"PostRotation"in f&&(d.postRotation=f.PostRotation.value),s[l]=d}}s[l]&&(s[l][c.attr]=c)}else if(c.curves.morph!==void 0){if(s[l]===void 0){const u=In.get(A.ID).parents.filter(function(g){return g.relationship!==void 0})[0].ID,f=In.get(u).parents[0].ID,d=In.get(f).parents[0].ID,p=In.get(d).parents[0].ID,h=mt.Objects.Model[p],m={modelName:h.attrName?ht.sanitizeNodeName(h.attrName):"",morphName:mt.Objects.Deformer[u].attrName};s[l]=m}s[l][c.attr]=c}}}),n.set(parseInt(i),s))}return n}parseAnimStacks(e){const t=mt.Objects.AnimationStack,n={};for(const i in t){const s=In.get(parseInt(i)).children;s.length>1&&console.warn("THREE.FBXLoader: Encountered an animation stack with multiple layers, this is currently not supported. Ignoring subsequent layers.");const o=e.get(s[0].ID);n[i]={name:t[i].attrName,layer:o}}return n}addClip(e){let t=[];const n=this;return e.layer.forEach(function(i){t=t.concat(n.generateTracks(i))}),new z0(e.name,-1,t)}generateTracks(e){const t=[];let n=new H,i=new $e,s=new H;if(e.transform&&e.transform.decompose(n,i,s),n=n.toArray(),i=new xr().setFromQuaternion(i,e.eulerOrder).toArray(),s=s.toArray(),e.T!==void 0&&Object.keys(e.T.curves).length>0){const o=this.generateVectorTrack(e.modelName,e.T.curves,n,"position");o!==void 0&&t.push(o)}if(e.R!==void 0&&Object.keys(e.R.curves).length>0){const o=this.generateRotationTrack(e.modelName,e.R.curves,i,e.preRotation,e.postRotation,e.eulerOrder);o!==void 0&&t.push(o)}if(e.S!==void 0&&Object.keys(e.S.curves).length>0){const o=this.generateVectorTrack(e.modelName,e.S.curves,s,"scale");o!==void 0&&t.push(o)}if(e.DeformPercent!==void 0){const o=this.generateMorphTrack(e);o!==void 0&&t.push(o)}return t}generateVectorTrack(e,t,n,i){const s=this.getTimesForAllAxes(t),o=this.getKeyframeTrackValues(s,t,n);return new wf(e+"."+i,s,o)}generateRotationTrack(e,t,n,i,s,o){t.x!==void 0&&(this.interpolateRotations(t.x),t.x.values=t.x.values.map(It.degToRad)),t.y!==void 0&&(this.interpolateRotations(t.y),t.y.values=t.y.values.map(It.degToRad)),t.z!==void 0&&(this.interpolateRotations(t.z),t.z.values=t.z.values.map(It.degToRad));const a=this.getTimesForAllAxes(t),A=this.getKeyframeTrackValues(a,t,n);i!==void 0&&(i=i.map(It.degToRad),i.push(o),i=new xr().fromArray(i),i=new $e().setFromEuler(i)),s!==void 0&&(s=s.map(It.degToRad),s.push(o),s=new xr().fromArray(s),s=new $e().setFromEuler(s).invert());const l=new $e,c=new xr,u=[];for(let f=0;f<A.length;f+=3)c.set(A[f],A[f+1],A[f+2],o),l.setFromEuler(c),i!==void 0&&l.premultiply(i),s!==void 0&&l.multiply(s),l.toArray(u,f/3*4);return new jA(e+".quaternion",a,u)}generateMorphTrack(e){const t=e.DeformPercent.curves.morph,n=t.values.map(function(s){return s/100}),i=Yr.getObjectByName(e.modelName).morphTargetDictionary[e.morphName];return new Cf(e.modelName+".morphTargetInfluences["+i+"]",t.times,n)}getTimesForAllAxes(e){let t=[];if(e.x!==void 0&&(t=t.concat(e.x.times)),e.y!==void 0&&(t=t.concat(e.y.times)),e.z!==void 0&&(t=t.concat(e.z.times)),t=t.sort(function(n,i){return n-i}),t.length>1){let n=1,i=t[0];for(let s=1;s<t.length;s++){const o=t[s];o!==i&&(t[n]=o,i=o,n++)}t=t.slice(0,n)}return t}getKeyframeTrackValues(e,t,n){const i=n,s=[];let o=-1,a=-1,A=-1;return e.forEach(function(l){if(t.x&&(o=t.x.times.indexOf(l)),t.y&&(a=t.y.times.indexOf(l)),t.z&&(A=t.z.times.indexOf(l)),o!==-1){const c=t.x.values[o];s.push(c),i[0]=c}else s.push(i[0]);if(a!==-1){const c=t.y.values[a];s.push(c),i[1]=c}else s.push(i[1]);if(A!==-1){const c=t.z.values[A];s.push(c),i[2]=c}else s.push(i[2])}),s}interpolateRotations(e){for(let t=1;t<e.values.length;t++){const n=e.values[t-1],i=e.values[t]-n,s=Math.abs(i);if(s>=180){const o=s/180,a=i/o;let A=n+a;const l=e.times[t-1],u=(e.times[t]-l)/o;let f=l+u;const d=[],p=[];for(;f<e.times[t];)d.push(f),f+=u,p.push(A),A+=a;e.times=NR(e.times,t,d),e.values=NR(e.values,t,p)}}}}class Sie{getPrevNode(){return this.nodeStack[this.currentIndent-2]}getCurrentNode(){return this.nodeStack[this.currentIndent-1]}getCurrentProp(){return this.currentProp}pushStack(e){this.nodeStack.push(e),this.currentIndent+=1}popStack(){this.nodeStack.pop(),this.currentIndent-=1}setCurrentProp(e,t){this.currentProp=e,this.currentPropName=t}parse(e){this.currentIndent=0,this.allNodes=new hL,this.nodeStack=[],this.currentProp=[],this.currentPropName="";const t=this,n=e.split(/[\r\n]+/);return n.forEach(function(i,s){const o=i.match(/^[\s\t]*;/),a=i.match(/^[\s\t]*$/);if(o||a)return;const A=i.match("^\\t{"+t.currentIndent+"}(\\w+):(.*){",""),l=i.match("^\\t{"+t.currentIndent+"}(\\w+):[\\s\\t\\r\\n](.*)"),c=i.match("^\\t{"+(t.currentIndent-1)+"}}");A?t.parseNodeBegin(i,A):l?t.parseNodeProperty(i,l,n[++s]):c?t.popStack():i.match(/^[^\s\t}]/)&&t.parseNodePropertyContinued(i)}),this.allNodes}parseNodeBegin(e,t){const n=t[1].trim().replace(/^"/,"").replace(/"$/,""),i=t[2].split(",").map(function(A){return A.trim().replace(/^"/,"").replace(/"$/,"")}),s={name:n},o=this.parseNodeAttr(i),a=this.getCurrentNode();this.currentIndent===0?this.allNodes.add(n,s):n in a?(n==="PoseNode"?a.PoseNode.push(s):a[n].id!==void 0&&(a[n]={},a[n][a[n].id]=a[n]),o.id!==""&&(a[n][o.id]=s)):typeof o.id=="number"?(a[n]={},a[n][o.id]=s):n!=="Properties70"&&(n==="PoseNode"?a[n]=[s]:a[n]=s),typeof o.id=="number"&&(s.id=o.id),o.name!==""&&(s.attrName=o.name),o.type!==""&&(s.attrType=o.type),this.pushStack(s)}parseNodeAttr(e){let t=e[0];e[0]!==""&&(t=parseInt(e[0]),isNaN(t)&&(t=e[0]));let n="",i="";return e.length>1&&(n=e[1].replace(/^(\w+)::/,""),i=e[2]),{id:t,name:n,type:i}}parseNodeProperty(e,t,n){let i=t[1].replace(/^"/,"").replace(/"$/,"").trim(),s=t[2].replace(/^"/,"").replace(/"$/,"").trim();i==="Content"&&s===","&&(s=n.replace(/"/g,"").replace(/,$/,"").trim());const o=this.getCurrentNode();if(o.name==="Properties70"){this.parseNodeSpecialProperty(e,i,s);return}if(i==="C"){const A=s.split(",").slice(1),l=parseInt(A[0]),c=parseInt(A[1]);let u=s.split(",").slice(3);u=u.map(function(f){return f.trim().replace(/^"/,"")}),i="connections",s=[l,c],Vie(s,u),o[i]===void 0&&(o[i]=[])}i==="Node"&&(o.id=s),i in o&&Array.isArray(o[i])?o[i].push(s):i!=="a"?o[i]=s:o.a=s,this.setCurrentProp(o,i),i==="a"&&s.slice(-1)!==","&&(o.a=ow(s))}parseNodePropertyContinued(e){const t=this.getCurrentNode();t.a+=e,e.slice(-1)!==","&&(t.a=ow(t.a))}parseNodeSpecialProperty(e,t,n){const i=n.split('",').map(function(c){return c.trim().replace(/^\"/,"").replace(/\s/,"_")}),s=i[0],o=i[1],a=i[2],A=i[3];let l=i[4];switch(o){case"int":case"enum":case"bool":case"ULongLong":case"double":case"Number":case"FieldOfView":l=parseFloat(l);break;case"Color":case"ColorRGB":case"Vector3D":case"Lcl_Translation":case"Lcl_Rotation":case"Lcl_Scaling":l=ow(l);break}this.getPrevNode()[s]={type:o,type2:a,flag:A,value:l},this.setCurrentProp(this.getPrevNode(),s)}}class _ie{parse(e){const t=new MR(e);t.skip(23);const n=t.getUint32();if(n<6400)throw new Error("THREE.FBXLoader: FBX version not supported, FileVersion: "+n);const i=new hL;for(;!this.endOfContent(t);){const s=this.parseNode(t,n);s!==null&&i.add(s.name,s)}return i}endOfContent(e){return e.size()%16===0?(e.getOffset()+160+16&-16)>=e.size():e.getOffset()+160+16>=e.size()}parseNode(e,t){const n={},i=t>=7500?e.getUint64():e.getUint32(),s=t>=7500?e.getUint64():e.getUint32();t>=7500?e.getUint64():e.getUint32();const o=e.getUint8(),a=e.getString(o);if(i===0)return null;const A=[];for(let f=0;f<s;f++)A.push(this.parseProperty(e));const l=A.length>0?A[0]:"",c=A.length>1?A[1]:"",u=A.length>2?A[2]:"";for(n.singleProperty=s===1&&e.getOffset()===i;i>e.getOffset();){const f=this.parseNode(e,t);f!==null&&this.parseSubNode(a,n,f)}return n.propertyList=A,typeof l=="number"&&(n.id=l),c!==""&&(n.attrName=c),u!==""&&(n.attrType=u),a!==""&&(n.name=a),n}parseSubNode(e,t,n){if(n.singleProperty===!0){const i=n.propertyList[0];Array.isArray(i)?(t[n.name]=n,n.a=i):t[n.name]=i}else if(e==="Connections"&&n.name==="C"){const i=[];n.propertyList.forEach(function(s,o){o!==0&&i.push(s)}),t.connections===void 0&&(t.connections=[]),t.connections.push(i)}else if(n.name==="Properties70")Object.keys(n).forEach(function(s){t[s]=n[s]});else if(e==="Properties70"&&n.name==="P"){let i=n.propertyList[0],s=n.propertyList[1];const o=n.propertyList[2],a=n.propertyList[3];let A;i.indexOf("Lcl ")===0&&(i=i.replace("Lcl ","Lcl_")),s.indexOf("Lcl ")===0&&(s=s.replace("Lcl ","Lcl_")),s==="Color"||s==="ColorRGB"||s==="Vector"||s==="Vector3D"||s.indexOf("Lcl_")===0?A=[n.propertyList[4],n.propertyList[5],n.propertyList[6]]:A=n.propertyList[4],t[i]={type:s,type2:o,flag:a,value:A}}else t[n.name]===void 0?typeof n.id=="number"?(t[n.name]={},t[n.name][n.id]=n):t[n.name]=n:n.name==="PoseNode"?(Array.isArray(t[n.name])||(t[n.name]=[t[n.name]]),t[n.name].push(n)):t[n.name][n.id]===void 0&&(t[n.name][n.id]=n)}parseProperty(e){const t=e.getString(1);let n;switch(t){case"C":return e.getBoolean();case"D":return e.getFloat64();case"F":return e.getFloat32();case"I":return e.getInt32();case"L":return e.getInt64();case"R":return n=e.getUint32(),e.getArrayBuffer(n);case"S":return n=e.getUint32(),e.getString(n);case"Y":return e.getInt16();case"b":case"c":case"d":case"f":case"i":case"l":const i=e.getUint32(),s=e.getUint32(),o=e.getUint32();if(s===0)switch(t){case"b":case"c":return e.getBooleanArray(i);case"d":return e.getFloat64Array(i);case"f":return e.getFloat32Array(i);case"i":return e.getInt32Array(i);case"l":return e.getInt64Array(i)}const a=pie(new Uint8Array(e.getArrayBuffer(o))),A=new MR(a.buffer);switch(t){case"b":case"c":return A.getBooleanArray(i);case"d":return A.getFloat64Array(i);case"f":return A.getFloat32Array(i);case"i":return A.getInt32Array(i);case"l":return A.getInt64Array(i)}break;default:throw new Error("THREE.FBXLoader: Unknown property type "+t)}}}class MR{constructor(e,t){this.dv=new DataView(e),this.offset=0,this.littleEndian=t!==void 0?t:!0}getOffset(){return this.offset}size(){return this.dv.buffer.byteLength}skip(e){this.offset+=e}getBoolean(){return(this.getUint8()&1)===1}getBooleanArray(e){const t=[];for(let n=0;n<e;n++)t.push(this.getBoolean());return t}getUint8(){const e=this.dv.getUint8(this.offset);return this.offset+=1,e}getInt16(){const e=this.dv.getInt16(this.offset,this.littleEndian);return this.offset+=2,e}getInt32(){const e=this.dv.getInt32(this.offset,this.littleEndian);return this.offset+=4,e}getInt32Array(e){const t=[];for(let n=0;n<e;n++)t.push(this.getInt32());return t}getUint32(){const e=this.dv.getUint32(this.offset,this.littleEndian);return this.offset+=4,e}getInt64(){let e,t;return this.littleEndian?(e=this.getUint32(),t=this.getUint32()):(t=this.getUint32(),e=this.getUint32()),t&2147483648?(t=~t&4294967295,e=~e&4294967295,e===4294967295&&(t=t+1&4294967295),e=e+1&4294967295,-(t*4294967296+e)):t*4294967296+e}getInt64Array(e){const t=[];for(let n=0;n<e;n++)t.push(this.getInt64());return t}getUint64(){let e,t;return this.littleEndian?(e=this.getUint32(),t=this.getUint32()):(t=this.getUint32(),e=this.getUint32()),t*4294967296+e}getFloat32(){const e=this.dv.getFloat32(this.offset,this.littleEndian);return this.offset+=4,e}getFloat32Array(e){const t=[];for(let n=0;n<e;n++)t.push(this.getFloat32());return t}getFloat64(){const e=this.dv.getFloat64(this.offset,this.littleEndian);return this.offset+=8,e}getFloat64Array(e){const t=[];for(let n=0;n<e;n++)t.push(this.getFloat64());return t}getArrayBuffer(e){const t=this.dv.buffer.slice(this.offset,this.offset+e);return this.offset+=e,t}getString(e){let t=[];for(let i=0;i<e;i++)t[i]=this.getUint8();const n=t.indexOf(0);return n>=0&&(t=t.slice(0,n)),_o.decodeText(new Uint8Array(t))}}class hL{add(e,t){this[e]=t}}function Rie(r){const e="Kaydara FBX Binary  \0";return r.byteLength>=e.length&&e===mL(r,0,e.length)}function Mie(r){const e=["K","a","y","d","a","r","a","\\","F","B","X","\\","B","i","n","a","r","y","\\","\\"];let t=0;function n(i){const s=r[i-1];return r=r.slice(t+i),t++,s}for(let i=0;i<e.length;++i)if(n(1)===e[i])return!1;return!0}function TR(r){const e=/FBXVersion: (\d+)/,t=r.match(e);if(t)return parseInt(t[1]);throw new Error("THREE.FBXLoader: Cannot find the version number for the file given.")}function Tie(r){return r/46186158e3}const Nie=[];function lm(r,e,t,n){let i;switch(n.mappingType){case"ByPolygonVertex":i=r;break;case"ByPolygon":i=e;break;case"ByVertice":i=t;break;case"AllSame":i=n.indices[0];break;default:console.warn("THREE.FBXLoader: unknown attribute mapping type "+n.mappingType)}n.referenceType==="IndexToDirect"&&(i=n.indices[i]);const s=i*n.dataSize,o=s+n.dataSize;return Die(Nie,n.buffer,s,o)}const sw=new xr,qc=new H;function pL(r){const e=new Le,t=new Le,n=new Le,i=new Le,s=new Le,o=new Le,a=new Le,A=new Le,l=new Le,c=new Le,u=new Le,f=new Le,d=r.inheritType?r.inheritType:0;if(r.translation&&e.setPosition(qc.fromArray(r.translation)),r.preRotation){const V=r.preRotation.map(It.degToRad);V.push(r.eulerOrder||xr.DefaultOrder),t.makeRotationFromEuler(sw.fromArray(V))}if(r.rotation){const V=r.rotation.map(It.degToRad);V.push(r.eulerOrder||xr.DefaultOrder),n.makeRotationFromEuler(sw.fromArray(V))}if(r.postRotation){const V=r.postRotation.map(It.degToRad);V.push(r.eulerOrder||xr.DefaultOrder),i.makeRotationFromEuler(sw.fromArray(V)),i.invert()}r.scale&&s.scale(qc.fromArray(r.scale)),r.scalingOffset&&a.setPosition(qc.fromArray(r.scalingOffset)),r.scalingPivot&&o.setPosition(qc.fromArray(r.scalingPivot)),r.rotationOffset&&A.setPosition(qc.fromArray(r.rotationOffset)),r.rotationPivot&&l.setPosition(qc.fromArray(r.rotationPivot)),r.parentMatrixWorld&&(u.copy(r.parentMatrix),c.copy(r.parentMatrixWorld));const p=t.clone().multiply(n).multiply(i),h=new Le;h.extractRotation(c);const m=new Le;m.copyPosition(c);const g=m.clone().invert().multiply(c),B=h.clone().invert().multiply(g),v=s,w=new Le;if(d===0)w.copy(h).multiply(p).multiply(B).multiply(v);else if(d===1)w.copy(h).multiply(B).multiply(p).multiply(v);else{const J=new Le().scale(new H().setFromMatrixScale(u)).clone().invert(),z=B.clone().multiply(J);w.copy(h).multiply(p).multiply(z).multiply(v)}const C=l.clone().invert(),I=o.clone().invert();let E=e.clone().multiply(A).multiply(l).multiply(t).multiply(n).multiply(i).multiply(C).multiply(a).multiply(o).multiply(s).multiply(I);const U=new Le().copyPosition(E),S=c.clone().multiply(U);return f.copyPosition(S),E=f.clone().multiply(w),E.premultiply(c.invert()),E}function gL(r){r=r||0;const e=["ZYX","YZX","XZY","ZXY","YXZ","XYZ"];return r===6?(console.warn("THREE.FBXLoader: unsupported Euler Order: Spherical XYZ. Animations and rotations may be incorrect."),e[0]):e[r]}function ow(r){return r.split(",").map(function(t){return parseFloat(t)})}function mL(r,e,t){return e===void 0&&(e=0),t===void 0&&(t=r.byteLength),_o.decodeText(new Uint8Array(r,e,t))}function Vie(r,e){for(let t=0,n=r.length,i=e.length;t<i;t++,n++)r[n]=e[t]}function Die(r,e,t,n){for(let i=t,s=0;i<n;i++,s++)r[s]=e[i];return r}function NR(r,e,t){return r.slice(0,e).concat(t).concat(r.slice(e))}const kie=new xie,Lie=new Jx,aw=.2,Wie=r=>Math.floor(Math.random()*r);class VR{constructor(e,t,n,i,s){this.mixer=new VK(t),this.actions=[],this.to=null,this.from=null,this.animationManager=null,this.animationManager=e,n[0].tracks.map((o,a)=>{(o.name==="neck.quaternion"||o.name==="spine.quaternion")&&n[0].tracks.splice(a,1)}),this.actions=[];for(let o=0;o<n.length;o++)this.actions.push(this.mixer.clipAction(n[o]));this.to=this.actions[i],s!=-1&&(this.from=this.actions[s],this.from.reset(),this.from.time=e.getFromActionTime(),this.from.play(),this.to.weight=e.getWeightIn(),this.from.weight=e.getWeightOut()),this.actions[i].reset(),this.actions[i].time=e.getToActionTime(),this.actions[i].play()}dispose(){this.animationManager.disposeAnimation(this)}}class Zie{constructor(e){this.lastAnimID=null,this.curAnimID=null,this.mainControl=null,this.animationControl=null,this.animations=null,this.weightIn=NaN,this.weightOut=NaN,this.offset=null,this.lastAnimID=-1,this.curAnimID=0,this.animationControls=[],this.started=!1,e&&(this.offset=new H(e[0],e[1],e[2])),setInterval(()=>{this.update()},1e3/30)}async loadAnimations(e){const n=await(e.endsWith(".fbx")?kie:Lie).loadAsync(e);this.animations=n.animations,this.offset&&this.offsetHips(),this.mainControl=new VR(this,n,n.animations,this.curAnimID,this.lastAnimID),this.animationControls.push(this.mainControl)}offsetHips(){this.animations.forEach(e=>{for(let t=0;t<e.tracks.length;t++){const n=e.tracks[t];if(n.name==="hips.position")for(let i=0;i<n.values.length/3;i++){const s=i*3;n.values[s]=n.values[s]+this.offset.x,n.values[s+1]=n.values[s+1]+this.offset.y,n.values[s+2]=n.values[s+2]+this.offset.z}}})}startAnimation(e){if(!this.animations){console.warn("no animations were preloaded, ignoring");return}const t=new VR(this,e.scene,this.animations,this.curAnimID,this.lastAnimID);this.animationControls.push(t),GD(e,{animationControl:t}),this.started===!1&&(this.started=!0,this.animRandomizer(this.animations[this.curAnimID].duration))}getFromActionTime(){return this.mainControl.actions[this.lastAnimID].time}getToActionTime(){return this.mainControl?this.mainControl.actions[this.curAnimID].time:.1}getWeightIn(){return this.weightIn}getWeightOut(){return this.weightOut}disposeAnimation(e){if(e!=null){const t=this.animationControls.indexOf(e);t!=-1&&this.animationControls.splice(t,1)}}dispose(){this.animationControls.forEach(e=>{e.dispose()})}animRandomizer(e){setTimeout(()=>{this.lastAnimID=this.curAnimID,this.curAnimID=Wie(this.animations.length),this.curAnimID!=this.lastAnimID&&this.animationControls.forEach(t=>{t.from=t.actions[this.lastAnimID],t.to=t.actions[this.curAnimID],this.weightIn=0,this.weightOut=1,t.to.play(),t.to.reset()}),this.animRandomizer(this.animations[this.curAnimID].duration-aw)},e*1e3)}update(){this.mainControl&&(this.animationControls.forEach(e=>{e.from!=null&&(e.from.weight=this.weightOut),e.to!=null&&(e.to.weight=this.weightIn),e.mixer.update(1/30)}),this.weightIn<1?this.weightIn+=1/(30*aw):this.weightIn=1,this.weightOut>0?this.weightOut-=1/(30*aw):this.weightOut=0)}}const DR={type:"change"},Aw={type:"start"},kR={type:"end"};class Pie extends ol{constructor(e,t){super(),this.object=e,this.domElement=t,this.domElement.style.touchAction="none",this.enabled=!0,this.target=new H,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"},this.mouseButtons={LEFT:Cc.ROTATE,MIDDLE:Cc.DOLLY,RIGHT:Cc.PAN},this.touches={ONE:wc.ROTATE,TWO:wc.DOLLY_PAN},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this._domElementKeyEvents=null,this.getPolarAngle=function(){return a.phi},this.getAzimuthalAngle=function(){return a.theta},this.getDistance=function(){return this.object.position.distanceTo(this.target)},this.listenToKeyEvents=function(F){F.addEventListener("keydown",Ze),this._domElementKeyEvents=F},this.saveState=function(){n.target0.copy(n.target),n.position0.copy(n.object.position),n.zoom0=n.object.zoom},this.reset=function(){n.target.copy(n.target0),n.object.position.copy(n.position0),n.object.zoom=n.zoom0,n.object.updateProjectionMatrix(),n.dispatchEvent(DR),n.update(),s=i.NONE},this.update=function(){const F=new H,N=new $e().setFromUnitVectors(e.up,new H(0,1,0)),K=N.clone().invert(),te=new H,ne=new $e,we=2*Math.PI;return function(){const Se=n.object.position;F.copy(Se).sub(n.target),F.applyQuaternion(N),a.setFromVector3(F),n.autoRotate&&s===i.NONE&&S(E()),n.enableDamping?(a.theta+=A.theta*n.dampingFactor,a.phi+=A.phi*n.dampingFactor):(a.theta+=A.theta,a.phi+=A.phi);let We=n.minAzimuthAngle,Re=n.maxAzimuthAngle;return isFinite(We)&&isFinite(Re)&&(We<-Math.PI?We+=we:We>Math.PI&&(We-=we),Re<-Math.PI?Re+=we:Re>Math.PI&&(Re-=we),We<=Re?a.theta=Math.max(We,Math.min(Re,a.theta)):a.theta=a.theta>(We+Re)/2?Math.max(We,a.theta):Math.min(Re,a.theta)),a.phi=Math.max(n.minPolarAngle,Math.min(n.maxPolarAngle,a.phi)),a.makeSafe(),a.radius*=l,a.radius=Math.max(n.minDistance,Math.min(n.maxDistance,a.radius)),n.enableDamping===!0?n.target.addScaledVector(c,n.dampingFactor):n.target.add(c),F.setFromSpherical(a),F.applyQuaternion(K),Se.copy(n.target).add(F),n.object.lookAt(n.target),n.enableDamping===!0?(A.theta*=1-n.dampingFactor,A.phi*=1-n.dampingFactor,c.multiplyScalar(1-n.dampingFactor)):(A.set(0,0,0),c.set(0,0,0)),l=1,u||te.distanceToSquared(n.object.position)>o||8*(1-ne.dot(n.object.quaternion))>o?(n.dispatchEvent(DR),te.copy(n.object.position),ne.copy(n.object.quaternion),u=!1,!0):!1}}(),this.dispose=function(){n.domElement.removeEventListener("contextmenu",le),n.domElement.removeEventListener("pointerdown",fe),n.domElement.removeEventListener("pointercancel",Ue),n.domElement.removeEventListener("wheel",Ne),n.domElement.removeEventListener("pointermove",ge),n.domElement.removeEventListener("pointerup",Qe),n._domElementKeyEvents!==null&&n._domElementKeyEvents.removeEventListener("keydown",Ze)};const n=this,i={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let s=i.NONE;const o=1e-6,a=new K1,A=new K1;let l=1;const c=new H;let u=!1;const f=new Je,d=new Je,p=new Je,h=new Je,m=new Je,g=new Je,B=new Je,v=new Je,w=new Je,C=[],I={};function E(){return 2*Math.PI/60/60*n.autoRotateSpeed}function U(){return Math.pow(.95,n.zoomSpeed)}function S(F){A.theta-=F}function V(F){A.phi-=F}const J=function(){const F=new H;return function(K,te){F.setFromMatrixColumn(te,0),F.multiplyScalar(-K),c.add(F)}}(),z=function(){const F=new H;return function(K,te){n.screenSpacePanning===!0?F.setFromMatrixColumn(te,1):(F.setFromMatrixColumn(te,0),F.crossVectors(n.object.up,F)),F.multiplyScalar(K),c.add(F)}}(),R=function(){const F=new H;return function(K,te){const ne=n.domElement;if(n.object.isPerspectiveCamera){const we=n.object.position;F.copy(we).sub(n.target);let ye=F.length();ye*=Math.tan(n.object.fov/2*Math.PI/180),J(2*K*ye/ne.clientHeight,n.object.matrix),z(2*te*ye/ne.clientHeight,n.object.matrix)}else n.object.isOrthographicCamera?(J(K*(n.object.right-n.object.left)/n.object.zoom/ne.clientWidth,n.object.matrix),z(te*(n.object.top-n.object.bottom)/n.object.zoom/ne.clientHeight,n.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),n.enablePan=!1)}}();function y(F){n.object.isPerspectiveCamera?l/=F:n.object.isOrthographicCamera?(n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom*F)),n.object.updateProjectionMatrix(),u=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),n.enableZoom=!1)}function Q(F){n.object.isPerspectiveCamera?l*=F:n.object.isOrthographicCamera?(n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom/F)),n.object.updateProjectionMatrix(),u=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),n.enableZoom=!1)}function _(F){f.set(F.clientX,F.clientY)}function L(F){B.set(F.clientX,F.clientY)}function T(F){h.set(F.clientX,F.clientY)}function Z(F){d.set(F.clientX,F.clientY),p.subVectors(d,f).multiplyScalar(n.rotateSpeed);const N=n.domElement;S(2*Math.PI*p.x/N.clientHeight),V(2*Math.PI*p.y/N.clientHeight),f.copy(d),n.update()}function G(F){v.set(F.clientX,F.clientY),w.subVectors(v,B),w.y>0?y(U()):w.y<0&&Q(U()),B.copy(v),n.update()}function D(F){m.set(F.clientX,F.clientY),g.subVectors(m,h).multiplyScalar(n.panSpeed),R(g.x,g.y),h.copy(m),n.update()}function x(F){F.deltaY<0?Q(U()):F.deltaY>0&&y(U()),n.update()}function P(F){let N=!1;switch(F.code){case n.keys.UP:F.ctrlKey||F.metaKey||F.shiftKey?V(2*Math.PI*n.rotateSpeed/n.domElement.clientHeight):R(0,n.keyPanSpeed),N=!0;break;case n.keys.BOTTOM:F.ctrlKey||F.metaKey||F.shiftKey?V(-2*Math.PI*n.rotateSpeed/n.domElement.clientHeight):R(0,-n.keyPanSpeed),N=!0;break;case n.keys.LEFT:F.ctrlKey||F.metaKey||F.shiftKey?S(2*Math.PI*n.rotateSpeed/n.domElement.clientHeight):R(n.keyPanSpeed,0),N=!0;break;case n.keys.RIGHT:F.ctrlKey||F.metaKey||F.shiftKey?S(-2*Math.PI*n.rotateSpeed/n.domElement.clientHeight):R(-n.keyPanSpeed,0),N=!0;break}N&&(F.preventDefault(),n.update())}function oe(){if(C.length===1)f.set(C[0].pageX,C[0].pageY);else{const F=.5*(C[0].pageX+C[1].pageX),N=.5*(C[0].pageY+C[1].pageY);f.set(F,N)}}function M(){if(C.length===1)h.set(C[0].pageX,C[0].pageY);else{const F=.5*(C[0].pageX+C[1].pageX),N=.5*(C[0].pageY+C[1].pageY);h.set(F,N)}}function k(){const F=C[0].pageX-C[1].pageX,N=C[0].pageY-C[1].pageY,K=Math.sqrt(F*F+N*N);B.set(0,K)}function q(){n.enableZoom&&k(),n.enablePan&&M()}function ee(){n.enableZoom&&k(),n.enableRotate&&oe()}function X(F){if(C.length==1)d.set(F.pageX,F.pageY);else{const K=b(F),te=.5*(F.pageX+K.x),ne=.5*(F.pageY+K.y);d.set(te,ne)}p.subVectors(d,f).multiplyScalar(n.rotateSpeed);const N=n.domElement;S(2*Math.PI*p.x/N.clientHeight),V(2*Math.PI*p.y/N.clientHeight),f.copy(d)}function $(F){if(C.length===1)m.set(F.pageX,F.pageY);else{const N=b(F),K=.5*(F.pageX+N.x),te=.5*(F.pageY+N.y);m.set(K,te)}g.subVectors(m,h).multiplyScalar(n.panSpeed),R(g.x,g.y),h.copy(m)}function se(F){const N=b(F),K=F.pageX-N.x,te=F.pageY-N.y,ne=Math.sqrt(K*K+te*te);v.set(0,ne),w.set(0,Math.pow(v.y/B.y,n.zoomSpeed)),y(w.y),B.copy(v)}function ae(F){n.enableZoom&&se(F),n.enablePan&&$(F)}function de(F){n.enableZoom&&se(F),n.enableRotate&&X(F)}function fe(F){n.enabled!==!1&&(C.length===0&&(n.domElement.setPointerCapture(F.pointerId),n.domElement.addEventListener("pointermove",ge),n.domElement.addEventListener("pointerup",Qe)),ue(F),F.pointerType==="touch"?j(F):xe(F))}function ge(F){n.enabled!==!1&&(F.pointerType==="touch"?O(F):Fe(F))}function Qe(F){Ce(F),C.length===0&&(n.domElement.releasePointerCapture(F.pointerId),n.domElement.removeEventListener("pointermove",ge),n.domElement.removeEventListener("pointerup",Qe)),n.dispatchEvent(kR),s=i.NONE}function Ue(F){Ce(F)}function xe(F){let N;switch(F.button){case 0:N=n.mouseButtons.LEFT;break;case 1:N=n.mouseButtons.MIDDLE;break;case 2:N=n.mouseButtons.RIGHT;break;default:N=-1}switch(N){case Cc.DOLLY:if(n.enableZoom===!1)return;L(F),s=i.DOLLY;break;case Cc.ROTATE:if(F.ctrlKey||F.metaKey||F.shiftKey){if(n.enablePan===!1)return;T(F),s=i.PAN}else{if(n.enableRotate===!1)return;_(F),s=i.ROTATE}break;case Cc.PAN:if(F.ctrlKey||F.metaKey||F.shiftKey){if(n.enableRotate===!1)return;_(F),s=i.ROTATE}else{if(n.enablePan===!1)return;T(F),s=i.PAN}break;default:s=i.NONE}s!==i.NONE&&n.dispatchEvent(Aw)}function Fe(F){switch(s){case i.ROTATE:if(n.enableRotate===!1)return;Z(F);break;case i.DOLLY:if(n.enableZoom===!1)return;G(F);break;case i.PAN:if(n.enablePan===!1)return;D(F);break}}function Ne(F){n.enabled===!1||n.enableZoom===!1||s!==i.NONE||(F.preventDefault(),n.dispatchEvent(Aw),x(F),n.dispatchEvent(kR))}function Ze(F){n.enabled===!1||n.enablePan===!1||P(F)}function j(F){switch(W(F),C.length){case 1:switch(n.touches.ONE){case wc.ROTATE:if(n.enableRotate===!1)return;oe(),s=i.TOUCH_ROTATE;break;case wc.PAN:if(n.enablePan===!1)return;M(),s=i.TOUCH_PAN;break;default:s=i.NONE}break;case 2:switch(n.touches.TWO){case wc.DOLLY_PAN:if(n.enableZoom===!1&&n.enablePan===!1)return;q(),s=i.TOUCH_DOLLY_PAN;break;case wc.DOLLY_ROTATE:if(n.enableZoom===!1&&n.enableRotate===!1)return;ee(),s=i.TOUCH_DOLLY_ROTATE;break;default:s=i.NONE}break;default:s=i.NONE}s!==i.NONE&&n.dispatchEvent(Aw)}function O(F){switch(W(F),s){case i.TOUCH_ROTATE:if(n.enableRotate===!1)return;X(F),n.update();break;case i.TOUCH_PAN:if(n.enablePan===!1)return;$(F),n.update();break;case i.TOUCH_DOLLY_PAN:if(n.enableZoom===!1&&n.enablePan===!1)return;ae(F),n.update();break;case i.TOUCH_DOLLY_ROTATE:if(n.enableZoom===!1&&n.enableRotate===!1)return;de(F),n.update();break;default:s=i.NONE}}function le(F){n.enabled!==!1&&F.preventDefault()}function ue(F){C.push(F)}function Ce(F){delete I[F.pointerId];for(let N=0;N<C.length;N++)if(C[N].pointerId==F.pointerId){C.splice(N,1);return}}function W(F){let N=I[F.pointerId];N===void 0&&(N=new Je,I[F.pointerId]=N),N.set(F.pageX,F.pageY)}function b(F){const N=F.pointerId===C[0].pointerId?C[1]:C[0];return I[N.pointerId]}n.domElement.addEventListener("contextmenu",le),n.domElement.addEventListener("pointerdown",fe),n.domElement.addEventListener("pointercancel",Ue),n.domElement.addEventListener("wheel",Ne,{passive:!1}),this.update()}}function Jie({sceneModel:r,lookatManager:e}){const{scene:t,model:n,setModel:i,currentCameraMode:s,setControls:o,setMousePosition:a,setCamera:A}=Ie.useContext(Al),l=d=>{a({x:d.x,y:d.y})};Ie.useEffect(()=>(window.addEventListener("mousemove",l),()=>window.removeEventListener("mousemove",l)),[l]);let c=!1,[u,f]=Ie.useState(!1);return Ie.useEffect(()=>{if(c||u)return;f(!0),c=!0,t.add(r);const d=new Ir(30,window.innerWidth/window.innerHeight,.1,1e3);A(d),e.setCamera(d),d.position.set(0,1.3,2);const p=document.getElementById("editor-scene"),h=new Fx({canvas:p,antialias:!0,alpha:!0,preserveDrawingBuffer:!0}),m=()=>{h.setSize(window.innerWidth,window.innerHeight),d.aspect=window.innerWidth/window.innerHeight,d.updateProjectionMatrix()};window.addEventListener("resize",m),h.setSize(window.innerWidth,window.innerHeight),h.setPixelRatio(window.devicePixelRatio),h.outputEncoding=lt;const g=new Pie(d,h.domElement);g.minDistance=1,g.maxDistance=4,g.maxPolarAngle=Math.PI/2,g.enablePan=!0,g.target=new H(0,1,0),g.enableDamping=!0,g.dampingFactor=.1,o(g);const B=new H(-.5,0,-.5),v=new H(.5,1.5,.5),w=()=>{requestAnimationFrame(w),s!==zk.AR&&(g.target.clamp(B,v),g==null||g.update(),e.update(),h.render(t,d))};w();async function C(){n!=null&&t!=null&&t.remove(n);const I=new St;i(I),t.add(I)}return C(),()=>{removeEventListener("mousemove",l),removeEventListener("resize",l),t.remove(n)}},[]),ie.jsx(ie.Fragment,{})}const Gie=""+new URL("weba-99f54379.png",import.meta.url).href,Oie="_backgroundImg_y6jsl_1",Hie="_Background_y6jsl_18",zie="_webamark_y6jsl_26",Xie="_logo_y6jsl_34",_d={backgroundImg:Oie,Background:Hie,webamark:zie,logo:Xie};function Yie(){return ie.jsxs("div",{className:_d.backgroundImg,children:[ie.jsx("div",{className:_d.backgroundBlur}),ie.jsx("div",{className:_d.Background,children:ie.jsx("div",{className:_d.webamark,children:ie.jsx("img",{src:Gie,className:_d.logo})})})]})}const Kie="_chatContainer_1659d_1",jie="_scrollContainer_1659d_16",qie="_topLine_1659d_26",$ie="_bottomLine_1659d_54",ese="_buttonContainer_1659d_82",tse="_buttonLeft_1659d_91",nse="_buttonRight_1659d_95",rse="_buttonCenter_1659d_99",Cl={chatContainer:Kie,scrollContainer:jie,topLine:qie,bottomLine:$ie,buttonContainer:ese,buttonLeft:tse,buttonRight:nse,buttonCenter:rse};var YI={},ise={get exports(){return YI},set exports(r){YI=r}},vB={},sse={get exports(){return vB},set exports(r){vB=r}},BL=function(e,t){return function(){for(var i=new Array(arguments.length),s=0;s<i.length;s++)i[s]=arguments[s];return e.apply(t,i)}},ose=BL,AQ=Object.prototype.toString,lQ=function(r){return function(e){var t=AQ.call(e);return r[t]||(r[t]=t.slice(8,-1).toLowerCase())}}(Object.create(null));function gc(r){return r=r.toLowerCase(),function(t){return lQ(t)===r}}function cQ(r){return Array.isArray(r)}function yB(r){return typeof r>"u"}function ase(r){return r!==null&&!yB(r)&&r.constructor!==null&&!yB(r.constructor)&&typeof r.constructor.isBuffer=="function"&&r.constructor.isBuffer(r)}var vL=gc("ArrayBuffer");function Ase(r){var e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(r):e=r&&r.buffer&&vL(r.buffer),e}function lse(r){return typeof r=="string"}function cse(r){return typeof r=="number"}function yL(r){return r!==null&&typeof r=="object"}function e0(r){if(lQ(r)!=="object")return!1;var e=Object.getPrototypeOf(r);return e===null||e===Object.prototype}var use=gc("Date"),fse=gc("File"),dse=gc("Blob"),hse=gc("FileList");function uQ(r){return AQ.call(r)==="[object Function]"}function pse(r){return yL(r)&&uQ(r.pipe)}function gse(r){var e="[object FormData]";return r&&(typeof FormData=="function"&&r instanceof FormData||AQ.call(r)===e||uQ(r.toString)&&r.toString()===e)}var mse=gc("URLSearchParams");function Bse(r){return r.trim?r.trim():r.replace(/^\s+|\s+$/g,"")}function vse(){return typeof navigator<"u"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window<"u"&&typeof document<"u"}function fQ(r,e){if(!(r===null||typeof r>"u"))if(typeof r!="object"&&(r=[r]),cQ(r))for(var t=0,n=r.length;t<n;t++)e.call(null,r[t],t,r);else for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&e.call(null,r[i],i,r)}function KI(){var r={};function e(i,s){e0(r[s])&&e0(i)?r[s]=KI(r[s],i):e0(i)?r[s]=KI({},i):cQ(i)?r[s]=i.slice():r[s]=i}for(var t=0,n=arguments.length;t<n;t++)fQ(arguments[t],e);return r}function yse(r,e,t){return fQ(e,function(i,s){t&&typeof i=="function"?r[s]=ose(i,t):r[s]=i}),r}function Cse(r){return r.charCodeAt(0)===65279&&(r=r.slice(1)),r}function wse(r,e,t,n){r.prototype=Object.create(e.prototype,n),r.prototype.constructor=r,t&&Object.assign(r.prototype,t)}function Fse(r,e,t){var n,i,s,o={};e=e||{};do{for(n=Object.getOwnPropertyNames(r),i=n.length;i-- >0;)s=n[i],o[s]||(e[s]=r[s],o[s]=!0);r=Object.getPrototypeOf(r)}while(r&&(!t||t(r,e))&&r!==Object.prototype);return e}function Ise(r,e,t){r=String(r),(t===void 0||t>r.length)&&(t=r.length),t-=e.length;var n=r.indexOf(e,t);return n!==-1&&n===t}function Use(r){if(!r)return null;var e=r.length;if(yB(e))return null;for(var t=new Array(e);e-- >0;)t[e]=r[e];return t}var xse=function(r){return function(e){return r&&e instanceof r}}(typeof Uint8Array<"u"&&Object.getPrototypeOf(Uint8Array)),gr={isArray:cQ,isArrayBuffer:vL,isBuffer:ase,isFormData:gse,isArrayBufferView:Ase,isString:lse,isNumber:cse,isObject:yL,isPlainObject:e0,isUndefined:yB,isDate:use,isFile:fse,isBlob:dse,isFunction:uQ,isStream:pse,isURLSearchParams:mse,isStandardBrowserEnv:vse,forEach:fQ,merge:KI,extend:yse,trim:Bse,stripBOM:Cse,inherits:wse,toFlatObject:Fse,kindOf:lQ,kindOfTest:gc,endsWith:Ise,toArray:Use,isTypedArray:xse,isFileList:hse},$c=gr;function LR(r){return encodeURIComponent(r).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var CL=function(e,t,n){if(!t)return e;var i;if(n)i=n(t);else if($c.isURLSearchParams(t))i=t.toString();else{var s=[];$c.forEach(t,function(A,l){A===null||typeof A>"u"||($c.isArray(A)?l=l+"[]":A=[A],$c.forEach(A,function(u){$c.isDate(u)?u=u.toISOString():$c.isObject(u)&&(u=JSON.stringify(u)),s.push(LR(l)+"="+LR(u))}))}),i=s.join("&")}if(i){var o=e.indexOf("#");o!==-1&&(e=e.slice(0,o)),e+=(e.indexOf("?")===-1?"?":"&")+i}return e},Qse=gr;function Rv(){this.handlers=[]}Rv.prototype.use=function(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1};Rv.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)};Rv.prototype.forEach=function(e){Qse.forEach(this.handlers,function(n){n!==null&&e(n)})};var bse=Rv,Ese=gr,Sse=function(e,t){Ese.forEach(e,function(i,s){s!==t&&s.toUpperCase()===t.toUpperCase()&&(e[t]=i,delete e[s])})},wL=gr;function _f(r,e,t,n,i){Error.call(this),this.message=r,this.name="AxiosError",e&&(this.code=e),t&&(this.config=t),n&&(this.request=n),i&&(this.response=i)}wL.inherits(_f,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}}});var FL=_f.prototype,IL={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED"].forEach(function(r){IL[r]={value:r}});Object.defineProperties(_f,IL);Object.defineProperty(FL,"isAxiosError",{value:!0});_f.from=function(r,e,t,n,i,s){var o=Object.create(FL);return wL.toFlatObject(r,o,function(A){return A!==Error.prototype}),_f.call(o,r.message,e,t,n,i),o.name=r.name,s&&Object.assign(o,s),o};var Hf=_f,UL={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Ns=gr;function _se(r,e){e=e||new FormData;var t=[];function n(s){return s===null?"":Ns.isDate(s)?s.toISOString():Ns.isArrayBuffer(s)||Ns.isTypedArray(s)?typeof Blob=="function"?new Blob([s]):Buffer.from(s):s}function i(s,o){if(Ns.isPlainObject(s)||Ns.isArray(s)){if(t.indexOf(s)!==-1)throw Error("Circular reference detected in "+o);t.push(s),Ns.forEach(s,function(A,l){if(!Ns.isUndefined(A)){var c=o?o+"."+l:l,u;if(A&&!o&&typeof A=="object"){if(Ns.endsWith(l,"{}"))A=JSON.stringify(A);else if(Ns.endsWith(l,"[]")&&(u=Ns.toArray(A))){u.forEach(function(f){!Ns.isUndefined(f)&&e.append(c,n(f))});return}}i(A,c)}}),t.pop()}else e.append(o,n(s))}return i(r),e}var xL=_se,lw,WR;function Rse(){if(WR)return lw;WR=1;var r=Hf;return lw=function(t,n,i){var s=i.config.validateStatus;!i.status||!s||s(i.status)?t(i):n(new r("Request failed with status code "+i.status,[r.ERR_BAD_REQUEST,r.ERR_BAD_RESPONSE][Math.floor(i.status/100)-4],i.config,i.request,i))},lw}var cw,ZR;function Mse(){if(ZR)return cw;ZR=1;var r=gr;return cw=r.isStandardBrowserEnv()?function(){return{write:function(n,i,s,o,a,A){var l=[];l.push(n+"="+encodeURIComponent(i)),r.isNumber(s)&&l.push("expires="+new Date(s).toGMTString()),r.isString(o)&&l.push("path="+o),r.isString(a)&&l.push("domain="+a),A===!0&&l.push("secure"),document.cookie=l.join("; ")},read:function(n){var i=document.cookie.match(new RegExp("(^|;\\s*)("+n+")=([^;]*)"));return i?decodeURIComponent(i[3]):null},remove:function(n){this.write(n,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}(),cw}var Tse=function(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)},Nse=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e},Vse=Tse,Dse=Nse,QL=function(e,t){return e&&!Vse(t)?Dse(e,t):t},uw,PR;function kse(){if(PR)return uw;PR=1;var r=gr,e=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];return uw=function(n){var i={},s,o,a;return n&&r.forEach(n.split(`
`),function(l){if(a=l.indexOf(":"),s=r.trim(l.substr(0,a)).toLowerCase(),o=r.trim(l.substr(a+1)),s){if(i[s]&&e.indexOf(s)>=0)return;s==="set-cookie"?i[s]=(i[s]?i[s]:[]).concat([o]):i[s]=i[s]?i[s]+", "+o:o}}),i},uw}var fw,JR;function Lse(){if(JR)return fw;JR=1;var r=gr;return fw=r.isStandardBrowserEnv()?function(){var t=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a"),i;function s(o){var a=o;return t&&(n.setAttribute("href",a),a=n.href),n.setAttribute("href",a),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:n.pathname.charAt(0)==="/"?n.pathname:"/"+n.pathname}}return i=s(window.location.href),function(a){var A=r.isString(a)?s(a):a;return A.protocol===i.protocol&&A.host===i.host}}():function(){return function(){return!0}}(),fw}var dw,GR;function Mv(){if(GR)return dw;GR=1;var r=Hf,e=gr;function t(n){r.call(this,n??"canceled",r.ERR_CANCELED),this.name="CanceledError"}return e.inherits(t,r,{__CANCEL__:!0}),dw=t,dw}var hw,OR;function Wse(){return OR||(OR=1,hw=function(e){var t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}),hw}var pw,HR;function zR(){if(HR)return pw;HR=1;var r=gr,e=Rse(),t=Mse(),n=CL,i=QL,s=kse(),o=Lse(),a=UL,A=Hf,l=Mv(),c=Wse();return pw=function(f){return new Promise(function(p,h){var m=f.data,g=f.headers,B=f.responseType,v;function w(){f.cancelToken&&f.cancelToken.unsubscribe(v),f.signal&&f.signal.removeEventListener("abort",v)}r.isFormData(m)&&r.isStandardBrowserEnv()&&delete g["Content-Type"];var C=new XMLHttpRequest;if(f.auth){var I=f.auth.username||"",E=f.auth.password?unescape(encodeURIComponent(f.auth.password)):"";g.Authorization="Basic "+btoa(I+":"+E)}var U=i(f.baseURL,f.url);C.open(f.method.toUpperCase(),n(U,f.params,f.paramsSerializer),!0),C.timeout=f.timeout;function S(){if(C){var z="getAllResponseHeaders"in C?s(C.getAllResponseHeaders()):null,R=!B||B==="text"||B==="json"?C.responseText:C.response,y={data:R,status:C.status,statusText:C.statusText,headers:z,config:f,request:C};e(function(_){p(_),w()},function(_){h(_),w()},y),C=null}}if("onloadend"in C?C.onloadend=S:C.onreadystatechange=function(){!C||C.readyState!==4||C.status===0&&!(C.responseURL&&C.responseURL.indexOf("file:")===0)||setTimeout(S)},C.onabort=function(){C&&(h(new A("Request aborted",A.ECONNABORTED,f,C)),C=null)},C.onerror=function(){h(new A("Network Error",A.ERR_NETWORK,f,C,C)),C=null},C.ontimeout=function(){var R=f.timeout?"timeout of "+f.timeout+"ms exceeded":"timeout exceeded",y=f.transitional||a;f.timeoutErrorMessage&&(R=f.timeoutErrorMessage),h(new A(R,y.clarifyTimeoutError?A.ETIMEDOUT:A.ECONNABORTED,f,C)),C=null},r.isStandardBrowserEnv()){var V=(f.withCredentials||o(U))&&f.xsrfCookieName?t.read(f.xsrfCookieName):void 0;V&&(g[f.xsrfHeaderName]=V)}"setRequestHeader"in C&&r.forEach(g,function(R,y){typeof m>"u"&&y.toLowerCase()==="content-type"?delete g[y]:C.setRequestHeader(y,R)}),r.isUndefined(f.withCredentials)||(C.withCredentials=!!f.withCredentials),B&&B!=="json"&&(C.responseType=f.responseType),typeof f.onDownloadProgress=="function"&&C.addEventListener("progress",f.onDownloadProgress),typeof f.onUploadProgress=="function"&&C.upload&&C.upload.addEventListener("progress",f.onUploadProgress),(f.cancelToken||f.signal)&&(v=function(z){C&&(h(!z||z&&z.type?new l:z),C.abort(),C=null)},f.cancelToken&&f.cancelToken.subscribe(v),f.signal&&(f.signal.aborted?v():f.signal.addEventListener("abort",v))),m||(m=null);var J=c(U);if(J&&["http","https","file"].indexOf(J)===-1){h(new A("Unsupported protocol "+J+":",A.ERR_BAD_REQUEST,f));return}C.send(m)})},pw}var gw,XR;function Zse(){return XR||(XR=1,gw=null),gw}var tr=gr,YR=Sse,KR=Hf,Pse=UL,Jse=xL,Gse={"Content-Type":"application/x-www-form-urlencoded"};function jR(r,e){!tr.isUndefined(r)&&tr.isUndefined(r["Content-Type"])&&(r["Content-Type"]=e)}function Ose(){var r;return(typeof XMLHttpRequest<"u"||typeof process<"u"&&Object.prototype.toString.call(process)==="[object process]")&&(r=zR()),r}function Hse(r,e,t){if(tr.isString(r))try{return(e||JSON.parse)(r),tr.trim(r)}catch(n){if(n.name!=="SyntaxError")throw n}return(t||JSON.stringify)(r)}var Tv={transitional:Pse,adapter:Ose(),transformRequest:[function(e,t){if(YR(t,"Accept"),YR(t,"Content-Type"),tr.isFormData(e)||tr.isArrayBuffer(e)||tr.isBuffer(e)||tr.isStream(e)||tr.isFile(e)||tr.isBlob(e))return e;if(tr.isArrayBufferView(e))return e.buffer;if(tr.isURLSearchParams(e))return jR(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString();var n=tr.isObject(e),i=t&&t["Content-Type"],s;if((s=tr.isFileList(e))||n&&i==="multipart/form-data"){var o=this.env&&this.env.FormData;return Jse(s?{"files[]":e}:e,o&&new o)}else if(n||i==="application/json")return jR(t,"application/json"),Hse(e);return e}],transformResponse:[function(e){var t=this.transitional||Tv.transitional,n=t&&t.silentJSONParsing,i=t&&t.forcedJSONParsing,s=!n&&this.responseType==="json";if(s||i&&tr.isString(e)&&e.length)try{return JSON.parse(e)}catch(o){if(s)throw o.name==="SyntaxError"?KR.from(o,KR.ERR_BAD_RESPONSE,this,null,this.response):o}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Zse()},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};tr.forEach(["delete","get","head"],function(e){Tv.headers[e]={}});tr.forEach(["post","put","patch"],function(e){Tv.headers[e]=tr.merge(Gse)});var dQ=Tv,zse=gr,Xse=dQ,Yse=function(e,t,n){var i=this||Xse;return zse.forEach(n,function(o){e=o.call(i,e,t)}),e},mw,qR;function bL(){return qR||(qR=1,mw=function(e){return!!(e&&e.__CANCEL__)}),mw}var $R=gr,Bw=Yse,Kse=bL(),jse=dQ,qse=Mv();function vw(r){if(r.cancelToken&&r.cancelToken.throwIfRequested(),r.signal&&r.signal.aborted)throw new qse}var $se=function(e){vw(e),e.headers=e.headers||{},e.data=Bw.call(e,e.data,e.headers,e.transformRequest),e.headers=$R.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),$R.forEach(["delete","get","head","post","put","patch","common"],function(i){delete e.headers[i]});var t=e.adapter||jse.adapter;return t(e).then(function(i){return vw(e),i.data=Bw.call(e,i.data,i.headers,e.transformResponse),i},function(i){return Kse(i)||(vw(e),i&&i.response&&(i.response.data=Bw.call(e,i.response.data,i.response.headers,e.transformResponse))),Promise.reject(i)})},pi=gr,EL=function(e,t){t=t||{};var n={};function i(c,u){return pi.isPlainObject(c)&&pi.isPlainObject(u)?pi.merge(c,u):pi.isPlainObject(u)?pi.merge({},u):pi.isArray(u)?u.slice():u}function s(c){if(pi.isUndefined(t[c])){if(!pi.isUndefined(e[c]))return i(void 0,e[c])}else return i(e[c],t[c])}function o(c){if(!pi.isUndefined(t[c]))return i(void 0,t[c])}function a(c){if(pi.isUndefined(t[c])){if(!pi.isUndefined(e[c]))return i(void 0,e[c])}else return i(void 0,t[c])}function A(c){if(c in t)return i(e[c],t[c]);if(c in e)return i(void 0,e[c])}var l={url:o,method:o,data:o,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,beforeRedirect:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:A};return pi.forEach(Object.keys(e).concat(Object.keys(t)),function(u){var f=l[u]||s,d=f(u);pi.isUndefined(d)&&f!==A||(n[u]=d)}),n},yw,eM;function SL(){return eM||(eM=1,yw={version:"0.27.2"}),yw}var eoe=SL().version,dA=Hf,hQ={};["object","boolean","number","function","string","symbol"].forEach(function(r,e){hQ[r]=function(n){return typeof n===r||"a"+(e<1?"n ":" ")+r}});var tM={};hQ.transitional=function(e,t,n){function i(s,o){return"[Axios v"+eoe+"] Transitional option '"+s+"'"+o+(n?". "+n:"")}return function(s,o,a){if(e===!1)throw new dA(i(o," has been removed"+(t?" in "+t:"")),dA.ERR_DEPRECATED);return t&&!tM[o]&&(tM[o]=!0,console.warn(i(o," has been deprecated since v"+t+" and will be removed in the near future"))),e?e(s,o,a):!0}};function toe(r,e,t){if(typeof r!="object")throw new dA("options must be an object",dA.ERR_BAD_OPTION_VALUE);for(var n=Object.keys(r),i=n.length;i-- >0;){var s=n[i],o=e[s];if(o){var a=r[s],A=a===void 0||o(a,s,r);if(A!==!0)throw new dA("option "+s+" must be "+A,dA.ERR_BAD_OPTION_VALUE);continue}if(t!==!0)throw new dA("Unknown option "+s,dA.ERR_BAD_OPTION)}}var noe={assertOptions:toe,validators:hQ},_L=gr,roe=CL,nM=bse,rM=$se,Nv=EL,ioe=QL,RL=noe,eu=RL.validators;function Rf(r){this.defaults=r,this.interceptors={request:new nM,response:new nM}}Rf.prototype.request=function(e,t){typeof e=="string"?(t=t||{},t.url=e):t=e||{},t=Nv(this.defaults,t),t.method?t.method=t.method.toLowerCase():this.defaults.method?t.method=this.defaults.method.toLowerCase():t.method="get";var n=t.transitional;n!==void 0&&RL.assertOptions(n,{silentJSONParsing:eu.transitional(eu.boolean),forcedJSONParsing:eu.transitional(eu.boolean),clarifyTimeoutError:eu.transitional(eu.boolean)},!1);var i=[],s=!0;this.interceptors.request.forEach(function(d){typeof d.runWhen=="function"&&d.runWhen(t)===!1||(s=s&&d.synchronous,i.unshift(d.fulfilled,d.rejected))});var o=[];this.interceptors.response.forEach(function(d){o.push(d.fulfilled,d.rejected)});var a;if(!s){var A=[rM,void 0];for(Array.prototype.unshift.apply(A,i),A=A.concat(o),a=Promise.resolve(t);A.length;)a=a.then(A.shift(),A.shift());return a}for(var l=t;i.length;){var c=i.shift(),u=i.shift();try{l=c(l)}catch(f){u(f);break}}try{a=rM(l)}catch(f){return Promise.reject(f)}for(;o.length;)a=a.then(o.shift(),o.shift());return a};Rf.prototype.getUri=function(e){e=Nv(this.defaults,e);var t=ioe(e.baseURL,e.url);return roe(t,e.params,e.paramsSerializer)};_L.forEach(["delete","get","head","options"],function(e){Rf.prototype[e]=function(t,n){return this.request(Nv(n||{},{method:e,url:t,data:(n||{}).data}))}});_L.forEach(["post","put","patch"],function(e){function t(n){return function(s,o,a){return this.request(Nv(a||{},{method:e,headers:n?{"Content-Type":"multipart/form-data"}:{},url:s,data:o}))}}Rf.prototype[e]=t(),Rf.prototype[e+"Form"]=t(!0)});var soe=Rf,Cw,iM;function ooe(){if(iM)return Cw;iM=1;var r=Mv();function e(t){if(typeof t!="function")throw new TypeError("executor must be a function.");var n;this.promise=new Promise(function(o){n=o});var i=this;this.promise.then(function(s){if(i._listeners){var o,a=i._listeners.length;for(o=0;o<a;o++)i._listeners[o](s);i._listeners=null}}),this.promise.then=function(s){var o,a=new Promise(function(A){i.subscribe(A),o=A}).then(s);return a.cancel=function(){i.unsubscribe(o)},a},t(function(o){i.reason||(i.reason=new r(o),n(i.reason))})}return e.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},e.prototype.subscribe=function(n){if(this.reason){n(this.reason);return}this._listeners?this._listeners.push(n):this._listeners=[n]},e.prototype.unsubscribe=function(n){if(this._listeners){var i=this._listeners.indexOf(n);i!==-1&&this._listeners.splice(i,1)}},e.source=function(){var n,i=new e(function(o){n=o});return{token:i,cancel:n}},Cw=e,Cw}var ww,sM;function aoe(){return sM||(sM=1,ww=function(e){return function(n){return e.apply(null,n)}}),ww}var Fw,oM;function Aoe(){if(oM)return Fw;oM=1;var r=gr;return Fw=function(t){return r.isObject(t)&&t.isAxiosError===!0},Fw}var aM=gr,loe=BL,t0=soe,coe=EL,uoe=dQ;function ML(r){var e=new t0(r),t=loe(t0.prototype.request,e);return aM.extend(t,t0.prototype,e),aM.extend(t,e),t.create=function(i){return ML(coe(r,i))},t}var ui=ML(uoe);ui.Axios=t0;ui.CanceledError=Mv();ui.CancelToken=ooe();ui.isCancel=bL();ui.VERSION=SL().version;ui.toFormData=xL;ui.AxiosError=Hf;ui.Cancel=ui.CanceledError;ui.all=function(e){return Promise.all(e)};ui.spread=aoe();ui.isAxiosError=Aoe();sse.exports=ui;vB.default=ui;(function(r){r.exports=vB})(ise);const foe=PM(YI),TL={"Female 1":"1QnOliOAmerMUNuo2wXoH-YoainoSjZen","Female 2":"132G6oD0HHPPn4t1H6IkYv18_F0UVLWgi","Female 3":"1CdYZ2r52mtgJsFs88U0ZViMSnzpQ_HRp","Male 1":"17MQWS6m6VKkiU9KWRNGbTemZ0fIBKm0O","Male 2":"1AwNZizuEmCgmnpAlqGLXWh_mvTm6OLbM","Male 3":"1TKFdmFLttjjzByj2fZW8J70ZHjR-RTwc",Robot:"1NwpxG6kQ5lxwjPyuZTR0M9qc_7bMqPUH"},ju={red:{color:"#FF0000",fontColor:"#FF9494"},orange:{color:"#FF7300",fontColor:"#FF9A47"},yellow:{color:"#FFC800",fontColor:"#FFC800"},green:{color:"#99FF00",fontColor:"#99FF00"},blue:{color:"#00AAFF",fontColor:"#38BDFF"},indigo:{color:"#0062FF",fontColor:"#80B0FF"},violet:{color:"#C800FF",fontColor:"#EDADFF"},purple:{color:"#6600FF",fontColor:"#C59EFF"},pink:{color:"#FF94D2",fontColor:"#FF94D2"},black:{color:"#000000",fontColor:"#BFBFBF"},white:{color:"#FFFFFF",fontColor:"#FFFFFF"}},doe="_chatBox_1fp89_1",hoe="_messages_1fp89_50",poe="_scrollBox_1fp89_67",goe="_send_1fp89_78",moe="_mic_1fp89_90",Boe="_sendButton_1fp89_94",voe="_speaker_1fp89_100",yoe="_warning_1fp89_121",Coe="_isTyping_1fp89_130",woe="_show_1fp89_136",oo={chatBox:doe,messages:hoe,scrollBox:poe,send:goe,mic:moe,sendButton:Boe,speaker:voe,warning:yoe,isTyping:Coe,show:woe};var jI={},Foe={get exports(){return jI},set exports(r){jI=r}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(r){(function(){var e={}.hasOwnProperty;function t(){for(var n=[],i=0;i<arguments.length;i++){var s=arguments[i];if(s){var o=typeof s;if(o==="string"||o==="number")n.push(s);else if(Array.isArray(s)){if(s.length){var a=t.apply(null,s);a&&n.push(a)}}else if(o==="object"){if(s.toString!==Object.prototype.toString&&!s.toString.toString().includes("[native code]")){n.push(s.toString());continue}for(var A in s)e.call(s,A)&&s[A]&&n.push(A)}}}return n.join(" ")}r.exports?(t.default=t,r.exports=t):window.classNames=t})()})(Foe);const qu=jI,Ioe="_iconButtonWrap_1lbxs_1",Uoe="_buttonBackground_1lbxs_8",xoe="_buttonBackgroundColor_1lbxs_13",Qoe="_innerBackgroundColor_1lbxs_16",boe="_dark_1lbxs_20",Eoe="_iconWrap_1lbxs_28",Soe="_icon_1lbxs_1",_oe="_active_1lbxs_82",Roe="_buttonWrap_1lbxs_94",Moe="_buttonIconWrap_1lbxs_107",Toe="_innerWrap_1lbxs_126",gn={iconButtonWrap:Ioe,buttonBackground:Uoe,buttonBackgroundColor:xoe,innerBackgroundColor:Qoe,dark:boe,iconWrap:Eoe,icon:Soe,active:_oe,buttonWrap:Roe,buttonIconWrap:Moe,innerWrap:Toe},Noe=[{name:"backpack",file:"/assets/icons/backpack.svg"},{name:"microphone",file:"/assets/icons/microphone.svg"},{name:"speechToText",file:"/assets/icons/speechToText.svg"},{name:"arrowRight",file:"/assets/icons/arrowRight.svg"},{name:"arrowLeft",file:"/assets/icons/arrowLeft.svg"},{name:"rooms",file:"/assets/icons/rooms.svg"},{name:"scenes",file:"/assets/icons/scenes.svg"},{name:"settings",file:"/assets/icons/settings.svg"},{name:"tokens",file:"/assets/icons/tokens.svg"},{name:"voice",file:"/assets/icons/voice.svg"},{name:"vr",file:"/assets/icons/vr.svg"},{name:"discord",file:"/assets/icons/discord.svg"},{name:"metamask",file:"/assets/icons/metamask.svg"},{name:"close",file:"/assets/icons/close.svg"},{name:"hide",file:"/assets/icons/hide.svg"},{name:"map",file:"/assets/icons/map.svg"},{name:"login",file:"/assets/icons/login.svg"},{name:"logout",file:"/assets/icons/logout.svg"},{name:"plus",file:"/assets/icons/plus.svg"},{name:"minus",file:"/assets/icons/minus.svg"},{name:"mint",file:"/assets/icons/mint.svg"},{name:"download",file:"/assets/icons/download.svg"},{name:"classDropHunter",file:"/assets/icons/class-drop-hunter.svg"},{name:"classEndineer",file:"/assets/icons/class-engineer.svg"},{name:"classCustom",file:"/assets/icons/class-custom.svg"},{name:"classNeuralHacker",file:"/assets/icons/class-neural-hacker.svg"},{name:"classLiskWitch",file:"/assets/icons/class-lisk-witch.svg"},{name:"classBruiser",file:"/assets/icons/class-bruiser.svg"},{name:"classBeastPainter",file:"/assets/icons/class-beast-painter.svg"},{name:"soundon",file:"/assets/icons/soundon.svg"},{name:"soundoff",file:"/assets/icons/soundoff.svg"}];async function Voe(r){const e=Noe.find(t=>t.name===r);return await fetch(e.file).then(t=>t.text()).then(t=>new DOMParser().parseFromString(t,"image/svg+xml").firstElementChild)}function Ri(r){const{size:e,icon:t,className:n,onClick:i,theme:s,type:o,text:a,onMouseEnter:A,active:l,onSubmit:c,disabled:u}=r,f=Ie.useRef(null);return Ie.useEffect(()=>{t&&Voe(t).then(d=>{f.current&&(f.current.innerHTML="",d&&(d.classList.add(gn.icon),f.current.append(d)))})},[t]),o&&o==="login"?ie.jsxs("div",{className:qu(n,gn.iconButtonWrap,s&&s==="dark"?gn.dark:gn.light,l&&gn.active),style:{height:e},onClick:i,onMouseEnter:A,children:[ie.jsxs("svg",{width:"71",height:"67",viewBox:"0 0 71 67",className:gn.buttonBackground,xmlns:"http://www.w3.org/2000/svg",children:[ie.jsx("path",{d:"M2 2H68.8452L64.1437 65H2V2Z",className:gn.buttonBackgroundColor,fill:"#D9D9D9",stroke:"#050B0E",strokeWidth:"4"}),ie.jsx("path",{d:"M9 9H62L58.2676 58H9V9Z",fill:"#050B0E",className:gn.innerBackgroundColor})]}),ie.jsx("span",{ref:f,className:gn.iconWrap})]}):o&&o==="icon"?ie.jsxs("div",{className:qu(n,gn.iconButtonWrap,s&&s==="dark"?gn.dark:gn.light,l&&gn.active),style:{height:e},onClick:i,onMouseEnter:A,children:[ie.jsxs("svg",{className:gn.buttonBackground,width:"69",height:"63",viewBox:"0 0 69 63",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[ie.jsx("path",{d:"M5 2H2.85562L3.00485 4.13918L6.7903 58.4048L6.9201 60.2656H8.78545H62.6772H64.6178L64.6763 58.3259L66.3135 4.06031L66.3756 2H64.3144H5Z",fill:"#efefef",className:gn.buttonBackgroundColor,stroke:"black",strokeWidth:"4"}),ie.jsx("path",{d:"M8.77795 7.28503H61.7957L59.8437 54.7911H11.367L8.77795 7.28503Z",fill:"black",className:gn.innerBackgroundColor})]}),ie.jsx("span",{ref:f,className:gn.iconWrap})]}):ie.jsx("button",{className:qu(n,gn.buttonWrap,s&&s==="dark"?gn.dark:gn.light),onClick:i,onMouseEnter:A,onSubmit:c,type:o,children:ie.jsxs("div",{className:gn.innerWrap,style:{fontSize:e},children:[t&&ie.jsx("span",{ref:f,className:gn.buttonIconWrap,style:{height:e,width:e}}),a&&a]})})}var Doe={serverUrl:"http://localhost:20741",clientId:"any",accessToken:"test1234"},hA={language:"en-US",task:"",model:"",continuous:!0,optimizeFinalResult:!0,messageFormat:"default",engineOptions:{}},Iw="",AM={},cm={},lM;function koe(r){if(console.log("INFO - Server version: "+r.version),console.log("INFO - Active engine: "+r.engine),Iw=r.engine,console.log("INFO - Available ASR languages: "+JSON.stringify(r.languages,null,2)),hA.language=r.languages[0],r.languages,console.log("INFO - Available ASR models: "+JSON.stringify(r.models,null,2)),hA.model=r.models[0],console.log("INFO - ASR model properties: "+JSON.stringify(r.modelProperties,null,2)),r.models.forEach(function(e,t){cm[e]=r.modelProperties[t],cm[e].language=r.languages[t],cm[e].engine||(cm[e].engine=Iw)}),console.log("INFO - Available ASR features: "+JSON.stringify(r.features,null,2)),Array.isArray(r.features)?AM[Iw]=r.features:AM=r.features,!lM){lM={};let e=navigator.language,t;if(e&&r.languages&&r.models){let n=r.languages.indexOf(e);if(n>=0)t=n;else{let i=e.substring(0,2);for(let s=0;s<r.languages.length;s++)if(r.languages[s].indexOf(i)==0){t=s;break}}}t!=null&&(hA.language=r.languages[t],hA.model=r.models[t]),console.log("INFO - Default language/model: "+hA.language+"/"+hA.model+" - NOTE: If you set 'language' via settings make sure to remove 'model'!")}}function Loe(){console.log("INFO - Loading server settings...");var r=new AbortController;setTimeout(function(){r.abort()},8e3),fetch(Doe.serverUrl+"/settings",{method:"GET",signal:r.signal}).then(function(e){if(e.ok)return e.json();throw{name:"FetchError",message:e.statusText,code:e.status}}).then(function(e){console.log("Server Info",e),e&&e.settings&&koe(e.settings)}).catch(function(e){console.error("Server Info Fetch ERROR",e)})}var tf;class qI{constructor(e){Bc(this,tf,[]);je(this,"length",0);return Wv(this,tf,e),new Proxy(this,{get:(t,n)=>{if(n==="length")return Wi(this,tf).length;if(typeof+n=="number")return Wi(this,tf)[n]}})}}tf=new WeakMap;class CB{constructor(e){je(this,"resultIndex",0);je(this,"results");this.results=new qI(e)}_dispatch(e,t){const n=Object.create(CB);n.resultIndex=this.resultIndex,n.results=this.results,n.type=t,e._dispatchEvent(n)}}class Woe{constructor(){je(this,"transcript","");je(this,"confidence",1)}}var nf;class Zoe{constructor(e){Bc(this,nf,[]);je(this,"isFinal",!1);je(this,"length",0);return Wv(this,nf,e),new Proxy(this,{get:(t,n)=>{if(n==="isFinal")return this.isFinal;if(n==="length")return Wi(this,nf).length;if(typeof n=="symbol")return"You tried to access the raw list I think?";if(typeof+n=="number")return Wi(this,nf)[n]},[Symbol.toPrimitive]:(t,n)=>{console.log("Am I in here?")}})}}nf=new WeakMap;const Rd=Object.freeze({NOSPEECH:"no-speech",ABORTED:"aborted",AUDIOCAPTURE:"audio-capture",NETWORK:"network",NOTALLOWED:"not-allowed",SERVICENOTALLOWED:"service-not-allowed",BADGRAMMAR:"bad-grammar",LANGUAGENOTSUPPORTED:"language-not-supported"});class Su{constructor(){je(this,"error","");je(this,"message","")}_dispatch(e){const t=Object.create(Su);t.error=this.error,t.message=this.message,t.type="error",e._dispatchEvent(t)}}function Poe(r,e){var t=atob(r);if(e){for(var n=new Uint8Array(t.length),i=0,s=t.length;i<s;++i)n[i]=t.charCodeAt(i);return String.fromCharCode.apply(null,new Uint16Array(n.buffer))}return t}function Joe(r,e,t){var n=e===void 0?null:e,i=t===void 0?!1:t,s=Poe(r,i),o=s.indexOf(`
`,10)+1,a=s.substring(o)+(n?"//# sourceMappingURL="+n:""),A=new Blob([a],{type:"application/javascript"});return URL.createObjectURL(A)}function NL(r,e,t){var n;return function(s){return n=n||Joe(r,e,t),new Worker(n,s)}}var Goe=NL("Lyogcm9sbHVwLXBsdWdpbi13ZWItd29ya2VyLWxvYWRlciAqLwooZnVuY3Rpb24gKCkgewogICd1c2Ugc3RyaWN0JzsKCiAgLyoqDQogICAqIE9yaWdpbmFsIGNvcHlyaWdodCAyMDE4IEdvb2dsZSBMTEMgLSBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wOw0KICAgKiBNb2RpZmllZCBmb3IgU0VQSUEgcHJvamVjdCAoTUlUIExpY2Vuc2UpDQogICAqLw0KICAgDQogIC8qKg0KICAgKiBBIEpTIEZJRk8gaW1wbGVtZW50YXRpb24gZm9yIHRoZSBBdWRpb1dvcmtsZXQuDQogICAqIE5vdGU6DQogICAqICAtIFRoZSBjaGFubmVsIGNvdW50IG9mIGlucHV0L291dHB1dCBjYW5ub3QgYmUgY2hhbmdlZCBkeW5hbWljYWxseS4NCiAgICogICAgVGhlIEF1ZGlvV29ya2xldE5vZGUgc2hvdWxkIGJlIGNvbmZpZ3VyZWQgd2l0aCB0aGUgYC5jaGFubmVsQ291bnQgPSBrYA0KICAgKiAgICAod2hlcmUgayBpcyB0aGUgY2hhbm5lbCBjb3VudCB5b3Ugd2FudCkgYW5kIGAuY2hhbm5lbENvdW50TW9kZSA9IGV4cGxpY2l0YC4NCiAgICoNCiAgICogQGNsYXNzDQogICAqLw0KICAgY2xhc3MgUmluZ0J1ZmZlciB7DQogICAgLyoqDQogICAgICogQGNvbnN0cnVjdG9yDQogICAgICogQHBhcmFtICB7bnVtYmVyfSBsZW5ndGggQnVmZmVyIGxlbmd0aCBpbiBmcmFtZXMuDQogICAgICogQHBhcmFtICB7bnVtYmVyfSBjaGFubmVsQ291bnQgQnVmZmVyIGNoYW5uZWwgY291bnQuDQogICAgICogQHBhcmFtICB7bnVtYmVyfSBwcmVjaXNpb24gIlVpbnQ4IiwgIkludDgiLCAiVWludDE2IiwgIkludDE2IiwgIkZsb2F0MzIiIGV0Yy4NCiAgICAgKi8NCiAgICBjb25zdHJ1Y3RvcihsZW5ndGgsIGNoYW5uZWxDb3VudCwgcHJlY2lzaW9uKSB7DQogICAgICB0aGlzLl9yZWFkSW5kZXggPSAwOw0KICAgICAgdGhpcy5fd3JpdGVJbmRleCA9IDA7DQogICAgICB0aGlzLl9mcmFtZXNBdmFpbGFibGUgPSAwOw0KDQogICAgICB0aGlzLl9jaGFubmVsQ291bnQgPSBjaGFubmVsQ291bnQ7DQogICAgICB0aGlzLl9sZW5ndGggPSBsZW5ndGg7DQogICAgICB0aGlzLl9jaGFubmVsRGF0YSA9IFtdOw0KICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLl9jaGFubmVsQ291bnQ7ICsraSkgew0KICAJICBpZiAocHJlY2lzaW9uID09ICJVaW50MTYiKXsgdGhpcy5fY2hhbm5lbERhdGFbaV0gPSBuZXcgVWludDE2QXJyYXkobGVuZ3RoKTsgfQ0KICAJICBlbHNlIGlmIChwcmVjaXNpb24gPT0gIkludDE2Iil7IHRoaXMuX2NoYW5uZWxEYXRhW2ldID0gbmV3IEludDE2QXJyYXkobGVuZ3RoKTsgfQ0KICAJICBlbHNlIGlmIChwcmVjaXNpb24gPT0gIlVpbnQ4Iil7IHRoaXMuX2NoYW5uZWxEYXRhW2ldID0gbmV3IFVpbnQ4QXJyYXkobGVuZ3RoKTsgfQ0KICAJICBlbHNlIGlmIChwcmVjaXNpb24gPT0gIkludDgiKXsgdGhpcy5fY2hhbm5lbERhdGFbaV0gPSBuZXcgSW50OEFycmF5KGxlbmd0aCk7IH0NCiAgCSAgZWxzZSB7IHRoaXMuX2NoYW5uZWxEYXRhW2ldID0gbmV3IEZsb2F0MzJBcnJheShsZW5ndGgpOyB9DQogICAgICB9DQogICAgfQ0KDQogICAgLyoqDQogICAgICogR2V0dGVyIGZvciBBdmFpbGFibGUgZnJhbWVzIGluIGJ1ZmZlci4NCiAgICAgKg0KICAgICAqIEByZXR1cm4ge251bWJlcn0gQXZhaWxhYmxlIGZyYW1lcyBpbiBidWZmZXIuDQogICAgICovDQogICAgZ2V0IGZyYW1lc0F2YWlsYWJsZSgpIHsNCiAgICAgIHJldHVybiB0aGlzLl9mcmFtZXNBdmFpbGFibGU7DQogICAgfQ0KDQogICAgLyoqDQogICAgICogUHVzaCBhIHNlcXVlbmNlIG9mIEFycmF5cyB0byBidWZmZXIuDQogICAgICoNCiAgICAgKiBAcGFyYW0gIHthcnJheX0gYXJyYXlTZXF1ZW5jZSBBIHNlcXVlbmNlIG9mIEFycmF5cy4NCiAgICAgKiBAcGFyYW0gIHtmdW5jdGlvbn0gY3VzdG9tVHJhbnNmb3JtIEEgZnVuY3Rpb24gb2YgKGFycmF5LCBjaGFubmVsLCBpbmRleCkgdG8gdHJhbnNmb3JtIHRoZSBpbnB1dCBkdXJpbmcgcHVzaCAob3IgbnVsbCkuDQogICAgICovDQogICAgcHVzaChhcnJheVNlcXVlbmNlLCBjdXN0b21UcmFuc2Zvcm0pIHsNCiAgICAgIC8vIFRoZSBjaGFubmVsIGNvdW50IG9mIGFycmF5U2VxdWVuY2UgYW5kIHRoZSBsZW5ndGggb2YgZWFjaCBjaGFubmVsIG11c3QNCiAgICAgIC8vIG1hdGNoIHdpdGggdGhpcyBidWZmZXIgb2JlamN0Lg0KDQogICAgICAvLyBUcmFuc2ZlciBkYXRhIGZyb20gdGhlIHxhcnJheVNlcXVlbmNlfCBzdG9yYWdlIHRvIHRoZSBpbnRlcm5hbCBidWZmZXIuDQogICAgICBsZXQgc291cmNlTGVuZ3RoID0gYXJyYXlTZXF1ZW5jZVswXS5sZW5ndGg7DQogIAlsZXQgdHJhbnNmb3JtID0gY3VzdG9tVHJhbnNmb3JtIHx8IGZ1bmN0aW9uKHRoaXNBcnJheSwgY2hhbm5lbCwgaSl7DQogIAkJcmV0dXJuIHRoaXNBcnJheVtjaGFubmVsXVtpXTsNCiAgCX07DQogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNvdXJjZUxlbmd0aDsgKytpKSB7DQogICAgICAgIGxldCB3cml0ZUluZGV4ID0gKHRoaXMuX3dyaXRlSW5kZXggKyBpKSAlIHRoaXMuX2xlbmd0aDsNCiAgICAgICAgZm9yIChsZXQgY2hhbm5lbCA9IDA7IGNoYW5uZWwgPCB0aGlzLl9jaGFubmVsQ291bnQ7ICsrY2hhbm5lbCkgew0KICAgICAgICAgIHRoaXMuX2NoYW5uZWxEYXRhW2NoYW5uZWxdW3dyaXRlSW5kZXhdID0gdHJhbnNmb3JtKGFycmF5U2VxdWVuY2UsIGNoYW5uZWwsIGkpOw0KICAgICAgICB9DQogICAgICB9DQoNCiAgICAgIHRoaXMuX3dyaXRlSW5kZXggKz0gc291cmNlTGVuZ3RoOw0KICAgICAgaWYgKHRoaXMuX3dyaXRlSW5kZXggPj0gdGhpcy5fbGVuZ3RoKSB7DQogICAgICAgIHRoaXMuX3dyaXRlSW5kZXggPSB0aGlzLl93cml0ZUluZGV4IC0gdGhpcy5fbGVuZ3RoOw0KICAgICAgfQ0KDQogICAgICAvLyBGb3IgZXhjZXNzaXZlIGZyYW1lcywgdGhlIGJ1ZmZlciB3aWxsIGJlIG92ZXJ3cml0dGVuLg0KICAgICAgdGhpcy5fZnJhbWVzQXZhaWxhYmxlICs9IHNvdXJjZUxlbmd0aDsNCiAgICAgIGlmICh0aGlzLl9mcmFtZXNBdmFpbGFibGUgPiB0aGlzLl9sZW5ndGgpIHsNCiAgICAgICAgdGhpcy5fZnJhbWVzQXZhaWxhYmxlID0gdGhpcy5fbGVuZ3RoOw0KICAgICAgfQ0KICAgIH0NCg0KICAgIC8qKg0KICAgICAqIFB1bGwgZGF0YSBvdXQgb2YgYnVmZmVyIGFuZCBmaWxsIGEgZ2l2ZW4gc2VxdWVuY2Ugb2YgQXJyYXlzLg0KICAgICAqDQogICAgICogQHBhcmFtICB7YXJyYXl9IGFycmF5U2VxdWVuY2UgQW4gYXJyYXkgb2YgQXJyYXlzLg0KICAgICAqIEBwYXJhbSAge2Z1bmN0aW9ufSBjdXN0b21UcmFuc2Zvcm0gQSBmdW5jdGlvbiBvZiAoYXJyYXksIGNoYW5uZWwsIGluZGV4KSB0byB0cmFuc2Zvcm0gdGhlIG91dHB1dCBkdXJpbmcgcHVsbCAob3IgbnVsbCkuDQogICAgICovDQogICAgcHVsbChhcnJheVNlcXVlbmNlLCBjdXN0b21UcmFuc2Zvcm0pIHsNCiAgICAgIC8vIFRoZSBjaGFubmVsIGNvdW50IG9mIGFycmF5U2VxdWVuY2UgYW5kIHRoZSBsZW5ndGggb2YgZWFjaCBjaGFubmVsIG11c3QNCiAgICAgIC8vIG1hdGNoIHdpdGggdGhpcyBidWZmZXIgb2JlamN0Lg0KDQogICAgICAvLyBJZiB0aGUgRklGTyBpcyBjb21wbGV0ZWx5IGVtcHR5LCBkbyBub3RoaW5nLg0KICAgICAgaWYgKHRoaXMuX2ZyYW1lc0F2YWlsYWJsZSA9PT0gMCkgew0KICAgICAgICByZXR1cm47DQogICAgICB9DQoNCiAgICAgIGxldCBkZXN0aW5hdGlvbkxlbmd0aCA9IGFycmF5U2VxdWVuY2VbMF0ubGVuZ3RoOw0KICAJbGV0IHRyYW5zZm9ybSA9IGN1c3RvbVRyYW5zZm9ybSB8fCBmdW5jdGlvbih0aGlzQXJyYXksIGNoYW5uZWwsIGkpew0KICAJCXJldHVybiB0aGlzQXJyYXlbY2hhbm5lbF1baV07DQogIAl9Ow0KDQogICAgICAvLyBUcmFuc2ZlciBkYXRhIGZyb20gdGhlIGludGVybmFsIGJ1ZmZlciB0byB0aGUgfGFycmF5U2VxdWVuY2V8IHN0b3JhZ2UuDQogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGRlc3RpbmF0aW9uTGVuZ3RoOyArK2kpIHsNCiAgICAgICAgbGV0IHJlYWRJbmRleCA9ICh0aGlzLl9yZWFkSW5kZXggKyBpKSAlIHRoaXMuX2xlbmd0aDsNCiAgICAgICAgZm9yIChsZXQgY2hhbm5lbCA9IDA7IGNoYW5uZWwgPCB0aGlzLl9jaGFubmVsQ291bnQ7ICsrY2hhbm5lbCkgew0KICAgICAgICAgIGFycmF5U2VxdWVuY2VbY2hhbm5lbF1baV0gPSB0cmFuc2Zvcm0odGhpcy5fY2hhbm5lbERhdGEsIGNoYW5uZWwsIHJlYWRJbmRleCk7DQogICAgICAgIH0NCiAgICAgIH0NCg0KICAgICAgdGhpcy5fcmVhZEluZGV4ICs9IGRlc3RpbmF0aW9uTGVuZ3RoOw0KICAgICAgaWYgKHRoaXMuX3JlYWRJbmRleCA+PSB0aGlzLl9sZW5ndGgpIHsNCiAgICAgICAgdGhpcy5fcmVhZEluZGV4ID0gdGhpcy5fcmVhZEluZGV4IC0gdGhpcy5fbGVuZ3RoOw0KICAgICAgfQ0KDQogICAgICB0aGlzLl9mcmFtZXNBdmFpbGFibGUgLT0gZGVzdGluYXRpb25MZW5ndGg7DQogICAgICBpZiAodGhpcy5fZnJhbWVzQXZhaWxhYmxlIDwgMCkgew0KICAgICAgICB0aGlzLl9mcmFtZXNBdmFpbGFibGUgPSAwOw0KICAgICAgfQ0KICAgIH0NCiAgfQoKICBjb25zdCBXZWJSdGNWYWQ9ZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oYSl7ZnVuY3Rpb24gYihhLGIpe2F8fEYoIkFzc2VydGlvbiBmYWlsZWQ6ICIrYik7fWZ1bmN0aW9uIGMoYSl7dmFyIGM9SVsiXyIrYV07cmV0dXJuIGIoYywiQ2Fubm90IGNhbGwgdW5rbm93biBmdW5jdGlvbiAiK2ErIiwgbWFrZSBzdXJlIGl0IGlzIGV4cG9ydGVkIiksY31mdW5jdGlvbiBkKGEsYixkLGUpe2Z1bmN0aW9uIGcoYSl7cmV0dXJuICJzdHJpbmciPT09Yj9mKGEpOiJib29sZWFuIj09PWI/ISFhOmF9dmFyIGo9e3N0cmluZzpmdW5jdGlvbihhKXt2YXIgYj0wO2lmKG51bGwhPT1hJiZ2b2lkIDAhPT1hJiYwIT09YSl7dmFyIGM9KGEubGVuZ3RoPDwyKSsxO2I9Y2IoYyksaChhLGIsYyk7fXJldHVybiBifSxhcnJheTpmdW5jdGlvbihhKXt2YXIgYj1jYihhLmxlbmd0aCk7cmV0dXJuIGsoYSxiKSxifX0sbD1jKGEpLG09W10sbj0wO2lmKGUpZm9yKHZhciBvLHA9MDtwPGUubGVuZ3RoO3ArKylvPWpbZFtwXV0sbz8oMD09PW4mJihuPWViKCkpLG1bcF09byhlW3BdKSk6bVtwXT1lW3BdO3ZhciBxPWwuYXBwbHkobnVsbCxtKTtyZXR1cm4gcT1nKHEpLDAhPT1uJiZkYihuKSxxfWZ1bmN0aW9uIGUoYSxiLGMpe2Zvcih2YXIgZD1iK2MsZT1iO2FbZV0mJiEoZT49ZCk7KSsrZTtpZigxNjxlLWImJmEuc3ViYXJyYXkmJmlhKXJldHVybiBpYS5kZWNvZGUoYS5zdWJhcnJheShiLGUpKTtmb3IodmFyIGYsZz0iIjtiPGU7KXtpZihmPWFbYisrXSwhKDEyOCZmKSl7Zys9U3RyaW5nLmZyb21DaGFyQ29kZShmKTtjb250aW51ZX12YXIgaD02MyZhW2IrK107aWYoMTkyPT0oMjI0JmYpKXtnKz1TdHJpbmcuZnJvbUNoYXJDb2RlKCgzMSZmKTw8NnxoKTtjb250aW51ZX12YXIgaT02MyZhW2IrK107aWYoZj0yMjQ9PSgyNDAmZik/KDE1JmYpPDwxMnxoPDw2fGk6KDcmZik8PDE4fGg8PDEyfGk8PDZ8NjMmYVtiKytdLDY1NTM2PmYpZys9U3RyaW5nLmZyb21DaGFyQ29kZShmKTtlbHNlIHt2YXIgaj1mLTY1NTM2O2crPVN0cmluZy5mcm9tQ2hhckNvZGUoNTUyOTZ8aj4+MTAsNTYzMjB8MTAyMyZqKTt9fXJldHVybiBnfWZ1bmN0aW9uIGYoYSxiKXtyZXR1cm4gYT9lKF8sYSxiKToiIn1mdW5jdGlvbiBnKGEsYixjLGQpe2lmKCEoMDxkKSlyZXR1cm4gMDtmb3IodmFyIGUsZj1jLGc9YytkLTEsaD0wO2g8YS5sZW5ndGg7KytoKXtpZihlPWEuY2hhckNvZGVBdChoKSw1NTI5Njw9ZSYmNTczNDM+PWUpe3ZhciBqPWEuY2hhckNvZGVBdCgrK2gpO2U9NjU1MzYrKCgxMDIzJmUpPDwxMCl8MTAyMyZqO31pZigxMjc+PWUpe2lmKGM+PWcpYnJlYWs7YltjKytdPWU7fWVsc2UgaWYoMjA0Nz49ZSl7aWYoYysxPj1nKWJyZWFrO2JbYysrXT0xOTJ8ZT4+NixiW2MrK109MTI4fDYzJmU7fWVsc2UgaWYoNjU1MzU+PWUpe2lmKGMrMj49ZylicmVhaztiW2MrK109MjI0fGU+PjEyLGJbYysrXT0xMjh8NjMmZT4+NixiW2MrK109MTI4fDYzJmU7fWVsc2Uge2lmKGMrMz49ZylicmVhaztiW2MrK109MjQwfGU+PjE4LGJbYysrXT0xMjh8NjMmZT4+MTIsYltjKytdPTEyOHw2MyZlPj42LGJbYysrXT0xMjh8NjMmZTt9fXJldHVybiBiW2NdPTAsYy1mfWZ1bmN0aW9uIGgoYSxiLGMpe3JldHVybiBnKGEsXyxiLGMpfWZ1bmN0aW9uIGkoYSl7Zm9yKHZhciBiLGM9MCxkPTA7ZDxhLmxlbmd0aDsrK2QpYj1hLmNoYXJDb2RlQXQoZCksNTUyOTY8PWImJjU3MzQzPj1iJiYoYj02NTUzNisoKDEwMjMmYik8PDEwKXwxMDIzJmEuY2hhckNvZGVBdCgrK2QpKSwxMjc+PWI/KytjOjIwNDc+PWI/Yys9Mjo2NTUzNT49Yj9jKz0zOmMrPTQ7cmV0dXJuIGN9ZnVuY3Rpb24gaihhKXt2YXIgYj1pKGEpKzEsYz1jYihiKTtyZXR1cm4gZyhhLCQsYyxiKSxjfWZ1bmN0aW9uIGsoYSxiKXskLnNldChhLGIpO31mdW5jdGlvbiBsKCl7SS5IRUFQOD0kPW5ldyBJbnQ4QXJyYXkoWiksSS5IRUFQMTY9bmV3IEludDE2QXJyYXkoWiksSS5IRUFQMzI9Y2E9bmV3IEludDMyQXJyYXkoWiksSS5IRUFQVTg9Xz1uZXcgVWludDhBcnJheShaKSxJLkhFQVBVMTY9bmV3IFVpbnQxNkFycmF5KFopLEkuSEVBUFUzMj1uZXcgVWludDMyQXJyYXkoWiksSS5IRUFQRjMyPW5ldyBGbG9hdDMyQXJyYXkoWiksSS5IRUFQRjY0PW5ldyBGbG9hdDY0QXJyYXkoWik7fWZ1bmN0aW9uIG0oYSl7Zm9yKDswPGEubGVuZ3RoOyl7dmFyIGI9YS5zaGlmdCgpO2lmKCJmdW5jdGlvbiI9PXR5cGVvZiBiKXtiKCk7Y29udGludWV9dmFyIGM9Yi5mdW5jOyJudW1iZXIiPT10eXBlb2YgYz92b2lkIDA9PT1iLmFyZz9JLmR5bkNhbGxfdihjKTpJLmR5bkNhbGxfdmkoYyxiLmFyZyk6Yyh2b2lkIDA9PT1iLmFyZz9udWxsOmIuYXJnKTt9fWZ1bmN0aW9uIG4oKXtpZihJLnByZVJ1bilmb3IoImZ1bmN0aW9uIj09dHlwZW9mIEkucHJlUnVuJiYoSS5wcmVSdW49W0kucHJlUnVuXSk7SS5wcmVSdW4ubGVuZ3RoOylzKEkucHJlUnVuLnNoaWZ0KCkpO20ob2EpO31mdW5jdGlvbiBvKCl7bShwYSk7fWZ1bmN0aW9uIHAoKXttKHFhKTt9ZnVuY3Rpb24gcigpe2lmKEkucG9zdFJ1bilmb3IoImZ1bmN0aW9uIj09dHlwZW9mIEkucG9zdFJ1biYmKEkucG9zdFJ1bj1bSS5wb3N0UnVuXSk7SS5wb3N0UnVuLmxlbmd0aDspdChJLnBvc3RSdW4uc2hpZnQoKSk7bShyYSk7fWZ1bmN0aW9uIHMoYSl7b2EudW5zaGlmdChhKTt9ZnVuY3Rpb24gdChhKXtyYS51bnNoaWZ0KGEpO31mdW5jdGlvbiB1KCl7T2ErKyxJLm1vbml0b3JSdW5EZXBlbmRlbmNpZXMmJkkubW9uaXRvclJ1bkRlcGVuZGVuY2llcyhPYSk7fWZ1bmN0aW9uIHYoKXtpZihPYS0tLEkubW9uaXRvclJ1bkRlcGVuZGVuY2llcyYmSS5tb25pdG9yUnVuRGVwZW5kZW5jaWVzKE9hKSwwPT1PYSYmKFFhKSl7dmFyIGE9UWE7UWE9bnVsbCxhKCk7fX1mdW5jdGlvbiB3KGEpe2Z1bmN0aW9uIGIoYSl7dmFyIGI9YS5leHBvcnRzO0kuYXNtPWIsdigpO31mdW5jdGlvbiBjKGEpe2lmKCJib29sZWFuIj09dHlwZW9mIE8mJk8pe3ZhciBiO3RyeXtiPUJ1ZmZlci5mcm9tKGEsImJhc2U2NCIpO31jYXRjaChjKXtiPW5ldyBCdWZmZXIoYSwiYmFzZTY0Iik7fXJldHVybiBuZXcgVWludDhBcnJheShiLmJ1ZmZlcixiLmJ5dGVPZmZzZXQsYi5ieXRlTGVuZ3RoKX10cnl7Zm9yKHZhciBjPWYoYSksZD1uZXcgVWludDhBcnJheShjLmxlbmd0aCksZT0wO2U8Yy5sZW5ndGg7KytlKWRbZV09Yy5jaGFyQ29kZUF0KGUpO3JldHVybiBkfWNhdGNoKGEpe3Rocm93IG5ldyBFcnJvcigiQ29udmVydGluZyBiYXNlNjQgc3RyaW5nIHRvIGJ5dGVzIGZhaWxlZC4iKX19ZnVuY3Rpb24gZChhKXtyZXR1cm4gYyhhLnNsaWNlKDM3KSl9dmFyIGU9e2VudjphLGdsb2JhbDp7TmFOOk5hTixJbmZpbml0eToxLzB9LCJnbG9iYWwuTWF0aCI6TWF0aCxhc20yd2FzbTpTfTt1KCk7dmFyIGY9ImZ1bmN0aW9uIj09dHlwZW9mIGF0b2I/YXRvYjpmdW5jdGlvbihhKXt2YXIgYixjLGQsZSxmLGcsaCxqPSIiLGs9MDthPWEucmVwbGFjZSgvW15BLVphLXowLTlcK1wvXD1dL2csIiIpO2RvIGU9IkFCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXowMTIzNDU2Nzg5Ky89Ii5pbmRleE9mKGEuY2hhckF0KGsrKykpLGY9IkFCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXowMTIzNDU2Nzg5Ky89Ii5pbmRleE9mKGEuY2hhckF0KGsrKykpLGc9IkFCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXowMTIzNDU2Nzg5Ky89Ii5pbmRleE9mKGEuY2hhckF0KGsrKykpLGg9IkFCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXowMTIzNDU2Nzg5Ky89Ii5pbmRleE9mKGEuY2hhckF0KGsrKykpLGI9ZTw8MnxmPj40LGM9KDE1JmYpPDw0fGc+PjIsZD0oMyZnKTw8NnxoLGorPVN0cmluZy5mcm9tQ2hhckNvZGUoYiksNjQhPT1nJiYoais9U3RyaW5nLmZyb21DaGFyQ29kZShjKSksNjQhPT1oJiYoais9U3RyaW5nLmZyb21DaGFyQ29kZShkKSk7d2hpbGUoazxhLmxlbmd0aCk7cmV0dXJuIGp9O2lmKEkuaW5zdGFudGlhdGVXYXNtKXRyeXtyZXR1cm4gSS5pbnN0YW50aWF0ZVdhc20oZSxiKX1jYXRjaChhKXtyZXR1cm4gUigiTW9kdWxlLmluc3RhbnRpYXRlV2FzbSBjYWxsYmFjayBmYWlsZWQgd2l0aCBlcnJvcjogIithKSwhMX1yZXR1cm4gZnVuY3Rpb24oYSl7dmFyIGI9ZChKKTtyZXR1cm4gV2ViQXNzZW1ibHkuaW5zdGFudGlhdGUoYixlKS50aGVuKGEsZnVuY3Rpb24oYSl7UigiZmFpbGVkIHRvIGFzeW5jaHJvbm91c2x5IHByZXBhcmUgd2FzbTogIithKSxGKGEpO30pfShmdW5jdGlvbihhKXtiKGEuaW5zdGFuY2UpO30pLHt9fWZ1bmN0aW9uIHgoYSxiKXtTYS52YXJhcmdzPWI7dHJ5e2Zvcih2YXIgYz1TYS5nZXQoKSxkPVNhLmdldCgpLGU9U2EuZ2V0KCksZj0wLGc9MDtnPGU7ZysrKXtmb3IodmFyIGg9Y2FbZCs4Kmc+PjJdLGs9Y2FbZCsoOCpnKzQpPj4yXSxsPTA7bDxrO2wrKylTYS5wcmludENoYXIoYyxfW2grbF0pO2YrPWs7fXJldHVybiBmfWNhdGNoKGEpe3JldHVybiAidW5kZWZpbmVkIiE9dHlwZW9mIEZTJiZhIGluc3RhbmNlb2YgRlMuRXJybm9FcnJvcnx8RihhKSwtYS5lcnJub319ZnVuY3Rpb24geSgpe3JldHVybiAkLmxlbmd0aH1mdW5jdGlvbiB6KGEsYixjKXtfLnNldChfLnN1YmFycmF5KGIsYitjKSxhKTt9ZnVuY3Rpb24gQShhKXtyZXR1cm4gSS5fX19lcnJub19sb2NhdGlvbiYmKGNhW0kuX19fZXJybm9fbG9jYXRpb24oKT4+Ml09YSksYX1mdW5jdGlvbiBCKCl7RigiT09NIik7fWZ1bmN0aW9uIEMoYSl7dGhpcy5uYW1lPSJFeGl0U3RhdHVzIix0aGlzLm1lc3NhZ2U9IlByb2dyYW0gdGVybWluYXRlZCB3aXRoIGV4aXQoIithKyIpIix0aGlzLnN0YXR1cz1hO31mdW5jdGlvbiBEKGEpe2Z1bmN0aW9uIGIoKXtJLmNhbGxlZFJ1bnx8KEkuY2FsbGVkUnVuPSEwLGdhfHwobygpLHAoKSxHKEkpLEkub25SdW50aW1lSW5pdGlhbGl6ZWQmJkkub25SdW50aW1lSW5pdGlhbGl6ZWQoKSxJLl9tYWluJiZvYiYmSS5jYWxsTWFpbihhKSxyKCkpKTt9KGE9YXx8SS5hcmd1bWVudHMsISgwPE9hKSkmJihuKCksMDxPYXx8SS5jYWxsZWRSdW58fChJLnNldFN0YXR1cz8oSS5zZXRTdGF0dXMoIlJ1bm5pbmcuLi4iKSxzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7c2V0VGltZW91dChmdW5jdGlvbigpe0kuc2V0U3RhdHVzKCIiKTt9LDEpLGIoKTt9LDEpKTpiKCkpKTt9ZnVuY3Rpb24gRShhLGIpe2ImJkkubm9FeGl0UnVudGltZSYmMD09PWF8fChJLm5vRXhpdFJ1bnRpbWV8fChnYT0hMCxJLm9uRXhpdCYmSS5vbkV4aXQoYSkpLEkucXVpdChhLG5ldyBDKGEpKSk7fWZ1bmN0aW9uIEYoYSl7dGhyb3cgSS5vbkFib3J0JiZJLm9uQWJvcnQoYSksdm9pZCAwPT09YT9hPSIiOihRKGEpLFIoYSksYT0iXCIiK2ErIlwiIiksZ2E9ITAsImFib3J0KCIrYSsiKS4gQnVpbGQgd2l0aCAtcyBBU1NFUlRJT05TPTEgZm9yIG1vcmUgaW5mby4ifWE9YXx8e307dmFyIEcsST0idW5kZWZpbmVkIj09dHlwZW9mIGE/e306YSxKPSJkYXRhOmFwcGxpY2F0aW9uL29jdGV0LXN0cmVhbTtiYXNlNjQsQUdGemJRRUFBQUFCcEFFVllBTi9mMzhCZjJBQUFHQUJmd0YvWUFKL2Z3Ri9ZQWQvZjM5L2YzOS9BWDlnQ0g5L2YzOS9mMzkvQVg5Z0EzOStmd0YrWUFGL0FHQUhmMzkvZjM5L2Z3QmdCSDkvZjM4QVlBQUJmMkFDZjM4QVlBWi9mMzkvZjM4QmYyQUVmMzkvZndGL1lBWi9mMzkvZjM4QVlBVi9mMzkvZndCZ0EzOS9md0JnQ1g5L2YzOS9mMzkvZndGL1lBUi9mMzUvQVg1Z0NIOS9mMzkvZjM5L0FHQUZmMzkvZjM4QmZ3TFdBaEFEWlc1MkJXRmliM0owQUFjRFpXNTJEbDlmWDJGemMyVnlkRjltWVdsc0FBa0RaVzUyQzE5ZlgzTmxkRVZ5Y2s1dkFBY0RaVzUyRFY5ZlgzTjVjMk5oYkd3eE5EQUFBd05sYm5ZTlgxOWZjM2x6WTJGc2JERTBOZ0FEQTJWdWRneGZYMTl6ZVhOallXeHNOVFFBQXdObGJuWUxYMTlmYzNselkyRnNiRFlBQXdObGJuWVpYMlZ0YzJOeWFYQjBaVzVmWjJWMFgyaGxZWEJmYzJsNlpRQUtBMlZ1ZGhaZlpXMXpZM0pwY0hSbGJsOXRaVzFqY0hsZlltbG5BQUFEWlc1MkYxOWxiWE5qY21sd2RHVnVYM0psYzJsNlpWOW9aV0Z3QUFJRFpXNTJGMkZpYjNKMFQyNURZVzV1YjNSSGNtOTNUV1Z0YjNKNUFBSURaVzUyQzNObGRGUmxiWEJTWlhRd0FBY0RaVzUyREY5ZmRHRmliR1ZmWW1GelpRTi9BQU5sYm5ZT1JGbE9RVTFKUTFSUFVGOVFWRklEZndBRFpXNTJCbTFsYlc5eWVRSUJnQUtBQWdObGJuWUZkR0ZpYkdVQmNBRWdJQU5uWmdJS0J3c0tBZ3dDQWdNTkF3SURBQUFOQWdBQUFBME9Ed2tDRHcwSkFBRUJBUUVEQ1FjQUVBa0pDUVFDQndBQUFBSUZBZ0FBQ0FzREF3TURBd01DQUFZQ0NnSUFBZ2NBQWdJRERRTUNBZ2NEQUFBQ0F3QU5CUkVTQndzVEFnTUFCQVVHQVFjSUZBWVBBbjhCUWNBNUMzOEJRY0M1d0FJTEI3QUNGaEZmWDE5bGNuSnViMTlzYjJOaGRHbHZiZ0JOQlY5bWNtVmxBRm9GWDIxaGFXNEFFQWRmYldGc2JHOWpBRmtIWDIxbGJXTndlUUJjQjE5dFpXMXpaWFFBWFExZmNISnZZMlZ6YzE5a1lYUmhBQklGWDNOaWNtc0FYZ2hmYzJWMGJXOWtaUUFSQ21SNWJrTmhiR3hmYVdrQVh3dGtlVzVEWVd4c1gybHBhUUJnREdSNWJrTmhiR3hmYVdscGFRQmhFR1I1YmtOaGJHeGZhV2xwYVdscGFXa0FZaEZrZVc1RFlXeHNYMmxwYVdscGFXbHBhUUJqREdSNWJrTmhiR3hmYW1scWFRQnhDV1I1YmtOaGJHeGZkZ0JsQ21SNWJrTmhiR3hmZG1rQVpoQmtlVzVEWVd4c1gzWnBhV2xwYVdscEFHY1RaWE4wWVdKc2FYTm9VM1JoWTJ0VGNHRmpaUUFQQ25OMFlXTnJRV3hzYjJNQURBeHpkR0ZqYTFKbGMzUnZjbVVBRGdsemRHRmphMU5oZG1VQURRa21BUUFqQUFzZ2FFazNhR2xFUlVaSFNHbHBhazg1T2twcWFtcHJObXc5YlV0dUxHODRjRUVLcU1FQlpoc0JBWDhqQWlFQklBQWpBbW9rQWlNQ1FROXFRWEJ4SkFJZ0FRc0VBQ01DQ3dZQUlBQWtBZ3NLQUNBQUpBSWdBU1FEQ3hzQVFmQXJFQk5CZjBZRVFFRUFEd3RCOENzb0FnQVFGRUYvUndzTUFFSHdLeWdDQUNBQUVCVUxjQUFnQUVVRVFFSGVJUkJZR2dzZ0FDNEJBQ0FEUndSQVFaQWhRYUFoUVI1QnB5RVFBUXNnQUVISUFXb3VBUUFnQkVjRVFFRzBJVUdnSVVFZlFhY2hFQUVMSUFVZ0FFR2dIMm91QVFCR0JFQkI4Q3NvQWdBZ0FpQUFJQUVRRmc4RlFjZ2hRYUFoUVNCQnB5RVFBUXRCQUFzdEFDQUFCSDhnQUVIZ0JSQlpJZ0EyQWdBZ0FBUi9FQ29nQUVIY0JXcEJBRFlDQUVFQUJVRi9Dd1ZCZndzTEJnQWdBQkFZQ3lJQUlBQUVmeUFBUWR3RmFpZ0NBRUVxUmdSL0lBQWdBUkFaQlVGL0N3VkJmd3NMeFFFQUlBQkZCRUJCZnc4TElBSkZJQUJCM0FWcUtBSUFRU3BIY2dSQVFYOFBDeUFCSUFNUUZ3UkFRWDhQQ3dKQUlBRkJnUG9CU0FSQUlBRkJnUDBBU0FSQUlBRkJ3RDVyUlFSQUlBQWdBaUFERUJzaEFBd0RDMEYvRHdVZ0FVR0EvUUJyUlFSQUlBQWdBaUFERUNBaEFBd0RDMEYvRHdzQUJTQUJRWUQzQWtnRVFDQUJRWUQ2QVd0RkJFQWdBQ0FDSUFNUUh5RUFEQU1MUVg4UEJTQUJRWUQzQW10RkJFQWdBQ0FDSUFNUUdpRUFEQU1MUVg4UEN3QUxBQXNnQUVFQklBQkJBVWdiQzRVQkFBSi9JQUVnQUVHQStnRklCSDhDZnlBQVFZRDlBRWdFUUVFSUlBQkJ3RDVyUlEwQkdrRi9EQU1MUVg4Z0FFR0EvUUJyRFFJYVFSQUxCU0FBUVlEM0FrZ0VmMEYvSUFCQmdQb0JhdzBDR2tFZ0JVRi9JQUJCZ1BjQ2F3MENHa0V3Q3dzaUFFRWViRVlnQVNBQVFRcHNSaUFCSUFCQkZHeEdjbkpCQVhOQkgzUkJIM1VMQzQwREFRRi9JQUJGQkVCQmZ3OExJQUJCQVRZQ0FDQUFRUVJxSWdGQ0FEY0NBQ0FCUWdBM0FnZ2dBRUdVQW1wQ0FEY0NBQ0FBUVJScUVEQWdBRUcwQVdvaUFVR0FDQ2tCQURjQkFDQUJRWWdJS1FFQU53RUlJQUZCa0FncEFRQTNBUkFnQUVITUFXb2lBVUdnQ0NrQkFEY0JBQ0FCUWFnSUtRRUFOd0VJSUFGQnNBZ3BBUUEzQVJBZ0FFSGtBV29pQVVIQUNDa0JBRGNCQUNBQlFjZ0lLUUVBTndFSUlBRkIwQWdwQVFBM0FSQWdBRUg4QVdvaUFVSGdDQ2tCQURjQkFDQUJRZWdJS1FFQU53RUlJQUZCOEFncEFRQTNBUkFnQUVHY0FtcEJBRUhBQVJCZEdrRUFJUUVEUUNBQVFkd0RhaUFCUVFGMGFrR1F6Z0E3QVFBZ0FVRUJhaUlCUWVBQVJ3MEFDeUFBUWFnRmFpSUJRZ0EzQWdBZ0FVSUFOd0lJSUFGQ0FEY0NFQ0FCUVFBMkFoZ2dBRUdjQldwQndBdzdBUUFnQUVHZUJXcEJ3QXc3QVFBZ0FFR2dCV3BCd0F3N0FRQWdBRUdpQldwQndBdzdBUUFnQUVHa0JXcEJ3QXc3QVFBZ0FFR21CV3BCd0F3N0FRQWdBRUVBRUJrRVFFRi9Ed3NnQUVIY0JXcEJLallDQUVFQUMrZ0RBQUpBQWtBQ1FBSkFBa0FnQVE0RUFBRUNBd1FMSUFCQnhBVnFJZ0ZCb0NBb0FRQTJBUUFnQVVHa0lDNEJBRHNCQkNBQVFjb0ZhaUlCUWFZZ0tBRUFOZ0VBSUFGQnFpQXVBUUE3QVFRZ0FFSFFCV29pQVVHVUlDZ0JBRFlCQUNBQlFaZ2dMZ0VBT3dFRUlBQkIxZ1ZxSWdCQm1pQW9BUUEyQVFBZ0FFR2VJQzRCQURzQkJFRUFEd3NnQUVIRUJXb2lBVUdnSUNnQkFEWUJBQ0FCUWFRZ0xnRUFPd0VFSUFCQnlnVnFJZ0ZCcGlBb0FRQTJBUUFnQVVHcUlDNEJBRHNCQkNBQVFkQUZhaUlCUWF3Z0tBRUFOZ0VBSUFGQnNDQXVBUUE3QVFRZ0FFSFdCV29pQUVHeUlDZ0JBRFlCQUNBQVFiWWdMZ0VBT3dFRVFRQVBDeUFBUWNRRmFpSUJRY1FnS0FFQU5nRUFJQUZCeUNBdUFRQTdBUVFnQUVIS0JXb2lBVUhLSUNnQkFEWUJBQ0FCUWM0Z0xnRUFPd0VFSUFCQjBBVnFJZ0ZCdUNBb0FRQTJBUUFnQVVHOElDNEJBRHNCQkNBQVFkWUZhaUlBUWI0Z0tBRUFOZ0VBSUFCQndpQXVBUUE3QVFSQkFBOExJQUJCeEFWcUlnRkJ4Q0FvQVFBMkFRQWdBVUhJSUM0QkFEc0JCQ0FBUWNvRmFpSUJRY29nS0FFQU5nRUFJQUZCemlBdUFRQTdBUVFnQUVIUUJXb2lBVUhRSUNnQkFEWUJBQ0FCUWRRZ0xnRUFPd0VFSUFCQjFnVnFJZ0JCMWlBb0FRQTJBUUFnQUVIYUlDNEJBRHNCQkVFQUR3dEJmd3QyQVFaL0l3SWhBeU1DUWVBYWFpUUNJQU5CZ0JkcUlRVWdBeUlHUVFCQmdCY1FYUm9nQWtIZ0EyMGhCeUFDUWQ4RFNnUkFJQUJCRkdvaENFRUFJUVFEUUNBQklBUkIwQUJzUVFGMElBVnFJQWdnQmhBdklBUkJBV29pQkNBSFJ3MEFDd3NnQUNBRklBSkJCbTBRR3lFQUlBTWtBaUFBQ3pRQkFYOGpBaUVESXdKQkVHb2tBaUFBSUFBZ0F5QUFJQUVnQWlBREVDRWdBaEFjUVJCMFFSQjFJZ0EyQWdBZ0F5UUNJQUFMcXhBQkczOGpBaUVMSXdKQmdBRnFKQUlnQzBIZ0FHb2hEaUFMUVVCcklROGdDMEVnYWlJTVFnQTNBd0FnREVJQU53TUlJQXhDQURjREVDQUxJaEJDQURjREFDQUxRZ0EzQXdnZ0MwSUFOd01RQW44Q1FBSkFBa0FnQTBIUUFHc09VUUFDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBUUlMSUFCQnhBVnFJUVVnQUVIS0JXb2hCQ0FBUWRZRmFpRUhJQUJCMEFWcURBSUxJQUJCeGdWcUlRVWdBRUhNQldvaEJDQUFRZGdGYWlFSElBQkIwZ1ZxREFFTElBQkJ5QVZxSVFVZ0FFSE9CV29oQkNBQVFkb0ZhaUVISUFCQjFBVnFDeUVESUFjdUFRQWhDQ0FFTGdFQUlSY2dCUzRCQUNFWUlBSkJFSFJCRUhWQkNrb0VRQ0FETGdFQUlRMUJBQ0VDUVFBaEEwRUFJUVVEUUNBQ1FRRjBJQUZxSWdjdUFRQWdBRUcwQVdvZ0FrRUJkR291QVFBZ0FFSGtBV29nQWtFQmRHb3VBUUFnQWtFQmRDQU9haEFuSUFKQkFYUkJnQWxxTGdFQWJDRUtJQWN1QVFBZ0FFSE1BV29nQWtFQmRHb3VBUUFnQUVIOEFXb2dBa0VCZEdvdUFRQWdBa0VCZENBUGFoQW5JQUpCQVhSQm9BbHFMZ0VBYkNFSklBb2dCeTRCQUNBQVFiUUJhaUFDUVFacUlnUkJBWFJxTGdFQUlBQkI1QUZxSUFSQkFYUnFMZ0VBSUFSQkFYUWdEbW9RSnlBRVFRRjBRWUFKYWk0QkFHeHFJUVlnQ1NBSExnRUFJQUJCekFGcUlBUkJBWFJxTGdFQUlBQkIvQUZxSUFSQkFYUnFMZ0VBSUFSQkFYUWdEMm9RSnlBRVFRRjBRYUFKYWk0QkFHeHFJUWNnQmhBZFFSOGdCaHNnQnhBZFFSOGdCeHRyUVJCMElnUkJFSFVnQWtFQmRFSGNJR291QVFCc0lBTnFJUU5CQVNBRklBUkJEblVnRFVvYklRVWdCa0VNZGlJRVFSQjBRUUJLQkg4Z0FrRUJkQ0FNYWlBS1FRSjBRWUNBZjNFZ0JFSC8vd054RUM0aUJEc0JBRUdBZ0FFZ0JHdEIvLzhEY1NFR0lBSkJCbW9GUVlDQUFTRUdJQUlMUVFGMElBeHFJQVk3QVFBZ0IwRU1kaUlFUVJCMFFRQktCRUFnQWtFQmRDQVFhaUFKUVFKMFFZQ0FmM0VnQkVILy93TnhFQzRpQkRzQkFDQUNRUVpxUVFGMElCQnFRWUNBQVNBRWF6c0JBQXNnQWtFQmFpSUNRUVpIRFFBTElBVkIvLzhEY1NBRElBaE9jaUlOUVFCSElSSkJBQ0VHUVlEa0FDRUNBMEFnQUNBR1FRRjBJQUZxSWhNdUFRQWdCaEFwUVJCMFFSQjFRUVIwSUFCQnRBRnFJQVpCQVhScUloUkJBQ0FHUVFGMFFZQUphaUlWRUI1QkJuWnJRUkIwUVJCMVFZQ2FBV3hCRUhZaEdVSElBQ0FHYXlFYUlBSkIvLzhEY1VHQUJXb2lBa0gvL3dOeElSc2dBa0VRZEVFUWRTRWNRUUFoQ2dOQUlBQkJ0QUZxSUFZZ0NrRUdiR29pQ0VFQmRHb2lFUzRCQUNFQ0lBQkJ6QUZxSUFoQkFYUnFJaDB1QVFBaEZpQUFRZVFCYWlBSVFRRjBhaUlETGdFQUlRVWdBRUg4QVdvZ0NFRUJkR29pQnk0QkFDRUVJQkVnQ2lBYWFpSVJRUWQwSUFwQkIzUkJnQVZxSWg0Z0dTQVNCSDhnQWdVZ0FrSC8vd054SUFoQkFYUWdEbW91QVFBZ0NFRUJkQ0FNYWk0QkFFRUZkR3hCRUhWQmp3VnNRUloxYWtILy93TnhDMEgvL3dOeGFpSUpJQWxCRUhRZ0hrRVFkRWdiSWdrZ0NVRVFkQ0FSUVJkMFNoczdBUUFnRWdSQUlCMGdHeUFLUVFGMFFlZ2dhaTRCQUNJQ0lCWWdDRUVCZENBUGFpNEJBQ0lESUFoQkFYUWdFR291QVFBaUJVRUZkR3hCRUhWQm1qTnNRUlYxUVFGcVFRRjFhaUlKUWYvL0EzRWdDVUVRZEVFUWRTQUNTQnNpQWlBY0lBSkJFSFJCRUhWSUd6c0JBQ0FESUJNdkFRQWdGa0VFYWtFRGRXdEJFSFJCRUhWc1FRTjFRWUJnYWlBRlFRSjFiQ0lDUVFSMUlRVWdBa0VQU2dSL1FSZ2hDVUdBZ0lBRUlRZ2dCeUVESUFVZ0JFRUtiRUgvL3dOeEVDNGhCU0FFQlVFWUlRbEJnSUNBQkNFSUlBY2hBMEVBUVFBZ0JXc2dCRUVLYkVILy93TnhFQzVySVFVZ0JBc2hBZ1VnQ0VFQmRDQU9haTRCQUNBVEx3RUFJQUpCQTNWclFSQjBRUkIxYkVFRGRVR0FZR29nQ0VFQmRDQU1haTRCQUVFQ2FrRUNkV3dpQWtFT2RTRUVJQUpCLy84QVNnUi9RUlloQ1VHQWdJQUJJUWdnQkNBRklnSVFMZ1ZCRmlFSlFZQ0FnQUVoQ0VFQVFRQWdCR3NnQlNJQ0VDNXJDeUVGQ3lBRFFZQURJQUpCLy84RGNTQUlJQVZCRUhScUlBbDFhaUlDUWYvL0EzRWdBa0VRZEVHQWdJQU1TQnM3QVFBZ0NrRUJhaUlLUVFKSERRQUxJQlJCQUNBVkVCNGhBaUFBUWN3QmFpQUdRUUYwYWlJRFFRQWdCa0VCZEVHZ0NXb2lCQkFlSWdWQkNYWWdBa0VKZG10QkVIUkJFSFVpQnlBR1FRRjBRZXdnYWk0QkFDSUtTQVJBSUFNZ0NpQUhhMEVRZEVFUWRTSURRUTFzUVFKMlFmLy9BM0VnQkJBZUlRSWdGRUVBSUFOQmdJQURiRUVRZG10Qi8vOERjU0FWRUI0aEF3VWdBaUVESUFVaEFnc2dBa0VKZEVFUWRTSUZJQVpCQVhSQitDQnFMZ0VBSWdJaUJFb0VRQ0FBUWN3QmFpQUdRUUYwYWlJSElBUWdCV3NpQlNBSEx3RUFhanNCQUNBR1FRRjBJQUJxUWRnQmFpSUVJQVF2QVFBZ0JXbzdBUUFMSUFOQkNYUkJFSFVpQXlBR1FRRjBRWVFoYWk0QkFDSUZTZ1JBSUFCQnRBRnFJQVpCQVhScUlnUWdCU0FEYXlJRElBUXZBUUJxT3dFQUlBWkJBWFFnQUdwQndBRnFJZ1VnQlM4QkFDQURhanNCQUFzZ0JrRUJhaUlHUVFaSERRQUxJQUJCbEFKcUlnRWdBU2dDQUVFQmFqWUNBQ0FOUWYvL0EzRUVRQ0FBUVpvQ2FpSUJMZ0VBUVFGcVFSQjBRUkIxSVFJZ0FTQUNPd0VBSUFKQkJrb0VRQ0FCUVFZN0FRQWdBRUdZQW1vZ0Z6c0JBQ0FMSkFJZ0RROEZJQUJCbUFKcUlCZzdBUUFnQ3lRQ0lBMFBDd0FMQ3lBQVFaZ0NhaUlDTGdFQUlnRkJBRW9FZnlBQ0lBRkJmMm83QVFBZ0FVSC8vd054UVFKcVFmLy9BM0VGUVFBTElRRWdBRUdhQW1wQkFEc0JBQ0FMSkFJZ0FRdHVBUUYvSUFCRkJFQkJBQThMUVlDQWdJQjhRUUJCRUNBQUlBQkJIM1Z6SWdCQi8vOEJTeHNpQVVFSWNpQUJRWUNBZ0h3Z0FYWWdBSEZGR3lJQlFRUnlJQUZCZ0lDQVFDQUJkaUFBY1VVYklnRkJBbklnQVVHQWdJQ0FmaUFCZGlBQWNVVWJJZ0YySUFCeFJTQUJhZ3RVQVFGL0lBQWdBVUgvL3dOeElnRWdBQzhCQUdvaUF6c0JBQ0FDTGdFQUlBTkJFSFJCRUhWc0lRTWdBU0FBUVF4cUlnRXZBUUJxSVFBZ0FTQUFPd0VBSUFNZ0FrRU1haTRCQUNBQVFSQjBRUkIxYkdvTFJnRUJmeU1DSVFNakFrR2dDMm9rQWlBQklBTkI0QU5xSWdFZ0FFRU1haUFDRUNnZ0FTQURJQUJCQkdvZ0FrRUJkUkFvSUFBZ0F5QUNRUUoxRUJzaEFDQURKQUlnQUFzd0FRRi9Jd0loQXlNQ1FlQURhaVFDSUFFZ0F5QUFRUVJxSUFJUUtDQUFJQU1nQWtFQmRSQWJJUUFnQXlRQ0lBQUw1QUlCQjM4akFpRUlJd0pCOEFWcUpBSWdDRUh3QTJvaEJTQUlRWUFDYWlFSklBaEJnQUZxSVFZZ0NDSUhRZUFGYWlJRVFRQTdBUUFnQWtFQmRTRUtJQUpCZjB3RVFFSDZJVUdMSWtHS0FrRzBJaEFCQ3lBQ1FmRUJTQVJBSUFFZ0FpQUFRYWdGYWlBQVFiSUZhaUFGSUFrUUlpQUZJQW9nQUVHcUJXb2dBRUcwQldvZ0JpQUhFQ0lnQmlBQ1FRSjJJZ0ZCc0FFZ0JDQURRUXBxRUNNZ0J5QUJRYkFCSUFRZ0EwRUlhaEFqSUFrZ0NpQUFRYXdGYWlBQVFiWUZhaUFHSUFjUUlpQUdJQUZCc0FFZ0JDQURRUVpxRUNNZ0J5QUJJQUJCcmdWcUlBQkJ1QVZxSUFVZ0NSQWlJQVVnQWtFRGRpSUJRWkFDSUFRZ0EwRUVhaEFqSUFrZ0FTQUFRYkFGYWlBQVFib0ZhaUFHSUFjUUlpQUdJQUpCQkhZaUFVSHdBaUFFSUFOQkFtb1FJeUFISUFFZ0FFRzhCV29nQlJBa0lBVWdBVUh3QWlBRUlBTVFJeUFFTGdFQUlRQWdDQ1FDSUFBUEJVSFFJa0dMSWtHTEFrRzBJaEFCQzBFQUMzc0JBWDhnQUNBQlFRRjFJZ1pCN0tNQklBSWdCQkFtSUFCQkFtb2dCa0hES3lBRElBVVFKaUFCUVFGTUJFQVBDMEVBSVFBRFFDQUVRUUpxSVFFZ0JDQUVMZ0VBSWdNZ0JTOEJBR3M3QVFBZ0JVRUNhaUVDSUFVZ0F5QUZMd0VBYWpzQkFDQUFRUUZxSWdBZ0JrZ0VRQ0FCSVFRZ0FpRUZEQUVMQ3d1SUFnRUNmeU1DSVFZakFrRVFhaVFDSUFZaUJVRUFOZ0lBSUFCRkJFQkI0eUpCaXlKQnBBRkI4eUlRQVFzZ0FVRUFUQVJBUWY4aVFZc2lRYVVCUWZNaUVBRUxJQUFnQVNBRkVERWlBRVVFUUNBRUlBSTdBUUFnQmlRQ0R3dEJFU0FBRUNWcklRRWdCU0FGS0FJQUlBRnFJZ1UyQWdBZ0JDQUNRZi8vQTNGQkFDQUFRUUFnQVd0MElBQWdBWFlnQVVFQVNCc2lBVUVFZGtIL0IzRkJnUEFBY2tIVXdBRnNRUk4ySUFWQkVIUkJFSFZCMU1BQmJFRUpkbW9pQUNBQVFZQ0FBbkViYWpzQkFDQURMZ0VBSWdBaEFpQUFRUXRPQkVBZ0JpUUNEd3NnQlVGL1NnUkFJQU1nQWtFTGFqc0JBQ0FHSkFJRklBTWdBaUFCUVFBZ0JXdDJhanNCQUNBR0pBSUxDN29CQVFoL0lBRkJBRXdFUUE4TElBSkJBbW9oQlNBQ1FRUnFJUVlnQWtFR2FpRUhRUUFoQ0FOQUlBQXVBUUFoQkNBRkxnRUFJUWtnQlNBQ0xnRUFJZ283QVFBZ0FFRUNhaUVMSUFJZ0FDNEJBRHNCQUNBS1FiS1lmMndnQkNBSmFrSG5NMnhxSUFZdUFRQWlBRUhNUEd4cUlBY3VBUUJCakZSc2FpRUVJQWNnQURzQkFDQUdJQVJCRG5aQi8vOERjU0lBT3dFQUlBTkJBbW9oQkNBRElBQTdBUUFnQ0VFQmFpSUlJQUZIQkVBZ0N5RUFJQVFoQXd3QkN3c0xad0VCZnlBQVJRUkFRUUFQQ3lBQVFZQ0FnSUI0UVFCQkVDQUFRZi8vQTBzYklnRkJDSElnQVNBQVFZQ0FnSGdnQVhaeFJSc2lBVUVFY2lBQklBQkJnSUNBZ0g4Z0FYWnhSUnNpQVVFQ2NpQUJJQUJCZ0lDQWdId2dBWFp4UlJzaUFIWnhSU0FBYWd1TUFRRURmeUFETHdFQVFSQjBJUVVnQVVFQVRBUkFJQU1nQlVFUWRqc0JBQThMSUFKQkVIUkJFSFVoQmtFQUlRY2dCU0VDQTBBZ0JFRUNhaUVGSUFRZ0JpQUFMZ0VBYkNBQ2FpSUNRUkIyT3dFQUlBQXVBUUJCRG5RZ0JpQUNRUkIxYkd0QkFYUWhBaUFBUVFScUlRQWdCMEVCYWlJSElBRkhCRUFnQlNFRURBRUxDeUFESUFKQkVIWTdBUUFMb1FFQkFYOGdBa0VRZEVFUmRVR0FnQWhxSUFJUUxrRVFkQ0lFUVJCMUlRSWdBeUFBUWYvL0EzRkJBM1FnQVVILy93TnhhMEVRZEVFUWRTSUFJQVJCRW5VaUEwRU9kQ0FEYkVFUWRXeEJDbllpQVRzQkFDQUFJQUZCRUhSQkVIVnNJZ0JCZ05TdkJVNEVRRUVBRHdzZ0FrRUFJQUJCQjNSQkVIVkIwT0lGYkVHQWdIeHhheUlBUVJCMlFmOEhjVUdBQ0hJZ0FFR0FnSUJnYzBFYWRVRUJhblpzQzkwQkFRWi9JQUlvQWdBaEJDQUNRUVJxSWdZb0FnQWhCU0FEUVFGMUlRZ2dBMEVCVEFSQUlBSWdCRFlDQUNBR0lBVTJBZ0FQQzBFQUlRY2dCQ0VESUFVaEJBTkFJQUVnQTBFQmRpQUFMZ0VBUWZzb2JFRU9kbW9pQXpzQkFDQUFMZ0VBSUFOQkVIUkJFSFVpQ1VIN0tHeEJESFZySVFNZ0FVRUNhaUVGSUFFZ0JFRUJkaUFBUVFKcUlnRXVBUUJCOEFwc1FRNTFha0VRZEVFUWRTSUVJQWxxT3dFQUlBQkJCR29oQUNBQkxnRUFJQVJCOEFwc1FReDFheUVFSUFkQkFXb2lCeUFJU0FSQUlBVWhBUXdCQ3dzZ0FpQUROZ0lBSUFZZ0JEWUNBQXYrQmdFSGZ5QUFRWndDYWlBQ1FRUjBJZ1ZCQVhScUlRY2dBRUhjQTJvZ0JVRUJkR29oQXlBQ1FRWk9CRUJCanlOQnBpTkJ6QUJCeHlNUUFRc2dCMEVlYWlFSUlBTkJIbW9oQ1VFQUlRVURRQ0FGUVFGMElBZHFJZ1l1QVFBaUJFSGtBRVlFUUNBRklRWURRQ0FHUVFGMElBTnFJQVpCQVdvaUJFRUJkQ0FEYWk0QkFEc0JBQ0FHUVFGMElBZHFJQVJCQVhRZ0Iyb3VBUUE3QVFBZ0JFRVFSd1JBSUFRaEJnd0JDd3NnQ0VIbEFEc0JBQ0FKUVpET0FEc0JBQVVnQmlBRVFRRnFPd0VBQ3lBRlFRRnFJZ1ZCRUVjTkFBc0NRQUpBQWtBZ0EwRU9haTRCQUNBQlFSQjBRUkIxU2dSQUlBTkJCbW91QVFBZ0FVRVFkRUVRZFVvRVFDQURRUUpxTGdFQUlBRkJFSFJCRUhWS0JFQWdBeTRCQUNBQlFSQjBRUkIxVENFRURBTUZRUUpCQXlBRFFRUnFMZ0VBSUFGQkVIUkJFSFZLR3lFRURBTUxBQVVnQTBFS2FpNEJBQ0FCUVJCMFFSQjFTZ1JBUVFSQkJTQURRUWhxTGdFQUlBRkJFSFJCRUhWS0d5RUVEQU1GUVFaQkJ5QURRUXhxTGdFQUlBRkJFSFJCRUhWS0d5RUVEQU1MQUFzQUJTQURRUjVxTGdFQUlBRkJFSFJCRUhWS0JFQWdBMEVXYWk0QkFDQUJRUkIwUVJCMVNnUkFJQU5CRW1vdUFRQWdBVUVRZEVFUWRVb0VRRUVJUVFrZ0EwRVFhaTRCQUNBQlFSQjBRUkIxU2hzaEJBd0VCVUVLUVFzZ0EwRVVhaTRCQUNBQlFSQjBRUkIxU2hzaEJBd0VDd0FGSUFOQkdtb3VBUUFnQVVFUWRFRVFkVW9FUUVFTVFRMGdBMEVZYWk0QkFDQUJRUkIwUVJCMVNoc2hCQXdFQlNBRFFSeHFMZ0VBSUFGQkVIUkJFSFZLQkVCQkRpRUVEQVVGUVE4aEJBd0dDd0FMQUFzQUN3c01BZ3RCRHlFRkEwQWdCVUVCZENBRGFpQUZRWDlxSWdaQkFYUWdBMm91QVFBN0FRQWdCVUVCZENBSGFpQUdRUUYwSUFkcUxnRUFPd0VBSUFZZ0JFb0VRQ0FHSVFVTUFRc0xDeUFFUVFGMElBTnFJQUU3QVFBZ0JFRUJkQ0FIYWtFQk93RUFDeUFBUVpRQ2FpZ0NBQ0lCUVFKS0JFQWdBMEVFYWlFREJTQUJRUUJNQkVBZ0FFR2NCV29nQWtFQmRHb2lBaTRCQUVFQUlnRkJBV3BzSVFBZ0FpQUJRZi8vQVhOQndBeHNRWUNBQVdvZ0FHcEJEM1pCLy84RGNTSUFPd0VBSUFBUEN3dEJtVE5CdC8wQklBTXVBUUFpQlNBQVFad0ZhaUFDUVFGMGFpNEJBRWdiSVFFZ0FVSC8vd0Z6SUFWQkVIUkJFSFZzUVlDQUFXb2dBRUdjQldvZ0FrRUJkR29pQWk0QkFDQUJRUUZxYkdwQkQzWkIvLzhEY1NFQUlBSWdBRHNCQUNBQUN3UUFFQ3NMQ2dCQjlDdEJBUkJiR2dzRUFCQXRDL0lCQVF4L0l3SWhBQ01DUVRCcUpBSWdBRUVzYWlJQlFRQTJBZ0FnQUVFb2FpSUNRUUEyQWdBZ0FFRWthaUlEUVFBMkFnQWdBRUVnYWlJRVFRQTJBZ0FnQUVFY2FpSUZRUUEyQWdBZ0FFRVlhaUlHUVFBMkFnQWdBRUVVYWlJSFFRQTJBZ0FnQUVFUWFpSUlRUUEyQWdBZ0FFRU1haUlKUVFBMkFnQWdBRUVJYWlJS1FRQTJBZ0FnQUVFRWFpSUxRUUEyQWdBZ0FFRUFOZ0lBSUFCQkFUWUNBQ0FMUVFJMkFnQWdDa0VETmdJQUlBbEJCRFlDQUNBSVFRVTJBZ0FnQjBFQk5nSUFJQVpCQVRZQ0FDQUZRUUUyQWdBZ0JFRUNOZ0lBSUFOQkFUWUNBQ0FDUVFJMkFnQWdBVUVETmdJQUlBQWtBZ3NmQUNBQlFmLy9BM0ZGQkVCQi8vLy8vd2NQQ3lBQUlBRkJFSFJCRUhWdEM1OEJBUUovSUFCQjRBTWdBMEdBQ0dvaUFDQUNFRFFnQUVId0FTQURRVUJySUFKQklHb1FOU0FEUVNCcUlnUWdBa0hnQUdvaUFDa0NBRGNDQUNBRUlBQXBBZ2czQWdnZ0JDQUFLUUlRTndJUUlBUWdBQ2tDR0RjQ0dDQUFJQU5CNEFkcUlnVXBBZ0EzQWdBZ0FDQUZLUUlJTndJSUlBQWdCU2tDRURjQ0VDQUFJQVVwQWhnM0FoZ2dCQ0FEUWRBQUVESWdBMEdnQVNBQklBSkJnQUZxRURNTERBQWdBRUVBUWFBQkVGMGFDMWtCQTM4Z0FDQUJJQUVRT3lFRUlBRkJBRXdFUUNBQ0lBUTJBZ0JCQUE4TFFRQWhBMEVBSVFVRFFDQURJQUF1QVFBaUF5QURiQ0FFZG1vaEF5QUFRUUpxSVFBZ0JVRUJhaUlGSUFGSERRQUxJQUlnQkRZQ0FDQURDNDBDQVFoL0lBSkJBRXdFUUE4TFFRQWhBd05BSUFFZ0FDZ0NBRUdLQm14QmdJQUJhaUFBUVFScUlnVW9BZ0JCL205c2FpQUFRUWhxSWdZb0FnQkJ2d2hzYWlBQVFReHFJZ1FvQWdCQjliVUJiR29nQUVFUWFpSUhLQUlBUWVma0FHeHFJQUJCRkdvaUNDZ0NBRUc1WW14cUlBQkJHR29pQ1NnQ0FFRzVBMnhxSUFCQkhHb2lDaWdDQUVIZUFXeHFOZ0lBSUFGQkJHb2dCU2dDQUVIZUFXeEJnSUFCYWlBR0tBSUFRYmtEYkdvZ0JDZ0NBRUc1WW14cUlBY29BZ0JCNStRQWJHb2dDQ2dDQUVIMXRRRnNhaUFKS0FJQVFiOEliR29nQ2lnQ0FFSCtiMnhxSUFCQklHb29BZ0JCaWdac2FqWUNBQ0FCUVFocUlRRWdBMEVCYWlJRElBSkhCRUFnQkNFQURBRUxDd3ZGQkFFS2Z5QUJRUUYxSVFzZ0FVRUJUQVJBRHdzZ0EwRUVhaUVISUFOQkNHb2hDQ0FEUVF4cUlRbEJBQ0VHQTBBZ0F5Z0NBQ0FHUVFOMElBQnFJZ3dvQWdBaUJFR0FRR3NnQnlnQ0FDSUthMEVPZFVIcUYyeHFJUVVnQXlBRU5nSUFJQW9nQlNBSUtBSUFJZ3BySWdSQkRuVWdCRUVmZG1wQm1Na0FiR29oQkNBSElBVTJBZ0FnQ1NBS0lBUWdDU2dDQUdzaUJVRU9kU0FGUVI5MmFrSFg5UUJzYWlJRk5nSUFJQWdnQkRZQ0FDQU1JQVZCQVhVMkFnQWdCa0VCYWlJR0lBdElEUUFMSUFCQkJHb2hEQ0FCUVFGTUJFQVBDeUFEUVJScUlRWWdBMEVRYWlFSElBTkJHR29oQ0NBRFFSeHFJUWxCQUNFREEwQWdCeWdDQUNBRFFRTjBJQXhxSWdvb0FnQWlCRUdBUUdzZ0JpZ0NBQ0lOYTBFT2RVRzFCbXhxSVFVZ0J5QUVOZ0lBSUEwZ0JTQUlLQUlBSWcxcklnUkJEblVnQkVFZmRtcEIzaTlzYWlFRUlBWWdCVFlDQUNBSklBMGdCQ0FKS0FJQWF5SUZRUTUxSUFWQkgzWnFRZDdnQUd4cUlnVTJBZ0FnQ0NBRU5nSUFJQW9nQlVFQmRUWUNBQ0FEUVFGcUlnTWdDMGdOQUFzZ0FVRUJUQVJBRHd0QkFDRUJBMEFnQVVFQmRDSURRUUowSUFCcUtBSUFJQU5CQVhKQkFuUWdBR29vQWdCcUlRWWdBMEVDY2tFQ2RDQUFhaWdDQUNBRFFRTnlRUUowSUFCcUtBSUFhaUVESUFGQkFYUWdBbXBCLy84QklBWkJEM1VnQmtILy8vLy9BMG9iSWdaQmdJQitJQVpCZ0lCK1NoczdBUUFnQVVFQmNrRUJkQ0FDYWtILy93RWdBMEVQZFNBRFFmLy8vLzhEU2hzaUEwR0FnSDRnQTBHQWdINUtHenNCQUNBQlFRSnFJZ0VnQzBnTkFBc0xzQU1CQ1g4Z0FVRUJkU0VMSUFGQkFVd0VRQThMSUFOQkJHb2hEQ0FEUVFocUlRY2dBMEVNYWlFSVFRQWhCUU5BSUFNb0FnQWdCVUVDZENBQWFpNEJBRUVQZEVHQWdBRnlJZ1pCZ01BQUlBd29BZ0FpQkd0cVFRNTFRZW9YYkdvaENTQURJQVkyQWdBZ0JDQUpJQWNvQWdBaUJtc2lCRUVPZFNBRVFSOTJha0dZeVFCc2FpRUtJQXdnQ1RZQ0FDQUlJQVlnQ2lBSUtBSUFheUlFUVE1MUlBUkJIM1pxUWRmMUFHeHFJZ1EyQWdBZ0J5QUtOZ0lBSUFWQkFuUWdBbW9nQkVFQmRUWUNBQ0FGUVFGcUlnVWdDMGdOQUFzZ0FFRUNhaUVGSUFGQkFVd0VRQThMSUFOQkZHb2hCeUFEUVJCcUlRZ2dBMEVZYWlFSklBTkJIR29oQ2tFQUlRQURRQ0FJS0FJQUlBQkJBblFnQldvdUFRQkJEM1JCZ0lBQmNpSURRWURBQUNBSEtBSUFJZ0ZyYWtFT2RVRzFCbXhxSVFZZ0NDQUROZ0lBSUFFZ0JpQUpLQUlBSWdOcklnRkJEblVnQVVFZmRtcEIzaTlzYWlFRUlBY2dCallDQUNBS0lBTWdCQ0FLS0FJQWF5SUJRUTUxSUFGQkgzWnFRZDdnQUd4cUlnTTJBZ0FnQ1NBRU5nSUFJQUJCQW5RZ0Ftb2lBU0FCS0FJQUlBTkJBWFZxTmdJQUlBQkJBV29pQUNBTFNBMEFDd3ZhQmdFTWZ5QUJRUUYxSVF3Z0FFRUVhaUVQSUFOQk1Hb2hEU0FCUVFGTUJFQVBDeUFEUVFScUlRWWdBMEVJYWlFS0lBTkJER29oQ1VFQUlRY2dEU0VJQTBBZ0F5Z0NBQ0FJS0FJQUlnUkJnRUJySUFZb0FnQWlCV3RCRG5WQjZoZHNhaUVJSUFNZ0JEWUNBQ0FGSUFnZ0NpZ0NBQ0lGYXlJRVFRNTFJQVJCSDNacVFaakpBR3hxSVFRZ0JpQUlOZ0lBSUFrZ0JTQUVJQWtvQWdCcklnaEJEblVnQ0VFZmRtcEIxL1VBYkdvaUNEWUNBQ0FLSUFRMkFnQWdCMEVCZENJRVFRSjBJQUpxSUFoQkFYVTJBZ0FnQkVFQ2RDQVBhaUVJSUFkQkFXb2lCeUFNU0EwQUN5QUJRUUZNQkVBUEN5QURRUlJxSVFjZ0EwRVFhaUVHSUFOQkdHb2hDaUFEUVJ4cUlRbEJBQ0VJQTBBZ0JpZ0NBQ0FJUVFGMElnNUJBblFnQUdvb0FnQWlCVUdBUUdzZ0J5Z0NBQ0lMYTBFT2RVRzFCbXhxSVFRZ0JpQUZOZ0lBSUFzZ0JDQUtLQUlBSWd0cklnVkJEblVnQlVFZmRtcEIzaTlzYWlFRklBY2dCRFlDQUNBSklBc2dCU0FKS0FJQWF5SUVRUTUxSUFSQkgzWnFRZDdnQUd4cUlnUTJBZ0FnQ2lBRk5nSUFJQTVCQW5RZ0Ftb2lCU0FGS0FJQUlBUkJBWFZxUVE5MU5nSUFJQWhCQVdvaUNDQU1TQTBBQ3lBQ1FRUnFJUWdnQVVFQlRBUkFEd3NnQTBFa2FpRUhJQU5CSUdvaEJpQURRU2hxSVFvZ0EwRXNhaUVKUVFBaEFnTkFJQVlvQWdBZ0FrRUJkQ0lPUVFKMElBQnFLQUlBSWdWQmdFQnJJQWNvQWdBaUMydEJEblZCNmhkc2FpRUVJQVlnQlRZQ0FDQUxJQVFnQ2lnQ0FDSUxheUlGUVE1MUlBVkJIM1pxUVpqSkFHeHFJUVVnQnlBRU5nSUFJQWtnQ3lBRklBa29BZ0JySWdSQkRuVWdCRUVmZG1wQjEvVUFiR29pQkRZQ0FDQUtJQVUyQWdBZ0RrRUNkQ0FJYWlBRVFRRjFOZ0lBSUFKQkFXb2lBaUFNU0EwQUN5QUJRUUZNQkVBUEN5QURRVFJxSVFFZ0EwRTRhaUVDSUFOQlBHb2hBMEVBSVFBRFFDQU5LQUlBSUFCQkFYUWlDa0VDZENBUGFpZ0NBQ0lHUVlCQWF5QUJLQUlBSWdsclFRNTFRYlVHYkdvaEJ5QU5JQVkyQWdBZ0NTQUhJQUlvQWdBaUNXc2lCa0VPZFNBR1FSOTJha0hlTDJ4cUlRWWdBU0FITmdJQUlBTWdDU0FHSUFNb0FnQnJJZ2RCRG5VZ0IwRWZkbXBCM3VBQWJHb2lCellDQUNBQ0lBWTJBZ0FnQ2tFQ2RDQUlhaUlHSUFZb0FnQWdCMEVCZFdwQkQzVTJBZ0FnQUVFQmFpSUFJQXhJRFFBTEM0SUJBUUovUVFFZ0JIUkJBWFVoQnlBRlJTQUFSU0FDUlhKeUlBWkJBVWh5SUFSQkFFaHlCRUJCZnc4TElBRkJFSFJCRUhVaENDQURRUkIwUVJCMUlRTkJBQ0VCQTM4Z0FVRUJkQ0FGYWlBQlFRRjBJQUJxTGdFQUlBaHNJQWRxSUFGQkFYUWdBbW91QVFBZ0EyeHFJQVIxT3dFQUlBRkJBV29pQVNBR1J3MEFRUUFMQ3lnQkFYOGdBRUVLU3dSQVFRQWhBUVZCQkJCWklnRUVRQ0FCSUFBMkFnQUZRUUFoQVFzTElBRUxEUUFnQUVVRVFBOExJQUFRV2d1VUFRRUdmeU1DSVFZakFrR0FJR29rQWlBR0lRTkJBU0FBS0FJQUlnZDBJUWdnQjBFZlJ3UkFRUUFoQlVFQUlRUURRQ0FFUVFGMElBTnFJQVZCQVhRZ0FXb3VBUUE3QVFBZ0JFRUJja0VCZENBRGFrRUFPd0VBSUFSQkFtb2hCQ0FGUVFGcUlnVWdDRWdOQUFzTElBTWdCeEJDSUFNZ0FDZ0NBRUVCRUQ4aEFDQUNJQU1nQ0VFQmRFRUVhaEJjR2lBR0pBSWdBQXZmQVFFSGZ5TUNJUVVqQWtHQUlHb2tBaUFGSWdRZ0FVRUJJQUFvQWdBaUJuUWlCMEVDYWlJRFFRRjBFRndhSUFkQkFYUWlDQ0FEU2dSQUEwQWdBMEVCZENBRWFpQUlJQU5ySWdsQkFYUWdBV291QVFBN0FRQWdBMEVCYWtFQmRDQUVha0VBSUFsQkFXcEJBWFFnQVdvdkFRQnJPd0VBSUFnZ0EwRUNhaUlEU2cwQUN3c2dCQ0FHRUVJZ0JDQUFLQUlBUVFFUVFDRURJQVpCSDBZRVFDQUZKQUlnQXc4TFFRQWhBRUVBSVFFRFFDQUFRUUYwSUFKcUlBRkJBWFFnQkdvdUFRQTdBUUFnQVVFQ2FpRUJJQUJCQVdvaUFDQUhTQTBBQ3lBRkpBSWdBd3VRQVFFQ2YwRUFJQUlRUEVFUWRFRVFkU0lESUFGQkFFb0VmMEYvSVFJRFFDQUFRUUpxSVFRZ0FDNEJBQ0lBUVFBZ0FHc2dBRUVBU2h0QkVIUkJFSFVpQUNBQ0lBQWdBa29iSVFJZ0FVRi9haUVBSUFGQkFVb0VRQ0FBSVFFZ0JDRUFEQUVMQ3lBQ1FmLy9BM0VGUVg4TElnQkJFSFJCRUhVaUFTQUJiQkFkSWdGcklBQkIvLzhEY1VVZ0FTQURTbkliQzJjQkFYOGdBRUVCSUFCQkFrRVFRUUFnQUVILy93TkxHeUlCSUFGQkNISWdBRUdBL2dNZ0FYUnhSUnNpQVNBQlFRUnlJQUJCOEFFZ0FYUnhSUnNpQVNBQlFRSnlJQUJCRENBQmRIRkZHeUlBZEhGQkFFY2dBR29pQUhSeFFRQkhJQUJxUWYvL0EzRUxsd0VCQW44Z0EwRUFTaUFGUVFCS2NTQUhJQVlnQTBGL2Ftd2lDR29pQ1NBQlNIRkZCRUJCZnc4TElBaEJBRWdFUUVFQUR3c0RmMEVBSVFGQmdCQWhBd05BSUFGQkFYUWdCR291QVFBZ0J5QUJhMEVCZENBQWFpNEJBR3dnQTJvaEF5QUJRUUZxSWdFZ0JVY05BQXNnQWtFQ2FpRUJJQUlnQTBFTWRSQStPd0VBSUFZZ0Iyb2lCeUFKU2dSL1FRQUZJQUVoQWd3QkN3c0xKQUFnQUVILy93RktCSDlCLy84QkJTQUFRWUNBZmlBQVFZQ0Fma29iUWYvL0EzRUxDNllGQVE5L1FRRWdBWFFpQmtHQUNFb0VRRUYvRHdzZ0JrRUJTaUVCSUFJRWZ5QUJSUVJBUVFBUEMwRUpJUWRCQVNFREEzOGdBMEVCZENFSUlBTkJBRW9FUUVFQUlRRURRQ0FCSUFkMElRSWdBU0FHU0FSQUlBSkJBWFJCd0ExcUxnRUFJUXBCQUNBQ1FRRjBRY0FKYWk4QkFFRVFkR3RCRUhVaEN5QUJJUUlEUUNBS0lBSWdBMnBCQVhRaUJFRUJkQ0FBYWlJSkxnRUFJZzFzUVFGcUlBUkJBWEpCQVhRZ0FHb2lEaTRCQUNJUElBdHNhMEVCZFNFRUlBSkJBWFFpQlVFQmRDQUFhaUlRTGdFQVFRNTBJUXdnQlVFQmNrRUJkQ0FBYWlJUkxnRUFRUTUwSVFVZ0NTQU1RWUNBQVdvZ0JHdEJEM1k3QVFBZ0RpQUZRWUNBQVNBTElBMXNRUUZxSUFvZ0QyeHFRUUYxSWdscmFrRVBkanNCQUNBUUlBeEJnSUFCYWlBRWFrRVBkanNCQUNBUklBbEJnSUFCYWlBRmFrRVBkanNCQUNBQ0lBaHFJZ0lnQmtnTkFBc0xJQU1nQVVFQmFpSUJSdzBBQ3dzZ0IwRi9haUVISUFnZ0JrZ0VmeUFJSVFNTUFRVkJBQXNMQlNBQlJRUkFRUUFQQzBFSklRZEJBU0VEQTM4Z0EwRUJkQ0VJSUFOQkFFb0VRRUVBSVFFRFFDQUJJQWQwSVFJZ0FTQUdTQVJBSUFKQkFYUkJ3QTFxTGdFQUlRcEJBQ0FDUVFGMFFjQUphaThCQUVFUWRHdEJFSFVoQ3lBQklRSURRQ0FLSUFJZ0EycEJBWFFpQkVFQmRDQUFhaUlKTGdFQUlnMXNJQXNnQkVFQmNrRUJkQ0FBYWlJT0xnRUFJZzlzYTBFUGRTRUVJQUpCQVhRaUJVRUJkQ0FBYWlJUUxnRUFJUXdnQlVFQmNrRUJkQ0FBYWlJUkxnRUFJUVVnQ1NBTUlBUnJRUUYyT3dFQUlBNGdCU0FLSUE5c0lBc2dEV3hxUVE5MUlnbHJRUUYyT3dFQUlCQWdCQ0FNYWtFQmRqc0JBQ0FSSUFVZ0NXcEJBWFk3QVFBZ0FpQUlhaUlDSUFaSURRQUxDeUFESUFGQkFXb2lBVWNOQUFzTElBZEJmMm9oQnlBSUlBWklCSDhnQ0NFRERBRUZRUUFMQ3dzTHRRVUJGSDlCQVNBQmRDSUZRWUFJU2dSQVFYOFBDeUFGUVFGTUJFQkJBQThMSUFWQkFYUWhGQ0FDUlNFVlFRa2hEVUVCSVFaQkFDRVBBMEFnQUNBVUVFTWlBa0VRZEVFUWRVR0Y2Z0JLSVFFZ0FrRVFkRUVRZFVHSzFBRktJZ0lnQVNBUGFtb2hEMEVDUVFFZ0FSc2dBU0FDR3lFRFFZQ0FBVUdBd0FBZ0FSc2dBblFoQnlBR1FRRjBJUTRnQmtFQVNpRUJJQlVFUUNBQkJFQkJBQ0VCQTBBZ0FTQU5kQ0VDSUFFZ0JVZ0VRQ0FDUVFGMFFjQU5haTRCQUNFSElBSkJBWFJCd0FscUxnRUFJUXNnQVNFQ0EwQWdCeUFDSUFacVFRRjBJZ2hCQVhRZ0FHb2lCQzRCQUNJTWJDQUxJQWhCQVhKQkFYUWdBR29pRUM0QkFDSVJiR3RCRDNVaENDQUNRUUYwSWdsQkFYUWdBR29pRWk0QkFDRUtJQWxCQVhKQkFYUWdBR29pRXk0QkFDRUpJQVFnQ2lBSWF5QURkVHNCQUNBUUlBa2dCeUFSYkNBTElBeHNha0VQZFNJRWF5QURkVHNCQUNBU0lBZ2dDbW9nQTNVN0FRQWdFeUFFSUFscUlBTjFPd0VBSUFJZ0Rtb2lBaUFGU0EwQUN3c2dCaUFCUVFGcUlnRkhEUUFMQ3dVZ0FRUkFJQU5CRG1vaEEwRUFJUUVEUUNBQklBMTBJUUlnQVNBRlNBUkFJQUpCQVhSQndBMXFMZ0VBSVFzZ0FrRUJkRUhBQ1dvdUFRQWhDQ0FCSVFJRFFDQUxJQUlnQm1wQkFYUWlDa0VCZENBQWFpSU1MZ0VBSWhCc1FRRnFJQWdnQ2tFQmNrRUJkQ0FBYWlJUkxnRUFJaEpzYTBFQmRTRUtJQUpCQVhRaUJFRUJkQ0FBYWlJVExnRUFRUTUwSVFrZ0JFRUJja0VCZENBQWFpSVdMZ0VBUVE1MElRUWdEQ0FISUFscUlBcHJJQU4xT3dFQUlCRWdCQ0FISUFnZ0VHeEJBV29nQ3lBU2JHcEJBWFVpREd0cUlBTjFPd0VBSUJNZ0J5QUphaUFLYWlBRGRUc0JBQ0FXSUFjZ0RHb2dCR29nQTNVN0FRQWdBaUFPYWlJQ0lBVklEUUFMQ3lBR0lBRkJBV29pQVVjTkFBc0xDeUFOUVg5cUlRMGdEaUFGU0FSQUlBNGhCZ3dCQ3dzZ0R3dTRBUUVGZnlBRVFSQjBRUkIxSVFjZ0JFRVFkRUVRZFVFQVRBUkFEd3NnQTBFUWRFRVFkU0VJSUFOQkVIUkJFSFZCQUVvaENTQUdRUkIwUVJCMUlRWWdCVUVRZEVFUWRTRUtRUUFoQkFOQUlBQkJBRFlDQUNBSkJFQWdCQ0FHYkNFTElBQW9BZ0FoQlVFQUlRTURRQ0FGSUFNZ0MycEJBWFFnQW1vdUFRQWdBMEVCZENBQmFpNEJBR3dnQ25WcUlRVWdBMEVCYWlJRElBaEhEUUFMSUFBZ0JUWUNBQXNnQUVFRWFpRUFJQVJCQVdvaUJDQUhSdzBBQ3d1QUFnRUdmeUFCUVhscVFRSkpCRUJCd0JsQm9CMGdBVUVJUmlJQkd5RUNRZkFCUWZBQUlBRWJJUVJCQUNFQkEwQWdBVUVCZENBQ2FpNEJBRUVDZENBQWFpSURLQUlBSVFVZ0F5QUJRUUZ5UVFGMElBSnFMZ0VBUVFKMElBQnFJZ01vQWdBMkFnQWdBeUFGTmdJQUlBRkJBbW9pQVNBRVNRMEFDdzhMUVFFZ0FYUWlBMEYvYWlFR0lBTkJBVXdFUUE4TFFRRWhBa0VBSVFRRFFDQUdJQVJySVFVZ0F5RUJBMEFnQVVFQmRTSUJJQVZLRFFBTElBSkJBblFnQUdvaEJTQUVJQUZCZjJweElBRnFJZ1JCQW5RZ0FHb2hBU0FFSUFKS0JFQWdCU2dDQUNFSElBVWdBU2dDQURZQ0FDQUJJQWMyQWdBTElBTWdBa0VCYWlJQ1J3MEFDd3RoQVFOL0lBQkZJQUZCQVVoeUJFQkJmdzhMUVFBaEJFRUFJUUlEUUNBRVFRRjBJQUJxTGdFQUlnTkJBQ0FEYXlBRFFYOUtHeUlESUFJZ0F5QUNTaHNoQWlBRVFRRnFJZ1FnQVVjTkFBc2dBa0gvL3dFZ0FrSC8vd0ZJRzBILy93TnhDMkFCQTM4Z0FFVWdBVUVCU0hJRVFFRi9Ed3RCQUNFRVFRQWhBZ05BSUFSQkFuUWdBR29vQWdBaUEwRUFJQU5ySUFOQmYwb2JJZ01nQWlBRElBSkxHeUVDSUFSQkFXb2lCQ0FCUncwQUN5QUNRZi8vLy84SElBSkIvLy8vL3dkSkd3dFFBUU4vSUFCQkFFY2dBVUVBU25GRkJFQkJnSUIrRHd0QkFDRURRWUNBZmlFQ0EwQWdBMEVCZENBQWFpNEJBQ0lFSUFJZ0JDQUNRUkIwUVJCMVNoc2hBaUFEUVFGcUlnTWdBVWNOQUFzZ0FndE9BUU4vSUFCQkFFY2dBVUVBU25GRkJFQkJnSUNBZ0hnUEMwRUFJUU5CZ0lDQWdIZ2hBZ05BSUFOQkFuUWdBR29vQWdBaUJDQUNJQVFnQWtvYklRSWdBMEVCYWlJRElBRkhEUUFMSUFJTFVBRURmeUFBUVFCSElBRkJBRXB4UlFSQVFmLy9BUThMUVFBaEEwSC8vd0VoQWdOQUlBTkJBWFFnQUdvdUFRQWlCQ0FDSUFRZ0FrRVFkRUVRZFVnYklRSWdBMEVCYWlJRElBRkhEUUFMSUFJTFRnRURmeUFBUVFCSElBRkJBRXB4UlFSQVFmLy8vLzhIRHd0QkFDRURRZi8vLy84SElRSURRQ0FEUVFKMElBQnFLQUlBSWdRZ0FpQUVJQUpJR3lFQ0lBTkJBV29pQXlBQlJ3MEFDeUFDQ3k0QkFYOGpBaUVCSXdKQkVHb2tBaUFCSUFCQlBHb29BZ0FRVGpZQ0FFRUdJQUVRQmhCTUlRQWdBU1FDSUFBTG1BTUJDMzhqQWlFSEl3SkJNR29rQWlBSFFTQnFJUVVnQnlJRElBQkJIR29pQ2lnQ0FDSUVOZ0lBSUFOQkJHb2dBRUVVYWlJTEtBSUFJQVJySWdRMkFnQWdBMEVJYWlBQk5nSUFJQU5CREdvZ0FqWUNBQ0FEUVJCcUlnRWdBRUU4YWlJTUtBSUFOZ0lBSUFGQkJHb2dBellDQUNBQlFRaHFRUUkyQWdBQ1FBSkFJQUlnQkdvaUJFR1NBU0FCRUFRUVRDSUJSZzBBUVFJaENBTkFJQUZCQUU0RVFDQURRUWhxSUFNZ0FTQURRUVJxS0FJQUlnbExJZ1liSWdNZ0FTQUpRUUFnQmh0cklna2dBeWdDQUdvMkFnQWdBMEVFYWlJTklBMG9BZ0FnQ1dzMkFnQWdCU0FNS0FJQU5nSUFJQVZCQkdvZ0F6WUNBQ0FGUVFocUlBWkJIM1JCSDNVZ0NHb2lDRFlDQUVHU0FTQUZFQVFRVENJR0lBUWdBV3NpQkVZTkFpQUdJUUVNQVFzTElBQkJFR3BCQURZQ0FDQUtRUUEyQWdBZ0MwRUFOZ0lBSUFBZ0FDZ0NBRUVnY2pZQ0FDQUlRUUpHQkg5QkFBVWdBaUFEUVFScUtBSUFhd3NoQWd3QkN5QUFRUkJxSUFCQkxHb29BZ0FpQVNBQVFUQnFLQUlBYWpZQ0FDQUtJQUUyQWdBZ0N5QUJOZ0lBQ3lBSEpBSWdBZ3QwQVFKL0l3SWhCQ01DUVNCcUpBSWdCRUVJYWlJRElBQkJQR29vQWdBMkFnQWdBMEVFYWlBQlFpQ0lQZ0lBSUFOQkNHb2dBVDRDQUNBRFFReHFJQVFpQURZQ0FDQURRUkJxSUFJMkFnQkJqQUVnQXhBREVFeEJBRWdFZmlBQVFuODNBd0JDZndVZ0FDa0RBQXNoQVNBRUpBSWdBUXNiQUNBQVFZQmdTd1JBRUUxQkFDQUFhellDQUVGL0lRQUxJQUFMQlFCQitDc0xCQUFnQUF0MkFRTi9Jd0loQkNNQ1FTQnFKQUlnQkNJRFFSQnFJUVVnQUVFa2FrRUVOZ0lBSUFBb0FnQkJ3QUJ4UlFSQUlBTWdBRUU4YWlnQ0FEWUNBQ0FEUVFScVFaT29BVFlDQUNBRFFRaHFJQVUyQWdCQk5pQURFQVVFUUNBQVFjc0Fha0YvT2dBQUN3c2dBQ0FCSUFJUVNpRUFJQVFrQWlBQUN3UUFRUUVMQXdBQkM0VUNBUVIvQWtBQ1FDQUNRUkJxSWdRb0FnQWlBdzBBSUFJUVV3Ui9RUUFGSUFRb0FnQWhBd3dCQ3lFQ0RBRUxJQUpCRkdvaUJpZ0NBQ0lGSVFRZ0F5QUZheUFCU1FSQUlBSkJKR29vQWdBaEF5QUNJQUFnQVNBRFFRZHhRUXhxRVFBQUlRSU1BUXNnQVVVZ0FrSExBR29zQUFCQkFFaHlCSDlCQUFVQ2Z5QUJJUU1EUUNBQUlBTkJmMm9pQldvc0FBQkJDa2NFUUNBRkJFQWdCU0VEREFJRlFRQU1Bd3NBQ3dzZ0FrRWthaWdDQUNFRUlBSWdBQ0FESUFSQkIzRkJER29SQUFBaUFpQURTUTBDSUFZb0FnQWhCQ0FCSUFOcklRRWdBQ0FEYWlFQUlBTUxDeUVDSUFRZ0FDQUJFRndhSUFZZ0JpZ0NBQ0FCYWpZQ0FDQUJJQUpxSVFJTElBSUxmZ0VDZnlBQVFjb0FhaUlDTEFBQUlRRWdBaUFCSUFGQi93RnFjam9BQUNBQUtBSUFJZ0ZCQ0hFRWZ5QUFJQUZCSUhJMkFnQkJmd1VnQUVFSWFrRUFOZ0lBSUFCQkJHcEJBRFlDQUNBQVFSeHFJQUJCTEdvb0FnQWlBVFlDQUNBQVFSUnFJQUUyQWdBZ0FFRVFhaUFCSUFCQk1Hb29BZ0JxTmdJQVFRQUxDNDRCQVFOL0FrQUNRQ0FBSWdKQkEzRkZEUUFnQWlFQkEwQUNRQ0FBTEFBQVJRUkFJQUVoQUF3QkN5QUFRUUZxSWdBaUFVRURjUTBCREFJTEN3d0JDd05BSUFCQkJHb2hBU0FBS0FJQUlnTkJnSUdDaEhoeFFZQ0Jnb1I0Y3lBRFFmLzkrM2RxY1VVRVFDQUJJUUFNQVFzTElBTkIvd0Z4QkVBRFFDQUFRUUZxSWdBc0FBQU5BQXNMQ3lBQUlBSnJDeHNCQVg4Z0FCQlVJZ0lnQUVFQklBSWdBUkJXUjBFZmRFRWZkUXRhQVFKL0lBRWdBbXdoQkNBQ1FRQWdBUnNoQWlBRFFjd0FhaWdDQUVGL1NnUkFJQU1RVUVVaEJTQUFJQVFnQXhCU0lRQWdCVVVFUUNBREVGRUxCU0FBSUFRZ0F4QlNJUUFMSUFBZ0JFY0VRQ0FBSUFGdUlRSUxJQUlMdEFFQkJuOGpBaUVESXdKQkVHb2tBaUFESWdRZ0FVSC9BWEVpQnpvQUFBSkFBa0FnQUVFUWFpSUNLQUlBSWdVTkFDQUFFRk1FZjBGL0JTQUNLQUlBSVFVTUFRc2hBUXdCQ3lBQVFSUnFJZ0lvQWdBaUJpQUZTUVJBSUFGQi93RnhJZ0VnQUVITEFHb3NBQUJIQkVBZ0FpQUdRUUZxTmdJQUlBWWdCem9BQUF3Q0N3c2dBRUVrYWlnQ0FDRUJJQUFnQkVFQklBRkJCM0ZCREdvUkFBQkJBVVlFZnlBRUxRQUFCVUYvQ3lFQkN5QURKQUlnQVF1R0FRRURmMEdRSUNnQ0FDSUJRY3dBYWlnQ0FFRi9TZ1IvSUFFUVVBVkJBQXNoQWlBQUlBRVFWVUVBU0FSL1FYOEZBbjhnQVVITEFHb3NBQUJCQ2tjRVFDQUJRUlJxSWdNb0FnQWlBQ0FCUVJCcUtBSUFTUVJBSUFNZ0FFRUJhallDQUNBQVFRbzZBQUJCQUF3Q0N3c2dBVUVLRUZkQkgzVUxDeUVBSUFJRVFDQUJFRkVMSUFBTDRUZ0JESDhqQWlFS0l3SkJFR29rQWlBS0lRa2dBRUgxQVVrRWYwSDhLeWdDQUNJRFFSQWdBRUVMYWtGNGNTQUFRUXRKR3lJQ1FRTjJJZ0IySWdGQkEzRUVRQ0FCUVFGeFFRRnpJQUJxSWdCQkEzUkJwQ3hxSWdGQkNHb2lCaWdDQUNJQ1FRaHFJZ1VvQWdBaUJDQUJSZ1JBUWZ3cklBTkJBU0FBZEVGL2MzRTJBZ0FGSUFSQkRHb2dBVFlDQUNBR0lBUTJBZ0FMSUFKQkJHb2dBRUVEZENJQVFRTnlOZ0lBSUFBZ0FtcEJCR29pQUNBQUtBSUFRUUZ5TmdJQUlBb2tBaUFGRHdzZ0FrR0VMQ2dDQUNJSFN3Ui9JQUVFUUVFQ0lBQjBJZ1JCQUNBRWEzSWdBU0FBZEhFaUFFRUFJQUJyY1VGL2FpSUFRUXgyUVJCeElnRWdBQ0FCZGlJQVFRVjJRUWh4SWdGeUlBQWdBWFlpQUVFQ2RrRUVjU0lCY2lBQUlBRjJJZ0JCQVhaQkFuRWlBWElnQUNBQmRpSUFRUUYyUVFGeElnRnlJQUFnQVhacUlnUkJBM1JCcEN4cUlnQkJDR29pQlNnQ0FDSUJRUWhxSWdnb0FnQWlCaUFBUmdSQVFmd3JJQU5CQVNBRWRFRi9jM0VpQURZQ0FBVWdCa0VNYWlBQU5nSUFJQVVnQmpZQ0FDQURJUUFMSUFGQkJHb2dBa0VEY2pZQ0FDQUJJQUpxSWdaQkJHb2dCRUVEZENJRUlBSnJJZ05CQVhJMkFnQWdBU0FFYWlBRE5nSUFJQWNFUUVHUUxDZ0NBQ0VDSUFkQkEzWWlCRUVEZEVHa0xHb2hBU0FBUVFFZ0JIUWlCSEVFZnlBQlFRaHFJZ0FoQkNBQUtBSUFCVUg4S3lBQUlBUnlOZ0lBSUFGQkNHb2hCQ0FCQ3lFQUlBUWdBallDQUNBQVFReHFJQUkyQWdBZ0FrRUlhaUFBTmdJQUlBSkJER29nQVRZQ0FBdEJoQ3dnQXpZQ0FFR1FMQ0FHTmdJQUlBb2tBaUFJRHd0QmdDd29BZ0FpQ3dSL0lBdEJBQ0FMYTNGQmYyb2lBRUVNZGtFUWNTSUJJQUFnQVhZaUFFRUZka0VJY1NJQmNpQUFJQUYySWdCQkFuWkJCSEVpQVhJZ0FDQUJkaUlBUVFGMlFRSnhJZ0Z5SUFBZ0FYWWlBRUVCZGtFQmNTSUJjaUFBSUFGMmFrRUNkRUdzTG1vb0FnQWlBRUVFYWlnQ0FFRjRjU0FDYXlFSUlBQWhCUU5BQWtBZ0FFRVFhaWdDQUNJQkJFQWdBU0VBQlNBQVFSUnFLQUlBSWdCRkRRRUxJQUJCQkdvb0FnQkJlSEVnQW1zaUJDQUlTU0VCSUFRZ0NDQUJHeUVJSUFBZ0JTQUJHeUVGREFFTEN5QUNJQVZxSWd3Z0JVc0VmeUFGUVJocUtBSUFJUWtnQlVFTWFpZ0NBQ0lBSUFWR0JFQUNRQ0FGUVJScUlnRW9BZ0FpQUVVRVFDQUZRUkJxSWdFb0FnQWlBRVVFUUVFQUlRQU1BZ3NMQTBBQ1FDQUFRUlJxSWdRb0FnQWlCZ1IvSUFRaEFTQUdCU0FBUVJCcUlnUW9BZ0FpQmtVTkFTQUVJUUVnQmdzaEFBd0JDd3NnQVVFQU5nSUFDd1VnQlVFSWFpZ0NBQ0lCUVF4cUlBQTJBZ0FnQUVFSWFpQUJOZ0lBQ3lBSkJFQUNRQ0FGUVJ4cUtBSUFJZ0ZCQW5SQnJDNXFJZ1FvQWdBZ0JVWUVRQ0FFSUFBMkFnQWdBRVVFUUVHQUxDQUxRUUVnQVhSQmYzTnhOZ0lBREFJTEJTQUpRUkJxSWdFZ0NVRVVhaUFCS0FJQUlBVkdHeUFBTmdJQUlBQkZEUUVMSUFCQkdHb2dDVFlDQUNBRlFSQnFLQUlBSWdFRVFDQUFRUkJxSUFFMkFnQWdBVUVZYWlBQU5nSUFDeUFGUVJScUtBSUFJZ0VFUUNBQVFSUnFJQUUyQWdBZ0FVRVlhaUFBTmdJQUN3c0xJQWhCRUVrRVFDQUZRUVJxSUFJZ0NHb2lBRUVEY2pZQ0FDQUFJQVZxUVFScUlnQWdBQ2dDQUVFQmNqWUNBQVVnQlVFRWFpQUNRUU55TmdJQUlBeEJCR29nQ0VFQmNqWUNBQ0FJSUF4cUlBZzJBZ0FnQndSQVFaQXNLQUlBSVFJZ0IwRURkaUlCUVFOMFFhUXNhaUVBSUFOQkFTQUJkQ0lCY1FSL0lBQkJDR29pQVNFRElBRW9BZ0FGUWZ3cklBRWdBM0kyQWdBZ0FFRUlhaUVESUFBTElRRWdBeUFDTmdJQUlBRkJER29nQWpZQ0FDQUNRUWhxSUFFMkFnQWdBa0VNYWlBQU5nSUFDMEdFTENBSU5nSUFRWkFzSUF3MkFnQUxJQW9rQWlBRlFRaHFEd1VnQWdzRklBSUxCU0FDQ3dVZ0FFRy9mMHNFZjBGL0JRSi9JQUJCQzJvaUFFRjRjU0VCUVlBc0tBSUFJZ1FFZjBFQUlBRnJJUUlDZndKQUlBQkJDSFlpQUFSL0lBRkIvLy8vQjBzRWYwRWZCU0FBSUFCQmdQNC9ha0VRZGtFSWNTSUdkQ0lEUVlEZ0gycEJFSFpCQkhFaEFDQURJQUIwSWdWQmdJQVBha0VRZGtFQ2NTRURJQUZCRGlBQUlBWnlJQU55YXlBRklBTjBRUTkyYWlJQVFRZHFka0VCY1NBQVFRRjBjZ3NGUVFBTElnZEJBblJCckM1cUtBSUFJZ0FFUUVFQUlRVWdBVUVBUVJrZ0IwRUJkbXNnQjBFZlJodDBJUVpCQUNFREEwQWdBRUVFYWlnQ0FFRjRjU0FCYXlJSUlBSkpCRUFnQ0FSL0lBQWhBeUFJQlVFQUlRTWdBQ0VDREFRTElRSUxJQVVnQUVFVWFpZ0NBQ0lGSUFWRklBVWdBRUVRYWlBR1FSOTJRUUowYWlnQ0FDSUlSbkliSVFBZ0JrRUJkQ0VHSUFnRVFDQUFJUVVnQ0NFQURBRUxDd1ZCQUNFQVFRQWhBd3NnQUNBRGNnUi9JQUFoQmlBREJTQUJJQVJCQWlBSGRDSUFRUUFnQUd0eWNTSUFSUTBFR2lBQVFRQWdBR3R4UVg5cUlnQkJESFpCRUhFaUF5QUFJQU4ySWdCQkJYWkJDSEVpQTNJZ0FDQURkaUlBUVFKMlFRUnhJZ055SUFBZ0EzWWlBRUVCZGtFQ2NTSURjaUFBSUFOMklnQkJBWFpCQVhFaUEzSWdBQ0FEZG1wQkFuUkJyQzVxS0FJQUlRWkJBQXNoQUNBR0JIOGdBaUVESUFZaEFnd0JCU0FDSVFZZ0FBc01BUXNEZnlBQ1FRUnFLQUlBUVhoeElBRnJJZ1VnQTBraEJpQUZJQU1nQmhzaEF5QUNJQUFnQmhzaEFDQUNRUkJxS0FJQUlnWUVmeUFHQlNBQ1FSUnFLQUlBQ3lJQ0RRQWdBeUVHSUFBTEN5SURCSDhnQmtHRUxDZ0NBQ0FCYTBrRWZ5QUJJQU5xSWdjZ0Ewc0VmeUFEUVJocUtBSUFJUWtnQTBFTWFpZ0NBQ0lBSUFOR0JFQUNRQ0FEUVJScUlnSW9BZ0FpQUVVRVFDQURRUkJxSWdJb0FnQWlBRVVFUUVFQUlRQU1BZ3NMQTBBQ1FDQUFRUlJxSWdVb0FnQWlDQVIvSUFVaEFpQUlCU0FBUVJCcUlnVW9BZ0FpQ0VVTkFTQUZJUUlnQ0FzaEFBd0JDd3NnQWtFQU5nSUFDd1VnQTBFSWFpZ0NBQ0lDUVF4cUlBQTJBZ0FnQUVFSWFpQUNOZ0lBQ3lBSkJFQUNRQ0FEUVJ4cUtBSUFJZ0pCQW5SQnJDNXFJZ1VvQWdBZ0EwWUVRQ0FGSUFBMkFnQWdBRVVFUUVHQUxDQUVRUUVnQW5SQmYzTnhJZ0EyQWdBTUFnc0ZJQWxCRUdvaUFpQUpRUlJxSUFJb0FnQWdBMFliSUFBMkFnQWdBRVVFUUNBRUlRQU1BZ3NMSUFCQkdHb2dDVFlDQUNBRFFSQnFLQUlBSWdJRVFDQUFRUkJxSUFJMkFnQWdBa0VZYWlBQU5nSUFDeUFEUVJScUtBSUFJZ0lFZnlBQVFSUnFJQUkyQWdBZ0FrRVlhaUFBTmdJQUlBUUZJQVFMSVFBTEJTQUVJUUFMSUFaQkVFa0VRQ0FEUVFScUlBRWdCbW9pQUVFRGNqWUNBQ0FBSUFOcVFRUnFJZ0FnQUNnQ0FFRUJjallDQUFVQ1FDQURRUVJxSUFGQkEzSTJBZ0FnQjBFRWFpQUdRUUZ5TmdJQUlBWWdCMm9nQmpZQ0FDQUdRUU4ySVFFZ0JrR0FBa2tFUUNBQlFRTjBRYVFzYWlFQVFmd3JLQUlBSWdKQkFTQUJkQ0lCY1FSL0lBQkJDR29pQVNFQ0lBRW9BZ0FGUWZ3cklBRWdBbkkyQWdBZ0FFRUlhaUVDSUFBTElRRWdBaUFITmdJQUlBRkJER29nQnpZQ0FDQUhRUWhxSUFFMkFnQWdCMEVNYWlBQU5nSUFEQUVMSUFaQkNIWWlBUVIvSUFaQi8vLy9CMHNFZjBFZkJTQUJJQUZCZ1A0L2FrRVFka0VJY1NJRWRDSUNRWURnSDJwQkVIWkJCSEVoQVNBQ0lBRjBJZ1ZCZ0lBUGFrRVFka0VDY1NFQ0lBWkJEaUFCSUFSeUlBSnlheUFGSUFKMFFROTJhaUlCUVFkcWRrRUJjU0FCUVFGMGNnc0ZRUUFMSWdGQkFuUkJyQzVxSVFJZ0IwRWNhaUFCTmdJQUlBZEJFR29pQkVFRWFrRUFOZ0lBSUFSQkFEWUNBQ0FBUVFFZ0FYUWlCSEZGQkVCQmdDd2dBQ0FFY2pZQ0FDQUNJQWMyQWdBZ0IwRVlhaUFDTmdJQUlBZEJER29nQnpZQ0FDQUhRUWhxSUFjMkFnQU1BUXNnQWlnQ0FDSUFRUVJxS0FJQVFYaHhJQVpHQkVBZ0FDRUJCUUpBSUFaQkFFRVpJQUZCQVhacklBRkJIMFliZENFQ0EwQWdBRUVRYWlBQ1FSOTJRUUowYWlJRUtBSUFJZ0VFUUNBQ1FRRjBJUUlnQVVFRWFpZ0NBRUY0Y1NBR1JnMENJQUVoQUF3QkN3c2dCQ0FITmdJQUlBZEJHR29nQURZQ0FDQUhRUXhxSUFjMkFnQWdCMEVJYWlBSE5nSUFEQUlMQ3lBQlFRaHFJZ0FvQWdBaUFrRU1haUFITmdJQUlBQWdCellDQUNBSFFRaHFJQUkyQWdBZ0IwRU1haUFCTmdJQUlBZEJHR3BCQURZQ0FBc0xJQW9rQWlBRFFRaHFEd1VnQVFzRklBRUxCU0FCQ3dVZ0FRc0xDd3NoQUVHRUxDZ0NBQ0lDSUFCUEJFQkJrQ3dvQWdBaEFTQUNJQUJySWdOQkQwc0VRRUdRTENBQUlBRnFJZ1EyQWdCQmhDd2dBellDQUNBRVFRUnFJQU5CQVhJMkFnQWdBU0FDYWlBRE5nSUFJQUZCQkdvZ0FFRURjallDQUFWQmhDeEJBRFlDQUVHUUxFRUFOZ0lBSUFGQkJHb2dBa0VEY2pZQ0FDQUJJQUpxUVFScUlnQWdBQ2dDQUVFQmNqWUNBQXNnQ2lRQ0lBRkJDR29QQzBHSUxDZ0NBQ0lDSUFCTEJFQkJpQ3dnQWlBQWF5SUNOZ0lBUVpRc1FaUXNLQUlBSWdFZ0FHb2lBellDQUNBRFFRUnFJQUpCQVhJMkFnQWdBVUVFYWlBQVFRTnlOZ0lBSUFva0FpQUJRUWhxRHdzZ0FFRXdhaUVHUWRRdktBSUFCSDlCM0M4b0FnQUZRZHd2UVlBZ05nSUFRZGd2UVlBZ05nSUFRZUF2UVg4MkFnQkI1QzlCZnpZQ0FFSG9MMEVBTmdJQVFiZ3ZRUUEyQWdCQjFDOGdDVUZ3Y1VIWXF0V3FCWE0yQWdCQmdDQUxJZ0VnQUVFdmFpSUZhaUlJUVFBZ0FXc2lDWEVpQkNBQVRRUkFJQW9rQWtFQUR3dEJ0QzhvQWdBaUFRUkFRYXd2S0FJQUlnTWdCR29pQnlBRFRTQUhJQUZMY2dSQUlBb2tBa0VBRHdzTEFrQUNRRUc0THlnQ0FFRUVjUVJBUVFBaEFnVUNRQUpBQWtCQmxDd29BZ0FpQVVVTkFFRzhMeUVEQTBBQ1FDQURLQUlBSWdjZ0FVMEVRQ0FISUFOQkJHb29BZ0JxSUFGTERRRUxJQU5CQ0dvb0FnQWlBdzBCREFJTEN5QUlJQUpySUFseElnSkIvLy8vL3dkSkJFQWdBaEJlSVFFZ0FTQURLQUlBSUFOQkJHb29BZ0JxUncwQ0lBRkJmMGNOQlFWQkFDRUNDd3dDQzBFQUVGNGlBVUYvUmdSL1FRQUZRYXd2S0FJQUlnZ2dBVUhZTHlnQ0FDSUNRWDlxSWdOcVFRQWdBbXR4SUFGclFRQWdBU0FEY1JzZ0JHb2lBbW9oQXlBQ1FmLy8vLzhIU1NBQ0lBQkxjUVIvUWJRdktBSUFJZ2tFUUNBRElBaE5JQU1nQ1V0eUJFQkJBQ0VDREFVTEN5QUJJQUlRWGlJRFJnMEZJQU1oQVF3Q0JVRUFDd3NoQWd3QkMwRUFJQUpySVFnZ0FVRi9SeUFDUWYvLy8vOEhTWEVnQmlBQ1MzRkZCRUFnQVVGL1JnUkFRUUFoQWd3Q0JRd0VDd0FMUWR3dktBSUFJZ01nQlNBQ2EycEJBQ0FEYTNFaUEwSC8vLy8vQjA4TkFpQURFRjVCZjBZRWZ5QUlFRjRhUVFBRklBSWdBMm9oQWd3REN5RUNDMEc0TDBHNEx5Z0NBRUVFY2pZQ0FBc2dCRUgvLy8vL0Iwa0VRQ0FFRUY0aEFVRUFFRjRpQXlBQmF5SUdJQUJCS0dwTElRUWdCaUFDSUFRYklRSWdCRUVCY3lBQlFYOUdjaUFCUVg5SElBTkJmMGR4SUFFZ0EwbHhRUUZ6Y2tVTkFRc01BUXRCckM5QnJDOG9BZ0FnQW1vaUF6WUNBQ0FEUWJBdktBSUFTd1JBUWJBdklBTTJBZ0FMUVpRc0tBSUFJZ1FFUUFKQVFid3ZJUU1DUUFKQUEwQWdBeWdDQUNJR0lBTkJCR29vQWdBaUJXb2dBVVlOQVNBRFFRaHFLQUlBSWdNTkFBc01BUXNnQTBFRWFpRUlJQU5CREdvb0FnQkJDSEZGQkVBZ0JpQUVUU0FCSUFSTGNRUkFJQWdnQWlBRmFqWUNBQ0FFUVFBZ0JFRUlhaUlCYTBFSGNVRUFJQUZCQjNFYklnTnFJUUZCaUN3b0FnQWdBbW9pQmlBRGF5RUNRWlFzSUFFMkFnQkJpQ3dnQWpZQ0FDQUJRUVJxSUFKQkFYSTJBZ0FnQkNBR2FrRUVha0VvTmdJQVFaZ3NRZVF2S0FJQU5nSUFEQU1MQ3dzZ0FVR01MQ2dDQUVrRVFFR01MQ0FCTmdJQUN5QUJJQUpxSVFaQnZDOGhBd0pBQWtBRFFDQURLQUlBSUFaR0RRRWdBMEVJYWlnQ0FDSUREUUFMREFFTElBTkJER29vQWdCQkNIRkZCRUFnQXlBQk5nSUFJQU5CQkdvaUF5QURLQUlBSUFKcU5nSUFRUUFnQVVFSWFpSUNhMEVIY1VFQUlBSkJCM0ViSUFGcUlna2dBR29oQlNBR1FRQWdCa0VJYWlJQmEwRUhjVUVBSUFGQkIzRWJhaUlDSUFscklBQnJJUU1nQ1VFRWFpQUFRUU55TmdJQUlBSWdCRVlFUUVHSUxFR0lMQ2dDQUNBRGFpSUFOZ0lBUVpRc0lBVTJBZ0FnQlVFRWFpQUFRUUZ5TmdJQUJRSkFRWkFzS0FJQUlBSkdCRUJCaEN4QmhDd29BZ0FnQTJvaUFEWUNBRUdRTENBRk5nSUFJQVZCQkdvZ0FFRUJjallDQUNBQUlBVnFJQUEyQWdBTUFRc2dBa0VFYWlnQ0FDSUFRUU54UVFGR0JFQWdBRUY0Y1NFSElBQkJBM1loQkNBQVFZQUNTUVJBSUFKQkNHb29BZ0FpQUNBQ1FReHFLQUlBSWdGR0JFQkIvQ3RCL0Nzb0FnQkJBU0FFZEVGL2MzRTJBZ0FGSUFCQkRHb2dBVFlDQUNBQlFRaHFJQUEyQWdBTEJRSkFJQUpCR0dvb0FnQWhDQ0FDUVF4cUtBSUFJZ0FnQWtZRVFBSkFJQUpCRUdvaUFVRUVhaUlFS0FJQUlnQUVRQ0FFSVFFRklBRW9BZ0FpQUVVRVFFRUFJUUFNQWdzTEEwQUNRQ0FBUVJScUlnUW9BZ0FpQmdSL0lBUWhBU0FHQlNBQVFSQnFJZ1FvQWdBaUJrVU5BU0FFSVFFZ0Jnc2hBQXdCQ3dzZ0FVRUFOZ0lBQ3dVZ0FrRUlhaWdDQUNJQlFReHFJQUEyQWdBZ0FFRUlhaUFCTmdJQUN5QUlSUTBBSUFKQkhHb29BZ0FpQVVFQ2RFR3NMbW9pQkNnQ0FDQUNSZ1JBQWtBZ0JDQUFOZ0lBSUFBTkFFR0FMRUdBTENnQ0FFRUJJQUYwUVg5emNUWUNBQXdDQ3dVZ0NFRVFhaUlCSUFoQkZHb2dBU2dDQUNBQ1Joc2dBRFlDQUNBQVJRMEJDeUFBUVJocUlBZzJBZ0FnQWtFUWFpSUVLQUlBSWdFRVFDQUFRUkJxSUFFMkFnQWdBVUVZYWlBQU5nSUFDeUFFUVFScUtBSUFJZ0ZGRFFBZ0FFRVVhaUFCTmdJQUlBRkJHR29nQURZQ0FBc0xJQUlnQjJvaEFpQURJQWRxSVFNTElBSkJCR29pQUNBQUtBSUFRWDV4TmdJQUlBVkJCR29nQTBFQmNqWUNBQ0FESUFWcUlBTTJBZ0FnQTBFRGRpRUJJQU5CZ0FKSkJFQWdBVUVEZEVHa0xHb2hBRUg4S3lnQ0FDSUNRUUVnQVhRaUFYRUVmeUFBUVFocUlnRWhBaUFCS0FJQUJVSDhLeUFCSUFKeU5nSUFJQUJCQ0dvaEFpQUFDeUVCSUFJZ0JUWUNBQ0FCUVF4cUlBVTJBZ0FnQlVFSWFpQUJOZ0lBSUFWQkRHb2dBRFlDQUF3QkN5QURRUWgySWdBRWZ5QURRZi8vL3dkTEJIOUJId1VnQUNBQVFZRCtQMnBCRUhaQkNIRWlBblFpQVVHQTRCOXFRUkIyUVFSeElRQWdBU0FBZENJRVFZQ0FEMnBCRUhaQkFuRWhBU0FEUVE0Z0FDQUNjaUFCY21zZ0JDQUJkRUVQZG1vaUFFRUhhblpCQVhFZ0FFRUJkSElMQlVFQUN5SUJRUUowUWF3dWFpRUFJQVZCSEdvZ0FUWUNBQ0FGUVJCcUlnSkJCR3BCQURZQ0FDQUNRUUEyQWdCQmdDd29BZ0FpQWtFQklBRjBJZ1J4UlFSQVFZQXNJQUlnQkhJMkFnQWdBQ0FGTmdJQUlBVkJHR29nQURZQ0FDQUZRUXhxSUFVMkFnQWdCVUVJYWlBRk5nSUFEQUVMSUFBb0FnQWlBRUVFYWlnQ0FFRjRjU0FEUmdSQUlBQWhBUVVDUUNBRFFRQkJHU0FCUVFGMmF5QUJRUjlHRzNRaEFnTkFJQUJCRUdvZ0FrRWZka0VDZEdvaUJDZ0NBQ0lCQkVBZ0FrRUJkQ0VDSUFGQkJHb29BZ0JCZUhFZ0EwWU5BaUFCSVFBTUFRc0xJQVFnQlRZQ0FDQUZRUmhxSUFBMkFnQWdCVUVNYWlBRk5nSUFJQVZCQ0dvZ0JUWUNBQXdDQ3dzZ0FVRUlhaUlBS0FJQUlnSkJER29nQlRZQ0FDQUFJQVUyQWdBZ0JVRUlhaUFDTmdJQUlBVkJER29nQVRZQ0FDQUZRUmhxUVFBMkFnQUxDeUFLSkFJZ0NVRUlhZzhMQzBHOEx5RURBMEFDUUNBREtBSUFJZ1lnQkUwRVFDQUdJQU5CQkdvb0FnQnFJZ1VnQkVzTkFRc2dBMEVJYWlnQ0FDRUREQUVMQ3lBRlFWRnFJZ1pCQ0dvaEF5QUVJQVpCQUNBRGEwRUhjVUVBSUFOQkIzRWJhaUlESUFNZ0JFRVFhaUlKU1JzaUEwRUlhaUVHUVpRc1FRQWdBVUVJYWlJSWEwRUhjVUVBSUFoQkIzRWJJZ2dnQVdvaUJ6WUNBRUdJTENBQ1FWaHFJZ3NnQ0dzaUNEWUNBQ0FIUVFScUlBaEJBWEkyQWdBZ0FTQUxha0VFYWtFb05nSUFRWmdzUWVRdktBSUFOZ0lBSUFOQkJHb2lDRUViTmdJQUlBWkJ2QzhwQWdBM0FnQWdCa0hFTHlrQ0FEY0NDRUc4THlBQk5nSUFRY0F2SUFJMkFnQkJ5QzlCQURZQ0FFSEVMeUFHTmdJQUlBTkJHR29oQVFOQUlBRkJCR29pQWtFSE5nSUFJQUZCQ0dvZ0JVa0VRQ0FDSVFFTUFRc0xJQU1nQkVjRVFDQUlJQWdvQWdCQmZuRTJBZ0FnQkVFRWFpQURJQVJySWdaQkFYSTJBZ0FnQXlBR05nSUFJQVpCQTNZaEFpQUdRWUFDU1FSQUlBSkJBM1JCcEN4cUlRRkIvQ3NvQWdBaUEwRUJJQUowSWdKeEJIOGdBVUVJYWlJQ0lRTWdBaWdDQUFWQi9Dc2dBaUFEY2pZQ0FDQUJRUWhxSVFNZ0FRc2hBaUFESUFRMkFnQWdBa0VNYWlBRU5nSUFJQVJCQ0dvZ0FqWUNBQ0FFUVF4cUlBRTJBZ0FNQWdzZ0JrRUlkaUlCQkg4Z0JrSC8vLzhIU3dSL1FSOEZJQUVnQVVHQS9qOXFRUkIyUVFoeElnTjBJZ0pCZ09BZmFrRVFka0VFY1NFQklBSWdBWFFpQlVHQWdBOXFRUkIyUVFKeElRSWdCa0VPSUFFZ0EzSWdBbkpySUFVZ0FuUkJEM1pxSWdGQkIycDJRUUZ4SUFGQkFYUnlDd1ZCQUFzaUFrRUNkRUdzTG1vaEFTQUVRUnhxSUFJMkFnQWdCRUVVYWtFQU5nSUFJQWxCQURZQ0FFR0FMQ2dDQUNJRFFRRWdBblFpQlhGRkJFQkJnQ3dnQXlBRmNqWUNBQ0FCSUFRMkFnQWdCRUVZYWlBQk5nSUFJQVJCREdvZ0JEWUNBQ0FFUVFocUlBUTJBZ0FNQWdzZ0FTZ0NBQ0lCUVFScUtBSUFRWGh4SUFaR0JFQWdBU0VDQlFKQUlBWkJBRUVaSUFKQkFYWnJJQUpCSDBZYmRDRURBMEFnQVVFUWFpQURRUjkyUVFKMGFpSUZLQUlBSWdJRVFDQURRUUYwSVFNZ0FrRUVhaWdDQUVGNGNTQUdSZzBDSUFJaEFRd0JDd3NnQlNBRU5nSUFJQVJCR0dvZ0FUWUNBQ0FFUVF4cUlBUTJBZ0FnQkVFSWFpQUVOZ0lBREFNTEN5QUNRUWhxSWdFb0FnQWlBMEVNYWlBRU5nSUFJQUVnQkRZQ0FDQUVRUWhxSUFNMkFnQWdCRUVNYWlBQ05nSUFJQVJCR0dwQkFEWUNBQXNMQlVHTUxDZ0NBQ0lEUlNBQklBTkpjZ1JBUVl3c0lBRTJBZ0FMUWJ3dklBRTJBZ0JCd0M4Z0FqWUNBRUhJTDBFQU5nSUFRYUFzUWRRdktBSUFOZ0lBUVp3c1FYODJBZ0JCc0N4QnBDdzJBZ0JCckN4QnBDdzJBZ0JCdUN4QnJDdzJBZ0JCdEN4QnJDdzJBZ0JCd0N4QnRDdzJBZ0JCdkN4QnRDdzJBZ0JCeUN4QnZDdzJBZ0JCeEN4QnZDdzJBZ0JCMEN4QnhDdzJBZ0JCekN4QnhDdzJBZ0JCMkN4QnpDdzJBZ0JCMUN4QnpDdzJBZ0JCNEN4QjFDdzJBZ0JCM0N4QjFDdzJBZ0JCNkN4QjNDdzJBZ0JCNUN4QjNDdzJBZ0JCOEN4QjVDdzJBZ0JCN0N4QjVDdzJBZ0JCK0N4QjdDdzJBZ0JCOUN4QjdDdzJBZ0JCZ0MxQjlDdzJBZ0JCL0N4QjlDdzJBZ0JCaUMxQi9DdzJBZ0JCaEMxQi9DdzJBZ0JCa0MxQmhDMDJBZ0JCakMxQmhDMDJBZ0JCbUMxQmpDMDJBZ0JCbEMxQmpDMDJBZ0JCb0MxQmxDMDJBZ0JCbkMxQmxDMDJBZ0JCcUMxQm5DMDJBZ0JCcEMxQm5DMDJBZ0JCc0MxQnBDMDJBZ0JCckMxQnBDMDJBZ0JCdUMxQnJDMDJBZ0JCdEMxQnJDMDJBZ0JCd0MxQnRDMDJBZ0JCdkMxQnRDMDJBZ0JCeUMxQnZDMDJBZ0JCeEMxQnZDMDJBZ0JCMEMxQnhDMDJBZ0JCekMxQnhDMDJBZ0JCMkMxQnpDMDJBZ0JCMUMxQnpDMDJBZ0JCNEMxQjFDMDJBZ0JCM0MxQjFDMDJBZ0JCNkMxQjNDMDJBZ0JCNUMxQjNDMDJBZ0JCOEMxQjVDMDJBZ0JCN0MxQjVDMDJBZ0JCK0MxQjdDMDJBZ0JCOUMxQjdDMDJBZ0JCZ0M1QjlDMDJBZ0JCL0MxQjlDMDJBZ0JCaUM1Qi9DMDJBZ0JCaEM1Qi9DMDJBZ0JCa0M1QmhDNDJBZ0JCakM1QmhDNDJBZ0JCbUM1QmpDNDJBZ0JCbEM1QmpDNDJBZ0JCb0M1QmxDNDJBZ0JCbkM1QmxDNDJBZ0JCcUM1Qm5DNDJBZ0JCcEM1Qm5DNDJBZ0JCbEN4QkFDQUJRUWhxSWdOclFRZHhRUUFnQTBFSGNSc2lBeUFCYWlJRU5nSUFRWWdzSUFKQldHb2lBaUFEYXlJRE5nSUFJQVJCQkdvZ0EwRUJjallDQUNBQklBSnFRUVJxUVNnMkFnQkJtQ3hCNUM4b0FnQTJBZ0FMUVlnc0tBSUFJZ0VnQUVzRVFFR0lMQ0FCSUFCcklnSTJBZ0JCbEN4QmxDd29BZ0FpQVNBQWFpSUROZ0lBSUFOQkJHb2dBa0VCY2pZQ0FDQUJRUVJxSUFCQkEzSTJBZ0FnQ2lRQ0lBRkJDR29QQ3dzUVRVRU1OZ0lBSUFva0FrRUFDOGdQQVFoL0lBQkZCRUFQQzBHTUxDZ0NBQ0VFSUFCQmVHb2lBU0FBUVh4cUtBSUFJZ05CZUhFaUFHb2hCaUFEUVFGeEJFQWdBU0VDQlFKL0lBRW9BZ0FoQWlBRFFRTnhSUVJBRHdzZ0FDQUNhaUVESUFFZ0Ftc2lBQ0FFU1FSQUR3dEJrQ3dvQWdBZ0FFWUVRQ0FHUVFScUlnRW9BZ0FpQWtFRGNVRURSd1JBSUFBaEFTQUFJUUlnQXd3Q0MwR0VMQ0FETmdJQUlBRWdBa0YrY1RZQ0FDQUFRUVJxSUFOQkFYSTJBZ0FnQUNBRGFpQUROZ0lBRHdzZ0FrRURkaUVFSUFKQmdBSkpCRUFnQUVFSWFpZ0NBQ0lCSUFCQkRHb29BZ0FpQWtZRVFFSDhLMEg4S3lnQ0FFRUJJQVIwUVg5emNUWUNBQ0FBSVFFZ0FDRUNJQU1NQWdVZ0FVRU1haUFDTmdJQUlBSkJDR29nQVRZQ0FDQUFJUUVnQUNFQ0lBTU1BZ3NBQ3lBQVFSaHFLQUlBSVFjZ0FFRU1haWdDQUNJQklBQkdCRUFDUUNBQVFSQnFJZ0pCQkdvaUJDZ0NBQ0lCQkVBZ0JDRUNCU0FDS0FJQUlnRkZCRUJCQUNFQkRBSUxDd05BQWtBZ0FVRVVhaUlFS0FJQUlnVUVmeUFFSVFJZ0JRVWdBVUVRYWlJRUtBSUFJZ1ZGRFFFZ0JDRUNJQVVMSVFFTUFRc0xJQUpCQURZQ0FBc0ZJQUJCQ0dvb0FnQWlBa0VNYWlBQk5nSUFJQUZCQ0dvZ0FqWUNBQXNnQndSL0lBQkJIR29vQWdBaUFrRUNkRUdzTG1vaUJDZ0NBQ0FBUmdSQUlBUWdBVFlDQUNBQlJRUkFRWUFzUVlBc0tBSUFRUUVnQW5SQmYzTnhOZ0lBSUFBaEFTQUFJUUlnQXd3REN3VWdCMEVRYWlJQ0lBZEJGR29nQWlnQ0FDQUFSaHNnQVRZQ0FDQUJSUVJBSUFBaEFTQUFJUUlnQXd3REN3c2dBVUVZYWlBSE5nSUFJQUJCRUdvaUJDZ0NBQ0lDQkVBZ0FVRVFhaUFDTmdJQUlBSkJHR29nQVRZQ0FBc2dCRUVFYWlnQ0FDSUNCSDhnQVVFVWFpQUNOZ0lBSUFKQkdHb2dBVFlDQUNBQUlRRWdBQ0VDSUFNRklBQWhBU0FBSVFJZ0F3c0ZJQUFoQVNBQUlRSWdBd3NMSVFBTElBRWdCazhFUUE4TElBWkJCR29pQkNnQ0FDSURRUUZ4UlFSQUR3c2dBMEVDY1FSL0lBUWdBMEYrY1RZQ0FDQUNRUVJxSUFCQkFYSTJBZ0FnQUNBQmFpQUFOZ0lBSUFBRlFaUXNLQUlBSUFaR0JFQkJpQ3hCaUN3b0FnQWdBR29pQURZQ0FFR1VMQ0FDTmdJQUlBSkJCR29nQUVFQmNqWUNBQ0FDUVpBc0tBSUFSd1JBRHd0QmtDeEJBRFlDQUVHRUxFRUFOZ0lBRHd0QmtDd29BZ0FnQmtZRVFFR0VMRUdFTENnQ0FDQUFhaUlBTmdJQVFaQXNJQUUyQWdBZ0FrRUVhaUFBUVFGeU5nSUFJQUFnQVdvZ0FEWUNBQThMSUFOQmVIRWdBR29oQkNBRFFRTjJJUVVnQTBHQUFra0VRQ0FHUVFocUtBSUFJZ0FnQmtFTWFpZ0NBQ0lEUmdSQVFmd3JRZndyS0FJQVFRRWdCWFJCZjNOeE5nSUFCU0FBUVF4cUlBTTJBZ0FnQTBFSWFpQUFOZ0lBQ3dVQ1FDQUdRUmhxS0FJQUlRZ2dCa0VNYWlnQ0FDSUFJQVpHQkVBQ1FDQUdRUkJxSWdOQkJHb2lCU2dDQUNJQUJFQWdCU0VEQlNBREtBSUFJZ0JGQkVCQkFDRUFEQUlMQ3dOQUFrQWdBRUVVYWlJRktBSUFJZ2NFZnlBRklRTWdCd1VnQUVFUWFpSUZLQUlBSWdkRkRRRWdCU0VESUFjTElRQU1BUXNMSUFOQkFEWUNBQXNGSUFaQkNHb29BZ0FpQTBFTWFpQUFOZ0lBSUFCQkNHb2dBellDQUFzZ0NBUkFJQVpCSEdvb0FnQWlBMEVDZEVHc0xtb2lCU2dDQUNBR1JnUkFJQVVnQURZQ0FDQUFSUVJBUVlBc1FZQXNLQUlBUVFFZ0EzUkJmM054TmdJQURBTUxCU0FJUVJCcUlnTWdDRUVVYWlBREtBSUFJQVpHR3lBQU5nSUFJQUJGRFFJTElBQkJHR29nQ0RZQ0FDQUdRUkJxSWdVb0FnQWlBd1JBSUFCQkVHb2dBellDQUNBRFFSaHFJQUEyQWdBTElBVkJCR29vQWdBaUF3UkFJQUJCRkdvZ0F6WUNBQ0FEUVJocUlBQTJBZ0FMQ3dzTElBSkJCR29nQkVFQmNqWUNBQ0FCSUFScUlBUTJBZ0JCa0N3b0FnQWdBa1lFZjBHRUxDQUVOZ0lBRHdVZ0JBc0xJZ05CQTNZaEFTQURRWUFDU1FSQUlBRkJBM1JCcEN4cUlRQkIvQ3NvQWdBaUEwRUJJQUYwSWdGeEJIOGdBRUVJYWlJQklRTWdBU2dDQUFWQi9Dc2dBU0FEY2pZQ0FDQUFRUWhxSVFNZ0FBc2hBU0FESUFJMkFnQWdBVUVNYWlBQ05nSUFJQUpCQ0dvZ0FUWUNBQ0FDUVF4cUlBQTJBZ0FQQ3lBRFFRaDJJZ0FFZnlBRFFmLy8vd2RMQkg5Qkh3VWdBQ0FBUVlEK1AycEJFSFpCQ0hFaUJIUWlBVUdBNEI5cVFSQjJRUVJ4SVFBZ0FTQUFkQ0lGUVlDQUQycEJFSFpCQW5FaEFTQURRUTRnQUNBRWNpQUJjbXNnQlNBQmRFRVBkbW9pQUVFSGFuWkJBWEVnQUVFQmRISUxCVUVBQ3lJQlFRSjBRYXd1YWlFQUlBSkJIR29nQVRZQ0FDQUNRUlJxUVFBMkFnQWdBa0VRYWtFQU5nSUFRWUFzS0FJQUlnUkJBU0FCZENJRmNRUkFBa0FnQUNnQ0FDSUFRUVJxS0FJQVFYaHhJQU5HQkVBZ0FDRUJCUUpBSUFOQkFFRVpJQUZCQVhacklBRkJIMFliZENFRUEwQWdBRUVRYWlBRVFSOTJRUUowYWlJRktBSUFJZ0VFUUNBRVFRRjBJUVFnQVVFRWFpZ0NBRUY0Y1NBRFJnMENJQUVoQUF3QkN3c2dCU0FDTmdJQUlBSkJHR29nQURZQ0FDQUNRUXhxSUFJMkFnQWdBa0VJYWlBQ05nSUFEQUlMQ3lBQlFRaHFJZ0FvQWdBaUEwRU1haUFDTmdJQUlBQWdBallDQUNBQ1FRaHFJQU0yQWdBZ0FrRU1haUFCTmdJQUlBSkJHR3BCQURZQ0FBc0ZRWUFzSUFRZ0JYSTJBZ0FnQUNBQ05nSUFJQUpCR0dvZ0FEWUNBQ0FDUVF4cUlBSTJBZ0FnQWtFSWFpQUNOZ0lBQzBHY0xFR2NMQ2dDQUVGL2FpSUFOZ0lBSUFBRVFBOExRY1F2SVFBRFFDQUFLQUlBSWdGQkNHb2hBQ0FCRFFBTFFad3NRWDgyQWdBTExBQWdBQ2dDQUVIZnQ5NmFBVVlFUUVFQUR3c2dBVUVCY1VFYWFoRUJBQ0FBUWQrMzNwb0JOZ0lBUVFBTHhnTUJBMzhnQWtHQXdBQk9CRUFnQUNBQklBSVFDQm9nQUE4TElBQWhCQ0FBSUFKcUlRTWdBRUVEY1NBQlFRTnhSZ1JBQTBBZ0FFRURjUVJBSUFKRkJFQWdCQThMSUFBZ0FTd0FBRG9BQUNBQVFRRnFJUUFnQVVFQmFpRUJJQUpCQVdzaEFnd0JDd3NnQTBGOGNTSUNRVUJxSVFVRFFDQUFJQVZNQkVBZ0FDQUJLQUlBTmdJQUlBQWdBU2dDQkRZQ0JDQUFJQUVvQWdnMkFnZ2dBQ0FCS0FJTU5nSU1JQUFnQVNnQ0VEWUNFQ0FBSUFFb0FoUTJBaFFnQUNBQktBSVlOZ0lZSUFBZ0FTZ0NIRFlDSENBQUlBRW9BaUEyQWlBZ0FDQUJLQUlrTmdJa0lBQWdBU2dDS0RZQ0tDQUFJQUVvQWl3MkFpd2dBQ0FCS0FJd05nSXdJQUFnQVNnQ05EWUNOQ0FBSUFFb0FqZzJBamdnQUNBQktBSThOZ0k4SUFCQlFHc2hBQ0FCUVVCcklRRU1BUXNMQTBBZ0FDQUNTQVJBSUFBZ0FTZ0NBRFlDQUNBQVFRUnFJUUFnQVVFRWFpRUJEQUVMQ3dVZ0EwRUVheUVDQTBBZ0FDQUNTQVJBSUFBZ0FTd0FBRG9BQUNBQUlBRXNBQUU2QUFFZ0FDQUJMQUFDT2dBQ0lBQWdBU3dBQXpvQUF5QUFRUVJxSVFBZ0FVRUVhaUVCREFFTEN3c0RRQ0FBSUFOSUJFQWdBQ0FCTEFBQU9nQUFJQUJCQVdvaEFDQUJRUUZxSVFFTUFRc0xJQVFMbUFJQkJIOGdBQ0FDYWlFRUlBRkIvd0Z4SVFFZ0FrSERBRTRFUUFOQUlBQkJBM0VFUUNBQUlBRTZBQUFnQUVFQmFpRUFEQUVMQ3lBQlFRaDBJQUZ5SUFGQkVIUnlJQUZCR0hSeUlRTWdCRUY4Y1NJRlFVQnFJUVlEUUNBQUlBWk1CRUFnQUNBRE5nSUFJQUFnQXpZQ0JDQUFJQU0yQWdnZ0FDQUROZ0lNSUFBZ0F6WUNFQ0FBSUFNMkFoUWdBQ0FETmdJWUlBQWdBellDSENBQUlBTTJBaUFnQUNBRE5nSWtJQUFnQXpZQ0tDQUFJQU0yQWl3Z0FDQUROZ0l3SUFBZ0F6WUNOQ0FBSUFNMkFqZ2dBQ0FETmdJOElBQkJRR3NoQUF3QkN3c0RRQ0FBSUFWSUJFQWdBQ0FETmdJQUlBQkJCR29oQUF3QkN3c0xBMEFnQUNBRVNBUkFJQUFnQVRvQUFDQUFRUUZxSVFBTUFRc0xJQVFnQW1zTFVnRURmeEFISVFNZ0FDTUJLQUlBSWdKcUlnRWdBa2dnQUVFQVNuRWdBVUVBU0hJRVFDQUJFQW9hUVF3UUFrRi9Ed3NnQVNBRFNnUkFJQUVRQ1VVRVFFRU1FQUpCZnc4TEN5TUJJQUUyQWdBZ0Fnc01BQ0FCSUFCQkEzRVJBZ0FMRVFBZ0FTQUNJQUJCQjNGQkJHb1JBd0FMRXdBZ0FTQUNJQU1nQUVFSGNVRU1haEVBQUFzYkFDQUJJQUlnQXlBRUlBVWdCaUFISUFCQkFYRkJGR29SQkFBTEhRQWdBU0FDSUFNZ0JDQUZJQVlnQnlBSUlBQkJBWEZCRm1vUkJRQUxFd0FnQVNBQ0lBTWdBRUVCY1VFWWFoRUdBQXNOQUNBQVFRRnhRUnBxRVFFQUN3OEFJQUVnQUVFQmNVRWNhaEVIQUFzYkFDQUJJQUlnQXlBRUlBVWdCaUFISUFCQkFYRkJIbW9SQ0FBTENBQkJBQkFBUVFBTENBQkJBUkFBUVFBTENBQkJBaEFBUVFBTENBQkJBeEFBUVFBTENBQkJCQkFBUVFBTENBQkJCUkFBUWdBTEJnQkJCaEFBQ3dZQVFRY1FBQXNHQUVFSUVBQUxJd0VCZmlBQUlBRWdBcTBnQTYxQ0lJYUVJQVFRWkNFRklBVkNJSWluRUFzZ0JhY0xDL2thREFCQmdBZ0xHRklhSEJPWkd6c2FjeG9wRGQ0ZEZ3K01IbUljbkJNS0VRQkJvQWdMR0hJZ1pTZGVKeTh1UXk2bEdBRWxZeVYvS3AwZDlCODdIUUJCd0FnTEdIb0JLQVR0QVVZQ3NBSlJBdG9CdVFMYkFiQUNwUUhIQVFCQjRBZ0xHQ3NDK1FFM0Fnd0NTUUxQQlAwQlBBUHNBUVFHTndSU0F3QkJnQWtMRnlJQVBnQklBRUlBTlFBWkFGNEFRZ0E0QUQ0QVN3Qm5BRUdnQ1FzWE1BQlNBQzBBVndBeUFDOEFVQUF1QUZNQUtRQk9BRkVBUWNJSkM3OFZ5UUNTQVZzQ0pBUHRBN1lFZmdWSEJoQUgyUWVoQ0dvSk1ncjdDc01MaXd4VERSc080dzZyRDNJUU9SRUFFc2NTamhOVkZCc1Y0UlduRm0wWE14ajRHTDBaZ2hwR0d3c2N6eHlUSFZZZUdSL2NINThnWVNFakl1UWlwaU5uSkNjbDV5V25KbWNuSmlqbEtLTXBZU29lSzlzcm1DeFVMUkF1ekM2R0wwRXcrekMwTVcweUpqUGVNNVkwVFRVRE5yazJiemNrT05nNGpEay9Pdkk2cER0V1BBYzl0ejFuUGhZL3hUOXpRQ0JCelVGNVFpVkQwRU42UkNORnpFVjBSaHhIdzBkcFNBNUpzMGxYU3ZwS25Vcy9UT0JNZ0UwZ1RyOU9YVS82VDVkUU0xSE9VV2hTQVZPYVV6SlV5VlJmVmZSVmlWWWRWN0JYUWxqVFdHTlo4MW1CV2c5Ym5Gc29YTE5jUFYzR1hVOWUxbDVkWCtKZloyRHJZRzVoOEdGeFl2RmljR1B1WTJ0azUyUmlaZDFsVm1iT1prVm52R2N4YUtWb0dXbUxhZnhwYkdyYmFrcHJ0MnNqYkk1cytHeGhiY2x0TUc2VmJ2cHVYbS9BYnlKd2duRGhjRUJ4blhINWNWUnlybklHYzE1enRYTUtkRjUwc1hRRGRWUjFwSFh6ZFVCMmpYYllkaUozYTNlemQvbDNQM2lEZU1aNENIbEplWWw1eDNrRWVrRjZmSHExZXU1NkpYdGNlNUY3eEh2M2V5bDhXWHlJZkxaODRud09mVGg5WVgySmZiQjkxWDM1ZlJ4K1BuNWVmbjUrbkg2NWZ0Uis3MzRJZnlCL04zOU1mMkYvZEgrR2Y1Wi9wbiswZjhGL3pYL1hmK0IvNkgvdmYvVi8rWC84Zi81Ly8zLytmL3gvK1gvMWYrOS82SC9nZjlkL3pYL0JmN1IvcG4rV2Y0Wi9kSDloZjB4L04zOGdmd2gvNzM3VWZybCtuSDUrZmw1K1BuNGNmdmw5MVgyd2ZZbDlZWDA0ZlE1OTRueTJmSWg4V1h3cGZQZDd4SHVSZTF4N0pYdnVlclY2ZkhwQmVnUjZ4M21KZVVsNUNIbkdlSU40UDNqNWQ3TjNhM2NpZDloMmpYWkFkdk4xcEhWVWRRTjFzWFJlZEFwMHRYTmVjd1p6cm5KVWN2bHhuWEZBY2VGd2duQWljTUJ2WG0vNmJwVnVNRzdKYldGdCtHeU9iQ05zdDJ0S2E5dHFiR3I4YVl0cEdXbWxhREZvdkdkRlo4NW1WbWJkWldKbDUyUnJaTzVqY0dQeFluRmk4R0Z1WWV0Z1oyRGlYMTFmMWw1UFhzWmRQVjJ6WENoY25Gc1BXNEZhODFsaldkTllRbGl3VngxWGlWYjBWVjlWeVZReVZKcFRBVk5vVXM1Uk0xR1hVUHBQWFUrL1RpQk9nRTNnVEQ5TW5VdjZTbGRLczBrT1NXbEl3MGNjUjNSR3pFVWpSWHBFMEVNbFEzbEN6VUVnUVhOQXhUOFdQMmMrdHowSFBWWThwRHZ5T2o4NmpEbllPQ1E0YnplNU5nTTJUVFdXTk40ekpqTnRNclF4K3pCQk1JWXZ6QzRRTGxRdG1DemJLeDRyWVNxaktlVW9KaWhuSjZjbTV5VW5KV2NrcGlQa0lpTWlZU0dmSU53ZkdSOVdIcE1kenh3TEhFWWJnaHE5R2ZnWU14aHRGNmNXNFJVYkZWVVVqaFBIRWdBU09SRnlFS3NQNHc0YkRsTU5pd3pEQy9zS01ncHFDYUVJMlFjUUIwY0dmZ1cyQk8wREpBTmJBcElCeVFBQUFEZi9idjZsL2R6OEUveEsrNEw2dWZudytDZjRYL2VXOXM3MUJmVTk5SFh6cmZMbDhSM3hWZkNPNzhmdUFPNDU3WExzcSt2bDZoL3FXZW1UNk0zbkNPZEQ1bjdsdXVUMTR6SGpiZUtxNGVmZ0pPQmgzNS9lM2QwYzNWcmNtZHZaMmhuYVdkbVoyTnJYRzlkZDFwL1Y0dFFsMUdqVHJOTHcwVFRSZXRDL3p3WFBUTTZUemRyTUlzeHF5N1BLL2NsSHlaSEkzTWNveDNUR3djVU94VnpFcXNQNXdrbkNtY0hxd0R2QWpiL2d2ak8raDczYnZEQzhocnZkdWpTNmpMbmt1RDI0bDdmeXRrMjJxYlVHdFdPMHdiTWdzNEN5NExGQnNhT3dCckJwcjgydU1xNllyZitzWnF6T3F6ZXJvYW9NcW5lcDQ2aFFxTDZuTGFlZHBnMm1mNlh4cEdTazJLTk5vOE9pT3FLeG9TcWhvNkFlb0ptZkZaK1NuaENlajUwUG5aQ2NFcHlWbXhtYm5wb2ptcXFaTXBtN21FU1l6NWRibCtlV2RaWUVscFNWSlpXMmxFbVUzWk55a3dpVG41STNrdENSYTVFR2thS1FRSkRlajM2UEg0L0FqbU9PQjQ2c2pWS04rb3lpakV1TTlvdWlpMCtML1lxc2lseUtEWXJBaVhPSktJbmVpSldJVFlnSGlNR0hmWWM2aC9pR3Q0WjNoam1HL0lXL2hZU0ZTNFVTaGR1RXBJUnZoRHlFQ1lUWGc2ZURlSU5LZ3g2RDhvTElncCtDZDRKUWdpdUNCNExrZ2NLQm9vR0NnV1NCUjRFc2dSR0IrSURnZ01tQXRJQ2ZnSXlBZW9CcWdGcUFUSUEvZ0RPQUtZQWdnQmlBRVlBTGdBZUFCSUFDZ0FHQUFvQUVnQWVBQzRBUmdCaUFJSUFwZ0RPQVA0Qk1nRnFBYW9CNmdJeUFuNEMwZ01tQTRJRDRnQkdCTElGSGdXU0Jnb0dpZ2NLQjVJRUhnaXVDVUlKM2dwK0N5SUx5Z2g2RFNvTjRnNmVEMTRNSmhEeUViNFNraE51RUVvVkxoWVNGdjRYOGhUbUdkNGEzaHZpR09vZDloOEdIQjRoTmlKV0kzb2dvaVhPSndJa05pbHlLcklyOWlrK0xvb3YyaTB1TW9vejZqRktOckkwSGptT093STRmajM2UDNvOUFrS0tRQnBGcmtkQ1JONUtma2dpVGNwUGRrMG1VdHBRbGxaU1ZCSloxbHVlV1c1ZlBsMFNZdTVneW1hcVpJNXFlbWhtYmxac1NuSkNjRDUyUG5SQ2VrcDRWbjVtZkhxQ2pvQ3Foc2FFNm9zT2lUYVBZbzJTazhhUi9wUTJtbmFZdHA3Nm5VS2pqcUhlcERLcWhxamVyenF0bXJQK3NtSzB5cnMydWFhOEdzS093UWJIZ3NZQ3lJTFBCczJPMEJyV3B0VTIyOHJhWHR6MjQ1TGlNdVRTNjNicUd1ekM4Mjd5SHZUTys0TDZOdnp2QTZzQ1p3VW5DK2NLcXcxekVEc1hCeFhUR0tNZmN4NUhJUjhuOXliUEthc3Npek5yTWs4MU16Z1hQdjg5NjBEVFI4TkdzMG1qVEpkVGkxSi9WWGRZYjE5clhtZGhaMlJuYTJkcVoyMXJjSE4zZDNaL2VZZDhrNE9mZ3F1RnQ0akhqOWVPNjVIN2xRK1lJNTgzbmsraFo2Ui9xNWVxcjYzTHNPZTBBN3NmdWp1OVY4QjN4NWZHdDhuWHpQZlFGOWM3MWx2WmY5eWY0OFBpNStZTDZTdnNUL056OHBmMXUvamYvQVFDQUFBSUFRQUFEQU1BQUJBQWdBQVVBb0FBR0FHQUFCd0RnQUFnQUVBQUpBSkFBQ2dCUUFBc0EwQUFNQURBQURRQ3dBQTRBY0FBUEFQQUFFUUNJQUJJQVNBQVRBTWdBRkFBb0FCVUFxQUFXQUdnQUZ3RG9BQmtBbUFBYUFGZ0FHd0RZQUJ3QU9BQWRBTGdBSGdCNEFCOEErQUFoQUlRQUlnQkVBQ01BeEFBbEFLUUFKZ0JrQUNjQTVBQXBBSlFBS2dCVUFDc0ExQUFzQURRQUxRQzBBQzRBZEFBdkFQUUFNUUNNQURJQVRBQXpBTXdBTlFDc0FEWUFiQUEzQU93QU9RQ2NBRG9BWEFBN0FOd0FQUUM4QUQ0QWZBQS9BUHdBUVFDQ0FFTUF3Z0JGQUtJQVJnQmlBRWNBNGdCSkFKSUFTZ0JTQUVzQTBnQk5BTElBVGdCeUFFOEE4Z0JSQUlvQVV3REtBRlVBcWdCV0FHb0FWd0RxQUZrQW1nQmJBTm9BWFFDNkFGNEFlZ0JmQVBvQVlRQ0dBR01BeGdCbEFLWUFad0RtQUdrQWxnQnJBTllBYlFDMkFHNEFkZ0J2QVBZQWNRQ09BSE1BemdCMUFLNEFkd0R1QUhrQW5nQjdBTjRBZlFDK0FIOEEvZ0NEQU1FQWhRQ2hBSWNBNFFDSkFKRUFpd0RSQUkwQXNRQ1BBUEVBa3dESkFKVUFxUUNYQU9rQW13RFpBSjBBdVFDZkFQa0Fvd0RGQUtjQTVRQ3JBTlVBclFDMUFLOEE5UUN6QU0wQXR3RHRBTHNBM1FDL0FQMEF4d0RqQU1zQTB3RFBBUE1BMXdEckFOOEErd0R2QVBjQUFRQkFBQUlBSUFBREFHQUFCQUFRQUFVQVVBQUdBREFBQndCd0FBa0FTQUFLQUNnQUN3Qm9BQXdBR0FBTkFGZ0FEZ0E0QUE4QWVBQVJBRVFBRWdBa0FCTUFaQUFWQUZRQUZnQTBBQmNBZEFBWkFFd0FHZ0FzQUJzQWJBQWRBRndBSGdBOEFCOEFmQUFoQUVJQUl3QmlBQ1VBVWdBbUFESUFKd0J5QUNrQVNnQXJBR29BTFFCYUFDNEFPZ0F2QUhvQU1RQkdBRE1BWmdBMUFGWUFOd0IyQURrQVRnQTdBRzRBUFFCZUFEOEFmZ0JEQUdFQVJRQlJBRWNBY1FCTEFHa0FUUUJaQUU4QWVRQlRBR1VBVndCMUFGc0FiUUJmQUgwQVp3QnpBRzhBZXdBRkFFR01Id3NCQVFCQnBCOExEZ0VBQUFBQkFBQUE2QkVBQUFBRUFFRzhId3NCQVFCQnl4OExCUXIvLy8vL0FFR1FJQXZNQTRBUEFBQVlBQlVBR0FBNUFEQUFPUUFJQUFRQUF3QU9BQWNBQlFBbEFDQUFKUUJrQUZBQVpBQlNBRTRBVWdBZEFRUUJIUUVHQUFNQUFnQUpBQVVBQXdCZUFGNEFYZ0JNQkJvRVRBUUdBQWdBQ2dBTUFBNEFFQUNBQWdBRElBSWdBa0FDUUFKQUFrQUNnQ3lBTEFBdEFDMEFMUUF0QUNTQUl3QWpnQ0lBSW9BaFpHRjBZVnN3WFNBOVBTQjJZV3d3QUcxaGFXNHVZd0J3Y205alpYTnpYMlJoZEdFQVpHRjBZVnN4TURCZElEMDlJSFpoYkRFd01BQmtZWFJoV3pJd01EQmRJRDA5SUhaaGJESXdNREFBY0hKdlkyVnpjMTlrWVhSaE9pQmtZWFJoSUQwOUlFNVZURXdnQUdSaGRHRmZiR1Z1WjNSb0lENDlJREFBZDJWaWNuUmpMMk52YlcxdmJsOWhkV1JwYnk5MllXUXZkbUZrWDJacGJIUmxjbUpoYm1zdVl3QlhaV0pTZEdOV1lXUmZRMkZzWTNWc1lYUmxSbVZoZEhWeVpYTUFaR0YwWVY5c1pXNW5kR2dnUEQwZ01qUXdBR1JoZEdGZmFXNGdJVDBnVGxWTVRBQk1iMmRQWmtWdVpYSm5lUUJrWVhSaFgyeGxibWQwYUNBK0lEQUFZMmhoYm01bGJDQThJR3RPZFcxRGFHRnVibVZzY3dCM1pXSnlkR012WTI5dGJXOXVYMkYxWkdsdkwzWmhaQzkyWVdSZmMzQXVZd0JYWldKU2RHTldZV1JmUm1sdVpFMXBibWx0ZFcwPSI7SS5yZWFkeT1uZXcgUHJvbWlzZShmdW5jdGlvbihhLGIpe0c9YTt9KTt2YXIgSyxMPXt9O2ZvcihLIGluIEkpSS5oYXNPd25Qcm9wZXJ0eShLKSYmKExbS109SVtLXSk7SS5hcmd1bWVudHM9W10sSS50aGlzUHJvZ3JhbT0iLi90aGlzLnByb2dyYW0iLEkucXVpdD1mdW5jdGlvbihhLGIpe3Rocm93IGJ9LEkucHJlUnVuPVtdLEkucG9zdFJ1bj1bXTt2YXIgTT0hMSxOPSExLE89ITEsUD0hMTtpZihNPSJvYmplY3QiPT10eXBlb2Ygd2luZG93LE49ImZ1bmN0aW9uIj09dHlwZW9mIGltcG9ydFNjcmlwdHMsUD0ib2JqZWN0Ij09dHlwZW9mIHByb2Nlc3MmJiJmdW5jdGlvbiI9PXR5cGVvZiByZXF1aXJlLE89UCYmIU0mJiFOLE8pezE8cHJvY2Vzcy5hcmd2Lmxlbmd0aCYmKEkudGhpc1Byb2dyYW09cHJvY2Vzcy5hcmd2WzFdLnJlcGxhY2UoL1xcL2csIi8iKSksSS5hcmd1bWVudHM9cHJvY2Vzcy5hcmd2LnNsaWNlKDIpLCJ1bmRlZmluZWQiIT10eXBlb2YgbW9kdWxlJiYobW9kdWxlLmV4cG9ydHM9SSkscHJvY2Vzcy5vbigidW5jYXVnaHRFeGNlcHRpb24iLGZ1bmN0aW9uKGEpe2lmKCEoYSBpbnN0YW5jZW9mIEMpKXRocm93IGF9KSxwcm9jZXNzLm9uKCJ1bmhhbmRsZWRSZWplY3Rpb24iLEYpLEkucXVpdD1mdW5jdGlvbihhKXtwcm9jZXNzLmV4aXQoYSk7fSxJLmluc3BlY3Q9ZnVuY3Rpb24oKXtyZXR1cm4gIltFbXNjcmlwdGVuIE1vZHVsZSBvYmplY3RdIn07fWVsc2UgaWYoTXx8TilJLnNldFdpbmRvd1RpdGxlPWZ1bmN0aW9uKGEpe2RvY3VtZW50LnRpdGxlPWE7fTtlbHNlO3ZhciBRPUkucHJpbnR8fCgidW5kZWZpbmVkIj09dHlwZW9mIGNvbnNvbGU/InVuZGVmaW5lZCI9PXR5cGVvZiBwcmludD9udWxsOnByaW50OmNvbnNvbGUubG9nLmJpbmQoY29uc29sZSkpLFI9SS5wcmludEVycnx8KCJ1bmRlZmluZWQiPT10eXBlb2YgcHJpbnRFcnI/InVuZGVmaW5lZCIhPXR5cGVvZiBjb25zb2xlJiZjb25zb2xlLndhcm4uYmluZChjb25zb2xlKXx8UTpwcmludEVycik7Zm9yKEsgaW4gTClMLmhhc093blByb3BlcnR5KEspJiYoSVtLXT1MW0tdKTtMPXZvaWQgMDt2YXIgUz17ImY2NC1yZW0iOmZ1bmN0aW9uKGEsYil7cmV0dXJuIGElYn0sZGVidWdnZXI6ZnVuY3Rpb24oKXtkZWJ1Z2dlcn19LFY9MCxXPWZ1bmN0aW9uKCl7cmV0dXJuIFZ9OyJvYmplY3QiIT10eXBlb2YgV2ViQXNzZW1ibHkmJlIoIm5vIG5hdGl2ZSB3YXNtIHN1cHBvcnQgZGV0ZWN0ZWQiKTt2YXIgWCxaLCQsXyxjYSxnYT0hMSxpYT0idW5kZWZpbmVkIj09dHlwZW9mIFRleHREZWNvZGVyP3ZvaWQgMDpuZXcgVGV4dERlY29kZXIoInV0ZjgiKTsidW5kZWZpbmVkIj09dHlwZW9mIFRleHREZWNvZGVyP3ZvaWQgMDpuZXcgVGV4dERlY29kZXIoInV0Zi0xNmxlIik7dmFyIGthPTY1NTM2LGxhPTczMjgsbWE9NTI0Mjg4MCxuYT1JLlRPVEFMX01FTU9SWXx8MTY3NzcyMTY7bmE8bWEmJlIoIlRPVEFMX01FTU9SWSBzaG91bGQgYmUgbGFyZ2VyIHRoYW4gVE9UQUxfU1RBQ0ssIHdhcyAiK25hKyIhIChUT1RBTF9TVEFDSz0iK21hKyIpIiksSS5idWZmZXI/Wj1JLmJ1ZmZlcjoib2JqZWN0Ij09dHlwZW9mIFdlYkFzc2VtYmx5JiYiZnVuY3Rpb24iPT10eXBlb2YgV2ViQXNzZW1ibHkuTWVtb3J5PyhYPW5ldyBXZWJBc3NlbWJseS5NZW1vcnkoe2luaXRpYWw6bmEva2EsbWF4aW11bTpuYS9rYX0pLFo9WC5idWZmZXIpOlo9bmV3IEFycmF5QnVmZmVyKG5hKSxsKCksY2FbbGE+PjJdPTUyNTAyNDA7dmFyIG9hPVtdLHBhPVtdLHFhPVtdLHJhPVtdLE9hPTAsUWE9bnVsbDtJLnByZWxvYWRlZEltYWdlcz17fSxJLnByZWxvYWRlZEF1ZGlvcz17fTsoKGZ1bmN0aW9uKGEpe3JldHVybiAwPT09YS5pbmRleE9mKCJkYXRhOmFwcGxpY2F0aW9uL29jdGV0LXN0cmVhbTtiYXNlNjQsIil9KSkoSil8fEYoIndhc21CaW5hcnlGaWxlIGhhcyB0byBiZSBhIGRhdGEtVVJJIiksSS5hc209ZnVuY3Rpb24oYSxiKXtiLm1lbW9yeT1YLGIudGFibGU9bmV3IFdlYkFzc2VtYmx5LlRhYmxlKHtpbml0aWFsOjMyLG1heGltdW06MzIsZWxlbWVudDoiYW55ZnVuYyJ9KSxiLl9fbWVtb3J5X2Jhc2U9MTAyNCxiLl9fdGFibGVfYmFzZT0wO3ZhciBjPXcoYik7cmV0dXJuIGN9O3ZhciBTYT17YnVmZmVyczpbbnVsbCxbXSxbXV0scHJpbnRDaGFyOmZ1bmN0aW9uKGEsYil7dmFyIGM9U2EuYnVmZmVyc1thXTswPT09Ynx8MTA9PT1iPygoMT09PWE/UTpSKShlKGMsMCkpLGMubGVuZ3RoPTApOmMucHVzaChiKTt9LHZhcmFyZ3M6MCxnZXQ6ZnVuY3Rpb24oKXtTYS52YXJhcmdzKz00O3ZhciBhPWNhW1NhLnZhcmFyZ3MtND4+Ml07cmV0dXJuIGF9LGdldFN0cjpmdW5jdGlvbigpe3ZhciBhPWYoU2EuZ2V0KCkpO3JldHVybiBhfSxnZXQ2NDpmdW5jdGlvbigpe3ZhciBhPVNhLmdldCgpO1NhLmdldCgpO3JldHVybiBhfSxnZXRaZXJvOmZ1bmN0aW9uKCl7U2EuZ2V0KCk7fX0sVGE9SS5hc20oe30se2Fib3J0OkYsc2V0VGVtcFJldDA6ZnVuY3Rpb24oYSl7Vj1hO30sZ2V0VGVtcFJldDA6VyxfX19hc3NlcnRfZmFpbDpmdW5jdGlvbihhLGIsYyxkKXtGKCJBc3NlcnRpb24gZmFpbGVkOiAiK2YoYSkrIiwgYXQ6ICIrW2I/ZihiKToidW5rbm93biBmaWxlbmFtZSIsYyxkP2YoZCk6InVua25vd24gZnVuY3Rpb24iXSk7fSxfX19zZXRFcnJObzpBLF9fX3N5c2NhbGwxNDA6ZnVuY3Rpb24oYSxiKXtTYS52YXJhcmdzPWI7dHJ5e3ZhciBjPVNhLmdldFN0cmVhbUZyb21GRCgpLGQ9U2EuZ2V0KCksZT1TYS5nZXQoKSxmPVNhLmdldCgpLGc9U2EuZ2V0KCk7cmV0dXJuIDB9Y2F0Y2goYSl7cmV0dXJuICJ1bmRlZmluZWQiIT10eXBlb2YgRlMmJmEgaW5zdGFuY2VvZiBGUy5FcnJub0Vycm9yfHxGKGEpLC1hLmVycm5vfX0sX19fc3lzY2FsbDE0Njp4LF9fX3N5c2NhbGw1NDpmdW5jdGlvbihhLGIpe1NhLnZhcmFyZ3M9Yjt0cnl7cmV0dXJuIDB9Y2F0Y2goYSl7cmV0dXJuICJ1bmRlZmluZWQiIT10eXBlb2YgRlMmJmEgaW5zdGFuY2VvZiBGUy5FcnJub0Vycm9yfHxGKGEpLC1hLmVycm5vfX0sX19fc3lzY2FsbDY6ZnVuY3Rpb24oYSxiKXtTYS52YXJhcmdzPWI7dHJ5e1NhLmdldFN0cmVhbUZyb21GRCgpO3JldHVybiAwfWNhdGNoKGEpe3JldHVybiAidW5kZWZpbmVkIiE9dHlwZW9mIEZTJiZhIGluc3RhbmNlb2YgRlMuRXJybm9FcnJvcnx8RihhKSwtYS5lcnJub319LF9lbXNjcmlwdGVuX2dldF9oZWFwX3NpemU6eSxfZW1zY3JpcHRlbl9tZW1jcHlfYmlnOnosX2Vtc2NyaXB0ZW5fcmVzaXplX2hlYXA6ZnVuY3Rpb24oYSl7QigpO30sYWJvcnRPbkNhbm5vdEdyb3dNZW1vcnk6QixmbHVzaF9OT19GSUxFU1lTVEVNOmZ1bmN0aW9uKCl7dmFyIGE9SS5fZmZsdXNoO2EmJmEoMCk7dmFyIGI9U2EuYnVmZmVycztiWzFdLmxlbmd0aCYmU2EucHJpbnRDaGFyKDEsMTApLGJbMl0ubGVuZ3RoJiZTYS5wcmludENoYXIoMiwxMCk7fSx0ZW1wRG91YmxlUHRyOjczNDQsRFlOQU1JQ1RPUF9QVFI6bGF9LFopO0kuYXNtPVRhO0kuX19fZXJybm9fbG9jYXRpb249ZnVuY3Rpb24oKXtyZXR1cm4gSS5hc20uX19fZXJybm9fbG9jYXRpb24uYXBwbHkobnVsbCxhcmd1bWVudHMpfTtJLl9mcmVlPWZ1bmN0aW9uKCl7cmV0dXJuIEkuYXNtLl9mcmVlLmFwcGx5KG51bGwsYXJndW1lbnRzKX07SS5fbWFpbj1mdW5jdGlvbigpe3JldHVybiBJLmFzbS5fbWFpbi5hcHBseShudWxsLGFyZ3VtZW50cyl9O0kuX21hbGxvYz1mdW5jdGlvbigpe3JldHVybiBJLmFzbS5fbWFsbG9jLmFwcGx5KG51bGwsYXJndW1lbnRzKX07SS5fbWVtY3B5PWZ1bmN0aW9uKCl7cmV0dXJuIEkuYXNtLl9tZW1jcHkuYXBwbHkobnVsbCxhcmd1bWVudHMpfTtJLl9tZW1zZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gSS5hc20uX21lbXNldC5hcHBseShudWxsLGFyZ3VtZW50cyl9O0kuX3Byb2Nlc3NfZGF0YT1mdW5jdGlvbigpe3JldHVybiBJLmFzbS5fcHJvY2Vzc19kYXRhLmFwcGx5KG51bGwsYXJndW1lbnRzKX07SS5fc2Jyaz1mdW5jdGlvbigpe3JldHVybiBJLmFzbS5fc2Jyay5hcHBseShudWxsLGFyZ3VtZW50cyl9O0kuX3NldG1vZGU9ZnVuY3Rpb24oKXtyZXR1cm4gSS5hc20uX3NldG1vZGUuYXBwbHkobnVsbCxhcmd1bWVudHMpfTtJLmVzdGFibGlzaFN0YWNrU3BhY2U9ZnVuY3Rpb24oKXtyZXR1cm4gSS5hc20uZXN0YWJsaXNoU3RhY2tTcGFjZS5hcHBseShudWxsLGFyZ3VtZW50cyl9O3ZhciBjYj1JLnN0YWNrQWxsb2M9ZnVuY3Rpb24oKXtyZXR1cm4gSS5hc20uc3RhY2tBbGxvYy5hcHBseShudWxsLGFyZ3VtZW50cyl9LGRiPUkuc3RhY2tSZXN0b3JlPWZ1bmN0aW9uKCl7cmV0dXJuIEkuYXNtLnN0YWNrUmVzdG9yZS5hcHBseShudWxsLGFyZ3VtZW50cyl9LGViPUkuc3RhY2tTYXZlPWZ1bmN0aW9uKCl7cmV0dXJuIEkuYXNtLnN0YWNrU2F2ZS5hcHBseShudWxsLGFyZ3VtZW50cyl9O0kuZHluQ2FsbF9paT1mdW5jdGlvbigpe3JldHVybiBJLmFzbS5keW5DYWxsX2lpLmFwcGx5KG51bGwsYXJndW1lbnRzKX07SS5keW5DYWxsX2lpaT1mdW5jdGlvbigpe3JldHVybiBJLmFzbS5keW5DYWxsX2lpaS5hcHBseShudWxsLGFyZ3VtZW50cyl9O0kuZHluQ2FsbF9paWlpPWZ1bmN0aW9uKCl7cmV0dXJuIEkuYXNtLmR5bkNhbGxfaWlpaS5hcHBseShudWxsLGFyZ3VtZW50cyl9O0kuZHluQ2FsbF9paWlpaWlpaT1mdW5jdGlvbigpe3JldHVybiBJLmFzbS5keW5DYWxsX2lpaWlpaWlpLmFwcGx5KG51bGwsYXJndW1lbnRzKX07SS5keW5DYWxsX2lpaWlpaWlpaT1mdW5jdGlvbigpe3JldHVybiBJLmFzbS5keW5DYWxsX2lpaWlpaWlpaS5hcHBseShudWxsLGFyZ3VtZW50cyl9O0kuZHluQ2FsbF9qaWppPWZ1bmN0aW9uKCl7cmV0dXJuIEkuYXNtLmR5bkNhbGxfamlqaS5hcHBseShudWxsLGFyZ3VtZW50cyl9O0kuZHluQ2FsbF92PWZ1bmN0aW9uKCl7cmV0dXJuIEkuYXNtLmR5bkNhbGxfdi5hcHBseShudWxsLGFyZ3VtZW50cyl9O0kuZHluQ2FsbF92aT1mdW5jdGlvbigpe3JldHVybiBJLmFzbS5keW5DYWxsX3ZpLmFwcGx5KG51bGwsYXJndW1lbnRzKX07SS5keW5DYWxsX3ZpaWlpaWlpPWZ1bmN0aW9uKCl7cmV0dXJuIEkuYXNtLmR5bkNhbGxfdmlpaWlpaWkuYXBwbHkobnVsbCxhcmd1bWVudHMpfTtJLmFzbT1UYSxJLmNjYWxsPWQsSS5jd3JhcD1mdW5jdGlvbihhLGIsZSxmKXtlPWV8fFtdO3ZhciBnPWUuZXZlcnkoZnVuY3Rpb24oYSl7cmV0dXJuICJudW1iZXIiPT09YX0pO3JldHVybiAic3RyaW5nIiE9PWImJmcmJiFmP2MoYSk6ZnVuY3Rpb24oKXtyZXR1cm4gZChhLGIsZSxhcmd1bWVudHMpfX0sQy5wcm90b3R5cGU9bmV3IEVycm9yLEMucHJvdG90eXBlLmNvbnN0cnVjdG9yPUM7UWE9ZnVuY3Rpb24gYSgpe0kuY2FsbGVkUnVufHxEKCksSS5jYWxsZWRSdW58fChRYT1hKTt9LEkuY2FsbE1haW49ZnVuY3Rpb24oYSl7YT1hfHxbXTt2YXIgYj1hLmxlbmd0aCsxLGM9Y2IoNCooYisxKSk7Y2FbYz4+Ml09aihJLnRoaXNQcm9ncmFtKTtmb3IodmFyIGQ9MTtkPGI7ZCsrKWNhWyhjPj4yKStkXT1qKGFbZC0xXSk7Y2FbKGM+PjIpK2JdPTA7dHJ5e3ZhciBlPUkuX21haW4oYixjLDApO0UoZSwhMCk7fWNhdGNoKGEpe2lmKGEgaW5zdGFuY2VvZiBDKXJldHVybjtpZigiU2ltdWxhdGVJbmZpbml0ZUxvb3AiPT1hKXJldHVybiB2b2lkKEkubm9FeGl0UnVudGltZT0hMCk7dmFyIGY9YTthJiYib2JqZWN0Ij09dHlwZW9mIGEmJmEuc3RhY2smJihmPVthLGEuc3RhY2tdKSxSKCJleGNlcHRpb24gdGhyb3duOiAiK2YpLEkucXVpdCgxLGEpO31maW5hbGx5e319LEkucnVuPUQ7aWYoSS5hYm9ydD1GLEkucHJlSW5pdClmb3IoImZ1bmN0aW9uIj09dHlwZW9mIEkucHJlSW5pdCYmKEkucHJlSW5pdD1bSS5wcmVJbml0XSk7MDxJLnByZUluaXQubGVuZ3RoOylJLnByZUluaXQucG9wKCkoKTt2YXIgb2I9ITA7cmV0dXJuIEkubm9Jbml0aWFsUnVuJiYob2I9ITEpLEkubm9FeGl0UnVudGltZT0hMCxEKCksYS5yZWFkeX19KCk7CgogIC8vV2ViUlRDIFZBRCBJbnRlcmZhY2UgZm9yIFNFUElBIFdlYi1BdWRpbyBQcm9jZXNzb3INCiAgZnVuY3Rpb24gV2ViUnRjVm9pY2VBY3Rpdml0eURldGVjdG9yIChvcHRpb25zLCBpbml0Q2FsbGJhY2spIHsNCiAgCXRoaXMudmFkTW9kdWxlID0ge307DQogIAl0aGlzLm9wdGlvbnMgPSBvcHRpb25zIHx8IHt9Ow0KICAJDQogIAl2YXIgb25QcmludCA9IHRoaXMub3B0aW9ucy5vbkluZm8gfHwgdGhpcy5vcHRpb25zLm9uUHJpbnQgfHwgZnVuY3Rpb24odGV4dCl7IGNvbnNvbGUubG9nKCJWQUQgcHJpbnQiLCB0ZXh0KTsgfTsNCiAgCXZhciBvbkVycm9yID0gdGhpcy5vcHRpb25zLm9uRXJyb3IgfHwgdGhpcy5vcHRpb25zLm9uUHJpbnRFcnIgfHwgZnVuY3Rpb24odGV4dCl7IGNvbnNvbGUuZXJyb3IoIlZBRCBwcmludEVyciIsIHRleHQpOyB9Ow0KICAJdmFyIG9uU3RhdHVzID0gdGhpcy5vcHRpb25zLm9uU3RhdHVzTWVzc2FnZSB8fCB0aGlzLm9wdGlvbnMub25TZXRTdGF0dXMgfHwgZnVuY3Rpb24odGV4dCl7IGNvbnNvbGUubG9nKCJWQUQgc2V0U3RhdHVzIiwgdGV4dCk7IH07DQogIAl2YXIgdmFkTW9kZSA9ICh0aGlzLm9wdGlvbnMubW9kZSAhPSB1bmRlZmluZWQpPyB0aGlzLm9wdGlvbnMubW9kZSA6IDM7CS8vbW9kZXM6IDA9UXVhbGl0eSBtb2RlLCAxPUxvdyBiaXRyYXRlIG1vZGUsIDI9QWdncmVzc2l2ZSBtb2RlLCAzPVZlcnkgYWdncmVzc2l2ZSBtb2RlDQoNCiAgCWNvbnN0IHNlbGYgPSB0aGlzOw0KICAJV2ViUnRjVmFkKHsNCiAgCQlwcmVSdW46IFtdLA0KICAJCXBvc3RSdW46IFtdLA0KICAJCXByaW50OiBmdW5jdGlvbih0ZXh0KXsNCiAgCQkJaWYgKGFyZ3VtZW50cy5sZW5ndGggPiAxKSB0ZXh0ID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzKS5qb2luKCcgJyk7DQogIAkJCW9uUHJpbnQodGV4dCk7DQogIAkJfSwNCiAgCQlwcmludEVycjogZnVuY3Rpb24odGV4dCl7DQogIAkJCWlmIChhcmd1bWVudHMubGVuZ3RoID4gMSkgdGV4dCA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cykuam9pbignICcpOw0KICAJCQlvbkVycm9yKHRleHQpOw0KICAJCX0sDQogIAkJc2V0U3RhdHVzOiBmdW5jdGlvbih0ZXh0KXsNCiAgCQkJaWYgKGFyZ3VtZW50cy5sZW5ndGggPiAxKSB0ZXh0ID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzKS5qb2luKCcgJyk7DQogIAkJCW9uU3RhdHVzKHRleHQpOw0KICAJCX0sDQogIAkJdG90YWxEZXBlbmRlbmNpZXM6IDAsDQogIAkJbW9uaXRvclJ1bkRlcGVuZGVuY2llczogZnVuY3Rpb24obGVmdCl7DQogIAkJCXRoaXMudG90YWxEZXBlbmRlbmNpZXMgPSBNYXRoLm1heCh0aGlzLnRvdGFsRGVwZW5kZW5jaWVzLCBsZWZ0KTsNCiAgCQkJdGhpcy5zZXRTdGF0dXMobGVmdCA/ICdQcmVwYXJpbmcuLi4gKCcgKyAodGhpcy50b3RhbERlcGVuZGVuY2llcyAtIGxlZnQpICsgJy8nICsgdGhpcy50b3RhbERlcGVuZGVuY2llcyArICcpJyA6ICdBbGwgZG93bmxvYWRzIGNvbXBsZXRlLicpOw0KICAJCX0sDQogIAkJbm9Jbml0aWFsUnVuOiB0cnVlDQogIAl9KQ0KICAJLnRoZW4oZnVuY3Rpb24oTW9kdWxlKXsNCiAgCQl2YXIgVmFkID0gew0KICAJCQl3YXNtTW9kdWxlOiBNb2R1bGUNCiAgCQkJLy9zZXRNb2RlOiAuLi4sDQogIAkJCS8vZ2V0TW9kZTogLi4uLA0KICAJCQkvL3Byb2Nlc3M6IC4uLg0KICAJCX07DQogIAkJDQogIAkJLy9zZXR1cA0KICAJCQ0KICAJCXZhciBtYWluID0gTW9kdWxlLmN3cmFwKCdtYWluJyk7DQogIAkJaWYgKG1haW4oKSAhPSAxKXsNCiAgCQkJb25FcnJvcigiVkFEICdtYWluJyBlcnJvciIpOw0KICAJCQl0aHJvdyB7bmFtZTogIlZhZE1vZHVsZUVycm9yIiwgbWVzc2FnZTogIkZhaWxlZCB0byBpbml0aWFsaXplIHZpYSAnbWFpbigpJyJ9Ow0KICAJCX0NCg0KICAJCVZhZC5zZXRNb2RlID0gTW9kdWxlLmN3cmFwKCdzZXRtb2RlJywgJ251bWJlcicsIFsnbnVtYmVyJ10pOw0KICAJCVZhZC5nZXRNb2RlID0gZnVuY3Rpb24oKXsgcmV0dXJuIHZhZE1vZGU7IH07DQogIAkJDQogIAkJaWYgKFZhZC5zZXRNb2RlKHZhZE1vZGUpICE9IDApew0KICAJCQlvbkVycm9yKCJWQUQgJ3NldE1vZGUnIGVycm9yIik7DQogIAkJCXRocm93IHtuYW1lOiAiVmFkTW9kdWxlRXJyb3IiLCBtZXNzYWdlOiAiRmFpbGVkIHRvIHNldCBtb2RlIn07DQogIAkJfQ0KICAJCW9uUHJpbnQoIlZBRCBtb2RlOiAiICsgdmFkTW9kZSk7DQogIAkJDQogIAkJVmFkLnByb2Nlc3MgPSBNb2R1bGUuY3dyYXAoJ3Byb2Nlc3NfZGF0YScsICdudW1iZXInLCBbJ251bWJlcicsICdudW1iZXInLCAnbnVtYmVyJywgJ251bWJlcicsICdudW1iZXInLCAnbnVtYmVyJ10pOw0KICAJCS8vYXJndW1lbnRzOiAoZGF0YUhlYXAuYnl0ZU9mZnNldCwgc2FtcGxlTGVuZ3RoLCBzYW1wbGVSYXRlLCBzYW1wbGVzWzBdLCBzYW1wbGVzWzEwMF0sIHNhbXBsZXNbMjAwMF0pDQogIAkJLy9yZXF1aXJlbWVudHMgZm9yIHNhbXBsZVJhdGU6IDgwMDAsIDE2MDAwLCAzMjAwMCwgNDgwMDAgLSBzYW1wbGVMZW5ndGg6IHNhbXBsZVJhdGUvMTAwMCAqICgxMHwyMHwzMCkgPT4gNDhrIC0gNDgwLCA5NjAsIDE0NDAgOyAxNmsgLSAxNjAsIDMyMCwgNDgwIDsgDQogIAkJDQogIAkJVmFkLmdldFZvaWNlQWN0aXZpdHkgPSBmdW5jdGlvbihzYW1wbGVSYXRlLCBzYW1wbGVzSW50MTYpew0KICAJCQkvL0dldCBkYXRhIGJ5dGUgc2l6ZSwgYWxsb2NhdGUgbWVtb3J5IG9uIEVtc2NyaXB0ZW4gaGVhcCwgYW5kIGdldCBwb2ludGVyDQogIAkJCWxldCBuRGF0YUJ5dGVzID0gc2FtcGxlc0ludDE2Lmxlbmd0aCAqIHNhbXBsZXNJbnQxNi5CWVRFU19QRVJfRUxFTUVOVDsNCiAgCQkJbGV0IGRhdGFQdHIgPSBNb2R1bGUuX21hbGxvYyhuRGF0YUJ5dGVzKTsNCg0KICAJCQkvL0NvcHkgZGF0YSB0byBFbXNjcmlwdGVuIGhlYXAgKGRpcmVjdGx5IGFjY2Vzc2VkIGZyb20gTW9kdWxlLkhFQVBVOCkNCiAgCQkJbGV0IGRhdGFIZWFwID0gbmV3IFVpbnQ4QXJyYXkoTW9kdWxlLkhFQVBVOC5idWZmZXIsIGRhdGFQdHIsIG5EYXRhQnl0ZXMpOw0KICAJCQlkYXRhSGVhcC5zZXQobmV3IFVpbnQ4QXJyYXkoc2FtcGxlc0ludDE2LmJ1ZmZlcikpOw0KDQogIAkJCS8vQ2FsbCBmdW5jdGlvbiBhbmQgZ2V0IHJlc3VsdA0KICAJCQlsZXQgcmVzdWx0ID0gVmFkLnByb2Nlc3MoZGF0YUhlYXAuYnl0ZU9mZnNldCwgc2FtcGxlc0ludDE2Lmxlbmd0aCwgc2FtcGxlUmF0ZSwgDQogIAkJCQlzYW1wbGVzSW50MTZbMF0sIHNhbXBsZXNJbnQxNlsxMDBdLCBzYW1wbGVzSW50MTZbMjAwMF0pOw0KDQogIAkJCS8vRnJlZSBtZW1vcnkNCiAgCQkJTW9kdWxlLl9mcmVlKGRhdGFIZWFwLmJ5dGVPZmZzZXQpOw0KICAJCQlyZXR1cm4gcmVzdWx0OwkJLy8tMTogRVJST1IsIDA6IE5vIGFjdGl2ZSBzcGVlY2gsIDE6IEFjdGl2ZSBzcGVlY2gJKGNvcmUgZnVuY3Rpb24gZ2l2ZXMgMS02IGJ1dCBvdXRwdXQgaGVyZSBpcyAxIGZvciBhbGwpDQogIAkJfTsNCiAgCQkNCiAgCQlyZXR1cm4gVmFkOw0KICAJfSkNCiAgCS50aGVuKGZ1bmN0aW9uKHZhZCl7DQogIAkJc2VsZi52YWRNb2R1bGUgPSB2YWQ7DQogIAkJaWYgKGluaXRDYWxsYmFjaykgaW5pdENhbGxiYWNrKHNlbGYudmFkTW9kdWxlKTsNCiAgCX0pOw0KICAJLy9Nb2R1bGUuc2V0U3RhdHVzKCdEb3dubG9hZGluZy4uLicpOw0KICB9CgogIC8vaW1wb3J0ICcuL3NoYXJlZC9tZXlkYS5taW4uY29tcHJlc3NlZC5qcyc7CS8vd2UgaW1wb3J0IHRoaXMgb24gZGVtYW5kIGJlbG93DQoNCiAgdmFyIHZhZE1vZHVsZTsNCg0KICBvbm1lc3NhZ2UgPSBmdW5jdGlvbihlKSB7DQogICAgICAvL0F1ZGlvIHdvcmtlciBpbnRlcmZhY2UNCiAgCS8vY29uc29sZS5sb2coIldlYlJ0Y1ZhZFdvcmtlciBvbm1lc3NhZ2UiLCBlLmRhdGEpOwkJLy9ERUJVRw0KICAJaWYgKGUuZGF0YS5jdHJsKXsNCiAgCQlzd2l0Y2ggKGUuZGF0YS5jdHJsLmFjdGlvbil7DQogIAkJCWNhc2UgImNvbnN0cnVjdCI6DQogIAkJCQljb25zdHJ1Y3RXb3JrZXIoZS5kYXRhLmN0cmwub3B0aW9ucyk7DQogIAkJCQlicmVhazsNCiAgCQkJY2FzZSAicHJvY2VzcyI6DQogIAkJCQlwcm9jZXNzJDEoZS5kYXRhLmN0cmwuZGF0YSk7DQogIAkJCQlicmVhazsNCiAgCQkJY2FzZSAiaGFuZGxlIjoNCiAgCQkJCWhhbmRsZUV2ZW50KGUuZGF0YS5jdHJsLmRhdGEpOw0KICAJCQkJYnJlYWs7DQogIAkJCWNhc2UgInN0YXJ0IjoNCiAgCQkJCXN0YXJ0KGUuZGF0YS5jdHJsLm9wdGlvbnMpOw0KICAJCQkJYnJlYWs7DQogIAkJCWNhc2UgInN0b3AiOg0KICAJCQkJc3RvcChlLmRhdGEuY3RybC5vcHRpb25zKTsNCiAgCQkJCWJyZWFrOw0KICAJCQljYXNlICJyZXNldCI6DQogIAkJCQlyZXNldChlLmRhdGEuY3RybC5vcHRpb25zKTsNCiAgCQkJCWJyZWFrOw0KICAJCQljYXNlICJyZWxlYXNlIjoNCiAgCQkJY2FzZSAiY2xvc2UiOg0KICAJCQkJcmVsZWFzZShlLmRhdGEuY3RybC5vcHRpb25zKTsNCiAgCQkJCWJyZWFrOw0KICAJCQlkZWZhdWx0Og0KICAJCQkJY29uc29sZS5sb2coIlVua25vd24gY29udHJvbCBtZXNzYWdlOiIsIGUuZGF0YSk7DQogIAkJCQlicmVhazsNCiAgCQl9DQogIAl9DQogIH07DQoNCiAgbGV0IHdvcmtlcklkID0gIndlYnJ0Yy12YWQtd29ya2VyLSIgKyBNYXRoLnJvdW5kKE1hdGgucmFuZG9tKCkgKiAxMDAwMDAwKSArICItIiArIERhdGUubm93KCk7DQogIGxldCBkb0RlYnVnID0gZmFsc2U7DQogIGxldCB3YXNDb25zdHJ1Y3RvckNhbGxlZCA9IGZhbHNlOw0KICAvL2xldCBpc1JlYWR5Rm9yUHJvY2Vzc2luZyA9IGZhbHNlOwkJLy9UT0RPOiBpbXBsZW1lbnQNCg0KICBsZXQgaW5wdXRTYW1wbGVSYXRlOw0KICBsZXQgY2hhbm5lbENvdW50Ow0KICBsZXQgaW5wdXRTYW1wbGVTaXplOw0KICBsZXQgcHJvY2Vzc0J1ZmZlclNpemU7CS8vZGVmaW5lcyAnX3Byb2Nlc3NSaW5nQnVmZmVyJyBzaXplIHRvZ2V0aGVyIHdpdGggJ2lucHV0U2FtcGxlU2l6ZScNCiAgbGV0IHZhZE1vZGU7DQogIGxldCBpc0Zsb2F0MzJJbnB1dDsJCS8vZGVmYXVsdCBmYWxzZQ0KDQogIGxldCB2b2ljZUVuZXJneTsNCiAgbGV0IHZvaWNlRW5lcmd5Q2FwID0gNTA7DQogIGxldCB2b2ljZUVuZXJneURyb3BSYXRlID0gMjsNCiAgbGV0IF9zYW1wbGVzVG9UaW1lTXNGYWN0b3I7DQoNCiAgbGV0IG1leWRhQW5hbHl6ZXI7DQoNCiAgbGV0IF9wcm9jZXNzUmluZ0J1ZmZlcjsJCS8vaG9sZHMgbXVsdGlwbGUgdmFkRnJhbWVzDQogIGxldCBfdmFkRnJhbWVzOwkJCQkvL2VhY2ggZnJhbWUgcHJvY2Vzc2VzIG9uZSBjaHVuayBvZiAnX3ZhZEJ1ZmZlclNpemUnIGFzIGxvbmcgYXMgJ19wcm9jZXNzUmluZ0J1ZmZlcicgaGFzIGVub3VnaCBzYW1wbGVzDQogIGxldCBfdmFkRnJhbWVUaW1lTXM7CQkvL3JlYWwgdGltZSAobXMpIG9mIG9uZSB2YWRGcmFtZSAoZGVmaW5lZCBieSBzYW1wbGUtcmF0ZSBhbmQgYnVmZmVyIHNpemUpDQogIGxldCBfdmFkQnVmZmVyU2l6ZTsJCQkvL3NpemUgb2YgYSBzaW5nbGUgdmFkRnJhbWUgKHJlc3RyaWN0aW9ucyBhcHBseSkNCiAgbGV0IF92YWRCdWZmZXI7DQogIGxldCBfaW50MTZJbnB1dEJ1ZmZlcjsJCS8vdXNlZCBvbmx5IGlmIGlucHV0IGlzIGZsb2F0MzINCg0KICAvL3NlcXVlbmNlIGNvbnRyb2wNCiAgbGV0IHVzZVNlcXVlbmNlQW5hbHl6ZXIgPSBmYWxzZTsNCiAgbGV0IHZvaWNlQWN0aXZhdGlvblRpbWU7DQogIGxldCB2b2ljZVJlc2V0VGltZTsNCiAgbGV0IHNpbGVuY2VBY3RpdmF0aW9uVGltZTsNCiAgbGV0IG1heFNlcXVlbmNlVGltZTsNCiAgbGV0IG1pblNlcXVlbmNlVGltZTsNCg0KICBsZXQgX3NlcXVlbmNlVm9pY2VUaW1lOw0KICBsZXQgX3NlcXVlbmNlU2lsZW5jZVRpbWU7DQogIGxldCBfc2VxdWVuY2VTYXdWb2ljZSwgX3NlcXVlbmNlU2F3U2lsZW5jZUFmdGVyVm9pY2UsIF9zZXF1ZW5jZUZpbmlzaGVkVm9pY2U7DQogIGxldCBfc2VxdWVuY2VJc0FjdGl2ZSwgX3NlcXVlbmNlSXNEb25lLCBfc2VxdWVuY2VTdGFydGVkQXQ7DQoNCiAgbGV0IF9pc0ZpcnN0VmFsaWRQcm9jZXNzOw0KDQogIGZ1bmN0aW9uIGluaXQoKXsNCiAgCWlmIChpbnB1dFNhbXBsZVNpemUgPiBwcm9jZXNzQnVmZmVyU2l6ZSl7DQogIAkJdGhyb3cgSlNPTi5zdHJpbmdpZnkobmV3IEJ1ZmZlclNpemVFeGNlcHRpb24oIlByb2Nlc3NvciAnYnVmZmVyU2l6ZScgaGFzIHRvIGJlIGJpZ2dlciB0aGFuICdpbnB1dFNhbXBsZVNpemUnISBDdXJyZW50bHk6ICIgKyBpbnB1dFNhbXBsZVNpemUgKyAiID4gIiArIHByb2Nlc3NCdWZmZXJTaXplKSk7DQogIAkJLy9OT1RFOiB0aGlzIG5lZWRzIHRvIGJlIGEgc3RyaW5nIHRvIHNob3cgdXAgaW4gd29ya2VyLm9uZXJyb3IgcHJvcGVybHkgOi0vDQogIAl9DQogIAkvL3JlcXVpcmVtZW50cyBmb3Igc2FtcGxlUmF0ZTogODAwMCwgMTYwMDAsIDMyMDAwLCA0ODAwMCAtIHNhbXBsZUxlbmd0aDogc2FtcGxlUmF0ZS8xMDAwICogKDEwfDIwfDMwKSA9PiA0OGsgLSA0ODAsIDk2MCwgMTQ0MCA7IDE2ayAtIDE2MCwgMzIwLCA0ODA7DQogIAlpZiAoIVs4MDAwLCAxNjAwMCwgMzIwMDAsIDQ4MDAwXS5pbmNsdWRlcyhpbnB1dFNhbXBsZVJhdGUpKXsNCiAgCQl0aHJvdyBKU09OLnN0cmluZ2lmeShuZXcgU2FtcGxlUmF0ZUV4Y2VwdGlvbigiRm9yIHRoaXMgbW9kdWxlIHNhbXBsZS1yYXRlIGhhcyB0byBiZSBvbmUgb2Y6IDgwMDAsIDE2MDAwLCAzMjAwMCwgNDgwMDAiKSk7DQogIAl9DQogIAl2YXIgYWxsb3dlZEJ1ZmZlclNpemVzID0gW2lucHV0U2FtcGxlUmF0ZS8xMDAwICogMzAsIGlucHV0U2FtcGxlUmF0ZS8xMDAwICogMjAsIGlucHV0U2FtcGxlUmF0ZS8xMDAwICogMTBdOwkJLy8xMCwgMjAgYW5kIDMwbXMgZnJhbWVzDQogIAlfdmFkQnVmZmVyU2l6ZSA9IDA7DQogIAlmb3IgKGxldCBpPTA7IGk8YWxsb3dlZEJ1ZmZlclNpemVzLmxlbmd0aDsgaSsrKXsNCiAgCQlpZiAocHJvY2Vzc0J1ZmZlclNpemUgPT0gYWxsb3dlZEJ1ZmZlclNpemVzW2ldIHx8IHByb2Nlc3NCdWZmZXJTaXplICUgYWxsb3dlZEJ1ZmZlclNpemVzW2ldID09IDApew0KICAJCQlfdmFkRnJhbWVzID0gcHJvY2Vzc0J1ZmZlclNpemUgLyBhbGxvd2VkQnVmZmVyU2l6ZXNbaV07DQogIAkJCV92YWRCdWZmZXJTaXplID0gYWxsb3dlZEJ1ZmZlclNpemVzW2ldOw0KICAJCQlicmVhazsNCiAgCQl9DQogIAl9DQogIAlpZiAoX3ZhZEJ1ZmZlclNpemUgPT0gMCl7DQogIAkJdGhyb3cgSlNPTi5zdHJpbmdpZnkobmV3IEJ1ZmZlclNpemVFeGNlcHRpb24oIkZvciBzYW1wbGUtcmF0ZSAnIiArIGlucHV0U2FtcGxlUmF0ZSArICInIHRoZSAnYnVmZmVyU2l6ZScgaGFzIHRvIGJlIGVxdWFsIG9yIGEgbXVsdGlwbGUgb2Y6ICIgKyBhbGxvd2VkQnVmZmVyU2l6ZXMuam9pbigiLCAiKSkpOw0KICAJfQ0KICAJdmFyIHJpbmdCdWZmZXJTaXplID0gcHJvY2Vzc0J1ZmZlclNpemUgKyBpbnB1dFNhbXBsZVNpemU7CQkvL1RPRE86IGNoZWNrIHNpemUgYWdhaW4NCiAgCV9wcm9jZXNzUmluZ0J1ZmZlciA9IG5ldyBSaW5nQnVmZmVyKHJpbmdCdWZmZXJTaXplLCBjaGFubmVsQ291bnQsICJJbnQxNiIpOw0KICAJX3ZhZEJ1ZmZlciA9IFtuZXcgSW50MTZBcnJheShfdmFkQnVmZmVyU2l6ZSldOw0KICAJaWYgKGlzRmxvYXQzMklucHV0KXsNCiAgCQlfaW50MTZJbnB1dEJ1ZmZlciA9IFtuZXcgSW50MTZBcnJheShpbnB1dFNhbXBsZVNpemUpXTsNCiAgCX0NCiAgCQ0KICAJX3NhbXBsZXNUb1RpbWVNc0ZhY3RvciA9IDEwMDAvaW5wdXRTYW1wbGVSYXRlOw0KICAJX3ZhZEZyYW1lVGltZU1zID0gTWF0aC5yb3VuZChfdmFkQnVmZmVyU2l6ZSAqIF9zYW1wbGVzVG9UaW1lTXNGYWN0b3IpOw0KICAJDQogIAlyZXNldFNlcXVlbmNlKCk7DQogIAkNCiAgCV9pc0ZpcnN0VmFsaWRQcm9jZXNzID0gdHJ1ZTsNCiAgfQ0KICBmdW5jdGlvbiByZWFkeSgpew0KICAJcG9zdE1lc3NhZ2Uoew0KICAJCW1vZHVsZVN0YXRlOiAxLA0KICAJCW1vZHVsZUluZm86IHsNCiAgCQkJbW9kdWxlSWQ6IHdvcmtlcklkLA0KICAJCQlpbnB1dFNhbXBsZVJhdGU6IGlucHV0U2FtcGxlUmF0ZSwNCiAgCQkJY2hhbm5lbENvdW50OiBjaGFubmVsQ291bnQsDQogIAkJCWlucHV0U2FtcGxlU2l6ZTogaW5wdXRTYW1wbGVTaXplLA0KICAJCQlpbnB1dElzRmxvYXQzMjogaXNGbG9hdDMySW5wdXQsDQogIAkJCXByb2Nlc3NCdWZmZXJTaXplOiBwcm9jZXNzQnVmZmVyU2l6ZSwNCiAgCQkJdmFkTW9kZTogdmFkTW9kdWxlLmdldE1vZGUoKSwNCiAgCQkJdmFkRnJhbWVzTWF4OiBfdmFkRnJhbWVzLA0KICAJCQl2YWRCdWZmZXJTaXplOiBfdmFkQnVmZmVyU2l6ZSwNCiAgCQkJdmFkRnJhbWVUaW1lTXM6IF92YWRGcmFtZVRpbWVNcywNCiAgCQkJdm9pY2VFbmVyZ3lDYXA6IHZvaWNlRW5lcmd5Q2FwLA0KICAJCQl2b2ljZUVuZXJneURyb3BSYXRlOiB2b2ljZUVuZXJneURyb3BSYXRlLA0KICAJCQl1c2VTZXF1ZW5jZUFuYWx5emVyOiB1c2VTZXF1ZW5jZUFuYWx5emVyDQogIAkJfQ0KICAJfSk7DQogIH0NCg0KICBmdW5jdGlvbiBjb25zdHJ1Y3RXb3JrZXIob3B0aW9ucykgew0KICAJaWYgKHdhc0NvbnN0cnVjdG9yQ2FsbGVkKXsNCiAgCQljb25zb2xlLmVycm9yKCJWYWRNb2R1bGVFcnJvciAtIENvbnN0cnVjdG9yIHdhcyBjYWxsZWQgdHdpY2UhIDJuZCBjYWxsIHdhcyBpZ25vcmVkIGJ1dCB0aGlzIHNob3VsZCBiZSBmaXhlZCEiLCAiLSIsIHdvcmtlcklkKTsJLy9ERUJVRw0KICAJCXJldHVybjsNCiAgCX1lbHNlIHsNCiAgCQl3YXNDb25zdHJ1Y3RvckNhbGxlZCA9IHRydWU7DQogIAl9DQogIAlkb0RlYnVnID0gb3B0aW9ucy5zZXR1cC5kb0RlYnVnIHx8IGZhbHNlOw0KICAJaW5wdXRTYW1wbGVSYXRlID0gb3B0aW9ucy5zZXR1cC5pbnB1dFNhbXBsZVJhdGUgfHwgb3B0aW9ucy5zZXR1cC5jdHhJbmZvLnRhcmdldFNhbXBsZVJhdGUgfHwgb3B0aW9ucy5zZXR1cC5jdHhJbmZvLnNhbXBsZVJhdGU7DQogIAljaGFubmVsQ291bnQgPSAxOwkvL29wdGlvbnMuc2V0dXAuY2hhbm5lbENvdW50IHx8IDE7CQkvL1RPRE86IG9ubHkgTU9OTyBhdG0NCiAgCWlucHV0U2FtcGxlU2l6ZSA9IG9wdGlvbnMuc2V0dXAuaW5wdXRTYW1wbGVTaXplIHx8IDUxMjsNCiAgCXByb2Nlc3NCdWZmZXJTaXplID0gb3B0aW9ucy5zZXR1cC5idWZmZXJTaXplIHx8IChpbnB1dFNhbXBsZVJhdGUvMTAwMCAqIDMwICogMik7CS8vMiB3aW5kb3dzIG9mIDMwbXMgYnkgZGVmYXVsdA0KICAJdmFkTW9kZSA9IChvcHRpb25zLnNldHVwLnZhZE1vZGUgIT0gdW5kZWZpbmVkKT8gb3B0aW9ucy5zZXR1cC52YWRNb2RlIDogMzsNCiAgCWlzRmxvYXQzMklucHV0ID0gKG9wdGlvbnMuc2V0dXAuaXNGbG9hdDMyICE9IHVuZGVmaW5lZCk/IG9wdGlvbnMuc2V0dXAuaXNGbG9hdDMyIDogZmFsc2U7DQogIAkNCiAgCWlmIChvcHRpb25zLnNldHVwLnZvaWNlRW5lcmd5Q2FwICE9IHVuZGVmaW5lZCkgdm9pY2VFbmVyZ3lDYXAgPSBvcHRpb25zLnNldHVwLnZvaWNlRW5lcmd5Q2FwOw0KICAJaWYgKG9wdGlvbnMuc2V0dXAudm9pY2VFbmVyZ3lEcm9wUmF0ZSkgdm9pY2VFbmVyZ3lEcm9wUmF0ZSA9IG9wdGlvbnMuc2V0dXAudm9pY2VFbmVyZ3lEcm9wUmF0ZTsNCiAgCWlmIChvcHRpb25zLnNldHVwLnNlcXVlbmNlKXsNCiAgCQl1c2VTZXF1ZW5jZUFuYWx5emVyID0gdHJ1ZTsNCiAgCQl2b2ljZUFjdGl2YXRpb25UaW1lID0gb3B0aW9ucy5zZXR1cC5zZXF1ZW5jZS52b2ljZUFjdGl2YXRpb25UaW1lIHx8IDI1MDsNCiAgCQl2b2ljZVJlc2V0VGltZSA9IG9wdGlvbnMuc2V0dXAuc2VxdWVuY2Uudm9pY2VSZXNldFRpbWUgfHwgMTUwMDsNCiAgCQlzaWxlbmNlQWN0aXZhdGlvblRpbWUgPSBvcHRpb25zLnNldHVwLnNlcXVlbmNlLnNpbGVuY2VBY3RpdmF0aW9uVGltZSB8fCAyNTA7DQogIAkJbWF4U2VxdWVuY2VUaW1lID0gb3B0aW9ucy5zZXR1cC5zZXF1ZW5jZS5tYXhTZXF1ZW5jZVRpbWUgfHwgNjAwMDsNCiAgCQltaW5TZXF1ZW5jZVRpbWUgPSBvcHRpb25zLnNldHVwLnNlcXVlbmNlLm1pblNlcXVlbmNlVGltZSB8fCA2MDA7DQogIAl9ZWxzZSB7DQogIAkJdXNlU2VxdWVuY2VBbmFseXplciA9IGZhbHNlOw0KICAJfQ0KICAJDQogIAkvL1RPRE86IHVudXNlZCBzbyBmYXIgLi4uIGtlZXAgb3IgcmVtb3ZlPw0KICAJbWV5ZGFBbmFseXplciA9IG9wdGlvbnMuc2V0dXAubWV5ZGFBbmFseXplciB8fCB7fTsNCiAgCXZhciBtZXlkYVNldHRpbmdzS2V5cyA9IE9iamVjdC5rZXlzKG1leWRhQW5hbHl6ZXIpOw0KICAJaWYgKG1leWRhU2V0dGluZ3NLZXlzLmxlbmd0aCA+IDApew0KICAJCS8vaW1wb3J0IG9uIGRlbWFuZA0KICAJCWltcG9ydFNjcmlwdHMoJy4vc2hhcmVkL21leWRhLm1pbi5jb21wcmVzc2VkLmpzJyk7DQogIAkJLy9zZXR1cA0KICAJCW1leWRhU2V0dGluZ3NLZXlzLmZvckVhY2goZnVuY3Rpb24oaywgaSl7DQogIAkJCWlmIChrID09ICJmZWF0dXJlcyIpew0KICAJCQkJbWV5ZGFBbmFseXplcltrXTsNCiAgCQkJfWVsc2Ugew0KICAJCQkJTWV5ZGFba10gPSBtZXlkYUFuYWx5emVyW2tdOw0KICAJCQl9DQogIAkJfSk7DQogIAkJTWV5ZGEuc2FtcGxlUmF0ZSA9IHRhcmdldFNhbXBsZVJhdGU7DQogIAkJTWV5ZGEuYnVmZmVyU2l6ZSA9IGlucHV0U2FtcGxlU2l6ZTsNCiAgCQlpZiAoIU1leWRhLmJ1ZmZlclNpemUgfHwgKE1leWRhLmJ1ZmZlclNpemUgJiAoTWV5ZGEuYnVmZmVyU2l6ZSAtMSkgIT0gMCkpew0KICAJCQl0aHJvdyB7bmFtZTogIlZhZE1vZHVsZU1leWRhRXJyb3IiLCBtZXNzYWdlOiAiTWV5ZGEgYnVmZmVyLXNpemUgbXVzdCBiZSBwb3dlciBvZiAyLCBlLmcuIDEyOCwgMjU2LCA1MTIsIDEwMjQsIC4uLiJ9Ow0KICAJCX0NCiAgCX0NCiAgCQ0KICAJaW5pdCgpOw0KICAJDQogIAlmdW5jdGlvbiBvblZhZExvZyhtc2cpew0KICAJCWlmIChkb0RlYnVnKSBjb25zb2xlLmVycm9yKCJWYWRNb2R1bGVMb2cgLSIsIG1zZyk7CQkJLy9ERUJVRyAodXNlIHBvc3RNZXNzYWdlPykNCiAgCX0NCiAgCWZ1bmN0aW9uIG9uVmFkRXJyb3IobXNnKXsNCiAgCQljb25zb2xlLmVycm9yKCJWYWRNb2R1bGVFcnJvciAtIiwgbXNnKTsNCiAgCQl0aHJvdyB7bmFtZTogIlZhZE1vZHVsZUVycm9yIiwgbWVzc2FnZTogbXNnfTsJLy9UT0RPOiB0aGlzIHByb2JhYmx5IG5lZWRzIHRvIGJlIGEgc3RyaW5nIHRvIHNob3cgdXAgaW4gd29ya2VyLm9uZXJyb3IgcHJvcGVybHkgOi0vDQogIAl9DQogIAkNCiAgCS8vcHJlcGFyZQ0KICAJaWYgKCF2YWRNb2R1bGUpew0KICAJCW9uVmFkTG9nKCJJbml0LiBXZWJSVEMgVkFEIFdBU00gbW9kdWxlIik7CQkvL0RFQlVHDQogIAkJbmV3IFdlYlJ0Y1ZvaWNlQWN0aXZpdHlEZXRlY3Rvcih7DQogIAkJCW9uSW5mbzogb25WYWRMb2csDQogIAkJCW9uRXJyb3I6IG9uVmFkRXJyb3IsDQogIAkJCW9uU3RhdHVzTWVzc2FnZTogb25WYWRMb2csDQogIAkJCW1vZGU6IHZhZE1vZGUNCiAgCQl9LCBmdW5jdGlvbih2KXsNCiAgCQkJb25WYWRMb2coIldlYlJUQyBWQUQgcmVhZHkiKTsJCQkJLy9ERUJVRw0KICAJCQl2YWRNb2R1bGUgPSB2Ow0KICAJCQlyZWFkeSgpOw0KICAJCX0pOw0KICAJfWVsc2Ugew0KICAJCW9uVmFkTG9nKCJXZWJSVEMgVkFEIG1vZHVsZSBhbHJlYWR5IGxvYWRlZCIpOwkJLy9ERUJVRw0KICAJCXJlYWR5KCk7DQogIAl9DQogIH0NCg0KICAvL3NlcXVlbmNlIGJsb2NrDQogIGZ1bmN0aW9uIHNlcXVlbmNlRGV0ZWN0b3Iodm9pY2VBY3Rpdml0eSl7DQogIAlpZiAodm9pY2VBY3Rpdml0eSA9PSAwKXsNCiAgCQlpZiAoX3NlcXVlbmNlU2F3Vm9pY2Upew0KICAJCQlfc2VxdWVuY2VTaWxlbmNlVGltZSArPSBfdmFkRnJhbWVUaW1lTXM7DQogIAkJCWlmIChfc2VxdWVuY2VTaWxlbmNlVGltZSA+IHZvaWNlUmVzZXRUaW1lKXsNCiAgCQkJCV9zZXF1ZW5jZVNhd1NpbGVuY2VBZnRlclZvaWNlID0gdHJ1ZTsNCiAgCQkJfWVsc2UgaWYgKF9zZXF1ZW5jZVNpbGVuY2VUaW1lID4gc2lsZW5jZUFjdGl2YXRpb25UaW1lKXsNCiAgCQkJCV9zZXF1ZW5jZVZvaWNlVGltZSA9IDA7DQogIAkJCX0NCiAgCQl9DQogIAl9ZWxzZSB7DQogIAkJX3NlcXVlbmNlVm9pY2VUaW1lICs9IF92YWRGcmFtZVRpbWVNczsNCiAgCQlpZiAoIV9zZXF1ZW5jZVNhd1ZvaWNlICYmIF9zZXF1ZW5jZVZvaWNlVGltZSA+IHZvaWNlQWN0aXZhdGlvblRpbWUpew0KICAJCQlfc2VxdWVuY2VTYXdWb2ljZSA9IHRydWU7DQogIAkJCXJlZ2lzdGVyRXZlbnQoMSwgJ3ZvaWNlX3N0YXJ0Jyk7DQogIAkJfWVsc2UgaWYgKF9zZXF1ZW5jZVZvaWNlVGltZSA+IHZvaWNlQWN0aXZhdGlvblRpbWUpew0KICAJCQlfc2VxdWVuY2VTaWxlbmNlVGltZSA9IDA7DQogIAkJfQ0KICAJfQ0KICAJDQogIAlpZiAoX3NlcXVlbmNlU2F3Vm9pY2UgJiYgX3NlcXVlbmNlU2F3U2lsZW5jZUFmdGVyVm9pY2Upew0KICAJCV9zZXF1ZW5jZUZpbmlzaGVkVm9pY2UgPSB0cnVlOw0KICAJfWVsc2UgaWYgKF9zZXF1ZW5jZVNhd1ZvaWNlICYmIChfc2VxdWVuY2VWb2ljZVRpbWUgPiBtaW5TZXF1ZW5jZVRpbWUpKXsNCiAgCQlpZiAoIV9zZXF1ZW5jZUlzQWN0aXZlKXsNCiAgCQkJX3NlcXVlbmNlSXNBY3RpdmUgPSB0cnVlOw0KICAJCQlfc2VxdWVuY2VTdGFydGVkQXQgPSBEYXRlLm5vdygpOw0KICAJCQlyZWdpc3RlckV2ZW50KDIsICdzZXF1ZW5jZV9zdGFydGVkJyk7DQogIAkJfQ0KICAJfQ0KDQogIAlpZiAoX3NlcXVlbmNlRmluaXNoZWRWb2ljZSl7DQogIAkJX3NlcXVlbmNlSXNEb25lID0gdHJ1ZTsNCiAgCQlyZWdpc3RlckV2ZW50KDMsICdmaW5pc2hlZF92b2ljZScpOw0KDQogIAl9ZWxzZSBpZiAoX3NlcXVlbmNlU2F3Vm9pY2Upew0KICAJCWlmIChfc2VxdWVuY2VJc0FjdGl2ZSAmJiAoKERhdGUubm93KCkgLSBfc2VxdWVuY2VTdGFydGVkQXQpID4gbWF4U2VxdWVuY2VUaW1lKSkgew0KICAJCQlfc2VxdWVuY2VJc0RvbmUgPSB0cnVlOw0KICAJCQlyZWdpc3RlckV2ZW50KDQsICdmaW5pc2hlZF92b2ljZV9tYXh0aW1lJyk7DQogIAkJfQ0KICAJfQ0KICAJCQ0KICAJaWYgKF9zZXF1ZW5jZUlzRG9uZSl7DQogIAkJaWYgKF9zZXF1ZW5jZUlzQWN0aXZlKSByZWdpc3RlckV2ZW50KDUsICdzZXF1ZW5jZV9jb21wbGV0ZScpOw0KICAJCXJlc2V0U2VxdWVuY2UoKTsNCiAgCX0NCiAgfQ0KICBmdW5jdGlvbiByZXNldFNlcXVlbmNlKCl7DQogIAl2b2ljZUVuZXJneSA9IDA7DQogIAlfc2VxdWVuY2VTYXdWb2ljZSA9IGZhbHNlOw0KICAJX3NlcXVlbmNlRmluaXNoZWRWb2ljZSA9IGZhbHNlOw0KICAJX3NlcXVlbmNlU2F3U2lsZW5jZUFmdGVyVm9pY2UgPSBmYWxzZTsNCiAgCV9zZXF1ZW5jZVZvaWNlVGltZSA9IDA7DQogIAlfc2VxdWVuY2VTaWxlbmNlVGltZSA9IDA7DQogIAlfc2VxdWVuY2VJc0FjdGl2ZSA9IGZhbHNlOw0KICAJX3NlcXVlbmNlU3RhcnRlZEF0ID0gMDsNCiAgCV9zZXF1ZW5jZUlzRG9uZSA9IGZhbHNlOw0KICB9DQogIGZ1bmN0aW9uIHJlZ2lzdGVyRXZlbnQoY29kZSwgbXNnLCBkYXRhKXsNCiAgCXZhciBtc2cgPSB7DQogIAkJdmFkU2VxdWVuY2VDb2RlOiBjb2RlLA0KICAJCXZhZFNlcXVlbmNlTXNnOiBtc2cNCiAgCX07DQogIAlzd2l0Y2ggKGNvZGUpew0KICAJCS8vY2FzZSAxOiB2b2ljZSBzdGFydA0KICAJCS8vY2FzZSAyOiBzZXF1ZW5jZSBzdGFydA0KICAJCS8vY2FzZSAzOiBjYXNlIDQ6IGZpbmlzaGVkIHZvaWNlDQogIAkJY2FzZSA1Og0KICAJCQkvL3NlcXVlbmNlIGNvbXBsZXRlDQogIAkJCW1zZy52YWRTZXF1ZW5jZVN0YXJ0ZWQgPSBfc2VxdWVuY2VTdGFydGVkQXQ7DQogIAkJCW1zZy52YWRTZXF1ZW5jZUVuZGVkID0gRGF0ZS5ub3coKTsNCiAgCQkJYnJlYWs7DQogIAl9DQogIAkvL1NlbmQgaW5mbw0KICAJcG9zdE1lc3NhZ2UobXNnKTsNCiAgfQ0KDQogIGZ1bmN0aW9uIHByb2Nlc3MkMShkYXRhKSB7DQogIAkvL2V4cGVjdGVkOiBkYXRhLnNhbXBsZXMsIGRhdGEuc2FtcGxlUmF0ZSwgZGF0YS5jaGFubmVscywgZGF0YS50eXBlDQogIAkvL21pZ2h0IGhhdmU6IGRhdGEucm1zCS0JVE9ETzogbWFrZSB1c2Ugb2Y/DQogIAlpZiAoZGF0YSAmJiBkYXRhLnNhbXBsZXMpew0KICAJCS8vVXNlIDFzdCBpbnB1dCBhbmQgb3V0cHV0IG9ubHkNCiAgCQlsZXQgaW5wdXQgPSBkYXRhLnNhbXBsZXM7DQogIAkJaW5wdXRbMF0ubGVuZ3RoOw0KICAJCQ0KICAJCWlmIChfaXNGaXJzdFZhbGlkUHJvY2Vzcyl7DQogIAkJCV9pc0ZpcnN0VmFsaWRQcm9jZXNzID0gZmFsc2U7DQogIAkJCS8vY2hlY2s6IGlucHV0U2FtcGxlUmF0ZSwgaW5wdXRTYW1wbGVTaXplLCBjaGFubmVsQ291bnQsIGZsb2F0MzINCiAgCQkJaWYgKGRhdGEuc2FtcGxlUmF0ZSAhPSBpbnB1dFNhbXBsZVJhdGUpew0KICAJCQkJdmFyIG1zZyA9ICJTYW1wbGUtcmF0ZSBtaXNtYXRjaCEgU2hvdWxkIGJlICciICsgaW5wdXRTYW1wbGVSYXRlICsgIicgaXMgJyIgKyBkYXRhLnNhbXBsZVJhdGUgKyAiJyI7DQogIAkJCQljb25zb2xlLmVycm9yKCJBdWRpbyBXb3JrZXIgc2FtcGxlLXJhdGUgZXhjZXB0aW9uIC0gTXNnLjogIiArIG1zZyk7DQogIAkJCQl0aHJvdyBKU09OLnN0cmluZ2lmeShuZXcgU2FtcGxlUmF0ZUV4Y2VwdGlvbihtc2cpKTsJCQkvL05PVEU6IHRoaXMgbmVlZHMgdG8gYmUgYSBzdHJpbmcgdG8gc2hvdyB1cCBpbiB3b3JrZXIub25lcnJvciBwcm9wZXJseSA6LS8NCiAgCQkJfQ0KICAJCQlsZXQgaW5wdXRBcnJheVR5cGUgPSBkYXRhLnR5cGUgfHwgZGF0YS5zYW1wbGVzWzBdLmNvbnN0cnVjdG9yLm5hbWU7DQogIAkJCWxldCBpc0Zsb2F0MzIgPSAoaW5wdXRBcnJheVR5cGUuaW5kZXhPZigiRmxvYXQzMiIpID49IDApOw0KICAJCQlpZiAoaXNGbG9hdDMyICE9IGlzRmxvYXQzMklucHV0KXsNCiAgCQkJCXZhciBtc2cgPSAiQXJyYXkgdHlwZSBtaXNtYXRjaCEgSW5wdXQgc2FtcGxlcyBhcmUgb2YgdHlwZSAnIiArIGlucHV0QXJyYXlUeXBlICsgIicgYnV0IGV4cGVjdGVkOiAiICsgKGlzRmxvYXQzMklucHV0PyAiRmxvYXQzMiIgOiAiSW50MTYiKTsNCiAgCQkJCWNvbnNvbGUuZXJyb3IoIkF1ZGlvIFdvcmtlciB0eXBlIGV4Y2VwdGlvbiAtIE1zZy46ICIgKyBtc2cpOw0KICAJCQkJdGhyb3cgSlNPTi5zdHJpbmdpZnkobmV3IEFycmF5VHlwZUV4Y2VwdGlvbihtc2cpKTsJCQkvL05PVEU6IHRoaXMgbmVlZHMgdG8gYmUgYSBzdHJpbmcgdG8gc2hvdyB1cCBpbiB3b3JrZXIub25lcnJvciBwcm9wZXJseSA6LS8NCiAgCQkJfQ0KICAJCQkvL1RPRE86IHNob3VsZCB3ZSByZS1pbml0LiBpbnN0ZWFkIG9mIGZhaWw/DQogIAkJfQ0KICAJCQ0KICAJCS8vVE9ETzogaXMgTU9OTw0KICAJCWlmIChpc0Zsb2F0MzJJbnB1dCl7DQogIAkJCUNvbW1vbkNvbnZlcnRlcnMuZmxvYXRUbzE2Qml0UENNKF9pbnQxNklucHV0QnVmZmVyWzBdLCBpbnB1dFswXSk7DQogIAkJCV9wcm9jZXNzUmluZ0J1ZmZlci5wdXNoKFtfaW50MTZJbnB1dEJ1ZmZlclswXV0pOw0KICAJCX1lbHNlIHsNCiAgCQkJX3Byb2Nlc3NSaW5nQnVmZmVyLnB1c2goaW5wdXQpOw0KICAJCX0NCiAgCQkNCiAgCQkvL1Byb2Nlc3MgaWYgd2UgaGF2ZSBlbm91Z2ggZnJhbWVzDQogIAkJdmFyIHZhZFJlc3VsdHMgPSBbXTsNCiAgCQl3aGlsZSAoX3Byb2Nlc3NSaW5nQnVmZmVyLmZyYW1lc0F2YWlsYWJsZSA+PSBfdmFkQnVmZmVyU2l6ZSkgew0KICAJCQkvL3B1bGwgc2FtcGxlcw0KICAJCQlfcHJvY2Vzc1JpbmdCdWZmZXIucHVsbChfdmFkQnVmZmVyKTsNCiAgCQkJDQogIAkJCS8vYWN0aXZpdHkgY2hlY2sNCiAgCQkJdmFyIHZvaWNlQWN0aXZpdHkgPSB2YWRNb2R1bGUuZ2V0Vm9pY2VBY3Rpdml0eShpbnB1dFNhbXBsZVJhdGUsIF92YWRCdWZmZXJbMF0pOwkJLy9UT0RPOiBpcyBNT05PDQogIAkJCXZhZFJlc3VsdHMucHVzaCh2b2ljZUFjdGl2aXR5KTsNCiAgCQkJDQogIAkJCS8vdm9pY2UgZW5lcmd5IGFuZCBzZXF1ZW5jZSBjaGVjaw0KICAJCQlpZiAodm9pY2VBY3Rpdml0eSl7DQogIAkJCQl2b2ljZUVuZXJneSsrOw0KICAJCQkJaWYgKHZvaWNlRW5lcmd5Q2FwICYmIHZvaWNlRW5lcmd5ID4gdm9pY2VFbmVyZ3lDYXApIHZvaWNlRW5lcmd5ID0gdm9pY2VFbmVyZ3lDYXA7DQogIAkJCX1lbHNlIHsNCiAgCQkJCXZvaWNlRW5lcmd5ID0gdm9pY2VFbmVyZ3kgLSB2b2ljZUVuZXJneURyb3BSYXRlOw0KICAJCQkJaWYgKHZvaWNlRW5lcmd5IDwgMCkgdm9pY2VFbmVyZ3kgPSAwOw0KICAJCQl9DQogIAkJCWlmICh1c2VTZXF1ZW5jZUFuYWx5emVyKXsNCiAgCQkJCXNlcXVlbmNlRGV0ZWN0b3Iodm9pY2VBY3Rpdml0eSk7DQogIAkJCX0NCiAgCQl9DQogIAkJaWYgKHZhZFJlc3VsdHMubGVuZ3RoID4gMCl7DQogIAkJCS8vU2VuZCBpbmZvDQogIAkJCXBvc3RNZXNzYWdlKHsNCiAgCQkJCXZvaWNlQWN0aXZpdHk6IHZhZFJlc3VsdHMsDQogIAkJCQl2b2ljZUVuZXJneTogdm9pY2VFbmVyZ3kNCiAgCQkJfSk7DQogIAkJfQ0KICAJfQ0KICAJcmV0dXJuIHRydWU7DQogIH0NCg0KICBmdW5jdGlvbiBoYW5kbGVFdmVudChkYXRhKXsNCiAgCS8vZGF0YSB0aGF0IHNob3VsZCBub3QgYmUgcHJvY2Vzc2VkIGJ1dCBtaWdodCB0cmlnZ2VyIGFuIGV2ZW50DQogIH0NCg0KICBmdW5jdGlvbiBzdGFydChvcHRpb25zKSB7DQogICAgICAvL1RPRE86IGFueXRoaW5nIHRvIGRvPw0KICAJLy9OT1RFOiB0aW1pbmcgb2YgdGhpcyBzaWduYWwgaXMgbm90IHZlcnkgd2VsbCBkZWZpbmVkLCB1c2Ugb25seSBmb3IgZ2F0aW5nIG9yIHNpbWlsYXIgc3R1ZmYhDQogIAlyZXNldFNlcXVlbmNlKCk7DQogIH0NCiAgZnVuY3Rpb24gc3RvcChvcHRpb25zKSB7DQogIAkvL1RPRE86IGFueXRoaW5nIHRvIGRvPw0KICAJLy9OT1RFOiB0aW1pbmcgb2YgdGhpcyBzaWduYWwgaXMgbm90IHZlcnkgd2VsbCBkZWZpbmVkDQogIH0NCiAgZnVuY3Rpb24gcmVzZXQob3B0aW9ucykgew0KICAgICAgLy9UT0RPOiBjbGVhbiB1cCB3b3JrZXIgYW5kIHByZXAuIGZvciByZXN0YXJ0DQogIAlpbml0KCk7DQogIH0NCiAgZnVuY3Rpb24gcmVsZWFzZShvcHRpb25zKXsNCiAgCS8vZGVzdHJveQ0KICAJX3Byb2Nlc3NSaW5nQnVmZmVyID0gbnVsbDsNCiAgCV92YWRCdWZmZXIgPSBudWxsOw0KICAJX2ludDE2SW5wdXRCdWZmZXIgPSBudWxsOw0KICAJdmFkTW9kdWxlID0gbnVsbDsJCS8vVE9ETzogaXMgdGhlcmUgYW55IG90aGVyICdkZXN0cm95JycgZnVuY3Rpb24/DQogIAkvL25vdGlmeSBwcm9jZXNzb3IgdGhhdCB3ZSBjYW4gdGVybWluYXRlIG5vdw0KICAJcG9zdE1lc3NhZ2Uoew0KICAJCW1vZHVsZVN0YXRlOiA5DQogIAl9KTsNCiAgfQ0KDQogIC8vLS0tIGhlbHBlcnMgLS0tDQogIC8vLi4uCgp9KSgpOwoK",null,!1),Ooe=NL("Lyogcm9sbHVwLXBsdWdpbi13ZWItd29ya2VyLWxvYWRlciAqLwooZnVuY3Rpb24gKCkgewogICd1c2Ugc3RyaWN0JzsKCiAgLyoqDQogICAqIE9yaWdpbmFsIGNvcHlyaWdodCAyMDE4IEdvb2dsZSBMTEMgLSBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wOw0KICAgKiBNb2RpZmllZCBmb3IgU0VQSUEgcHJvamVjdCAoTUlUIExpY2Vuc2UpDQogICAqLw0KICAgDQogIC8qKg0KICAgKiBBIEpTIEZJRk8gaW1wbGVtZW50YXRpb24gZm9yIHRoZSBBdWRpb1dvcmtsZXQuDQogICAqIE5vdGU6DQogICAqICAtIFRoZSBjaGFubmVsIGNvdW50IG9mIGlucHV0L291dHB1dCBjYW5ub3QgYmUgY2hhbmdlZCBkeW5hbWljYWxseS4NCiAgICogICAgVGhlIEF1ZGlvV29ya2xldE5vZGUgc2hvdWxkIGJlIGNvbmZpZ3VyZWQgd2l0aCB0aGUgYC5jaGFubmVsQ291bnQgPSBrYA0KICAgKiAgICAod2hlcmUgayBpcyB0aGUgY2hhbm5lbCBjb3VudCB5b3Ugd2FudCkgYW5kIGAuY2hhbm5lbENvdW50TW9kZSA9IGV4cGxpY2l0YC4NCiAgICoNCiAgICogQGNsYXNzDQogICAqLw0KICAgY2xhc3MgUmluZ0J1ZmZlciB7DQogICAgLyoqDQogICAgICogQGNvbnN0cnVjdG9yDQogICAgICogQHBhcmFtICB7bnVtYmVyfSBsZW5ndGggQnVmZmVyIGxlbmd0aCBpbiBmcmFtZXMuDQogICAgICogQHBhcmFtICB7bnVtYmVyfSBjaGFubmVsQ291bnQgQnVmZmVyIGNoYW5uZWwgY291bnQuDQogICAgICogQHBhcmFtICB7bnVtYmVyfSBwcmVjaXNpb24gIlVpbnQ4IiwgIkludDgiLCAiVWludDE2IiwgIkludDE2IiwgIkZsb2F0MzIiIGV0Yy4NCiAgICAgKi8NCiAgICBjb25zdHJ1Y3RvcihsZW5ndGgsIGNoYW5uZWxDb3VudCwgcHJlY2lzaW9uKSB7DQogICAgICB0aGlzLl9yZWFkSW5kZXggPSAwOw0KICAgICAgdGhpcy5fd3JpdGVJbmRleCA9IDA7DQogICAgICB0aGlzLl9mcmFtZXNBdmFpbGFibGUgPSAwOw0KDQogICAgICB0aGlzLl9jaGFubmVsQ291bnQgPSBjaGFubmVsQ291bnQ7DQogICAgICB0aGlzLl9sZW5ndGggPSBsZW5ndGg7DQogICAgICB0aGlzLl9jaGFubmVsRGF0YSA9IFtdOw0KICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLl9jaGFubmVsQ291bnQ7ICsraSkgew0KICAJICBpZiAocHJlY2lzaW9uID09ICJVaW50MTYiKXsgdGhpcy5fY2hhbm5lbERhdGFbaV0gPSBuZXcgVWludDE2QXJyYXkobGVuZ3RoKTsgfQ0KICAJICBlbHNlIGlmIChwcmVjaXNpb24gPT0gIkludDE2Iil7IHRoaXMuX2NoYW5uZWxEYXRhW2ldID0gbmV3IEludDE2QXJyYXkobGVuZ3RoKTsgfQ0KICAJICBlbHNlIGlmIChwcmVjaXNpb24gPT0gIlVpbnQ4Iil7IHRoaXMuX2NoYW5uZWxEYXRhW2ldID0gbmV3IFVpbnQ4QXJyYXkobGVuZ3RoKTsgfQ0KICAJICBlbHNlIGlmIChwcmVjaXNpb24gPT0gIkludDgiKXsgdGhpcy5fY2hhbm5lbERhdGFbaV0gPSBuZXcgSW50OEFycmF5KGxlbmd0aCk7IH0NCiAgCSAgZWxzZSB7IHRoaXMuX2NoYW5uZWxEYXRhW2ldID0gbmV3IEZsb2F0MzJBcnJheShsZW5ndGgpOyB9DQogICAgICB9DQogICAgfQ0KDQogICAgLyoqDQogICAgICogR2V0dGVyIGZvciBBdmFpbGFibGUgZnJhbWVzIGluIGJ1ZmZlci4NCiAgICAgKg0KICAgICAqIEByZXR1cm4ge251bWJlcn0gQXZhaWxhYmxlIGZyYW1lcyBpbiBidWZmZXIuDQogICAgICovDQogICAgZ2V0IGZyYW1lc0F2YWlsYWJsZSgpIHsNCiAgICAgIHJldHVybiB0aGlzLl9mcmFtZXNBdmFpbGFibGU7DQogICAgfQ0KDQogICAgLyoqDQogICAgICogUHVzaCBhIHNlcXVlbmNlIG9mIEFycmF5cyB0byBidWZmZXIuDQogICAgICoNCiAgICAgKiBAcGFyYW0gIHthcnJheX0gYXJyYXlTZXF1ZW5jZSBBIHNlcXVlbmNlIG9mIEFycmF5cy4NCiAgICAgKiBAcGFyYW0gIHtmdW5jdGlvbn0gY3VzdG9tVHJhbnNmb3JtIEEgZnVuY3Rpb24gb2YgKGFycmF5LCBjaGFubmVsLCBpbmRleCkgdG8gdHJhbnNmb3JtIHRoZSBpbnB1dCBkdXJpbmcgcHVzaCAob3IgbnVsbCkuDQogICAgICovDQogICAgcHVzaChhcnJheVNlcXVlbmNlLCBjdXN0b21UcmFuc2Zvcm0pIHsNCiAgICAgIC8vIFRoZSBjaGFubmVsIGNvdW50IG9mIGFycmF5U2VxdWVuY2UgYW5kIHRoZSBsZW5ndGggb2YgZWFjaCBjaGFubmVsIG11c3QNCiAgICAgIC8vIG1hdGNoIHdpdGggdGhpcyBidWZmZXIgb2JlamN0Lg0KDQogICAgICAvLyBUcmFuc2ZlciBkYXRhIGZyb20gdGhlIHxhcnJheVNlcXVlbmNlfCBzdG9yYWdlIHRvIHRoZSBpbnRlcm5hbCBidWZmZXIuDQogICAgICBsZXQgc291cmNlTGVuZ3RoID0gYXJyYXlTZXF1ZW5jZVswXS5sZW5ndGg7DQogIAlsZXQgdHJhbnNmb3JtID0gY3VzdG9tVHJhbnNmb3JtIHx8IGZ1bmN0aW9uKHRoaXNBcnJheSwgY2hhbm5lbCwgaSl7DQogIAkJcmV0dXJuIHRoaXNBcnJheVtjaGFubmVsXVtpXTsNCiAgCX07DQogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNvdXJjZUxlbmd0aDsgKytpKSB7DQogICAgICAgIGxldCB3cml0ZUluZGV4ID0gKHRoaXMuX3dyaXRlSW5kZXggKyBpKSAlIHRoaXMuX2xlbmd0aDsNCiAgICAgICAgZm9yIChsZXQgY2hhbm5lbCA9IDA7IGNoYW5uZWwgPCB0aGlzLl9jaGFubmVsQ291bnQ7ICsrY2hhbm5lbCkgew0KICAgICAgICAgIHRoaXMuX2NoYW5uZWxEYXRhW2NoYW5uZWxdW3dyaXRlSW5kZXhdID0gdHJhbnNmb3JtKGFycmF5U2VxdWVuY2UsIGNoYW5uZWwsIGkpOw0KICAgICAgICB9DQogICAgICB9DQoNCiAgICAgIHRoaXMuX3dyaXRlSW5kZXggKz0gc291cmNlTGVuZ3RoOw0KICAgICAgaWYgKHRoaXMuX3dyaXRlSW5kZXggPj0gdGhpcy5fbGVuZ3RoKSB7DQogICAgICAgIHRoaXMuX3dyaXRlSW5kZXggPSB0aGlzLl93cml0ZUluZGV4IC0gdGhpcy5fbGVuZ3RoOw0KICAgICAgfQ0KDQogICAgICAvLyBGb3IgZXhjZXNzaXZlIGZyYW1lcywgdGhlIGJ1ZmZlciB3aWxsIGJlIG92ZXJ3cml0dGVuLg0KICAgICAgdGhpcy5fZnJhbWVzQXZhaWxhYmxlICs9IHNvdXJjZUxlbmd0aDsNCiAgICAgIGlmICh0aGlzLl9mcmFtZXNBdmFpbGFibGUgPiB0aGlzLl9sZW5ndGgpIHsNCiAgICAgICAgdGhpcy5fZnJhbWVzQXZhaWxhYmxlID0gdGhpcy5fbGVuZ3RoOw0KICAgICAgfQ0KICAgIH0NCg0KICAgIC8qKg0KICAgICAqIFB1bGwgZGF0YSBvdXQgb2YgYnVmZmVyIGFuZCBmaWxsIGEgZ2l2ZW4gc2VxdWVuY2Ugb2YgQXJyYXlzLg0KICAgICAqDQogICAgICogQHBhcmFtICB7YXJyYXl9IGFycmF5U2VxdWVuY2UgQW4gYXJyYXkgb2YgQXJyYXlzLg0KICAgICAqIEBwYXJhbSAge2Z1bmN0aW9ufSBjdXN0b21UcmFuc2Zvcm0gQSBmdW5jdGlvbiBvZiAoYXJyYXksIGNoYW5uZWwsIGluZGV4KSB0byB0cmFuc2Zvcm0gdGhlIG91dHB1dCBkdXJpbmcgcHVsbCAob3IgbnVsbCkuDQogICAgICovDQogICAgcHVsbChhcnJheVNlcXVlbmNlLCBjdXN0b21UcmFuc2Zvcm0pIHsNCiAgICAgIC8vIFRoZSBjaGFubmVsIGNvdW50IG9mIGFycmF5U2VxdWVuY2UgYW5kIHRoZSBsZW5ndGggb2YgZWFjaCBjaGFubmVsIG11c3QNCiAgICAgIC8vIG1hdGNoIHdpdGggdGhpcyBidWZmZXIgb2JlamN0Lg0KDQogICAgICAvLyBJZiB0aGUgRklGTyBpcyBjb21wbGV0ZWx5IGVtcHR5LCBkbyBub3RoaW5nLg0KICAgICAgaWYgKHRoaXMuX2ZyYW1lc0F2YWlsYWJsZSA9PT0gMCkgew0KICAgICAgICByZXR1cm47DQogICAgICB9DQoNCiAgICAgIGxldCBkZXN0aW5hdGlvbkxlbmd0aCA9IGFycmF5U2VxdWVuY2VbMF0ubGVuZ3RoOw0KICAJbGV0IHRyYW5zZm9ybSA9IGN1c3RvbVRyYW5zZm9ybSB8fCBmdW5jdGlvbih0aGlzQXJyYXksIGNoYW5uZWwsIGkpew0KICAJCXJldHVybiB0aGlzQXJyYXlbY2hhbm5lbF1baV07DQogIAl9Ow0KDQogICAgICAvLyBUcmFuc2ZlciBkYXRhIGZyb20gdGhlIGludGVybmFsIGJ1ZmZlciB0byB0aGUgfGFycmF5U2VxdWVuY2V8IHN0b3JhZ2UuDQogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGRlc3RpbmF0aW9uTGVuZ3RoOyArK2kpIHsNCiAgICAgICAgbGV0IHJlYWRJbmRleCA9ICh0aGlzLl9yZWFkSW5kZXggKyBpKSAlIHRoaXMuX2xlbmd0aDsNCiAgICAgICAgZm9yIChsZXQgY2hhbm5lbCA9IDA7IGNoYW5uZWwgPCB0aGlzLl9jaGFubmVsQ291bnQ7ICsrY2hhbm5lbCkgew0KICAgICAgICAgIGFycmF5U2VxdWVuY2VbY2hhbm5lbF1baV0gPSB0cmFuc2Zvcm0odGhpcy5fY2hhbm5lbERhdGEsIGNoYW5uZWwsIHJlYWRJbmRleCk7DQogICAgICAgIH0NCiAgICAgIH0NCg0KICAgICAgdGhpcy5fcmVhZEluZGV4ICs9IGRlc3RpbmF0aW9uTGVuZ3RoOw0KICAgICAgaWYgKHRoaXMuX3JlYWRJbmRleCA+PSB0aGlzLl9sZW5ndGgpIHsNCiAgICAgICAgdGhpcy5fcmVhZEluZGV4ID0gdGhpcy5fcmVhZEluZGV4IC0gdGhpcy5fbGVuZ3RoOw0KICAgICAgfQ0KDQogICAgICB0aGlzLl9mcmFtZXNBdmFpbGFibGUgLT0gZGVzdGluYXRpb25MZW5ndGg7DQogICAgICBpZiAodGhpcy5fZnJhbWVzQXZhaWxhYmxlIDwgMCkgew0KICAgICAgICB0aGlzLl9mcmFtZXNBdmFpbGFibGUgPSAwOw0KICAgICAgfQ0KICAgIH0NCiAgfQoKICAvL1NFUElBIFNUVCBTZXJ2ZXIgQ2xpZW50Og0KDQogIGNsYXNzIFNlcGlhU3R0U29ja2V0Q2xpZW50IHsNCg0KICAJY29uc3RydWN0b3Ioc2VydmVyVXJsLCBjbGllbnRJZCwgYWNjZXNzVG9rZW4sIGVuZ2luZU9wdGlvbnMsIHNlcnZlck9wdGlvbnMpew0KICAJCXRoaXMuc2VydmVyVXJsID0gKHNlcnZlclVybCB8fCAiaHR0cDovL2xvY2FsaG9zdDoyMDc0MSIpLnJlcGxhY2UoIlwvJCIsICIiKTsNCiAgCQl0aGlzLnNvY2tldEhvc3QgPSB0aGlzLnNlcnZlclVybC5yZXBsYWNlKC9eKGh0dHApLywgIndzIikgKyAiL3NvY2tldCI7CS8vbm90ZTogJy9zb2NrZXQnIGlzIGEgcGF0aCBhbGlhcyBmb3IgcHJveGllcw0KICAJCXRoaXMuY2xpZW50SWQgPSBjbGllbnRJZCB8fCAiYW55IjsNCiAgCQl0aGlzLmFjY2Vzc1Rva2VuID0gYWNjZXNzVG9rZW4gfHwgInRlc3QxMjM0IjsNCg0KICAJCWlmICghZW5naW5lT3B0aW9ucykgZW5naW5lT3B0aW9ucyA9IHt9Ow0KICAJCWlmICghc2VydmVyT3B0aW9ucykgc2VydmVyT3B0aW9ucyA9IHt9Ow0KDQogIAkJdGhpcy5zZXJ2ZXJWZXJzaW9uID0gIiI7DQogIAkJdGhpcy5hc3JFbmdpbmUgPSAiIjsNCiAgCQkNCiAgCQl0aGlzLmF2YWlsYWJsZUxhbmd1YWdlcyA9IFtdOw0KICAJCXRoaXMuYXZhaWxhYmxlTW9kZWxzID0gW107DQogIAkJdGhpcy5hdmFpbGFibGVGZWF0dXJlcyA9IFtdOw0KICAJCXRoaXMuYWN0aXZlT3B0aW9ucyA9IE9iamVjdC5hc3NpZ24oew0KICAJCQlzYW1wbGVyYXRlOiAxNjAwMCwNCiAgCQkJY29udGludW91czogZmFsc2UsDQogIAkJCWxhbmd1YWdlOiAiIiwNCiAgCQkJdGFzazogIiIsDQogIAkJCW1vZGVsOiAiIg0KICAJCX0sIGVuZ2luZU9wdGlvbnMpOw0KDQogIAkJdGhpcy5hY3RpdmVMYW5ndWFnZUNvZGUgPSB0aGlzLmFjdGl2ZU9wdGlvbnMubGFuZ3VhZ2UgfHwgIiI7DQogIAkJdGhpcy5hY3RpdmVBc3JUYXNrID0gdGhpcy5hY3RpdmVPcHRpb25zLnRhc2sgfHwgIiI7DQogIAkJdGhpcy5hY3RpdmVBc3JNb2RlbCA9IHRoaXMuYWN0aXZlT3B0aW9ucy5tb2RlbCB8fCAiIjsNCiAgCQkvL05PVEU6IGN1cnJlbnRseSBub3QgYXNzaWduZWQNCiAgCQl0aGlzLnBocmFzZXMgPSB0aGlzLmFjdGl2ZU9wdGlvbnMucGhyYXNlcyB8fCBbXTsNCiAgCQl0aGlzLmhvdFdvcmRzID0gdGhpcy5hY3RpdmVPcHRpb25zLmhvdFdvcmRzIHx8IFtdOw0KDQogIAkJdGhpcy5fbXNnSWQgPSAwOw0KDQogIAkJdGhpcy53ZWJzb2NrZXQgPSB1bmRlZmluZWQ7DQogIAkJdGhpcy5fY29ubmVjdGlvbklkID0gMDsNCg0KICAJCXRoaXMuYXV0b0Nsb3NlT25MYXN0RmluYWwgPSB0cnVlOwkvL2FwcGxpZXMgdG8gbm9uLWNvbnRpbnVvdXMgc2V0dXAgb25seQ0KDQogIAkJdGhpcy5jb25uZWN0aW9uSXNPcGVuID0gZmFsc2U7DQogIAkJdGhpcy5pc1JlYWR5Rm9yU3RyZWFtID0gZmFsc2U7DQoNCiAgCQl0aGlzLl9vbk9wZW4gPSBzZXJ2ZXJPcHRpb25zLm9uT3BlbiB8fCBmdW5jdGlvbigpe307DQogIAkJdGhpcy5fb25SZWFkeSA9IHNlcnZlck9wdGlvbnMub25SZWFkeSB8fCBmdW5jdGlvbihhY3RpdmVPcHRpb25zKXt9Ow0KICAJCXRoaXMuX29uQ2xvc2UgPSBzZXJ2ZXJPcHRpb25zLm9uQ2xvc2UgfHwgZnVuY3Rpb24oZXYpe307DQogIAkJdGhpcy5fb25SZXN1bHQgPSBzZXJ2ZXJPcHRpb25zLm9uUmVzdWx0IHx8IGZ1bmN0aW9uKHJlcyl7fTsNCiAgCQl0aGlzLl9vbkVycm9yID0gc2VydmVyT3B0aW9ucy5vbkVycm9yIHx8IGZ1bmN0aW9uKGVycil7DQogIAkJCWNvbnNvbGUuZXJyb3IoIlNlcGlhU3R0U29ja2V0Q2xpZW50IEVSUk9SIiwgZXJyKTsNCiAgCQl9Ow0KDQogIAkJdGhpcy5fc2tpcEF1dG9XZWxjb21lID0gc2VydmVyT3B0aW9ucy5za2lwQXV0b1dlbGNvbWU7DQogIAkJdGhpcy5fZG9EZWJ1ZyA9IHNlcnZlck9wdGlvbnMuZG9EZWJ1ZzsNCiAgCX0NCg0KICAJbG9nKG1zZyl7DQogIAkJaWYgKHRoaXMuX2RvRGVidWcpew0KICAJCQljb25zb2xlLmxvZygiU2VwaWFTdHRTb2NrZXRDbGllbnQiLCBtc2cpOw0KICAJCX0NCiAgCX0NCg0KICAJLy8tLS0gSFRUUCBJbnRlcmZhY2UgLS0tDQoNCiAgCXBpbmdTZXJ2ZXIoc3VjY2Vzc0NhbGxiYWNrLCBlcnJvckNhbGxiYWNrKXsNCiAgCQljb25zdCBjb250cm9sbGVyID0gbmV3IEFib3J0Q29udHJvbGxlcigpOw0KICAJCXNldFRpbWVvdXQoZnVuY3Rpb24oKXtjb250cm9sbGVyLmFib3J0KCk7fSwgODAwMCk7DQogIAkJZmV0Y2godGhpcy5zZXJ2ZXJVcmwgKyAiL3BpbmciLCB7DQogIAkJCXNpZ25hbDogY29udHJvbGxlci5zaWduYWwNCiAgCQl9KS50aGVuKGZ1bmN0aW9uKHJlcyl7IHJldHVybiByZXMuanNvbigpOyB9KQ0KICAJCS50aGVuKGZ1bmN0aW9uKGpzb24pew0KICAJCQlpZiAoc3VjY2Vzc0NhbGxiYWNrKSBzdWNjZXNzQ2FsbGJhY2soanNvbik7DQogIAkJfSkNCiAgCQkuY2F0Y2goZnVuY3Rpb24oZXJyKXsNCiAgCQkJaWYgKGVycm9yQ2FsbGJhY2spIGVycm9yQ2FsbGJhY2soZXJyKTsNCiAgCQl9KTsNCiAgCX0NCg0KICAJbG9hZFNlcnZlckluZm8oc3VjY2Vzc0NhbGxiYWNrLCBlcnJvckNhbGxiYWNrKXsNCiAgCQljb25zdCBjb250cm9sbGVyID0gbmV3IEFib3J0Q29udHJvbGxlcigpOw0KICAJCXNldFRpbWVvdXQoZnVuY3Rpb24oKXtjb250cm9sbGVyLmFib3J0KCk7fSwgODAwMCk7DQogIAkJZmV0Y2godGhpcy5zZXJ2ZXJVcmwgKyAiL3NldHRpbmdzIiwgew0KICAJCQltZXRob2Q6ICJHRVQiLA0KICAJCQlzaWduYWw6IGNvbnRyb2xsZXIuc2lnbmFsDQogIAkJfSkudGhlbihmdW5jdGlvbihyZXMpew0KICAJCQlpZiAocmVzLm9rKXsNCiAgCQkJCXJldHVybiByZXMuanNvbigpOw0KICAJCQl9ZWxzZSB7DQogIAkJCQlpZiAoZXJyb3JDYWxsYmFjaykgZXJyb3JDYWxsYmFjayh7DQogIAkJCQkJIm5hbWUiOiAiRmV0Y2hFcnJvciIsICJtZXNzYWdlIjogcmVzLnN0YXR1c1RleHQsICJjb2RlIjogcmVzLnN0YXR1cw0KICAJCQkJfSk7DQogIAkJCX0NCiAgCQl9KS50aGVuKGZ1bmN0aW9uKGpzb24pew0KICAJCQlpZiAoanNvbiAmJiBqc29uLnNldHRpbmdzKXsNCiAgCQkJCXRoaXMuX2hhbmRsZVNlcnZlclNldHRpbmdzKGpzb24uc2V0dGluZ3MpOw0KICAJCQkJaWYgKHN1Y2Nlc3NDYWxsYmFjaykgc3VjY2Vzc0NhbGxiYWNrKGpzb24uc2V0dGluZ3MpOw0KICAJCQl9ZWxzZSB7DQogIAkJCQlpZiAoc3VjY2Vzc0NhbGxiYWNrKSBzdWNjZXNzQ2FsbGJhY2soe30pOw0KICAJCQl9DQogIAkJfSkuY2F0Y2goZnVuY3Rpb24oZXJyKXsNCiAgCQkJaWYgKGVycm9yQ2FsbGJhY2spIGVycm9yQ2FsbGJhY2soZXJyKTsNCiAgCQl9KTsNCiAgCX0NCg0KICAJX2hhbmRsZVNlcnZlclNldHRpbmdzKHNldHRpbmdzKXsNCiAgCQl0aGlzLnNlcnZlclZlcnNpb24gPSBzZXR0aW5ncy52ZXJzaW9uOw0KICAJCXRoaXMuYXNyRW5naW5lID0gc2V0dGluZ3MuZW5naW5lIHx8ICIiOw0KICAJCXRoaXMuYXZhaWxhYmxlTGFuZ3VhZ2VzID0gc2V0dGluZ3MubGFuZ3VhZ2VzIHx8IFtdOw0KICAJCXRoaXMuYXZhaWxhYmxlTW9kZWxzID0gc2V0dGluZ3MubW9kZWxzIHx8IFtdOw0KICAJCXRoaXMuYXZhaWxhYmxlRmVhdHVyZXMgPSBzZXR0aW5ncy5mZWF0dXJlcyB8fCBbXTsNCiAgCX0NCg0KICAJLy8tLS0gV2ViU29ja2V0IGludGVyZmFjZSAtLS0NCg0KICAJbmV3TWVzc2FnZUlkKCl7DQogIAkJdmFyIG1zZ0lkID0gKyt0aGlzLl9tc2dJZDsNCiAgCQlpZiAobXNnSWQgPiA5OTk5OTkpew0KICAJCQltc2dJZCA9IDE7DQogIAkJfQ0KICAJCXJldHVybiBtc2dJZDsNCiAgCX0NCg0KICAJb3BlbkNvbm5lY3Rpb24oKXsNCiAgCQlpZiAodGhpcy53ZWJzb2NrZXQgJiYgdGhpcy53ZWJzb2NrZXQucmVhZHlTdGF0ZSA9PSB0aGlzLndlYnNvY2tldC5PUEVOKXsNCiAgCQkJdGhpcy5fb25FcnJvcih7bmFtZTogIlNvY2tldENvbm5lY3Rpb25FcnJvciIsIG1lc3NhZ2U6ICJDb25uZWN0aW9uIHdhcyBhbHJlYWR5IE9QRU4ifSk7DQogIAkJCXJldHVybiBmYWxzZTsNCiAgCQl9DQogIAkJdmFyIHNlbGYgPSB0aGlzOw0KICAJCXZhciB0aGlzQ29ubmVjaXRvbklkOw0KICAJDQogIAkJLy9DUkVBVEUNCiAgCQl0aGlzLndlYnNvY2tldCA9IG5ldyBXZWJTb2NrZXQodGhpcy5zb2NrZXRIb3N0KTsNCiAgCQkNCiAgCQkvL09OT1BFTg0KICAJCXRoaXMud2Vic29ja2V0Lm9ub3BlbiA9IGZ1bmN0aW9uKCl7DQogIAkJCXNlbGYubG9nKCJDb25uZWN0aW9uIE9QRU4iKTsNCiAgCQkJc2VsZi5jb25uZWN0aW9uSXNPcGVuID0gdHJ1ZTsNCiAgCQkJc2VsZi5fY29ubmVjdGlvbklkKys7DQogIAkJCXRoaXNDb25uZWNpdG9uSWQgPSBzZWxmLl9jb25uZWN0aW9uSWQ7DQogIAkJCXNlbGYuX29uT3BlbigpOw0KICAJCQkvL3NlbmQgd2VsY29tZQ0KICAJCQlpZiAoIXNlbGYuX3NraXBBdXRvV2VsY29tZSl7DQogIAkJCQlzZWxmLnNlbmRXZWxjb21lKCk7DQogIAkJCX0NCiAgCQl9Ow0KICAJCS8vT05DTE9TRQ0KICAJCXRoaXMud2Vic29ja2V0Lm9uY2xvc2UgPSBmdW5jdGlvbihldil7DQogIAkJCXNlbGYubG9nKCJDb25uZWN0aW9uIENMT1NFRCIpOw0KICAJCQlzZWxmLmNvbm5lY3Rpb25Jc09wZW4gPSBmYWxzZTsNCiAgCQkJc2VsZi5pc1JlYWR5Rm9yU3RyZWFtID0gZmFsc2U7DQogIAkJCS8vdW5kZXJzdGFuZCBlcnJvcjogZXYuY29kZSBvciBldi5yZWFzb24gbWlnaHQgZ2l2ZSBtb3JlIGluc2lnaHRzDQogIAkJCXNlbGYuX29uQ2xvc2UoZXYpOw0KICAJCX07DQogIAkJLy9PTk1FU1NBR0UNCiAgCQl0aGlzLndlYnNvY2tldC5vbm1lc3NhZ2UgPSBmdW5jdGlvbihldmVudCl7DQogIAkJCWlmIChldmVudCAmJiBldmVudC5kYXRhICYmIHR5cGVvZiBldmVudC5kYXRhID09ICJzdHJpbmciKXsNCiAgCQkJCXNlbGYubG9nKCJDb25uZWN0aW9uIE1FU1NBR0U6ICIgKyBldmVudC5kYXRhKTsJCS8vREVCVUcNCiAgCQkJCXRyeSB7DQogIAkJCQkJc2VsZi5oYW5kbGVTb2NrZXRNZXNzYWdlKEpTT04ucGFyc2UoZXZlbnQuZGF0YSkpOw0KICAJCQkJfWNhdGNoKGVycil7DQogIAkJCQkJY29uc29sZS5lcnJvcigiU2VwaWFTdHRTb2NrZXRDbGllbnQgLSBNZXNzYWdlUGFyc2VyRXJyb3IiLCBlcnIpOw0KICAJCQkJCXNlbGYuaGFuZGxlU29ja2V0RXJyb3Ioe25hbWU6ICJTb2NrZXRNZXNzYWdlUGFyc2VyRXJyb3IiLCBtZXNzYWdlOiAiTWVzc2FnZSBoYW5kbGVyIHNhdyBpbnZsYWlkIEpTT04/ISJ9KTsNCiAgCQkJCX0NCiAgCQkJfQ0KICAJCX07DQogIAkJLy9PTkVSUk9SDQogIAkJdGhpcy53ZWJzb2NrZXQub25lcnJvciA9IGZ1bmN0aW9uKGVycm9yKXsNCiAgCQkJaWYgKCF0aGlzQ29ubmVjaXRvbklkKXsNCiAgCQkJCS8vbmV2ZXIgb3BlbmVkDQogIAkJCQlzZWxmLl9vbkVycm9yKHtuYW1lOiAiU29ja2V0Q29ubmVjdGlvbkVycm9yIiwgbWVzc2FnZTogIkZhaWxlZCB0byBjb25uZWN0In0pOw0KICAJCQl9ZWxzZSB7DQogIAkJCQlzZWxmLmhhbmRsZVNvY2tldEVycm9yKGVycm9yKTsNCiAgCQkJfQ0KICAJCX07DQoNCiAgCQlyZXR1cm4gdHJ1ZTsNCiAgCX0NCg0KICAJY2xvc2VDb25uZWN0aW9uKCl7DQogIAkJaWYgKHRoaXMud2Vic29ja2V0ICYmIHRoaXMud2Vic29ja2V0LnJlYWR5U3RhdGUgPT0gdGhpcy53ZWJzb2NrZXQuT1BFTil7DQogIAkJCXRoaXMud2Vic29ja2V0LmNsb3NlKCk7DQogIAkJCXJldHVybiB0cnVlOw0KICAJCX1lbHNlIHsNCiAgCQkJLy9mYWlsIHNpbGVudGx5Pw0KICAJCQlyZXR1cm4gZmFsc2U7DQogIAkJfQ0KICAJfQ0KDQogIAloYW5kbGVTb2NrZXRNZXNzYWdlKG1zZ0pzb24pew0KICAJCWlmIChtc2dKc29uLnR5cGUgPT0gImVycm9yIil7DQogIAkJCXRoaXMuaGFuZGxlU29ja2V0RXJyb3IobXNnSnNvbik7DQogIAkJfWVsc2Ugew0KICAJCQkvL2NvbnNvbGUubG9nKCJoYW5kbGVTb2NrZXRNZXNzYWdlIiwgSlNPTi5zdHJpbmdpZnkobXNnSnNvbikpOwkvL0RFQlVHDQogIAkJCQ0KICAJCQlpZiAobXNnSnNvbi50eXBlID09ICJwaW5nIil7DQogIAkJCQkvL1RPRE86IHNlbmQgb25seSBhZnRlciB3ZWxjb21lDQogIAkJCQl0aGlzLnNlbmRKc29uKHt0eXBlOiAicG9uZyIsIG1zZ19pZDogbXNnSnNvbi5tc2dfaWR9KTsNCg0KICAJCQl9ZWxzZSBpZiAobXNnSnNvbi50eXBlID09ICJ3ZWxjb21lIil7DQogIAkJCQl0aGlzLmxvZygiQ29ubmVjdGlvbiBXRUxDT01FIik7DQogIAkJCQkvL3JlYWQgYWN0aXZlIHNlc3Npb24vZW5naW5lIG9wdGlvbnMNCiAgCQkJCXRoaXMuYWN0aXZlT3B0aW9ucyA9IG1zZ0pzb24uaW5mbz8gbXNnSnNvbi5pbmZvLm9wdGlvbnMgOiB7fTsNCiAgCQkJCXRoaXMuYWN0aXZlTGFuZ3VhZ2VDb2RlID0gdGhpcy5hY3RpdmVPcHRpb25zLmxhbmd1YWdlIHx8ICIiOw0KICAJCQkJdGhpcy5hY3RpdmVBc3JUYXNrID0gdGhpcy5hY3RpdmVPcHRpb25zLnRhc2sgfHwgIiI7DQogIAkJCQl0aGlzLmFjdGl2ZUFzck1vZGVsID0gdGhpcy5hY3RpdmVPcHRpb25zLm1vZGVsIHx8ICIiOw0KICAJCQkJdGhpcy5pc1JlYWR5Rm9yU3RyZWFtID0gdHJ1ZTsNCiAgCQkJCXRoaXMuX29uUmVhZHkodGhpcy5hY3RpdmVPcHRpb25zKTsNCiAgCQkJDQogIAkJCX1lbHNlIGlmIChtc2dKc29uLnR5cGUgPT0gInJlc3VsdCIpew0KICAJCQkJdGhpcy5fb25SZXN1bHQobXNnSnNvbik7DQogIAkJCQlpZiAobXNnSnNvbi5pc0ZpbmFsICYmICF0aGlzLmFjdGl2ZU9wdGlvbnMuY29udGludW91cyAmJiB0aGlzLmF1dG9DbG9zZU9uTGFzdEZpbmFsKXsNCiAgCQkJCQkvL2FmdGVyIGZpbmFsIHJlc3VsdCwgY2xvc2UgY29ubmVjdGlvbg0KICAJCQkJCXRoaXMuY2xvc2VDb25uZWN0aW9uKCk7DQogIAkJCQl9DQogIAkJCX1lbHNlIGlmIChtc2dKc29uLnR5cGUgPT0gInJlc3BvbnNlIik7DQogIAkJfQ0KICAJfQ0KDQogIAloYW5kbGVTb2NrZXRFcnJvcihlcnIpew0KICAJCXZhciBlcnJvciA9IHt9Ow0KICAJCWlmICghZXJyKSBlcnJvciA9IHtuYW1lOiAiU29ja2V0TWVzc2FnZUVycm9yIiwgbWVzc2FnZTogInVua25vd24ifTsNCiAgCQllbHNlIGlmICh0eXBlb2YgZXJyID09ICJzdHJpbmciKSBlcnJvciA9IHtuYW1lOiAiU29ja2V0TWVzc2FnZUVycm9yIiwgbWVzc2FnZTogZXJyfTsNCiAgCQllbHNlIGVycm9yID0ge25hbWU6IChlcnIubmFtZSB8fCAiU29ja2V0TWVzc2FnZUVycm9yIiksIG1lc3NhZ2U6IChlcnIubWVzc2FnZSB8fCAidW5rbm93biIpLCBkZXRhaWxzOiBlcnJ9Ow0KICAJCS8vc2VuZA0KICAJCXRoaXMuX29uRXJyb3IoZXJyb3IpOw0KICAJCS8vRXJyb3JzIGFyZSBub3QgYWNjZXB0YWJsZSA6LXAgLSBjbG9zZSBpbiBhbnkgY2FzZQ0KICAJCXRoaXMuY2xvc2VDb25uZWN0aW9uKCk7CQkvL3RoaXMgaGFzIHByb2JhYmx5IG5vIGVmZmVjdCBhdCBhbGwNCiAgCX0NCg0KICAJc2VuZEpzb24oanNvbil7DQogIAkJaWYgKHRoaXMud2Vic29ja2V0ICYmIHRoaXMud2Vic29ja2V0LnJlYWR5U3RhdGUgPT0gdGhpcy53ZWJzb2NrZXQuT1BFTil7DQogIAkJCXRoaXMud2Vic29ja2V0LnNlbmQoSlNPTi5zdHJpbmdpZnkoanNvbikpOw0KICAJCQlyZXR1cm4gdHJ1ZTsNCiAgCQl9ZWxzZSB7DQogIAkJCXRoaXMuX29uRXJyb3Ioe25hbWU6ICJTb2NrZXRDb25uZWN0aW9uRXJyb3IiLCBtZXNzYWdlOiAiQ29ubmVjdGlvbiBpcyBjbG9zZWQuIENhbm5vdCBzZW5kIG1lc3NhZ2UuIn0pOw0KICAJCQkvL3Rocm93IGVycm9yPw0KICAJCQlyZXR1cm4gZmFsc2U7DQogIAkJfQ0KICAJfQ0KICAJc2VuZEJ5dGVzKGJ1ZmZlckNodW5rKXsNCiAgCQlpZiAoIXRoaXMud2Vic29ja2V0IHx8IHRoaXMud2Vic29ja2V0LnJlYWR5U3RhdGUgIT0gdGhpcy53ZWJzb2NrZXQuT1BFTil7DQogIAkJCXRoaXMuX29uRXJyb3Ioe25hbWU6ICJTb2NrZXRDb25uZWN0aW9uRXJyb3IiLCBtZXNzYWdlOiAiQ29ubmVjdGlvbiBpcyBjbG9zZWQuIENhbm5vdCBzZW5kIG1lc3NhZ2UuIn0pOw0KICAJCQlyZXR1cm4gZmFsc2U7DQogIAkJfQ0KICAJCXRoaXMud2Vic29ja2V0LnNlbmQoYnVmZmVyQ2h1bmspOwkvL3RoaXMgY2FuIGJlIGEgdHlwZWQgYXJyYXkgKHJlY29tbWVuZGVkKSwgdmlldyBvciBibG9iIChJIGd1ZXNzKQ0KICAJCXJldHVybiB0cnVlOw0KICAJfQ0KICAJc2VuZE1lc3NhZ2UodGV4dCl7DQogIAkJcmV0dXJuIHRoaXMuc2VuZEpzb24oew0KICAJCQkidHlwZSI6ICJjaGF0IiwNCiAgCQkJImRhdGEiOiB7InRleHQiOiB0ZXh0fSwNCiAgCQkJIm1zZ19pZCI6IHRoaXMubmV3TWVzc2FnZUlkKCkNCiAgCQl9KTsNCiAgCX0NCiAgCXNlbmRXZWxjb21lKG9wdGlvbnMpew0KICAJCXZhciBvcHRpb25zVG9TZW5kID0gb3B0aW9ucyB8fCB0aGlzLmFjdGl2ZU9wdGlvbnM7DQogIAkJcmV0dXJuIHRoaXMuc2VuZEpzb24oew0KICAJCQkidHlwZSI6ICJ3ZWxjb21lIiwNCiAgCQkJImRhdGEiOiBvcHRpb25zVG9TZW5kLA0KICAJCQkiY2xpZW50X2lkIjogdGhpcy5jbGllbnRJZCwNCiAgCQkJImFjY2Vzc190b2tlbiI6IHRoaXMuYWNjZXNzVG9rZW4sDQogIAkJCSJtc2dfaWQiOiB0aGlzLm5ld01lc3NhZ2VJZCgpDQogIAkJfSk7DQogIAl9DQogIAlzZW5kQXVkaW9FbmQoYnl0ZUxlbmd0aCwgYnVmZmVyT3JUaW1lTGltaXQpew0KICAJCXJldHVybiB0aGlzLnNlbmRKc29uKHsNCiAgCQkJInR5cGUiOiAiYXVkaW9lbmQiLA0KICAJCQkiZGF0YSI6IHsNCiAgCQkJCSJieXRlTGVuZ3RoIjogYnl0ZUxlbmd0aCwNCiAgCQkJCSJidWZmZXJPclRpbWVMaW1pdCI6IGJ1ZmZlck9yVGltZUxpbWl0DQogIAkJCX0sDQogIAkJCSJtc2dfaWQiOiB0aGlzLm5ld01lc3NhZ2VJZCgpDQogIAkJfSk7DQogIAl9DQogIH0KCiAgb25tZXNzYWdlID0gZnVuY3Rpb24oZSkgew0KICAgICAgLy9BdWRpbyB3b3JrZXIgaW50ZXJmYWNlDQogIAlpZiAoZS5kYXRhLmN0cmwpew0KICAJCXN3aXRjaCAoZS5kYXRhLmN0cmwuYWN0aW9uKXsNCiAgCQkJLy9jb21tb24gaW50ZXJmYWNlDQogIAkJCWNhc2UgImNvbnN0cnVjdCI6DQogIAkJCQljb25zdHJ1Y3RXb3JrZXIoZS5kYXRhLmN0cmwub3B0aW9ucyk7DQogIAkJCQlicmVhazsNCiAgCQkJY2FzZSAicHJvY2VzcyI6DQogIAkJCQlwcm9jZXNzKGUuZGF0YS5jdHJsLmRhdGEpOw0KICAJCQkJYnJlYWs7DQogIAkJCWNhc2UgImhhbmRsZSI6DQogIAkJCQloYW5kbGVFdmVudChlLmRhdGEuY3RybC5kYXRhKTsJLy9lLmcuOiB0aGlzIHdvcmtlciBzZW5kcyBnYXRlIGV2ZW50cw0KICAJCQkJYnJlYWs7DQogIAkJCWNhc2UgInN0YXJ0IjoNCiAgCQkJCXN0YXJ0KGUuZGF0YS5jdHJsLm9wdGlvbnMpOw0KICAJCQkJYnJlYWs7DQogIAkJCWNhc2UgInN0b3AiOg0KICAJCQkJc3RvcChlLmRhdGEuY3RybC5vcHRpb25zKTsNCiAgCQkJCWJyZWFrOw0KICAJCQljYXNlICJyZXNldCI6DQogIAkJCQlyZXNldChlLmRhdGEuY3RybC5vcHRpb25zKTsNCiAgCQkJCWJyZWFrOw0KICAJCQljYXNlICJyZWxlYXNlIjoNCiAgCQkJY2FzZSAiY2xvc2UiOg0KICAJCQkJcmVsZWFzZShlLmRhdGEuY3RybC5vcHRpb25zKTsNCiAgCQkJCWJyZWFrOw0KICAJCQlkZWZhdWx0Og0KICAJCQkJY29uc29sZS5lcnJvcigiU3R0U29ja2V0V29ya2VyIC0gVW5rbm93biBjb250cm9sIG1lc3NhZ2U6IiwgZS5kYXRhKTsNCiAgCQkJCWJyZWFrOw0KICAJCX0NCiAgCX0NCiAgCS8vY3VzdG9tIGludGVyZmFjZQ0KICAJaWYgKGUuZGF0YS5nYXRlICE9IHVuZGVmaW5lZCl7DQogIAkJaWYgKGRvRGVidWcpIGNvbnNvbGUuZXJyb3IoIlN0dFNvY2tldFdvcmtlciAtIERFQlVHIC0gTWVzc2FnZSIsIGUuZGF0YSk7CQkJLy9ERUJVRw0KICAJCWdhdGVDb250cm9sKGUuZGF0YS5nYXRlICYmIGUuZGF0YS5nYXRlID09ICJvcGVuIiwgZS5kYXRhLmdhdGVPcHRpb25zKTsNCiAgCX0NCiAgfTsNCg0KICBsZXQgd29ya2VySWQgPSAic3R0LXNvY2tldC13b3JrZXItIiArIE1hdGgucm91bmQoTWF0aC5yYW5kb20oKSAqIDEwMDAwMDApICsgIi0iICsgRGF0ZS5ub3coKTsNCiAgbGV0IGRvRGVidWcgPSBmYWxzZTsNCiAgbGV0IGVuYWJsZURyeVJ1biA9IGZhbHNlOwkJLy9za2lwIHNlcnZlciBhbmQgZ2VuZXJhdGUgcHNldWRvIHJlc3VsdCBldmVudHMgdG8gZGVidWcgVUkgZXZlbnQgZmxvdw0KICBsZXQgcmV0dXJuQXVkaW9GaWxlID0gZmFsc2U7DQogIGxldCB3YXNDb25zdHJ1Y3RvckNhbGxlZCA9IGZhbHNlOw0KDQogIGxldCBzb2NrZXRVcmw7DQogIGxldCBjbGllbnRJZCA7DQogIGxldCBhY2Nlc3NUb2tlbjsNCiAgbGV0IHN0dFNlcnZlcjsNCg0KICBsZXQgbWVzc2FnZUZvcm1hdDsJCQkvL2UuZy46ICJ3ZWJTcGVlY2hBcGkiIG9yICJkZWZhdWx0Ig0KDQogIGxldCBpbnB1dFNhbXBsZVJhdGU7DQogIGxldCBpbnB1dFNhbXBsZVNpemU7DQogIGxldCBjaGFubmVsQ291bnQ7DQogIGxldCBpc0Zsb2F0MzJJbnB1dDsJCS8vZGVmYXVsdCBmYWxzZQ0KICBsZXQgZW5jb2RlckJpdERlcHRoID0gMTY7DQogIGxldCBfYnl0ZXNQZXJTYW1wbGUgPSBlbmNvZGVyQml0RGVwdGgvODsNCg0KICBsZXQgbG9va2JhY2tCdWZmZXJNczsNCiAgbGV0IGxvb2tiYWNrQnVmZmVySXNCbG9ja2VkOw0KICBsZXQgX2xvb2tiYWNrQnVmZmVyU2l6ZTsNCiAgbGV0IF9sb29rYmFja1JpbmdCdWZmZXI7DQogIGxldCByZWNvcmRlZEJ1ZmZlcnM7DQogIGxldCBfc2VudEJ1ZmZlcnM7DQogIGxldCBfc2hpZnRlZEJ1ZmZlcnM7DQogIGxldCByZWNvcmRCdWZmZXJNYXhOOw0KICBsZXQgY29udGludW91czsJCS8vTk9URTogdGhpcyBpcyBhbiBlbmdpbmUgb3B0aW9uIGJ1dCBpbmZsdWVuY2VzIGZ1bGwgYnVmZmVyIGFzIHdlbGwNCg0KICBsZXQgZ2F0ZUlzT3BlbiA9IGZhbHNlOw0KICBsZXQgX2dhdGVPcGVuVFMgPSAwOw0KICBsZXQgX2dhdGVDbG9zZVRTID0gMDsNCg0KICBsZXQgX2lzRmlyc3RWYWxpZFByb2Nlc3MgPSB0cnVlOw0KDQogIGZ1bmN0aW9uIGluaXQoKXsNCiAgCXJlY29yZGVkQnVmZmVycyA9IG51bGw7DQogIAlfbG9va2JhY2tSaW5nQnVmZmVyID0gbnVsbDsNCiAgCWxvb2tiYWNrQnVmZmVySXNCbG9ja2VkID0gZmFsc2U7DQogIAlpZiAobG9va2JhY2tCdWZmZXJNcyl7DQogIAkJX2xvb2tiYWNrQnVmZmVyU2l6ZSA9IE1hdGgucm91bmQoKGxvb2tiYWNrQnVmZmVyTXMvMTAwMCkgKiBpbnB1dFNhbXBsZVJhdGUpOw0KICAJCWlmIChpc0Zsb2F0MzJJbnB1dCl7DQogIAkJCV9sb29rYmFja1JpbmdCdWZmZXIgPSBuZXcgUmluZ0J1ZmZlcihfbG9va2JhY2tCdWZmZXJTaXplLCBjaGFubmVsQ291bnQsICJGbG9hdDMyIik7CS8vVE9ETzogdGVzdCBmb3IgRmxvYXQzMg0KICAJCX1lbHNlIHsNCiAgCQkJX2xvb2tiYWNrUmluZ0J1ZmZlciA9IG5ldyBSaW5nQnVmZmVyKF9sb29rYmFja0J1ZmZlclNpemUsIGNoYW5uZWxDb3VudCwgIkludDE2Iik7DQogIAkJfQ0KICAJfWVsc2Ugew0KICAJCV9sb29rYmFja0J1ZmZlclNpemUgPSAwOw0KICAJfQ0KICAJcmVjb3JkZWRCdWZmZXJzID0gW107DQogIAlfc2VudEJ1ZmZlcnMgPSAwOw0KICAJX3NoaWZ0ZWRCdWZmZXJzID0gMDsNCiAgCV9pc0ZpcnN0VmFsaWRQcm9jZXNzID0gdHJ1ZTsNCiAgCWdhdGVJc09wZW4gPSBmYWxzZTsNCiAgCV9nYXRlT3BlblRTID0gMDsNCiAgCV9nYXRlQ2xvc2VUUyA9IDA7DQogIH0NCg0KICAvL1JlcXVlc3RzDQoNCiAgZnVuY3Rpb24gZ2F0ZUNvbnRyb2wob3BlbiwgZ2F0ZU9wdGlvbnMsIHRyaWdnZXJlZE9uRXJyb3Ipew0KICAJdmFyIG1zZyA9IHsNCiAgCQltb2R1bGVFdmVudDogdHJ1ZSwJCS8vdXNlICdtb2R1bGVFdmVudCcgdG8gZGlzdGluZ3Vpc2ggZnJvbSBub3JtYWwgcHJvY2Vzc2luZyByZXN1bHQNCiAgCQlnYXRlOiB7fQ0KICAJfTsNCiAgCWlmIChvcGVuKXsNCiAgCQkvL3dlIGFsd2F5cyByZXNldCB0aGUgYnVmZmVyDQogIAkJcmVjb3JkZWRCdWZmZXJzID0gW107DQogIAkJX3NlbnRCdWZmZXJzID0gMDsNCiAgCQlfc2hpZnRlZEJ1ZmZlcnMgPSAwOw0KICAJCV9nYXRlT3BlblRTID0gRGF0ZS5ub3coKTsNCiAgCQlnYXRlSXNPcGVuID0gdHJ1ZTsNCiAgCQltc2cuZ2F0ZS5pc09wZW4gPSB0cnVlOw0KICAJCW1zZy5nYXRlLm9wZW5lZEF0ID0gX2dhdGVPcGVuVFM7DQogIAkJLy9vcGVuIGNvbm5lY3Rpb24NCiAgCQlpZiAoc3R0U2VydmVyKXsNCiAgCQkJc3R0U2VydmVyLm9wZW5Db25uZWN0aW9uKCk7DQogIAkJfQ0KICAJfWVsc2Ugew0KICAJCV9nYXRlQ2xvc2VUUyA9IERhdGUubm93KCk7DQogIAkJZ2F0ZUlzT3BlbiA9IGZhbHNlOw0KICAJCW1zZy5nYXRlLmlzT3BlbiA9IGZhbHNlOw0KICAJCW1zZy5nYXRlLm9wZW5lZEF0ID0gX2dhdGVPcGVuVFM7DQogIAkJbXNnLmdhdGUuY2xvc2VkQXQgPSBfZ2F0ZUNsb3NlVFM7DQogIAkJLy8tLS0tLS0tLS0tIERSWS1SVU4gVEVTVDogZmFrZSBmaW5hbCByZXN1bHQgLS0tLS0tLS0tLQ0KICAJCWlmIChlbmFibGVEcnlSdW4gJiYgcmVjb3JkZWRCdWZmZXJzLmxlbmd0aCAmJiByZWNvcmRlZEJ1ZmZlcnMubGVuZ3RoID4gcmVjb3JkQnVmZmVyTWF4Ti8zKXsNCiAgCQkJc2V0VGltZW91dChmdW5jdGlvbigpew0KICAJCQkJLy9maW5hbCByZXN1bHQNCiAgCQkJCWlmIChtZXNzYWdlRm9ybWF0ID09ICJ3ZWJTcGVlY2hBcGkiKXsNCiAgCQkJCQlzZW5kV2ViU3BlZWNoQ29tcGF0aWJsZVJlY29nbml0aW9uUmVzdWx0KHRydWUsICJFbmQgb2YgdGVzdCBtZXNzYWdlIik7DQogIAkJCQl9ZWxzZSB7DQogIAkJCQkJc2VuZERlZmF1bHRSZWNvZ25pdGlvblJlc3VsdCh7InR5cGUiOiJyZXN1bHQiLCJtc2dfaWQiOkRhdGUubm93KCksImNvZGUiOjIwMCwidHJhbnNjcmlwdCI6IkVuZCBvZiB0ZXN0IG1lc3NhZ2UiLCJpc0ZpbmFsIjp0cnVlfSk7DQogIAkJCQl9DQogIAkJCX0sIDIwMDApOw0KICAJCS8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KICAJCX1lbHNlIGlmIChzdHRTZXJ2ZXIgJiYgc3R0U2VydmVyLmNvbm5lY3Rpb25Jc09wZW4gJiYgc3R0U2VydmVyLmlzUmVhZHlGb3JTdHJlYW0pew0KICAJCQl2YXIgY2xvc2VkRHVlVG9CdWZmZXJMaW1pdCA9IGNoZWNrSWZCdWZmZXJMaW1pdFdhc1JlYWNoZWQoKTsNCiAgCQkJaWYgKGNsb3NlZER1ZVRvQnVmZmVyTGltaXQpew0KICAJCQkJbXNnLmdhdGUuYnVmZmVyT3JUaW1lTGltaXQgPSB0cnVlOw0KICAJCQl9DQogIAkJCS8vY2xvc2UgaW5wdXQgYW5kIHJlcXVlc3QgZmluYWwgcmVzdWx0DQogIAkJCXJlcXVlc3RGaW5hbFJlc3VsdChjbG9zZWREdWVUb0J1ZmZlckxpbWl0KTsNCiAgCQl9DQogIAkJLy9lbHNlIHdlIHJlbHkgb24gJ19nYXRlQ2xvc2VUUycgdG8gZmluaXNoIGFmdGVyIGxhc3QgYnVmZmVyIGlzIHNlbnQNCg0KICAJCS8vc2VuZCBXQVY/DQogIAkJaWYgKCF0cmlnZ2VyZWRPbkVycm9yICYmIHJldHVybkF1ZGlvRmlsZSAmJiByZWNvcmRlZEJ1ZmZlcnMubGVuZ3RoKXsNCiAgCQkJc2V0VGltZW91dChmdW5jdGlvbigpew0KICAJCQkJc2VuZFdhdmVGaWxlQXJyYXlCdWZmZXIoZ2V0V2F2ZSgpKTsNCiAgCQkJfSwgMTAwKTsNCiAgCQl9DQogIAl9DQogIAlwb3N0TWVzc2FnZShtc2cpOw0KICB9DQoNCiAgZnVuY3Rpb24gZ2V0V2F2ZSgpew0KICAJdmFyIHZpZXc7DQogIAl2YXIgdG90YWxMZW5ndGggPSAwOw0KICAJcmVjb3JkZWRCdWZmZXJzLmZvckVhY2goZnVuY3Rpb24odil7DQogIAkJdG90YWxMZW5ndGggKz0gdi5ieXRlTGVuZ3RoOw0KICAJfSk7DQogIAlpZiAodG90YWxMZW5ndGgpew0KICAJCXZpZXcgPSBuZXcgRGF0YVZpZXcobmV3IEFycmF5QnVmZmVyKHRvdGFsTGVuZ3RoKSk7DQogIAkJdmFyIG9mZnNldCA9IDA7DQogIAkJcmVjb3JkZWRCdWZmZXJzLmZvckVhY2goZnVuY3Rpb24odil7DQogIAkJCWZvciAobGV0IGkgPSAwOyBpIDwgdi5ieXRlTGVuZ3RoOyBpKyspew0KICAJCQkJdmlldy5zZXRVaW50OChvZmZzZXQsIHYuZ2V0VWludDgoaSkpOw0KICAJCQkJb2Zmc2V0Kys7DQogIAkJCX0NCiAgCQl9KTsNCiAgCX0NCiAgCXJldHVybiB2aWV3Ow0KICB9DQoNCiAgLy9JbnRlcmZhY2UNCg0KICBmdW5jdGlvbiBjb25zdHJ1Y3RXb3JrZXIob3B0aW9ucyl7DQogIAlpZiAod2FzQ29uc3RydWN0b3JDYWxsZWQpew0KICAJCWNvbnNvbGUuZXJyb3IoIlN0dFNvY2tldFdvcmtlciAtIENvbnN0cnVjdG9yIHdhcyBjYWxsZWQgdHdpY2UhIDJuZCBjYWxsIHdhcyBpZ25vcmVkIGJ1dCB0aGlzIHNob3VsZCBiZSBmaXhlZCEiLCAiLSIsIHdvcmtlcklkKTsJLy9ERUJVRw0KICAJCXJldHVybjsNCiAgCX1lbHNlIHsNCiAgCQl3YXNDb25zdHJ1Y3RvckNhbGxlZCA9IHRydWU7DQogIAl9DQogIAlkb0RlYnVnID0gb3B0aW9ucy5zZXR1cC5kb0RlYnVnIHx8IGZhbHNlOw0KICAJcmV0dXJuQXVkaW9GaWxlID0gb3B0aW9ucy5zZXR1cC5yZXR1cm5BdWRpb0ZpbGUgfHwgZmFsc2U7DQoNCiAgCS8vcmVjb3JkZXINCiAgCWlucHV0U2FtcGxlUmF0ZSA9IG9wdGlvbnMuc2V0dXAuaW5wdXRTYW1wbGVSYXRlIHx8IG9wdGlvbnMuc2V0dXAuY3R4SW5mby50YXJnZXRTYW1wbGVSYXRlIHx8IG9wdGlvbnMuc2V0dXAuY3R4SW5mby5zYW1wbGVSYXRlOw0KICAJaW5wdXRTYW1wbGVTaXplID0gb3B0aW9ucy5zZXR1cC5pbnB1dFNhbXBsZVNpemUgfHwgNTEyOw0KICAJY2hhbm5lbENvdW50ID0gMTsJLy9vcHRpb25zLnNldHVwLmNoYW5uZWxDb3VudCB8fCAxOwkJLy9UT0RPOiBvbmx5IE1PTk8gYXRtDQogIAlsb29rYmFja0J1ZmZlck1zID0gKG9wdGlvbnMuc2V0dXAubG9va2JhY2tCdWZmZXJNcyAhPSB1bmRlZmluZWQpPyBvcHRpb25zLnNldHVwLmxvb2tiYWNrQnVmZmVyTXMgOiAwOw0KICAJaXNGbG9hdDMySW5wdXQgPSAob3B0aW9ucy5zZXR1cC5pc0Zsb2F0MzIgIT0gdW5kZWZpbmVkKT8gb3B0aW9ucy5zZXR1cC5pc0Zsb2F0MzIgOiBmYWxzZTsNCiAgCQ0KICAJaWYgKG9wdGlvbnMuc2V0dXAucmVjb3JkQnVmZmVyTGltaXRNcyAhPSB1bmRlZmluZWQpew0KICAJCXJlY29yZEJ1ZmZlck1heE4gPSAoaW5wdXRTYW1wbGVSYXRlICogb3B0aW9ucy5zZXR1cC5yZWNvcmRCdWZmZXJMaW1pdE1zLzEwMDApIC8gaW5wdXRTYW1wbGVTaXplOw0KICAJfWVsc2UgaWYgKG9wdGlvbnMuc2V0dXAucmVjb3JkQnVmZmVyTGltaXRLYiAhPSB1bmRlZmluZWQpew0KICAJCXJlY29yZEJ1ZmZlck1heE4gPSAob3B0aW9ucy5zZXR1cC5yZWNvcmRCdWZmZXJMaW1pdEtiICogMTAyNCkgLyAoMiAqIGlucHV0U2FtcGxlU2l6ZSk7DQogIAl9ZWxzZSB7DQogIAkJcmVjb3JkQnVmZmVyTWF4TiA9IDUyNDI4ODAgLyAoMiAqIGlucHV0U2FtcGxlU2l6ZSk7CS8vbWF4IDVNQiA9ICg1MjQyODgwW2J5dGVzXS8oYnl0ZXNQZXJTYW1wbGUgKiBzYW1wbGVTaXplKSkNCiAgCX0NCiAgCXJlY29yZEJ1ZmZlck1heE4gPSBNYXRoLmNlaWwocmVjb3JkQnVmZmVyTWF4Tik7DQogIAlpZiAocmVjb3JkQnVmZmVyTWF4TiA8IDApIHJlY29yZEJ1ZmZlck1heE4gPSAwOw0KDQogIAkvL2VuZCBvbiBmaXJzdCBmaW5hbCByZXN1bHQ/IC0gTk9URTogdGhpcyB3b3JrcyBhIGJpdCBkaWZmZXJlbnQgdGhhbiBXZWJTcGVlY2ggImNvbnRpbnVvdXMiDQogIAljb250aW51b3VzID0gKG9wdGlvbnMuc2V0dXAuY29udGludW91cyAhPSB1bmRlZmluZWQpPyBvcHRpb25zLnNldHVwLmNvbnRpbnVvdXMgOiBmYWxzZTsNCiAgCS8vaW50ZXJpbVJlc3VsdHMgKHVudXNlZD8pDQoNCiAgCS8vc2VydmVyDQogIAlzb2NrZXRVcmwgPSBvcHRpb25zLnNldHVwLnNvY2tldFVybCB8fCBvcHRpb25zLnNldHVwLnNlcnZlclVybCB8fCAiaHR0cDovL2xvY2FsaG9zdDoyMDc0MSI7DQogIAljbGllbnRJZCA9IG9wdGlvbnMuc2V0dXAuY2xpZW50SWQgfHwgImFueSI7DQogIAlhY2Nlc3NUb2tlbiA9IG9wdGlvbnMuc2V0dXAuYWNjZXNzVG9rZW4gfHwgInRlc3QxMjM0IjsNCiAgCW1lc3NhZ2VGb3JtYXQgPSBvcHRpb25zLnNldHVwLm1lc3NhZ2VGb3JtYXQgfHwgImRlZmF1bHQiOw0KICAJaWYgKHNvY2tldFVybCA9PSAiZGVidWciKXsNCiAgCQllbmFibGVEcnlSdW4gPSB0cnVlOw0KICAJCXJldHVybkF1ZGlvRmlsZSA9IHRydWU7DQogIAl9ZWxzZSB7DQogIAkJdmFyIGVuZ2luZU9wdGlvbnMgPSBvcHRpb25zLnNldHVwLmVuZ2luZU9wdGlvbnMgfHwge307CS8vYWxsIG9wdGlvbnMgKGNvbW1vbiBhbmQgZW5naW5lIHNwZWNpZmljKQ0KICAJCS8vY29tbW9uIG9wdGlvbiBzaG9ydGN1dHMgKG92ZXJ3cml0ZXMgZW5naW5lT3B0aW9ucyAtIHVzdWFsbHkgc3VwcG9ydGVkIGJ5IGFsbCBlbmdpbmVzKToNCiAgCQllbmdpbmVPcHRpb25zLnNhbXBsZXJhdGUgPSBpbnB1dFNhbXBsZVJhdGU7DQogIAkJZW5naW5lT3B0aW9ucy5jb250aW51b3VzID0gY29udGludW91czsNCiAgCQlpZiAob3B0aW9ucy5zZXR1cC5sYW5ndWFnZSkgZW5naW5lT3B0aW9ucy5sYW5ndWFnZSA9IG9wdGlvbnMuc2V0dXAubGFuZ3VhZ2U7CS8vZS5nLjogImRlLURFIg0KICAJCWlmIChvcHRpb25zLnNldHVwLnRhc2spIGVuZ2luZU9wdGlvbnMudGFzayA9IG9wdGlvbnMuc2V0dXAudGFzazsJCQkJLy9lLmcuOiAiY29udmVyc2F0aW9uIg0KICAJCWlmIChvcHRpb25zLnNldHVwLm1vZGVsKSBlbmdpbmVPcHRpb25zLm1vZGVsID0gb3B0aW9ucy5zZXR1cC5tb2RlbDsJCQkJLy9lLmcuOiAidm9zay1tb2RlbC1zbWFsbC1kZSINCiAgCQlpZiAob3B0aW9ucy5zZXR1cC5vcHRpbWl6ZUZpbmFsUmVzdWx0ICE9IHVuZGVmaW5lZCkgZW5naW5lT3B0aW9ucy5vcHRpbWl6ZUZpbmFsUmVzdWx0ID0gb3B0aW9ucy5zZXR1cC5vcHRpbWl6ZUZpbmFsUmVzdWx0Ow0KICAJCWVuZ2luZU9wdGlvbnMuZG9EZWJ1ZyA9IGRvRGVidWc7DQogIAkJLy9zcGVjaWFsIG9wdGlvbnMgKGUuZy4gZm9yIFZvc2spOg0KICAJCS8qDQogIAkJYWx0ZXJuYXRpdmVzOiAxLA0KICAJCXBocmFzZXM6IFtdLA0KICAJCXNwZWFrZXI6IGZhbHNlLA0KICAJCXdvcmRzOiBmYWxzZQ0KICAJCSovDQogIAkJLy9jb25zb2xlLmVycm9yKCJlbmdpbmVPcHRpb25zIiwgZW5naW5lT3B0aW9ucyk7CQkvL0RFQlVHDQogIAkJdmFyIHNlcnZlck9wdGlvbnMgPSB7DQogIAkJCW9uT3BlbjogZnVuY3Rpb24oKXsNCiAgCQkJCWlmIChkb0RlYnVnKSBjb25zb2xlLmVycm9yKCJTdHRTb2NrZXRXb3JrZXIgLSBERUJVRyAtIENPTk5FQ1RJT04gT1BFTiIpOw0KICAJCQkJc2VuZENvbm5lY3Rpb25FdmVudCgib3BlbiIpOw0KICAJCQl9LA0KICAJCQlvblJlYWR5OiBmdW5jdGlvbihhY3RpdmVPcHRpb25zKXsNCiAgCQkJCWlmIChkb0RlYnVnKSBjb25zb2xlLmVycm9yKCJTdHRTb2NrZXRXb3JrZXIgLSBERUJVRyAtIENPTk5FQ1RJT04gUkVBRFkiLCBhY3RpdmVPcHRpb25zKTsNCiAgCQkJCXNlbmRDb25uZWN0aW9uRXZlbnQoInJlYWR5IiwgYWN0aXZlT3B0aW9ucyk7DQogIAkJCQkvL21ha2Ugc3VyZSBzdHJlYW0gc3RhcnRzIG9yIGNvbnRpbnVlcw0KICAJCQkJc3RhcnRPckNvbnRpbnVlU3RyZWFtKCk7DQogIAkJCX0sDQogIAkJCW9uQ2xvc2U6IGZ1bmN0aW9uKCl7DQogIAkJCQlpZiAoZG9EZWJ1ZykgY29uc29sZS5lcnJvcigiU3R0U29ja2V0V29ya2VyIC0gREVCVUcgLSBDT05ORUNUSU9OIENMT1NFRCIpOw0KICAJCQkJc2VuZENvbm5lY3Rpb25FdmVudCgiY2xvc2VkIik7DQogIAkJCX0sDQogIAkJCW9uUmVzdWx0OiBmdW5jdGlvbihyZXMpew0KICAJCQkJaWYgKGRvRGVidWcpIGNvbnNvbGUuZXJyb3IoIlN0dFNvY2tldFdvcmtlciAtIERFQlVHIC0gQ09OTkVDVElPTiBSRVNVTFQiLCByZXMpOw0KICAJCQkJaWYgKG1lc3NhZ2VGb3JtYXQgPT0gIndlYlNwZWVjaEFwaSIpew0KICAJCQkJCXNlbmRXZWJTcGVlY2hDb21wYXRpYmxlUmVjb2duaXRpb25SZXN1bHQocmVzLmlzRmluYWwsIHJlcy50cmFuc2NyaXB0KTsNCiAgCQkJCX1lbHNlIHsNCiAgCQkJCQlzZW5kRGVmYXVsdFJlY29nbml0aW9uUmVzdWx0KHJlcyk7DQogIAkJCQl9DQogIAkJCQkvL2lmIHJlc3VsdCBpcyBmaW5hbCBhbmQgZ2F0ZSBpcyBjbG9zZWQgLT4gY2xvc2UgY29ubmVjdGlvbg0KICAJCQkJaWYgKHJlcy5pc0ZpbmFsICYmICFnYXRlSXNPcGVuICYmIHN0dFNlcnZlciAmJiBzdHRTZXJ2ZXIuY29ubmVjdGlvbklzT3Blbil7DQogIAkJCQkJc3R0U2VydmVyLmNsb3NlQ29ubmVjdGlvbigpOw0KICAJCQkJfQ0KICAJCQl9LA0KICAJCQlvbkVycm9yOiBmdW5jdGlvbihlcnIpeyANCiAgCQkJCWlmICghZXJyKSBlcnIgPSB7bmFtZTogIlVua25vd25FcnJvciIsIG1lc3NhZ2U6ICJVbmtub3duIGVycm9yIn07DQogIAkJCQljb25zb2xlLmVycm9yKCJTdHRTb2NrZXRXb3JrZXIgLSBDT05ORUNUSU9OIEVSUk9SIiwgZXJyKTsNCiAgCQkJCWlmIChtZXNzYWdlRm9ybWF0ID09ICJ3ZWJTcGVlY2hBcGkiKXsNCiAgCQkJCQl2YXIgcmVhc29uID0gInVua25vd24iOw0KICAJCQkJCWlmIChlcnIubmFtZSA9PSAiU29ja2V0Q29ubmVjdGlvbkVycm9yIil7DQogIAkJCQkJCXJlYXNvbiA9ICJuZXR3b3JrIjsNCiAgCQkJCQl9ZWxzZSBpZiAoZXJyLm5hbWUgPT0gIlVuYXV0aG9yaXplZCIpew0KICAJCQkJCQkvL3JlYXNvbiA9ICJub3QtYWxsb3dlZCI7CS8vTk9URTogY3VycmVudGx5IG1pc3Rha2VuIGZvciBtaWNyb3Bob25lIHBlcm1pc3Npb24gZXJyb3INCiAgCQkJCQkJcmVhc29uID0gInNlcnZpY2Utbm90LWFsbG93ZWQiOw0KICAJCQkJCX0NCiAgCQkJCQlzZW5kV2ViU3BlZWNoQ29tcGF0aWJsZUVycm9yKHJlYXNvbiwgZXJyLm1lc3NhZ2UgfHwgZXJyLm5hbWUgfHwgIiIpOw0KICAJCQkJfWVsc2Ugew0KICAJCQkJCXNlbmREZWZhdWx0RXJyb3JFdmVudChlcnIpOw0KICAJCQkJfQ0KICAJCQkJLy9tYWtlIHN1cmUgc3RyZWFtIHN0b3BzDQogIAkJCQlpZiAoZ2F0ZUlzT3Blbil7DQogIAkJCQkJZ2F0ZUNvbnRyb2woZmFsc2UsIHt9LCB0cnVlKTsNCiAgCQkJCX0NCiAgCQkJfQ0KICAJCX07DQogIAkJc3R0U2VydmVyID0gbmV3IFNlcGlhU3R0U29ja2V0Q2xpZW50KHNvY2tldFVybCwgY2xpZW50SWQsIGFjY2Vzc1Rva2VuLCBlbmdpbmVPcHRpb25zLCBzZXJ2ZXJPcHRpb25zKTsNCiAgCX0NCiAgCQ0KICAJaW5pdCgpOw0KICAgICAgCQ0KICAJcG9zdE1lc3NhZ2Uoew0KICAJCW1vZHVsZVN0YXRlOiAxLA0KICAJCW1vZHVsZUluZm86IHsNCiAgCQkJbW9kdWxlSWQ6IHdvcmtlcklkLA0KICAJCQlpbnB1dFNhbXBsZVJhdGU6IGlucHV0U2FtcGxlUmF0ZSwNCiAgCQkJaW5wdXRTYW1wbGVTaXplOiBpbnB1dFNhbXBsZVNpemUsDQogIAkJCWlucHV0SXNGbG9hdDMyOiBpc0Zsb2F0MzJJbnB1dCwNCiAgCQkJY2hhbm5lbENvdW50OiBjaGFubmVsQ291bnQsDQogIAkJCWxvb2tiYWNrQnVmZmVyU2l6ZUtiOiBNYXRoLmNlaWwoKF9sb29rYmFja0J1ZmZlclNpemUgKiAyKS8xMDI0KSwJLy8xIHNhbXBsZSA9IDIgYnl0ZXMNCiAgCQkJbG9va2JhY2tMaW1pdE1zOiBsb29rYmFja0J1ZmZlck1zLA0KICAJCQlyZWNvcmRMaW1pdE1zOiBNYXRoLmNlaWwoKHJlY29yZEJ1ZmZlck1heE4gKiBpbnB1dFNhbXBsZVNpemUgKiAxMDAwKS9pbnB1dFNhbXBsZVJhdGUpLA0KICAJCQlzdHRTZXJ2ZXJVcmw6IHNvY2tldFVybCwNCiAgCQkJc3R0U2VydmVyT3B0aW9uczogKHN0dFNlcnZlcj8gc3R0U2VydmVyLmFjdGl2ZU9wdGlvbnMgOiB7fSkNCiAgCQl9DQogIAl9KTsNCiAgfQ0KDQogIGZ1bmN0aW9uIHByb2Nlc3MoZGF0YSl7DQogIAkvL2V4cGVjdGVkOiBkYXRhLnNhbXBsZXMsIGRhdGEuc2FtcGxlUmF0ZSwgZGF0YS50YXJnZXRTYW1wbGVSYXRlLCBkYXRhLmNoYW5uZWxzLCBkYXRhLnR5cGUNCiAgCS8vVE9ETzogY2hlY2sgcHJvY2VzcyB2YWx1ZXMgYWdhaW5zdCBjb25zdHJ1Y3RvciB2YWx1ZXMgKHNhbXBsZVNpemUgZXRjLikNCiAgCWlmIChkYXRhICYmIGRhdGEuc2FtcGxlcyl7DQogIAkJaWYgKF9pc0ZpcnN0VmFsaWRQcm9jZXNzKXsNCiAgCQkJLy9jb25zb2xlLmVycm9yKCJkYXRhIGluZm8iLCBkYXRhKTsJCS8vREVCVUcNCiAgCQkJX2lzRmlyc3RWYWxpZFByb2Nlc3MgPSBmYWxzZTsNCiAgCQkJLy9jaGVjazogaW5wdXRTYW1wbGVSYXRlLCBpbnB1dFNhbXBsZVNpemUsIGNoYW5uZWxDb3VudCwgZmxvYXQzMg0KICAJCQlpZiAoZGF0YS5zYW1wbGVSYXRlICE9IGlucHV0U2FtcGxlUmF0ZSl7DQogIAkJCQl2YXIgbXNnID0gIlNhbXBsZS1yYXRlIG1pc21hdGNoISBTaG91bGQgYmUgJyIgKyBpbnB1dFNhbXBsZVJhdGUgKyAiJyBpcyAnIiArIGRhdGEuc2FtcGxlUmF0ZSArICInIjsNCiAgCQkJCWNvbnNvbGUuZXJyb3IoIkF1ZGlvIFdvcmtlciBzYW1wbGUtcmF0ZSBleGNlcHRpb24gLSBNc2cuOiAiICsgbXNnKTsNCiAgCQkJCXRocm93IEpTT04uc3RyaW5naWZ5KG5ldyBTYW1wbGVSYXRlRXhjZXB0aW9uKG1zZykpOwkJCS8vTk9URTogdGhpcyBuZWVkcyB0byBiZSBhIHN0cmluZyB0byBzaG93IHVwIGluIHdvcmtlci5vbmVycm9yIHByb3Blcmx5IDotLw0KICAJCQl9DQogIAkJCXZhciBpbnB1dEFycmF5VHlwZSA9IGRhdGEudHlwZSB8fCBkYXRhLnNhbXBsZXNbMF0uY29uc3RydWN0b3IubmFtZTsNCiAgCQkJdmFyIGlzRmxvYXQzMiA9IChpbnB1dEFycmF5VHlwZS5pbmRleE9mKCJGbG9hdDMyIikgPj0gMCk7DQogIAkJCWlmIChpc0Zsb2F0MzIgIT0gaXNGbG9hdDMySW5wdXQpew0KICAJCQkJdmFyIG1zZyA9ICJBcnJheSB0eXBlIG1pc21hdGNoISBJbnB1dCBzYW1wbGVzIGFyZSBvZiB0eXBlICciICsgaW5wdXRBcnJheVR5cGUgKyAiJyBidXQgZXhwZWN0ZWQ6ICIgKyAoaXNGbG9hdDMySW5wdXQ/ICJGbG9hdDMyIiA6ICJJbnQxNiIpOw0KICAJCQkJY29uc29sZS5lcnJvcigiQXVkaW8gV29ya2VyIHR5cGUgZXhjZXB0aW9uIC0gTXNnLjogIiArIG1zZyk7DQogIAkJCQl0aHJvdyBKU09OLnN0cmluZ2lmeShuZXcgQXJyYXlUeXBlRXhjZXB0aW9uKG1zZykpOwkJCS8vTk9URTogdGhpcyBuZWVkcyB0byBiZSBhIHN0cmluZyB0byBzaG93IHVwIGluIHdvcmtlci5vbmVycm9yIHByb3Blcmx5IDotLw0KICAJCQl9DQogIAkJfQ0KICAJCWlmIChnYXRlSXNPcGVuKXsNCiAgCQkJYnVpbGRQY21DaHVua3MoZGF0YSk7DQogIAkJCQ0KICAJCX1lbHNlIGlmIChsb29rYmFja0J1ZmZlck1zICYmICFsb29rYmFja0J1ZmZlcklzQmxvY2tlZCl7DQogIAkJCS8vZG8gdGhpcyBvbmx5IHVudGlsIGdhdGUgd2FzIG9wZW5lZCAuLiB0aGVuIHdhaXQgZm9yIGJ1ZmZlciBleHBvcnQvY2xlYXINCiAgCQkJX2xvb2tiYWNrUmluZ0J1ZmZlci5wdXNoKGRhdGEuc2FtcGxlcyk7DQogIAkJfQ0KICAJfQ0KICB9DQoNCiAgZnVuY3Rpb24gYnVpbGRQY21DaHVua3MoZGF0YSl7DQogIAkvL2luZGV4IDANCiAgCWlmIChyZWNvcmRlZEJ1ZmZlcnMubGVuZ3RoID09IDApew0KICAJCS8vMCAtLSBidWlsZCBoZWFkZXINCiAgCQlyZWNvcmRlZEJ1ZmZlcnMucHVzaChnZXRIZWFkZXJGb3JXQVYodW5kZWZpbmVkLCBpbnB1dFNhbXBsZVJhdGUsIGNoYW5uZWxDb3VudCkpOw0KICAJCS8vMSAtLSBhZGQgbG9va2JhY2sgc2FtcGxlcyAtLSBUT0RPOiB0ZXN0IQ0KICAJCWlmIChfbG9va2JhY2tSaW5nQnVmZmVyICYmIF9sb29rYmFja1JpbmdCdWZmZXIuZnJhbWVzQXZhaWxhYmxlKXsNCiAgCQkJLy9wdWxsIGFsbCBsb29rYmFjayBzYW1wbGVzDQogIAkJCXZhciBsb29rYmFja1NhbXBsZXM7DQogIAkJCWlmIChpc0Zsb2F0MzJJbnB1dCl7DQogIAkJCQlsb29rYmFja1NhbXBsZXMgPSBbbmV3IEZsb2F0MzJBcnJheShfbG9va2JhY2tSaW5nQnVmZmVyLmZyYW1lc0F2YWlsYWJsZSldOw0KICAJCQl9ZWxzZSB7DQogIAkJCQlsb29rYmFja1NhbXBsZXMgPSBbbmV3IEludDE2QXJyYXkoX2xvb2tiYWNrUmluZ0J1ZmZlci5mcmFtZXNBdmFpbGFibGUpXTsNCiAgCQkJfQ0KICAJCQlfbG9va2JhY2tSaW5nQnVmZmVyLnB1bGwobG9va2JhY2tTYW1wbGVzKTsNCiAgCQkJLy9lbmNvZGUgYW5kIGFkZA0KICAJCQlyZWNvcmRlZEJ1ZmZlcnMucHVzaChlbmNvZGVXQVYodW5kZWZpbmVkLCBsb29rYmFja1NhbXBsZXNbMF0sIGlucHV0U2FtcGxlUmF0ZSwgY2hhbm5lbENvdW50LCBpc0Zsb2F0MzJJbnB1dCkpOw0KICAJCX0NCiAgCQlpZiAoZG9EZWJ1ZykgY29uc29sZS5lcnJvcigiU3R0U29ja2V0V29ya2VyIC0gREVCVUcgLSBIZWFkZXIgYW5kIExvb2tiYWNrIEJ1ZmZlciAob3B0aW9uYWwpIiwgcmVjb3JkZWRCdWZmZXJzKTsNCiAgCX0NCiAgCWlmIChkYXRhKXsNCiAgCQkvL1RPRE86IHRoaXMgd2lsbCBhbHdheXMgYmUgb25lIGNoYW5uZWwgT05MWSBzaW5jZSB0aGUgc2lnbmFsIGlzIGludGVybGVhdmVkDQogIAkJcmVjb3JkZWRCdWZmZXJzLnB1c2goZW5jb2RlV0FWKHVuZGVmaW5lZCwgZGF0YS5zYW1wbGVzWzBdLCBpbnB1dFNhbXBsZVJhdGUsIGNoYW5uZWxDb3VudCwgaXNGbG9hdDMySW5wdXQpKTsNCiAgCX0NCiAgCS8vLS0tLS0tLS0tLSBEUlktUlVOIFRFU1Q6IGZha2UgcGFydGlhbCByZXN1bHQgLS0tLS0tLS0tLQ0KICAJaWYgKGVuYWJsZURyeVJ1bil7DQogIAkJaWYgKHJlY29yZGVkQnVmZmVycy5sZW5ndGggPT0gTWF0aC5jZWlsKHJlY29yZEJ1ZmZlck1heE4vNCkpew0KICAJCQlpZiAoZG9EZWJ1ZykgY29uc29sZS5lcnJvcigiU3R0U29ja2V0V29ya2VyIC0gREVCVUcgLSBSZWFjaGVkIGEgcXVhcnRlciBvZiBtYXguIHRpbWUiLCByZWNvcmRlZEJ1ZmZlcnMubGVuZ3RoKTsNCiAgCQkJaWYgKG1lc3NhZ2VGb3JtYXQgPT0gIndlYlNwZWVjaEFwaSIpew0KICAJCQkJc2VuZFdlYlNwZWVjaENvbXBhdGlibGVSZWNvZ25pdGlvblJlc3VsdChmYWxzZSwgIkVuZCBvZiAuLi4iKTsNCiAgCQkJfWVsc2Ugew0KICAJCQkJc2VuZERlZmF1bHRSZWNvZ25pdGlvblJlc3VsdCh7InR5cGUiOiJyZXN1bHQiLCJtc2dfaWQiOkRhdGUubm93KCksImNvZGUiOjIwMCwidHJhbnNjcmlwdCI6IkVuZCBvZiAuLi4iLCJpc0ZpbmFsIjpmYWxzZX0pOw0KICAJCQl9DQogIAkJfQ0KICAJLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQogIAl9ZWxzZSBpZiAoc3R0U2VydmVyICYmIHN0dFNlcnZlci5jb25uZWN0aW9uSXNPcGVuICYmIHN0dFNlcnZlci5pc1JlYWR5Rm9yU3RyZWFtKXsNCiAgCQkvL3NlbmQgYnVmZmVyDQogIAkJc3RhcnRPckNvbnRpbnVlU3RyZWFtKCk7DQogIAl9DQogIAkvL21heCBsZW5ndGgNCiAgCWlmIChyZWNvcmRCdWZmZXJNYXhOICYmIHJlY29yZGVkQnVmZmVycy5sZW5ndGggPj0gcmVjb3JkQnVmZmVyTWF4Til7DQogIAkJbWF4TGVuZ3RoUmVhY2hlZCgpOw0KICAJfQ0KICAJaWYgKCFsb29rYmFja0J1ZmZlcklzQmxvY2tlZCkgbG9va2JhY2tCdWZmZXJJc0Jsb2NrZWQgPSB0cnVlOw0KICB9DQoNCiAgZnVuY3Rpb24gc3RhcnRPckNvbnRpbnVlU3RyZWFtKCl7DQogIAkvL2J1ZmZlciBoYXMgZGF0YSBhbmQgbm90aGluZyBoYXMgYmVlbiBzZW50IHlldA0KICAJaWYgKCFfc2VudEJ1ZmZlcnMgJiYgcmVjb3JkZWRCdWZmZXJzLmxlbmd0aCl7DQogIAkJLy9zZW5kIGFsbCBhdCBvbmNlDQogIAkJdmFyIGRhdGEgPSBuZXcgQmxvYihyZWNvcmRlZEJ1ZmZlcnMpOw0KICAJCV9zZW50QnVmZmVycyA9IHJlY29yZGVkQnVmZmVycy5sZW5ndGg7DQogIAkJc2VuZEJ5dGVzKGRhdGEpOw0KICAJDQogIAkvL2J1ZmZlciBoYXMgZGF0YSBhbmQgc29tZSBoYXMgYmVlbiBzZW50IGFscmVhZHkNCiAgCX1lbHNlIGlmIChfc2VudEJ1ZmZlcnMgJiYgcmVjb3JkZWRCdWZmZXJzLmxlbmd0aCl7DQogIAkJdmFyIG5vcm1hbGl6ZWRMZW5ndGggPSByZWNvcmRlZEJ1ZmZlcnMubGVuZ3RoICsgX3NoaWZ0ZWRCdWZmZXJzOyAvL3Rha2Ugc2hpZnRlZCBkYXRhIGludG8gYWNjb3VudA0KICAJCWlmIChfc2VudEJ1ZmZlcnMgPT0gKG5vcm1hbGl6ZWRMZW5ndGggLSAxKSl7DQogIAkJCS8vc2VuZCBsYXN0DQogIAkJCXZhciBkYXRhID0gcmVjb3JkZWRCdWZmZXJzW3JlY29yZGVkQnVmZmVycy5sZW5ndGggLSAxXTsNCiAgCQkJX3NlbnRCdWZmZXJzKys7DQogIAkJCXNlbmRCeXRlcyhkYXRhKTsNCg0KICAJCX1lbHNlIGlmIChfc2VudEJ1ZmZlcnMgPCBub3JtYWxpemVkTGVuZ3RoKXsNCiAgCQkJLy9zZW5kIHJlc3QgYXQgb25jZQ0KICAJCQl2YXIgcmVzdE4gPSBub3JtYWxpemVkTGVuZ3RoIC0gX3NlbnRCdWZmZXJzOw0KICAJCQl2YXIgZGF0YSA9IG5ldyBCbG9iKHJlY29yZGVkQnVmZmVycy5zbGljZSgtMSAqIHJlc3ROKSk7DQogIAkJCV9zZW50QnVmZmVycyArPSByZXN0TjsNCiAgCQkJc2VuZEJ5dGVzKGRhdGEpOw0KICAJCQ0KICAJCX1lbHNlOw0KICAJLy9ubyBkYXRhIHlldA0KICAJfWVsc2U7DQogIAkvL25vIGJ5dGVzIGxlZnQgYW5kIHN0cmVhbSBlbmRlZD8NCiAgCWlmIChfZ2F0ZUNsb3NlVFMpew0KICAJCXZhciBjbG9zZWREdWVUb0J1ZmZlckxpbWl0ID0gY2hlY2tJZkJ1ZmZlckxpbWl0V2FzUmVhY2hlZCgpOw0KICAJCXJlcXVlc3RGaW5hbFJlc3VsdChjbG9zZWREdWVUb0J1ZmZlckxpbWl0KTsNCiAgCX0NCiAgfQ0KICBmdW5jdGlvbiBzZW5kQnl0ZXMoZGF0YSl7DQogIAlzdHRTZXJ2ZXIuc2VuZEJ5dGVzKGRhdGEpOw0KICB9DQoNCiAgZnVuY3Rpb24gcmVxdWVzdEZpbmFsUmVzdWx0KGNsb3NlZER1ZVRvQnVmZmVyTGltaXQpew0KICAJLy9jbG9zZSBpbnB1dCBhbmQgcmVxdWVzdCBmaW5hbCByZXN1bHQNCiAgCXZhciBieXRlTGVuZ3RoID0gMDsNCiAgCXJlY29yZGVkQnVmZmVycy5mb3JFYWNoKGZ1bmN0aW9uKHRhKXsNCiAgCQlieXRlTGVuZ3RoICs9IHRhLmJ5dGVMZW5ndGg7DQogIAl9KTsNCiAgCXN0dFNlcnZlci5zZW5kQXVkaW9FbmQoYnl0ZUxlbmd0aCwgY2xvc2VkRHVlVG9CdWZmZXJMaW1pdCk7DQogIH0NCg0KICBmdW5jdGlvbiBjaGVja0lmQnVmZmVyTGltaXRXYXNSZWFjaGVkKCl7DQogIAl2YXIgcmVhY2hlZEJ1ZmZlckxpbWl0ID0gKCFjb250aW51b3VzICYmIHJlY29yZGVkQnVmZmVycyAmJiByZWNvcmRCdWZmZXJNYXhOIA0KICAJCSYmIHJlY29yZGVkQnVmZmVycy5sZW5ndGggJiYgcmVjb3JkZWRCdWZmZXJzLmxlbmd0aCA+PSByZWNvcmRCdWZmZXJNYXhOKTsNCiAgCXJldHVybiByZWFjaGVkQnVmZmVyTGltaXQ7DQogIH0NCg0KICAvL3JlYWNoZWQgbWF4IHJlY29yZGluZyBsZW5ndGgNCiAgZnVuY3Rpb24gbWF4TGVuZ3RoUmVhY2hlZCgpew0KICAJaWYgKGNvbnRpbnVvdXMpew0KICAJCS8vZHJvcCBvbGQgYnVmZmVyDQogIAkJdmFyIHNoaWZ0ID0gKHJlY29yZGVkQnVmZmVycy5sZW5ndGggLSByZWNvcmRCdWZmZXJNYXhOKTsNCiAgCQlfc2hpZnRlZEJ1ZmZlcnMgKz0gc2hpZnQ7DQogIAkJcmVjb3JkZWRCdWZmZXJzLnNwbGljZSgwLCBzaGlmdCk7DQogIAl9ZWxzZSB7DQogIAkJLy9jbG9zZQ0KICAJCWlmIChnYXRlSXNPcGVuKXsNCiAgCQkJZ2F0ZUNvbnRyb2woZmFsc2UpOw0KICAJCX0NCiAgCX0NCiAgCS8vVE9ETzogZG8gbW9yZSAuLi4gPw0KICB9DQoNCiAgLy9zZW5kIHJlc3VsdCBtZXNzYWdlIChwYXJ0aWFsIG9yIGZpbmFsKQ0KICBmdW5jdGlvbiBzZW5kV2ViU3BlZWNoQ29tcGF0aWJsZVJlY29nbml0aW9uUmVzdWx0KGlzRmluYWwsIHRyYW5zY3JpcHQpew0KICAJaWYgKGlzRmluYWwgJiYgIXRyYW5zY3JpcHQpew0KICAJCS8vdGhpcyBpcyBhY3R1YWxseSBhICdub21hdGNoJy8nbm8tc3BlZWNoJyBlcnJvciAobm8tc3BlZWNoIHVzdWFsbHkgZmFpbHMgbW9yZSBnZW50bHkpDQogIAkJc2VuZFdlYlNwZWVjaENvbXBhdGlibGVFcnJvcigibm8tc3BlZWNoIiwgIkZpbmFsIHJlc3VsdCB3YXMgZW1wdHkiKTsNCiAgCX1lbHNlIHsNCiAgCQlwb3N0TWVzc2FnZSh7DQogIAkJCXJlY29nbml0aW9uRXZlbnQ6IHsNCiAgCQkJCXR5cGU6ICJyZXN1bHQiLA0KICAJCQkJcmVzdWx0SW5kZXg6IDAsDQogIAkJCQlyZXN1bHRzOiBbew0KICAJCQkJCWlzRmluYWw6IGlzRmluYWwsDQogIAkJCQkJIjAiOiB7DQogIAkJCQkJCXRyYW5zY3JpcHQ6IHRyYW5zY3JpcHQNCiAgCQkJCQl9DQogIAkJCQl9XSwNCiAgCQkJCXRpbWVTdGFtcDogRGF0ZS5ub3coKQ0KICAJCQl9LA0KICAJCQlldmVudEZvcm1hdDogIndlYlNwZWVjaEFwaSINCiAgCQl9KTsNCiAgCX0NCiAgfQ0KICBmdW5jdGlvbiBzZW5kRGVmYXVsdFJlY29nbml0aW9uUmVzdWx0KGV2ZW50KXsNCiAgCWlmIChldmVudCAmJiAhZXZlbnQudHlwZSkgZXZlbnQudHlwZSA9ICJyZXN1bHQiOw0KICAJcG9zdE1lc3NhZ2Uoew0KICAJCXJlY29nbml0aW9uRXZlbnQ6IGV2ZW50LA0KICAJCWV2ZW50Rm9ybWF0OiAiZGVmYXVsdCINCiAgCX0pOw0KICB9DQogIGZ1bmN0aW9uIHNlbmRDb25uZWN0aW9uRXZlbnQodHlwZSwgZGF0YSl7DQogIAlwb3N0TWVzc2FnZSh7DQogIAkJY29ubmVjdGlvbkV2ZW50OiB7DQogIAkJCXR5cGU6IHR5cGUsDQogIAkJCWRhdGE6IGRhdGENCiAgCQl9DQogIAl9KTsNCiAgfQ0KICAvL3NlbmQgZXJyb3IgbWVzc2FnZQ0KICBmdW5jdGlvbiBzZW5kV2ViU3BlZWNoQ29tcGF0aWJsZUVycm9yKGVycm9yTmFtZSwgZXJyb3JNZXNzYWdlKXsNCiAgCXZhciBldmVudE5hbWUgPSAiZXJyb3IiOwkvL3Bvc3NpYmxlIGFzIHdlbGw6ICJub21hdGNoIg0KICAJLypzdXBwb3J0ZWQgZXJyb3JzOg0KICAJCSJuZXR3b3JrIiAoMSwgMjogdGltZW91dCwgODogYnVzeSwgMTA6IHJhdGUtbGltaXQpDQogIAkJImF1ZGlvLWNhcHR1cmUiICgzLCBoYXBwZW5zIGJlZm9yZSB3b3JrZXIpDQogIAkJInVua25vd24iICg0LCA1KQ0KICAJCSJuby1zcGVlY2giICg2KQ0KICAJCSJub21hdGNoIiAoNywgdXNlIGV2ZW50TmFtZSkNCiAgCQkiYWJvcnRlZCIgKD8pDQogIAkJIm5vdC1hbGxvd2VkIiAoOSkgLyAic2VydmljZS1ub3QtYWxsb3dlZCINCiAgCQkiYmFkLWdyYW1tYXIiICg/KQ0KICAJCSJsYW5ndWFnZS1ub3Qtc3VwcG9ydGVkIiAoMTIsIDEzKQ0KICAJKi8NCiAgCXBvc3RNZXNzYWdlKHsNCiAgCQlyZWNvZ25pdGlvbkV2ZW50OiB7DQogIAkJCXR5cGU6IGV2ZW50TmFtZSwNCiAgCQkJZXJyb3I6IGVycm9yTmFtZSwNCiAgCQkJbWVzc2FnZTogZXJyb3JNZXNzYWdlLA0KICAJCQl0aW1lU3RhbXA6IERhdGUubm93KCkNCiAgCQl9LA0KICAJCWV2ZW50Rm9ybWF0OiAid2ViU3BlZWNoQXBpIg0KICAJfSk7DQogIH0NCiAgZnVuY3Rpb24gc2VuZERlZmF1bHRFcnJvckV2ZW50KGVycm9yKXsNCiAgCWlmIChlcnJvciAmJiAhZXJyb3IudHlwZSkgZXJyb3IudHlwZSA9ICJlcnJvciI7DQogIAlwb3N0TWVzc2FnZSh7DQogIAkJcmVjb2duaXRpb25FdmVudDogZXJyb3IsDQogIAkJZXZlbnRGb3JtYXQ6ICJkZWZhdWx0Ig0KICAJfSk7DQogIH0NCg0KICAvL3NlbmQgd2F2ZSBmaWxlIGFzIGFycmF5IGJ1ZmZlciAoZGF0YSB2aWV3KQ0KICBmdW5jdGlvbiBzZW5kV2F2ZUZpbGVBcnJheUJ1ZmZlcih2aWV3KXsNCiAgCXBvc3RNZXNzYWdlKHsNCiAgCQltb2R1bGVSZXNwb25zZTogdHJ1ZSwJLy9za2lwIG1lc3NhZ2UgZm9yd2FyZGluZz8NCiAgCQlvdXRwdXQ6IHsNCiAgCQkJd2F2OiB2aWV3LA0KICAJCQlzYW1wbGVSYXRlOiBpbnB1dFNhbXBsZVJhdGUsDQogIAkJCXRvdGFsU2FtcGxlczogKCh2aWV3LmJ5dGVMZW5ndGggLSA0NCkvX2J5dGVzUGVyU2FtcGxlKSwNCiAgCQkJY2hhbm5lbHM6IGNoYW5uZWxDb3VudA0KICAJCX0NCiAgCX0pOw0KICB9DQoNCiAgZnVuY3Rpb24gaGFuZGxlRXZlbnQoZGF0YSl7DQogIAkvL1RPRE86IGFueXRoaW5nIHRvIGRvPw0KICB9DQoNCiAgZnVuY3Rpb24gc3RhcnQob3B0aW9ucyl7DQogICAgICAvL3dlIGRvIG5vdGhpbmcgYnV0IHdhaXQgZm9yIGRhdGEgb3IgZ2F0ZS1vcGVuIHNpZ25hbA0KICAJLy9OT1RFOiB0aW1pbmcgb2YgdGhpcyBzaWduYWwgaXMgbm90IHZlcnkgd2VsbCBkZWZpbmVkDQogIH0NCiAgZnVuY3Rpb24gc3RvcChvcHRpb25zKXsNCiAgCS8vbWFrZSBzdXJlIHRoYXQgZ2F0ZSBpcyBjbG9zZWQgLi4uIFRPRE86IGFueXRoaW5nIGVsc2U/DQogIAlpZiAoZ2F0ZUlzT3Blbil7DQogIAkJZ2F0ZUNvbnRyb2woZmFsc2UpOw0KICAJfQ0KICAJLy9OT1RFIDE6IEluIHRoaXMgY2FzZSBhIHN0b3BwZWQgd29ya2VyIGNhbiBzdGlsbCBzZW5kIHBhcnRpYWwgb3IgZmluYWwgcmVzdWx0cy4NCiAgCS8vTk9URSAyOiB0aW1pbmcgb2YgdGhpcyBzaWduYWwgaXMgbm90IHZlcnkgd2VsbCBkZWZpbmVkDQogIH0NCiAgZnVuY3Rpb24gcmVzZXQob3B0aW9ucyl7DQogIAkvL2NsZWFuIHVwIGNvbm5lY3Rpb24NCiAgCWlmIChzdHRTZXJ2ZXIgJiYgc3R0U2VydmVyLmNvbm5lY3Rpb25Jc09wZW4pew0KICAJCXN0dFNlcnZlci5jbG9zZUNvbm5lY3Rpb24oKTsNCiAgCQkvL05PVEU6IHdlIHRyeSB0byByZXVzZSB0aGlzIGluc3RhbmNlDQogIAl9DQogICAgICAvL2NsZWFuIHVwIHdvcmtlcg0KICAJaW5pdCgpOw0KICAJLy9UT0RPOiBhbnl0aGluZyBlbHNlPw0KICB9DQogIGZ1bmN0aW9uIHJlbGVhc2Uob3B0aW9ucyl7DQogIAkvL3RoaXMgaXMgZXhwZWN0ZWQgdG8gaGFwcGVuIGFmdGVyIGZpbmFsIHJlc3VsdCAob3IgYWJvcnQpIHNvOiBjbGVhbiB1cCBjb25uZWN0aW9uDQogIAlpZiAoc3R0U2VydmVyICYmIHN0dFNlcnZlci5jb25uZWN0aW9uSXNPcGVuKXsNCiAgCQlzdHRTZXJ2ZXIuY2xvc2VDb25uZWN0aW9uKCk7DQogIAl9DQogIAkvL2NsZWFuIHVwIHdvcmtlciBhbmQgY2xvc2UNCiAgCV9sb29rYmFja1JpbmdCdWZmZXIgPSBudWxsOw0KICAJcmVjb3JkZWRCdWZmZXJzID0gbnVsbDsNCiAgCV9zZW50QnVmZmVycyA9IHVuZGVmaW5lZDsNCiAgCV9zaGlmdGVkQnVmZmVycyA9IHVuZGVmaW5lZDsNCiAgCWdhdGVJc09wZW4gPSBmYWxzZTsNCiAgCV9nYXRlT3BlblRTID0gMDsNCiAgCV9nYXRlQ2xvc2VUUyA9IDA7DQogIAkvL25vdGlmeSBwcm9jZXNzb3IgdGhhdCB3ZSBjYW4gdGVybWluYXRlIG5vdw0KICAJcG9zdE1lc3NhZ2Uoew0KICAJCW1vZHVsZVN0YXRlOiA5DQogIAl9KTsNCiAgfQ0KDQogIC8vLS0tIGhlbHBlcnMgLS0tDQoNCiAgZnVuY3Rpb24gU2FtcGxlUmF0ZUV4Y2VwdGlvbihtZXNzYWdlKSB7DQogIAl0aGlzLm1lc3NhZ2UgPSBtZXNzYWdlOw0KICAJdGhpcy5uYW1lID0gIlNhbXBsZVJhdGVFeGNlcHRpb24iOw0KICB9DQogIGZ1bmN0aW9uIEFycmF5VHlwZUV4Y2VwdGlvbihtZXNzYWdlKSB7DQogIAl0aGlzLm1lc3NhZ2UgPSBtZXNzYWdlOw0KICAJdGhpcy5uYW1lID0gIkFycmF5VHlwZUV4Y2VwdGlvbiI7DQogIH0NCg0KICAvL0dldCBoZWFkZXIgZm9yIHNhbXBsZXMgb3IgbWF4IHNpemUgLSBGb3JtYXQgZGVzY3JpcHRpb246IGh0dHA6Ly9zb3VuZGZpbGUuc2FwcC5vcmcvZG9jL1dhdmVGb3JtYXQvDQogIGZ1bmN0aW9uIGdldEhlYWRlckZvcldBVihzYW1wbGVzLCBzYW1wbGVSYXRlLCBudW1DaGFubmVscyl7DQogIAl2YXIgYml0RGVwdGggPSBlbmNvZGVyQml0RGVwdGg7DQogIAl2YXIgYnl0ZXNQZXJTYW1wbGUgPSBfYnl0ZXNQZXJTYW1wbGU7DQogIAl2YXIgdmlldyA9IHNhbXBsZXM/IG5ldyBEYXRhVmlldyhuZXcgQXJyYXlCdWZmZXIoNDQgKyBzYW1wbGVzLmxlbmd0aCAqIGJ5dGVzUGVyU2FtcGxlKSkgOiBuZXcgRGF0YVZpZXcobmV3IEFycmF5QnVmZmVyKDQ0KSk7DQogIAkvL05PVEU6IHRoaXMgc2hvdWxkIGJlICJyZWFsIiBzaXplIGJ1dCBpZiB3ZSBkb24ndCBrbm93IHlldCB0YWtlIG1heCBzaXplIC0gbWF4IHNpemUgaW5jbHVkZXMgbG9va2JhY2sNCiAgCXZhciBzYW1wbGVTaXplID0gc2FtcGxlcz8gc2FtcGxlcy5sZW5ndGggOiAocmVjb3JkQnVmZmVyTWF4TiAqIGlucHV0U2FtcGxlU2l6ZSk7DQogIAkvL1JJRkYgaWRlbnRpZmllcg0KICAJd2F2V3JpdGVTdHJpbmcodmlldywgMCwgJ1JJRkYnKTsNCiAgCXZpZXcuc2V0VWludDMyKDQsIDM2ICsgKHNhbXBsZVNpemUgKiBudW1DaGFubmVscyAqIGJ5dGVzUGVyU2FtcGxlKSwgdHJ1ZSk7CS8vVE9ETzogd2FzIChzYW1wbGVzLmxlbmd0aCAqIDIpDQogIAl3YXZXcml0ZVN0cmluZyh2aWV3LCA4LCAnV0FWRScpOw0KICAJd2F2V3JpdGVTdHJpbmcodmlldywgMTIsICdmbXQgJyk7DQogIAl2aWV3LnNldFVpbnQzMigxNiwgMTYsIHRydWUpOwkvLzE2IGZvciBQQ00NCiAgCXZpZXcuc2V0VWludDE2KDIwLCAxLCB0cnVlKTsJLy8xIGZvciBQQ00NCiAgCXZpZXcuc2V0VWludDE2KDIyLCBudW1DaGFubmVscywgdHJ1ZSk7DQogIAl2aWV3LnNldFVpbnQzMigyNCwgc2FtcGxlUmF0ZSwgdHJ1ZSk7DQogIAl2aWV3LnNldFVpbnQzMigyOCwgc2FtcGxlUmF0ZSAqIGJ5dGVzUGVyU2FtcGxlICogbnVtQ2hhbm5lbHMsIHRydWUpOwkvL1RPRE86IHdhcyAoc2FtcGxlUmF0ZSAqIDQpDQogIAl2aWV3LnNldFVpbnQxNigzMiwgbnVtQ2hhbm5lbHMgKiBieXRlc1BlclNhbXBsZSwgdHJ1ZSk7DQogIAl2aWV3LnNldFVpbnQxNigzNCwgYml0RGVwdGgsIHRydWUpOw0KICAJd2F2V3JpdGVTdHJpbmcodmlldywgMzYsICdkYXRhJyk7DQogIAl2aWV3LnNldFVpbnQzMig0MCwgKHNhbXBsZVNpemUgKiBudW1DaGFubmVscyAqIGJ5dGVzUGVyU2FtcGxlKSwgdHJ1ZSk7DQogIAlyZXR1cm4gdmlldzsNCiAgfQ0KICBmdW5jdGlvbiBlbmNvZGVXQVYoaGVhZGVyVmlldywgc2FtcGxlcywgc2FtcGxlUmF0ZSwgbnVtQ2hhbm5lbHMsIGNvbnZlcnRGcm9tRmxvYXQzMil7DQogIAlpZiAoIXNhbXBsZXMgfHwgIXNhbXBsZVJhdGUgfHwgIW51bUNoYW5uZWxzKXsNCiAgCQljb25zb2xlLmVycm9yKCJTdHRTb2NrZXRXb3JrZXIgLSBlbmNvZGVXQVYgLSBNaXNzaW5nIHBhcmFtZXRlcnMiKTsNCiAgCQlyZXR1cm47DQogIAl9DQogIAl2YXIgdmlldzsNCiAgCXZhciBvZmZzZXQ7DQogIAlpZiAoIWhlYWRlclZpZXcpew0KICAJCXZpZXcgPSBuZXcgRGF0YVZpZXcobmV3IEFycmF5QnVmZmVyKHNhbXBsZXMubGVuZ3RoICogMikpOw0KICAJCW9mZnNldCA9IDA7DQogIAl9ZWxzZSB7DQogIAkJdmlldyA9IGhlYWRlclZpZXc7DQogIAkJb2Zmc2V0ID0gNDQ7DQogIAl9DQogIAlpZiAoY29udmVydEZyb21GbG9hdDMyKXsNCiAgCQl3YXZGbG9hdFRvMTZCaXRQQ00odmlldywgb2Zmc2V0LCBzYW1wbGVzKTsNCiAgCX1lbHNlIHsNCiAgCQl3YXZXcml0ZTE2Qml0UENNKHZpZXcsIG9mZnNldCwgc2FtcGxlcyk7DQogIAl9DQogIAlyZXR1cm4gdmlldzsNCiAgfQ0KICBmdW5jdGlvbiB3YXZGbG9hdFRvMTZCaXRQQ00odmlldywgb2Zmc2V0LCBpbnB1dCkgew0KICAJZm9yIChsZXQgaSA9IDA7IGkgPCBpbnB1dC5sZW5ndGg7IGkrKywgb2Zmc2V0ICs9IDIpIHsNCiAgCQlsZXQgcyA9IE1hdGgubWF4KC0xLCBNYXRoLm1pbigxLCBpbnB1dFtpXSkpOw0KICAJCXZpZXcuc2V0SW50MTYob2Zmc2V0LCBzIDwgMCA/IHMgKiAweDgwMDAgOiBzICogMHg3RkZGLCB0cnVlKTsNCiAgCX0NCiAgfQ0KICBmdW5jdGlvbiB3YXZXcml0ZTE2Qml0UENNKHZpZXcsIG9mZnNldCwgaW5wdXQpIHsNCiAgCWZvciAobGV0IGkgPSAwOyBpIDwgaW5wdXQubGVuZ3RoOyBpKyssIG9mZnNldCArPSAyKSB7DQogIAkJdmlldy5zZXRJbnQxNihvZmZzZXQsIGlucHV0W2ldLCB0cnVlKTsNCiAgCX0NCiAgfQ0KICBmdW5jdGlvbiB3YXZXcml0ZVN0cmluZyh2aWV3LCBvZmZzZXQsIHN0cmluZykgew0KICAJZm9yIChsZXQgaSA9IDA7IGkgPCBzdHJpbmcubGVuZ3RoOyBpKyspIHsNCiAgCQl2aWV3LnNldFVpbnQ4KG9mZnNldCArIGksIHN0cmluZy5jaGFyQ29kZUF0KGkpKTsNCiAgCX0NCiAgfQoKfSkoKTsKCg==",null,!1),Hoe=`//TODO: 'import' not yet supported by FF :-( (Dec 2020)\r
//import { SampleRateException, SampleSizeException } from './shared/common.js';\r
//import { RingBuffer } from './shared/ring-buffer.js';\r
//import { SpeexResampler } from './speex/speex-resampler-interface.min.js';\r
//import { Speex } from './speex/speex-resampler-wasm.js';\r
class RingBuffer{constructor(a,b,c){this._readIndex=0,this._writeIndex=0,this._framesAvailable=0,this._channelCount=b,this._length=a,this._channelData=[];for(let d=0;d<this._channelCount;++d)this._channelData[d]="Uint16"==c?new Uint16Array(a):"Int16"==c?new Int16Array(a):"Uint8"==c?new Uint8Array(a):"Int8"==c?new Int8Array(a):new Float32Array(a)}get framesAvailable(){return this._framesAvailable}push(a,b){let c=a[0].length,d=b||function(a,b,c){return a[b][c]};for(let e,f=0;f<c;++f){e=(this._writeIndex+f)%this._length;for(let b=0;b<this._channelCount;++b)this._channelData[b][e]=d(a,b,f)}this._writeIndex+=c,this._writeIndex>=this._length&&(this._writeIndex-=this._length),this._framesAvailable+=c,this._framesAvailable>this._length&&(this._framesAvailable=this._length)}pull(a,b){if(0===this._framesAvailable)return;let c=a[0].length,d=this,e=b||function(a,b,c){return a[b][c]};for(let d,f=0;f<c;++f){d=(this._readIndex+f)%this._length;for(let b=0;b<this._channelCount;++b)a[b][f]=e(this._channelData,b,d)}this._readIndex+=c,this._readIndex>=this._length&&(this._readIndex-=this._length),this._framesAvailable-=c,0>this._framesAvailable&&(this._framesAvailable=0)}};\r
class SpeexResampler{constructor(a,b,c,d=7){this.channels=a,this.inRate=b,this.outRate=c,this.quality=d,this._inBufferPtr=-1,this._inBufferSize=-1,this._outBufferPtr=-1,this._outBufferSize=-1,this._inLengthPtr=-1,this._outLengthPtr=-1}processChunk(a){if(!speexModule)throw new Error("You need to wait for SpeexResampler.initPromise before calling this method");if(0!=a.constructor.name.indexOf("Int16Array"))throw new Error("Chunk format has to be 'Int16Array'");else a=new Uint8Array(a.buffer);if(0!=a.length%(this.channels*Uint16Array.BYTES_PER_ELEMENT))throw new Error("Chunk length should be a multiple of channels * 2 bytes");if(!this._resamplerPtr){const a=speexModule._malloc(4);this._resamplerPtr=speexModule._speex_resampler_init(this.channels,this.inRate,this.outRate,this.quality,a);const b=speexModule.getValue(a,"i32");if(0!==b)throw new Error(speexModule.AsciiToString(speexModule._speex_resampler_strerror(b)));this._inLengthPtr=speexModule._malloc(Uint32Array.BYTES_PER_ELEMENT),this._outLengthPtr=speexModule._malloc(Uint32Array.BYTES_PER_ELEMENT)}this._inBufferSize<a.length&&(-1!==this._inBufferPtr&&speexModule._free(this._inBufferPtr),this._inBufferPtr=speexModule._malloc(a.length),this._inBufferSize=a.length);const b=Math.ceil(a.length*this.outRate/this.inRate);this._outBufferSize<b&&(-1!==this._outBufferPtr&&speexModule._free(this._outBufferPtr),this._outBufferPtr=speexModule._malloc(b),this._outBufferSize=b),speexModule.setValue(this._inLengthPtr,a.length/this.channels/Uint16Array.BYTES_PER_ELEMENT,"i32"),speexModule.HEAPU8.set(a,this._inBufferPtr),speexModule.setValue(this._outLengthPtr,this._outBufferSize/this.channels/Uint16Array.BYTES_PER_ELEMENT,"i32");const c=speexModule._speex_resampler_process_interleaved_int(this._resamplerPtr,this._inBufferPtr,this._inLengthPtr,this._outBufferPtr,this._outLengthPtr);if(0!==c)throw new Error(speexModule.AsciiToString(speexModule._speex_resampler_strerror(c)));const d=speexModule.getValue(this._outLengthPtr,"i32");return new Int16Array(speexModule.HEAPU8.slice(this._outBufferPtr,this._outBufferPtr+d*this.channels*Uint16Array.BYTES_PER_ELEMENT).buffer)}}\r
\r
var speexModule;\r
\r
class SpeexResampleProcessor extends AudioWorkletProcessor {\r
	\r
	get SampleRateException() {\r
		return function(message){\r
			this.message = message;\r
			this.name = "SampleRateException";\r
		}\r
	}\r
	get SampleSizeException() {\r
		return function(message){\r
			this.message = message;\r
			this.name = "SampleSizeException";\r
		};\r
	}\r
	\r
	get Speex() {\r
		return function(){return function(a){function b(a,b,c){c=c||"i8","*"===c.charAt(c.length-1)&&(c="i32"),"i1"===c?Q[a>>0]=b:"i8"===c?Q[a>>0]=b:"i16"===c?S[a>>1]=b:"i32"===c?U[a>>2]=b:"i64"===c?(oa=[b>>>0,(na=b,1<=+ga(na)?0<na?(0|ja(+ia(na/4294967296),4294967295))>>>0:~~+ha((na-+(~~na>>>0))/4294967296)>>>0:0)],U[a>>2]=oa[0],U[a+4>>2]=oa[1]):"float"===c?W[a>>2]=b:"double"===c?X[a>>3]=b:p("invalid type for setValue: "+c)}function c(a,b){switch(b=b||"i8","*"===b.charAt(b.length-1)&&(b="i32"),b){case"i1":return Q[a>>0];case"i8":return Q[a>>0];case"i16":return S[a>>1];case"i32":return U[a>>2];case"i64":return U[a>>2];case"float":return W[a>>2];case"double":return X[a>>3];default:p("invalid type for getValue: "+b);}return null}function d(a){for(var b,c="";;){if(b=R[a++>>0],!b)return c;c+=String.fromCharCode(b)}}function e(a,b){return 0<a%b&&(a+=b-a%b),a}function f(a){P=a,A.HEAP8=Q=new Int8Array(a),A.HEAP16=S=new Int16Array(a),A.HEAP32=U=new Int32Array(a),A.HEAPU8=R=new Uint8Array(a),A.HEAPU16=T=new Uint16Array(a),A.HEAPU32=V=new Uint32Array(a),A.HEAPF32=W=new Float32Array(a),A.HEAPF64=X=new Float64Array(a)}function g(a){for(;0<a.length;){var b=a.shift();if("function"==typeof b){b(A);continue}var c=b.func;"number"==typeof c?void 0===b.arg?A.dynCall_v(c):A.dynCall_vi(c,b.arg):c(void 0===b.arg?null:b.arg)}}function h(){if(A.preRun)for("function"==typeof A.preRun&&(A.preRun=[A.preRun]);A.preRun.length;)l(A.preRun.shift());g(ba)}function i(){fa=!0,g(ca)}function j(){g(da)}function k(){if(A.postRun)for("function"==typeof A.postRun&&(A.postRun=[A.postRun]);A.postRun.length;)m(A.postRun.shift());g(ea)}function l(a){ba.unshift(a)}function m(a){ea.unshift(a)}function n(){ka++,A.monitorRunDependencies&&A.monitorRunDependencies(ka)}function o(){if(ka--,A.monitorRunDependencies&&A.monitorRunDependencies(ka),0==ka&&(null!==la&&(clearInterval(la),la=null),ma)){var a=ma;ma=null,a()}}function p(a){throw A.onAbort&&A.onAbort(a),a+="",K(a),L(a),Z=!0,$=1,a="abort("+a+"). Build with -s ASSERTIONS=1 for more info.",new WebAssembly.RuntimeError(a)}function q(a){return 0===a.indexOf(pa)}function r(a,b,c){R.copyWithin(a,b,b+c)}function s(){return R.length}function t(a){try{return O.grow(a-P.byteLength+65535>>>16),f(O.buffer),1}catch(a){}}function u(a){if("boolean"==typeof I&&I){var b;try{b=Buffer.from(a,"base64")}catch(c){b=new Buffer(a,"base64")}return new Uint8Array(b.buffer,b.byteOffset,b.byteLength)}try{for(var c=qa(a),d=new Uint8Array(c.length),e=0;e<c.length;++e)d[e]=c.charCodeAt(e);return d}catch(a){throw new Error("Converting base64 string to bytes failed.")}}function v(a){return q(a)?u(a.slice(37)):void 0}function w(a){this.name="ExitStatus",this.message="Program terminated with exit("+a+")",this.status=a}function x(a){function b(){Ba||(Ba=!0,A.calledRun=!0,Z||(i(),j(),y(A),A.onRuntimeInitialized&&A.onRuntimeInitialized(),k()))}(a=a||D,!(0<ka))&&(h(),0<ka||(A.setStatus?(A.setStatus("Running..."),setTimeout(function(){setTimeout(function(){A.setStatus("")},1),b()},1)):b()))}a=a||{};var y,z,A="undefined"==typeof a?{}:a;A.ready=new Promise(function(a,b){y=a,z=b});var B,C={};for(B in A)A.hasOwnProperty(B)&&(C[B]=A[B]);var D=[],E="./this.program",F=function(a,b){throw b},G=!1,H=!1,I=!1;G="object"==typeof window,H="function"==typeof importScripts,I="object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node;var J;I?(1<process.argv.length&&(E=process.argv[1].replace(/\\\\/g,"/")),D=process.argv.slice(2),process.on("uncaughtException",function(a){if(!(a instanceof w))throw a}),process.on("unhandledRejection",p),F=function(a){process.exit(a)},A.inspect=function(){return"[Emscripten Module object]"}):(G||H)&&(J=function(a){document.title=a});var K=A.print||console.log.bind(console),L=A.printErr||console.warn.bind(console);for(B in C)C.hasOwnProperty(B)&&(A[B]=C[B]);C=null,A.arguments&&(D=A.arguments),A.thisProgram&&(E=A.thisProgram),A.quit&&(F=A.quit);var M;A.wasmBinary&&(M=A.wasmBinary);var N;A.noExitRuntime&&(N=A.noExitRuntime),"object"!=typeof WebAssembly&&p("no native wasm support detected");var O,P,Q,R,S,T,U,V,W,X,Y=new WebAssembly.Table({initial:6,maximum:6,element:"anyfunc"}),Z=!1,$=0,_=65536,aa=A.INITIAL_MEMORY||20971520;O=A.wasmMemory?A.wasmMemory:new WebAssembly.Memory({initial:aa/_,maximum:2147483648/_}),O&&(P=O.buffer),aa=P.byteLength,f(P),U[6256>>2]=5249296;var ba=[],ca=[],da=[],ea=[],fa=!1,ga=Math.abs,ha=Math.ceil,ia=Math.floor,ja=Math.min,ka=0,la=null,ma=null;A.preloadedImages={},A.preloadedAudios={};var na,oa,pa="data:application/octet-stream;base64,";ca.push({func:function(){ta()}});var qa="function"==typeof atob?atob:function(a){var b,c,d,e,f,g,h,j="",k=0;a=a.replace(/[^A-Za-z0-9\\+\\/\\=]/g,"");do e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(a.charAt(k++)),f="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(a.charAt(k++)),g="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(a.charAt(k++)),h="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(a.charAt(k++)),b=e<<2|f>>4,c=(15&f)<<4|g>>2,d=(3&g)<<6|h,j+=String.fromCharCode(b),64!==g&&(j+=String.fromCharCode(c)),64!==h&&(j+=String.fromCharCode(d));while(k<a.length);return j},ra={a:r,b:function(a){a>>>=0;var b=s(),c=2147483648;if(a>c)return!1;for(var d,f=1;4>=f;f*=2){d=b*(1+.2/f),d=Math.min(d,a+100663296);var g=Math.min(c,e(Math.max(16777216,a,d),65536)),h=t(g);if(h)return!0}return!1},memory:O,table:Y},sa=function(){function a(a){var b=a.exports;A.asm=b,o("wasm-instantiate")}var b={a:ra};if(n("wasm-instantiate"),A.instantiateWasm)try{var c=A.instantiateWasm(b,a);return c}catch(a){return L("Module.instantiateWasm callback failed with error: "+a),!1}return function(a){var c=v("data:application/octet-stream;base64,AGFzbQEAAAABggETYAZ/f39/f38Bf2ABfwF/YAF/AGACf38AYAN/f38AYAJ/fwF/YAV/f39/fwF/YAAAYAV/f39/fwBgBn9/f39/fwBgA39/fwF/YAR/f39/AX9gB39/f39/f38Bf2ACfH8Bf2AEfX1/fwF9YAF8AXxgAnx/AXxgAnx8AXxgA3x8fwF8AikEAWEBYQAKAWEBYgABAWEGbWVtb3J5AgHAAoCAAgFhBXRhYmxlAXAABgMgHwIBAxABARIOAQMFEQkAAAAABAgFDwwNCwEEBgIABgcGCQF/AUGQssACCwchCAFjACABZAAfAWUAAgFmAB0BZwAcAWgAGwFpABoBagAHCQsBAEEBCwUSERAPHgrXpwEfgQ0BB38CQCAARQ0AIABBeGoiAyAAQXxqKAIAIgFBeHEiAGohBQJAIAFBAXENACABQQNxRQ0BIAMgAygCACICayIDQYQtKAIAIgRJDQEgACACaiEAIANBiC0oAgBHBEAgAkH/AU0EQCADKAIIIgQgAkEDdiICQQN0QZwtakcaIAQgAygCDCIBRgRAQfQsQfQsKAIAQX4gAndxNgIADAMLIAQgATYCDCABIAQ2AggMAgsgAygCGCEGAkAgAyADKAIMIgFHBEAgBCADKAIIIgJNBEAgAigCDBoLIAIgATYCDCABIAI2AggMAQsCQCADQRRqIgIoAgAiBA0AIANBEGoiAigCACIEDQBBACEBDAELA0AgAiEHIAQiAUEUaiICKAIAIgQNACABQRBqIQIgASgCECIEDQALIAdBADYCAAsgBkUNAQJAIAMgAygCHCICQQJ0QaQvaiIEKAIARgRAIAQgATYCACABDQFB+CxB+CwoAgBBfiACd3E2AgAMAwsgBkEQQRQgBigCECADRhtqIAE2AgAgAUUNAgsgASAGNgIYIAMoAhAiAgRAIAEgAjYCECACIAE2AhgLIAMoAhQiAkUNASABIAI2AhQgAiABNgIYDAELIAUoAgQiAUEDcUEDRw0AQfwsIAA2AgAgBSABQX5xNgIEIAMgAEEBcjYCBCAAIANqIAA2AgAPCyAFIANNDQAgBSgCBCIBQQFxRQ0AAkAgAUECcUUEQCAFQYwtKAIARgRAQYwtIAM2AgBBgC1BgC0oAgAgAGoiADYCACADIABBAXI2AgQgA0GILSgCAEcNA0H8LEEANgIAQYgtQQA2AgAPCyAFQYgtKAIARgRAQYgtIAM2AgBB/CxB/CwoAgAgAGoiADYCACADIABBAXI2AgQgACADaiAANgIADwsgAUF4cSAAaiEAAkAgAUH/AU0EQCAFKAIMIQIgBSgCCCIEIAFBA3YiAUEDdEGcLWoiB0cEQEGELSgCABoLIAIgBEYEQEH0LEH0LCgCAEF+IAF3cTYCAAwCCyACIAdHBEBBhC0oAgAaCyAEIAI2AgwgAiAENgIIDAELIAUoAhghBgJAIAUgBSgCDCIBRwRAQYQtKAIAIAUoAggiAk0EQCACKAIMGgsgAiABNgIMIAEgAjYCCAwBCwJAIAVBFGoiAigCACIEDQAgBUEQaiICKAIAIgQNAEEAIQEMAQsDQCACIQcgBCIBQRRqIgIoAgAiBA0AIAFBEGohAiABKAIQIgQNAAsgB0EANgIACyAGRQ0AAkAgBSAFKAIcIgJBAnRBpC9qIgQoAgBGBEAgBCABNgIAIAENAUH4LEH4LCgCAEF+IAJ3cTYCAAwCCyAGQRBBFCAGKAIQIAVGG2ogATYCACABRQ0BCyABIAY2AhggBSgCECICBEAgASACNgIQIAIgATYCGAsgBSgCFCICRQ0AIAEgAjYCFCACIAE2AhgLIAMgAEEBcjYCBCAAIANqIAA2AgAgA0GILSgCAEcNAUH8LCAANgIADwsgBSABQX5xNgIEIAMgAEEBcjYCBCAAIANqIAA2AgALIABB/wFNBEAgAEEDdiIBQQN0QZwtaiEAAn9B9CwoAgAiAkEBIAF0IgFxRQRAQfQsIAEgAnI2AgAgAAwBCyAAKAIICyECIAAgAzYCCCACIAM2AgwgAyAANgIMIAMgAjYCCA8LIANCADcCECADAn9BACAAQQh2IgFFDQAaQR8gAEH///8HSw0AGiABIAFBgP4/akEQdkEIcSIBdCICIAJBgOAfakEQdkEEcSICdCIEIARBgIAPakEQdkECcSIEdEEPdiABIAJyIARyayIBQQF0IAAgAUEVanZBAXFyQRxqCyICNgIcIAJBAnRBpC9qIQECQAJAAkBB+CwoAgAiBEEBIAJ0IgdxRQRAQfgsIAQgB3I2AgAgASADNgIAIAMgATYCGAwBCyAAQQBBGSACQQF2ayACQR9GG3QhAiABKAIAIQEDQCABIgQoAgRBeHEgAEYNAiACQR12IQEgAkEBdCECIAQgAUEEcWoiB0EQaigCACIBDQALIAcgAzYCECADIAQ2AhgLIAMgAzYCDCADIAM2AggMAQsgBCgCCCIAIAM2AgwgBCADNgIIIANBADYCGCADIAQ2AgwgAyAANgIIC0GULUGULSgCAEF/aiIANgIAIAANAEG8MCEDA0AgAygCACIAQQhqIQMgAA0AC0GULUF/NgIACwtSAQJ/QfAwKAIAIgEgAEEDakF8cSICaiEAAkAgAkEBTkEAIAAgAU0bDQAgAD8AQRB0SwRAIAAQAUUNAQtB8DAgADYCACABDwtB8CxBMDYCAEF/C9YCAQF/AkAgAUUNACAAIAFqIgJBf2pBADoAACAAQQA6AAAgAUEDSQ0AIAJBfmpBADoAACAAQQA6AAEgAkF9akEAOgAAIABBADoAAiABQQdJDQAgAkF8akEAOgAAIABBADoAAyABQQlJDQAgAEEAIABrQQNxIgJqIgBBADYCACAAIAEgAmtBfHEiAmoiAUF8akEANgIAIAJBCUkNACAAQQA2AgggAEEANgIEIAFBeGpBADYCACABQXRqQQA2AgAgAkEZSQ0AIABBADYCGCAAQQA2AhQgAEEANgIQIABBADYCDCABQXBqQQA2AgAgAUFsakEANgIAIAFBaGpBADYCACABQWRqQQA2AgAgAiAAQQRxQRhyIgJrIgFBIEkNACAAIAJqIQADQCAAQgA3AxggAEIANwMQIABCADcDCCAAQgA3AwAgAEEgaiEAIAFBYGoiAUEfSw0ACwsLqAEAAkAgAUGACE4EQCAARAAAAAAAAOB/oiEAIAFB/w9IBEAgAUGBeGohAQwCCyAARAAAAAAAAOB/oiEAIAFB/RcgAUH9F0gbQYJwaiEBDAELIAFBgXhKDQAgAEQAAAAAAAAQAKIhACABQYNwSgRAIAFB/gdqIQEMAQsgAEQAAAAAAAAQAKIhACABQYZoIAFBhmhKG0H8D2ohAQsgACABQf8Haq1CNIa/ogtTAgF/AX4CQAJ/QQAgAEUNABogAK0iAqciASAAQQFyQYCABEkNABpBfyABIAJCIIinGwsiARAHIgBFDQAgAEF8ai0AAEEDcUUNACAAIAEQBAsgAAvGLQELfyMAQRBrIgskAAJAAkACQAJAAkACQAJAAkACQAJAAkAgAEH0AU0EQEH0LCgCACIGQRAgAEELakF4cSAAQQtJGyIFQQN2IgB2IgFBA3EEQCABQX9zQQFxIABqIgJBA3QiBEGkLWooAgAiAUEIaiEAAkAgASgCCCIDIARBnC1qIgRGBEBB9CwgBkF+IAJ3cTYCAAwBC0GELSgCABogAyAENgIMIAQgAzYCCAsgASACQQN0IgJBA3I2AgQgASACaiIBIAEoAgRBAXI2AgQMDAsgBUH8LCgCACIITQ0BIAEEQAJAQQIgAHQiAkEAIAJrciABIAB0cSIAQQAgAGtxQX9qIgAgAEEMdkEQcSIAdiIBQQV2QQhxIgIgAHIgASACdiIAQQJ2QQRxIgFyIAAgAXYiAEEBdkECcSIBciAAIAF2IgBBAXZBAXEiAXIgACABdmoiAkEDdCIDQaQtaigCACIBKAIIIgAgA0GcLWoiA0YEQEH0LCAGQX4gAndxIgY2AgAMAQtBhC0oAgAaIAAgAzYCDCADIAA2AggLIAFBCGohACABIAVBA3I2AgQgASAFaiIHIAJBA3QiAiAFayIDQQFyNgIEIAEgAmogAzYCACAIBEAgCEEDdiIEQQN0QZwtaiEBQYgtKAIAIQICfyAGQQEgBHQiBHFFBEBB9CwgBCAGcjYCACABDAELIAEoAggLIQQgASACNgIIIAQgAjYCDCACIAE2AgwgAiAENgIIC0GILSAHNgIAQfwsIAM2AgAMDAtB+CwoAgAiCkUNASAKQQAgCmtxQX9qIgAgAEEMdkEQcSIAdiIBQQV2QQhxIgIgAHIgASACdiIAQQJ2QQRxIgFyIAAgAXYiAEEBdkECcSIBciAAIAF2IgBBAXZBAXEiAXIgACABdmpBAnRBpC9qKAIAIgEoAgRBeHEgBWshAyABIQIDQAJAIAIoAhAiAEUEQCACKAIUIgBFDQELIAAoAgRBeHEgBWsiAiADIAIgA0kiAhshAyAAIAEgAhshASAAIQIMAQsLIAEoAhghCSABIAEoAgwiBEcEQEGELSgCACABKAIIIgBNBEAgACgCDBoLIAAgBDYCDCAEIAA2AggMCwsgAUEUaiICKAIAIgBFBEAgASgCECIARQ0DIAFBEGohAgsDQCACIQcgACIEQRRqIgIoAgAiAA0AIARBEGohAiAEKAIQIgANAAsgB0EANgIADAoLQX8hBSAAQb9/Sw0AIABBC2oiAEF4cSEFQfgsKAIAIgdFDQBBACAFayECAkACQAJAAn9BACAAQQh2IgBFDQAaQR8gBUH///8HSw0AGiAAIABBgP4/akEQdkEIcSIAdCIBIAFBgOAfakEQdkEEcSIBdCIDIANBgIAPakEQdkECcSIDdEEPdiAAIAFyIANyayIAQQF0IAUgAEEVanZBAXFyQRxqCyIIQQJ0QaQvaigCACIDRQRAQQAhAAwBCyAFQQBBGSAIQQF2ayAIQR9GG3QhAUEAIQADQAJAIAMoAgRBeHEgBWsiBiACTw0AIAMhBCAGIgINAEEAIQIgAyEADAMLIAAgAygCFCIGIAYgAyABQR12QQRxaigCECIDRhsgACAGGyEAIAEgA0EAR3QhASADDQALCyAAIARyRQRAQQIgCHQiAEEAIABrciAHcSIARQ0DIABBACAAa3FBf2oiACAAQQx2QRBxIgB2IgFBBXZBCHEiAyAAciABIAN2IgBBAnZBBHEiAXIgACABdiIAQQF2QQJxIgFyIAAgAXYiAEEBdkEBcSIBciAAIAF2akECdEGkL2ooAgAhAAsgAEUNAQsDQCAAKAIEQXhxIAVrIgMgAkkhASADIAIgARshAiAAIAQgARshBCAAKAIQIgEEfyABBSAAKAIUCyIADQALCyAERQ0AIAJB/CwoAgAgBWtPDQAgBCgCGCEIIAQgBCgCDCIBRwRAQYQtKAIAIAQoAggiAE0EQCAAKAIMGgsgACABNgIMIAEgADYCCAwJCyAEQRRqIgMoAgAiAEUEQCAEKAIQIgBFDQMgBEEQaiEDCwNAIAMhBiAAIgFBFGoiAygCACIADQAgAUEQaiEDIAEoAhAiAA0ACyAGQQA2AgAMCAtB/CwoAgAiASAFTwRAQYgtKAIAIQACQCABIAVrIgJBEE8EQEH8LCACNgIAQYgtIAAgBWoiAzYCACADIAJBAXI2AgQgACABaiACNgIAIAAgBUEDcjYCBAwBC0GILUEANgIAQfwsQQA2AgAgACABQQNyNgIEIAAgAWoiASABKAIEQQFyNgIECyAAQQhqIQAMCgtBgC0oAgAiASAFSwRAQYAtIAEgBWsiATYCAEGMLUGMLSgCACIAIAVqIgI2AgAgAiABQQFyNgIEIAAgBUEDcjYCBCAAQQhqIQAMCgtBACEAIAVBL2oiBAJ/QcwwKAIABEBB1DAoAgAMAQtB2DBCfzcCAEHQMEKAoICAgIAENwIAQcwwIAtBDGpBcHFB2KrVqgVzNgIAQeAwQQA2AgBBsDBBADYCAEGAIAsiAmoiBkEAIAJrIgdxIgIgBU0NCUGsMCgCACIDBEBBpDAoAgAiCCACaiIJIAhNDQogCSADSw0KC0GwMC0AAEEEcQ0EAkACQEGMLSgCACIDBEBBtDAhAANAIAAoAgAiCCADTQRAIAggACgCBGogA0sNAwsgACgCCCIADQALC0EAEAMiAUF/Rg0FIAIhBkHQMCgCACIAQX9qIgMgAXEEQCACIAFrIAEgA2pBACAAa3FqIQYLIAYgBU0NBSAGQf7///8HSw0FQawwKAIAIgAEQEGkMCgCACIDIAZqIgcgA00NBiAHIABLDQYLIAYQAyIAIAFHDQEMBwsgBiABayAHcSIGQf7///8HSw0EIAYQAyIBIAAoAgAgACgCBGpGDQMgASEACwJAIAVBMGogBk0NACAAQX9GDQBB1DAoAgAiASAEIAZrakEAIAFrcSIBQf7///8HSwRAIAAhAQwHCyABEANBf0cEQCABIAZqIQYgACEBDAcLQQAgBmsQAxoMBAsgACIBQX9HDQUMAwtBACEEDAcLQQAhAQwFCyABQX9HDQILQbAwQbAwKAIAQQRyNgIACyACQf7///8HSw0BIAIQAyIBQQAQAyIATw0BIAFBf0YNASAAQX9GDQEgACABayIGIAVBKGpNDQELQaQwQaQwKAIAIAZqIgA2AgAgAEGoMCgCAEsEQEGoMCAANgIACwJAAkACQEGMLSgCACIDBEBBtDAhAANAIAEgACgCACICIAAoAgQiBGpGDQIgACgCCCIADQALDAILQYQtKAIAIgBBACABIABPG0UEQEGELSABNgIAC0EAIQBBuDAgBjYCAEG0MCABNgIAQZQtQX82AgBBmC1BzDAoAgA2AgBBwDBBADYCAANAIABBA3QiAkGkLWogAkGcLWoiAzYCACACQagtaiADNgIAIABBAWoiAEEgRw0AC0GALSAGQVhqIgBBeCABa0EHcUEAIAFBCGpBB3EbIgJrIgM2AgBBjC0gASACaiICNgIAIAIgA0EBcjYCBCAAIAFqQSg2AgRBkC1B3DAoAgA2AgAMAgsgAC0ADEEIcQ0AIAEgA00NACACIANLDQAgACAEIAZqNgIEQYwtIANBeCADa0EHcUEAIANBCGpBB3EbIgBqIgE2AgBBgC1BgC0oAgAgBmoiAiAAayIANgIAIAEgAEEBcjYCBCACIANqQSg2AgRBkC1B3DAoAgA2AgAMAQsgAUGELSgCACIESQRAQYQtIAE2AgAgASEECyABIAZqIQJBtDAhAAJAAkACQAJAAkACQANAIAIgACgCAEcEQCAAKAIIIgANAQwCCwsgAC0ADEEIcUUNAQtBtDAhAANAIAAoAgAiAiADTQRAIAIgACgCBGoiBCADSw0DCyAAKAIIIQAMAAALAAsgACABNgIAIAAgACgCBCAGajYCBCABQXggAWtBB3FBACABQQhqQQdxG2oiCSAFQQNyNgIEIAJBeCACa0EHcUEAIAJBCGpBB3EbaiIBIAlrIAVrIQAgBSAJaiEHIAEgA0YEQEGMLSAHNgIAQYAtQYAtKAIAIABqIgA2AgAgByAAQQFyNgIEDAMLIAFBiC0oAgBGBEBBiC0gBzYCAEH8LEH8LCgCACAAaiIANgIAIAcgAEEBcjYCBCAAIAdqIAA2AgAMAwsgASgCBCICQQNxQQFGBEAgAkF4cSEKAkAgAkH/AU0EQCABKAIIIgMgAkEDdiIEQQN0QZwtakcaIAMgASgCDCICRgRAQfQsQfQsKAIAQX4gBHdxNgIADAILIAMgAjYCDCACIAM2AggMAQsgASgCGCEIAkAgASABKAIMIgZHBEAgBCABKAIIIgJNBEAgAigCDBoLIAIgBjYCDCAGIAI2AggMAQsCQCABQRRqIgMoAgAiBQ0AIAFBEGoiAygCACIFDQBBACEGDAELA0AgAyECIAUiBkEUaiIDKAIAIgUNACAGQRBqIQMgBigCECIFDQALIAJBADYCAAsgCEUNAAJAIAEgASgCHCICQQJ0QaQvaiIDKAIARgRAIAMgBjYCACAGDQFB+CxB+CwoAgBBfiACd3E2AgAMAgsgCEEQQRQgCCgCECABRhtqIAY2AgAgBkUNAQsgBiAINgIYIAEoAhAiAgRAIAYgAjYCECACIAY2AhgLIAEoAhQiAkUNACAGIAI2AhQgAiAGNgIYCyABIApqIQEgACAKaiEACyABIAEoAgRBfnE2AgQgByAAQQFyNgIEIAAgB2ogADYCACAAQf8BTQRAIABBA3YiAUEDdEGcLWohAAJ/QfQsKAIAIgJBASABdCIBcUUEQEH0LCABIAJyNgIAIAAMAQsgACgCCAshASAAIAc2AgggASAHNgIMIAcgADYCDCAHIAE2AggMAwsgBwJ/QQAgAEEIdiIBRQ0AGkEfIABB////B0sNABogASABQYD+P2pBEHZBCHEiAXQiAiACQYDgH2pBEHZBBHEiAnQiAyADQYCAD2pBEHZBAnEiA3RBD3YgASACciADcmsiAUEBdCAAIAFBFWp2QQFxckEcagsiATYCHCAHQgA3AhAgAUECdEGkL2ohAgJAQfgsKAIAIgNBASABdCIEcUUEQEH4LCADIARyNgIAIAIgBzYCAAwBCyAAQQBBGSABQQF2ayABQR9GG3QhAyACKAIAIQEDQCABIgIoAgRBeHEgAEYNAyADQR12IQEgA0EBdCEDIAIgAUEEcWoiBCgCECIBDQALIAQgBzYCEAsgByACNgIYIAcgBzYCDCAHIAc2AggMAgtBgC0gBkFYaiIAQXggAWtBB3FBACABQQhqQQdxGyICayIHNgIAQYwtIAEgAmoiAjYCACACIAdBAXI2AgQgACABakEoNgIEQZAtQdwwKAIANgIAIAMgBEEnIARrQQdxQQAgBEFZakEHcRtqQVFqIgAgACADQRBqSRsiAkEbNgIEIAJBvDApAgA3AhAgAkG0MCkCADcCCEG8MCACQQhqNgIAQbgwIAY2AgBBtDAgATYCAEHAMEEANgIAIAJBGGohAANAIABBBzYCBCAAQQhqIQEgAEEEaiEAIAQgAUsNAAsgAiADRg0DIAIgAigCBEF+cTYCBCADIAIgA2siBEEBcjYCBCACIAQ2AgAgBEH/AU0EQCAEQQN2IgFBA3RBnC1qIQACf0H0LCgCACICQQEgAXQiAXFFBEBB9CwgASACcjYCACAADAELIAAoAggLIQEgACADNgIIIAEgAzYCDCADIAA2AgwgAyABNgIIDAQLIANCADcCECADAn9BACAEQQh2IgBFDQAaQR8gBEH///8HSw0AGiAAIABBgP4/akEQdkEIcSIAdCIBIAFBgOAfakEQdkEEcSIBdCICIAJBgIAPakEQdkECcSICdEEPdiAAIAFyIAJyayIAQQF0IAQgAEEVanZBAXFyQRxqCyIANgIcIABBAnRBpC9qIQECQEH4LCgCACICQQEgAHQiBnFFBEBB+CwgAiAGcjYCACABIAM2AgAgAyABNgIYDAELIARBAEEZIABBAXZrIABBH0YbdCEAIAEoAgAhAQNAIAEiAigCBEF4cSAERg0EIABBHXYhASAAQQF0IQAgAiABQQRxaiIGKAIQIgENAAsgBiADNgIQIAMgAjYCGAsgAyADNgIMIAMgAzYCCAwDCyACKAIIIgAgBzYCDCACIAc2AgggB0EANgIYIAcgAjYCDCAHIAA2AggLIAlBCGohAAwFCyACKAIIIgAgAzYCDCACIAM2AgggA0EANgIYIAMgAjYCDCADIAA2AggLQYAtKAIAIgAgBU0NAEGALSAAIAVrIgE2AgBBjC1BjC0oAgAiACAFaiICNgIAIAIgAUEBcjYCBCAAIAVBA3I2AgQgAEEIaiEADAMLQfAsQTA2AgBBACEADAILAkAgCEUNAAJAIAQoAhwiAEECdEGkL2oiAygCACAERgRAIAMgATYCACABDQFB+CwgB0F+IAB3cSIHNgIADAILIAhBEEEUIAgoAhAgBEYbaiABNgIAIAFFDQELIAEgCDYCGCAEKAIQIgAEQCABIAA2AhAgACABNgIYCyAEKAIUIgBFDQAgASAANgIUIAAgATYCGAsCQCACQQ9NBEAgBCACIAVqIgBBA3I2AgQgACAEaiIAIAAoAgRBAXI2AgQMAQsgBCAFQQNyNgIEIAQgBWoiAyACQQFyNgIEIAIgA2ogAjYCACACQf8BTQRAIAJBA3YiAUEDdEGcLWohAAJ/QfQsKAIAIgJBASABdCIBcUUEQEH0LCABIAJyNgIAIAAMAQsgACgCCAshASAAIAM2AgggASADNgIMIAMgADYCDCADIAE2AggMAQsgAwJ/QQAgAkEIdiIARQ0AGkEfIAJB////B0sNABogACAAQYD+P2pBEHZBCHEiAHQiASABQYDgH2pBEHZBBHEiAXQiBSAFQYCAD2pBEHZBAnEiBXRBD3YgACABciAFcmsiAEEBdCACIABBFWp2QQFxckEcagsiADYCHCADQgA3AhAgAEECdEGkL2ohAQJAAkAgB0EBIAB0IgVxRQRAQfgsIAUgB3I2AgAgASADNgIADAELIAJBAEEZIABBAXZrIABBH0YbdCEAIAEoAgAhBQNAIAUiASgCBEF4cSACRg0CIABBHXYhBSAAQQF0IQAgASAFQQRxaiIGKAIQIgUNAAsgBiADNgIQCyADIAE2AhggAyADNgIMIAMgAzYCCAwBCyABKAIIIgAgAzYCDCABIAM2AgggA0EANgIYIAMgATYCDCADIAA2AggLIARBCGohAAwBCwJAIAlFDQACQCABKAIcIgBBAnRBpC9qIgIoAgAgAUYEQCACIAQ2AgAgBA0BQfgsIApBfiAAd3E2AgAMAgsgCUEQQRQgCSgCECABRhtqIAQ2AgAgBEUNAQsgBCAJNgIYIAEoAhAiAARAIAQgADYCECAAIAQ2AhgLIAEoAhQiAEUNACAEIAA2AhQgACAENgIYCwJAIANBD00EQCABIAMgBWoiAEEDcjYCBCAAIAFqIgAgACgCBEEBcjYCBAwBCyABIAVBA3I2AgQgASAFaiIEIANBAXI2AgQgAyAEaiADNgIAIAgEQCAIQQN2IgVBA3RBnC1qIQBBiC0oAgAhAgJ/QQEgBXQiBSAGcUUEQEH0LCAFIAZyNgIAIAAMAQsgACgCCAshBSAAIAI2AgggBSACNgIMIAIgADYCDCACIAU2AggLQYgtIAQ2AgBB/CwgAzYCAAsgAUEIaiEACyALQRBqJAAgAAuZAQEDfCAAIACiIgMgAyADoqIgA0R81c9aOtnlPaJE65wriublWr6goiADIANEff6xV+Mdxz6iRNVhwRmgASq/oKJEpvgQERERgT+goCEFIAMgAKIhBCACRQRAIAQgAyAFokRJVVVVVVXFv6CiIACgDwsgACADIAFEAAAAAAAA4D+iIAQgBaKhoiABoSAERElVVVVVVcU/oqChC7YCAgJ9B3wgAbsiBpkiB0SN7bWg98awPmMEQCAADwsgByACtyIHRAAAAAAAAOA/omQEfUMAAAAABSAAIAGUIQEgAygCAAJ/IAYgBqAgB6O2iyADKAIEspQiBI4iBYtDAAAAT10EQCAFqAwBC0GAgICAeAsiAkEDdGoiAysDCCEHIAMrAwAhCiADKwMQIQkgAysDGCEGIAG7RBgtRFT7IQlAoiIIEBYgALuiIAijIAYgBCACspMiACAAIACUIgGUuyIIRJWoZ1VVVcU/oiILIAC7IgZElahnVVVVxT+ioSIMoiAJIAG7RAAAAAAAAOA/oiIJIAagIAhEAAAAAAAA4D+ioSIIoiAKIAkgBkS1K0xVVVXVv6KgIAuhIgaiIAdEAAAAAAAA8D8gDKEgCKEgBqGioKCgorYLC/IMAhJ/An0gACAAKAIIIgIgACgCDCIDbiIGNgIkIAAgACgCEEEUbCIBQbQJaigCACIENgIwIAAoAhghCSAAIAFBsAlqKAIAIgU2AhggACACIAMgBmxrNgIoIAAoAhwhDAJAAkACQCACIANLBEAgACABQbgJaioCACADs5QgArOVOAIsIAUgBSADbiIBIANsayIFQX8gAm4iBksNAiABIAZLDQIgASACbCIBIAIgBWwgA24iBUF/c0sNAiAAIAEgBWpBB2pBeHEiBTYCGCAEIANBAXQgAkkiAXYgA0ECdCACSSIGdiADQQN0IgcgAkl2IQQCQAJAIAENACAGDQAgByACTw0BCyAAIAQ2AjALIAQgA0EEdCACSSIBdiECIAFFQQAgAhsNASAAIAJBASACGyIENgIwDAELIAAgAUG8CWooAgA2AiwLAkAgAyAFbCICIAQgBWxBCGoiAU0EQEEBIQZB/////wEgA24gBU8NAQtBACEGIAEhAkH3////ASAEbiAFSQ0BCyAAKAJQIAJJBEAgACgCTCACQQJ0EAwiAUUNASAAIAI2AlAgACABNgJMCyAAAn8CQAJAIAZFBEBBfCEBIAAoAhgiAiAAKAIwIgRsQQRqIgVBfEoNASAAKAIQIQMMAgsgACgCGCECAkAgACgCDCIBRQ0AIAJFBEBBACECDAELIAFBASABQQFLGyEEIAJBfm0hBSAAKAIQQRRsQcAJaigCACEGIAGzIRMgACgCTCEHQQAhAwNAIAIgA2whCCADsyATlSEUQQAhAQNAIAcgASAIakECdGogACoCLCABQQFqIgEgBWqyIBSTIAIgBhAJOAIAIAEgAkcNAAsgA0EBaiIDIARHDQALC0EBQQIgACgCEEEIShsMAgsgAkEBdrMhEyAAKAIQIgNBFGxBwAlqKAIAIQYgBLMhFCAAKAJMIQQDQCABQQJ0IARqIAAqAiwgAbIgFJUgE5MgAiAGEAk4AhAgAUEBaiIBIAVHDQALC0EDQQQgA0EIShsLNgJUIAIgACgCIGpBf2oiASAAKAIcIgJLBEBB/////wEgACgCFCICbiABSQ0BIAAoAkggASACbEECdBAMIgJFDQEgACABNgIcIAAgAjYCSCABIQILIAAoAjhFBEAgAiAAKAIUbCICRQRAQQAPCyAAKAJIIAJBAnQQBEEADwsgACgCGCICIAlLBEAgACgCFCIDRQRAQQAPCyAJQX9qIQ0gA0ECdEF8aiEOIAAoAkQhD0EAIQYDQCAPIANBf2oiA0ECdCIQaiIHKAIAIgJBAXQhBSACIA1qIgEEQCADIAxsIQggACgCHCADbCEKIAAoAkghBANAIAQgAUF/aiIBIAJqIApqQQJ0aiAEIAEgCGpBAnRqKAIANgIAIAENAAsLIA4gBkECdGshCCACBEAgACgCSCAAKAIcIAhsaiACQQJ0EAQLIAdBADYCAAJAIAUgCWoiBCAAKAIYIgVJBEAgBEF/aiIHBEAgBUF+aiERIARBfmohEiAAKAIcIANsIQogACgCSCELQQAhAUEAIQIDQCALIAEgEWogCmpBAnRqIAsgASASaiAKakECdGooAgA2AgAgAkF/cyEBIAJBAWoiAiAHRw0ACwsgBUF/aiICIAdLBEAgACgCSCAAKAIcIAhsaiACIAdrQQJ0EAQLIAAoAjwgEGoiAiACKAIAIAUgBGtBAXZqNgIADAELIAcgBCAFa0EBdiICNgIAIAJBf2oiAUEAIAAoAhgiBGtGDQAgASAEaiIBQQEgAUEBSxshBSAAKAIcIANsIQcgACgCSCEEQQAhAQNAIAQgASAHaiIIQQJ0aiAEIAIgCGpBAnRqKAIANgIAIAFBAWoiASAFRw0ACwsgBkEBaiEGIAMNAAtBAA8LQQAhASACIAlPDQEgACgCFEUNASAAKAJEIQZBACEDA0AgBiADQQJ0aiIEKAIAIQEgBCAJIAJrQQF2IgI2AgAgASACaiIHQX9qIgFBACAAKAIYIgVrRwRAIAEgBWoiAUEBIAFBAUsbIQggACgCHCADbCEKIAAoAkghBUEAIQEDQCAFIAEgCmoiC0ECdGogBSACIAtqQQJ0aigCADYCACABQQFqIgEgCEcNAAsLIAQgBzYCACADQQFqIgMgACgCFE8EQEEADwUgACgCGCECDAELAAALAAsgACAJNgIYIABBBTYCVEEBIQELIAELhwwBBn8gACABaiEFAkACQCAAKAIEIgJBAXENACACQQNxRQ0BIAAoAgAiAyABaiEBIAAgA2siAEGILSgCAEcEQEGELSgCACEEIANB/wFNBEAgACgCCCIEIANBA3YiA0EDdEGcLWpHGiAEIAAoAgwiAkYEQEH0LEH0LCgCAEF+IAN3cTYCAAwDCyAEIAI2AgwgAiAENgIIDAILIAAoAhghBgJAIAAgACgCDCICRwRAIAQgACgCCCIDTQRAIAMoAgwaCyADIAI2AgwgAiADNgIIDAELAkAgAEEUaiIDKAIAIgQNACAAQRBqIgMoAgAiBA0AQQAhAgwBCwNAIAMhByAEIgJBFGoiAygCACIEDQAgAkEQaiEDIAIoAhAiBA0ACyAHQQA2AgALIAZFDQECQCAAIAAoAhwiA0ECdEGkL2oiBCgCAEYEQCAEIAI2AgAgAg0BQfgsQfgsKAIAQX4gA3dxNgIADAMLIAZBEEEUIAYoAhAgAEYbaiACNgIAIAJFDQILIAIgBjYCGCAAKAIQIgMEQCACIAM2AhAgAyACNgIYCyAAKAIUIgNFDQEgAiADNgIUIAMgAjYCGAwBCyAFKAIEIgJBA3FBA0cNAEH8LCABNgIAIAUgAkF+cTYCBCAAIAFBAXI2AgQgBSABNgIADwsCQCAFKAIEIgJBAnFFBEAgBUGMLSgCAEYEQEGMLSAANgIAQYAtQYAtKAIAIAFqIgE2AgAgACABQQFyNgIEIABBiC0oAgBHDQNB/CxBADYCAEGILUEANgIADwsgBUGILSgCAEYEQEGILSAANgIAQfwsQfwsKAIAIAFqIgE2AgAgACABQQFyNgIEIAAgAWogATYCAA8LQYQtKAIAIQMgAkF4cSABaiEBAkAgAkH/AU0EQCAFKAIIIgQgAkEDdiICQQN0QZwtakcaIAQgBSgCDCIDRgRAQfQsQfQsKAIAQX4gAndxNgIADAILIAQgAzYCDCADIAQ2AggMAQsgBSgCGCEGAkAgBSAFKAIMIgJHBEAgAyAFKAIIIgNNBEAgAygCDBoLIAMgAjYCDCACIAM2AggMAQsCQCAFQRRqIgMoAgAiBA0AIAVBEGoiAygCACIEDQBBACECDAELA0AgAyEHIAQiAkEUaiIDKAIAIgQNACACQRBqIQMgAigCECIEDQALIAdBADYCAAsgBkUNAAJAIAUgBSgCHCIDQQJ0QaQvaiIEKAIARgRAIAQgAjYCACACDQFB+CxB+CwoAgBBfiADd3E2AgAMAgsgBkEQQRQgBigCECAFRhtqIAI2AgAgAkUNAQsgAiAGNgIYIAUoAhAiAwRAIAIgAzYCECADIAI2AhgLIAUoAhQiA0UNACACIAM2AhQgAyACNgIYCyAAIAFBAXI2AgQgACABaiABNgIAIABBiC0oAgBHDQFB/CwgATYCAA8LIAUgAkF+cTYCBCAAIAFBAXI2AgQgACABaiABNgIACyABQf8BTQRAIAFBA3YiAkEDdEGcLWohAQJ/QfQsKAIAIgNBASACdCICcUUEQEH0LCACIANyNgIAIAEMAQsgASgCCAshAyABIAA2AgggAyAANgIMIAAgATYCDCAAIAM2AggPCyAAQgA3AhAgAAJ/QQAgAUEIdiICRQ0AGkEfIAFB////B0sNABogAiACQYD+P2pBEHZBCHEiAnQiAyADQYDgH2pBEHZBBHEiA3QiBCAEQYCAD2pBEHZBAnEiBHRBD3YgAiADciAEcmsiAkEBdCABIAJBFWp2QQFxckEcagsiAzYCHCADQQJ0QaQvaiECAkACQEH4LCgCACIEQQEgA3QiB3FFBEBB+CwgBCAHcjYCACACIAA2AgAgACACNgIYDAELIAFBAEEZIANBAXZrIANBH0YbdCEDIAIoAgAhAgNAIAIiBCgCBEF4cSABRg0CIANBHXYhAiADQQF0IQMgBCACQQRxaiIHQRBqKAIAIgINAAsgByAANgIQIAAgBDYCGAsgACAANgIMIAAgADYCCA8LIAQoAggiASAANgIMIAQgADYCCCAAQQA2AhggACAENgIMIAAgATYCCAsLfwECfyAARQRAIAEQBw8LIAFBQE8EQEHwLEEwNgIAQQAPCyAAQXhqQRAgAUELakF4cSABQQtJGxAVIgIEQCACQQhqDwsgARAHIgJFBEBBAA8LIAIgAEF8QXggAEF8aigCACIDQQNxGyADQXhxaiIDIAEgAyABSRsQEyAAEAIgAguSAQEDfEQAAAAAAADwPyAAIACiIgJEAAAAAAAA4D+iIgOhIgREAAAAAAAA8D8gBKEgA6EgAiACIAIgAkSQFcsZoAH6PqJEd1HBFmzBVr+gokRMVVVVVVWlP6CiIAIgAqIiAyADoiACIAJE1DiIvun6qL2iRMSxtL2e7iE+oKJErVKcgE9+kr6goqCiIAAgAaKhoKALzQgDEH8BfQF8IwBBoCBrIgckACAFKAIAIQsgAygCACEOIAAoAlwhECAAKAJYIREgACgCSCEGIAAoAhghCSAAKAIcIQggAEEBNgJcAkAgDkUNACALRQ0AIAggCWtBAWohEiAGIAEgCGwiCEECdGohEyAIQQJ0IAZqQXxqIRQDQCAHIBIgDiAOIBJLGzYCDCAHIAtBgAggC0GACEkbIgY2AggCQAJAAn8gAUECdCIPIAAoAkRqIggoAgBFBEBBACEJIAdBEGoMAQsgByAGNgKcICAHIAgoAgA2ApggIABBATYCOCAAKAIYIQwgACABIAAoAkggACgCHCABbEECdGoiCiAHQZggaiAHQRBqIAdBnCBqIAAoAlQRAAAhDSAAKAI8IA9qIgkoAgAiCCAHKAKYICIGSARAIAcgCDYCmCAgCCEGCyAHIA02ApwgIAkgCSgCACAGazYCACAHKAKYICEGIAxBAk4EQCAMQX9qIQhBACEJA0AgCiAJQQJ0aiAKIAYgCWpBAnRqKAIANgIAIAlBAWoiCSAIRw0ACwsgACgCRCAPaiIIIAgoAgAgBmsiBjYCACAGBEAgDEF/aiEMQQAhCSAHKAKYICENA0AgCiAJIAxqIhVBAnRqIAogDSAVakECdGooAgA2AgAgCUEBaiIJIAZHDQALCyAAKAJcIQYgByAHKAIIIAcoApwgIglrNgIIIAsgCWshCyAIKAIADQEgB0EQaiAGIAlsQQJ0agshDSAHKAIMIQgCQCACBEAgCEUNASAAKAIYIQpBACEGA0AgBiAKakECdCATakF8aiACIAYgEWxBAXRqLgEAsjgCACAGQQFqIgYgCEcNAAsMAQsgCEUNACAUIAAoAhhBAnRqIAhBAnQQBAsgAEEBNgI4IAAoAhghCiAAIAEgACgCSCAAKAIcIAFsQQJ0aiIMIAdBDGogDSAHQQhqIAAoAlQRAAAhDSAAKAI8IA9qIg8oAgAiBiAHKAIMIghIBEAgByAGNgIMIAYhCAsgByANNgIIIA8gDygCACAIazYCACAHKAIMIQggCkECSA0BIApBf2ohCkEAIQYDQCAMIAZBAnRqIAwgBiAIakECdGooAgA2AgAgBkEBaiIGIApHDQALDAELQQAhCCAHQQA2AgggB0EANgIMC0EAIQYgBygCCCIKIAlqIgkEQANAIAQgBiAQbEEBdGoCf0GAgAIgB0EQaiAGQQJ0aioCACIWQwD//8ZdDQAaQf//ASAWQwD9/0ZeDQAaIBa7RAAAAAAAAOA/oJwiF5lEAAAAAAAA4EFjBEAgF6oMAQtBgICAgHgLOwEAIAZBAWoiBiAJRw0ACwsgCyAKayELIA4gCGsiDkUNASACIAggEWxBAXRqQQAgAhshAiAEIAkgEGxBAXRqIQQgCw0ACwsgACAQNgJcIAMgAygCACAOazYCACAFIAUoAgAgC2s2AgAgACgCVBogB0GgIGokAAu/BQIPfwl9IAFBAnQiBiAAKAJAaiIOKAIAIQdBACEBAkAgACgCPCAGaiIPKAIAIgggAygCACIKTg0AIAAoAighCyAAKAIkIQwgACgCXCENIAUoAgAiA0EAIANBAEobIQUgACgCDCIGsyEbIAAoAhgiEEEBTgRAA0AgASAFRgRAIAUhAQwDCyAAKAIwIhEgB2wiAyADIAZuIgMgBmxrsyEYIAIgCEECdGohEkEEIANrIRMgACgCTCEUQQAhA0MAAAAAIRZDAAAAACEZQwAAAAAhGkMAAAAAIRcDQCAZIBIgA0ECdGoqAgAiFSAUIBMgA0EBaiIDIBFsakECdGoiCSoCAJSSIRkgFiAVIAkqAgSUkiEWIBogFSAJQXxqKgIAlJIhGiAXIBUgCUF4aioCAJSSIRcgAyAQRw0ACyAEIAEgDWxBAnRqIBggG5UiFSAVIBVDiqsqPpQiGJSUIhwgGJMiGCAXlCAVIBUgFUMAAAA/lJQiF5IgFSAXlJMiHSAalJIgGUQAAAAAAADwPyAYu6EgHbuhIBcgFUM7qqq+lJIgHJMiFbuhtpSSIBUgFpSSOAIAIAcgC2oiA0EAIAYgAyAGSRtrIQcgAUEBaiEBIAggDGogAyAGT2oiCCAKSA0ADAIACwALA0AgASAFRgRAIAUhAQwCCyAEIAEgDWxBAnRqIAAoAjAgB2wgBnCzIBuVIhUgFSAVQ4qrKj6UIhaUlCIZIBaTIhpDAAAAAJQgFSAVIBVDAAAAP5SUIhaSIBUgFpSTIhdDAAAAAJSSRAAAAAAAAPA/IBq7oSAXu6EgFiAVQzuqqr6UkiAZkyIVu6G2QwAAAACUkiAVQwAAAACUkjgCACAHIAtqIgJBACAGIAIgBkkbayEHIAFBAWohASAIIAxqIAIgBk9qIgggCkgNAAsLIA8gCDYCACAOIAc2AgAgAQvpBQMPfwR9BHwgAUECdCIGIAAoAkBqIg4oAgAhB0EAIQECQCAAKAI8IAZqIg8oAgAiCCADKAIAIgpODQAgACgCKCELIAAoAiQhDCAAKAJcIQ0gBSgCACIDQQAgA0EAShshBSAAKAIMIgazIRggACgCGCIQQQFOBEADQCABIAVGBEAgBSEBDAMLIAAoAjAiESAHbCIDIAMgBm4iAyAGbGuzIRYgAiAIQQJ0aiESQQQgA2shEyAAKAJMIRRBACEDRAAAAAAAAAAAIRlEAAAAAAAAAAAhGkQAAAAAAAAAACEbRAAAAAAAAAAAIRwDQCAaIBIgA0ECdGoqAgAiFSAUIBMgA0EBaiIDIBFsakECdGoiCSoCAJS7oCEaIBkgFSAJKgIElLugIRkgGyAVIAlBfGoqAgCUu6AhGyAcIBUgCUF4aioCAJS7oCEcIAMgEEcNAAsgBCABIA1sQQJ0aiAcIBYgGJUiFSAVIBVDiqsqPpQiFpSUIhcgFpO7IhyiIBsgFSAVIBVDAAAAP5SUIhaSIBUgFpSTuyIboqAgGkQAAAAAAADwPyAcoSAboSAWIBVDO6qqvpSSIBeTuyIaoba7oqAgGSAaoqC2OAIAIAcgC2oiA0EAIAYgAyAGSRtrIQcgAUEBaiEBIAggDGogAyAGT2oiCCAKSA0ADAIACwALA0AgASAFRgRAIAUhAQwCCyAEIAEgDWxBAnRqIAAoAjAgB2wgBnCzIBiVIhUgFSAVQ4qrKj6UIhaUlCIXIBaTuyIZRAAAAAAAAAAAoiAVIBUgFUMAAAA/lJQiFpIgFSAWlJO7IhpEAAAAAAAAAACioEQAAAAAAADwPyAZoSAaoSAWIBVDO6qqvpSSIBeTuyIZoba7RAAAAAAAAAAAoqAgGUQAAAAAAAAAAKKgtjgCACAHIAtqIgJBACAGIAIgBkkbayEHIAFBAWohASAIIAxqIAIgBk9qIgggCkgNAAsLIA8gCDYCACAOIAc2AgAgAQv1AgINfwF9IAFBAnQiBiAAKAJAaiINKAIAIQdBACEBAkAgACgCPCAGaiIOKAIAIgYgAygCACIJTg0AIAAoAgwhCCAAKAIoIQogACgCJCELIAAoAlwhDCAFKAIAIgNBACADQQBKGyEDIAAoAhgiBUEBTgRAIAAoAkwhDwNAIAEgA0YEQCADIQEMAwsgAiAGQQJ0aiEQIA8gBSAHbEECdGohEUMAAAAAIRNBACEAA0AgEyARIABBAnQiEmoqAgAgECASaioCAJSSIRMgAEEBaiIAIAVHDQALIAQgASAMbEECdGogEzgCACAHIApqIgBBACAIIAAgCEkbayEHIAFBAWohASAGIAtqIAAgCE9qIgYgCUgNAAsMAQsDQCABIANGBEAgAyEBDAILIAQgASAMbEECdGpBADYCACAHIApqIgBBACAIIAAgCEkbayEHIAFBAWohASAGIAtqIAAgCE9qIgYgCUgNAAsLIA4gBjYCACANIAc2AgAgAQv5AwIOfwR8IAFBAnQiBiAAKAJAaiIRKAIAIQdBACEBAkAgACgCPCAGaiISKAIAIgYgAygCACIMTg0AIAAoAgwhCCAAKAIoIQ0gACgCJCEOIAAoAlwhDyAFKAIAIgNBACADQQBKGyEDIAAoAhgiEEEBTgRAIAAoAkwhEwNAIAEgA0YEQCADIQEMAwsgAiAGQQJ0aiEAIBMgByAQbEECdGohCkEAIQVEAAAAAAAAAAAhFEQAAAAAAAAAACEVRAAAAAAAAAAAIRZEAAAAAAAAAAAhFwNAIBcgCiAFQQJ0IglqKgIAIAAgCWoqAgCUu6AhFyAUIAogCUEMciILaioCACAAIAtqKgIAlLugIRQgFSAKIAlBCHIiC2oqAgAgACALaioCAJS7oCEVIBYgCiAJQQRyIglqKgIAIAAgCWoqAgCUu6AhFiAFQQRqIgUgEEgNAAsgBCABIA9sQQJ0aiAXIBagIBWgIBSgtjgCACAHIA1qIgBBACAIIAAgCEkbayEHIAFBAWohASAGIA5qIAAgCE9qIgYgDEgNAAsMAQsDQCABIANGBEAgAyEBDAILIAQgASAPbEECdGpBADYCACAHIA1qIgBBACAIIAAgCEkbayEHIAFBAWohASAGIA5qIAAgCE9qIgYgDEgNAAsLIBIgBjYCACARIAc2AgAgAQv+AwECfyACQYAETwRAIAAgASACEAAaDwsgACACaiEDAkAgACABc0EDcUUEQAJAIAJBAUgEQCAAIQIMAQsgAEEDcUUEQCAAIQIMAQsgACECA0AgAiABLQAAOgAAIAFBAWohASACQQFqIgIgA08NASACQQNxDQALCwJAIANBfHEiAEHAAEkNACACIABBQGoiBEsNAANAIAIgASgCADYCACACIAEoAgQ2AgQgAiABKAIINgIIIAIgASgCDDYCDCACIAEoAhA2AhAgAiABKAIUNgIUIAIgASgCGDYCGCACIAEoAhw2AhwgAiABKAIgNgIgIAIgASgCJDYCJCACIAEoAig2AiggAiABKAIsNgIsIAIgASgCMDYCMCACIAEoAjQ2AjQgAiABKAI4NgI4IAIgASgCPDYCPCABQUBrIQEgAkFAayICIARNDQALCyACIABPDQEDQCACIAEoAgA2AgAgAUEEaiEBIAJBBGoiAiAASQ0ACwwBCyADQQRJBEAgACECDAELIANBfGoiBCAASQRAIAAhAgwBCyAAIQIDQCACIAEtAAA6AAAgAiABLQABOgABIAIgAS0AAjoAAiACIAEtAAM6AAMgAUEEaiEBIAJBBGoiAiAETQ0ACwsgAiADSQRAA0AgAiABLQAAOgAAIAFBAWohASACQQFqIgIgA0cNAAsLC7kCAQR/AkAgAUUNACACRQ0AAkAgACgCACADRw0AIAAoAgQgBEcNACAAKAIIIAFHDQAgACgCDCACRg0BCyAAIAE2AgggACAENgIEIAAgAzYCACAAKAIMIQUgACACNgIMIAEhBCACIQMDQCAEIAMiBHAiAw0ACyAAIAIgBG4iAzYCDCAAIAEgBG42AggCQCAFRQ0AIAAoAhRFDQAgACgCQCEGQQAhBANAIAYgBEECdGoiASgCACICIAIgBW4iAiAFbGsiB0F/IANuIghLDQIgAiAISw0CIAIgA2wiAiADIAdsIAVuIgNBf3NLDQIgASACIANqIgI2AgAgAiAAKAIMIgJPBEAgASACQX9qNgIACyAEQQFqIgQgACgCFE8NASAAKAIMIQMMAAALAAsgACgCNEUEQA8LIAAQChoLC6sHAQl/IAAoAgQiB0EDcSECIAAgB0F4cSIGaiEEAkBBhC0oAgAiBSAASw0AIAJBAUYNAAsCQCACRQRAQQAhAiABQYACSQ0BIAYgAUEEak8EQCAAIQIgBiABa0HUMCgCAEEBdE0NAgtBAA8LAkAgBiABTwRAIAYgAWsiAkEQSQ0BIAAgB0EBcSABckECcjYCBCAAIAFqIgEgAkEDcjYCBCAEIAQoAgRBAXI2AgQgASACEAsMAQtBACECIARBjC0oAgBGBEBBgC0oAgAgBmoiBSABTQ0CIAAgB0EBcSABckECcjYCBCAAIAFqIgIgBSABayIBQQFyNgIEQYAtIAE2AgBBjC0gAjYCAAwBCyAEQYgtKAIARgRAQfwsKAIAIAZqIgUgAUkNAgJAIAUgAWsiAkEQTwRAIAAgB0EBcSABckECcjYCBCAAIAFqIgEgAkEBcjYCBCAAIAVqIgUgAjYCACAFIAUoAgRBfnE2AgQMAQsgACAHQQFxIAVyQQJyNgIEIAAgBWoiASABKAIEQQFyNgIEQQAhAkEAIQELQYgtIAE2AgBB/CwgAjYCAAwBCyAEKAIEIgNBAnENASADQXhxIAZqIgkgAUkNASAJIAFrIQoCQCADQf8BTQRAIAQoAggiBiADQQN2IgVBA3RBnC1qRxogBiAEKAIMIghGBEBB9CxB9CwoAgBBfiAFd3E2AgAMAgsgBiAINgIMIAggBjYCCAwBCyAEKAIYIQgCQCAEIAQoAgwiA0cEQCAFIAQoAggiAk0EQCACKAIMGgsgAiADNgIMIAMgAjYCCAwBCwJAIARBFGoiAigCACIGDQAgBEEQaiICKAIAIgYNAEEAIQMMAQsDQCACIQUgBiIDQRRqIgIoAgAiBg0AIANBEGohAiADKAIQIgYNAAsgBUEANgIACyAIRQ0AAkAgBCAEKAIcIgVBAnRBpC9qIgIoAgBGBEAgAiADNgIAIAMNAUH4LEH4LCgCAEF+IAV3cTYCAAwCCyAIQRBBFCAIKAIQIARGG2ogAzYCACADRQ0BCyADIAg2AhggBCgCECICBEAgAyACNgIQIAIgAzYCGAsgBCgCFCICRQ0AIAMgAjYCFCACIAM2AhgLIApBD00EQCAAIAdBAXEgCXJBAnI2AgQgACAJaiIBIAEoAgRBAXI2AgQMAQsgACAHQQFxIAFyQQJyNgIEIAAgAWoiAiAKQQNyNgIEIAAgCWoiASABKAIEQQFyNgIEIAIgChALCyAAIQILIAILxQEBAn8jAEEQayIBJAACQCAAvUIgiKdB/////wdxIgJB+8Ok/wNNBEAgAkGAgMDyA0kNASAARAAAAAAAAAAAQQAQCCEADAELIAJBgIDA/wdPBEAgACAAoSEADAELAkACQAJAAkAgACABEBhBA3EOAwABAgMLIAErAwAgASsDCEEBEAghAAwDCyABKwMAIAErAwgQDSEADAILIAErAwAgASsDCEEBEAiaIQAMAQsgASsDACABKwMIEA2aIQALIAFBEGokACAAC9cCAQJ/AkACQAJAIABFDQAgAUUNACACRQ0AIAVBC0kNAQsgBkUNASAGQQM2AgBBAA8LQeAAEAYiB0UEQEEAIQcgBkUNASAGQQE2AgBBAA8LIAdCADcCACAHQYCAgPwDNgIsIAdBfzYCECAHQoGAgIAQNwJYIAcgADYCFCAHQaABNgIgIAdCADcCCCAHIABBAnQiABAGIgg2AjwCQCAIRQ0AIAcgABAGIgg2AkQgCEUNACAHIAAQBiIANgJAIABFDQAgByAFNgIQIAcgASACIAMgBBAUAkAgBxAKIgBFBEAgB0EBNgI0DAELIAcoAkgQAiAHKAJMEAIgBygCPBACIAcoAkQQAiAHKAJAEAIgBxACQQAhBwsgBkUNASAGIAA2AgAgBw8LIAYEQCAGQQE2AgALIAcoAkwQAiAHKAI8EAIgBygCRBACIAcoAkAQAiAHEAJBACEHCyAHC8sJAwV/AX4EfCMAQTBrIgQkAAJAAkACQCAAvSIHQiCIpyICQf////8HcSIDQfrUvYAETQRAIAJB//8/cUH7wyRGDQEgA0H8souABE0EQCAHQgBZBEAgASAARAAAQFT7Ifm/oCIARDFjYhphtNC9oCIIOQMAIAEgACAIoUQxY2IaYbTQvaA5AwhBASECDAULIAEgAEQAAEBU+yH5P6AiAEQxY2IaYbTQPaAiCDkDACABIAAgCKFEMWNiGmG00D2gOQMIQX8hAgwECyAHQgBZBEAgASAARAAAQFT7IQnAoCIARDFjYhphtOC9oCIIOQMAIAEgACAIoUQxY2IaYbTgvaA5AwhBAiECDAQLIAEgAEQAAEBU+yEJQKAiAEQxY2IaYbTgPaAiCDkDACABIAAgCKFEMWNiGmG04D2gOQMIQX4hAgwDCyADQbuM8YAETQRAIANBvPvXgARNBEAgA0H8ssuABEYNAiAHQgBZBEAgASAARAAAMH982RLAoCIARMqUk6eRDum9oCIIOQMAIAEgACAIoUTKlJOnkQ7pvaA5AwhBAyECDAULIAEgAEQAADB/fNkSQKAiAETKlJOnkQ7pPaAiCDkDACABIAAgCKFEypSTp5EO6T2gOQMIQX0hAgwECyADQfvD5IAERg0BIAdCAFkEQCABIABEAABAVPshGcCgIgBEMWNiGmG08L2gIgg5AwAgASAAIAihRDFjYhphtPC9oDkDCEEEIQIMBAsgASAARAAAQFT7IRlAoCIARDFjYhphtPA9oCIIOQMAIAEgACAIoUQxY2IaYbTwPaA5AwhBfCECDAMLIANB+sPkiQRLDQELIAEgACAARIPIyW0wX+Q/okQAAAAAAAA4Q6BEAAAAAAAAOMOgIglEAABAVPsh+b+ioCIIIAlEMWNiGmG00D2iIguhIgA5AwAgA0EUdiIFIAC9QjSIp0H/D3FrQRFIIQMCfyAJmUQAAAAAAADgQWMEQCAJqgwBC0GAgICAeAshAgJAIAMNACABIAggCUQAAGAaYbTQPaIiAKEiCiAJRHNwAy6KGaM7oiAIIAqhIAChoSILoSIAOQMAIAUgAL1CNIinQf8PcWtBMkgEQCAKIQgMAQsgASAKIAlEAAAALooZozuiIgChIgggCUTBSSAlmoN7OaIgCiAIoSAAoaEiC6EiADkDAAsgASAIIAChIAuhOQMIDAELIANBgIDA/wdPBEAgASAAIAChIgA5AwAgASAAOQMIQQAhAgwBCyAHQv////////8Hg0KAgICAgICAsMEAhL8hAEEAIQJBASEFA0AgBEEQaiACQQN0agJ/IACZRAAAAAAAAOBBYwRAIACqDAELQYCAgIB4C7ciCDkDACAAIAihRAAAAAAAAHBBoiEAQQEhAiAFQQFxIQZBACEFIAYNAAsgBCAAOQMgAkAgAEQAAAAAAAAAAGIEQEECIQIMAQtBASEFA0AgBSICQX9qIQUgBEEQaiACQQN0aisDAEQAAAAAAAAAAGENAAsLIARBEGogBCADQRR2Qep3aiACQQFqEBkhAiAEKwMAIQAgB0J/VwRAIAEgAJo5AwAgASAEKwMImjkDCEEAIAJrIQIMAQsgASAAOQMAIAEgBCkDCDcDCAsgBEEwaiQAIAILtA4CEH8CfCMAQbAEayIGJAAgAiACQX1qQRhtIgRBACAEQQBKGyINQWhsaiEIQdQWKAIAIgkgA0F/aiIHakEATgRAIAMgCWohBCANIAdrIQIDQCAGQcACaiAFQQN0aiACQQBIBHxEAAAAAAAAAAAFIAJBAnRB4BZqKAIAtws5AwAgAkEBaiECIAVBAWoiBSAERw0ACwsgCEFoaiEKQQAhBCAJQQAgCUEAShshBSADQQFIIQsDQAJAIAsEQEQAAAAAAAAAACEUDAELIAQgB2ohDEEAIQJEAAAAAAAAAAAhFANAIBQgACACQQN0aisDACAGQcACaiAMIAJrQQN0aisDAKKgIRQgAkEBaiICIANHDQALCyAGIARBA3RqIBQ5AwAgBCAFRiECIARBAWohBCACRQ0AC0EvIAhrIRBBMCAIayEOIAhBZ2ohESAJIQQCQANAIAYgBEEDdGorAwAhFEEAIQIgBCEFIARBAUgiB0UEQANAIAZB4ANqIAJBAnRqAn8gFAJ/IBREAAAAAAAAcD6iIhSZRAAAAAAAAOBBYwRAIBSqDAELQYCAgIB4C7ciFEQAAAAAAABwwaKgIhWZRAAAAAAAAOBBYwRAIBWqDAELQYCAgIB4CzYCACAGIAVBf2oiBUEDdGorAwAgFKAhFCACQQFqIgIgBEcNAAsLAn8gFCAKEAUiFCAURAAAAAAAAMA/opxEAAAAAAAAIMCioCIUmUQAAAAAAADgQWMEQCAUqgwBC0GAgICAeAshCyAUIAu3oSEUAkACQAJAAn8gCkEBSCISRQRAIARBAnQgBmoiAiACKALcAyICIAIgDnUiAiAOdGsiBTYC3AMgAiALaiELIAUgEHUMAQsgCg0BIARBAnQgBmooAtwDQRd1CyIMQQFIDQIMAQtBAiEMIBREAAAAAAAA4D9mQQFzRQ0AQQAhDAwBC0EAIQJBACEFIAdFBEADQCAGQeADaiACQQJ0aiITKAIAIQ9B////ByEHAn8CQCAFDQBBgICACCEHIA8NAEEADAELIBMgByAPazYCAEEBCyEFIAJBAWoiAiAERw0ACwsCQCASDQACQAJAIBEOAgABAgsgBEECdCAGaiICIAIoAtwDQf///wNxNgLcAwwBCyAEQQJ0IAZqIgIgAigC3ANB////AXE2AtwDCyALQQFqIQsgDEECRw0ARAAAAAAAAPA/IBShIRRBAiEMIAVFDQAgFEQAAAAAAADwPyAKEAWhIRQLIBREAAAAAAAAAABhBEBBACEFAkAgBCICIAlMDQADQCAGQeADaiACQX9qIgJBAnRqKAIAIAVyIQUgAiAJSg0ACyAFRQ0AIAohCANAIAhBaGohCCAGQeADaiAEQX9qIgRBAnRqKAIARQ0ACwwDC0EBIQIDQCACIgVBAWohAiAGQeADaiAJIAVrQQJ0aigCAEUNAAsgBCAFaiEFA0AgBkHAAmogAyAEaiIHQQN0aiAEQQFqIgQgDWpBAnRB4BZqKAIAtzkDAEEAIQJEAAAAAAAAAAAhFCADQQFOBEADQCAUIAAgAkEDdGorAwAgBkHAAmogByACa0EDdGorAwCioCEUIAJBAWoiAiADRw0ACwsgBiAEQQN0aiAUOQMAIAQgBUgNAAsgBSEEDAELCwJAIBRBACAKaxAFIhREAAAAAAAAcEFmQQFzRQRAIAZB4ANqIARBAnRqAn8gFAJ/IBREAAAAAAAAcD6iIhSZRAAAAAAAAOBBYwRAIBSqDAELQYCAgIB4CyICt0QAAAAAAABwwaKgIhSZRAAAAAAAAOBBYwRAIBSqDAELQYCAgIB4CzYCACAEQQFqIQQMAQsCfyAUmUQAAAAAAADgQWMEQCAUqgwBC0GAgICAeAshAiAKIQgLIAZB4ANqIARBAnRqIAI2AgALRAAAAAAAAPA/IAgQBSEUAkAgBEF/TA0AIAQhAgNAIAYgAkEDdGogFCAGQeADaiACQQJ0aigCALeiOQMAIBREAAAAAAAAcD6iIRQgAkEASiEAIAJBf2ohAiAADQALQQAhByAEQQBIDQAgCUEAIAlBAEobIQAgBCEFA0AgACAHIAAgB0kbIQMgBCAFayEIQQAhAkQAAAAAAAAAACEUA0AgFCACQQN0QbAsaisDACAGIAIgBWpBA3RqKwMAoqAhFCACIANHIQogAkEBaiECIAoNAAsgBkGgAWogCEEDdGogFDkDACAFQX9qIQUgBCAHRyECIAdBAWohByACDQALC0QAAAAAAAAAACEUIARBAE4EQCAEIQIDQCAUIAZBoAFqIAJBA3RqKwMAoCEUIAJBAEohACACQX9qIQIgAA0ACwsgASAUmiAUIAwbOQMAIAYrA6ABIBShIRRBASECIARBAU4EQANAIBQgBkGgAWogAkEDdGorAwCgIRQgAiAERyEAIAJBAWohAiAADQALCyABIBSaIBQgDBs5AwggBkGwBGokACALQQdxCxoAIABBBE0EQCAAQQJ0QbAWaigCAA8LQewICxYAIAEgACgCADYCACACIAAoAgQ2AgALzAEBBn8gACgCXCEIIAIoAgAhBiAEKAIAIQcgACAAKAIUIgU2AlwgACgCWCEJIAAgBTYCWAJAIAVFDQBBACEFIAFFBEADQCAEIAc2AgAgAiAGNgIAIAAgBUEAIAIgAyAFQQF0aiAEEA4gBUEBaiIFIAAoAhRJDQAMAgALAAsDQCAEIAc2AgAgAiAGNgIAIAAgBSABIAVBAXQiCmogAiADIApqIAQQDiAFQQFqIgUgACgCFEkNAAsLIAAgCDYCXCAAIAk2AlggACgCVEEFRgspACAAKAJIEAIgACgCTBACIAAoAjwQAiAAKAJEEAIgACgCQBACIAAQAgvDAQEHfyABQQJ0IgYgACgCQGoiBygCACECQQAhAQJAIAAoAjwgBmoiCCgCACIGIAMoAgAiCU4NACAAKAIMIQMgACgCKCEKIAAoAiQhCyAAKAJcIQwgBSgCACIAQQAgAEEAShshAANAIAAgAUYEQCAAIQEMAgsgBCABIAxsQQJ0akEANgIAIAIgCmoiBUEAIAMgBSADSRtrIQIgAUEBaiEBIAYgC2ogBSADT2oiBiAJSA0ACwsgCCAGNgIAIAcgAjYCACABCxIAIAAgASACIAEgAiADIAQQFwsDAAELC9wkBgBBgAgLpgFTdWNjZXNzLgBNZW1vcnkgYWxsb2NhdGlvbiBmYWlsZWQuAEJhZCByZXNhbXBsZXIgc3RhdGUuAEludmFsaWQgYXJndW1lbnQuAElucHV0IGFuZCBvdXRwdXQgYnVmZmVycyBvdmVybGFwLgBVbmtub3duIGVycm9yLiBCYWQgZXJyb3IgY29kZSBvciBzdHJhbmdlIHZlcnNpb24gbWlzbWF0Y2guAEGwCQvQCAgAAAAEAAAA4XpUP/YoXD+MBQAAEAAAAAQAAACamVk/rkdhP4wFAAAgAAAABAAAAMHKYT/D9Wg/jAUAADAAAAAIAAAAuB5lP4PAaj+UBQAAQAAAAAgAAACoxms/16NwP5QFAABQAAAAEAAAADEIbD/Xo3A/nAUAAGAAAAAQAAAA16NwP4XrcT+cBQAAgAAAABAAAAAzM3M/MzNzP5wFAACgAAAAEAAAAI/CdT+PwnU/nAUAAMAAAAAgAAAA2c53P9nOdz+kBQAAAAEAACAAAACamXk/mpl5P6QFAACwBQAAIAAAANAGAAAgAAAA8AcAACAAAAAQCQAAQAAAAAAAAAAlkeC6IOrvPwAAAAAAAPA/JZHguiDq7z/eSyvPzajvP1of/5rmPO8/Vc8Xtdqn7j++oGT2ouvtP9eQbjq4Cu0/i+jPZQcI7D+13m+04+bqP1gAdBT3quk/InJVNDFY6D9Qxa5ptfLmP1jktgHIfuU/lEUnbLsA5D9HK0pL3XziP6mj42pk9+A/qqmXpb7o3j8WxHqCSO/bP0tmzI+FCdk/P+nhV+491j/Cam59P5LTP6C+p2ppC9E/K3JfOQhbzT8nmWIvkPfIP6EHyq8X8cQ/ymKsgIxKwT8ixb5sVAq8P2GFAIUfQbY/j95wH7k1sT9DhMmeTsOpPyF7e98ReKI/80co6LznmD9Z7Q7n6XWOPyECDqFKzX4/AAAAAAAAAADBU0zOHuLvPwAAAAAAAPA/wVNMzh7i7z/PQsiaDYnvPwxt55h/9u4/iBIteTwt7j+aTfS3DDHtP7WwwLqeBuw/zJkOGWaz6j/ceSzHdT3pP1GrIrtWq+c/lTbJTdwD5j91q+ek903kP3cAm96LkOI/E4HqH0TS4D/GAMPR2TLeP1M+BFWj19o/2QhhwT+d1z+oagbhn4zUP24kfRgprdE/Wu959kMJzj8bAGArVy7JP1GWaxuQzsQ/i+xardnrwD/p1ilefgq7P98X+tRvLrU/Bg2BTAA4sD/KvUTl9C+oP6YV+O2YeKE/S/VT0nlDmD+Uz5/0jQGQPwBuNz3/qIM/3mkZRs2ZdT/ghYzL4ShjP/yp8dJNYkA/AAAAAAAAAAC5pqOQItrvPwAAAAAAAPA/uaajkCLa7z+FCxbae2nvP0RGzXjXsO4/JlPDhsC07T8z2i5dVnvsP6nOFzkTDOs/qepxIYdv6T9y5pEeCq/nP9bRacRp1OU/wKekFJXp4z85oADlSvjhP+qDG9/NCeA/VWrVMkJN3D9DXd77n6zYPw9a9sGFPtU/HwXbykMN0j+gZzcjGEHOP4yLevPh+sg/8K5IhvtMxD904ycfzDfAP+5his0ib7k/O05VygCKsz/oYS7K6FetPyQzzSoieaU/u2lt+cyCnj8iLHRvj++UPz4R3RbZjIs/XcJfm6YygT9QCLLYBQd0P4HIKr4EG2U/3O6rk6/bUj8bypqibUY3PwBBkBILmATIUQzShPTvPwAAAAAAAPA/yFEM0oT07z/2lQfpKdLvP9rTxPEyme8/1P0Q2Q9K7z9+n7tuW+XuP2HBP53Za+4/HdfxJXXe7T9qf2/sPD7tP8nqNcFgjOw/dyRFAS7K6z8evH7aC/nqPzrQvzR3Guo/9SUjgP4v6T/yQEODPTvoPw4HU97YPec/9/Kvo3k55j9MyMUgyS/lP864eJFsIuQ//5laGQET4z8vnDHtFwPiP2PZBs0y9OA/TVqGcoHP3z/Nj2T7Nb7dPxXGN5AFt9s/4AetqD282T9gMwqT88/XP/Md/MQB9NU/SoVn+AUq1D/nzTwUYHPSP43KNDcy0dA/2NF68MGIzj+vJ3gSKpvLP8hIk9552sg/tc9bIx9Hxj89V0IUH+HDP7XNAUAdqME/TbqQu8Y2vz8uDCY41HO7P2aSBQrEBLg/gFQWx3nmtD9iSE4mbhWyP6QVhJeFG68/7LLrIKeWqj+XqEFFk5OmPz54L+9YCaM/1eesR8jdnz9sz00XOXaaP/Tx2Oj/yZU/Dwu1pnnHkT9VF2z6HruMP/6ksSiy94Y/PLeW6n4lgj+l+7XMVE58P2cfVHefwnU/BcR/FTt1cD90f7OcnW9oP9Pw8wCSwGE/91Lb+qcjWT8/wazteUBRP/FCAJH6wkY/e7LNUz6APD8mUZIi8I8wP8dUbmB6FCE/fYl/NyCrCz/xaOOItfjkPgBBsRYLEQQAAAkEAAAjBAAAOAQAAEoEAEHQFgvXFQMAAAAEAAAABAAAAAYAAACD+aIARE5uAPwpFQDRVycA3TT1AGLbwAA8mZUAQZBDAGNR/gC73qsAt2HFADpuJADSTUIASQbgAAnqLgAcktEA6x3+ACmxHADoPqcA9TWCAES7LgCc6YQAtCZwAEF+XwDWkTkAU4M5AJz0OQCLX4QAKPm9APgfOwDe/5cAD5gFABEv7wAKWosAbR9tAM9+NgAJyycARk+3AJ5mPwAt6l8Auid1AOXrxwA9e/EA9zkHAJJSigD7a+oAH7FfAAhdjQAwA1YAe/xGAPCrawAgvM8ANvSaAOOpHQBeYZEACBvmAIWZZQCgFF8AjUBoAIDY/wAnc00ABgYxAMpWFQDJqHMAe+JgAGuMwAAZxEcAzWfDAAno3ABZgyoAi3bEAKYclgBEr90AGVfRAKU+BQAFB/8AM34/AMIy6ACYT94Au30yACY9wwAea+8An/heADUfOgB/8soA8YcdAHyQIQBqJHwA1W76ADAtdwAVO0MAtRTGAMMZnQCtxMIALE1BAAwAXQCGfUYA43EtAJvGmgAzYgAAtNJ8ALSnlwA3VdUA1z72AKMQGABNdvwAZJ0qAHDXqwBjfPgAerBXABcV5wDASVYAO9bZAKeEOAAkI8sA1op3AFpUIwAAH7kA8QobABnO3wCfMf8AZh5qAJlXYQCs+0cAfn/YACJltwAy6IkA5r9gAO/EzQBsNgkAXT/UABbe1wBYO94A3puSANIiKAAohugA4lhNAMbKMgAI4xYA4H3LABfAUADzHacAGOBbAC4TNACDEmIAg0gBAPWOWwCtsH8AHunyAEhKQwAQZ9MAqt3YAK5fQgBqYc4ACiikANOZtAAGpvIAXHd/AKPCgwBhPIgAinN4AK+MWgBv170ALaZjAPS/ywCNge8AJsFnAFXKRQDK2TYAKKjSAMJhjQASyXcABCYUABJGmwDEWcQAyMVEAE2ykQAAF/MA1EOtAClJ5QD91RAAAL78AB6UzABwzu4AEz71AOzxgACz58MAx/goAJMFlADBcT4ALgmzAAtF8wCIEpwAqyB7AC61nwBHksIAezIvAAxVbQByp5AAa+cfADHLlgB5FkoAQXniAPTfiQDolJcA4uaEAJkxlwCI7WsAX182ALv9DgBImrQAZ6RsAHFyQgCNXTIAnxW4ALzlCQCNMSUA93Q5ADAFHAANDAEASwhoACzuWABHqpAAdOcCAL3WJAD3faYAbkhyAJ8W7wCOlKYAtJH2ANFTUQDPCvIAIJgzAPVLfgCyY2gA3T5fAEBdAwCFiX8AVVIpADdkwABt2BAAMkgyAFtMdQBOcdQARVRuAAsJwQAq9WkAFGbVACcHnQBdBFAAtDvbAOp2xQCH+RcASWt9AB0nugCWaSkAxsysAK0UVACQ4moAiNmJACxyUAAEpL4AdweUAPMwcAAA/CcA6nGoAGbCSQBk4D0Al92DAKM/lwBDlP0ADYaMADFB3gCSOZ0A3XCMABe35wAI3zsAFTcrAFyAoABagJMAEBGSAA/o2ABsgK8A2/9LADiQDwBZGHYAYqUVAGHLuwDHibkAEEC9ANLyBABJdScA67b2ANsiuwAKFKoAiSYvAGSDdgAJOzMADpQaAFE6qgAdo8IAr+2uAFwmEgBtwk0ALXqcAMBWlwADP4MACfD2ACtAjABtMZkAObQHAAwgFQDYw1sA9ZLEAMatSwBOyqUApzfNAOapNgCrkpQA3UJoABlj3gB2jO8AaItSAPzbNwCuoasA3xUxAACuoQAM+9oAZE1mAO0FtwApZTAAV1a/AEf/OgBq+bkAdb7zACiT3wCrgDAAZoz2AATLFQD6IgYA2eQdAD2zpABXG48ANs0JAE5C6QATvqQAMyO1APCqGgBPZagA0sGlAAs/DwBbeM0AI/l2AHuLBACJF3IAxqZTAG9u4gDv6wAAm0pYAMTatwCqZroAds/PANECHQCx8S0AjJnBAMOtdwCGSNoA912gAMaA9ACs8C8A3eyaAD9cvADQ3m0AkMcfACrbtgCjJToAAK+aAK1TkwC2VwQAKS20AEuAfgDaB6cAdqoOAHtZoQAWEioA3LctAPrl/QCJ2/4Aib79AOR2bAAGqfwAPoBwAIVuFQD9h/8AKD4HAGFnMwAqGIYATb3qALPnrwCPbW4AlWc5ADG/WwCE10gAMN8WAMctQwAlYTUAyXDOADDLuAC/bP0ApACiAAVs5ABa3aAAIW9HAGIS0gC5XIQAcGFJAGtW4ACZUgEAUFU3AB7VtwAz8cQAE25fAF0w5ACFLqkAHbLDAKEyNgAIt6QA6rHUABb3IQCPaeQAJ/93AAwDgACNQC0AT82gACClmQCzotMAL10KALT5QgAR2ssAfb7QAJvbwQCrF70AyqKBAAhqXAAuVRcAJwBVAH8U8ADhB4YAFAtkAJZBjQCHvt4A2v0qAGsltgB7iTQABfP+ALm/ngBoak8ASiqoAE/EWgAt+LwA11qYAPTHlQANTY0AIDqmAKRXXwAUP7EAgDiVAMwgAQBx3YYAyd62AL9g9QBNZREAAQdrAIywrACywNAAUVVIAB77DgCVcsMAowY7AMBANQAG3HsA4EXMAE4p+gDWysgA6PNBAHxk3gCbZNgA2b4xAKSXwwB3WNQAaePFAPDaEwC6OjwARhhGAFV1XwDSvfUAbpLGAKwuXQAORO0AHD5CAGHEhwAp/ekA59bzACJ8ygBvkTUACODFAP/XjQBuauIAsP3GAJMIwQB8XXQAa62yAM1unQA+cnsAxhFqAPfPqQApc98Atcm6ALcAUQDisg0AdLokAOV9YAB02IoADRUsAIEYDAB+ZpQAASkWAJ96dgD9/b4AVkXvANl+NgDs2RMAi7q5AMSX/AAxqCcA8W7DAJTFNgDYqFYAtKi1AM/MDgASiS0Ab1c0ACxWiQCZzuMA1iC5AGteqgA+KpwAEV/MAP0LSgDh9PsAjjttAOKGLADp1IQA/LSpAO/u0QAuNckALzlhADghRAAb2cgAgfwKAPtKagAvHNgAU7SEAE6ZjABUIswAKlXcAMDG1gALGZYAGnC4AGmVZAAmWmAAP1LuAH8RDwD0tREA/Mv1ADS8LQA0vO4A6F3MAN1eYABnjpsAkjPvAMkXuABhWJsA4Ve8AFGDxgDYPhAA3XFIAC0c3QCvGKEAISxGAFnz1wDZepgAnlTAAE+G+gBWBvwA5XmuAIkiNgA4rSIAZ5PcAFXoqgCCJjgAyuebAFENpACZM7EAqdcOAGkFSABlsvAAf4inAIhMlwD50TYAIZKzAHuCSgCYzyEAQJ/cANxHVQDhdDoAZ+tCAP6d3wBe1F8Ae2ekALqsegBV9qIAK4gjAEG6VQBZbggAISqGADlHgwCJ4+YA5Z7UAEn7QAD/VukAHA/KAMVZigCU+isA08HFAA/FzwDbWq4AR8WGAIVDYgAhhjsALHmUABBhhwAqTHsAgCwaAEO/EgCIJpAAeDyJAKjE5ADl23sAxDrCACb06gD3Z4oADZK/AGWjKwA9k7EAvXwLAKRR3AAn3WMAaeHdAJqUGQCoKZUAaM4oAAnttABEnyAATpjKAHCCYwB+fCMAD7kyAKf1jgAUVucAIfEIALWdKgBvfk0ApRlRALX5qwCC39YAlt1hABY2AgDEOp8Ag6KhAHLtbQA5jXoAgripAGsyXABGJ1sAADTtANIAdwD89FUAAVlNAOBxgABBsywLPUD7Ifk/AAAAAC1EdD4AAACAmEb4PAAAAGBRzHg7AAAAgIMb8DkAAABAICV6OAAAAIAiguM2AAAAAB3zaTU=");return WebAssembly.instantiate(c,b).then(a,function(a){L("failed to asynchronously prepare wasm: "+a),p(a)})}(function(b){a(b.instance)}),{}}(),ta=A.___wasm_call_ctors=function(){return(ta=A.___wasm_call_ctors=A.asm.c).apply(null,arguments)},ua=A._speex_resampler_init=function(){return(ua=A._speex_resampler_init=A.asm.d).apply(null,arguments)},va=A._free=function(){return(va=A._free=A.asm.e).apply(null,arguments)},wa=A._speex_resampler_destroy=function(){return(wa=A._speex_resampler_destroy=A.asm.f).apply(null,arguments)},xa=A._speex_resampler_process_interleaved_int=function(){return(xa=A._speex_resampler_process_interleaved_int=A.asm.g).apply(null,arguments)},ya=A._speex_resampler_get_rate=function(){return(ya=A._speex_resampler_get_rate=A.asm.h).apply(null,arguments)},za=A._speex_resampler_strerror=function(){return(za=A._speex_resampler_strerror=A.asm.i).apply(null,arguments)},Aa=A._malloc=function(){return(Aa=A._malloc=A.asm.j).apply(null,arguments)};A.setValue=b,A.getValue=c,A.AsciiToString=d;var Ba;if(ma=function a(){Ba||x(),Ba||(ma=a)},A.run=x,A.preInit)for("function"==typeof A.preInit&&(A.preInit=[A.preInit]);0<A.preInit.length;)A.preInit.pop()();return N=!0,x(),a.ready}}();\r
	}\r
	get SpeexResampler() {\r
		return function(cc, is, os, q){return new SpeexResampler(cc, is, os, q);}\r
	}\r
	\r
	get emitterRms() {\r
		if (this.calculateRmsVolume){\r
			let rms = Math.sqrt(this._emitterSqrSum / this._emitterSamples);\r
			this._emitterSqrSum = 0;\r
			this._emitterSamples = 0;\r
			return rms;\r
		}else{\r
			return 0;\r
		}\r
	}\r
  \r
	constructor(options) {\r
		super();\r
		\r
		let that = this;\r
		this.moduleId = "speex-resample-switch-" + Math.round(Math.random() * 1000000) + "-" + Date.now();\r
		this.doDebug = options.processorOptions.doDebug || false;\r
		this.isReadyForProcessing = false;\r
		this.EXPECTED_SAMPLE_SIZE = 128;	//currently 128, but might change in future ... and even become variable! (I hope not)\r
\r
		this.sourceSamplerate = options.processorOptions.ctxInfo.sampleRate;	//INFO: should be same as global scope 'sampleRate'\r
\r
		this.targetSampleRate = options.processorOptions.targetSampleRate || options.processorOptions.ctxInfo.targetSampleRate || 16000;\r
		this.resampleQuality = (options.processorOptions.resampleQuality != undefined)? options.processorOptions.resampleQuality : 7;	//number from 1 to 10, 1 is fast but of bad quality, 10 is slow but best quality (less noise/aliasing, a higher complexity and a higher latency)\r
		this.emitterBufferSize = options.processorOptions.bufferSize || 512;	//TODO: there is probably a mismatch (we should pull go back to the idea of making the buffer bigger but pull less)\r
		this.channelCount = 1; //options.processorOptions.channels || 1;		//TODO: supports ONLY MONO atm\r
		this._bytesPerSample = 2;			//for buffer (aka Xint8 Array) length is in bytes (8bit), so *2 to get 16bit length;\r
		this.resampler;\r
		\r
		this.passThroughMode = (options.processorOptions.passThroughMode != undefined)? options.processorOptions.passThroughMode : 1;	//0: nothing, 1: original, 2: 16bit PCM\r
		this.calculateRmsVolume = (options.processorOptions.calculateRmsVolume != undefined)? options.processorOptions.calculateRmsVolume : true;\r
		this.gain = options.processorOptions.gain || 1.0;\r
				\r
		//resampling - modes 0: no change, -1: downsampling, 1: upsampling\r
		this.resamplingMode = (this.targetSampleRate < this.sourceSamplerate? -1 : (this.targetSampleRate > this.sourceSamplerate? 1 : 0));\r
		this.resampleRatio = this.targetSampleRate/this.sourceSamplerate;\r
		\r
		function init(){\r
			var expectedSizeAfterResampling = Math.ceil(that.EXPECTED_SAMPLE_SIZE * that.resampleRatio);\r
			if (expectedSizeAfterResampling > that.emitterBufferSize){\r
				//TODO: if we don't use a string this shows up as "Uncaught [object ...]" in worker.onerror ?! :-/\r
				throw {name: "BufferSizeException", message: ("Output buffer has to be bigger than (resampleRatio*inputSampleSize)! Currently: " + expectedSizeAfterResampling + " > " + that.emitterBufferSize)};\r
			}\r
			var ringBufferSize = expectedSizeAfterResampling + that.emitterBufferSize;			//this should be a safe size\r
			\r
			//RingBuffers - alloc. space for emitter\r
			//that._inputRingBuffer = new RingBuffer(that.collectorBufferSize + that.EXPECTED_SAMPLE_SIZE, that.channelCount);\r
			that._outputRingBuffer = new RingBuffer(ringBufferSize, that.channelCount, "Int16");\r
\r
			//Input and output (for each channel) - TODO: set size, one for each channel\r
			//that._newInputBuffer = [new Float32Array(that.collectorBufferSize)];\r
			that._newInputBuffer = [new Int16Array(that.EXPECTED_SAMPLE_SIZE)];		\r
			//TODO: for interleaved STEREO we need [new Uint8Array(that.EXPECTED_SAMPLE_SIZE * that.channelCount * that._bytesPerSample)];\r
				//... or do we?\r
				//NOTE: we could use DataView instead\r
				//let buffer = new ArrayBuffer(that.EXPECTED_SAMPLE_SIZE * that.channelCount * that._bytesPerSample);\r
				//let that._inputDataView = new DataView(buffer);\r
			that._newOutputBuffer = [new Int16Array(that.emitterBufferSize)];\r
			\r
			that._isFirstValidProcess = true;\r
			//that._lastEmit = 0;\r
			\r
			that._emitterSqrSum = 0;\r
			that._emitterSamples = 0;\r
			that._hasGain = (that.gain < 1 || that.gain > 1);\r
		}\r
		init();\r
		\r
		this.floatTo16BitInterleavedPCM = function(inFloat32, outInt16, i){\r
			//TODO: if not MONO interleave channels - requires: UInt8Array !!! (or does it?)\r
			/*\r
			for (let channel = 0; channel < that.channelCount; channel++){\r
				//pass through original\r
				output[channel][i] = inFloat32[channel][i];\r
				//clip and floatTo16BitPCM\r
				let sampleVal = Math.max(-1, Math.min(1, inFloat32[channel][i])) * 32767.5 - 0.5;\r
				//assign\r
				let outputIndex = (i * that.channelCount + channel) * that._bytesPerSample;\r
				that._newInputBuffer[channel][outputIndex] = sampleVal;\r
				that._newInputBuffer[channel][outputIndex + 1] = sampleVal >> 8;\r
			}\r
			*/\r
				\r
			let sampleVal = Math.max(-1, Math.min(1, inFloat32[0][i]));		//we need -1 to 1 - If this is the first processor we could skip clipping\r
			//that._inputDataView.setInt16(i * 2, sampleVal < 0 ? sampleVal * 0x8000 : sampleVal * 0x7FFF, true);	// 16-bit signed range is -32768 to 32767, littleEndian byte order.\r
			outInt16[0][i] = sampleVal < 0 ? sampleVal * 0x8000 : sampleVal * 0x7FFF;\r
		}\r
		\r
		function ready(skipResampler){\r
			if (!skipResampler){\r
				//use new resampler for every instance - it keeps data from previous calls to improve the resampling\r
				that.resampler = that.SpeexResampler(\r
					that.channelCount, that.sourceSamplerate, that.targetSampleRate, that.resampleQuality\r
				);\r
			}\r
			that.isReadyForProcessing = true;\r
			that.port.postMessage({\r
				moduleState: 1,\r
				moduleInfo: {\r
					moduleId: that.moduleId,\r
					sourceSamplerate: that.sourceSamplerate,\r
					targetSampleRate: that.targetSampleRate,\r
					emitterBufferSize: that.emitterBufferSize,\r
					calculateRmsVolume: that.calculateRmsVolume,\r
					channelCount: that.channelCount,\r
					resamplingMode: that.resamplingMode,\r
					gain: that.gain,\r
					passThroughMode: that.passThroughMode\r
				}\r
			});\r
		}\r
		//start\r
		function start(options){\r
			//TODO: anything?\r
			//NOTE: timing of this signal is not very well defined\r
		}\r
		//stop\r
		function stop(options){\r
			//NOTE: timing of this signal is not very well defined\r
			//send out the remaining buffer data here\r
			if (that._outputRingBuffer.framesAvailable){\r
				//pull last samples\r
				var lastSamples = [new Int16Array(that._outputRingBuffer.framesAvailable)];\r
				that._outputRingBuffer.pull(lastSamples);\r
\r
				//Send info\r
				that.port.postMessage({\r
					rms: that.emitterRms,\r
					samples: lastSamples,\r
					sampleRate: that.targetSampleRate,\r
					channels: that.channelCount,\r
					type: lastSamples[0].constructor.name,\r
					isLast: true\r
				});\r
			}\r
		}\r
		function reset(options){\r
			//TODO: implement\r
			init();\r
		}\r
		function release(options){\r
			//destroy\r
			that._outputRingBuffer = null;\r
			that._newInputBuffer = null;\r
			that._newOutputBuffer = null;\r
			that.resampler = null;\r
			speexModule = null;\r
			//notify processor that we can terminate now\r
			that.port.postMessage({\r
				moduleState: 9\r
			});\r
		}\r
		\r
		//on-request resampling\r
		function resampleRequest(req){\r
			var samples = req.samples;\r
			var int16Buffer;\r
			if (req.isInt16){\r
				int16Buffer = samples;\r
			}else{\r
				var sampleSize = samples[0].length;\r
				int16Buffer = [new Int16Array(sampleSize)];		//TODO: MONO\r
				for (let i = 0; i < sampleSize; ++i){\r
					that.floatTo16BitInterleavedPCM(samples, int16Buffer, i);\r
				}\r
			}\r
			if (that.resamplingMode){\r
				var processed = that.resampler.processChunk(int16Buffer[0]);\r
				that.port.postMessage({\r
					moduleResponse: true,\r
					resampleResult: {\r
						//test: int16Buffer,		//DEBUG\r
						samples: [processed],\r
						sampleRate: that.targetSampleRate,\r
						channels: that.channelCount\r
					}\r
				});\r
			}else{\r
				that.port.postMessage({\r
					error: "No resampling required. Skipped process!",\r
					moduleResponse: true,\r
					resampleResult: {}\r
				});\r
			}\r
		}\r
		\r
		//Control messages\r
		this.port.onmessage = function(e){\r
			if (e.data.ctrl){\r
				if (that.doDebug) console.error("SpeexResampleSwitch - Controls", e.data.ctrl);			//DEBUG\r
				switch (e.data.ctrl.action) {\r
					//common interface\r
					case "start":\r
						start(e.data.ctrl.options);\r
						break;\r
					case "stop":\r
						stop(e.data.ctrl.options);\r
						break;\r
					case "reset":\r
						reset(e.data.ctrl.options);\r
						break;\r
					case "release":\r
					case "close":\r
						release(e.data.ctrl.options);\r
						break;\r
					case "process":\r
						//customProcess(e.data.ctrl.data);\r
						break;\r
					case "handle":\r
						//handleEvent(e.data.ctrl.data);\r
						break;\r
					default:\r
						console.error("SpeexResampleSwitch - Unknown control message:", e.data);\r
						break;\r
				}\r
			}else if (e.data.resample){\r
				//custom interface\r
				resampleRequest(e.data.resample);\r
			}\r
        }\r
		\r
		function onSpeexLog(msg){\r
			if (that.doDebug) console.error("SpeexResampleSwitch - SpeexModuleLog -", msg, "-", that.moduleId);			//DEBUG (use postMessage?)\r
		}\r
		//function onSpeexError(msg){}		//TODO: we could wrap the 'resampler.processChunk' function in try-catch and log the error here\r
		\r
		//prepare\r
		if (this.resamplingMode){\r
			if (!speexModule){\r
				onSpeexLog("Init. Speex WASM module");\r
				SpeexResampler.initPromise = this.Speex().then(function(s){\r
					onSpeexLog("Speex WASM module ready");\r
					speexModule = s;	//NOTE: used inside Speex\r
					ready(false);\r
				});\r
			}else{\r
				onSpeexLog("Speex WASM moduel already loaded");\r
				ready(false);\r
			}\r
		}else{\r
			onSpeexLog("Speex WASM module not needed");\r
			ready(true);\r
		}\r
	}\r
\r
	process(inputs, outputs, parameters) {\r
		if (!this.isReadyForProcessing){\r
			console.error("SpeexResampleSwitch - Module wasn't ready for processing! Input was ignored!", "-", this.moduleId);\r
			return;\r
		}\r
\r
		//Use 1st input and output only\r
		let input = inputs[0];\r
		let output = outputs[0];\r
\r
		//NOTE: AudioWorkletProcessor always gets input[0].length frames (typically 128, might change in future)\r
		if (input.length > 0){\r
			let inputSampleSize = input[0].length;\r
			\r
			if (this._isFirstValidProcess){\r
				this._isFirstValidProcess = false;\r
				//check inputSampleSize\r
				if (inputSampleSize != this.EXPECTED_SAMPLE_SIZE){\r
					let msg = "Sample size is: " + inputSampleSize + ", expected: " + this.EXPECTED_SAMPLE_SIZE + ". Need code adjustments!";\r
					console.error("AudioWorkletProcessor sample size exception - Msg.: " + msg);\r
					throw new this.SampleSizeException(msg);\r
				}\r
			}\r
			\r
			//transfer input to 16bit signed, interleaved (channels) PCM output - TODO: ONLY MONO so far!\r
			let sqrSum = 0;\r
			for (let i = 0; i < inputSampleSize; ++i){\r
				//gain\r
				if (this._hasGain) input[0][i] = input[0][i] * this.gain;\r
				\r
				//float to 16Bit interleaved PCM\r
				this.floatTo16BitInterleavedPCM(input, this._newInputBuffer, i);\r
				\r
				//pass through\r
				if (this.passThroughMode == 2){\r
					output[0][i] = this._newInputBuffer[0][i];	//16Bit PCM\r
				}else if (this.passThroughMode == 1){\r
					output[0][i] = input[0][i];					//original (float32)\r
				}\r
				\r
				//calc. sum for RMS\r
				if (this.calculateRmsVolume){\r
					this._emitterSqrSum += (input[0][i] ** 2);\r
				}\r
			}\r
			this._emitterSamples += inputSampleSize;\r
			\r
			if (this.resamplingMode != 0){\r
				//let interleaved16bitPcmAudioChunk = new Int16Array(this._inputDataView);\r
				//let processed = this.resampler.processChunk(interleaved16bitPcmAudioChunk);\r
				let processed = this.resampler.processChunk(this._newInputBuffer[0]);\r
				this._outputRingBuffer.push([processed]);				//TODO: is MONO\r
			}else{\r
				this._outputRingBuffer.push([this._newInputBuffer[0]]);	//TODO: is MONO\r
			}\r
			\r
			//Process if we have enough frames for the kernel.\r
			if (this._outputRingBuffer.framesAvailable >= this.emitterBufferSize) {\r
				//pull samples\r
				this._outputRingBuffer.pull(this._newOutputBuffer);\r
\r
				//Send info\r
				this.port.postMessage({\r
					rms: this.emitterRms,\r
					samples: this._newOutputBuffer,\r
					sampleRate: this.targetSampleRate,\r
					channels: this.channelCount,\r
					type: this._newOutputBuffer[0].constructor.name\r
				});\r
			}\r
		}\r
		return true;\r
	}\r
}\r
\r
registerProcessor('speex-resample-switch', SpeexResampleProcessor);`;if(typeof ha!="object"){var ha={};window.SepiaFW=ha}(function(r){var e=r.webAudio||{};e.version="0.9.11";var t=window.AudioContext||window.webkitAudioContext,n=void 0,i=void 0;function s(){return n=!!t&&navigator.mediaDevices&&navigator.mediaDevices.getUserMedia,!!n||i}e.isStreamRecorderSupported=s(),e.isNativeStreamResamplingSupported=!0,e.tryNativeStreamResampling=!0,e.contentFetchTimeout=8e3,e.defaultProcessorOptions={moduleFolder:"modules",initSuccessCallback:console.log,initErrorCallback:console.error,onerror:console.error};var o={};e.clearPreLoadCache=function(){o={}},e.getSupportedAudioConstraints=function(){var p=navigator.mediaDevices.getSupportedConstraints(),h={},m=e.overwriteSupportedAudioConstraints;return p.deviceId&&(h.deviceId=m.deviceId!=null?m.deviceId:void 0),p.channelCount&&(h.channelCount=m.channelCount!=null?m.channelCount:1),p.noiseSuppression&&(h.noiseSuppression=m.noiseSuppression!=null?m.noiseSuppression:!0),p.autoGainControl&&(h.autoGainControl=m.autoGainControl!=null?m.autoGainControl:!1),p.echoCancellation&&(h.echoCancellation=m.echoCancellation!=null?m.echoCancellation:!1),p.sampleRate&&(h.sampleRate=m.sampleRate!=null?m.sampleRate:48e3),h},e.overwriteSupportedAudioConstraints={},e.defaultMimeTypesForCodecs={ogg:"audio/ogg",ogg_opus:"audio/ogg;codecs=opus",ogg_vorbis:"audio/ogg;codecs=vorbis",ogg_speex:"audio/ogg;codecs=speex",opus:"audio/opus",vorbis:"audio/vorbis",speex:"audio/speex",wav:"audio/wav",raw:"audio/wav",webm_ogg_opus:"audio/webm;codecs=opus",webm_ogg_vorbis:"audio/webm;codecs=vorbis",webm_mkv_pcm:"audio/webm;codecs=pcm",mp3:"audio/mpeg",mp4:"audio/mp4",flac:"audio/flac",mpeg:"audio/mpeg"},e.getSupportedMediaRecorderCodecs=function(){var p={};return window.MediaRecorder&&Object.keys(e.defaultMimeTypesForCodecs).forEach(function(h){var m=e.defaultMimeTypesForCodecs[h];window.MediaRecorder.isTypeSupported(m)&&(p[h]=m)}),p},e.createAudioContext=function(p,h){var m={};!h&&p.targetSampleRate&&(m.sampleRate=p.targetSampleRate);var g=new t(m);return g},e.Processor=function(p,h,m){var g=this;m||(m=e.defaultProcessorOptions.initErrorCallback),h||(h=e.defaultProcessorOptions.initSuccessCallback),p||(p={});var B=p.onerror||e.defaultProcessorOptions.onerror,v=(p.moduleFolder||e.defaultProcessorOptions.moduleFolder).replace(/\/$/,"")+"/",w,C=0,I,E,U,S,V=!1,J=!1,z=!1,R=p.initializerTimeout||3e3,y,Q={},_={},L=[];function T($){p.debugLog&&p.debugLog("Started init. condition: "+$),Q[$]=1}function Z($){Q[$]&&(delete Q[$],p.debugLog&&p.debugLog("Completed init. condition: "+$),Object.keys(Q).length==0&&(J||(clearTimeout(y),J=!0,z=!1,h({name:"ProcessorReady",message:"Processor is ready for action",inputSampleRate:w,targetSampleRate:p.targetSampleRate||w,sourceInfo:_,modulesInfo:L}))))}function G(){clearTimeout(y),J=!1,z=!1,Q={},T("sourceSetup"),T("modulesSetup")}function D($){G(),m($)}G(),z=!0,y=setTimeout(function(){D({message:"Initialization took too long! If you expect long running init. process use option 'initializerTimeout' (ms).",name:"ProcessorInitTimeout"})},R);async function x($,se){if(I&&$&&(I.state!="closed"&&await I.close(),I=null),!I||I.state=="closed")if(I=e.createAudioContext(p,se),p.startSuspended==null||p.startSuspended){try{await I.resume()}catch{}await I.suspend()}else await I.resume();return I}async function P(){if(p.modules)for(let $=0;$<p.modules.length;$++){let se=p.modules[$],ae=oe(se),de=ae.moduleType,fe=ae.moduleName;if(de==1){let ge=v+fe+".js";p.debugLog&&p.debugLog("Adding audioWorklet module: "+ge);try{await I.audioWorklet.addModule(`data:application/javascript;charset=utf8,${encodeURIComponent(Hoe)}`)}catch(Qe){console.error(Qe),p.debugLog&&p.debugLog("FAILED to add audioWorklet module: "+ge+" - Msg.: "+Qe.name+", "+Qe.message)}}else if(de==2){let ge=v+fe.replace(/-worker$/,"")+"-worker.js";p.debugLog&&p.debugLog("Adding worker module: "+ge)}else throw de==3?{name:"CreateModuleError",message:"ScriptProcessor nodes are currently not supported as modules (only source)."}:de==4?{name:"CreateModuleError",message:"AudioNodes are currently not supported as modules (you can use them as custom source)."}:{name:"CreateModuleError",message:"Module type unknown."}}}function oe($){var se,ae,de,fe;return typeof $=="object"?($.type&&$.type=="worker"||$.isWorker?se=2:$.type&&$.type=="scriptProcessor"?se=3:$.type&&$.type=="audioNode"?se=4:se=1,ae=$.name,de=$.setup||$.settings,fe=$.preLoad||{}):(se=1,ae=$,de={},fe={}),{moduleType:se,moduleName:ae,moduleSetup:de,modulePreLoads:fe}}function M(){V=!0}function k(){V=!1}if(!e.isStreamRecorderSupported&&!p.customSourceTest&&!p.customSource){var q={name:"NotSupportedError",message:"Cannot create audio stream recorder because there are no compatible interfaces!"};D(q);return}function ee($,se,ae){var de=$.length;if(p.modules&&p.modules.length){var fe=new Array(p.modules.length),ge=p.modules.length;p.modules.forEach(async function(Qe,Ue){if(!z)return;T("module-"+Ue);var xe=oe(Qe),Fe=xe.moduleType,Ne=xe.moduleName,Ze=xe.moduleSetup,j={},O=Object.keys(xe.modulePreLoads);try{await Promise.all(O.map(async function(F,N){var K=xe.modulePreLoads[F],te=1,ne=void 0;typeof K=="object"?(te=K.type&&(K.type==2||K.type.toLowerCase()=="arraybuffer")?2:1,K=K.path||K.url):F.indexOf("wasmFile")==0?te=2:F.indexOf("wasmBase64")==0&&(te=1,ne=u);var we=F+"_"+K;if(o[we])j[F]=o[we];else try{var ye;if(!K||te>2)throw{name:"PreLoadError",message:"Missing 'path' (url) or unsupported type (use 1=text or 2=arraybuffer)"};te==1?ye=await l(K):te==2&&(ye=await A(K)),typeof ne=="function"&&(ye=ne(ye)),j[F]=ye,o[we]=ye}catch(Se){throw{name:"AddModuleError",message:"Failed to pre-load data: "+F+" - name: "+Ne,info:Se}}}))}catch(F){D(F);return}var le=Ze.options||{};le.preLoadResults=j;var ue;function Ce(F){if(!(!F||F.data==null))if(F.data.moduleState==1)ue.isReady=!0,Z("module-"+Ue),F.data.moduleInfo&&(ue.moduleInfo=F.data.moduleInfo),fe[Ue]={moduleName:ue.moduleName,moduleInfo:ue.moduleInfo},--ge==0&&ae(fe);else if(F.data.moduleState==9&&!ue.isTerminated){if(typeof ue.terminate=="function")try{ue.isTerminated=!0,ue.terminate()}catch(N){ue.isTerminated=!0,W({name:"TerminateError",message:"Failed to terminate module",info:N})}}else F.data.moduleState==10?(F.data.error.target=F.target,W(F.data.error)):F.data.moduleResponse||Ze.sendToModules&&(F.data.moduleEvent?Ze.sendToModules.forEach(function(N){$[N]&&!$[N].ignoreSendToModules&&$[N].sendToModule({ctrl:{action:"handle",data:F.data}})}):Ze.sendToModules.forEach(function(N){$[N]&&!$[N].ignoreSendToModules&&$[N].sendToModule({ctrl:{action:"process",data:F.data}})}));Ze.onmessage&&Ze.onmessage(F.data,$)}function W(F){var N;F.message&&F.message.indexOf("Uncaught {")==0?(F.preventDefault(),N=JSON.parse(F.message.replace(/^Uncaught /,"")),F.message=N):N=F,B({name:"AudioModuleProcessorException",message:"Error in module: "+F.target.moduleName+" - "+(N&&N.message?N.message:"Check console for details."),module:F.target.moduleName,info:N}),z&&!J&&D({message:"Error during setup of module: "+ue.moduleName,name:"ProcessorInitError",info:N}),Ze.onerror&&Ze.onerror(F)}if(Fe==1){if(!se){D({name:"AddModuleError",message:"Source does not support 'AudioWorkletProcessor' (use only workers instead) - name: "+Ne});return}le.processorOptions||(le.processorOptions=le.setup||{}),le.processorOptions.ctxInfo||(le.processorOptions.ctxInfo={sampleRate:I.sampleRate,targetSampleRate:p.targetSampleRate}),ue=new AudioWorkletNode(I,Ne,le),ue.isReady=!1,ue.moduleName=Ne,ue.port.onmessage=Ce,ue.onprocessorerror=W,ue.sendToModule=function(F){ue.isReady?ue.port.postMessage(F):B({name:"AudioModuleProcessorException",message:"'sendToModule' was called before module was actually ready. Consider 'startSuspended' option maybe.'",module:ue.moduleName})}}else if(Fe==2)le.setup||(le.setup={}),le.setup.ctxInfo||(le.setup.ctxInfo={sampleRate:I.sampleRate,targetSampleRate:p.targetSampleRate}),Ne.includes("webrtc-vad")?ue=Goe():Ne.includes("stt-socket")&&(ue=Ooe()),ue.isReady=!1,ue.moduleName=Ne,ue.onmessage=Ce,ue.onerror=W,ue.sendToModule=function(F){ue.isReady||F&&F.ctrl&&F.ctrl.action=="construct"?ue.postMessage(F):B({name:"AudioModuleProcessorException",message:"'sendToModule' was called before module was actually ready. Consider 'startSuspended' option maybe.",module:ue.moduleName})},ue.sendToModule({ctrl:{action:"construct",options:le}});else if(Fe==3){D({name:"AddModuleError",message:"ScriptProcessor nodes are currently not supported as modules (only source)."});return}else if(Fe==4){D({name:"AddModuleError",message:"AudioNodes are currently not supported as modules (you can use them as custom source)."});return}else{D({name:"AddModuleError",message:"Unknown module type."});return}if(ue.moduleType=Fe,ue.ignoreSendToModules=!1,ue.deactivate=function(){ue.ignoreSendToModules=!0,V&&(ue.sendToModule({ctrl:{action:"stop"}}),ue.sendToModule({ctrl:{action:"reset"}}))},ue.activate=function(){ue.ignoreSendToModules=!1,V&&ue.sendToModule({ctrl:{action:"start"}})},Qe.handle=ue,!se&&Ue==0){var b=$[0];if(!b.onmessage){D({name:"AddModuleError",message:"If source is not compatible to 'AudioWorklet' it has to have a 'onmessage' event to get the processed data."});return}b.onmessage=function(F){!F||F.data==null||(F.data.moduleEvent||F.data.sourceEvent?ue.sendToModule({ctrl:{action:"handle",data:F.data}}):ue.sendToModule({ctrl:{action:"process",data:F.data}}))}}$[de+Ue]=ue})}else ae([])}function X($,se,ae){w=I.sampleRate,ae||(ae={}),p.targetSampleRate&&p.targetSampleRate!=w&&(e.isNativeStreamResamplingSupported=!1,C=w-p.targetSampleRate);var de=[$],fe=[],ge=!0;ae.hasWorkletSupport!=null?ge=ae.hasWorkletSupport:ae.type=="scriptProcessor"&&(ge=!1),ee(de,ge,function(Ue){L=Ue,Z("modulesSetup"),g.processNodes=de;let xe=!1;if(de.forEach(function(Fe,Ne){ge&&(!Fe.moduleType||Fe.moduleType==1)&&fe.push(Fe),Fe.moduleInfo&&Fe.moduleInfo.resamplingMode&&(xe=!0)}),C&&!xe){D({message:"Samplerate mismatch and no resampler found!",name:"ProcessorInitError"});return}});var Qe=p.destinationNode||I.destination;g.mainAudioContext=I,g.source=$,g.sourceInfo=ae,_=ae,se||(se={}),E=function(Ue,xe){Promise.resolve((se.onBeforeStart||d)()).then(function(){return I.resume()}).then(function(){if(fe.length>1){for(var Fe=1;Fe<fe.length;Fe++)fe[Fe-1].connect(fe[Fe]);fe[Fe-1].connect(Qe)}else fe.length==1?fe[0].connect(Qe):de[0].connect&&de[0].connect(Qe);if(de.forEach(function(Ne){Ne.sendToModule&&Ne.sendToModule({ctrl:{action:"start",options:{}}})}),se.onAfterStart)return Promise.resolve(se.onAfterStart())}).then(Ue).catch(function(Fe){B({name:"ProcessorStartError",message:Fe.name+" - Message: "+(Fe.message||Fe)}),xe&&xe(Fe)})},U=function(Ue,xe){Promise.resolve((se.onBeforeStop||d)()).then(function(){return de.forEach(function(Fe,Ne){Fe.disconnect&&Fe.disconnect(),Fe.sendToModule&&Fe.sendToModule({ctrl:{action:"stop",options:{}}})}),I.suspend()}).then(function(){if(se.onAfterStop)return Promise.resolve(se.onAfterStop())}).then(Ue).catch(function(Fe){B({name:"ProcessorStopError",message:Fe.name+" - Message: "+(Fe.message||Fe)}),xe&&xe(Fe)})},S=function(Ue,xe){Promise.resolve((se.onBeforeRelease||d)()).then(function(){return de.forEach(function(Fe,Ne){Fe.sendToModule&&Fe.sendToModule({ctrl:{action:"release",options:{}}}),de[Ne]=null}),g.processNodes=null,g.source=null,I.close()}).then(function(){if(se.onAfterRelease)return Promise.resolve(se.onAfterRelease())}).then(Ue).catch(function(Fe){B({name:"ProcessorReleaseError",message:Fe.name+" - Message: "+(Fe.message||Fe)}),xe&&xe(Fe)})},Z("sourceSetup")}if(p.customSourceTest){let $;e.createWhiteNoiseGeneratorNode(.1,{targetSampleRate:p.targetSampleRate}).then(function(se){return $=se,I=se.context,P()}).then(function(){X($,{},{type:"whiteNoiseGenerator"})}).catch(function(se){D(se)})}else if(p.customSource){let $=p.customSource.node;I=$.context,P().then(function(){X($,{onBeforeStart:p.customSource.beforeStart,onAfterStart:p.customSource.start||p.customSource.afterStart,onBeforeStop:p.customSource.stop||p.customSource.beforeStop,onAfterStop:p.customSource.afterStop,onBeforeRelease:p.customSource.beforeRelease,onAfterRelease:p.customSource.release||p.customSource.afterRelease},{type:p.customSource.type||"custom",typeData:p.customSource.typeData,hasWorkletSupport:p.customSource.hasWorkletSupport!=null?p.customSource.hasWorkletSupport:!0})}).catch(function(se){D(se)})}else{let $;e.getMicrophone(p,x).then(function(se){return $=se,P()}).then(function(){X($.source,$.controls||{},$.info)}).catch(function(se){D(typeof se=="string"?{message:se,name:"ProcessorInitError"}:{message:se.message,name:se.name,ref:se})})}g.start=function($,se,ae){J&&!V?E(function(){var de=new Date().getTime();M(),p.onaudiostart&&p.onaudiostart({startTime:de}),$&&$()},ae):se&&se()},g.stop=function($,se,ae){V?U(function(){var de=new Date().getTime();k(),p.onaudioend&&p.onaudioend({endTime:de}),$&&$()},ae):se&&se()},g.release=function($,se,ae){J&&S?S(function(){G(),p.onrelease&&p.onrelease(),$&&$()},ae):z?D({message:"Release was called before initialization was complete.",name:"ProcessorInitError"}):se&&se()},g.isInitialized=function(){return J},g.isInitPending=function(){return z},g.isProcessing=function(){return V}},e.getAudioDevices=function(p){return new Promise(function(h,m){(async function(){if(!navigator.mediaDevices.enumerateDevices)return m({message:"MediaDevices 'enumerateDevices' is not available! Check if context is secure (SSL, HTTPS, etc.).",name:"NotSupportedError"});var g=!1,B=void 0;navigator.mediaDevices.enumerateDevices().then(function(v){if(!g){clearTimeout(B);var w={},C={};return v.forEach(function(I){I.kind=="audioinput"?w[I.label]=I.deviceId:I.kind=="audiooutput"&&(C[I.label]=I.deviceId)}),h({input:w,output:C})}}).catch(function(v){return m(v)}),B=setTimeout(function(){return g=!0,m({message:"Media device enumeration timeout. Permission might require user interaction.",name:"TimeoutError"})},p||5e3)})()})},e.getMicrophone=function(p,h,m){return p||(p={}),h||(h=async function(g,B){var v=e.createAudioContext(p,B);if(p.startSuspended==null||p.startSuspended){try{await v.resume()}catch{}await v.suspend()}else await v.resume();return v}),new Promise(function(g,B){(async function(){var v=JSON.parse(JSON.stringify(e.getSupportedAudioConstraints()));v.sampleRate&&p.targetSampleRate&&(v.sampleRate=p.targetSampleRate);var w={video:!1,audio:Object.keys(v).length?v:!0};if(!navigator.mediaDevices.getUserMedia)return B({message:"MediaDevices 'getUserMedia' is not available! Check if context is secure (SSL, HTTPS, etc.).",name:"NotSupportedError"});var C=!1,I=void 0;navigator.mediaDevices.getUserMedia(w).then(async function(E){if(!C){clearTimeout(I);var U;e.tryNativeStreamResampling&&e.isNativeStreamResamplingSupported?U=await h(!1,!1):U=await h(!1,!0);var S;try{S=U.createMediaStreamSource(E)}catch(R){U=await h(!0,!0),S=U.createMediaStreamSource(E),R&&R.name&&R.name=="NotSupportedError"&&(e.isNativeStreamResamplingSupported=!1,p.debugLog&&p.debugLog("Native stream resampling has been deactivated - Info: "+R.message))}p.destinationNode||(p.destinationNode=U.createMediaStreamDestination());var V={type:"mic"},J;if(S.mediaStream&&S.mediaStream.getAudioTracks)try{J=S.mediaStream.getAudioTracks()[0],V.label=J.label,J.getSettings?V.settings=J.getSettings():V.settings={},V.settings.sampleRate=U.sampleRate}catch{}var z={onBeforeStart:function(){},onAfterStop:function(){},onAfterRelease:function(){J&&typeof J.stop=="function"&&J.readyState=="live"&&J.stop()}};return g({source:S,controls:z,info:V})}}).catch(function(E){return B(E)}),I=setTimeout(function(){return C=!0,B({message:"Media 'getUserMedia' timeout. Permission might require user interaction.",name:"TimeoutError"})},m||5e3)})()})},e.createAudioRecorder=function(p,h,m){return m||(m={}),m.codec||(m.codec="webm_ogg_opus"),new Promise(function(g,B){(async function(){try{var v=h.settings.sampleRate;if(!v)return B({message:"Sample-rate unknown! Please add correct 'sourceInfo'.",name:"AudioRecorderError"});var w=h.settings.channelCount;if(w>1)return B({message:"Sorry, but this recorder only supports MONO audio at the moment.",name:"NotSupportedError"});var C=m.mimeType||e.defaultMimeTypesForCodecs[m.codec]||e.defaultMimeTypesForCodecs.webm_ogg_opus,I=m.sampleTime||(m.chunkSize?Math.floor(1e3/v*m.chunkSize):0);if(I&&m.decodeToAudioBuffer&&console.error("WARNING: Partial decoding is not supported at the moment! It is possible but requires adding custom headers for each blob!"),window.MediaRecorder)if(MediaRecorder.isTypeSupported(C)){var E=new MediaRecorder(p,{mimeType:C,bitsPerSecond:v*2*w}),U,S,V=!1;E.onerror=m.onerror||console.error,m.onstart&&(E.onstart=m.onstart),m.onpause&&(E.onpause=m.onpause),m.onresume&&(E.onresume=m.onresume);var J=m.onstop;E.onstop=function(_){J&&!m.decodeToAudioBuffer&&J()};var z=m.ondataavailable||m.onprocess;m.decodeToAudioBuffer?z&&(E.ondataavailable=function(_){if(E.state=="inactive"&&(V=!0),_&&_.data){let L=Date.now();e.offlineAudioContextBlobDecoder(v,w,_.data,function(T){T&&z({data:T.getChannelData(0),decodeTime:Date.now()-L}),!V&&m.recordLimitMs&&Date.now()-U>=m.recordLimitMs?y():V&&J&&J()})}}):z&&(E.ondataavailable=function(_){z(_),m.recordLimitMs&&Date.now()-U>=m.recordLimitMs&&y()});var R,y=function(){R&&clearTimeout(R),S=Date.now(),E.state!="inactive"&&E.stop()},Q=function(){U=Date.now(),S=void 0,V=!1,I?E.start(I):(E.start(),m.recordLimitMs&&(R=setTimeout(y,m.recordLimitMs)))};return g({getMediaRecorder:function(){return E},mimeType:C,sourceInfo:h,sampleTime:I,start:Q,stop:y})}else return B({message:"MIME-Type '"+C+"' is not supported!",name:"NotSupportedError"});else return B({message:"'MediaRecorder' is not available!",name:"NotSupportedError"})}catch(_){return console.error("AudioRecorder",_),B(_)}})()})},e.offlineAudioContextBlobDecoder=function(p,h,m,g){a(m,function(B){if(!B)g();else{var v=new OfflineAudioContext(h,B.byteLength,p);v.decodeAudioData(B,function(w){g(w)},function(w){console.error("offlineAudioContext.decodeAudioData ERROR",w),g()})}})};function a(p,h){if(!p||!p.size)h();else if(typeof p.arrayBuffer=="function")p.arrayBuffer().then(function(g){h(g)}).catch(function(g){console.error("blobToArray '.arrayBuffer' ERROR",g),h()});else{var m=new FileReader;m.onload=function(){h(m.result)},m.onerror=function(g){console.error("blobToArray 'FileReader' ERROR",reader.error,g),h()},m.readAsArrayBuffer(p)}}e.blobToArray=a,e.createLegacyMicrophoneScriptProcessor=function(p){return p||(p={}),e.getMicrophone(p,void 0).then(function(h){var m=h.source,g=m.context,B=g.sampleRate,v=p.bufferSize||2048,w=1,C=g.createScriptProcessor(v,w,w);m.connect(C);var I={node:C,type:"scriptProcessor",typeData:h.info,hasWorkletSupport:!1,start:function(){h.controls.onAfterStart&&h.controls.onAfterStart()},stop:function(){h.controls.onBeforeStop&&h.controls.onBeforeStop()},release:function(){h.controls.onAfterRelease&&h.controls.onAfterRelease()}};if(h.controls&&(h.controls.onBeforeStart&&(I.beforeStart=h.controls.onBeforeStart),h.controls.onAfterStop&&(I.afterStop=h.controls.onAfterStop),h.controls.onBeforeRelease&&(I.beforeRelease=h.controls.onBeforeRelease)),p.onaudioprocess)C.onaudioprocess=p.onaudioprocess;else{let E=function(U){if(U&&U.inputBuffer){var S=[U.inputBuffer.getChannelData(0)];C.onmessage({data:{samples:S,sampleRate:B,channels:w,type:S[0].constructor.name}})}};C.onaudioprocess=function(U){E(U)},C.onmessage=p.onmessage||function(U){}}return I})},e.createWhiteNoiseGeneratorNode=function(p,h,m){h||(h={});var g=e.defaultProcessorOptions.moduleFolder.replace(/\/$/,"")+"/";return new Promise(function(B,v){(async function(){try{var w=e.createAudioContext(h);try{await w.resume()}catch{}await w.suspend();var C=g+"white-noise-generator.js";await w.audioWorklet.addModule(C);var I=new AudioWorkletNode(w,"white-noise-generator",{processorOptions:{gain:p||.1}});m&&(I.port.onmessage=m),B(I)}catch(E){return v(E)}})()})},e.createFileSource=function(p,h,m,g){return h||(h={}),new Promise(function(B,v){try{let w=function(I){v(I)},C=function(I){e.createAudioBufferSource(I,h,m,g).then(function(E){E.typeData={fileUrl:p},B(E)}).catch(w)};e.readFileAsBuffer(p,C,w)}catch(w){v(w)}})},e.createAudioBufferSource=function(p,h,m,g){return h||(h={}),new Promise(function(B,v){(async function(){try{var w=e.createAudioContext(h);try{await w.resume()}catch{}await w.suspend();var C=w.createBufferSource();w.decodeAudioData(p,function(I){return C.buffer=I,C.loop=m??!0,g&&(C.onended=g),B({node:C,type:"fileAudioBuffer",typeData:{},start:function(){C.start()},stop:function(){C.stop()},release:function(){}})},function(I){return v(I)})}catch(I){return v(I)}})()})},e.createSourceAudioPlayer=function(p,h,m,g,B){h||(h={}),h.modules=m||[],h.customSource=p,h.startSuspended==null&&(h.startSuspended=!0);var v=new e.Processor(h,g,B);return v},e.encodeWaveBuffer=function(p,h,m,g,B,v){var w=e.defaultProcessorOptions.moduleFolder.replace(/\/$/,"")+"/",C=new Worker(w+"wave-encoder-worker.js");B||(B=console.log),v||(v=console.error);var I={setup:{inputSampleRate:h,inputSampleSize:p.length,lookbackBufferMs:0}};C.onmessage=function(E){E.data.moduleState==1?C.postMessage({encode:{format:"wave",data:{samples:[p],sampleRate:h,channels:m,isFloat32:g}}}):E.data.encoderResult&&(C.terminate(),E.data.error?v({name:"EncoderError",message:E.data.error}):B(E.data.encoderResult))},C.onerror=function(E){C.terminate(),v(E)},C.postMessage({ctrl:{action:"construct",options:I}})},e.decodeAudioFile=function(p,h,m,g,B){e.readFileAsBuffer(p,function(v){var w=new OfflineAudioContext(m,v.byteLength,h);w.decodeAudioData(v,function(C){g(C)},function(C){B(C)})},function(v){B(v)})},e.decodeAudioFileToInt16Mono=function(p,h,m,g){var B=1;e.decodeAudioFile(p,h,B,function(v){var w=!0;e.encodeWaveBuffer(v.getChannelData(0),h,B,w,function(C){try{var I=new Int16Array(C.wav.buffer);m(I)}catch(E){g(E)}},g)},g)},e.resampleBufferViaSpeex=function(p,h,m,g,B,v,w){v||(v=console.log),w||(w=console.error);try{var C=new OfflineAudioContext(g,p.length,h),I=e.defaultProcessorOptions.moduleFolder.replace(/\/$/,"")+"/",E="speex-resample-switch";C.audioWorklet.addModule(I+E+".js").then(function(){var U={processorOptions:{ctxInfo:{sampleRate:h},targetSampleRate:m,resampleQuality:B,bufferSize:p.length}},S=new AudioWorkletNode(C,E,U);S.port.onmessage=function(V){V.data.moduleState==1?S.port.postMessage({resample:{samples:[p],isInt16:!0}}):V.data.resampleResult&&(C=null,V.data.error?w({name:"ResampleError",message:V.data.error}):v(V.data.resampleResult))},S.onprocessorerror=function(V){C=null,w(V)}})}catch(U){w(U)}},e.readFileAsBuffer=function(p,h,m){ha&&ha.files?ha.files.fetch(p,h,m,"arraybuffer",e.contentFetchTimeout):c("arraybuffer",p,h,m)},e.readFileAsText=function(p,h,m){ha&&ha.files?ha.files.fetch(p,h,m,void 0,e.contentFetchTimeout):c("text",p,h,m)};function A(p){return new Promise(function(h,m){e.readFileAsBuffer(p,function(g){h(g)},function(g){m(g)})})}function l(p){return new Promise(function(h,m){e.readFileAsText(p,function(g){h(g)},function(g){m(g)})})}function c(p,h,m,g){var B=new XMLHttpRequest;B.open("GET",h),B.responseType=p,B.timeout=e.contentFetchTimeout,B.onload=function(v){B.status>=200&&B.status<300?m(B.response):g({status:B.status,message:B.statusText})},B.onerror=function(v){g(v)},B.ontimeout=function(v){g(v)},B.send()}function u(p){try{for(var h=atob(p),m=new Uint8Array(h.length),g=0;g<h.length;++g)m[g]=h.charCodeAt(g);return m}catch{throw new Error("Converting base64 string to Uint8Array bytes array failed.")}}function f(p){try{return btoa(p.reduce(function(h,m){return h+String.fromCharCode(m)},""))}catch{throw new Error("Converting Uint8Array to base64 string failed.")}}e.base64={base64StringToUint8Array:u,uint8ArrayToBase64String:f},e.addAudioElementToPage=function(p,h,m){var g=document.createElement("audio");g.src=window.URL.createObjectURL(h.constructor.name=="Blob"?h:new Blob([h],{type:m||"audio/wav"})),g.setAttribute("controls","controls");var B=document.createElement("div");return B.appendChild(g),p||(p=document.body),p.appendChild(B),g};function d(){}r.webAudio=e})(ha);(function(){var r={};r.onProcessorReady=function(d){console.log("SepiaVoiceRecorder -  onProcessorReady",d)},r.onProcessorInitError=function(d){console.error("SepiaVoiceRecorder -  onProcessorInitError",d)},r.onConnected=function(d){console.log("SepiaVoiceRecorder -  onConnected",d)},r.onDisconnected=function(d){console.log("SepiaVoiceRecorder -  onDisconnected",d)},r.onAudioStart=function(d){console.log("SepiaVoiceRecorder -  onAudioStart")},r.onAudioEnd=function(d){console.log("SepiaVoiceRecorder -  onAudioEnd")},r.onProcessorError=function(d){console.error("SepiaVoiceRecorder -  onProcessorError",d)},r.onProcessorRelease=function(d){console.log("SepiaVoiceRecorder -  onProcessorRelease")},r.onDebugLog=function(d){console.log("debugLog",d)},r.onResamplerData=function(d){console.log("SepiaVoiceRecorder -  onResamplerData",d)},r.onWaveEncoderStateChange=function(d){console.log("SepiaVoiceRecorder -  onWaveEncoderStateChange",d)},r.onWaveEncoderAudioData=function(d){console.log("SepiaVoiceRecorder -  onWaveEncoderAudioData",d)};function e(d){d.output&&d.output.wav?r.onWaveEncoderAudioData(d.output.wav):d.output&&d.output.buffer,d.gate&&(r.onWaveEncoderStateChange(d.gate),d.gate.isOpen===!0?t=!0:d.gate.isOpen===!1&&(t&&u(),t=!1))}var t=!1;function n(d){d.voiceActivity!=null,d.voiceEnergy!=null,d.vadSequenceCode!=null&&(d.vadSequenceCode==1?r.onVadStateChange("vaup",1):d.vadSequenceCode==2?r.onVadStateChange("speechstart",2):d.vadSequenceCode==3?r.onVadStateChange("vadown",3):d.vadSequenceCode==4?r.onVadStateChange("speechend",4):d.vadSequenceCode==5&&r.onVadStateChange("speechend",5))}r.onSpeechRecognitionStateChange=function(d){console.log("SepiaVoiceRecorder -  onSpeechRecognitionStateChange",d)},r.onSpeechRecognitionEvent=function(d){console.log("SepiaVoiceRecorder -  onSpeechRecognitionEvent",d)};function i(d){d&&(d.gate&&(d.gate.isOpen==!1&&s?(s=!1,r.onSpeechRecognitionStateChange({state:"onStreamEnd",bufferOrTimeLimit:d.gate.bufferOrTimeLimit})):d.gate.isOpen==!0&&!s&&(r.onSpeechRecognitionStateChange({state:"onStreamStart"}),s=!0)),d.recognitionEvent&&r.onSpeechRecognitionEvent(d.recognitionEvent),d.connectionEvent&&(d.connectionEvent.type=="ready"?r.onConnected(d.connectionEvent.data):d.connectionEvent.type=="closed"&&r.onDisconnected(d.connectionEvent.data)),d.output&&d.output.wav&&r.onWaveEncoderAudioData(d.output.wav))}var s=!1,o,a=16e3,A=512;async function l(d){d?(d.targetSampleRate&&(a=d.targetSampleRate),d.resamplerBufferSize&&(A=d.resamplerBufferSize)):d={};var p=!!d.asr;typeof d.asr!="object"&&(d.asr={});var h=!!d.vad;typeof d.vad!="object"&&(d.vad={});var m=void 0;if(d.fileUrl)try{m=await SepiaFW.webAudio.createFileSource(d.fileUrl,{targetSampleRate:a})}catch(V){r.onProcessorInitError(V);return}var g={name:"speex-resample-switch",settings:{onmessage:r.onResamplerData,sendToModules:[],options:{processorOptions:{targetSampleRate:a,resampleQuality:d.resampleQuality||4,bufferSize:A,passThroughMode:0,calculateRmsVolume:!0,gain:d.gain||1}}}},B={name:"wave-encoder",type:"worker",handle:{},settings:{onmessage:e,options:{setup:{inputSampleRate:a,inputSampleSize:A,lookbackBufferMs:0,recordBufferLimitKb:500,recordBufferLimitMs:d.recordingLimitMs,doDebug:!1}}}},v,w=480*2,C={name:"webrtc-vad-worker",type:"worker",settings:{onmessage:n,options:{setup:{inputSampleRate:a,inputSampleSize:A,bufferSize:d.vad.bufferSize||w,vadMode:d.vad.mode||3,sequence:{silenceActivationTime:450,maxSequenceTime:d.vad.maxSequenceTime||1e4,minSequenceTime:d.vad.minSequenceTime||600}}}}},I,E={name:"stt-socket",type:"worker",handle:{},settings:{onmessage:i,options:{setup:{inputSampleRate:a,inputSampleSize:A,lookbackBufferMs:0,recordBufferLimitKb:500,recordBufferLimitMs:d.recordingLimitMs,serverUrl:d.asr.serverUrl,clientId:d.asr.clientId,accessToken:d.asr.accessToken,messageFormat:d.asr.messageFormat||"webSpeechApi",language:d.asr.language||"",task:d.asr.task||"",model:d.asr.model||"",continuous:d.asr.continuous!=null?d.asr.continuous:!1,optimizeFinalResult:d.asr.optimizeFinalResult,engineOptions:d.asr.engineOptions||{},returnAudioFile:d.asr.returnAudioFile||!1,doDebug:!1}}}},U,S=[];S.push(g),S.length,h&&(S.push(C),I=S.length,r.vadModule=C,g.settings.sendToModules.push(I)),p?(S.push(E),U=S.length,r.sttServerModule=E,g.settings.sendToModules.push(U)):(S.push(B),v=S.length,r.waveEncoder=B,g.settings.sendToModules.push(v)),o=new SepiaFW.webAudio.Processor({onaudiostart:r.onAudioStart,onaudioend:r.onAudioEnd,onrelease:r.onProcessorRelease,onerror:r.onProcessorError,targetSampleRate:a,modules:S,destinationNode:void 0,startSuspended:!0,debugLog:r.onDebugLog,customSource:m},function(V){r.onProcessorReady(V)},function(V){r.onProcessorInitError(V)})}r.create=function(d){if(o){r.onProcessorInitError({name:"ProcessorInitError",message:"SepiaVoiceRecorder already exists. Release old one before creating new."});return}d||(d={}),l(d)},r.isReady=function(){return!!o&&o.isInitialized()},r.isActive=function(){return!!o&&o.isInitialized()&&o.isProcessing()},r.start=function(d,p,h){o?o.start(function(){c("open"),f("open"),d&&d()},p,h):h&&h({name:"ProcessorInitError",message:"SepiaVoiceRecorder doesn't exist yet."})},r.stop=function(d,p,h){o?o.stop(function(m){c("close"),f("close"),d&&d(m)},p,h):p&&p()},r.release=function(d,p,h){o?o.release(function(){o=void 0,d&&d()},function(){o=void 0,p&&p()},function(m){o=void 0,h&&h(m)}):p&&p()},r.stopIfActive=function(d){r.isActive()?r.stop(d,d,void 0):d&&d()},r.stopAndReleaseIfActive=function(d){r.stopIfActive(function(){r.isReady()?r.release(d,d,void 0):(o=void 0,d&&d())})};function c(d){o&&r.waveEncoder&&r.waveEncoder.handle.sendToModule({gate:d})}function u(){o&&r.waveEncoder&&r.waveEncoder.handle.sendToModule({request:{get:"wave"}})}function f(d){o&&r.sttServerModule&&r.sttServerModule.handle.sendToModule({gate:d})}r.decodeAudioFileToInt16Mono=function(d,p,h,m,g){p||(p=16e3),h&&h>1&&console.error("SepiaVoiceRecorder.decodeAudioFileToInt16Mono - Channels > 1 not supported. Result will only contain data of channel 0."),m||(m=console.log),g||(g=console.error),SepiaFW.webAudio.decodeAudioFileToInt16Mono(d,p,m,g)},r.addAudioElementToPage=function(d,p,h){return SepiaFW.webAudio.addAudioElementToPage(d,p,h)},window.SepiaVoiceRecorder=r})();class zoe{constructor(e,t){je(this,"volumeThresholds",[.05,10]);je(this,"gain",1);je(this,"isLoading",!1);je(this,"isRecording",!1);je(this,"isWaitingForFinalResult",!1);je(this,"waitingForFinalResultTimer");je(this,"waitingForFinalResultDelay",4e3);je(this,"asrStreaming",!1);je(this,"sourceInfo","-?-");if(window.SepiaFW&&(SepiaFW.webAudio.defaultProcessorOptions.moduleFolder="lib"),!window.SepiaVoiceRecorder)SepiaVoiceRecorder={notSupported:!0},console.error("SEPIA Web Audio Library not found or not supported (IE11?)!");else{this.sepiaSpeechRecognition=e,this.sepiaSpeechRecognitionConfig=t;const n=this;SepiaVoiceRecorder.onProcessorReady=function(i){console.log("SepiaVoiceRecorder -  onProcessorReady",i),this.sourceInfo="Sample-rate: "+i.targetSampleRate+"Hz (factor: "+i.inputSampleRate/i.targetSampleRate+`)
Device Label:
`+(i.sourceInfo?i.sourceInfo.label:""),console.log(this.sourceInfo),n.isLoading=!1,n.isRecording=!1,n.isWaitingForFinalResult=!1,SepiaVoiceRecorder.start()},SepiaVoiceRecorder.onConnected=function(i){i&&i.model&&(console.log("INFO - connected - ASR active model: "+i.model),e._dispatchEvent(new Event("start")))},SepiaVoiceRecorder.onDisconnected=function(){e._dispatchEvent(new Event("end"))},SepiaVoiceRecorder.onProcessorInitError=function(i){n.onMicError();const s=new Su;switch(s.message=i.message,i.name){case"NotAllowedError":s.error=Rd.NOTALLOWED,s._dispatch(e);break;default:console.log(i);break}location.protocol=="http:"&&!location.origin.indexOf("http://localhost")==0&&console.error("Init. ERROR - Likely because of insecure origin (no HTTPS or localhost)")},SepiaVoiceRecorder.onProcessorError=function(i){console.error("SepiaVoiceRecorder -  onProcessorError",i),n.onMicError(),console.log("ERROR - onProcessorError: "+i.name)},SepiaVoiceRecorder.onAudioStart=function(i){e._dispatchEvent(new Event("audiostart")),n.isRecording=!0},SepiaVoiceRecorder.onAudioEnd=function(i){e._dispatchEvent(new Event("audioend")),n.isRecording=!1,n.isWaitingForFinalResult&&(clearTimeout(n.waitingForFinalResultTimer),n.waitingForFinalResultTimer=setTimeout(function(){n.isWaitingForFinalResult=!1},n.waitingForFinalResultDelay)),console.log("Microphone is CLOSED")},SepiaVoiceRecorder.onProcessorRelease=function(i){console.log("SepiaVoiceRecorder -  onProcessorRelease"),n.isRecording=!1,n.isLoading=!1,n.isWaitingForFinalResult=!1},SepiaVoiceRecorder.onDebugLog=function(i){},SepiaVoiceRecorder.onResamplerData=function(i){},SepiaVoiceRecorder.onSpeechRecognitionStateChange=function(i){i.state=="onStreamStart"?(n.asrStreaming,n.asrStreaming=!0):i.state=="onStreamEnd"&&(n.asrStreaming&&(i.bufferOrTimeLimit===!0&&console.log("Speech Recognition - Stopped streaming due to buffer- or time-limit"),n.isRecording?SepiaVoiceRecorder.stop():n.isWaitingForFinalResult&&(clearTimeout(n.waitingForFinalResultTimer),n.waitingForFinalResultTimer=setTimeout(function(){n.isWaitingForFinalResult=!1},n.waitingForFinalResultDelay))),n.asrStreaming=!1)},SepiaVoiceRecorder.onSpeechRecognitionEvent=function(i){if(i.type=="result"){if(!n.isRecording&&!n.isWaitingForFinalResult)return;const s=new Woe;s.transcript=i.transcript,s.confidence=i.confidence;const o=new Zoe([s]);if(i.isFinal){n.isWaitingForFinalResult&&!n.isRecording&&clearTimeout(n.waitingForFinalResultTimer),o.isFinal=!0;const a=new qI([o]),A=new CB(a);if(i.transcript)A._dispatch(e,"result");else{const l=new Su;l.error=Rd.NOSPEECH,l.message="No speech was detected.",l._dispatch(e)}n.isWaitingForFinalResult=!1}else{o.isFinal=!1;const a=new qI([o]),A=new CB(a);i.transcript?A._dispatch(e,"result"):A._dispatch(e,"nomatch"),n.isWaitingForFinalResult=!0}}else if(i.type=="error"){const s=new Su;if(s.message=i.message,i.name&&i.message)switch(i.name){case"SocketConnectionError":s.error=Rd.NETWORK,s._dispatch(e);break;case"Error":i.message==="ChunkProcessorError failed to load."&&(s.error=Rd.SERVICENOTALLOWED,s.message="You are likely unauthorized to access this SEPIA STT server.",s._dispatch(e));break;default:console.log(i);break}else console.error("Speech Recognition Error:",i)}else console.log("Speech Recognition - Event: "+i.type)},SepiaVoiceRecorder.onWaveEncoderAudioData=function(i){},SepiaVoiceRecorder.onVadStateChange=function(i,s){switch(i){case"vaup":e._dispatchEvent(new Event("soundstart"));break;case"vadown":e._dispatchEvent(new Event("soundend"));break;case"speechstart":e._dispatchEvent(new Event("speechstart"));break;case"speechend":e._dispatchEvent(new Event("speechend"));break}}}}toggleMic(){const e=this.sepiaSpeechRecognition.lang.split("-")[0];if(hA.language!=this.sepiaSpeechRecognition.lang&&hA.language!=e){const n=new Su;n.error=Rd.LANGUAGENOTSUPPORTED,n.message="The specified SEPIA STT server does not support the language specified by the user agent.",n._dispatch(this.sepiaSpeechRecognition);return}const t=this;!this.isLoading&&!this.isRecording&&!this.isWaitingForFinalResult?(this.isLoading=!0,SepiaVoiceRecorder.stopAndReleaseIfActive(function(){SepiaFW.webAudio.tryNativeStreamResampling=!1;const n={language:t.sepiaSpeechRecognition.lang,continuous:t.sepiaSpeechRecognition.continuous,messageFormat:"default"};var i=Object.assign(t.sepiaSpeechRecognitionConfig,n);console.log(i),SepiaVoiceRecorder.create({gain:t.gain,asr:i,vad:!0})})):this.isRecording?SepiaVoiceRecorder.stop():(this.isLoading||this.isWaitingForFinalResult)&&SepiaVoiceRecorder.stopAndReleaseIfActive(function(){t.isLoading=!1,t.isRecording=!1,t.isWaitingForFinalResult=!1})}releaseMic(e){SepiaVoiceRecorder.stopAndReleaseIfActive(function(){this.isLoading=!1,this.isRecording=!1,this.isWaitingForFinalResult=!1,e&&e()})}onMicError(){this.isRecording=!1,this.isWaitingForFinalResult=!1,this.isLoading=!1}}class cM{constructor(){je(this,"src","");je(this,"weight",1)}}var Ll,MB,VL;class Xoe{constructor(){Bc(this,MB);Bc(this,Ll,[]);je(this,"length",0);je(this,"addFromURI",(e,t=1)=>{const n=new cM;fetch(e).then(i=>{i.text().then(s=>{n.src=s,n.weight=t,Wi(this,Ll).push(n)})}).catch(i=>{console.log("Failed to add SpeechGrammar from URI: ",i)})});je(this,"addFromString",(e,t=1)=>{const n=new cM;n.src=e,n.weight=t,Wi(this,Ll).push(n)});return new Proxy(this,{get:(e,t)=>{var n;if(t==="addFromString"||t==="addFromURI")return function(){return e[t].apply(e,arguments)};if(typeof+t=="number")return yQ(n=e,MB,VL).call(n,t);if(t==="length")return Wi(e,Ll).length}})}}Ll=new WeakMap,MB=new WeakSet,VL=function(e){return Wi(this,Ll)[e]};let DL={};const Yoe=r=>(DL=r,Koe);var rf;class Koe{constructor(){Bc(this,rf,new zoe(this,DL));je(this,"grammars",new Xoe);je(this,"lang",document.documentElement.lang||navigator.language);je(this,"continuous",!1);je(this,"interimResults",!1);je(this,"maxAlternatives",1);je(this,"start",()=>{Wi(this,rf).toggleMic()});je(this,"stop",()=>{Wi(this,rf).toggleMic()});je(this,"abort",()=>{Wi(this,rf).toggleMic()});je(this,"onaudiostart",e=>{});je(this,"onsoundstart",e=>{});je(this,"onspeechstart",e=>{});je(this,"onspeechend",e=>{});je(this,"onsoundend",e=>{});je(this,"onaudioend",e=>{});je(this,"onresult",e=>{});je(this,"onnomatch",e=>{});je(this,"onerror",e=>{});je(this,"onstart",e=>{});je(this,"onend",e=>{});je(this,"_eventCallbacks",new Map);je(this,"_dispatchEvent",e=>{const t=this._eventCallbacks.get(e.type);t&&t.forEach(n=>n(e)),this[`on${e.type}`](e)});je(this,"addEventListener",(e,t)=>{this._eventCallbacks.has(e)?this._eventCallbacks.get(e).push(t):this._eventCallbacks.set(e,[t])});je(this,"removeEventListener",(e,t)=>{if(this._eventCallbacks.has(e)){const n=this._eventCallbacks.get(e);n.includes(t)&&n.splice(n.indexOf(t),1)}});Loe()}}rf=new WeakMap;class joe{constructor(){je(this,"serverUrl","http://localhost:20741");je(this,"clientId","any");je(this,"accessToken","test1234");je(this,"task","assistant");je(this,"model","");je(this,"optimizeFinalResult",!0);je(this,"engineOptions",{})}}const qoe=2e4;async function $oe(r){let e=0;const t=[];for(let n=r.length-1;n>=0;n--){const i=r[n],s=`${i==null?void 0:i.name}: ${i==null?void 0:i.message}`;if(e+=s.length,e<qoe)t.push(s);else break}return t.reverse(),t}const eae="_message_1mjdp_1",tae="_colorBg_1mjdp_13",nae="_name_1mjdp_24",rae="_speaker_1mjdp_39",Md={message:eae,"chat-bubble":"_chat-bubble_1mjdp_1",colorBg:tae,name:nae,speaker:rae},iae=r=>{const{timestamp:e,name:t,message:n,type:i,color:s}=r;let o=new Date(e);const a=o.getHours()<10?"0"+o.getHours():o.getHours(),A=o.getMinutes()<10?"0"+o.getMinutes():o.getMinutes(),l=`${a}:${A}`;return ie.jsxs("div",{className:`${Md.message} ${i&&Md.speaker}`,children:[ie.jsxs("div",{className:Md.name,style:i?{}:{color:s},children:[t,", ",ie.jsx("span",{children:l})]}),ie.jsxs("div",{className:Md["chat-bubble"],children:[ie.jsx("div",{className:Md.colorBg,style:i?{}:{backgroundColor:s}}),n]})]})},sae=localStorage.getItem("sessionId")??Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15);localStorage.setItem("sessionId",sae);const oae=new joe,aae="Speaker",Aae=window.webkitSpeechRecognition||Yoe(oae);function lae({templateInfo:r,micEnabled:e,setMicEnabled:t,speechRecognition:n,setSpeechRecognition:i}){var Q;const[s,o]=et.useState(!1),{t:a}=Ie.useContext(eo),A=localStorage.getItem(`${r.id}_fulBio`),l=JSON.parse(A),c=l.name,u=l.description;l.voiceKey;const f=((Q=ju[l.colorKey])==null?void 0:Q.fontColor)||ju[Object.keys(ju)[0]].fontColor;l.greeting;const d=l.personality.question,p=l.relationship.question,h=l.hobbies.question,m=l.personality.answer,g=l.relationship.answer,B=l.hobbies.answer,[v,w]=et.useState(localStorage.getItem("speaker")||aae);Ie.useEffect(()=>{localStorage.setItem("speaker",v)},[v]),et.useContext(Al);const[C,I]=et.useState(""),[E,U]=et.useState([]),S=async _=>{_.preventDefault(),I(_.target.value)};et.useEffect(()=>{const _=document.querySelector("#msgscroll");_.scrollTo(0,_.scrollHeight)},[E]),Ie.useEffect(()=>{const _=L=>{L.ctrlKey&&L.key==="c"&&U([])};return window.addEventListener("keydown",_),()=>{window.removeEventListener("keydown",_)}},[]);const V=()=>{n.start(),t(!0)},J=()=>{n.stop(),t(!1)};Ie.useEffect(()=>{s||document.getElementById("messageInput").focus()},[s]);const z=async _=>{if(_.preventDefault&&_.preventDefault(),J(),!s){const T=_.target.elements.message.value;R(T)}},R=async _=>{if(_&&_!==""&&!s){o(!0);const L=c;I("");const T={name:v,message:_,timestamp:Date.now(),type:1};U(G=>[...G,T]);const Z=await $oe(E);Z.push(`${v}: ${_}`);try{const G="https://upstreet.webaverse.com/api/ai",x={prompt:`The following is part of a conversation between ${v} and ${L}. ${L} is descriptive and helpful, and is honest when it doesn't know an answer. Included is a context which acts a short-term memory, used to guide the conversation and track topics.

CONTEXT:

Info about ${L}
---

Bio: "${u}"

Question 1: "${d}"
Response 1: "${m}"

Question 2: "${p}"
Response 2: "${g}"

Question 3: "${h}"
Response 3: "${B}"

MOST RECENT MESSAGES:

${Z.join(`
`)}
${L}:`,max_tokens:400,temperature:.9,top_p:1,frequency_penalty:0,presence_penalty:.6,stop:[v+":",L+":","\\n"]};foe.post(G,x).then(P=>{const oe=P.data.choices[0].text,M={name:L,message:oe,timestamp:Date.now(),type:0};U(k=>[...k,M]),o(!1)})}catch(G){console.error(G)}}};let y=!1;return Ie.useEffect(()=>{if(!s){if(n||y)return;y=!0;const _=new Aae({});i(_),_.onerror=L=>console.error(L.error,L.message),_.onresult=L=>{const T=L.resultIndex;L.results[T].isFinal&&(R(`${L.results[T][0].transcript}`),o(!0))},_.interimResults=!0,_.continuous=!0}},[]),ie.jsxs("div",{className:oo.chatBox,children:[ie.jsxs("div",{className:oo.speaker,children:[ie.jsx("p",{className:oo.warning,children:a("text.apiUnderMaintnance")}),ie.jsx("label",{htmlFor:"speaker",children:a("labels.yourName")}),ie.jsx("input",{type:"text",name:"speaker",defaultValue:v,onChange:_=>w(_.target.value)})]}),ie.jsx("label",{children:a("labels.conversation")}),ie.jsx("div",{className:oo.messages,children:ie.jsx("div",{className:oo.scrollBox,id:"msgscroll",children:E.map((_,L)=>{if(_.timestamp)return ie.jsx(iae,{name:_.name,timestamp:_.timestamp,message:_.message,type:_.type,color:f},L)})})}),ie.jsxs("form",{className:oo.send,style:{opacity:s?"0.4":"1"},onSubmit:z,children:[ie.jsx(Ri,{type:"icon",theme:"light",icon:"microphone",className:oo.mic,size:32,active:!!e,onClick:()=>e?J():V()}),ie.jsx("input",{autoComplete:"off",type:"text",name:"message",id:"messageInput",value:C,onInput:S,onChange:S,disabled:s}),ie.jsx(Ri,{theme:"light",text:a("callToAction.send"),size:14,onSubmit:z,className:oo.sendButton,type:"submit"})]}),ie.jsxs("p",{className:`${oo.isTyping} ${s&&oo.show}`,children:[ie.jsx("span",{style:{color:f},children:c})," is typing..."]})]})}function cae({templateInfo:r}){const{setViewMode:e}=et.useContext(Ho),[t,n]=et.useState(!1),[i,s]=et.useState(!1),{playSound:o}=et.useContext(zo),{isMute:a}=et.useContext(Po),A=()=>{e(Zt.SAVE),!a&&o("backNextButton"),i&&i.stop(),n(!1)},{t:l}=Ie.useContext(eo);return ie.jsxs("div",{className:Cl.container,children:[ie.jsx("div",{className:"sectionTitle",children:l("pageTitles.chat")}),ie.jsxs("div",{className:Cl.chatContainer,children:[ie.jsx("div",{className:Cl.topLine}),ie.jsx("div",{className:Cl.bottomLine}),ie.jsx("div",{className:Cl.scrollContainer,children:ie.jsx(lae,{templateInfo:r,micEnabled:t,setMicEnabled:n,speechRecognition:i,setSpeechRecognition:s})})]}),ie.jsx("div",{className:Cl.buttonContainer,children:ie.jsx(Ri,{theme:"light",text:l("callToAction.back"),size:14,className:Cl.buttonLeft,onClick:A})})]})}const uae="_buttonContainer_1fd4o_1",fae="_buttonLeft_1fd4o_10",dae="_buttonRight_1fd4o_14",hae="_buttonCenter_1fd4o_18",um={buttonContainer:uae,buttonLeft:fae,buttonRight:dae,buttonCenter:hae};var Mn;(function(r){r[r.ARRAY_BUFFER=34962]="ARRAY_BUFFER",r[r.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",r[r.BYTE=5120]="BYTE",r[r.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",r[r.SHORT=5122]="SHORT",r[r.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",r[r.UNSIGNED_INT=5125]="UNSIGNED_INT",r[r.FLOAT=5126]="FLOAT",r[r.LINEAR=9729]="LINEAR",r[r.REPEAT=10497]="REPEAT"})(Mn||(Mn={}));const wB="blend_",uM="vrmColliderSphere";function pae(r){return{title:r.name,version:"v0",author:r.authors[0]||"",contactInformation:r.contactInformation,allowedUserName:r.allowedUserName,violentUssageName:r.allowExcessivelyViolentUsage?"Allow":"Disallow",sexualUssageName:r.allowExcessivelySexualUsage?"Allow":"Disallow",commercialUssageName:"Disallow"}}function gae(r){const e=[];for(const t in r.humanBones)e.push({bone:t,node:r.humanBones[t].node});return{humanBones:e}}function mae(r){switch(r){case"happy":return"joy";case"sad":return"sorrow";case"relaxed":return"fun";case"aa":return"a";case"ih":return"i";case"ou":return"u";case"ee":return"e";case"oh":return"o";default:return r}}function Bae(r){if(r.includes("Thumb")){if(r.includes("Metacarpal"))return r.replace("Metacarpal","Proximal");if(r.includes("Proximal"))return r.replace("Proximal","Intermediate")}return r}class vae{parse(e,t,n){const i=pae(e.meta),s=gae(e.humanoid),o=e.materials,a=[],A={generator:"UniGLTF-2.0.0",version:"2.0"};if(t)if(s)if(i){if(!o)throw new Error("materials is undefined or null")}else throw new Error("meta is undefined or null");else throw new Error("humanoid is undefined or null");else throw new Error("avatar is undefined or null");const l=o.filter((k,q,ee)=>ee.findIndex(X=>X.name===k.name.replace(" (Outline)",""))===q).map(k=>k),c=l.map(k=>k.name),u=i.texture?{name:"icon",imageBitmap:i.texture.image}:null,f=l.filter(k=>k.map).map(k=>{if(!k.map)throw new Error(k.name+" map is null");return{name:k.name,imageBitmap:k.map.image}}),d=l.filter(k=>k.userData.shadeTexture).map(k=>{if(!k.userData.shadeTexture)throw new Error(k.userData.shadeTexture+" map is null");return{name:k.name+"_shade",imageBitmap:k.userData.shadeTexture.image}}),p=f.concat(d),h=Iae(p,u),m=Uae(h),g=xae(h),B=Fae(l,p),v=t.children.filter(k=>k.children.length>0&&k.children[0].type===Jr.Bone)[0],w=kL(v).filter(k=>k.name!==uM),C=w.map(k=>k.name),I=w.map(k=>({children:k.children.filter(q=>q.name!==uM).map(q=>C.indexOf(q.name)),name:k.name,rotation:[k.quaternion.x,k.quaternion.y,k.quaternion.z,k.quaternion.w],scale:[k.scale.x,k.scale.y,k.scale.z],translation:[k.position.x,k.position.y,k.position.z]})),E=[],U=t.children.filter(k=>k.type===Jr.Group||k.type===Jr.SkinnedMesh),S=[];U.forEach(k=>{const q=k.type===Jr.Group?k.children[0]:k,ee=q.geometry.attributes;S.push(new aa(ee.position,Mn.FLOAT,Dt.POSITION,Ls.VEC3,q.name,void 0)),S.push(new aa(ee.normal,Mn.FLOAT,Dt.NORMAL,Ls.VEC3,q.name,void 0)),S.push(new aa(ee.uv,Mn.FLOAT,Dt.UV,Ls.VEC2,q.name,void 0)),S.push(new aa(ee.skinWeight,Mn.FLOAT,Dt.SKIN_WEIGHT,Ls.VEC4,q.name,void 0)),S.push(new aa(ee.skinIndex,Mn.UNSIGNED_SHORT,Dt.SKIN_INDEX,Ls.VEC4,q.name,void 0)),(k.type===Jr.Group?k.children.map($=>$):[k]).forEach($=>{if(!$.geometry.index)throw new Error($.name+" geometry.index is null");S.push(new aa($.geometry.index,Mn.UNSIGNED_INT,Dt.INDEX,Ls.SCALAR,q.name,$.name))}),q.morphTargetDictionary||(q.morphTargetDictionary={},q.morphTargetInfluences=[],q.geometry.morphAttributes={},q.updateMorphTargets()),q.geometry.userData.targetNames=[];for(const $ in e.expressionManager.expressionMap){const se=e.expressionManager.expressionMap[$],ae=se._binds.map(de=>({mesh:0,index:de.index,weight:de.weight*100}));if(ae.length>0){let de=!1;for(const fe in Zr)if($===Zr[fe]&&$!=="surprised"){a.push({name:$,presetName:mae($),binds:ae,isBinary:se.isBinary}),de=!0;break}de===!1&&a.push({name:$,presetName:"unknown",binds:ae,isBinary:se.isBinary})}}for(const $ in q.morphTargetDictionary){q.geometry.userData.targetNames.push($);const se=q.morphTargetDictionary[$],ae=q.geometry.morphAttributes;S.push(new aa(ae.position[se],Mn.FLOAT,Dt.BLEND_POSITION,Ls.VEC3,q.name,wB+$)),S.push(new aa(ae.normal[se],Mn.FLOAT,Dt.BLEND_NORMAL,Ls.VEC3,q.name,wB+$))}}),U.forEach(k=>{const q=k.type===Jr.Group?k.children[0]:k,ee=new Float32Array(q.skeleton.boneInverses.map(X=>X.elements).flat());S.push(new aa(new pt(ee,16),Mn.FLOAT,Dt.BIND_MATRIX,Ls.MAT4,q.name,q.name))}),E.push(...S.map(k=>({bufferView:-1,byteOffset:0,componentType:k.valueType,count:k.attribute.count,max:k.max,min:k.min,normalized:!1,type:k.accessorsType})));const V=Cae(U,S,c);U.forEach((k,q)=>{I.push({mesh:q,name:k.name,rotation:[k.quaternion.x,k.quaternion.y,k.quaternion.z,k.quaternion.w],scale:[k.scale.x,k.scale.y,k.scale.z],skin:q,translation:[k.position.x,k.position.y,k.position.z]})});const J=wae(U,S,C),z={humanBones:[]};s.humanBones.forEach(k=>{z.humanBones.push({bone:Bae(k.bone),node:C.indexOf(k.node.name),useDefaultValues:!0})});const R=[{floatProperties:{_DstBlend:.5,_ShadeShift:.5,_ShadeToony:.5,_ShadingGradeRate:.5},keywordMap:{_NORMALMAP:!1,MTOON_OUTLINE_COLOR_FIXED:!0,MTOON_OUTLINE_WIDTH_WORLD:!0},name:"CombinedMat",renderQueue:2e3,shader:"VRM/MToon",tagMap:{RenderType:"Opaque"},textureProperties:{_MainTex:0,_ShadeTexture:0},vectorProperties:{_Color:[1,1,1,1],_EmissionColor:[0,0,0,1],_EmissionMap:[0,0,1,1],_MainTex:[0,0,1,1],_OutlineColor:[0,0,0,1],_OutlineWidthTexture:[0,0,1,1],_ReceiveShadowTexture:[0,0,1,1],_RimColor:[0,0,0,1],_RimTexture:[0,0,1,1],_ShadeColor:[.9,.9,.9,1]}}],y=i,Q=[];Q.push(...p.map(k=>({buffer:fM(k.imageBitmap),type:Dt.IMAGE}))),Q.push(...S.map(k=>({buffer:k.buffer,type:k.type}))),u&&Q.push({buffer:fM(u.imageBitmap),type:Dt.IMAGE});let _=0,L=0,T=0;const Z=Q.map((k,q)=>{const ee={buffer:0,byteLength:k.buffer.byteLength,byteOffset:_,target:k.type===Dt.IMAGE||k.type===Dt.BIND_MATRIX?void 0:k.type===Dt.INDEX?Mn.ELEMENT_ARRAY_BUFFER:Mn.ARRAY_BUFFER};return _+=k.buffer.byteLength,k.type===Dt.IMAGE?h[L++].bufferView=q:E[T++].bufferView=q,ee}),G=Qae(t,I),D={accessors:E,asset:A,buffers:[{byteLength:_}],bufferViews:Z,extensions:{VRM:{blendShapeMaster:{blendShapeGroups:a},firstPerson:{firstPersonBone:44,firstPersonBoneOffset:new H,lookAtHorizontalInner:{curve:[0,0,0,1,1,1,1,0],xRange:90,yRange:10},lookAtHorizontalOuter:{curve:[0,0,0,1,1,1,1,0],xRange:90,yRange:10},lookAtTypeName:"Bone",lookAtVerticalDown:{curve:[0,0,0,1,1,1,1,0],xRange:90,yRange:10},lookAtVerticalUp:{curve:[0,0,0,1,1,1,1,0],xRange:90,yRange:10}},materialProperties:R,humanoid:z,meta:y,specVersion:"0.0"}},extensionsUsed:["KHR_materials_unlit","KHR_texture_transform","VRM"],images:h,materials:B,meshes:V,nodes:I,samplers:m,avatar:0,scenes:G,skins:J,textures:g},x=new dM(eU(JSON.stringify(D,void 0,2)),"JSON"),P=new dM(ih(Q.map(k=>k.buffer)),"BIN\0"),oe=ih([x.buffer,P.buffer]),M=ih([eU("glTF"),$I(2,4),$I(oe.byteLength+12,4)]);n(ih([M,oe]))}}function kL(r){return r.children.length<=0?[r]:[r].concat(r.children.map(e=>kL(e)).flat())}function fM(r){const e=document.createElement("canvas");e.width=r.width,e.height=r.height,e.getContext("2d").drawImage(r,0,0);const t=e.toDataURL("image/png"),n=atob(t.split(",")[1]),i=new ArrayBuffer(n.length),s=new DataView(i);for(let o=0;o<n.length;o++)s.setUint8(o,n.charCodeAt(o));return i}function $I(r,e){const t=new ArrayBuffer(e);return new DataView(t).setUint32(0,r,!0),t}function eU(r){return new TextEncoder().encode(r).buffer}function ih(r){let e=0;for(let i=0;i<r.length;i++)e+=r[i].byteLength;const t=new Uint8Array(e);let n=0;for(let i=0;i<r.length;++i)t.set(new Uint8Array(r[i]),n),n+=r[i].byteLength;return t.buffer}function yae(r,e){const t=e===Mn.UNSIGNED_SHORT?2:4,n=r.array;let i=0;const s=new ArrayBuffer(r.count*r.itemSize*t),o=new DataView(s);for(let a=0;a<r.count;a++)for(let A=0;A<r.itemSize;A++){let l;r.itemSize>4?l=n[a*r.itemSize+A]:A===0?l=r.getX(a):A===1?l=r.getY(a):A===2?l=r.getZ(a):l=r.getW(a),e===Mn.UNSIGNED_SHORT?o.setUint16(i,l,!0):e===Mn.UNSIGNED_INT?o.setUint32(i,l,!0):o.setFloat32(i,l,!0),i+=t}return s}class dM{constructor(e,t){this.data=e,this.type=t;const n=this.data;this.buffer=ih([$I(n.byteLength,4),eU(this.type),n])}paddingBinary(e,t){const n=Math.ceil(e.byteLength/4)*4;if(e.byteLength===n)return e;const i=new Uint8Array(n);i.set(new Uint8Array(e),0);for(let s=e.byteLength;s<n;s++)i.set(new Uint8Array(t),s);return i.buffer}}class aa{constructor(e,t,n,i,s,o){this.attribute=e,this.type=n,this.valueType=t,this.accessorsType=i,this.meshName=s,this.name=o,this.buffer=yae(this.attribute,this.valueType),this.max=n===Dt.POSITION||n===Dt.BLEND_POSITION?[Math.max.apply(null,Array.from(this.attribute.array).filter((a,A)=>A%3===0)),Math.max.apply(null,Array.from(this.attribute.array).filter((a,A)=>A%3===1)),Math.max.apply(null,Array.from(this.attribute.array).filter((a,A)=>A%3===2))]:void 0,this.min=n===Dt.POSITION||n===Dt.BLEND_POSITION?[Math.min.apply(null,Array.from(this.attribute.array).filter((a,A)=>A%3===0)),Math.min.apply(null,Array.from(this.attribute.array).filter((a,A)=>A%3===1)),Math.min.apply(null,Array.from(this.attribute.array).filter((a,A)=>A%3===2))]:void 0}}var _u;(function(r){r.MeshBasicMaterial="MeshBasicMaterial",r.MeshStandardMaterial="MeshStandardMaterial",r.MToonMaterial="MToonMaterial"})(_u||(_u={}));var Ls;(function(r){r.SCALAR="SCALAR",r.VEC2="VEC2",r.VEC3="VEC3",r.VEC4="VEC4",r.MAT4="MAT4"})(Ls||(Ls={}));var Dt;(function(r){r.POSITION="POSITION",r.NORMAL="NORMAL",r.UV="UV",r.INDEX="INDEX",r.SKIN_WEIGHT="SKIN_WEIGHT",r.SKIN_INDEX="SKIN_INDEX",r.BLEND_POSITION="BLEND_POSITION",r.BLEND_NORMAL="BLEND_NORMAL",r.BIND_MATRIX="BIND_MATRIX",r.IMAGE="IMAGE"})(Dt||(Dt={}));var Jr;(function(r){r.Group="Group",r.SkinnedMesh="SkinnedMesh",r.Object3D="Object3D",r.Bone="Bone"})(Jr||(Jr={}));const Cae=(r,e,t)=>r.map(n=>{const i=n.type===Jr.Group?n.children[0]:n,s=n.type===Jr.Group?n.children.map(o=>o):[n];return{name:n.name,primitives:s.map(o=>{const a=e.map(l=>l.meshName===i.name?l.type:null),A=Array.isArray(o.material)?o.material[0].name:o.material.name;return{attributes:{JOINTS_0:a.indexOf(Dt.SKIN_INDEX),NORMAL:a.indexOf(Dt.NORMAL),POSITION:a.indexOf(Dt.POSITION),TEXCOORD_0:a.indexOf(Dt.UV),WEIGHTS_0:a.indexOf(Dt.SKIN_WEIGHT)},extras:{targetNames:o.geometry.userData.targetNames},indices:e.map(l=>l.type===Dt.INDEX&&l.meshName===i.name?l.name:null).indexOf(o.name),material:t.indexOf(A),mode:4,targets:i.geometry.userData.targetNames?i.geometry.userData.targetNames.map(l=>({NORMAL:e.map(c=>c.type===Dt.BLEND_NORMAL&&c.meshName===i.name?c.name:null).indexOf(wB+l),POSITION:e.map(c=>c.type===Dt.BLEND_POSITION&&c.meshName===i.name?c.name:null).indexOf(wB+l)})):void 0}})}}),wae=(r,e,t)=>r.map(n=>{const i=n.type===Jr.Group?n.children[0]:n;return{inverseBindMatrices:e.map(s=>s.type===Dt.BIND_MATRIX?s.meshName:null).indexOf(i.name),joints:i.skeleton.bones.map(s=>t.indexOf(s.name)),skeleton:t.indexOf(i.skeleton.bones[0].name)}}),Fae=(r,e)=>r.map(t=>{let n,i=null;if(t=t.userData.vrmMaterial?t.userData.vrmMaterial:t,t.type==="ShaderMaterial")i=t.userData.gltfExtensions.VRMC_materials_mtoon,i.shadeMultiplyTexture={index:e.map(c=>c.name).indexOf(t.uniforms.shadeMultiplyTexture.name)},n=t.color?[1,1,1,1]:void 0;else{const l=t;n=l.color?[l.color.r,l.color.g,l.color.b,1]:void 0}let s=-1;t.map?s=e.map(l=>l.name).indexOf(t.name):t.uniforms&&t.uniforms.map&&(s=e.map(l=>l.name).indexOf(t.uniforms.map.name));const o=s>=0?{extensions:{KHR_texture_transform:{offset:[0,0],scale:[1,1]}},index:s,texCoord:0}:void 0,a=(()=>{switch(t.type){case _u.MeshStandardMaterial:return t.metalness;case _u.MeshBasicMaterial:return 0;default:return 0}})(),A=(()=>{switch(t.type){case _u.MeshStandardMaterial:return t.roughness;case _u.MeshBasicMaterial:return .9;default:return .9}})();return{alphaCutoff:t.alphaTest>0?t.alphaTest:void 0,alphaMode:t.transparent?"BLEND":t.alphaTest>0?"MASK":"OPAQUE",doubleSided:t.side===2,extensions:t.type==="ShaderMaterial"?{KHR_materials_unlit:{},VRMC_materials_mtoon:i}:void 0,name:t.name,pbrMetallicRoughness:{baseColorFactor:n,baseColorTexture:o,metallicFactor:a,roughnessFactor:A}}}),Iae=(r,e)=>(e?r.concat(e):r).filter(t=>t&&t.imageBitmap).map(t=>({bufferView:-1,mimeType:"image/png",name:t.name})),Uae=r=>r.map(()=>({magFilter:Mn.LINEAR,minFilter:Mn.LINEAR,wrapS:Mn.REPEAT,wrapT:Mn.REPEAT})),xae=r=>r.map((e,t)=>({sampler:0,source:t})),Qae=(r,e)=>{const t=e.map(n=>n.name);return[{nodes:r.children.filter(n=>n.type===Jr.Object3D||n.type===Jr.SkinnedMesh||n.type===Jr.Group||n.type===Jr.Bone).map(n=>t.indexOf(n.name))}]};function LL(r){const e=r.clone(),t=[];return r.traverse(n=>{n.userData.origIndexBuffer&&t.push(n.userData.origIndexBuffer)}),e.traverse(n=>{n.userData.origIndexBuffer&&(n.userData.origIndexBuffer=t.shift())}),e}function bae(r){const e=LL(r);let t;const n=[];e.traverse(s=>{if(!t&&s.isSkinnedMesh&&(t=tee(s)),s.isSkinnedMesh){if(s.geometry=s.geometry.clone(),s.skeleton=t,n.push(s),Array.isArray(s.material)){const o=s.material;s.material=new Mp,s.material.map=o[0].map}s.userData.origIndexBuffer&&s.geometry.setIndex(s.userData.origIndexBuffer)}});const i=new Qr;return n.forEach(s=>{i.add(s)}),i.add(t.bones[0]),i}function WL(r,e,t=!1){const n=LL(r);return iee({transparentColor:new Ve(1,1,1),avatar:n,atlasSize:e},t)}async function Eae(r,e=4096,t=!0){if(t){const n=await WL(r,e);return pM(n)}else{const n=bae(r);return pM(n)}}async function Sae(r,e,t=4096,n=!1){const i=await WL(r,t,n);return Rae(i,e,n)}async function _ae(r,e,t="",n=4096,i=!1){const s=`${t&&t!==""?t:"AvatarCreatorModel"}`;Sae(r,e,n,i).then(o=>{PL(o,`${s}.vrm`)})}async function hM(r,e=!0,t="",n=4096){const i=`${t&&t!==""?t:"AvatarCreatorModel"}`;Eae(r,n,e).then(s=>{if(s instanceof ArrayBuffer)PL(s,`${i}.glb`);else{const o=JSON.stringify(s,null,2);Mae(o,`${i}.gltf`)}})}function pM(r){return new Promise(e=>new _x().parse(r,n=>{e(n)},n=>{console.error("Error parsing",n)},{trs:!1,onlyVisible:!1,truncateDrawRange:!0,binary:!0,forcePowerOfTwoTextures:!1,maxTextureSize:1024}))}function Rae(r,e,t=!1){return new Promise(n=>{const i=t?new vae:new N$,s={...Nae(e),...Gee(r,"CharacterCreator")};let o;r.traverse(a=>{a.isSkinnedMesh&&(o=a)}),o.skeleton.bones.forEach(a=>{a.name!=="root"&&(a.position.x*=-1,a.position.z*=-1)}),o.skeleton.bones.forEach(a=>{a.updateMatrix(),a.updateMatrixWorld()}),o.skeleton.calculateInverses(),o.skeleton.computeBoneTexture(),o.skeleton.update(),i.parse(s,r,a=>{n(a)})})}function ZL(r,e){const t=document.createElement("a");t.style.display="none",document.body.appendChild(t),t.href=URL.createObjectURL(r),t.download=e,t.click()}function Mae(r,e){ZL(new Blob([r],{type:"text/plain"}),e)}function PL(r,e){ZL(Tae(r),e)}function Tae(r){return new Blob([r],{type:"application/octet-stream"})}function Nae(r){for(const e in r)if(r[e].vrm)return r[e].vrm}const Vae="_button_13dfi_1",Uw={button:Vae},Dae="Anon",kae=()=>{const{t:r}=Ie.useContext(eo),[e]=et.useState(localStorage.getItem("name")||Dae),{model:t,avatar:n}=Ie.useContext(Al);return ie.jsxs(et.Fragment,{children:[ie.jsx(Ri,{theme:"light",text:"GLB",icon:"download",size:14,className:Uw.button,onClick:()=>{hM(t,!0,e)}}),ie.jsx(Ri,{theme:"light",text:`GLB (${r("text.unoptimized")})`,icon:"download",size:14,className:Uw.button,onClick:()=>{hM(t,!1,e)}}),ie.jsx(Ri,{theme:"light",text:"VRM",icon:"download",size:14,className:Uw.button,onClick:()=>{_ae(t,n,e,4096,!0)}})]})};function Lae(){const{setViewMode:r}=et.useContext(Ho),{playSound:e}=et.useContext(zo),{isMute:t}=et.useContext(Po),n=()=>{r(Zt.BIO),!t&&e("backNextButton")},i=()=>{r(Zt.CHAT),!t&&e("backNextButton")},{t:s}=Ie.useContext(eo);return ie.jsxs("div",{className:um.container,children:[ie.jsx("div",{className:"sectionTitle",children:s("pageTitles.saveCharacter")}),ie.jsxs("div",{className:um.buttonContainer,children:[ie.jsx(Ri,{theme:"light",text:s("callToAction.back"),size:14,className:um.buttonLeft,onClick:n}),ie.jsx(kae,{}),ie.jsx(Ri,{theme:"light",text:s("callToAction.chat"),size:14,className:um.buttonRight,onClick:i})]})]})}const wl={},Zp="abi/5.7.0",Ut=new me(Zp),ac={};let gM={calldata:!0,memory:!0,storage:!0},Wae={calldata:!0,memory:!0};function fm(r,e){if(r==="bytes"||r==="string"){if(gM[e])return!0}else if(r==="address"){if(e==="payable")return!0}else if((r.indexOf("[")>=0||r==="tuple")&&Wae[e])return!0;return(gM[e]||e==="payable")&&Ut.throwArgumentError("invalid modifier","name",e),!1}function Zae(r,e){let t=r;function n(a){Ut.throwArgumentError(`unexpected character at position ${a}`,"param",r)}r=r.replace(/\s/g," ");function i(a){let A={type:"",name:"",parent:a,state:{allowType:!0}};return e&&(A.indexed=!1),A}let s={type:"",name:"",state:{allowType:!0}},o=s;for(let a=0;a<r.length;a++){let A=r[a];switch(A){case"(":o.state.allowType&&o.type===""?o.type="tuple":o.state.allowParams||n(a),o.state.allowType=!1,o.type=Au(o.type),o.components=[i(o)],o=o.components[0];break;case")":delete o.state,o.name==="indexed"&&(e||n(a),o.indexed=!0,o.name=""),fm(o.type,o.name)&&(o.name=""),o.type=Au(o.type);let l=o;o=o.parent,o||n(a),delete l.parent,o.state.allowParams=!1,o.state.allowName=!0,o.state.allowArray=!0;break;case",":delete o.state,o.name==="indexed"&&(e||n(a),o.indexed=!0,o.name=""),fm(o.type,o.name)&&(o.name=""),o.type=Au(o.type);let c=i(o.parent);o.parent.components.push(c),delete o.parent,o=c;break;case" ":o.state.allowType&&o.type!==""&&(o.type=Au(o.type),delete o.state.allowType,o.state.allowName=!0,o.state.allowParams=!0),o.state.allowName&&o.name!==""&&(o.name==="indexed"?(e||n(a),o.indexed&&n(a),o.indexed=!0,o.name=""):fm(o.type,o.name)?o.name="":o.state.allowName=!1);break;case"[":o.state.allowArray||n(a),o.type+=A,o.state.allowArray=!1,o.state.allowName=!1,o.state.readArray=!0;break;case"]":o.state.readArray||n(a),o.type+=A,o.state.readArray=!1,o.state.allowArray=!0,o.state.allowName=!0;break;default:o.state.allowType?(o.type+=A,o.state.allowParams=!0,o.state.allowArray=!0):o.state.allowName?(o.name+=A,delete o.state.allowArray):o.state.readArray?o.type+=A:n(a)}}return o.parent&&Ut.throwArgumentError("unexpected eof","param",r),delete s.state,o.name==="indexed"?(e||n(t.length-7),o.indexed&&n(t.length-7),o.indexed=!0,o.name=""):fm(o.type,o.name)&&(o.name=""),s.type=Au(s.type),s}function n0(r,e){for(let t in e)_e(r,t,e[t])}const Rt=Object.freeze({sighash:"sighash",minimal:"minimal",full:"full",json:"json"}),Pae=new RegExp(/^(.*)\[([0-9]*)\]$/);class ir{constructor(e,t){e!==ac&&Ut.throwError("use fromString",me.errors.UNSUPPORTED_OPERATION,{operation:"new ParamType()"}),n0(this,t);let n=this.type.match(Pae);n?n0(this,{arrayLength:parseInt(n[2]||"-1"),arrayChildren:ir.fromObject({type:n[1],components:this.components}),baseType:"array"}):n0(this,{arrayLength:null,arrayChildren:null,baseType:this.components!=null?"tuple":this.type}),this._isParamType=!0,Object.freeze(this)}format(e){if(e||(e=Rt.sighash),Rt[e]||Ut.throwArgumentError("invalid format type","format",e),e===Rt.json){let n={type:this.baseType==="tuple"?"tuple":this.type,name:this.name||void 0};return typeof this.indexed=="boolean"&&(n.indexed=this.indexed),this.components&&(n.components=this.components.map(i=>JSON.parse(i.format(e)))),JSON.stringify(n)}let t="";return this.baseType==="array"?(t+=this.arrayChildren.format(e),t+="["+(this.arrayLength<0?"":String(this.arrayLength))+"]"):this.baseType==="tuple"?(e!==Rt.sighash&&(t+=this.type),t+="("+this.components.map(n=>n.format(e)).join(e===Rt.full?", ":",")+")"):t+=this.type,e!==Rt.sighash&&(this.indexed===!0&&(t+=" indexed"),e===Rt.full&&this.name&&(t+=" "+this.name)),t}static from(e,t){return typeof e=="string"?ir.fromString(e,t):ir.fromObject(e)}static fromObject(e){return ir.isParamType(e)?e:new ir(ac,{name:e.name||null,type:Au(e.type),indexed:e.indexed==null?null:!!e.indexed,components:e.components?e.components.map(ir.fromObject):null})}static fromString(e,t){function n(i){return ir.fromObject({name:i.name,type:i.type,indexed:i.indexed,components:i.components})}return n(Zae(e,!!t))}static isParamType(e){return!!(e!=null&&e._isParamType)}}function fp(r,e){return Gae(r).map(t=>ir.fromString(t,e))}class Ua{constructor(e,t){e!==ac&&Ut.throwError("use a static from method",me.errors.UNSUPPORTED_OPERATION,{operation:"new Fragment()"}),n0(this,t),this._isFragment=!0,Object.freeze(this)}static from(e){return Ua.isFragment(e)?e:typeof e=="string"?Ua.fromString(e):Ua.fromObject(e)}static fromObject(e){if(Ua.isFragment(e))return e;switch(e.type){case"function":return Co.fromObject(e);case"event":return va.fromObject(e);case"constructor":return yo.fromObject(e);case"error":return mA.fromObject(e);case"fallback":case"receive":return null}return Ut.throwArgumentError("invalid fragment object","value",e)}static fromString(e){return e=e.replace(/\s/g," "),e=e.replace(/\(/g," (").replace(/\)/g,") ").replace(/\s+/g," "),e=e.trim(),e.split(" ")[0]==="event"?va.fromString(e.substring(5).trim()):e.split(" ")[0]==="function"?Co.fromString(e.substring(8).trim()):e.split("(")[0].trim()==="constructor"?yo.fromString(e.trim()):e.split(" ")[0]==="error"?mA.fromString(e.substring(5).trim()):Ut.throwArgumentError("unsupported fragment","value",e)}static isFragment(e){return!!(e&&e._isFragment)}}class va extends Ua{format(e){if(e||(e=Rt.sighash),Rt[e]||Ut.throwArgumentError("invalid format type","format",e),e===Rt.json)return JSON.stringify({type:"event",anonymous:this.anonymous,name:this.name,inputs:this.inputs.map(n=>JSON.parse(n.format(e)))});let t="";return e!==Rt.sighash&&(t+="event "),t+=this.name+"("+this.inputs.map(n=>n.format(e)).join(e===Rt.full?", ":",")+") ",e!==Rt.sighash&&this.anonymous&&(t+="anonymous "),t.trim()}static from(e){return typeof e=="string"?va.fromString(e):va.fromObject(e)}static fromObject(e){if(va.isEventFragment(e))return e;e.type!=="event"&&Ut.throwArgumentError("invalid event object","value",e);const t={name:dp(e.name),anonymous:e.anonymous,inputs:e.inputs?e.inputs.map(ir.fromObject):[],type:"event"};return new va(ac,t)}static fromString(e){let t=e.match(hp);t||Ut.throwArgumentError("invalid event string","value",e);let n=!1;return t[3].split(" ").forEach(i=>{switch(i.trim()){case"anonymous":n=!0;break;case"":break;default:Ut.warn("unknown modifier: "+i)}}),va.fromObject({name:t[1].trim(),anonymous:n,inputs:fp(t[2],!0),type:"event"})}static isEventFragment(e){return e&&e._isFragment&&e.type==="event"}}function JL(r,e){e.gas=null;let t=r.split("@");return t.length!==1?(t.length>2&&Ut.throwArgumentError("invalid human-readable ABI signature","value",r),t[1].match(/^[0-9]+$/)||Ut.throwArgumentError("invalid human-readable ABI signature gas","value",r),e.gas=De.from(t[1]),t[0]):r}function GL(r,e){e.constant=!1,e.payable=!1,e.stateMutability="nonpayable",r.split(" ").forEach(t=>{switch(t.trim()){case"constant":e.constant=!0;break;case"payable":e.payable=!0,e.stateMutability="payable";break;case"nonpayable":e.payable=!1,e.stateMutability="nonpayable";break;case"pure":e.constant=!0,e.stateMutability="pure";break;case"view":e.constant=!0,e.stateMutability="view";break;case"external":case"public":case"":break;default:console.log("unknown modifier: "+t)}})}function OL(r){let e={constant:!1,payable:!0,stateMutability:"payable"};return r.stateMutability!=null?(e.stateMutability=r.stateMutability,e.constant=e.stateMutability==="view"||e.stateMutability==="pure",r.constant!=null&&!!r.constant!==e.constant&&Ut.throwArgumentError("cannot have constant function with mutability "+e.stateMutability,"value",r),e.payable=e.stateMutability==="payable",r.payable!=null&&!!r.payable!==e.payable&&Ut.throwArgumentError("cannot have payable function with mutability "+e.stateMutability,"value",r)):r.payable!=null?(e.payable=!!r.payable,r.constant==null&&!e.payable&&r.type!=="constructor"&&Ut.throwArgumentError("unable to determine stateMutability","value",r),e.constant=!!r.constant,e.constant?e.stateMutability="view":e.stateMutability=e.payable?"payable":"nonpayable",e.payable&&e.constant&&Ut.throwArgumentError("cannot have constant payable function","value",r)):r.constant!=null?(e.constant=!!r.constant,e.payable=!e.constant,e.stateMutability=e.constant?"view":"payable"):r.type!=="constructor"&&Ut.throwArgumentError("unable to determine stateMutability","value",r),e}class yo extends Ua{format(e){if(e||(e=Rt.sighash),Rt[e]||Ut.throwArgumentError("invalid format type","format",e),e===Rt.json)return JSON.stringify({type:"constructor",stateMutability:this.stateMutability!=="nonpayable"?this.stateMutability:void 0,payable:this.payable,gas:this.gas?this.gas.toNumber():void 0,inputs:this.inputs.map(n=>JSON.parse(n.format(e)))});e===Rt.sighash&&Ut.throwError("cannot format a constructor for sighash",me.errors.UNSUPPORTED_OPERATION,{operation:"format(sighash)"});let t="constructor("+this.inputs.map(n=>n.format(e)).join(e===Rt.full?", ":",")+") ";return this.stateMutability&&this.stateMutability!=="nonpayable"&&(t+=this.stateMutability+" "),t.trim()}static from(e){return typeof e=="string"?yo.fromString(e):yo.fromObject(e)}static fromObject(e){if(yo.isConstructorFragment(e))return e;e.type!=="constructor"&&Ut.throwArgumentError("invalid constructor object","value",e);let t=OL(e);t.constant&&Ut.throwArgumentError("constructor cannot be constant","value",e);const n={name:null,type:e.type,inputs:e.inputs?e.inputs.map(ir.fromObject):[],payable:t.payable,stateMutability:t.stateMutability,gas:e.gas?De.from(e.gas):null};return new yo(ac,n)}static fromString(e){let t={type:"constructor"};e=JL(e,t);let n=e.match(hp);return(!n||n[1].trim()!=="constructor")&&Ut.throwArgumentError("invalid constructor string","value",e),t.inputs=fp(n[2].trim(),!1),GL(n[3].trim(),t),yo.fromObject(t)}static isConstructorFragment(e){return e&&e._isFragment&&e.type==="constructor"}}class Co extends yo{format(e){if(e||(e=Rt.sighash),Rt[e]||Ut.throwArgumentError("invalid format type","format",e),e===Rt.json)return JSON.stringify({type:"function",name:this.name,constant:this.constant,stateMutability:this.stateMutability!=="nonpayable"?this.stateMutability:void 0,payable:this.payable,gas:this.gas?this.gas.toNumber():void 0,inputs:this.inputs.map(n=>JSON.parse(n.format(e))),outputs:this.outputs.map(n=>JSON.parse(n.format(e)))});let t="";return e!==Rt.sighash&&(t+="function "),t+=this.name+"("+this.inputs.map(n=>n.format(e)).join(e===Rt.full?", ":",")+") ",e!==Rt.sighash&&(this.stateMutability?this.stateMutability!=="nonpayable"&&(t+=this.stateMutability+" "):this.constant&&(t+="view "),this.outputs&&this.outputs.length&&(t+="returns ("+this.outputs.map(n=>n.format(e)).join(", ")+") "),this.gas!=null&&(t+="@"+this.gas.toString()+" ")),t.trim()}static from(e){return typeof e=="string"?Co.fromString(e):Co.fromObject(e)}static fromObject(e){if(Co.isFunctionFragment(e))return e;e.type!=="function"&&Ut.throwArgumentError("invalid function object","value",e);let t=OL(e);const n={type:e.type,name:dp(e.name),constant:t.constant,inputs:e.inputs?e.inputs.map(ir.fromObject):[],outputs:e.outputs?e.outputs.map(ir.fromObject):[],payable:t.payable,stateMutability:t.stateMutability,gas:e.gas?De.from(e.gas):null};return new Co(ac,n)}static fromString(e){let t={type:"function"};e=JL(e,t);let n=e.split(" returns ");n.length>2&&Ut.throwArgumentError("invalid function string","value",e);let i=n[0].match(hp);if(i||Ut.throwArgumentError("invalid function signature","value",e),t.name=i[1].trim(),t.name&&dp(t.name),t.inputs=fp(i[2],!1),GL(i[3].trim(),t),n.length>1){let s=n[1].match(hp);(s[1].trim()!=""||s[3].trim()!="")&&Ut.throwArgumentError("unexpected tokens","value",e),t.outputs=fp(s[2],!1)}else t.outputs=[];return Co.fromObject(t)}static isFunctionFragment(e){return e&&e._isFragment&&e.type==="function"}}function mM(r){const e=r.format();return(e==="Error(string)"||e==="Panic(uint256)")&&Ut.throwArgumentError(`cannot specify user defined ${e} error`,"fragment",r),r}class mA extends Ua{format(e){if(e||(e=Rt.sighash),Rt[e]||Ut.throwArgumentError("invalid format type","format",e),e===Rt.json)return JSON.stringify({type:"error",name:this.name,inputs:this.inputs.map(n=>JSON.parse(n.format(e)))});let t="";return e!==Rt.sighash&&(t+="error "),t+=this.name+"("+this.inputs.map(n=>n.format(e)).join(e===Rt.full?", ":",")+") ",t.trim()}static from(e){return typeof e=="string"?mA.fromString(e):mA.fromObject(e)}static fromObject(e){if(mA.isErrorFragment(e))return e;e.type!=="error"&&Ut.throwArgumentError("invalid error object","value",e);const t={type:e.type,name:dp(e.name),inputs:e.inputs?e.inputs.map(ir.fromObject):[]};return mM(new mA(ac,t))}static fromString(e){let t={type:"error"},n=e.match(hp);return n||Ut.throwArgumentError("invalid error signature","value",e),t.name=n[1].trim(),t.name&&dp(t.name),t.inputs=fp(n[2],!1),mM(mA.fromObject(t))}static isErrorFragment(e){return e&&e._isFragment&&e.type==="error"}}function Au(r){return r.match(/^uint($|[^1-9])/)?r="uint256"+r.substring(4):r.match(/^int($|[^1-9])/)&&(r="int256"+r.substring(3)),r}const Jae=new RegExp("^[a-zA-Z$_][a-zA-Z0-9$_]*$");function dp(r){return(!r||!r.match(Jae))&&Ut.throwArgumentError(`invalid identifier "${r}"`,"value",r),r}const hp=new RegExp("^([^)(]*)\\((.*)\\)([^)(]*)$");function Gae(r){r=r.trim();let e=[],t="",n=0;for(let i=0;i<r.length;i++){let s=r[i];s===","&&n===0?(e.push(t),t=""):(t+=s,s==="("?n++:s===")"&&(n--,n===-1&&Ut.throwArgumentError("unbalanced parenthesis","value",r)))}return t&&e.push(t),e}const pQ=new me(Zp);function Oae(r){const e=[],t=function(n,i){if(Array.isArray(i))for(let s in i){const o=n.slice();o.push(s);try{t(o,i[s])}catch(a){e.push({path:o,error:a})}}};return t([],r),e}class Ga{constructor(e,t,n,i){this.name=e,this.type=t,this.localName=n,this.dynamic=i}_throwError(e,t){pQ.throwArgumentError(e,this.localName,t)}}class tU{constructor(e){_e(this,"wordSize",e||32),this._data=[],this._dataLength=0,this._padding=new Uint8Array(e)}get data(){return $r(this._data)}get length(){return this._dataLength}_writeData(e){return this._data.push(e),this._dataLength+=e.length,e.length}appendWriter(e){return this._writeData(Qi(e._data))}writeBytes(e){let t=nt(e);const n=t.length%this.wordSize;return n&&(t=Qi([t,this._padding.slice(n)])),this._writeData(t)}_getValue(e){let t=nt(De.from(e));return t.length>this.wordSize&&pQ.throwError("value out-of-bounds",me.errors.BUFFER_OVERRUN,{length:this.wordSize,offset:t.length}),t.length%this.wordSize&&(t=Qi([this._padding.slice(t.length%this.wordSize),t])),t}writeValue(e){return this._writeData(this._getValue(e))}writeUpdatableValue(){const e=this._data.length;return this._data.push(this._padding),this._dataLength+=this.wordSize,t=>{this._data[e]=this._getValue(t)}}}class FB{constructor(e,t,n,i){_e(this,"_data",nt(e)),_e(this,"wordSize",t||32),_e(this,"_coerceFunc",n),_e(this,"allowLoose",i),this._offset=0}get data(){return Ke(this._data)}get consumed(){return this._offset}static coerce(e,t){let n=e.match("^u?int([0-9]+)$");return n&&parseInt(n[1])<=48&&(t=t.toNumber()),t}coerce(e,t){return this._coerceFunc?this._coerceFunc(e,t):FB.coerce(e,t)}_peekBytes(e,t,n){let i=Math.ceil(t/this.wordSize)*this.wordSize;return this._offset+i>this._data.length&&(this.allowLoose&&n&&this._offset+t<=this._data.length?i=t:pQ.throwError("data out-of-bounds",me.errors.BUFFER_OVERRUN,{length:this._data.length,offset:this._offset+i})),this._data.slice(this._offset,this._offset+i)}subReader(e){return new FB(this._data.slice(this._offset+e),this.wordSize,this._coerceFunc,this.allowLoose)}readBytes(e,t){let n=this._peekBytes(0,e,!!t);return this._offset+=n.length,n.slice(0,e)}readValue(){return De.from(this.readBytes(this.wordSize))}}class Hae extends Ga{constructor(e){super("address","address",e,!1)}defaultValue(){return"0x0000000000000000000000000000000000000000"}encode(e,t){try{t=dr(t)}catch(n){this._throwError(n.message,t)}return e.writeValue(t)}decode(e){return dr(yn(e.readValue().toHexString(),20))}}class zae extends Ga{constructor(e){super(e.name,e.type,void 0,e.dynamic),this.coder=e}defaultValue(){return this.coder.defaultValue()}encode(e,t){return this.coder.encode(e,t)}decode(e){return this.coder.decode(e)}}const Ru=new me(Zp);function HL(r,e,t){let n=null;if(Array.isArray(t))n=t;else if(t&&typeof t=="object"){let A={};n=e.map(l=>{const c=l.localName;return c||Ru.throwError("cannot encode object for signature with missing names",me.errors.INVALID_ARGUMENT,{argument:"values",coder:l,value:t}),A[c]&&Ru.throwError("cannot encode object for signature with duplicate names",me.errors.INVALID_ARGUMENT,{argument:"values",coder:l,value:t}),A[c]=!0,t[c]})}else Ru.throwArgumentError("invalid tuple value","tuple",t);e.length!==n.length&&Ru.throwArgumentError("types/value length mismatch","tuple",t);let i=new tU(r.wordSize),s=new tU(r.wordSize),o=[];e.forEach((A,l)=>{let c=n[l];if(A.dynamic){let u=s.length;A.encode(s,c);let f=i.writeUpdatableValue();o.push(d=>{f(d+u)})}else A.encode(i,c)}),o.forEach(A=>{A(i.length)});let a=r.appendWriter(i);return a+=r.appendWriter(s),a}function zL(r,e){let t=[],n=r.subReader(0);e.forEach(s=>{let o=null;if(s.dynamic){let a=r.readValue(),A=n.subReader(a.toNumber());try{o=s.decode(A)}catch(l){if(l.code===me.errors.BUFFER_OVERRUN)throw l;o=l,o.baseType=s.name,o.name=s.localName,o.type=s.type}}else try{o=s.decode(r)}catch(a){if(a.code===me.errors.BUFFER_OVERRUN)throw a;o=a,o.baseType=s.name,o.name=s.localName,o.type=s.type}o!=null&&t.push(o)});const i=e.reduce((s,o)=>{const a=o.localName;return a&&(s[a]||(s[a]=0),s[a]++),s},{});e.forEach((s,o)=>{let a=s.localName;if(!a||i[a]!==1||(a==="length"&&(a="_length"),t[a]!=null))return;const A=t[o];A instanceof Error?Object.defineProperty(t,a,{enumerable:!0,get:()=>{throw A}}):t[a]=A});for(let s=0;s<t.length;s++){const o=t[s];o instanceof Error&&Object.defineProperty(t,s,{enumerable:!0,get:()=>{throw o}})}return Object.freeze(t)}class Xae extends Ga{constructor(e,t,n){const i=e.type+"["+(t>=0?t:"")+"]",s=t===-1||e.dynamic;super("array",i,n,s),this.coder=e,this.length=t}defaultValue(){const e=this.coder.defaultValue(),t=[];for(let n=0;n<this.length;n++)t.push(e);return t}encode(e,t){Array.isArray(t)||this._throwError("expected array value",t);let n=this.length;n===-1&&(n=t.length,e.writeValue(t.length)),Ru.checkArgumentCount(t.length,n,"coder array"+(this.localName?" "+this.localName:""));let i=[];for(let s=0;s<t.length;s++)i.push(this.coder);return HL(e,i,t)}decode(e){let t=this.length;t===-1&&(t=e.readValue().toNumber(),t*32>e._data.length&&Ru.throwError("insufficient data length",me.errors.BUFFER_OVERRUN,{length:e._data.length,count:t}));let n=[];for(let i=0;i<t;i++)n.push(new zae(this.coder));return e.coerce(this.name,zL(e,n))}}class Yae extends Ga{constructor(e){super("bool","bool",e,!1)}defaultValue(){return!1}encode(e,t){return e.writeValue(t?1:0)}decode(e){return e.coerce(this.type,!e.readValue().isZero())}}class XL extends Ga{constructor(e,t){super(e,e,t,!0)}defaultValue(){return"0x"}encode(e,t){t=nt(t);let n=e.writeValue(t.length);return n+=e.writeBytes(t),n}decode(e){return e.readBytes(e.readValue().toNumber(),!0)}}class Kae extends XL{constructor(e){super("bytes",e)}decode(e){return e.coerce(this.name,Ke(super.decode(e)))}}class jae extends Ga{constructor(e,t){let n="bytes"+String(e);super(n,n,t,!1),this.size=e}defaultValue(){return"0x0000000000000000000000000000000000000000000000000000000000000000".substring(0,2+this.size*2)}encode(e,t){let n=nt(t);return n.length!==this.size&&this._throwError("incorrect data length",t),e.writeBytes(n)}decode(e){return e.coerce(this.name,Ke(e.readBytes(this.size)))}}class qae extends Ga{constructor(e){super("null","",e,!1)}defaultValue(){return null}encode(e,t){return t!=null&&this._throwError("not null",t),e.writeBytes([])}decode(e){return e.readBytes(0),e.coerce(this.name,null)}}class $ae extends Ga{constructor(e,t,n){const i=(t?"int":"uint")+e*8;super(i,i,n,!1),this.size=e,this.signed=t}defaultValue(){return 0}encode(e,t){let n=De.from(t),i=uW.mask(e.wordSize*8);if(this.signed){let s=i.mask(this.size*8-1);(n.gt(s)||n.lt(s.add(cW).mul(lW)))&&this._throwError("value out-of-bounds",t)}else(n.lt(n2)||n.gt(i.mask(this.size*8)))&&this._throwError("value out-of-bounds",t);return n=n.toTwos(this.size*8).mask(this.size*8),this.signed&&(n=n.fromTwos(this.size*8).toTwos(8*e.wordSize)),e.writeValue(n)}decode(e){let t=e.readValue().mask(this.size*8);return this.signed&&(t=t.fromTwos(this.size*8)),e.coerce(this.name,t)}}class eAe extends XL{constructor(e){super("string",e)}defaultValue(){return""}encode(e,t){return super.encode(e,Mo(t))}decode(e){return Cp(super.decode(e))}}class dm extends Ga{constructor(e,t){let n=!1;const i=[];e.forEach(o=>{o.dynamic&&(n=!0),i.push(o.type)});const s="tuple("+i.join(",")+")";super("tuple",s,t,n),this.coders=e}defaultValue(){const e=[];this.coders.forEach(n=>{e.push(n.defaultValue())});const t=this.coders.reduce((n,i)=>{const s=i.localName;return s&&(n[s]||(n[s]=0),n[s]++),n},{});return this.coders.forEach((n,i)=>{let s=n.localName;!s||t[s]!==1||(s==="length"&&(s="_length"),e[s]==null&&(e[s]=e[i]))}),Object.freeze(e)}encode(e,t){return HL(e,this.coders,t)}decode(e){return e.coerce(this.name,zL(e,this.coders))}}const hm=new me(Zp),tAe=new RegExp(/^bytes([0-9]*)$/),nAe=new RegExp(/^(u?int)([0-9]*)$/);class rAe{constructor(e){_e(this,"coerceFunc",e||null)}_getCoder(e){switch(e.baseType){case"address":return new Hae(e.name);case"bool":return new Yae(e.name);case"string":return new eAe(e.name);case"bytes":return new Kae(e.name);case"array":return new Xae(this._getCoder(e.arrayChildren),e.arrayLength,e.name);case"tuple":return new dm((e.components||[]).map(n=>this._getCoder(n)),e.name);case"":return new qae(e.name)}let t=e.type.match(nAe);if(t){let n=parseInt(t[2]||"256");return(n===0||n>256||n%8!==0)&&hm.throwArgumentError("invalid "+t[1]+" bit length","param",e),new $ae(n/8,t[1]==="int",e.name)}if(t=e.type.match(tAe),t){let n=parseInt(t[1]);return(n===0||n>32)&&hm.throwArgumentError("invalid bytes length","param",e),new jae(n,e.name)}return hm.throwArgumentError("invalid type","type",e.type)}_getWordSize(){return 32}_getReader(e,t){return new FB(e,this._getWordSize(),this.coerceFunc,t)}_getWriter(){return new tU(this._getWordSize())}getDefaultValue(e){const t=e.map(i=>this._getCoder(ir.from(i)));return new dm(t,"_").defaultValue()}encode(e,t){e.length!==t.length&&hm.throwError("types/values length mismatch",me.errors.INVALID_ARGUMENT,{count:{types:e.length,values:t.length},value:{types:e,values:t}});const n=e.map(o=>this._getCoder(ir.from(o))),i=new dm(n,"_"),s=this._getWriter();return i.encode(s,t),s.data}decode(e,t,n){const i=e.map(o=>this._getCoder(ir.from(o)));return new dm(i,"_").decode(this._getReader(nt(t),n))}}const iAe=new rAe,sn=new me(Zp);class sAe extends yp{}class oAe extends yp{}class aAe extends yp{}class nU extends yp{static isIndexed(e){return!!(e&&e._isIndexed)}}const AAe={"0x08c379a0":{signature:"Error(string)",name:"Error",inputs:["string"],reason:!0},"0x4e487b71":{signature:"Panic(uint256)",name:"Panic",inputs:["uint256"]}};function BM(r,e){const t=new Error(`deferred error during ABI decoding triggered accessing ${r}`);return t.error=e,t}class vM{constructor(e){let t=[];typeof e=="string"?t=JSON.parse(e):t=e,_e(this,"fragments",t.map(n=>Ua.from(n)).filter(n=>n!=null)),_e(this,"_abiCoder",Fo(new.target,"getAbiCoder")()),_e(this,"functions",{}),_e(this,"errors",{}),_e(this,"events",{}),_e(this,"structs",{}),this.fragments.forEach(n=>{let i=null;switch(n.type){case"constructor":if(this.deploy){sn.warn("duplicate definition - constructor");return}_e(this,"deploy",n);return;case"function":i=this.functions;break;case"event":i=this.events;break;case"error":i=this.errors;break;default:return}let s=n.format();if(i[s]){sn.warn("duplicate definition - "+s);return}i[s]=n}),this.deploy||_e(this,"deploy",yo.from({payable:!1,type:"constructor"})),_e(this,"_isInterface",!0)}format(e){e||(e=Rt.full),e===Rt.sighash&&sn.throwArgumentError("interface does not support formatting sighash","format",e);const t=this.fragments.map(n=>n.format(e));return e===Rt.json?JSON.stringify(t.map(n=>JSON.parse(n))):t}static getAbiCoder(){return iAe}static getAddress(e){return dr(e)}static getSighash(e){return yr(lu(e.format()),0,4)}static getEventTopic(e){return lu(e.format())}getFunction(e){if(Mt(e)){for(const n in this.functions)if(e===this.getSighash(n))return this.functions[n];sn.throwArgumentError("no matching function","sighash",e)}if(e.indexOf("(")===-1){const n=e.trim(),i=Object.keys(this.functions).filter(s=>s.split("(")[0]===n);return i.length===0?sn.throwArgumentError("no matching function","name",n):i.length>1&&sn.throwArgumentError("multiple matching functions","name",n),this.functions[i[0]]}const t=this.functions[Co.fromString(e).format()];return t||sn.throwArgumentError("no matching function","signature",e),t}getEvent(e){if(Mt(e)){const n=e.toLowerCase();for(const i in this.events)if(n===this.getEventTopic(i))return this.events[i];sn.throwArgumentError("no matching event","topichash",n)}if(e.indexOf("(")===-1){const n=e.trim(),i=Object.keys(this.events).filter(s=>s.split("(")[0]===n);return i.length===0?sn.throwArgumentError("no matching event","name",n):i.length>1&&sn.throwArgumentError("multiple matching events","name",n),this.events[i[0]]}const t=this.events[va.fromString(e).format()];return t||sn.throwArgumentError("no matching event","signature",e),t}getError(e){if(Mt(e)){const n=Fo(this.constructor,"getSighash");for(const i in this.errors){const s=this.errors[i];if(e===n(s))return this.errors[i]}sn.throwArgumentError("no matching error","sighash",e)}if(e.indexOf("(")===-1){const n=e.trim(),i=Object.keys(this.errors).filter(s=>s.split("(")[0]===n);return i.length===0?sn.throwArgumentError("no matching error","name",n):i.length>1&&sn.throwArgumentError("multiple matching errors","name",n),this.errors[i[0]]}const t=this.errors[Co.fromString(e).format()];return t||sn.throwArgumentError("no matching error","signature",e),t}getSighash(e){if(typeof e=="string")try{e=this.getFunction(e)}catch(t){try{e=this.getError(e)}catch{throw t}}return Fo(this.constructor,"getSighash")(e)}getEventTopic(e){return typeof e=="string"&&(e=this.getEvent(e)),Fo(this.constructor,"getEventTopic")(e)}_decodeParams(e,t){return this._abiCoder.decode(e,t)}_encodeParams(e,t){return this._abiCoder.encode(e,t)}encodeDeploy(e){return this._encodeParams(this.deploy.inputs,e||[])}decodeErrorResult(e,t){typeof e=="string"&&(e=this.getError(e));const n=nt(t);return Ke(n.slice(0,4))!==this.getSighash(e)&&sn.throwArgumentError(`data signature does not match error ${e.name}.`,"data",Ke(n)),this._decodeParams(e.inputs,n.slice(4))}encodeErrorResult(e,t){return typeof e=="string"&&(e=this.getError(e)),Ke(Qi([this.getSighash(e),this._encodeParams(e.inputs,t||[])]))}decodeFunctionData(e,t){typeof e=="string"&&(e=this.getFunction(e));const n=nt(t);return Ke(n.slice(0,4))!==this.getSighash(e)&&sn.throwArgumentError(`data signature does not match function ${e.name}.`,"data",Ke(n)),this._decodeParams(e.inputs,n.slice(4))}encodeFunctionData(e,t){return typeof e=="string"&&(e=this.getFunction(e)),Ke(Qi([this.getSighash(e),this._encodeParams(e.inputs,t||[])]))}decodeFunctionResult(e,t){typeof e=="string"&&(e=this.getFunction(e));let n=nt(t),i=null,s="",o=null,a=null,A=null;switch(n.length%this._abiCoder._getWordSize()){case 0:try{return this._abiCoder.decode(e.outputs,n)}catch{}break;case 4:{const l=Ke(n.slice(0,4)),c=AAe[l];if(c)o=this._abiCoder.decode(c.inputs,n.slice(4)),a=c.name,A=c.signature,c.reason&&(i=o[0]),a==="Error"?s=`; VM Exception while processing transaction: reverted with reason string ${JSON.stringify(o[0])}`:a==="Panic"&&(s=`; VM Exception while processing transaction: reverted with panic code ${o[0]}`);else try{const u=this.getError(l);o=this._abiCoder.decode(u.inputs,n.slice(4)),a=u.name,A=u.format()}catch{}break}}return sn.throwError("call revert exception"+s,me.errors.CALL_EXCEPTION,{method:e.format(),data:Ke(t),errorArgs:o,errorName:a,errorSignature:A,reason:i})}encodeFunctionResult(e,t){return typeof e=="string"&&(e=this.getFunction(e)),Ke(this._abiCoder.encode(e.outputs,t||[]))}encodeFilterTopics(e,t){typeof e=="string"&&(e=this.getEvent(e)),t.length>e.inputs.length&&sn.throwError("too many arguments for "+e.format(),me.errors.UNEXPECTED_ARGUMENT,{argument:"values",value:t});let n=[];e.anonymous||n.push(this.getEventTopic(e));const i=(s,o)=>s.type==="string"?lu(o):s.type==="bytes"?kn(Ke(o)):(s.type==="bool"&&typeof o=="boolean"&&(o=o?"0x01":"0x00"),s.type.match(/^u?int/)&&(o=De.from(o).toHexString()),s.type==="address"&&this._abiCoder.encode(["address"],[o]),yn(Ke(o),32));for(t.forEach((s,o)=>{let a=e.inputs[o];if(!a.indexed){s!=null&&sn.throwArgumentError("cannot filter non-indexed parameters; must be null","contract."+a.name,s);return}s==null?n.push(null):a.baseType==="array"||a.baseType==="tuple"?sn.throwArgumentError("filtering with tuples or arrays not supported","contract."+a.name,s):Array.isArray(s)?n.push(s.map(A=>i(a,A))):n.push(i(a,s))});n.length&&n[n.length-1]===null;)n.pop();return n}encodeEventLog(e,t){typeof e=="string"&&(e=this.getEvent(e));const n=[],i=[],s=[];return e.anonymous||n.push(this.getEventTopic(e)),t.length!==e.inputs.length&&sn.throwArgumentError("event arguments/values mismatch","values",t),e.inputs.forEach((o,a)=>{const A=t[a];if(o.indexed)if(o.type==="string")n.push(lu(A));else if(o.type==="bytes")n.push(kn(A));else{if(o.baseType==="tuple"||o.baseType==="array")throw new Error("not implemented");n.push(this._abiCoder.encode([o.type],[A]))}else i.push(o),s.push(A)}),{data:this._abiCoder.encode(i,s),topics:n}}decodeEventLog(e,t,n){if(typeof e=="string"&&(e=this.getEvent(e)),n!=null&&!e.anonymous){let f=this.getEventTopic(e);(!Mt(n[0],32)||n[0].toLowerCase()!==f)&&sn.throwError("fragment/topic mismatch",me.errors.INVALID_ARGUMENT,{argument:"topics[0]",expected:f,value:n[0]}),n=n.slice(1)}let i=[],s=[],o=[];e.inputs.forEach((f,d)=>{f.indexed?f.type==="string"||f.type==="bytes"||f.baseType==="tuple"||f.baseType==="array"?(i.push(ir.fromObject({type:"bytes32",name:f.name})),o.push(!0)):(i.push(f),o.push(!1)):(s.push(f),o.push(!1))});let a=n!=null?this._abiCoder.decode(i,Qi(n)):null,A=this._abiCoder.decode(s,t,!0),l=[],c=0,u=0;e.inputs.forEach((f,d)=>{if(f.indexed)if(a==null)l[d]=new nU({_isIndexed:!0,hash:null});else if(o[d])l[d]=new nU({_isIndexed:!0,hash:a[u++]});else try{l[d]=a[u++]}catch(p){l[d]=p}else try{l[d]=A[c++]}catch(p){l[d]=p}if(f.name&&l[f.name]==null){const p=l[d];p instanceof Error?Object.defineProperty(l,f.name,{enumerable:!0,get:()=>{throw BM(`property ${JSON.stringify(f.name)}`,p)}}):l[f.name]=p}});for(let f=0;f<l.length;f++){const d=l[f];d instanceof Error&&Object.defineProperty(l,f,{enumerable:!0,get:()=>{throw BM(`index ${f}`,d)}})}return Object.freeze(l)}parseTransaction(e){let t=this.getFunction(e.data.substring(0,10).toLowerCase());return t?new oAe({args:this._abiCoder.decode(t.inputs,"0x"+e.data.substring(10)),functionFragment:t,name:t.name,signature:t.format(),sighash:this.getSighash(t),value:De.from(e.value||"0")}):null}parseLog(e){let t=this.getEvent(e.topics[0]);return!t||t.anonymous?null:new sAe({eventFragment:t,name:t.name,signature:t.format(),topic:this.getEventTopic(t),args:this.decodeEventLog(t,e.data,e.topics)})}parseError(e){const t=Ke(e);let n=this.getError(t.substring(0,10).toLowerCase());return n?new aAe({args:this._abiCoder.decode(n.inputs,"0x"+t.substring(10)),errorFragment:n,name:n.name,signature:n.format(),sighash:this.getSighash(n)}):null}static isInterface(e){return!!(e&&e._isInterface)}}const lAe="contracts/5.7.0";var Ac=globalThis&&globalThis.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(c){try{l(n.next(c))}catch(u){o(u)}}function A(c){try{l(n.throw(c))}catch(u){o(u)}}function l(c){c.done?s(c.value):i(c.value).then(a,A)}l((n=n.apply(r,e||[])).next())})};const Un=new me(lAe);function IB(r,e){return Ac(this,void 0,void 0,function*(){const t=yield e;typeof t!="string"&&Un.throwArgumentError("invalid address or ENS name","name",t);try{return dr(t)}catch{}r||Un.throwError("a provider or signer is needed to resolve ENS names",me.errors.UNSUPPORTED_OPERATION,{operation:"resolveName"});const n=yield r.resolveName(t);return n==null&&Un.throwArgumentError("resolver or addr is not configured for ENS name","name",t),n})}function r0(r,e,t){return Ac(this,void 0,void 0,function*(){return Array.isArray(t)?yield Promise.all(t.map((n,i)=>r0(r,Array.isArray(e)?e[i]:e[n.name],n))):t.type==="address"?yield IB(r,e):t.type==="tuple"?yield r0(r,e,t.components):t.baseType==="array"?Array.isArray(e)?yield Promise.all(e.map(n=>r0(r,n,t.arrayChildren))):Promise.reject(Un.makeError("invalid value for array",me.errors.INVALID_ARGUMENT,{argument:"value",value:e})):e})}function Vv(r,e,t){return Ac(this,void 0,void 0,function*(){let n={};t.length===e.inputs.length+1&&typeof t[t.length-1]=="object"&&(n=Yn(t.pop())),Un.checkArgumentCount(t.length,e.inputs.length,"passed to contract"),r.signer?n.from?n.from=Tn({override:IB(r.signer,n.from),signer:r.signer.getAddress()}).then(l=>Ac(this,void 0,void 0,function*(){return dr(l.signer)!==l.override&&Un.throwError("Contract with a Signer cannot override from",me.errors.UNSUPPORTED_OPERATION,{operation:"overrides.from"}),l.override})):n.from=r.signer.getAddress():n.from&&(n.from=IB(r.provider,n.from));const i=yield Tn({args:r0(r.signer||r.provider,t,e.inputs),address:r.resolvedAddress,overrides:Tn(n)||{}}),s=r.interface.encodeFunctionData(e,i.args),o={data:s,to:i.address},a=i.overrides;if(a.nonce!=null&&(o.nonce=De.from(a.nonce).toNumber()),a.gasLimit!=null&&(o.gasLimit=De.from(a.gasLimit)),a.gasPrice!=null&&(o.gasPrice=De.from(a.gasPrice)),a.maxFeePerGas!=null&&(o.maxFeePerGas=De.from(a.maxFeePerGas)),a.maxPriorityFeePerGas!=null&&(o.maxPriorityFeePerGas=De.from(a.maxPriorityFeePerGas)),a.from!=null&&(o.from=a.from),a.type!=null&&(o.type=a.type),a.accessList!=null&&(o.accessList=kf(a.accessList)),o.gasLimit==null&&e.gas!=null){let l=21e3;const c=nt(s);for(let u=0;u<c.length;u++)l+=4,c[u]&&(l+=64);o.gasLimit=De.from(e.gas).add(l)}if(a.value){const l=De.from(a.value);!l.isZero()&&!e.payable&&Un.throwError("non-payable method cannot override value",me.errors.UNSUPPORTED_OPERATION,{operation:"overrides.value",value:n.value}),o.value=l}a.customData&&(o.customData=Yn(a.customData)),a.ccipReadEnabled&&(o.ccipReadEnabled=!!a.ccipReadEnabled),delete n.nonce,delete n.gasLimit,delete n.gasPrice,delete n.from,delete n.value,delete n.type,delete n.accessList,delete n.maxFeePerGas,delete n.maxPriorityFeePerGas,delete n.customData,delete n.ccipReadEnabled;const A=Object.keys(n).filter(l=>n[l]!=null);return A.length&&Un.throwError(`cannot override ${A.map(l=>JSON.stringify(l)).join(",")}`,me.errors.UNSUPPORTED_OPERATION,{operation:"overrides",overrides:A}),o})}function cAe(r,e){return function(...t){return Vv(r,e,t)}}function uAe(r,e){const t=r.signer||r.provider;return function(...n){return Ac(this,void 0,void 0,function*(){t||Un.throwError("estimate require a provider or signer",me.errors.UNSUPPORTED_OPERATION,{operation:"estimateGas"});const i=yield Vv(r,e,n);return yield t.estimateGas(i)})}}function fAe(r,e){const t=e.wait.bind(e);e.wait=n=>t(n).then(i=>(i.events=i.logs.map(s=>{let o=Ea(s),a=null;try{a=r.interface.parseLog(s)}catch{}return a&&(o.args=a.args,o.decode=(A,l)=>r.interface.decodeEventLog(a.eventFragment,A,l),o.event=a.name,o.eventSignature=a.signature),o.removeListener=()=>r.provider,o.getBlock=()=>r.provider.getBlock(i.blockHash),o.getTransaction=()=>r.provider.getTransaction(i.transactionHash),o.getTransactionReceipt=()=>Promise.resolve(i),o}),i))}function YL(r,e,t){const n=r.signer||r.provider;return function(...i){return Ac(this,void 0,void 0,function*(){let s;if(i.length===e.inputs.length+1&&typeof i[i.length-1]=="object"){const A=Yn(i.pop());A.blockTag!=null&&(s=yield A.blockTag),delete A.blockTag,i.push(A)}r.deployTransaction!=null&&(yield r._deployed(s));const o=yield Vv(r,e,i),a=yield n.call(o,s);try{let A=r.interface.decodeFunctionResult(e,a);return t&&e.outputs.length===1&&(A=A[0]),A}catch(A){throw A.code===me.errors.CALL_EXCEPTION&&(A.address=r.address,A.args=i,A.transaction=o),A}})}}function dAe(r,e){return function(...t){return Ac(this,void 0,void 0,function*(){r.signer||Un.throwError("sending a transaction requires a signer",me.errors.UNSUPPORTED_OPERATION,{operation:"sendTransaction"}),r.deployTransaction!=null&&(yield r._deployed());const n=yield Vv(r,e,t),i=yield r.signer.sendTransaction(n);return fAe(r,i),i})}}function yM(r,e,t){return e.constant?YL(r,e,t):dAe(r,e)}function KL(r){return r.address&&(r.topics==null||r.topics.length===0)?"*":(r.address||"*")+"@"+(r.topics?r.topics.map(e=>Array.isArray(e)?e.join("|"):e).join(":"):"")}class pp{constructor(e,t){_e(this,"tag",e),_e(this,"filter",t),this._listeners=[]}addListener(e,t){this._listeners.push({listener:e,once:t})}removeListener(e){let t=!1;this._listeners=this._listeners.filter(n=>t||n.listener!==e?!0:(t=!0,!1))}removeAllListeners(){this._listeners=[]}listeners(){return this._listeners.map(e=>e.listener)}listenerCount(){return this._listeners.length}run(e){const t=this.listenerCount();return this._listeners=this._listeners.filter(n=>{const i=e.slice();return setTimeout(()=>{n.listener.apply(this,i)},0),!n.once}),t}prepareEvent(e){}getEmit(e){return[e]}}class hAe extends pp{constructor(){super("error",null)}}class CM extends pp{constructor(e,t,n,i){const s={address:e};let o=t.getEventTopic(n);i?(o!==i[0]&&Un.throwArgumentError("topic mismatch","topics",i),s.topics=i.slice()):s.topics=[o],super(KL(s),s),_e(this,"address",e),_e(this,"interface",t),_e(this,"fragment",n)}prepareEvent(e){super.prepareEvent(e),e.event=this.fragment.name,e.eventSignature=this.fragment.format(),e.decode=(t,n)=>this.interface.decodeEventLog(this.fragment,t,n);try{e.args=this.interface.decodeEventLog(this.fragment,e.data,e.topics)}catch(t){e.args=null,e.decodeError=t}}getEmit(e){const t=Oae(e.args);if(t.length)throw t[0].error;const n=(e.args||[]).slice();return n.push(e),n}}class wM extends pp{constructor(e,t){super("*",{address:e}),_e(this,"address",e),_e(this,"interface",t)}prepareEvent(e){super.prepareEvent(e);try{const t=this.interface.parseLog(e);e.event=t.name,e.eventSignature=t.signature,e.decode=(n,i)=>this.interface.decodeEventLog(t.eventFragment,n,i),e.args=t.args}catch{}}}class pAe{constructor(e,t,n){_e(this,"interface",Fo(new.target,"getInterface")(t)),n==null?(_e(this,"provider",null),_e(this,"signer",null)):Fp.isSigner(n)?(_e(this,"provider",n.provider||null),_e(this,"signer",n)):DB.isProvider(n)?(_e(this,"provider",n),_e(this,"signer",null)):Un.throwArgumentError("invalid signer or provider","signerOrProvider",n),_e(this,"callStatic",{}),_e(this,"estimateGas",{}),_e(this,"functions",{}),_e(this,"populateTransaction",{}),_e(this,"filters",{});{const o={};Object.keys(this.interface.events).forEach(a=>{const A=this.interface.events[a];_e(this.filters,a,(...l)=>({address:this.address,topics:this.interface.encodeFilterTopics(A,l)})),o[A.name]||(o[A.name]=[]),o[A.name].push(a)}),Object.keys(o).forEach(a=>{const A=o[a];A.length===1?_e(this.filters,a,this.filters[A[0]]):Un.warn(`Duplicate definition of ${a} (${A.join(", ")})`)})}if(_e(this,"_runningEvents",{}),_e(this,"_wrappedEmits",{}),e==null&&Un.throwArgumentError("invalid contract address or ENS name","addressOrName",e),_e(this,"address",e),this.provider)_e(this,"resolvedAddress",IB(this.provider,e));else try{_e(this,"resolvedAddress",Promise.resolve(dr(e)))}catch{Un.throwError("provider is required to use ENS name as contract address",me.errors.UNSUPPORTED_OPERATION,{operation:"new Contract"})}this.resolvedAddress.catch(o=>{});const i={},s={};Object.keys(this.interface.functions).forEach(o=>{const a=this.interface.functions[o];if(s[o]){Un.warn(`Duplicate ABI entry for ${JSON.stringify(o)}`);return}s[o]=!0;{const A=a.name;i[`%${A}`]||(i[`%${A}`]=[]),i[`%${A}`].push(o)}this[o]==null&&_e(this,o,yM(this,a,!0)),this.functions[o]==null&&_e(this.functions,o,yM(this,a,!1)),this.callStatic[o]==null&&_e(this.callStatic,o,YL(this,a,!0)),this.populateTransaction[o]==null&&_e(this.populateTransaction,o,cAe(this,a)),this.estimateGas[o]==null&&_e(this.estimateGas,o,uAe(this,a))}),Object.keys(i).forEach(o=>{const a=i[o];if(a.length>1)return;o=o.substring(1);const A=a[0];try{this[o]==null&&_e(this,o,this[A])}catch{}this.functions[o]==null&&_e(this.functions,o,this.functions[A]),this.callStatic[o]==null&&_e(this.callStatic,o,this.callStatic[A]),this.populateTransaction[o]==null&&_e(this.populateTransaction,o,this.populateTransaction[A]),this.estimateGas[o]==null&&_e(this.estimateGas,o,this.estimateGas[A])})}static getContractAddress(e){return p2(e)}static getInterface(e){return vM.isInterface(e)?e:new vM(e)}deployed(){return this._deployed()}_deployed(e){return this._deployedPromise||(this.deployTransaction?this._deployedPromise=this.deployTransaction.wait().then(()=>this):this._deployedPromise=this.provider.getCode(this.address,e).then(t=>(t==="0x"&&Un.throwError("contract not deployed",me.errors.UNSUPPORTED_OPERATION,{contractAddress:this.address,operation:"getDeployed"}),this))),this._deployedPromise}fallback(e){this.signer||Un.throwError("sending a transactions require a signer",me.errors.UNSUPPORTED_OPERATION,{operation:"sendTransaction(fallback)"});const t=Yn(e||{});return["from","to"].forEach(function(n){t[n]!=null&&Un.throwError("cannot override "+n,me.errors.UNSUPPORTED_OPERATION,{operation:n})}),t.to=this.resolvedAddress,this.deployed().then(()=>this.signer.sendTransaction(t))}connect(e){typeof e=="string"&&(e=new IU(e,this.provider));const t=new this.constructor(this.address,this.interface,e);return this.deployTransaction&&_e(t,"deployTransaction",this.deployTransaction),t}attach(e){return new this.constructor(e,this.interface,this.signer||this.provider)}static isIndexed(e){return nU.isIndexed(e)}_normalizeRunningEvent(e){return this._runningEvents[e.tag]?this._runningEvents[e.tag]:e}_getRunningEvent(e){if(typeof e=="string"){if(e==="error")return this._normalizeRunningEvent(new hAe);if(e==="event")return this._normalizeRunningEvent(new pp("event",null));if(e==="*")return this._normalizeRunningEvent(new wM(this.address,this.interface));const t=this.interface.getEvent(e);return this._normalizeRunningEvent(new CM(this.address,this.interface,t))}if(e.topics&&e.topics.length>0){try{const n=e.topics[0];if(typeof n!="string")throw new Error("invalid topic");const i=this.interface.getEvent(n);return this._normalizeRunningEvent(new CM(this.address,this.interface,i,e.topics))}catch{}const t={address:this.address,topics:e.topics};return this._normalizeRunningEvent(new pp(KL(t),t))}return this._normalizeRunningEvent(new wM(this.address,this.interface))}_checkRunningEvents(e){if(e.listenerCount()===0){delete this._runningEvents[e.tag];const t=this._wrappedEmits[e.tag];t&&e.filter&&(this.provider.off(e.filter,t),delete this._wrappedEmits[e.tag])}}_wrapEvent(e,t,n){const i=Ea(t);return i.removeListener=()=>{n&&(e.removeListener(n),this._checkRunningEvents(e))},i.getBlock=()=>this.provider.getBlock(t.blockHash),i.getTransaction=()=>this.provider.getTransaction(t.transactionHash),i.getTransactionReceipt=()=>this.provider.getTransactionReceipt(t.transactionHash),e.prepareEvent(i),i}_addEventListener(e,t,n){if(this.provider||Un.throwError("events require a provider or a signer with a provider",me.errors.UNSUPPORTED_OPERATION,{operation:"once"}),e.addListener(t,n),this._runningEvents[e.tag]=e,!this._wrappedEmits[e.tag]){const i=s=>{let o=this._wrapEvent(e,s,t);if(o.decodeError==null)try{const a=e.getEmit(o);this.emit(e.filter,...a)}catch(a){o.decodeError=a.error}e.filter!=null&&this.emit("event",o),o.decodeError!=null&&this.emit("error",o.decodeError,o)};this._wrappedEmits[e.tag]=i,e.filter!=null&&this.provider.on(e.filter,i)}}queryFilter(e,t,n){const i=this._getRunningEvent(e),s=Yn(i.filter);return typeof t=="string"&&Mt(t,32)?(n!=null&&Un.throwArgumentError("cannot specify toBlock with blockhash","toBlock",n),s.blockHash=t):(s.fromBlock=t??0,s.toBlock=n??"latest"),this.provider.getLogs(s).then(o=>o.map(a=>this._wrapEvent(i,a,null)))}on(e,t){return this._addEventListener(this._getRunningEvent(e),t,!1),this}once(e,t){return this._addEventListener(this._getRunningEvent(e),t,!0),this}emit(e,...t){if(!this.provider)return!1;const n=this._getRunningEvent(e),i=n.run(t)>0;return this._checkRunningEvents(n),i}listenerCount(e){return this.provider?e==null?Object.keys(this._runningEvents).reduce((t,n)=>t+this._runningEvents[n].listenerCount(),0):this._getRunningEvent(e).listenerCount():0}listeners(e){if(!this.provider)return[];if(e==null){const t=[];for(let n in this._runningEvents)this._runningEvents[n].listeners().forEach(i=>{t.push(i)});return t}return this._getRunningEvent(e).listeners()}removeAllListeners(e){if(!this.provider)return this;if(e==null){for(const n in this._runningEvents){const i=this._runningEvents[n];i.removeAllListeners(),this._checkRunningEvents(i)}return this}const t=this._getRunningEvent(e);return t.removeAllListeners(),this._checkRunningEvents(t),this}off(e,t){if(!this.provider)return this;const n=this._getRunningEvent(e);return n.removeListener(t),this._checkRunningEvents(n),this}removeListener(e,t){return this.off(e,t)}}class gAe extends pAe{}var UB={},mAe={get exports(){return UB},set exports(r){UB=r}},$u=typeof Reflect=="object"?Reflect:null,FM=$u&&typeof $u.apply=="function"?$u.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)},i0;$u&&typeof $u.ownKeys=="function"?i0=$u.ownKeys:Object.getOwnPropertySymbols?i0=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:i0=function(e){return Object.getOwnPropertyNames(e)};function BAe(r){console&&console.warn&&console.warn(r)}var jL=Number.isNaN||function(e){return e!==e};function Gt(){Gt.init.call(this)}mAe.exports=Gt;UB.once=wAe;Gt.EventEmitter=Gt;Gt.prototype._events=void 0;Gt.prototype._eventsCount=0;Gt.prototype._maxListeners=void 0;var IM=10;function Dv(r){if(typeof r!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof r)}Object.defineProperty(Gt,"defaultMaxListeners",{enumerable:!0,get:function(){return IM},set:function(r){if(typeof r!="number"||r<0||jL(r))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+r+".");IM=r}});Gt.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};Gt.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||jL(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function qL(r){return r._maxListeners===void 0?Gt.defaultMaxListeners:r._maxListeners}Gt.prototype.getMaxListeners=function(){return qL(this)};Gt.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var i=e==="error",s=this._events;if(s!==void 0)i=i&&s.error===void 0;else if(!i)return!1;if(i){var o;if(t.length>0&&(o=t[0]),o instanceof Error)throw o;var a=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw a.context=o,a}var A=s[e];if(A===void 0)return!1;if(typeof A=="function")FM(A,this,t);else for(var l=A.length,c=r3(A,l),n=0;n<l;++n)FM(c[n],this,t);return!0};function $L(r,e,t,n){var i,s,o;if(Dv(t),s=r._events,s===void 0?(s=r._events=Object.create(null),r._eventsCount=0):(s.newListener!==void 0&&(r.emit("newListener",e,t.listener?t.listener:t),s=r._events),o=s[e]),o===void 0)o=s[e]=t,++r._eventsCount;else if(typeof o=="function"?o=s[e]=n?[t,o]:[o,t]:n?o.unshift(t):o.push(t),i=qL(r),i>0&&o.length>i&&!o.warned){o.warned=!0;var a=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");a.name="MaxListenersExceededWarning",a.emitter=r,a.type=e,a.count=o.length,BAe(a)}return r}Gt.prototype.addListener=function(e,t){return $L(this,e,t,!1)};Gt.prototype.on=Gt.prototype.addListener;Gt.prototype.prependListener=function(e,t){return $L(this,e,t,!0)};function vAe(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function e3(r,e,t){var n={fired:!1,wrapFn:void 0,target:r,type:e,listener:t},i=vAe.bind(n);return i.listener=t,n.wrapFn=i,i}Gt.prototype.once=function(e,t){return Dv(t),this.on(e,e3(this,e,t)),this};Gt.prototype.prependOnceListener=function(e,t){return Dv(t),this.prependListener(e,e3(this,e,t)),this};Gt.prototype.removeListener=function(e,t){var n,i,s,o,a;if(Dv(t),i=this._events,i===void 0)return this;if(n=i[e],n===void 0)return this;if(n===t||n.listener===t)--this._eventsCount===0?this._events=Object.create(null):(delete i[e],i.removeListener&&this.emit("removeListener",e,n.listener||t));else if(typeof n!="function"){for(s=-1,o=n.length-1;o>=0;o--)if(n[o]===t||n[o].listener===t){a=n[o].listener,s=o;break}if(s<0)return this;s===0?n.shift():yAe(n,s),n.length===1&&(i[e]=n[0]),i.removeListener!==void 0&&this.emit("removeListener",e,a||t)}return this};Gt.prototype.off=Gt.prototype.removeListener;Gt.prototype.removeAllListeners=function(e){var t,n,i;if(n=this._events,n===void 0)return this;if(n.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):n[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete n[e]),this;if(arguments.length===0){var s=Object.keys(n),o;for(i=0;i<s.length;++i)o=s[i],o!=="removeListener"&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(t=n[e],typeof t=="function")this.removeListener(e,t);else if(t!==void 0)for(i=t.length-1;i>=0;i--)this.removeListener(e,t[i]);return this};function t3(r,e,t){var n=r._events;if(n===void 0)return[];var i=n[e];return i===void 0?[]:typeof i=="function"?t?[i.listener||i]:[i]:t?CAe(i):r3(i,i.length)}Gt.prototype.listeners=function(e){return t3(this,e,!0)};Gt.prototype.rawListeners=function(e){return t3(this,e,!1)};Gt.listenerCount=function(r,e){return typeof r.listenerCount=="function"?r.listenerCount(e):n3.call(r,e)};Gt.prototype.listenerCount=n3;function n3(r){var e=this._events;if(e!==void 0){var t=e[r];if(typeof t=="function")return 1;if(t!==void 0)return t.length}return 0}Gt.prototype.eventNames=function(){return this._eventsCount>0?i0(this._events):[]};function r3(r,e){for(var t=new Array(e),n=0;n<e;++n)t[n]=r[n];return t}function yAe(r,e){for(;e+1<r.length;e++)r[e]=r[e+1];r.pop()}function CAe(r){for(var e=new Array(r.length),t=0;t<e.length;++t)e[t]=r[t].listener||r[t];return e}function wAe(r,e){return new Promise(function(t,n){function i(o){r.removeListener(e,s),n(o)}function s(){typeof r.removeListener=="function"&&r.removeListener("error",i),t([].slice.call(arguments))}i3(r,e,s,{once:!0}),e!=="error"&&FAe(r,i,{once:!0})})}function FAe(r,e,t){typeof r.on=="function"&&i3(r,"error",e,t)}function i3(r,e,t,n){if(typeof r.on=="function")n.once?r.once(e,t):r.on(e,t);else if(typeof r.addEventListener=="function")r.addEventListener(e,function i(s){n.once&&r.removeEventListener(e,i),t(s)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof r)}function IAe(r,e){r.prototype=Object.create(e.prototype),r.prototype.constructor=r,r.__proto__=e}var UAe=function(r){IAe(e,r);function e(n){var i,s=n===void 0?{}:n,o=s.supportedChainIds;return i=r.call(this)||this,i.supportedChainIds=o,i}var t=e.prototype;return t.emitUpdate=function(i){this.emit(Gs.Update,i)},t.emitError=function(i){this.emit(Gs.Error,i)},t.emitDeactivate=function(){this.emit(Gs.Deactivate)},e}(UB.EventEmitter);function rU(){return rU=Object.assign||function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},rU.apply(this,arguments)}function gQ(r,e){r.prototype=Object.create(e.prototype),r.prototype.constructor=r,r.__proto__=e}function iU(r){return iU=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},iU(r)}function xB(r,e){return xB=Object.setPrototypeOf||function(n,i){return n.__proto__=i,n},xB(r,e)}function xAe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function s0(r,e,t){return xAe()?s0=Reflect.construct:s0=function(i,s,o){var a=[null];a.push.apply(a,s);var A=Function.bind.apply(i,a),l=new A;return o&&xB(l,o.prototype),l},s0.apply(null,arguments)}function QAe(r){return Function.toString.call(r).indexOf("[native code]")!==-1}function QB(r){var e=typeof Map=="function"?new Map:void 0;return QB=function(n){if(n===null||!QAe(n))return n;if(typeof n!="function")throw new TypeError("Super expression must either be null or a function");if(typeof e<"u"){if(e.has(n))return e.get(n);e.set(n,i)}function i(){return s0(n,arguments,iU(this).constructor)}return i.prototype=Object.create(n.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),xB(i,n)},QB(r)}function pm(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}typeof Symbol<"u"&&(Symbol.iterator||(Symbol.iterator=Symbol("Symbol.iterator")));typeof Symbol<"u"&&(Symbol.asyncIterator||(Symbol.asyncIterator=Symbol("Symbol.asyncIterator")));function tu(r,e){try{var t=r()}catch(n){return e(n)}return t&&t.then?t.then(void 0,e):t}function ao(r){return r.hasOwnProperty("result")?r.result:r}var xw=function(r){gQ(e,r);function e(){var t;return t=r.call(this)||this,t.name=t.constructor.name,t.message="No Ethereum provider was found on window.ethereum.",t}return e}(QB(Error)),bAe=function(r){gQ(e,r);function e(){var t;return t=r.call(this)||this,t.name=t.constructor.name,t.message="The user rejected the request.",t}return e}(QB(Error)),EAe=function(r){gQ(e,r);function e(n){var i;return i=r.call(this,n)||this,i.handleNetworkChanged=i.handleNetworkChanged.bind(pm(i)),i.handleChainChanged=i.handleChainChanged.bind(pm(i)),i.handleAccountsChanged=i.handleAccountsChanged.bind(pm(i)),i.handleClose=i.handleClose.bind(pm(i)),i}var t=e.prototype;return t.handleChainChanged=function(i){this.emitUpdate({chainId:i,provider:window.ethereum})},t.handleAccountsChanged=function(i){i.length===0?this.emitDeactivate():this.emitUpdate({account:i[0]})},t.handleClose=function(i,s){this.emitDeactivate()},t.handleNetworkChanged=function(i){this.emitUpdate({chainId:i,provider:window.ethereum})},t.activate=function(){try{var i=function(c){if(s)return c;function u(){return rU({provider:window.ethereum},a?{account:a}:{})}var f=function(){if(!a)return Promise.resolve(window.ethereum.enable().then(function(d){return d&&ao(d)[0]})).then(function(d){a=d})}();return f&&f.then?f.then(u):u(f)},s=!1,o=this;if(!window.ethereum)throw new xw;window.ethereum.on&&(window.ethereum.on("chainChanged",o.handleChainChanged),window.ethereum.on("accountsChanged",o.handleAccountsChanged),window.ethereum.on("close",o.handleClose),window.ethereum.on("networkChanged",o.handleNetworkChanged)),window.ethereum.isMetaMask&&(window.ethereum.autoRefreshOnNetworkChange=!1);var a,A=tu(function(){return Promise.resolve(window.ethereum.send("eth_requestAccounts").then(function(l){return ao(l)[0]})).then(function(l){a=l})},function(l){if(l.code===4001)throw new bAe});return Promise.resolve(A&&A.then?A.then(i):i(A))}catch(l){return Promise.reject(l)}},t.getProvider=function(){try{return Promise.resolve(window.ethereum)}catch(i){return Promise.reject(i)}},t.getChainId=function(){try{var i=function(){function A(){if(!s)try{s=ao(window.ethereum.send({method:"net_version"}))}catch{}return s||(window.ethereum.isDapper?s=ao(window.ethereum.cachedResults.net_version):s=window.ethereum.chainId||window.ethereum.netVersion||window.ethereum.networkVersion||window.ethereum._chainId),s}var l=function(){if(!s){var c=tu(function(){return Promise.resolve(window.ethereum.send("net_version").then(ao)).then(function(u){s=u})},function(){});if(c&&c.then)return c.then(function(){})}}();return l&&l.then?l.then(A):A(l)};if(!window.ethereum)throw new xw;var s,o=tu(function(){return Promise.resolve(window.ethereum.send("eth_chainId").then(ao)).then(function(a){s=a})},function(){});return Promise.resolve(o&&o.then?o.then(i):i(o))}catch(a){return Promise.reject(a)}},t.getAccount=function(){try{var i=function(){function A(){return s||(s=ao(window.ethereum.send({method:"eth_accounts"}))[0]),s}var l=function(){if(!s){var c=tu(function(){return Promise.resolve(window.ethereum.enable().then(function(u){return ao(u)[0]})).then(function(u){s=u})},function(){});if(c&&c.then)return c.then(function(){})}}();return l&&l.then?l.then(A):A(l)};if(!window.ethereum)throw new xw;var s,o=tu(function(){return Promise.resolve(window.ethereum.send("eth_accounts").then(function(a){return ao(a)[0]})).then(function(a){s=a})},function(){});return Promise.resolve(o&&o.then?o.then(i):i(o))}catch(a){return Promise.reject(a)}},t.deactivate=function(){window.ethereum&&window.ethereum.removeListener&&(window.ethereum.removeListener("chainChanged",this.handleChainChanged),window.ethereum.removeListener("accountsChanged",this.handleAccountsChanged),window.ethereum.removeListener("close",this.handleClose),window.ethereum.removeListener("networkChanged",this.handleNetworkChanged))},t.isAuthorized=function(){try{return window.ethereum?Promise.resolve(tu(function(){return Promise.resolve(window.ethereum.send("eth_accounts").then(function(i){return ao(i).length>0}))},function(){return!1})):Promise.resolve(!1)}catch(i){return Promise.reject(i)}},e}(UAe);function SAe(){const{account:r,library:e,activate:t}=VJ(),[n,i]=Ie.useState([]),{setViewMode:s}=et.useContext(Ho),{playSound:o}=et.useContext(zo),{isMute:a}=et.useContext(Po),A=new EAe({supportedChainIds:[137,1,3,4,5,42,97]});Ie.useEffect(()=>{if(r&&e){const f="0x69341F01C2113E2d09Cd4837bbF1786dfbBc41d7",d=["function balanceOf(address owner) external view returns (uint256)","function tokenOfOwnerByIndex(address owner, uint256 index) external view returns (uint256)","function tokenURI(uint256 tokenId) external view returns (string)"],p=new gAe(f,d,e);p.balanceOf(r).then(h=>{const m=[];for(let g=0;g<h;g++)m.push(p.tokenOfOwnerByIndex(r,g));Promise.all(m).then(g=>{const B=g.map(v=>p.tokenURI(v));Promise.all(B).then(v=>{i(v)})})})}},[r,e]);const l=()=>{t(A)},c=f=>{!a&&o("backNextButton"),s(Zt.APPEARANCE)},u=()=>{s(Zt.LANDING),!a&&o("backNextButton")};return ie.jsxs("div",{className:wl.container,children:[!r&&ie.jsxs("div",{className:wl.message,children:["Please connect your wallet to load your characters",ie.jsx("button",{className:wl.button,onClick:()=>l(),children:"Connect"})]}),ie.jsxs("div",{className:wl.characterContainer,children:[ie.jsx("div",{className:wl.title,children:"Load Character"}),n.map((f,d)=>ie.jsx("div",{className:wl.character,onClick:()=>{c()},children:JSON.stringify(f)},d))]}),ie.jsx("button",{className:wl.button,onClick:()=>u(),children:"Back"})]})}const _Ae="_button_bgujb_14",RAe="_buttonInactive_bgujb_18",MAe="_bioContainer_bgujb_22",TAe="_scrollContainer_bgujb_37",NAe="_topLine_bgujb_47",VAe="_bottomLine_bgujb_69",DAe="_buttonContainer_bgujb_91",kAe="_buttonLeft_bgujb_100",LAe="_buttonRight_bgujb_104",WAe="_buttonCenter_bgujb_108",ZAe="_container_bgujb_122",PAe="_input_bgujb_158",JAe="_label_bgujb_168",GAe="_section_bgujb_175",OAe="_select_bgujb_180",vt={"inner-container":"_inner-container_bgujb_1",button:_Ae,buttonInactive:RAe,bioContainer:MAe,scrollContainer:TAe,topLine:NAe,bottomLine:VAe,buttonContainer:DAe,buttonLeft:kAe,buttonRight:LAe,buttonCenter:WAe,container:ZAe,input:PAe,label:JAe,section:GAe,select:OAe},HAe=(r,e)=>{const t=r.name.toUpperCase(),n=e.names[Math.floor(Math.random()*e.names.length)],i=e.cities[Math.floor(Math.random()*e.cities.length)],s=e.weapons[Math.floor(Math.random()*e.weapons.length)],o=e.hobbies[Math.floor(Math.random()*e.hobbies.length)],a=e.professions[Math.floor(Math.random()*e.professions.length)],A=e.heShe[t],l=Object.keys(TL).find(g=>{if(A.toUpperCase()==="SHE"&&g.includes("Female")||A.toUpperCase()==="HE"&&g.includes("Male"))return g}),c=Math.floor(Math.random()*Object.keys(ju).length),u=Object.keys(ju)[c],f=`${n} is a ${e.classes[t]} from ${i}. ${A} is ${o}. ${A} also enjoys ${a}. ${A} is armed with a ${s}.`,d=zAe(e),p=YAe(e),h=XAe(e);return{name:n,classType:t,city:i,weapon:s,hobby:o,profession:a,heshe:A,voiceKey:l,favColor:u,personality:d,relationship:p,hobbies:h,description:f,greeting:"Hello"}},zAe=r=>{const e=r.generalPersonalityQuestions[Math.floor(Math.random()*r.generalPersonalityQuestions.length)],t=r.generalPersonalityAnswers[Math.floor(Math.random()*r.generalPersonalityAnswers.length)];return{question:e,answer:t}},XAe=r=>{const e=r.hobbyQuestions[Math.floor(Math.random()*r.hobbyQuestions.length)],t=r.hobbyAnswers[Math.floor(Math.random()*r.hobbyAnswers.length)];return{question:e,answer:t}},YAe=r=>{const e=r.relationshipQuestions[Math.floor(Math.random()*r.relationshipQuestions.length)],t=r.relationshipAnswers[Math.floor(Math.random()*r.relationshipAnswers.length)];return{question:e,answer:t}},KAe=Object.keys(TL),jAe=Object.keys(ju);function qAe(r){const e=localStorage.getItem(r);return e?JSON.parse(e):null}function $Ae({templateInfo:r,personality:e}){const{playSound:t}=et.useContext(zo),{isMute:n}=et.useContext(Po),{setViewMode:i}=et.useContext(Ho),s=()=>{i(Zt.APPEARANCE),!n&&t("backNextButton")},o=()=>{i(Zt.SAVE),!n&&t("backNextButton")},[a,A]=et.useState(qAe(`${r.id}_fulBio`)||HAe(r,e));et.useEffect(()=>{localStorage.setItem(`${r.id}_fulBio`,JSON.stringify(a))},[a]),Ie.useEffect(()=>{const c=u=>{u.ctrlKey&&u.key};return window.addEventListener("keydown",c),()=>{window.removeEventListener("keydown",c)}},[]);const{t:l}=Ie.useContext(eo);return ie.jsxs("div",{className:vt.container,children:[ie.jsx("div",{className:"sectionTitle",children:l("pageTitles.createBio")}),ie.jsxs("div",{className:vt.bioContainer,children:[ie.jsx("div",{className:vt.topLine}),ie.jsx("div",{className:vt.bottomLine}),ie.jsx("div",{className:vt.scrollContainer,children:ie.jsxs("div",{className:vt["inner-container"],children:[ie.jsxs("div",{className:vt.section,children:[ie.jsx("label",{className:vt.label,htmlFor:"name",children:l("labels.name")}),ie.jsx("input",{type:"text",name:"name",className:vt.input,defaultValue:a.name,onChange:c=>A({...a,name:c.target.value})})]}),ie.jsxs("div",{className:vt.section,children:[ie.jsx("label",{className:vt.label,htmlFor:"voice",children:l("labels.voice")}),ie.jsx("select",{name:"voice",className:vt.select,defaultValue:a.voiceKey,onChange:c=>A({...a,voiceKey:c.target.value}),children:KAe.map((c,u)=>ie.jsx("option",{value:c,children:c},u))})]}),ie.jsxs("div",{className:vt.section,children:[ie.jsx("label",{className:vt.label,htmlFor:"favcolor",children:l("labels.favoriteColor")}),ie.jsx("select",{name:"favcolor",className:vt.select,defaultValue:a.colorKey,onChange:c=>A({...a,colorKey:c.target.value}),children:jAe.map((c,u)=>ie.jsx("option",{value:c,children:c.charAt(0).toUpperCase()+c.slice(1)},u))})]}),ie.jsxs("div",{className:vt.section,children:[ie.jsx("label",{className:vt.label,htmlFor:"greeting",children:l("labels.preferredGreeting")}),ie.jsx("input",{type:"text",name:"greeting",className:vt.input,defaultValue:a.greeting,onChange:c=>A({...a,greeting:c.target.value})})]}),ie.jsxs("div",{className:vt.section,children:[ie.jsx("label",{className:vt.label,htmlFor:"bio",children:l("labels.bio")}),ie.jsx("textarea",{name:"bio",className:vt.input,rows:"4",cols:"50",defaultValue:a.description,onChange:c=>A({...a,description:c.target.value})})]}),ie.jsxs("div",{className:vt.section,children:[ie.jsxs("label",{className:vt.label,htmlFor:"question1",children:[l("labels.question")," 1"]}),ie.jsx("select",{name:"question1",className:vt.select,defaultValue:a.personality.question,onChange:c=>A({...a,personality:{question:c.target.value,answer:a.personality.answer}}),children:e.generalPersonalityQuestions.map((c,u)=>ie.jsx("option",{value:c,children:c},u))}),ie.jsx("textarea",{name:"response1",className:vt.input,defaultValue:a.personality.answer,onChange:c=>A({...a,personality:{question:a.personality.question,answer:c.target.value}})})]}),ie.jsxs("div",{className:vt.section,children:[ie.jsxs("label",{className:vt.label,htmlFor:"question2",children:[l("labels.question")," 2"]}),ie.jsx("select",{name:"question2",className:vt.select,defaultValue:a.relationship.question,onChange:c=>A({...a,relationship:{question:c.target.value,answer:a.relationship.answer}}),children:e.relationshipQuestions.map((c,u)=>ie.jsx("option",{value:c,children:c},u))}),ie.jsx("textarea",{name:"response1",className:vt.input,defaultValue:a.relationship.answer,onChange:c=>A({...a,relationship:{question:a.relationship.question,answer:c.target.value}})})]}),ie.jsxs("div",{className:vt.section,children:[ie.jsxs("label",{className:vt.label,htmlFor:"question3",children:[l("labels.question")," 3"]}),ie.jsx("select",{name:"question3",className:vt.select,defaultValue:a.hobbies.question,onChange:c=>A({...a,hobbies:{question:c.target.value,answer:a.hobbies.answer}}),children:e.hobbyQuestions.map((c,u)=>ie.jsx("option",{value:c,children:c},u))}),ie.jsx("textarea",{name:"response3",className:vt.input,defaultValue:a.hobbies.answer,onChange:c=>A({...a,hobbies:{question:a.hobbies.question,answer:c.target.value}})})]})]})})]}),ie.jsxs("div",{className:vt.buttonContainer,children:[ie.jsx(Ri,{theme:"light",text:l("callToAction.back"),size:14,className:vt.buttonLeft,onClick:s}),ie.jsx(Ri,{theme:"light",text:l("callToAction.next"),size:14,className:vt.buttonRight,onClick:o})]})]})}const ele="_classdisabled_1io9o_1",tle="_container_1io9o_6",nle="_classContainer_1io9o_14",rle="_icon_1io9o_40",ile="_name_1io9o_71",sle="_description_1io9o_80",ole="_classFrame_1io9o_85",ale="_frameContainer_1io9o_107",Ale="_frame_1io9o_107",lle="_image_1io9o_117",cle="_lockedContainer_1io9o_123",ule="_locked_1io9o_123",fle="_buttonContainer_1io9o_137",dle="_buttonLeft_1io9o_146",hle="_buttonRight_1io9o_150",ple="_buttonCenter_1io9o_154",gle="_topLine_1io9o_168",mle="_bottomLine_1io9o_194",Vr={classdisabled:ele,container:tle,classContainer:nle,class:"_class_1io9o_1",icon:rle,name:ile,description:sle,classFrame:ole,frameContainer:ale,frame:Ale,image:lle,lockedContainer:cle,locked:ule,buttonContainer:fle,buttonLeft:dle,buttonRight:hle,buttonCenter:ple,topLine:gle,bottomLine:mle};function Ble({fetchNewModel:r}){const{t:e}=Ie.useContext(eo),{setViewMode:t}=et.useContext(Ho),{playSound:n}=et.useContext(zo),{isMute:i}=et.useContext(Po),s=A=>{r(A.templateIndex).then(()=>{t(Zt.APPEARANCE)}),!i&&n("classSelect")},o=()=>{!i&&n("classMouseOver")},a=[{name:e("classes.beastPainter.name"),image:"/assets/media/disabled.png",description:e("classes.beastPainter.description"),icon:"/assets/icons/class-beast-painter.svg",disabled:!0,templateIndex:2},{name:e("classes.engineer.name"),image:"/assets/media/disabled.png",description:e("classes.engineer.description"),icon:"/assets/icons/class-engineer.svg",disabled:!0,templateIndex:3},{name:e("classes.dropHunter.name"),image:"/assets/media/DropHunter.png",description:e("classes.dropHunter.description"),icon:"/assets/icons/class-drop-hunter.svg",disabled:!1,templateIndex:0},{name:e("classes.theDegen.name"),image:"/assets/media/degens.gif",description:e("classes.theDegen.description"),icon:"/assets/icons/class-the-degen.svg",disabled:!0,templateIndex:6},{name:e("classes.neuralHacker.name"),image:"/assets/media/NeuralHacker.png",description:e("classes.neuralHacker.description"),icon:"/assets/icons/class-neural-hacker.svg",disabled:!1,templateIndex:1},{name:e("classes.liskWitch.name"),image:"/assets/media/disabled.png",description:e("classes.liskWitch.description"),icon:"/assets/icons/class-lisk-witch.svg",disabled:!0,templateIndex:4},{name:e("classes.bruiser.name"),image:"/assets/media/disabled.png",description:e("classes.bruiser.description"),icon:"/assets/icons/class-bruiser.svg",disabled:!0,templateIndex:5}];return ie.jsxs("div",{className:`${Vr.container} horizontalScroll`,children:[ie.jsx("div",{className:"sectionTitle",children:e("pageTitles.chooseClass")}),ie.jsx("div",{className:Vr.topLine}),ie.jsx("div",{className:Vr.classContainer,children:a.map((A,l)=>ie.jsxs("div",{className:A.disabled?Vr.classdisabled:Vr.class,onClick:A.disabled?null:()=>s(A),onMouseOver:A.disabled?null:()=>o(),children:[ie.jsxs("div",{className:Vr.classFrame,style:{backgroundImage:`url(${A.image})`},children:[ie.jsx("div",{className:Vr.frameContainer,children:ie.jsx("img",{src:"/assets/backgrounds/class-frame.svg",className:Vr.frame})}),ie.jsx("div",{className:Vr.lockedContainer,children:A.disabled&&ie.jsx("img",{src:"/assets/icons/locked.svg",className:Vr.locked})})]}),ie.jsx("div",{className:Vr.icon,children:ie.jsx("img",{src:A.icon,alt:A.name})}),ie.jsx("div",{className:Vr.name,children:A.name}),ie.jsx("div",{className:Vr.description,children:A.description})]},l))}),ie.jsx("div",{className:Vr.bottomLine}),ie.jsx("div",{className:Vr.buttonContainer})]})}const vle="_buttonContainer_1ueuk_1",yle="_button_1ueuk_1",Qw={buttonContainer:vle,button:yle};function Cle(){const{setViewMode:r}=et.useContext(Ho),{playSound:e}=et.useContext(zo),{isMute:t}=et.useContext(Po),n=()=>{r(Zt.CREATE),!t&&e("backNextButton")};return ie.jsx("div",{className:Qw.container,children:ie.jsx("div",{className:Qw.buttonContainer,children:ie.jsx("button",{className:Qw.button,onClick:n,children:ie.jsx("img",{src:"/assets/media/btn_create_character.png"})})})})}const wle="_buttonContainer_1fd4o_1",Fle="_buttonLeft_1fd4o_10",Ile="_buttonRight_1fd4o_14",Ule="_buttonCenter_1fd4o_18",Td={buttonContainer:wle,buttonLeft:Fle,buttonRight:Ile,buttonCenter:Ule},xle="_SideMenu_1c2fu_1",Qle="_scrollContainer_1c2fu_13",ble="_selectorButton_1c2fu_32",Ele="_mainTitleWrap_1c2fu_38",Sle="_mainTitle_1c2fu_38",_le="_topLine_1c2fu_56",Rle="_bottomLine_1c2fu_84",Mle="_MenuImg_1c2fu_112",Tle="_MenuOption_1c2fu_130",Nle="_MenuOptionSelected_1c2fu_136",Vle="_MenuImgActive_1c2fu_141",Dle="_ShuffleOption_1c2fu_159",kle="_ShuffleOptionActive_1c2fu_171",Lle="_MenuTitle_1c2fu_183",Wle="_LoadingContainer_1c2fu_197",Zle="_Loading_1c2fu_197",Ple="_LoadingText_1c2fu_223",iA={SideMenu:xle,scrollContainer:Qle,"selector-container":"_selector-container_1c2fu_24",selectorButton:ble,mainTitleWrap:Ele,mainTitle:Sle,topLine:_le,bottomLine:Rle,MenuImg:Mle,MenuOption:Tle,MenuOptionSelected:Nle,MenuImgActive:Vle,ShuffleOption:Dle,ShuffleOptionActive:kle,MenuTitle:Lle,LoadingContainer:Wle,Loading:Zle,LoadingText:Ple},Jle="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFgAAABYCAYAAABxlTA0AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAXASURBVHgB7ZzNchNHEMd7ZiWf5WtSCSIfVa5cLN+MTRXrEFPcWJwHwNxys/0Etm+5YZ4Ac0pOIG4EU2WlCgffIm4+pIhS8ADKEQlt07OSKKGdlVdSz64K9++kmhlpR3+Pe3qmuwUgCIIgCIIgCIIgCIIgCIIgCIIgXHAUzCDLflDWRfCVgkVA5aOCkgqhRLMt9cdQW0MhNEBhHRFehW2ondaqDZgxZkZg3w9KrTm9RdJtknBlmAwjeLXTgvuzInbuAi//FPieUrv00gdW1GGnHe7nLXRuAkdmoKDvKYUBOCVfoT3IgSvrP295Gn4nG1sB91S0p4Kvvl34/83rszpkTOYrePXGxj1A3E41GKGGCl/Rq7oXQpM2tma/q0PC0R+orFAt0rfwU32eUgcnzx7tQIZkJrDZxNpFdUwvR6/arqgP59pQrdWqTUj52a0iBCT2nRRi14ttXEv72dOSicCpxCVhFeD+i+fVGkzB8s2g7HVgj77anRHDMhO5ABkwUlzjz4Z4d1ph+5w+jTazzZX1oEYmYTfB5av05rQEjtHgmMjmJoiLqKrFFi5xiTtEPTqcJFPpzc0pTk0EraJNBeqBrU9hZA72wAH03ArZ4+PBk18Socadl39UD8ARzgTuHnfVMT2gPNw3K+L2aHbauOTKT3ZmIrwi7NrENWYhR3Ftm1pJz2lnpsKJwGb10jrdjHXQhhYWQid+6Hnimv8a8hwum0siS19wlY7s4AAnApvVC9aH4U5vl2cljbjmv8a4ZZo8FtsY7N6HsMNug83q9YrqX8ujDk+OHt0FZtKKO9i2un7buGj+8Fha4fPcvjH7CtYeWI/BHS/cB2YmEbffbhvfKkC6I/wY8JsIrW7F2uiUxm0aJhXX0PO7a7H3qJGnv4lgFdiYB6vnQHcLwMg04n6cE1jnVF75ceMSMMIqsAnz2NrNxQ0wwSHu6DmFa8AIr4kILUdiMg9cGweXuIbenGqxDo/3jppVYKXpbnaI3n3u1HCK+3FuYXxuZIevASOsApNdK8faMO7Yj4sLcSM0xCMcmPqInfIRjNDFTnm4jWJSU4VpnIlr5hbaj87AiPPrymlwKa6hrS6wwK7FzQpegTG+Ijp6/BXxuYhr4N3kFMYEVu/HEzhLcZU90tIARrg3ubhNG8OvzHrlWuN1OMMCk1/553Abib6Y5r15mAWXfnsfXhusrS6Zb8L2o96Wh7i9OfmWrqncymFYBQ49y9GTaGkIkt6T14ZmElVs7UnfYVJYBTZXknSaawy3K89+DZint6BsiSkUTuK+VuX3gxFs14D+cMwrT3G7McO4eUDEJ8AMu8Bz7+HA1j4Y88rbz02KGZJ5YM+PcJIXkRTzIuHWQjqe5inuletBoLV6HO9xEzN0clROinnRKn6Qp7hRxEUraw6Ei5ihwYnAJuZlEkwsXeU8j79RRj3YkgHVoYt0guiZ4IgowQQhVSQjC3FXbmzsWssVyHNwtXoNzkoI3v5z1vz6m4V3FCK4OWpcZuIi7tn6yK3cefnMSXZnhNMajTevz04vXV6YJ5GXrQPM6mnDztvGGUvMbhhzWvviux9+U4C/gPXxeP/kqPorOCSTDHfyKv6G5Ox2czjZ/+uoegiMmPIwbTZVSKy5q58cPXaegJ1JhrtJ1x+R5V42OcSr6xvXOMqtUtbdRSUEkAGzVwRDoXSTFDJREUz3+OufM/zzK4IZ5Or14AC12ko5vGZqkcMQ/sOBWy5FURK6yy31apkrtFNV0iRcG5v74qi6DRmSS6WnKS0YUaDigiZdNOyfPHdXKpBELpWepuLyy+8XnmiEefobp454TII58IQFvE2u2FPIgfyLwdPVtY0PU93dtMzMzxkYoXUHtsl03JrUdJCdbmjEhwW60ctqEzuP2fxBjq7YPph6ZFSLaGqSP/VnmyQm3cqZ+uUoDlif1R/kEARBEARBEARBEARBEARBEARBEC48HwDC3eeu0ZVWOQAAAABJRU5ErkJggg==",s3=0,Gle=1,o3=2,UM=2,bw=1.25,xM=1,o0=6*4+4+4,sU=65535,Ole=Math.pow(2,-24);class gm{constructor(){}}function wo(r,e,t){return t.min.x=e[r],t.min.y=e[r+1],t.min.z=e[r+2],t.max.x=e[r+3],t.max.y=e[r+4],t.max.z=e[r+5],t}function QM(r){let e=-1,t=-1/0;for(let n=0;n<3;n++){const i=r[n+3]-r[n];i>t&&(t=i,e=n)}return e}function bM(r,e){e.set(r)}function EM(r,e,t){let n,i;for(let s=0;s<3;s++){const o=s+3;n=r[s],i=e[s],t[s]=n<i?n:i,n=r[o],i=e[o],t[o]=n>i?n:i}}function mm(r,e,t){for(let n=0;n<3;n++){const i=e[r+2*n],s=e[r+2*n+1],o=i-s,a=i+s;o<t[n]&&(t[n]=o),a>t[n+3]&&(t[n+3]=a)}}function Nd(r){const e=r[3]-r[0],t=r[4]-r[1],n=r[5]-r[2];return 2*(e*t+t*n+n*e)}function Hle(r,e){if(!r.index){const t=r.attributes.position.count,n=e.useSharedArrayBuffer?SharedArrayBuffer:ArrayBuffer;let i;t>65535?i=new Uint32Array(new n(4*t)):i=new Uint16Array(new n(2*t)),r.setIndex(new pt(i,1));for(let s=0;s<t;s++)i[s]=s}}function zle(r){if(!r.groups||!r.groups.length)return[{offset:0,count:r.index.count/3}];const e=[],t=new Set;for(const i of r.groups)t.add(i.start),t.add(i.start+i.count);const n=Array.from(t.values()).sort((i,s)=>i-s);for(let i=0;i<n.length-1;i++){const s=n[i],o=n[i+1];e.push({offset:s/3,count:(o-s)/3})}return e}function Ew(r,e,t,n,i=null){let s=1/0,o=1/0,a=1/0,A=-1/0,l=-1/0,c=-1/0,u=1/0,f=1/0,d=1/0,p=-1/0,h=-1/0,m=-1/0;const g=i!==null;for(let B=e*6,v=(e+t)*6;B<v;B+=6){const w=r[B+0],C=r[B+1],I=w-C,E=w+C;I<s&&(s=I),E>A&&(A=E),g&&w<u&&(u=w),g&&w>p&&(p=w);const U=r[B+2],S=r[B+3],V=U-S,J=U+S;V<o&&(o=V),J>l&&(l=J),g&&U<f&&(f=U),g&&U>h&&(h=U);const z=r[B+4],R=r[B+5],y=z-R,Q=z+R;y<a&&(a=y),Q>c&&(c=Q),g&&z<d&&(d=z),g&&z>m&&(m=z)}n[0]=s,n[1]=o,n[2]=a,n[3]=A,n[4]=l,n[5]=c,g&&(i[0]=u,i[1]=f,i[2]=d,i[3]=p,i[4]=h,i[5]=m)}function Xle(r,e,t,n){let i=1/0,s=1/0,o=1/0,a=-1/0,A=-1/0,l=-1/0;for(let c=e*6,u=(e+t)*6;c<u;c+=6){const f=r[c+0];f<i&&(i=f),f>a&&(a=f);const d=r[c+2];d<s&&(s=d),d>A&&(A=d);const p=r[c+4];p<o&&(o=p),p>l&&(l=p)}n[0]=i,n[1]=s,n[2]=o,n[3]=a,n[4]=A,n[5]=l}function Yle(r,e,t,n,i){let s=t,o=t+n-1;const a=i.pos,A=i.axis*2;for(;;){for(;s<=o&&e[s*6+A]<a;)s++;for(;s<=o&&e[o*6+A]>=a;)o--;if(s<o){for(let l=0;l<3;l++){let c=r[s*3+l];r[s*3+l]=r[o*3+l],r[o*3+l]=c;let u=e[s*6+l*2+0];e[s*6+l*2+0]=e[o*6+l*2+0],e[o*6+l*2+0]=u;let f=e[s*6+l*2+1];e[s*6+l*2+1]=e[o*6+l*2+1],e[o*6+l*2+1]=f}s++,o--}else return s}}const Aa=32,Kle=(r,e)=>r.candidate-e.candidate,sA=new Array(Aa).fill().map(()=>({count:0,bounds:new Float32Array(6),rightCacheBounds:new Float32Array(6),leftCacheBounds:new Float32Array(6),candidate:0})),Bm=new Float32Array(6);function jle(r,e,t,n,i,s){let o=-1,a=0;if(s===s3)o=QM(e),o!==-1&&(a=(e[o]+e[o+3])/2);else if(s===Gle)o=QM(r),o!==-1&&(a=qle(t,n,i,o));else if(s===o3){const A=Nd(r);let l=bw*i;const c=n*6,u=(n+i)*6;for(let f=0;f<3;f++){const d=e[f],m=(e[f+3]-d)/Aa;if(i<Aa/4){const g=[...sA];g.length=i;let B=0;for(let w=c;w<u;w+=6,B++){const C=g[B];C.candidate=t[w+2*f],C.count=0;const{bounds:I,leftCacheBounds:E,rightCacheBounds:U}=C;for(let S=0;S<3;S++)U[S]=1/0,U[S+3]=-1/0,E[S]=1/0,E[S+3]=-1/0,I[S]=1/0,I[S+3]=-1/0;mm(w,t,I)}g.sort(Kle);let v=i;for(let w=0;w<v;w++){const C=g[w];for(;w+1<v&&g[w+1].candidate===C.candidate;)g.splice(w+1,1),v--}for(let w=c;w<u;w+=6){const C=t[w+2*f];for(let I=0;I<v;I++){const E=g[I];C>=E.candidate?mm(w,t,E.rightCacheBounds):(mm(w,t,E.leftCacheBounds),E.count++)}}for(let w=0;w<v;w++){const C=g[w],I=C.count,E=i-C.count,U=C.leftCacheBounds,S=C.rightCacheBounds;let V=0;I!==0&&(V=Nd(U)/A);let J=0;E!==0&&(J=Nd(S)/A);const z=xM+bw*(V*I+J*E);z<l&&(o=f,l=z,a=C.candidate)}}else{for(let v=0;v<Aa;v++){const w=sA[v];w.count=0,w.candidate=d+m+v*m;const C=w.bounds;for(let I=0;I<3;I++)C[I]=1/0,C[I+3]=-1/0}for(let v=c;v<u;v+=6){let I=~~((t[v+2*f]-d)/m);I>=Aa&&(I=Aa-1);const E=sA[I];E.count++,mm(v,t,E.bounds)}const g=sA[Aa-1];bM(g.bounds,g.rightCacheBounds);for(let v=Aa-2;v>=0;v--){const w=sA[v],C=sA[v+1];EM(w.bounds,C.rightCacheBounds,w.rightCacheBounds)}let B=0;for(let v=0;v<Aa-1;v++){const w=sA[v],C=w.count,I=w.bounds,U=sA[v+1].rightCacheBounds;C!==0&&(B===0?bM(I,Bm):EM(I,Bm,Bm)),B+=C;let S=0,V=0;B!==0&&(S=Nd(Bm)/A);const J=i-B;J!==0&&(V=Nd(U)/A);const z=xM+bw*(S*B+V*J);z<l&&(o=f,l=z,a=w.candidate)}}}}else console.warn(`MeshBVH: Invalid build strategy value ${s} used.`);return{axis:o,pos:a}}function qle(r,e,t,n){let i=0;for(let s=e,o=e+t;s<o;s++)i+=r[s*6+n*2];return i/t}function $le(r,e){const t=r.attributes.position,n=r.index.array,i=n.length/3,s=new Float32Array(i*6),o=t.normalized,a=t.array,A=t.offset||0;let l=3;t.isInterleavedBufferAttribute&&(l=t.data.stride);const c=["getX","getY","getZ"];for(let u=0;u<i;u++){const f=u*3,d=u*6;let p,h,m;o?(p=n[f+0],h=n[f+1],m=n[f+2]):(p=n[f+0]*l+A,h=n[f+1]*l+A,m=n[f+2]*l+A);for(let g=0;g<3;g++){let B,v,w;o?(B=t[c[g]](p),v=t[c[g]](h),w=t[c[g]](m)):(B=a[p+g],v=a[h+g],w=a[m+g]);let C=B;v<C&&(C=v),w<C&&(C=w);let I=B;v>I&&(I=v),w>I&&(I=w);const E=(I-C)/2,U=g*2;s[d+U+0]=C+E,s[d+U+1]=E+(Math.abs(C)+E)*Ole,C<e[g]&&(e[g]=C),I>e[g+3]&&(e[g+3]=I)}}return s}function ece(r,e){function t(g){f&&f(g/d)}function n(g,B,v,w=null,C=0){if(!p&&C>=A&&(p=!0,l&&(console.warn(`MeshBVH: Max depth of ${A} reached when generating BVH. Consider increasing maxDepth.`),console.warn(r))),v<=c||C>=A)return t(B+v),g.offset=B,g.count=v,g;const I=jle(g.boundingData,w,o,B,v,u);if(I.axis===-1)return t(B+v),g.offset=B,g.count=v,g;const E=Yle(a,o,B,v,I);if(E===B||E===B+v)t(B+v),g.offset=B,g.count=v;else{g.splitAxis=I.axis;const U=new gm,S=B,V=E-B;g.left=U,U.boundingData=new Float32Array(6),Ew(o,S,V,U.boundingData,s),n(U,S,V,s,C+1);const J=new gm,z=E,R=v-V;g.right=J,J.boundingData=new Float32Array(6),Ew(o,z,R,J.boundingData,s),n(J,z,R,s,C+1)}return g}Hle(r,e);const i=new Float32Array(6),s=new Float32Array(6),o=$le(r,i),a=r.index.array,A=e.maxDepth,l=e.verbose,c=e.maxLeafTris,u=e.strategy,f=e.onProgress,d=r.index.count/3;let p=!1;const h=[],m=zle(r);if(m.length===1){const g=m[0],B=new gm;B.boundingData=i,Xle(o,g.offset,g.count,s),n(B,g.offset,g.count,s),h.push(B)}else for(let g of m){const B=new gm;B.boundingData=new Float32Array(6),Ew(o,g.offset,g.count,B.boundingData,s),n(B,g.offset,g.count,s),h.push(B)}return h}function tce(r,e){const t=ece(r,e);let n,i,s;const o=[],a=e.useSharedArrayBuffer?SharedArrayBuffer:ArrayBuffer;for(let c=0;c<t.length;c++){const u=t[c];let f=A(u);const d=new a(o0*f);n=new Float32Array(d),i=new Uint32Array(d),s=new Uint16Array(d),l(0,u),o.push(d)}return o;function A(c){return c.count?1:1+A(c.left)+A(c.right)}function l(c,u){const f=c/4,d=c/2,p=!!u.count,h=u.boundingData;for(let m=0;m<6;m++)n[f+m]=h[m];if(p){const m=u.offset,g=u.count;return i[f+6]=m,s[d+14]=g,s[d+15]=sU,c+o0}else{const m=u.left,g=u.right,B=u.splitAxis;let v;if(v=l(c+o0,m),v/4>Math.pow(2,32))throw new Error("MeshBVH: Cannot store child pointer greater than 32 bits.");return i[f+6]=v/4,v=l(v,g),i[f+7]=B,v}}}class La{constructor(){this.min=1/0,this.max=-1/0}setFromPointsField(e,t){let n=1/0,i=-1/0;for(let s=0,o=e.length;s<o;s++){const A=e[s][t];n=A<n?A:n,i=A>i?A:i}this.min=n,this.max=i}setFromPoints(e,t){let n=1/0,i=-1/0;for(let s=0,o=t.length;s<o;s++){const a=t[s],A=e.dot(a);n=A<n?A:n,i=A>i?A:i}this.min=n,this.max=i}isSeparated(e){return this.min>e.max||e.min>this.max}}La.prototype.setFromBox=function(){const r=new H;return function(t,n){const i=n.min,s=n.max;let o=1/0,a=-1/0;for(let A=0;A<=1;A++)for(let l=0;l<=1;l++)for(let c=0;c<=1;c++){r.x=i.x*A+s.x*(1-A),r.y=i.y*l+s.y*(1-l),r.z=i.z*c+s.z*(1-c);const u=t.dot(r);o=Math.min(u,o),a=Math.max(u,a)}this.min=o,this.max=a}}();const nce=function(){const r=new H,e=new H,t=new H;return function(i,s,o){const a=i.start,A=r,l=s.start,c=e;t.subVectors(a,l),r.subVectors(i.end,i.start),e.subVectors(s.end,s.start);const u=t.dot(c),f=c.dot(A),d=c.dot(c),p=t.dot(A),m=A.dot(A)*d-f*f;let g,B;m!==0?g=(u*f-p*d)/m:g=0,B=(u+g*f)/d,o.x=g,o.y=B}}(),mQ=function(){const r=new Je,e=new H,t=new H;return function(i,s,o,a){nce(i,s,r);let A=r.x,l=r.y;if(A>=0&&A<=1&&l>=0&&l<=1){i.at(A,o),s.at(l,a);return}else if(A>=0&&A<=1){l<0?s.at(0,a):s.at(1,a),i.closestPointToPoint(a,!0,o);return}else if(l>=0&&l<=1){A<0?i.at(0,o):i.at(1,o),s.closestPointToPoint(o,!0,a);return}else{let c;A<0?c=i.start:c=i.end;let u;l<0?u=s.start:u=s.end;const f=e,d=t;if(i.closestPointToPoint(u,!0,e),s.closestPointToPoint(c,!0,t),f.distanceToSquared(u)<=d.distanceToSquared(c)){o.copy(f),a.copy(u);return}else{o.copy(c),a.copy(d);return}}}}(),rce=function(){const r=new H,e=new H,t=new ma,n=new ba;return function(s,o){const{radius:a,center:A}=s,{a:l,b:c,c:u}=o;if(n.start=l,n.end=c,n.closestPointToPoint(A,!0,r).distanceTo(A)<=a||(n.start=l,n.end=u,n.closestPointToPoint(A,!0,r).distanceTo(A)<=a)||(n.start=c,n.end=u,n.closestPointToPoint(A,!0,r).distanceTo(A)<=a))return!0;const h=o.getPlane(t);if(Math.abs(h.distanceToPoint(A))<=a){const g=h.projectPoint(A,e);if(o.containsPoint(g))return!0}return!1}}(),ice=1e-15;function nu(r){return Math.abs(r)<ice}class Wa extends Ui{constructor(...e){super(...e),this.isExtendedTriangle=!0,this.satAxes=new Array(4).fill().map(()=>new H),this.satBounds=new Array(4).fill().map(()=>new La),this.points=[this.a,this.b,this.c],this.sphere=new fc,this.plane=new ma,this.needsUpdate=!0}intersectsSphere(e){return rce(e,this)}update(){const e=this.a,t=this.b,n=this.c,i=this.points,s=this.satAxes,o=this.satBounds,a=s[0],A=o[0];this.getNormal(a),A.setFromPoints(a,i);const l=s[1],c=o[1];l.subVectors(e,t),c.setFromPoints(l,i);const u=s[2],f=o[2];u.subVectors(t,n),f.setFromPoints(u,i);const d=s[3],p=o[3];d.subVectors(n,e),p.setFromPoints(d,i),this.sphere.setFromPoints(this.points),this.plane.setFromNormalAndCoplanarPoint(a,e),this.needsUpdate=!1}}Wa.prototype.closestPointToSegment=function(){const r=new H,e=new H,t=new ba;return function(i,s=null,o=null){const{start:a,end:A}=i,l=this.points;let c,u=1/0;for(let f=0;f<3;f++){const d=(f+1)%3;t.start.copy(l[f]),t.end.copy(l[d]),mQ(t,i,r,e),c=r.distanceToSquared(e),c<u&&(u=c,s&&s.copy(r),o&&o.copy(e))}return this.closestPointToPoint(a,r),c=a.distanceToSquared(r),c<u&&(u=c,s&&s.copy(r),o&&o.copy(a)),this.closestPointToPoint(A,r),c=A.distanceToSquared(r),c<u&&(u=c,s&&s.copy(r),o&&o.copy(A)),Math.sqrt(u)}}();Wa.prototype.intersectsTriangle=function(){const r=new Wa,e=new Array(3),t=new Array(3),n=new La,i=new La,s=new H,o=new H,a=new H,A=new H,l=new ba,c=new ba,u=new ba;return function(d,p=null,h=!1){this.needsUpdate&&this.update(),d.isExtendedTriangle?d.needsUpdate&&d.update():(r.copy(d),r.update(),d=r);const m=this.plane,g=d.plane;if(Math.abs(m.normal.dot(g.normal))>1-1e-10){const B=this.satBounds,v=this.satAxes;t[0]=d.a,t[1]=d.b,t[2]=d.c;for(let I=0;I<4;I++){const E=B[I],U=v[I];if(n.setFromPoints(U,t),E.isSeparated(n))return!1}const w=d.satBounds,C=d.satAxes;e[0]=this.a,e[1]=this.b,e[2]=this.c;for(let I=0;I<4;I++){const E=w[I],U=C[I];if(n.setFromPoints(U,e),E.isSeparated(n))return!1}for(let I=0;I<4;I++){const E=v[I];for(let U=0;U<4;U++){const S=C[U];if(s.crossVectors(E,S),n.setFromPoints(s,e),i.setFromPoints(s,t),n.isSeparated(i))return!1}}return p&&(h||console.warn("ExtendedTriangle.intersectsTriangle: Triangles are coplanar which does not support an output edge. Setting edge to 0, 0, 0."),p.start.set(0,0,0),p.end.set(0,0,0)),!0}else{const B=this.points;let v=!1,w=0;for(let y=0;y<3;y++){const Q=B[y],_=B[(y+1)%3];l.start.copy(Q),l.end.copy(_),l.delta(o);const L=v?c.start:c.end,T=nu(g.distanceToPoint(Q));if(nu(g.normal.dot(o))&&T){c.copy(l),w=2;break}if((g.intersectLine(l,L)||T)&&!nu(L.distanceTo(_))){if(w++,v)break;v=!0}}if(w===1&&d.containsPoint(c.end))return p&&(p.start.copy(c.end),p.end.copy(c.end)),!0;if(w!==2)return!1;const C=d.points;let I=!1,E=0;for(let y=0;y<3;y++){const Q=C[y],_=C[(y+1)%3];l.start.copy(Q),l.end.copy(_),l.delta(a);const L=I?u.start:u.end,T=nu(m.distanceToPoint(Q));if(nu(m.normal.dot(a))&&T){u.copy(l),E=2;break}if((m.intersectLine(l,L)||T)&&!nu(L.distanceTo(_))){if(E++,I)break;I=!0}}if(E===1&&this.containsPoint(u.end))return p&&(p.start.copy(u.end),p.end.copy(u.end)),!0;if(E!==2)return!1;if(c.delta(o),u.delta(a),o.dot(a)<0){let y=u.start;u.start=u.end,u.end=y}const U=c.start.dot(o),S=c.end.dot(o),V=u.start.dot(o),J=u.end.dot(o),z=S<V,R=U<J;return U!==J&&V!==S&&z===R?!1:(p&&(A.subVectors(c.start,u.start),A.dot(o)>0?p.start.copy(c.start):p.start.copy(u.start),A.subVectors(c.end,u.end),A.dot(o)<0?p.end.copy(c.end):p.end.copy(u.end)),!0)}}}();Wa.prototype.distanceToPoint=function(){const r=new H;return function(t){return this.closestPointToPoint(t,r),t.distanceTo(r)}}();Wa.prototype.distanceToTriangle=function(){const r=new H,e=new H,t=["a","b","c"],n=new ba,i=new ba;return function(o,a=null,A=null){const l=a||A?n:null;if(this.intersectsTriangle(o,l))return(a||A)&&(a&&l.getCenter(a),A&&l.getCenter(A)),0;let c=1/0;for(let u=0;u<3;u++){let f;const d=t[u],p=o[d];this.closestPointToPoint(p,r),f=p.distanceToSquared(r),f<c&&(c=f,a&&a.copy(r),A&&A.copy(p));const h=this[d];o.closestPointToPoint(h,r),f=h.distanceToSquared(r),f<c&&(c=f,a&&a.copy(h),A&&A.copy(r))}for(let u=0;u<3;u++){const f=t[u],d=t[(u+1)%3];n.set(this[f],this[d]);for(let p=0;p<3;p++){const h=t[p],m=t[(p+1)%3];i.set(o[h],o[m]),mQ(n,i,r,e);const g=r.distanceToSquared(e);g<c&&(c=g,a&&a.copy(r),A&&A.copy(e))}}return Math.sqrt(c)}}();class Wo{constructor(e,t,n){this.isOrientedBox=!0,this.min=new H,this.max=new H,this.matrix=new Le,this.invMatrix=new Le,this.points=new Array(8).fill().map(()=>new H),this.satAxes=new Array(3).fill().map(()=>new H),this.satBounds=new Array(3).fill().map(()=>new La),this.alignedSatBounds=new Array(3).fill().map(()=>new La),this.needsUpdate=!1,e&&this.min.copy(e),t&&this.max.copy(t),n&&this.matrix.copy(n)}set(e,t,n){this.min.copy(e),this.max.copy(t),this.matrix.copy(n),this.needsUpdate=!0}copy(e){this.min.copy(e.min),this.max.copy(e.max),this.matrix.copy(e.matrix),this.needsUpdate=!0}}Wo.prototype.update=function(){return function(){const e=this.matrix,t=this.min,n=this.max,i=this.points;for(let l=0;l<=1;l++)for(let c=0;c<=1;c++)for(let u=0;u<=1;u++){const f=1*l|2*c|4*u,d=i[f];d.x=l?n.x:t.x,d.y=c?n.y:t.y,d.z=u?n.z:t.z,d.applyMatrix4(e)}const s=this.satBounds,o=this.satAxes,a=i[0];for(let l=0;l<3;l++){const c=o[l],u=s[l],f=1<<l,d=i[f];c.subVectors(a,d),u.setFromPoints(c,i)}const A=this.alignedSatBounds;A[0].setFromPointsField(i,"x"),A[1].setFromPointsField(i,"y"),A[2].setFromPointsField(i,"z"),this.invMatrix.copy(this.matrix).invert(),this.needsUpdate=!1}}();Wo.prototype.intersectsBox=function(){const r=new La;return function(t){this.needsUpdate&&this.update();const n=t.min,i=t.max,s=this.satBounds,o=this.satAxes,a=this.alignedSatBounds;if(r.min=n.x,r.max=i.x,a[0].isSeparated(r)||(r.min=n.y,r.max=i.y,a[1].isSeparated(r))||(r.min=n.z,r.max=i.z,a[2].isSeparated(r)))return!1;for(let A=0;A<3;A++){const l=o[A],c=s[A];if(r.setFromBox(l,t),c.isSeparated(r))return!1}return!0}}();Wo.prototype.intersectsTriangle=function(){const r=new Wa,e=new Array(3),t=new La,n=new La,i=new H;return function(o){this.needsUpdate&&this.update(),o.isExtendedTriangle?o.needsUpdate&&o.update():(r.copy(o),r.update(),o=r);const a=this.satBounds,A=this.satAxes;e[0]=o.a,e[1]=o.b,e[2]=o.c;for(let f=0;f<3;f++){const d=a[f],p=A[f];if(t.setFromPoints(p,e),d.isSeparated(t))return!1}const l=o.satBounds,c=o.satAxes,u=this.points;for(let f=0;f<3;f++){const d=l[f],p=c[f];if(t.setFromPoints(p,u),d.isSeparated(t))return!1}for(let f=0;f<3;f++){const d=A[f];for(let p=0;p<4;p++){const h=c[p];if(i.crossVectors(d,h),t.setFromPoints(i,e),n.setFromPoints(i,u),t.isSeparated(n))return!1}}return!0}}();Wo.prototype.closestPointToPoint=function(){return function(e,t){return this.needsUpdate&&this.update(),t.copy(e).applyMatrix4(this.invMatrix).clamp(this.min,this.max).applyMatrix4(this.matrix),t}}();Wo.prototype.distanceToPoint=function(){const r=new H;return function(t){return this.closestPointToPoint(t,r),t.distanceTo(r)}}();Wo.prototype.distanceToBox=function(){const r=["x","y","z"],e=new Array(12).fill().map(()=>new ba),t=new Array(12).fill().map(()=>new ba),n=new H,i=new H;return function(o,a=0,A=null,l=null){if(this.needsUpdate&&this.update(),this.intersectsBox(o))return(A||l)&&(o.getCenter(i),this.closestPointToPoint(i,n),o.closestPointToPoint(n,i),A&&A.copy(n),l&&l.copy(i)),0;const c=a*a,u=o.min,f=o.max,d=this.points;let p=1/0;for(let m=0;m<8;m++){const g=d[m];i.copy(g).clamp(u,f);const B=g.distanceToSquared(i);if(B<p&&(p=B,A&&A.copy(g),l&&l.copy(i),B<c))return Math.sqrt(B)}let h=0;for(let m=0;m<3;m++)for(let g=0;g<=1;g++)for(let B=0;B<=1;B++){const v=(m+1)%3,w=(m+2)%3,C=g<<v|B<<w,I=1<<m|g<<v|B<<w,E=d[C],U=d[I];e[h].set(E,U);const V=r[m],J=r[v],z=r[w],R=t[h],y=R.start,Q=R.end;y[V]=u[V],y[J]=g?u[J]:f[J],y[z]=B?u[z]:f[J],Q[V]=f[V],Q[J]=g?u[J]:f[J],Q[z]=B?u[z]:f[J],h++}for(let m=0;m<=1;m++)for(let g=0;g<=1;g++)for(let B=0;B<=1;B++){i.x=m?f.x:u.x,i.y=g?f.y:u.y,i.z=B?f.z:u.z,this.closestPointToPoint(i,n);const v=i.distanceToSquared(n);if(v<p&&(p=v,A&&A.copy(n),l&&l.copy(i),v<c))return Math.sqrt(v)}for(let m=0;m<12;m++){const g=e[m];for(let B=0;B<12;B++){const v=t[B];mQ(g,v,n,i);const w=n.distanceToSquared(i);if(w<p&&(p=w,A&&A.copy(n),l&&l.copy(i),w<c))return Math.sqrt(w)}}return Math.sqrt(p)}}();const vm=new H,ym=new H,Cm=new H,SM=new Je,_M=new Je,RM=new Je,MM=new H;function sce(r,e,t,n,i,s){let o;return s===oi?o=r.intersectTriangle(n,t,e,!0,i):o=r.intersectTriangle(e,t,n,s!==Va,i),o===null?null:{distance:r.origin.distanceTo(i),point:i.clone()}}function oce(r,e,t,n,i,s,o){vm.fromBufferAttribute(e,n),ym.fromBufferAttribute(e,i),Cm.fromBufferAttribute(e,s);const a=sce(r,vm,ym,Cm,MM,o);if(a){t&&(SM.fromBufferAttribute(t,n),_M.fromBufferAttribute(t,i),RM.fromBufferAttribute(t,s),a.uv=Ui.getUV(MM,vm,ym,Cm,SM,_M,RM,new Je));const A={a:n,b:i,c:s,normal:new H,materialIndex:0};Ui.getNormal(vm,ym,Cm,A.normal),a.face=A,a.faceIndex=n}return a}function a3(r,e,t,n,i){const s=n*3,o=r.index.getX(s),a=r.index.getX(s+1),A=r.index.getX(s+2),l=oce(t,r.attributes.position,r.attributes.uv,o,a,A,e);return l?(l.faceIndex=n,i&&i.push(l),l):null}function ace(r,e,t,n,i,s){for(let o=n,a=n+i;o<a;o++)a3(r,e,t,o,s)}function Ace(r,e,t,n,i){let s=1/0,o=null;for(let a=n,A=n+i;a<A;a++){const l=a3(r,e,t,a);l&&l.distance<s&&(o=l,s=l.distance)}return o}function TM(r,e,t){return r===null||(r.point.applyMatrix4(e.matrixWorld),r.distance=r.point.distanceTo(t.ray.origin),r.object=e,r.distance<t.near||r.distance>t.far)?null:r}function po(r,e,t,n){const i=r.a,s=r.b,o=r.c;let a=e,A=e+1,l=e+2;t&&(a=t.getX(e),A=t.getX(e+1),l=t.getX(e+2)),i.x=n.getX(a),i.y=n.getY(a),i.z=n.getZ(a),s.x=n.getX(A),s.y=n.getY(A),s.z=n.getZ(A),o.x=n.getX(l),o.y=n.getY(l),o.z=n.getZ(l)}function NM(r,e,t,n,i,s,o){const a=t.index,A=t.attributes.position;for(let l=r,c=e+r;l<c;l++)if(po(o,l*3,a,A),o.needsUpdate=!0,n(o,l,i,s))return!0;return!1}class A3{constructor(e){this._getNewPrimitive=e,this._primitives=[]}getPrimitive(){const e=this._primitives;return e.length===0?this._getNewPrimitive():e.pop()}releasePrimitive(e){this._primitives.push(e)}}function BA(r,e){return e[r+15]===65535}function ef(r,e){return e[r+6]}function gp(r,e){return e[r+14]}function mp(r){return r+8}function Bp(r,e){return e[r+6]}function lce(r,e){return e[r+7]}const Mu=new ys,bB=new H,cce=["x","y","z"];function oU(r,e,t,n,i){let s=r*2,o=zf,a=JA,A=GA;if(BA(s,a)){const c=ef(r,A),u=gp(s,a);ace(e,t,n,c,u,i)}else{const c=mp(r);EB(c,o,n,bB)&&oU(c,e,t,n,i);const u=Bp(r,A);EB(u,o,n,bB)&&oU(u,e,t,n,i)}}function aU(r,e,t,n){let i=r*2,s=zf,o=JA,a=GA;if(BA(i,o)){const l=ef(r,a),c=gp(i,o);return Ace(e,t,n,l,c)}else{const l=lce(r,a),c=cce[l],f=n.direction[c]>=0;let d,p;f?(d=mp(r),p=Bp(r,a)):(d=Bp(r,a),p=mp(r));const m=EB(d,s,n,bB)?aU(d,e,t,n):null;if(m){const v=m.point[c];if(f?v<=s[p+l]:v>=s[p+l+3])return m}const B=EB(p,s,n,bB)?aU(p,e,t,n):null;return m&&B?m.distance<=B.distance?m:B:m||B||null}}const uce=function(){let r,e;const t=[],n=new A3(()=>new ys);return function(...o){r=n.getPrimitive(),e=n.getPrimitive(),t.push(r,e);const a=i(...o);n.releasePrimitive(r),n.releasePrimitive(e),t.pop(),t.pop();const A=t.length;return A>0&&(e=t[A-1],r=t[A-2]),a};function i(s,o,a,A,l=null,c=0,u=0){function f(v){let w=v*2,C=JA,I=GA;for(;!BA(w,C);)v=mp(v),w=v*2;return ef(v,I)}function d(v){let w=v*2,C=JA,I=GA;for(;!BA(w,C);)v=Bp(v,I),w=v*2;return ef(v,I)+gp(w,C)}let p=s*2,h=zf,m=JA,g=GA;if(BA(p,m)){const v=ef(s,g),w=gp(p,m);return wo(s,h,r),A(v,w,!1,u,c+s,r)}else{const v=mp(s),w=Bp(s,g);let C=v,I=w,E,U,S,V;if(l&&(S=r,V=e,wo(C,h,S),wo(I,h,V),E=l(S),U=l(V),U<E)){C=w,I=v;const L=E;E=U,U=L,S=V}S||(S=r,wo(C,h,S));const J=BA(C*2,m),z=a(S,J,E,u+1,c+C);let R;if(z===UM){const L=f(C),Z=d(C)-L;R=A(L,Z,!0,u+1,c+C,S)}else R=z&&i(C,o,a,A,l,c,u+1);if(R)return!0;V=e,wo(I,h,V);const y=BA(I*2,m),Q=a(V,y,U,u+1,c+I);let _;if(Q===UM){const L=f(I),Z=d(I)-L;_=A(L,Z,!0,u+1,c+I,V)}else _=Q&&i(I,o,a,A,l,c,u+1);return!!_}}}(),fce=function(){const r=new Wa,e=new Wa,t=new Le,n=new Wo,i=new Wo;return function s(o,a,A,l,c=null){let u=o*2,f=zf,d=JA,p=GA;if(c===null&&(A.boundingBox||A.computeBoundingBox(),n.set(A.boundingBox.min,A.boundingBox.max,l),c=n),BA(u,d)){const m=a,g=m.index,B=m.attributes.position,v=A.index,w=A.attributes.position,C=ef(o,p),I=gp(u,d);if(t.copy(l).invert(),A.boundsTree)return wo(o,f,i),i.matrix.copy(t),i.needsUpdate=!0,A.boundsTree.shapecast({intersectsBounds:U=>i.intersectsBox(U),intersectsTriangle:U=>{U.a.applyMatrix4(l),U.b.applyMatrix4(l),U.c.applyMatrix4(l),U.needsUpdate=!0;for(let S=C*3,V=(I+C)*3;S<V;S+=3)if(po(e,S,g,B),e.needsUpdate=!0,U.intersectsTriangle(e))return!0;return!1}});for(let E=C*3,U=I+C*3;E<U;E+=3){po(r,E,g,B),r.a.applyMatrix4(t),r.b.applyMatrix4(t),r.c.applyMatrix4(t),r.needsUpdate=!0;for(let S=0,V=v.count;S<V;S+=3)if(po(e,S,v,w),e.needsUpdate=!0,r.intersectsTriangle(e))return!0}}else{const m=o+8,g=p[o+6];return wo(m,f,Mu),!!(c.intersectsBox(Mu)&&s(m,a,A,l,c)||(wo(g,f,Mu),c.intersectsBox(Mu)&&s(g,a,A,l,c)))}}}();function EB(r,e,t,n){return wo(r,e,Mu),t.intersectBox(Mu,n)}const AU=[];let a0,zf,JA,GA;function sh(r){a0&&AU.push(a0),a0=r,zf=new Float32Array(r),JA=new Uint16Array(r),GA=new Uint32Array(r)}function wm(){a0=null,zf=null,JA=null,GA=null,AU.length&&sh(AU.pop())}const Sw=Symbol("skip tree generation"),_w=new ys,Rw=new ys,ru=new Le,Fl=new Wo,Vd=new Wo,Dd=new H,Fm=new H,dce=new H,hce=new H,pce=new H,VM=new ys,Ao=new A3(()=>new Wa);class xh{static serialize(e,t={}){if(t.isBufferGeometry)return console.warn("MeshBVH.serialize: The arguments for the function have changed. See documentation for new signature."),xh.serialize(arguments[0],{cloneBuffers:arguments[2]===void 0?!0:arguments[2]});t={cloneBuffers:!0,...t};const n=e.geometry,i=e._roots,s=n.getIndex();let o;return t.cloneBuffers?o={roots:i.map(a=>a.slice()),index:s.array.slice()}:o={roots:i,index:s.array},o}static deserialize(e,t,n={}){if(typeof n=="boolean")return console.warn("MeshBVH.deserialize: The arguments for the function have changed. See documentation for new signature."),xh.deserialize(arguments[0],arguments[1],{setIndex:arguments[2]===void 0?!0:arguments[2]});n={setIndex:!0,...n};const{index:i,roots:s}=e,o=new xh(t,{...n,[Sw]:!0});if(o._roots=s,n.setIndex){const a=t.getIndex();if(a===null){const A=new pt(e.index,1,!1);t.setIndex(A)}else a.array!==i&&(a.array.set(i),a.needsUpdate=!0)}return o}constructor(e,t={}){if(e.isBufferGeometry){if(e.index&&e.index.isInterleavedBufferAttribute)throw new Error("MeshBVH: InterleavedBufferAttribute is not supported for the index attribute.")}else throw new Error("MeshBVH: Only BufferGeometries are supported.");if(t=Object.assign({strategy:s3,maxDepth:40,maxLeafTris:10,verbose:!0,useSharedArrayBuffer:!1,setBoundingBox:!0,onProgress:null,[Sw]:!1},t),t.useSharedArrayBuffer&&typeof SharedArrayBuffer>"u")throw new Error("MeshBVH: SharedArrayBuffer is not available.");this._roots=null,t[Sw]||(this._roots=tce(e,t),!e.boundingBox&&t.setBoundingBox&&(e.boundingBox=this.getBoundingBox(new ys))),this.geometry=e}refit(e=null){e&&Array.isArray(e)&&(e=new Set(e));const t=this.geometry,n=t.index.array,i=t.attributes.position;let s,o,a,A,l=0;const c=this._roots;for(let f=0,d=c.length;f<d;f++)s=c[f],o=new Uint32Array(s),a=new Uint16Array(s),A=new Float32Array(s),u(0,l),l+=s.byteLength;function u(f,d,p=!1){const h=f*2;if(a[h+15]===sU){const g=o[f+6],B=a[h+14];let v=1/0,w=1/0,C=1/0,I=-1/0,E=-1/0,U=-1/0;for(let S=3*g,V=3*(g+B);S<V;S++){const J=n[S],z=i.getX(J),R=i.getY(J),y=i.getZ(J);z<v&&(v=z),z>I&&(I=z),R<w&&(w=R),R>E&&(E=R),y<C&&(C=y),y>U&&(U=y)}return A[f+0]!==v||A[f+1]!==w||A[f+2]!==C||A[f+3]!==I||A[f+4]!==E||A[f+5]!==U?(A[f+0]=v,A[f+1]=w,A[f+2]=C,A[f+3]=I,A[f+4]=E,A[f+5]=U,!0):!1}else{const g=f+8,B=o[f+6],v=g+d,w=B+d;let C=p,I=!1,E=!1;e?C||(I=e.has(v),E=e.has(w),C=!I&&!E):(I=!0,E=!0);const U=C||I,S=C||E;let V=!1;U&&(V=u(g,d,C));let J=!1;S&&(J=u(B,d,C));const z=V||J;if(z)for(let R=0;R<3;R++){const y=g+R,Q=B+R,_=A[y],L=A[y+3],T=A[Q],Z=A[Q+3];A[f+R]=_<T?_:T,A[f+R+3]=L>Z?L:Z}return z}}}traverse(e,t=0){const n=this._roots[t],i=new Uint32Array(n),s=new Uint16Array(n);o(0);function o(a,A=0){const l=a*2,c=s[l+15]===sU;if(c){const u=i[a+6],f=s[l+14];e(A,c,new Float32Array(n,a*4,6),u,f)}else{const u=a+o0/4,f=i[a+6],d=i[a+7];e(A,c,new Float32Array(n,a*4,6),d)||(o(u,A+1),o(f,A+1))}}}raycast(e,t=Do){const n=this._roots,i=this.geometry,s=[],o=t.isMaterial,a=Array.isArray(t),A=i.groups,l=o?t.side:t;for(let c=0,u=n.length;c<u;c++){const f=a?t[A[c].materialIndex].side:l,d=s.length;if(sh(n[c]),oU(0,i,f,e,s),wm(),a){const p=A[c].materialIndex;for(let h=d,m=s.length;h<m;h++)s[h].face.materialIndex=p}}return s}raycastFirst(e,t=Do){const n=this._roots,i=this.geometry,s=t.isMaterial,o=Array.isArray(t);let a=null;const A=i.groups,l=s?t.side:t;for(let c=0,u=n.length;c<u;c++){const f=o?t[A[c].materialIndex].side:l;sh(n[c]);const d=aU(0,i,f,e);wm(),d!=null&&(a==null||d.distance<a.distance)&&(a=d,o&&(d.face.materialIndex=A[c].materialIndex))}return a}intersectsGeometry(e,t){const n=this.geometry;let i=!1;for(const s of this._roots)if(sh(s),i=fce(0,n,e,t),wm(),i)break;return i}shapecast(e,t,n){const i=this.geometry;if(e instanceof Function){if(t){const f=t;t=(d,p,h,m)=>{const g=p*3;return f(d,g,g+1,g+2,h,m)}}e={boundsTraverseOrder:n,intersectsBounds:e,intersectsTriangle:t,intersectsRange:null},console.warn("MeshBVH: Shapecast function signature has changed and now takes an object of callbacks as a second argument. See docs for new signature.")}const s=Ao.getPrimitive();let{boundsTraverseOrder:o,intersectsBounds:a,intersectsRange:A,intersectsTriangle:l}=e;if(A&&l){const f=A;A=(d,p,h,m,g)=>f(d,p,h,m,g)?!0:NM(d,p,i,l,h,m,s)}else A||(l?A=(f,d,p,h)=>NM(f,d,i,l,p,h,s):A=(f,d,p)=>p);let c=!1,u=0;for(const f of this._roots){if(sh(f),c=uce(0,i,a,A,o,u),wm(),c)break;u+=f.byteLength}return Ao.releasePrimitive(s),c}bvhcast(e,t,n){let{intersectsRanges:i,intersectsTriangles:s}=n;const o=this.geometry.index,a=this.geometry.attributes.position,A=e.geometry.index,l=e.geometry.attributes.position;ru.copy(t).invert();const c=Ao.getPrimitive(),u=Ao.getPrimitive();if(s){let d=function(p,h,m,g,B,v,w,C){for(let I=m,E=m+g;I<E;I++){po(u,I*3,A,l),u.a.applyMatrix4(t),u.b.applyMatrix4(t),u.c.applyMatrix4(t),u.needsUpdate=!0;for(let U=p,S=p+h;U<S;U++)if(po(c,U*3,o,a),c.needsUpdate=!0,s(c,u,U,I,B,v,w,C))return!0}return!1};if(i){const p=i;i=function(h,m,g,B,v,w,C,I){return p(h,m,g,B,v,w,C,I)?!0:d(h,m,g,B,v,w,C,I)}}else i=d}e.getBoundingBox(Rw),Rw.applyMatrix4(t);const f=this.shapecast({intersectsBounds:d=>Rw.intersectsBox(d),intersectsRange:(d,p,h,m,g,B)=>(_w.copy(B),_w.applyMatrix4(ru),e.shapecast({intersectsBounds:v=>_w.intersectsBox(v),intersectsRange:(v,w,C,I,E)=>i(d,p,v,w,m,g,I,E)}))});return Ao.releasePrimitive(c),Ao.releasePrimitive(u),f}intersectsBox(e,t){return Fl.set(e.min,e.max,t),Fl.needsUpdate=!0,this.shapecast({intersectsBounds:n=>Fl.intersectsBox(n),intersectsTriangle:n=>Fl.intersectsTriangle(n)})}intersectsSphere(e){return this.shapecast({intersectsBounds:t=>e.intersectsBox(t),intersectsTriangle:t=>t.intersectsSphere(e)})}closestPointToGeometry(e,t,n={},i={},s=0,o=1/0){e.boundingBox||e.computeBoundingBox(),Fl.set(e.boundingBox.min,e.boundingBox.max,t),Fl.needsUpdate=!0;const a=this.geometry,A=a.attributes.position,l=a.index,c=e.attributes.position,u=e.index,f=Ao.getPrimitive(),d=Ao.getPrimitive();let p=Fm,h=dce,m=null,g=null;i&&(m=hce,g=pce);let B=1/0,v=null,w=null;return ru.copy(t).invert(),Vd.matrix.copy(ru),this.shapecast({boundsTraverseOrder:C=>Fl.distanceToBox(C),intersectsBounds:(C,I,E)=>E<B&&E<o?(I&&(Vd.min.copy(C.min),Vd.max.copy(C.max),Vd.needsUpdate=!0),!0):!1,intersectsRange:(C,I)=>{if(e.boundsTree)return e.boundsTree.shapecast({boundsTraverseOrder:E=>Vd.distanceToBox(E),intersectsBounds:(E,U,S)=>S<B&&S<o,intersectsRange:(E,U)=>{for(let S=E*3,V=(E+U)*3;S<V;S+=3){po(d,S,u,c),d.a.applyMatrix4(t),d.b.applyMatrix4(t),d.c.applyMatrix4(t),d.needsUpdate=!0;for(let J=C*3,z=(C+I)*3;J<z;J+=3){po(f,J,l,A),f.needsUpdate=!0;const R=f.distanceToTriangle(d,p,m);if(R<B&&(h.copy(p),g&&g.copy(m),B=R,v=J/3,w=S/3),R<s)return!0}}}});{const E=u?u.count:c.count;for(let U=0,S=E;U<S;U+=3){po(d,U,u,c),d.a.applyMatrix4(t),d.b.applyMatrix4(t),d.c.applyMatrix4(t),d.needsUpdate=!0;for(let V=C*3,J=(C+I)*3;V<J;V+=3){po(f,V,l,A),f.needsUpdate=!0;const z=f.distanceToTriangle(d,p,m);if(z<B&&(h.copy(p),g&&g.copy(m),B=z,v=V/3,w=U/3),z<s)return!0}}}}}),Ao.releasePrimitive(f),Ao.releasePrimitive(d),B===1/0?null:(n.point?n.point.copy(h):n.point=h.clone(),n.distance=B,n.faceIndex=v,i&&(i.point?i.point.copy(g):i.point=g.clone(),i.point.applyMatrix4(ru),h.applyMatrix4(ru),i.distance=h.sub(i.point).length(),i.faceIndex=w),n)}closestPointToPoint(e,t={},n=0,i=1/0){const s=n*n,o=i*i;let a=1/0,A=null;if(this.shapecast({boundsTraverseOrder:c=>(Dd.copy(e).clamp(c.min,c.max),Dd.distanceToSquared(e)),intersectsBounds:(c,u,f)=>f<a&&f<o,intersectsTriangle:(c,u)=>{c.closestPointToPoint(e,Dd);const f=e.distanceToSquared(Dd);return f<a&&(Fm.copy(Dd),a=f,A=u),f<s}}),a===1/0)return null;const l=Math.sqrt(a);return t.point?t.point.copy(Fm):t.point=Fm.clone(),t.distance=l,t.faceIndex=A,t}getBoundingBox(e){return e.makeEmpty(),this._roots.forEach(n=>{wo(0,new Float32Array(n),VM),e.union(VM)}),e}}const Mw=new Ep,DM=new Le,gce=bn.prototype.raycast;function mce(r,e){if(this.geometry.boundsTree){if(this.material===void 0)return;DM.copy(this.matrixWorld).invert(),Mw.copy(r.ray).applyMatrix4(DM);const t=this.geometry.boundsTree;if(r.firstHitOnly===!0){const n=TM(t.raycastFirst(Mw,this.material),this,r);n&&e.push(n)}else{const n=t.raycast(Mw,this.material);for(let i=0,s=n.length;i<s;i++){const o=TM(n[i],this,r);o&&e.push(o)}}}else gce.call(this,r,e)}function Bce(r){return this.boundsTree=new xh(this,r),this.boundsTree}function vce(){this.boundsTree=null}const yce=""+new URL("tick-d416ee47.svg",import.meta.url).href,SB=[0,400,560,2400,4800],_B=[0,500,700,3e3,6e3],lU=[],la=[],BQ=1024,l3=44100;for(let r=0;r<SB.length;r++)la[r]=Math.round(2*BQ/l3*SB[r]);for(let r=0;r<_B.length;r++)lU[r]=Math.round(2*BQ/l3*_B[r]);class RB{constructor(e){this.vrm=e;const t=(n,i)=>{requestAnimationFrame(t),this.update(n,i)};t()}start(e){this.audioContext=new AudioContext,this.mediaStreamSource=this.audioContext.createMediaStreamSource(e),this.meter=RB.createAudioMeter(this.audioContext),this.mediaStreamSource.connect(this.meter)}startFromAudioFile(e){this.audioContext||(this.audioContext=new AudioContext),this.userSpeechAnalyzer||(this.userSpeechAnalyzer=this.audioContext.createAnalyser()),this.userSpeechAnalyzer.smoothingTimeConstant=.5,this.userSpeechAnalyzer.fftSize=BQ,this.mediaStreamSource&&this.mediaStreamSource.stop(),this.audioContext.decodeAudioData(e).then(t=>{this.mediaStreamSource=this.audioContext.createBufferSource(),this.mediaStreamSource.buffer=t,this.meter=RB.createAudioMeter(this.audioContext),this.mediaStreamSource.connect(this.meter),this.mediaStreamSource.connect(this.audioContext.destination),this.mediaStreamSource.start(),this.mediaStreamSource.connect(this.userSpeechAnalyzer)})}destroy(){var e,t,n;return(e=this.meter)==null||e.shutdown(),this.meter=null,(t=this.mediaStreamSource)==null||t.disconnect(),((n=this.audioContext)==null?void 0:n.close().catch(()=>{}))||Promise.resolve()}update(e){if(this.meter){const{volume:t}=this.meter;if(t<.01)this.vrm.expressionManager.setValue(Zr.Oh,0),this.vrm.expressionManager.setValue(Zr.Ah,0),this.vrm.expressionManager.setValue(Zr.Ee,0);else{const{ah:n,oh:i,ee:s}=this.update2();this.vrm.expressionManager.setValue(Zr.Oh,i),this.vrm.expressionManager.setValue(Zr.Ah,n),this.vrm.expressionManager.setValue(Zr.Ee,s),this.vrm.expressionManager.update(e)}}}update2(){function e(l){const u=new Float32Array(l.length);for(let f=0;f<l.length;f++)u[f]=.5+(l[f]+20)/140;return u}const t=new Float32Array(this.userSpeechAnalyzer.frequencyBinCount);this.userSpeechAnalyzer.getFloatFrequencyData(t);const n=e(t),i=new Float32Array(SB.length),s=new Float32Array(_B.length);for(let l=0;l<SB.length-1;l++){for(let c=la[l];c<=la[l+1];c++)n[c]>0&&(i[l]+=n[c]);i[l]/=la[l+1]-la[l]}for(let l=0;l<_B.length-1;l++){for(let c=la[l];c<=la[l+1];c++)n[c]>0&&(s[l]+=n[c]);i[l]/=la[l+1]-la[l],s[l]=s[l]/(lU[l+1]-lU[l])}const o=Math.max(s[1],i[1])>.2?1-2*Math.max(i[2],s[2]):(1-2*Math.max(i[2],s[2]))*5*Math.max(i[1],s[1]),a=3*Math.max(i[3],s[3]),A=.8*(Math.max(i[1],s[1])-Math.max(i[3],s[3]));return{oh:o,ee:A,ah:a}}static createAudioMeter(e){const t=e.createScriptProcessor(512);return t.onaudioprocess=n=>{const i=n.inputBuffer.getChannelData(0),s=i.length;let o=0,a;for(let l=0;l<s;l++)a=i[l],Math.abs(a)>=t.clipLevel&&(t.clipping=!0,t.lastClip=window.performance.now()),o+=a*a;const A=Math.sqrt(o/s);t.volume=Math.max(A,t.volume*t.averaging)},t.clipping=!1,t.lastClip=0,t.volume=0,t.clipLevel=.98,t.averaging=.95,t.clipLag=750,t.connect(e.destination),t.checkClipping=()=>t.clipping?(t.lastClip+t.clipLag<window.performance.now()&&(t.clipping=!1),t.clipping):!1,t.shutdown=()=>{t.disconnect(),t.onaudioprocess=null},t}}const Cce="_SelectorContainerPos_bngsc_1",wce="_scrollContainer_bngsc_13",Fce="_traitTitleWrap_bngsc_33",Ice="_topLine_bngsc_45",Uce="_bottomLine_bngsc_73",xce="_traitTitle_bngsc_33",Qce="_active_bngsc_123",bce="_selectorButton_bngsc_127",Ece="_tickStyle_bngsc_140",Sce="_tickStyleInActive_bngsc_147",Dr={SelectorContainerPos:Cce,scrollContainer:wce,"selector-container":"_selector-container_bngsc_26",traitTitleWrap:Fce,topLine:Ice,bottomLine:Uce,traitTitle:xce,"selector-button":"_selector-button_bngsc_112",active:Qce,selectorButton:bce,"trait-icon":"_trait-icon_bngsc_133",tickStyle:Ece,tickStyleInActive:Sce,"icon-hidden":"_icon-hidden_bngsc_151"},_ce="_tokenBoxWrap_jp0ul_1",Rce="_mask_jp0ul_7",Mce="_timer_jp0ul_31",Tce="_level_jp0ul_42",Nce="_mythic_jp0ul_55",Vce="_epic_jp0ul_60",Dce="_rare_jp0ul_65",kce="_uncommon_jp0ul_70",Lce="_common_jp0ul_75",Wce="_none_jp0ul_80",Zce="_value_jp0ul_85",Pce="_frame_jp0ul_95",Jce="_emptyIcon_jp0ul_111",Gce="_badge_jp0ul_123",Oce="_frameActive_jp0ul_131",oA={tokenBoxWrap:_ce,mask:Rce,timer:Mce,level:Tce,mythic:Nce,epic:Vce,rare:Dce,uncommon:kce,common:Lce,none:Wce,value:Zce,frame:Pce,emptyIcon:Jce,badge:Gce,frameActive:Oce,default:"_default_jp0ul_159"},cU=r=>{const{size:e,active:t,onClick:n,level:i,icon:s,rarity:o,style:a}=r;return ie.jsxs("div",{className:oA.tokenBoxWrap,style:{width:e,height:e},onClick:n,children:[t&&ie.jsx("div",{className:qu(oA.frame,oA.frameActive)}),ie.jsx("div",{className:qu(oA.frame,o&&oA[o])}),ie.jsx("img",{src:s,className:oA.emptyIcon,style:a}),i&&ie.jsxs("div",{className:qu(oA.level,o&&oA[o]),children:["Lv.",i]})]})};Xt.prototype.computeBoundsTree=Bce;Xt.prototype.disposeBoundsTree=vce;bn.prototype.raycast=mce;function Hce({templateInfo:r,animationManager:e,blinkManager:t,lookatManager:n,isNewClass:i,effectManager:s,selectClass:o}){const{avatar:a,setAvatar:A,currentTraitName:l,currentOptions:c,selectedOptions:u,setSelectedOptions:f,model:d,setLipSync:p,mousePosition:h,removeOption:m,saveUserSelection:g,setIsChangingWholeAvatar:B}=Ie.useContext(Al),{playSound:v}=Ie.useContext(zo),{isMute:w}=Ie.useContext(Po),{isLoading:C,setIsLoading:I}=Ie.useContext(Ho),{t:E}=Ie.useContext(eo),[U,S]=Ie.useState("0"),[,V]=Ie.useState(1),[J,z]=Ie.useState(null),[R,y]=Ie.useState(new Map),Q=(k,q)=>{y(R.set(k,q))},_=()=>{y(new Map)};Ie.useEffect(()=>{z(L())},[r]);const L=()=>{const k=r.traitRestrictions,q={};for(const ee in k)_n(k[ee].restrictedTraits).map(X=>{k[X]==null&&(k[X]={}),k[X].restrictedTraits==null&&(k[X].restrictedTraits=[]),k[X].restrictedTraits=[...new Set([...k[X].restrictedTraits,ee])]}),_n(k[ee].restrictedTypes).map(X=>{q[X]==null&&(q[X]={}),q[X].restrictedTraits==null&&(q[X].restrictedTraits=[]),q[X].restrictedTraits=[...new Set([...q[X].restrictedTraits,ee])]});for(const ee in r.typeRestrictions)q[ee]==null&&(q[ee]={}),q[ee].restrictedTypes==null&&(q[ee].restrictedTypes=[]),q[ee].restrictedTypes=[...new Set([...q[ee].restrictedTypes,..._n(r.typeRestrictions[ee])])],_n(r.typeRestrictions[ee]).map(X=>{q[X]==null&&(q[X]={}),q[X].restrictedTypes==null&&(q[X].restrictedTypes=[]),q[X].restrictedTypes=[...new Set([...q[X].restrictedTypes,ee])]});return{traitRestrictions:k,typeRestrictions:q}},T=k=>{G(k).then(q=>{let ee={};q.map($=>{ee={...ee,...P($)}});const X={...a,...ee};setTimeout(()=>{Object.keys(X).length>0&&T_(X),!w&&v("characterLoad",300)},s.transitionTime),A(X)})};Ie.useEffect(()=>{u.length>0&&(B(!0),u.length>1&&(s.setTransitionEffect("fade_out_avatar"),s.playFadeOutEffect(),_()),T(u),f([]))},[u]);const Z=k=>{const q=k!=null;if(!C){if(k==null)k={item:null,trait:r.traits.find(ee=>ee.name===l)};else if(R.get(k.trait.trait)===k.key)return;if(k.avatarIndex!=null){i(k.avatarIndex)&&o(k.avatarIndex);return}s.setTransitionEffect("switch_item"),k.selected=!0,G(_n(k),q).then(ee=>{let X={};ee.map(se=>{X={...X,...P(se)}});const $={...a,...X};setTimeout(()=>{Object.keys($).length>0&&T_($)},s.transitionTime),A($)})}},G=(k,q=!0)=>{for(const ae of k)Q(ae.trait.trait,ae.key);q&&(k=D(k)),g(r.name,k);let ee=!0;if(k.map(ae=>{ae.item!=null&&(ee=!1)}),ee===!0)return new Promise(ae=>{ae(k)});I(!0);const X=new QV,$=new Jx(X);$.register(ae=>new T$(ae));const se=new Np(X);return X.onProgress=function(ae,de,fe){V(Math.round(de/fe*100))},new Promise(ae=>{const de=[];X.onLoad=function(){V(0),ae(de),I(!1)},X.onError=function(ge){console.warn("error loading "+ge)},X.onProgress=function(ge,Qe,Ue){V(Math.round(Qe/Ue*100))};const fe=r.traitsDirectory;k.map((ge,Qe)=>{var Ne,Ze,j;if(ge.selected&&S(ge.key),ge==null){de[Qe]=null;return}const Ue=[];_n((Ne=ge==null?void 0:ge.item)==null?void 0:Ne.directory).map((O,le)=>{$.loadAsync(fe+O).then(ue=>{Ue[le]=ue})});const xe=[];_n((Ze=ge==null?void 0:ge.textureTrait)==null?void 0:Ze.directory).map((O,le)=>{se.load(fe+O,ue=>{ue.flipY=!1,xe[le]=ue})});const Fe=[];_n((j=ge==null?void 0:ge.colorTrait)==null?void 0:j.value).map((O,le)=>{Fe[le]=new Ve(O)}),de[Qe]={item:ge==null?void 0:ge.item,trait:ge==null?void 0:ge.trait,textureTrait:ge==null?void 0:ge.textureTrait,colorTrait:ge==null?void 0:ge.colorTrait,models:Ue,textures:xe,colors:Fe}})})},D=k=>{var ee,X,$;let q=[];for(let se=0;se<k.length;se++){const ae=k[se];if(!q.includes(ae.trait.name)){const de=J==null?void 0:J.typeRestrictions;de&&_n((ee=ae.item)==null?void 0:ee.type).map(ge=>{var Qe,Ue;q=[...new Set([...q,...x(_n((Qe=de[ge])==null?void 0:Qe.restrictedTypes)),..._n((Ue=de[ge])==null?void 0:Ue.restrictedTraits)])]});const fe=J==null?void 0:J.traitRestrictions;fe&&(q=[...new Set([...q,...x(_n((X=fe[ae.trait.name])==null?void 0:X.restrictedTypes)),..._n(($=fe[ae.trait.name])==null?void 0:$.restrictedTraits)])])}}return q.forEach(se=>{var de;let ae=!1;Q(se,null);for(let fe=0;fe<k.length;fe++)if(((de=k[fe].trait)==null?void 0:de.name)===se){k[fe]={item:null,trait:r.traits.find(ge=>ge.name===se)},ae=!0;break}ae||k.push({item:null,trait:r.traits.find(fe=>fe.name===se)})}),k},x=k=>{var ee,X;const q=[];for(const $ in a)for(let se=0;se<k.length;se++){const ae=k[se];if((X=(ee=a[$].traitInfo)==null?void 0:ee.type)!=null&&X.includes(ae)){q.push($);break}}return q},P=k=>{const q=k.item,ee=k.trait,X=k.textureTrait,$=k.colorTrait,se=k.models,ae=k.textures,de=k.colors;if(q==null)return a&&a[ee.name]&&a[ee.name].vrm&&setTimeout(()=>{II(a[ee.name].vrm)},s.transitionTime),{[ee.name]:{}};const fe=[];let ge=null;if(se.map(Qe=>{ge=Qe.userData.vrm,_n(r.lipSyncTraits).indexOf(ee.trait)!==-1&&p(new RB(ge)),Jee(ge),_n(r.blinkerTraits).indexOf(ee.trait)!==-1&&t.addBlinker(ge),n.addVRM(ge),e.startAnimation(ge),q.meshTargets&&_n(q.meshTargets).map(Fe=>{const Ne=ge.scene.getObjectByName(Fe);Ne!=null&&Ne.isMesh&&fe.push(Ne)});const Ue=_n(q.cullingIgnore),xe=[];ge.scene.traverse(Fe=>{!q.meshTargets&&Fe.isMesh&&fe.push(Fe),Fe.frustumCulled=!1,Fe.isMesh&&(s.setCustomShader(Fe.material[0]),s.setCustomShader(Fe.material[1]),Ue.indexOf(Fe.name)===-1&&xe.push(Fe),Fe.geometry.boundsTree==null&&Fe.geometry.computeBoundsTree({strategy:o3}),Zee(Fe.geometry),Fe.isSkinnedMesh&&Pee(Fe))}),GD(ge,{cullingLayer:q.cullingLayer!=null?q.cullingLayer:ee.cullingLayer!=null?ee.cullingLayer:r.defaultCullingLayer!=null?r.defaultCullingLayer:-1,cullingDistance:q.cullingDistance!=null?q.cullingDistance:ee.cullingDistance!=null?ee.cullingDistance:r.defaultCullingDistance!=null?r.defaultCullingDistance:null,cullingMeshes:xe})}),fe.map((Qe,Ue)=>{if(ae){const xe=ae[Ue]||ae[0];xe!=null&&(Qe.material[0].map=xe,Qe.material[0].shadeMultiplyTexture=xe)}if(de){const xe=de[Ue]||de[0];xe!=null&&(Qe.material[0].uniforms.litFactor.value=xe,Qe.material[0].uniforms.shadeColorFactor.value=new Ve(xe.r*.8,xe.g*.8,xe.b*.8))}}),a&&a[ee.name]&&a[ee.name].vrm&&setTimeout(()=>{II(a[ee.name].vrm)},s.transitionTime),ge){const Qe=ge.scene;Qe.visible=!1,d.add(Qe),e.update(),setTimeout(()=>{const Ue=new Event("mousemove");Ue.x=h.x,Ue.y=h.y,window.dispatchEvent(Ue),Qe.visible=!0,s.getTransitionEffect("switch_item")?s.playSwitchItemEffect():s.playFadeInEffect()},s.transitionTime)}return{[ee.name]:{traitInfo:q,textureInfo:X,colorInfo:$,name:q.name,model:ge&&ge.scene,vrm:ge}}};function oe(k){return k.title&&ie.jsxs("div",{className:Dr.traitTitleWrap,children:[ie.jsx("div",{className:Dr.topLine}),ie.jsx("div",{className:Dr.traitTitle,children:k.title})]})}function M(){const k=!!R.get(l);return m?ie.jsx("div",{className:`${Dr.selectorButton} ${Dr["selector-button"]} ${l?"":Dr.active}`,onClick:()=>{s.getTransitionEffect("normal")&&(Z(null),S(""),s.setTransitionEffect("normal"))},children:ie.jsx(cU,{size:56,resolution:2048,numFrames:128,id:"head",icon:Jle,rarity:k?"none":"mythic"})},"no-trait"):ie.jsx(ie.Fragment,{})}return!!l&&ie.jsxs("div",{className:Dr.SelectorContainerPos,children:[ie.jsx(oe,{title:E(`editor.${l}`)}),ie.jsx("div",{className:Dr.bottomLine}),ie.jsx("div",{className:Dr.scrollContainer,children:ie.jsxs("div",{className:Dr["selector-container"],children:[ie.jsx(M,{}),c.map(k=>{let q=k.key===U;return R.size===0?q=!1:q=R.get(k.trait.trait)===k.key,ie.jsxs("div",{className:`${Dr.selectorButton} ${Dr["selector-button"]} ${q?Dr.active:""}`,onClick:()=>{s.getTransitionEffect("normal")&&(Z(k),V(1))},children:[ie.jsx(cU,{size:56,resolution:2048,numFrames:128,icon:k.icon,rarity:q?"mythic":"none",style:k.iconHSL?{filter:"brightness("+(k.iconHSL.l+.5)+") hue-rotate("+k.iconHSL.h*360+"deg) saturate("+k.iconHSL.s*100+"%)"}:{}}),ie.jsx("img",{src:yce,className:a[l]&&a[l].id===k.item.id?Dr.tickStyle:Dr.tickStyleInActive})]},k.key)})]})})]})}function zce({animationManager:r,blinkManager:e,lookatManager:t,effectManager:n,fetchNewModel:i}){const{manifest:s,currentTraitName:o,setCurrentTraitName:a,awaitDisplay:A,setCurrentOptions:l,setSelectedOptions:c,setAwaitDisplay:u,setRemoveOption:f,loadUserSelection:d,templateInfo:p,moveCamera:h}=Ie.useContext(Al),{isMute:m}=Ie.useContext(Po),{t:g}=Ie.useContext(eo),{playSound:B}=Ie.useContext(zo),[v,w]=et.useState(!1);Ie.useEffect(()=>{A&&(c(d(p.name)||zD(p)),u(!1)),a(null)},[p]);const C=S=>{if(!m&&B("optionClick"),S.name===o){v?(h({targetY:S.cameraTarget.height,distance:S.cameraTarget.distance}),w(!1)):(h({targetY:.8,distance:3.2}),w(!0)),a(null);return}f(_n(p.requiredTraits).indexOf(S.name)===-1),h({targetY:S.cameraTarget.height,distance:S.cameraTarget.distance}),l(XD(S,p)),a(S.name)},I=S=>p!=s[S],E=S=>{i(S)};function U(S){return S.title&&ie.jsxs("div",{className:iA.mainTitleWrap,children:[ie.jsx("div",{className:iA.topLine}),ie.jsx("div",{className:iA.mainTitle,children:S.title})]})}return ie.jsxs(Ie.Fragment,{children:[ie.jsxs("div",{className:iA.SideMenu,children:[ie.jsx(U,{title:g("editor.title")}),ie.jsx("div",{className:iA.bottomLine}),ie.jsx("div",{className:iA.scrollContainer,children:ie.jsx("div",{className:iA["selector-container"],children:p.traits&&p.traits.map((S,V)=>ie.jsx("div",{className:iA.selectorButton,children:ie.jsx(cU,{size:56,resolution:2048,numFrames:128,icon:p.traitIconsDirectorySvg+S.iconSvg,rarity:o!==S.name?"none":"mythic",onClick:()=>{C(S)}})},V))})})]}),ie.jsx(Hce,{animationManager:r,templateInfo:p,blinkManager:e,lookatManager:t,effectManager:n,selectClass:E,isNewClass:I})]})}function Xce({animationManager:r,blinkManager:e,lookatManager:t,effectManager:n,fetchNewModel:i}){const{isLoading:s,setViewMode:o}=et.useContext(Ho),{resetAvatar:a,getRandomCharacter:A,isChangingWholeAvatar:l,setIsChangingWholeAvatar:c}=et.useContext(Al),{playSound:u}=et.useContext(zo),{isMute:f}=et.useContext(Po),d=()=>{!f&&u("backNextButton"),a(),o(Zt.CREATE)},p=()=>{!f&&u("backNextButton"),o(Zt.BIO)},h=()=>{l||(!f&&u("randomizeButton"),A())};Ie.useEffect(()=>{const g=()=>c(!1);return n.addEventListener("fadeintraitend",g),n.addEventListener("fadeinavatarend",g),()=>{n.removeEventListener("fadeintraitend",g),n.removeEventListener("fadeinavatarend",g)}},[]);const{t:m}=Ie.useContext(eo);return ie.jsxs("div",{className:Td.container,children:[ie.jsx("div",{className:`loadingIndicator ${s?"active":""}`,children:ie.jsx("img",{className:"rotate",src:"ui/loading.svg"})}),ie.jsx("div",{className:"sectionTitle",children:m("pageTitles.chooseAppearance")}),ie.jsx(zce,{animationManager:r,blinkManager:e,lookatManager:t,effectManager:n,fetchNewModel:i}),ie.jsxs("div",{className:Td.buttonContainer,children:[ie.jsx(Ri,{theme:"light",text:m("callToAction.back"),size:14,className:Td.buttonLeft,onClick:d}),ie.jsx(Ri,{theme:"light",text:m("callToAction.next"),size:14,className:Td.buttonRight,onClick:p}),ie.jsx(Ri,{theme:"light",text:m("callToAction.randomize"),size:14,className:Td.buttonCenter,onClick:h})]})]})}const Yce="_languageSwitchWrap_83v6a_1",Kce={languageSwitchWrap:Yce},kM={en:{nativeName:"English"},ru:{nativeName:""},zh:{nativeName:""}};function jce(){const{t:r,i18n:e}=nL();return ie.jsx("div",{className:Kce.languageSwitchWrap,children:ie.jsx("select",{onChange:t=>e.changeLanguage(t.target.value),value:e.resolvedLanguage,children:Object.keys(kM).map(t=>ie.jsx("option",{value:t,children:kM[t].nativeName},t))})})}const qce="https://webaverse-studios.github.io/character-assets/manifest.json",$ce="https://webaverse-studios.github.io/character-assets/personality.json";let Tw;const Nw=new H,Im=new H;let Vw,Dw;const eue=1.4,tue=new H(0,1.25,0),c3=new H(-.9786403788721187,1.4036900759197288,.9892635490125085),nue=c3.length(),rue=.35,LM=3.2,WM=new H(0,.8,0),u3=new H(-2.2367993753934425,1.1512971720174363,2.2612065299409223),iue=u3.length(),sue=.5,iu=new H,gi=new bt,oue=new bt,aue=new H(1,0,0),Aue=new H(0,1,0);async function lue(){const r=localStorage.getItem("manifest");if(r)return JSON.parse(r);const t=await(await fetch(qce)).json();return localStorage.setItem("manifest",JSON.stringify(t)),t}async function cue(){const r=localStorage.getItem("personality");if(r)return JSON.parse(r);const t=await(await fetch($ce)).json();return localStorage.setItem("personality",JSON.stringify(t)),t}async function uue(){const r="/3d/Platform.glb";return(await new Jx().loadAsync(r)).scene}async function fue(r){const e=new Zie(r.offset);return await e.loadAnimations(r.animationPath),e}async function due(){const r=await lue(),e=await cue(),t=await uue(),n=new Tre(.1,.1,.5,5),i=new Nre(80,"editor-scene"),s=new rie;return{initialManifest:r,personality:e,sceneModel:t,blinkManager:n,lookatManager:i,effectManager:s}}const hue=()=>{let r,e;const n=due().then(i=>{r="success",e=i},i=>{r="error",e=i});return{read(){if(r==="error")throw e;if(r==="success")return e;throw n}}},pue=hue();function gue(){const{initialManifest:r,personality:e,sceneModel:t,blinkManager:n,lookatManager:i,effectManager:s}=pue.read(),[o,a]=Ie.useState(!1),[A,l]=Ie.useState({}),{camera:c,controls:u,scene:f,resetAvatar:d,setAwaitDisplay:p,setTemplateInfo:h,templateInfo:m,moveCamera:g,setManifest:B,manifest:v}=Ie.useContext(Al),{viewMode:w}=Ie.useContext(Ho);s.camera=c,s.scene=f;const C=()=>{if(s.camera){if([Zt.BIO,Zt.MINT,Zt.CHAT].includes(w)){w===Zt.CHAT?(Tw=eue,Nw.copy(tue),Im.copy(c3),Vw=nue,Dw=rue):(Tw=LM,Nw.copy(WM),Im.copy(u3),Vw=iue,Dw=sue),gi.set(0,0,Vw,1).applyMatrix4(s.camera.projectionMatrix),gi.x/=gi.w,gi.y/=gi.w,gi.z/=gi.w;const S=oue.set(Dw*gi.w,gi.y*gi.w,gi.z*gi.w,gi.w).applyMatrix4(s.camera.projectionMatrixInverse).x,V=iu.set(Im.x,0,Im.z).angleTo(aue);iu.set(S,0,0).applyAxisAngle(Aue,V),iu.add(Nw),g({targetX:iu.x,targetY:iu.y,targetZ:iu.z,distance:Tw})}else g({targetX:0,targetY:WM.y,targetZ:0,distance:LM});u&&([Zt.APPEARANCE,Zt.SAVE,Zt.MINT].includes(w)?u.enabled=!0:u.enabled=!1)}},I=S=>(p(!0),d(),new Promise(V=>{J();async function J(){const z=await fue(v[S]);l(z),h(v[S]),V(v[S])}})),E={[Zt.LANDING]:ie.jsx(Cle,{}),[Zt.APPEARANCE]:ie.jsx(Xce,{animationManager:A,blinkManager:n,lookatManager:i,effectManager:s,fetchNewModel:I}),[Zt.BIO]:ie.jsx($Ae,{templateInfo:m,personality:e}),[Zt.CREATE]:ie.jsx(Ble,{fetchNewModel:I}),[Zt.LOAD]:ie.jsx(SAe,{}),[Zt.SAVE]:ie.jsx(Lae,{}),[Zt.CHAT]:ie.jsx(cae,{templateInfo:m})};let U=0;return Ie.useEffect(()=>{const S=V=>{const J=new Date().getTime(),z=J-U;z<300&&z>10&&V.target.id=="editor-scene"&&a(!o),U=J};return window.addEventListener("touchend",S),window.addEventListener("click",S),()=>{window.removeEventListener("touchend",S),window.removeEventListener("click",S)}},[o]),Ie.useEffect(()=>(C(),[Zt.BIO,Zt.MINT,Zt.CHAT].includes(w)?i.enabled=!1:i.enabled=!0,window.addEventListener("resize",C),()=>{window.removeEventListener("resize",C)}),[w]),Ie.useEffect(()=>{B(r)},[r]),Ie.useContext(eo),ie.jsxs(Ie.Fragment,{children:[ie.jsx("div",{className:"generalTitle",children:"Character Studio"}),ie.jsx(jce,{}),ie.jsx(Yie,{}),ie.jsx(Jie,{manifest:v,sceneModel:t,lookatManager:i}),E[w]]})}const mue=r=>{const e=new QJ(r);return e.pollingInterval=12e3,e};Kw.createRoot(document.getElementById("root")).render(ie.jsx(et.StrictMode,{children:ie.jsx(TJ,{getLibrary:mue,children:ie.jsx(GO,{children:ie.jsx(Mre,{children:ie.jsx(PO,{children:ie.jsx(fne,{children:ie.jsx(une,{children:ie.jsx(Cne,{children:ie.jsx(Ie.Suspense,{children:ie.jsx(gue,{})})})})})})})})})}));export{ZM as c};
